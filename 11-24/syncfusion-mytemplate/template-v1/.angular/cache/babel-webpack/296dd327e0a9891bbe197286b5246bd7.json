{"ast":null,"code":"import { getValue, setValue, isNullOrUndefined } from '@syncfusion/ej2-base';\nimport { clearTemplate, registerEvents } from './util';\nvar refRegex = /Ref$/;\n\nvar ComplexBase =\n/** @class */\nfunction () {\n  function ComplexBase() {\n    this.hasChanges = false;\n    this.propCollection = {};\n    this.dataSource = {};\n    this.tags = [];\n    this.tagObjects = [];\n  }\n\n  ComplexBase.prototype.ngOnInit = function () {\n    this.registeredTemplate = {};\n\n    for (var _i = 0, _a = this.tags; _i < _a.length; _i++) {\n      var tag = _a[_i];\n      var objInstance = getValue('child' + tag.substring(0, 1).toUpperCase() + tag.substring(1), this);\n\n      if (objInstance) {\n        this.tagObjects.push({\n          instance: objInstance,\n          name: tag\n        });\n      }\n    }\n\n    var templateProperties = Object.keys(this);\n\n    for (var i = 0; i < templateProperties.length; i++) {\n      var tempProp = getValue(templateProperties[i], this);\n\n      if (typeof tempProp === 'object' && tempProp.elementRef && !getValue(templateProperties[i].indexOf('Ref') !== -1 ? templateProperties[i] : templateProperties[i] + 'Ref', this)) {\n        setValue(templateProperties[i].indexOf('Ref') !== -1 ? templateProperties[i] : templateProperties[i] + 'Ref', tempProp, this);\n      }\n    }\n\n    templateProperties = Object.keys(this);\n    templateProperties = templateProperties.filter(function (val) {\n      return /Ref$/i.test(val);\n    });\n\n    for (var _b = 0, templateProperties_1 = templateProperties; _b < templateProperties_1.length; _b++) {\n      var tempName = templateProperties_1[_b];\n      var propName = tempName.replace('Ref', '');\n      setValue(propName.replace('_', '.'), getValue(propName, this), this.propCollection);\n    } // Angular 9 compatibility to overcome ngOnchange not get triggered issue\n    // To Update properties to \"this.propCollection\"\n\n\n    var propList = Object.keys(this);\n    /* istanbul ignore next */\n\n    if (this.directivePropList) {\n      for (var k = 0; k < this.directivePropList.length; k++) {\n        var dirPropName = this.directivePropList[k];\n\n        if (propList.indexOf(dirPropName) !== -1 && getValue(dirPropName, this)) {\n          setValue(dirPropName, getValue(dirPropName, this), this.propCollection);\n        }\n      }\n\n      this.hasChanges = true;\n    }\n\n    this.isInitChanges = true;\n  };\n\n  ComplexBase.prototype.registerEvents = function (eventList) {\n    registerEvents(eventList, this, true);\n  };\n\n  ComplexBase.prototype.ngOnChanges = function (changes) {\n    for (var _i = 0, _a = Object.keys(changes); _i < _a.length; _i++) {\n      var propName = _a[_i];\n      var changedVal = changes[propName];\n      this.propCollection[propName] = changedVal.currentValue;\n    }\n\n    this.isUpdated = false;\n    this.hasChanges = true;\n  };\n  /* istanbul ignore next */\n\n\n  ComplexBase.prototype.clearTemplate = function (templateNames) {\n    clearTemplate(this, templateNames);\n  };\n\n  ComplexBase.prototype.getProperties = function () {\n    /* istanbul ignore next */\n    for (var _i = 0, _a = this.tagObjects; _i < _a.length; _i++) {\n      var tagObject = _a[_i];\n      this.propCollection[tagObject.name] = tagObject.instance.getProperties();\n    }\n\n    return this.propCollection;\n  };\n\n  ComplexBase.prototype.isChanged = function () {\n    var result = this.hasChanges;\n\n    if (!isNullOrUndefined(this.propCollection[this.property])) {\n      var tempProps = this.propCollection[this.property];\n      var props = Object.keys(tempProps[0]);\n\n      for (var d = 0; d < props.length; d++) {\n        if (!isNullOrUndefined(this.propCollection[props[d]])) {\n          var val = getValue(props[d], this);\n          var propVal = this.propCollection[this.property][0][props[d]];\n\n          if (!isNullOrUndefined(val) && this.propCollection[props[d]] !== val && propVal !== val) {\n            setValue(props[d], val, this.propCollection[this.property][0]);\n            setValue(props[d], val, this.propCollection);\n            this.hasChanges = true;\n            this.isUpdated = false;\n          }\n        }\n      }\n    }\n    /* istanbul ignore next */\n\n\n    for (var _i = 0, _a = this.tagObjects; _i < _a.length; _i++) {\n      var item = _a[_i];\n      result = result || item.instance.hasChanges;\n    }\n\n    return result || this.hasChanges;\n  };\n\n  ComplexBase.prototype.ngAfterContentChecked = function () {\n    this.hasChanges = this.isChanged();\n\n    if (this.isInitChanges || this.hasChanges) {\n      var templateProperties = Object.keys(this);\n      templateProperties = templateProperties.filter(function (val) {\n        return refRegex.test(val);\n      });\n\n      for (var _i = 0, templateProperties_2 = templateProperties; _i < templateProperties_2.length; _i++) {\n        var tempName = templateProperties_2[_i];\n        var propName = tempName.replace('Ref', '');\n        setValue(propName.replace('_', '.'), getValue(propName, this), this.propCollection);\n      }\n    }\n  };\n\n  ComplexBase.prototype.ngAfterViewChecked = function () {\n    /* istanbul ignore next */\n    if (this.isUpdated) {\n      this.hasChanges = false;\n    }\n  };\n\n  ComplexBase.prototype.ngAfterViewInit = function () {\n    /* istanbul ignore next */\n    this.isInitChanges = false;\n  };\n\n  ComplexBase.prototype.ngOnDestroy = function () {\n    /* istanbul ignore next */\n    this.directivePropList = [];\n  };\n\n  return ComplexBase;\n}();\n\nexport { ComplexBase };\n\nvar ArrayBase =\n/** @class */\nfunction () {\n  function ArrayBase(propertyName) {\n    this.list = [];\n    this.hasChanges = false;\n    this.propertyName = propertyName;\n  }\n\n  ArrayBase.prototype.ngOnInit = function () {\n    this.isInitChanges = true;\n  };\n\n  ArrayBase.prototype.ngAfterContentInit = function () {\n    var _this = this;\n\n    var index = 0;\n    /* istanbul ignore next */\n\n    this.list = this.children.map(function (child) {\n      child.dirIndex = index++;\n      child.property = _this.propertyName;\n      return child;\n    });\n    this.hasChanges = true;\n  };\n\n  ArrayBase.prototype.getProperties = function () {\n    var onlyProp = [];\n\n    for (var _i = 0, _a = this.list; _i < _a.length; _i++) {\n      var item = _a[_i];\n      onlyProp.push(item.getProperties());\n    }\n\n    return onlyProp;\n  };\n\n  ArrayBase.prototype.isChanged = function () {\n    var _this = this;\n\n    var result = false;\n    var index = 0;\n    var isSourceChanged = false; // tslint:disable-next-line\n\n    var childrenDataSource = this.children.map(function (child) {\n      return child;\n    });\n    /* istanbul ignore next */\n\n    if (this.list.length === this.children.length) {\n      for (var i = 0; i < this.list.length; i++) {\n        if (this.list[i].propCollection.dataSource) {\n          if (this.list[i].dataSource && this.list[i].propCollection.dataSource !== this.list[i].dataSource) {\n            this.list[i].propCollection.dataSource = this.list[i].dataSource;\n            this.list[i].hasChanges = true;\n          }\n\n          isSourceChanged = JSON.stringify(this.list[i].propCollection.dataSource) !== JSON.stringify(childrenDataSource[i].propCollection.dataSource);\n        }\n      }\n    }\n\n    this.hasNewChildren = this.list.length !== this.children.length || isSourceChanged ? true : null;\n\n    if (this.hasNewChildren) {\n      this.list = this.children.map(function (child) {\n        child.dirIndex = index++;\n        child.property = _this.propertyName;\n        return child;\n      });\n    }\n    /* istanbul ignore end */\n\n\n    for (var _i = 0, _a = this.list; _i < _a.length; _i++) {\n      var item = _a[_i];\n      result = result || item.hasChanges;\n    }\n\n    return !!this.list.length && result;\n  };\n\n  ArrayBase.prototype.clearTemplate = function (templateNames) {\n    var _this = this;\n    /* istanbul ignore next */\n\n\n    for (var _i = 0, _a = this.list; _i < _a.length; _i++) {\n      var item = _a[_i];\n      item.clearTemplate(templateNames && templateNames.map(function (val) {\n        return new RegExp(_this.propertyName).test(val) ? val.replace(_this.propertyName + '.', '') : val;\n      }));\n    }\n  };\n\n  ArrayBase.prototype.ngAfterContentChecked = function () {\n    this.hasChanges = this.isChanged();\n\n    for (var i = 0; i < this.list.length; i++) {\n      if (getValue('childColumns', this.list[i]) && getValue('property', this.list[i]) === 'columns') {\n        setValue('columns', getValue('childColumns', this.list[i]).getProperties(), this.list[i].propCollection);\n      }\n\n      this.list[i].isUpdated = true;\n    }\n  };\n\n  ArrayBase.prototype.ngAfterViewInit = function () {\n    this.isInitChanges = false;\n  };\n\n  ArrayBase.prototype.ngOnDestroy = function () {\n    this.list = [];\n  };\n\n  return ArrayBase;\n}();\n\nexport { ArrayBase };","map":{"version":3,"sources":["D:/angularStarter/11-24/syncfusion-mytemplate/template-v1/node_modules/@syncfusion/ej2-angular-base/src/complex-array-base.js"],"names":["getValue","setValue","isNullOrUndefined","clearTemplate","registerEvents","refRegex","ComplexBase","hasChanges","propCollection","dataSource","tags","tagObjects","prototype","ngOnInit","registeredTemplate","_i","_a","length","tag","objInstance","substring","toUpperCase","push","instance","name","templateProperties","Object","keys","i","tempProp","elementRef","indexOf","filter","val","test","_b","templateProperties_1","tempName","propName","replace","propList","directivePropList","k","dirPropName","isInitChanges","eventList","ngOnChanges","changes","changedVal","currentValue","isUpdated","templateNames","getProperties","tagObject","isChanged","result","property","tempProps","props","d","propVal","item","ngAfterContentChecked","templateProperties_2","ngAfterViewChecked","ngAfterViewInit","ngOnDestroy","ArrayBase","propertyName","list","ngAfterContentInit","_this","index","children","map","child","dirIndex","onlyProp","isSourceChanged","childrenDataSource","JSON","stringify","hasNewChildren","RegExp"],"mappings":"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","sourcesContent":["import { getValue, setValue, isNullOrUndefined } from '@syncfusion/ej2-base';\nimport { clearTemplate, registerEvents } from './util';\nvar refRegex = /Ref$/;\nvar ComplexBase = /** @class */ (function () {\n    function ComplexBase() {\n        this.hasChanges = false;\n        this.propCollection = {};\n        this.dataSource = {};\n        this.tags = [];\n        this.tagObjects = [];\n    }\n    ComplexBase.prototype.ngOnInit = function () {\n        this.registeredTemplate = {};\n        for (var _i = 0, _a = this.tags; _i < _a.length; _i++) {\n            var tag = _a[_i];\n            var objInstance = getValue('child' + tag.substring(0, 1).toUpperCase() + tag.substring(1), this);\n            if (objInstance) {\n                this.tagObjects.push({ instance: objInstance, name: tag });\n            }\n        }\n        var templateProperties = Object.keys(this);\n        for (var i = 0; i < templateProperties.length; i++) {\n            var tempProp = getValue(templateProperties[i], this);\n            if (typeof tempProp === 'object' && tempProp.elementRef && !getValue(templateProperties[i].indexOf('Ref') !== -1 ? templateProperties[i] : templateProperties[i] + 'Ref', this)) {\n                setValue(templateProperties[i].indexOf('Ref') !== -1 ? templateProperties[i] : templateProperties[i] + 'Ref', tempProp, this);\n            }\n        }\n        templateProperties = Object.keys(this);\n        templateProperties = templateProperties.filter(function (val) {\n            return /Ref$/i.test(val);\n        });\n        for (var _b = 0, templateProperties_1 = templateProperties; _b < templateProperties_1.length; _b++) {\n            var tempName = templateProperties_1[_b];\n            var propName = tempName.replace('Ref', '');\n            setValue(propName.replace('_', '.'), getValue(propName, this), this.propCollection);\n        }\n        // Angular 9 compatibility to overcome ngOnchange not get triggered issue\n        // To Update properties to \"this.propCollection\"\n        var propList = Object.keys(this);\n        /* istanbul ignore next */\n        if (this.directivePropList) {\n            for (var k = 0; k < this.directivePropList.length; k++) {\n                var dirPropName = this.directivePropList[k];\n                if (propList.indexOf(dirPropName) !== -1 && getValue(dirPropName, this)) {\n                    setValue(dirPropName, getValue(dirPropName, this), this.propCollection);\n                }\n            }\n            this.hasChanges = true;\n        }\n        this.isInitChanges = true;\n    };\n    ComplexBase.prototype.registerEvents = function (eventList) {\n        registerEvents(eventList, this, true);\n    };\n    ComplexBase.prototype.ngOnChanges = function (changes) {\n        for (var _i = 0, _a = Object.keys(changes); _i < _a.length; _i++) {\n            var propName = _a[_i];\n            var changedVal = changes[propName];\n            this.propCollection[propName] = changedVal.currentValue;\n        }\n        this.isUpdated = false;\n        this.hasChanges = true;\n    };\n    /* istanbul ignore next */\n    ComplexBase.prototype.clearTemplate = function (templateNames) {\n        clearTemplate(this, templateNames);\n    };\n    ComplexBase.prototype.getProperties = function () {\n        /* istanbul ignore next */\n        for (var _i = 0, _a = this.tagObjects; _i < _a.length; _i++) {\n            var tagObject = _a[_i];\n            this.propCollection[tagObject.name] = tagObject.instance.getProperties();\n        }\n        return this.propCollection;\n    };\n    ComplexBase.prototype.isChanged = function () {\n        var result = this.hasChanges;\n        if (!isNullOrUndefined(this.propCollection[this.property])) {\n            var tempProps = this.propCollection[this.property];\n            var props = Object.keys(tempProps[0]);\n            for (var d = 0; d < props.length; d++) {\n                if (!isNullOrUndefined(this.propCollection[props[d]])) {\n                    var val = getValue(props[d], this);\n                    var propVal = this.propCollection[this.property][0][props[d]];\n                    if (!isNullOrUndefined(val) && this.propCollection[props[d]] !== val\n                        && propVal !== val) {\n                        setValue(props[d], val, this.propCollection[this.property][0]);\n                        setValue(props[d], val, this.propCollection);\n                        this.hasChanges = true;\n                        this.isUpdated = false;\n                    }\n                }\n            }\n        }\n        /* istanbul ignore next */\n        for (var _i = 0, _a = this.tagObjects; _i < _a.length; _i++) {\n            var item = _a[_i];\n            result = result || item.instance.hasChanges;\n        }\n        return result || this.hasChanges;\n    };\n    ComplexBase.prototype.ngAfterContentChecked = function () {\n        this.hasChanges = this.isChanged();\n        if (this.isInitChanges || this.hasChanges) {\n            var templateProperties = Object.keys(this);\n            templateProperties = templateProperties.filter(function (val) {\n                return refRegex.test(val);\n            });\n            for (var _i = 0, templateProperties_2 = templateProperties; _i < templateProperties_2.length; _i++) {\n                var tempName = templateProperties_2[_i];\n                var propName = tempName.replace('Ref', '');\n                setValue(propName.replace('_', '.'), getValue(propName, this), this.propCollection);\n            }\n        }\n    };\n    ComplexBase.prototype.ngAfterViewChecked = function () {\n        /* istanbul ignore next */\n        if (this.isUpdated) {\n            this.hasChanges = false;\n        }\n    };\n    ComplexBase.prototype.ngAfterViewInit = function () {\n        /* istanbul ignore next */\n        this.isInitChanges = false;\n    };\n    ComplexBase.prototype.ngOnDestroy = function () {\n        /* istanbul ignore next */\n        this.directivePropList = [];\n    };\n    return ComplexBase;\n}());\nexport { ComplexBase };\nvar ArrayBase = /** @class */ (function () {\n    function ArrayBase(propertyName) {\n        this.list = [];\n        this.hasChanges = false;\n        this.propertyName = propertyName;\n    }\n    ArrayBase.prototype.ngOnInit = function () {\n        this.isInitChanges = true;\n    };\n    ArrayBase.prototype.ngAfterContentInit = function () {\n        var _this = this;\n        var index = 0;\n        /* istanbul ignore next */\n        this.list = this.children.map(function (child) {\n            child.dirIndex = index++;\n            child.property = _this.propertyName;\n            return child;\n        });\n        this.hasChanges = true;\n    };\n    ArrayBase.prototype.getProperties = function () {\n        var onlyProp = [];\n        for (var _i = 0, _a = this.list; _i < _a.length; _i++) {\n            var item = _a[_i];\n            onlyProp.push(item.getProperties());\n        }\n        return onlyProp;\n    };\n    ArrayBase.prototype.isChanged = function () {\n        var _this = this;\n        var result = false;\n        var index = 0;\n        var isSourceChanged = false;\n        // tslint:disable-next-line\n        var childrenDataSource = this.children.map(function (child) {\n            return child;\n        });\n        /* istanbul ignore next */\n        if (this.list.length === this.children.length) {\n            for (var i = 0; i < this.list.length; i++) {\n                if (this.list[i].propCollection.dataSource) {\n                    if (this.list[i].dataSource && this.list[i].propCollection.dataSource !== this.list[i].dataSource) {\n                        this.list[i].propCollection.dataSource = this.list[i].dataSource;\n                        this.list[i].hasChanges = true;\n                    }\n                    isSourceChanged = (JSON.stringify(this.list[i].propCollection.dataSource) !==\n                        JSON.stringify(childrenDataSource[i].propCollection.dataSource));\n                }\n            }\n        }\n        this.hasNewChildren = (this.list.length !== this.children.length || isSourceChanged) ? true : null;\n        if (this.hasNewChildren) {\n            this.list = this.children.map(function (child) {\n                child.dirIndex = index++;\n                child.property = _this.propertyName;\n                return child;\n            });\n        }\n        /* istanbul ignore end */\n        for (var _i = 0, _a = this.list; _i < _a.length; _i++) {\n            var item = _a[_i];\n            result = result || item.hasChanges;\n        }\n        return !!this.list.length && result;\n    };\n    ArrayBase.prototype.clearTemplate = function (templateNames) {\n        var _this = this;\n        /* istanbul ignore next */\n        for (var _i = 0, _a = this.list; _i < _a.length; _i++) {\n            var item = _a[_i];\n            item.clearTemplate(templateNames && templateNames.map(function (val) {\n                return new RegExp(_this.propertyName).test(val) ? val.replace(_this.propertyName + '.', '') : val;\n            }));\n        }\n    };\n    ArrayBase.prototype.ngAfterContentChecked = function () {\n        this.hasChanges = this.isChanged();\n        for (var i = 0; i < this.list.length; i++) {\n            if (getValue('childColumns', this.list[i]) && getValue('property', this.list[i]) === 'columns') {\n                setValue('columns', getValue('childColumns', this.list[i]).getProperties(), this.list[i].propCollection);\n            }\n            this.list[i].isUpdated = true;\n        }\n    };\n    ArrayBase.prototype.ngAfterViewInit = function () {\n        this.isInitChanges = false;\n    };\n    ArrayBase.prototype.ngOnDestroy = function () {\n        this.list = [];\n    };\n    return ArrayBase;\n}());\nexport { ArrayBase };\n"]},"metadata":{},"sourceType":"module"}