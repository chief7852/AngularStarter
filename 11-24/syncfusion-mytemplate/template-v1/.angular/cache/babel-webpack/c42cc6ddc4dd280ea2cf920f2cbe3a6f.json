{"ast":null,"code":"import _assertThisInitialized from \"D:/angularStarter/11-24/syncfusion-mytemplate/template-v1/node_modules/@babel/runtime/helpers/esm/assertThisInitialized\";\nimport _get from \"D:/angularStarter/11-24/syncfusion-mytemplate/template-v1/node_modules/@babel/runtime/helpers/esm/get\";\nimport _getPrototypeOf from \"D:/angularStarter/11-24/syncfusion-mytemplate/template-v1/node_modules/@babel/runtime/helpers/esm/getPrototypeOf\";\nimport _inherits from \"D:/angularStarter/11-24/syncfusion-mytemplate/template-v1/node_modules/@babel/runtime/helpers/esm/inherits\";\nimport _createSuper from \"D:/angularStarter/11-24/syncfusion-mytemplate/template-v1/node_modules/@babel/runtime/helpers/esm/createSuper\";\nimport _toConsumableArray from \"D:/angularStarter/11-24/syncfusion-mytemplate/template-v1/node_modules/@babel/runtime/helpers/esm/toConsumableArray\";\nimport _classCallCheck from \"D:/angularStarter/11-24/syncfusion-mytemplate/template-v1/node_modules/@babel/runtime/helpers/esm/classCallCheck\";\nimport _createClass from \"D:/angularStarter/11-24/syncfusion-mytemplate/template-v1/node_modules/@babel/runtime/helpers/esm/createClass\";\nimport _createForOfIteratorHelper from \"D:/angularStarter/11-24/syncfusion-mytemplate/template-v1/node_modules/@babel/runtime/helpers/esm/createForOfIteratorHelper\";\nimport { Animation, Browser, ChildProperty, Collection, Complex, Component, Draggable, Event, EventHandler, HijriParser, Internationalization, KeyboardEvents, L10n, NotifyPropertyChanges, Property, SanitizeHtmlHelper, Touch, addClass, append, classList, cldrData, closest, compile, createElement, extend, formatUnit, getDefaultDateObject, getElement, getValue, isNullOrUndefined, prepend, print, remove, removeClass, setStyleAttribute } from '@syncfusion/ej2-base';\nimport { Dialog, Popup, Tooltip, createSpinner, hideSpinner as _hideSpinner, isCollide, showSpinner as _showSpinner } from '@syncfusion/ej2-popups';\nimport { Toolbar, TreeView } from '@syncfusion/ej2-navigations';\nimport { Calendar, DatePicker, DateTimePicker } from '@syncfusion/ej2-calendars';\nimport { DataManager, Deferred, Predicate, Query } from '@syncfusion/ej2-data';\nimport { Button, CheckBox, RadioButton } from '@syncfusion/ej2-buttons';\nimport { FormValidator, Input, NumericTextBox } from '@syncfusion/ej2-inputs';\nimport { DropDownList, MultiSelect } from '@syncfusion/ej2-dropdowns';\nimport { ListBase } from '@syncfusion/ej2-lists';\nimport { Workbook } from '@syncfusion/ej2-excel-export';\n/**\n * Constants\n */\n\n/** @private */\n\nvar _cellClick = 'cellClick';\n/** @private */\n\nvar cellDoubleClick = 'cellDoubleClick';\n/** @private */\n\nvar moreEventsClick = 'moreEventsClick';\n/** @private */\n\nvar select = 'select';\n/** @private */\n\nvar hover = 'hover';\n/** @private */\n\nvar actionBegin = 'actionBegin';\n/** @private */\n\nvar actionComplete = 'actionComplete';\n/** @private */\n\nvar actionFailure = 'actionFailure';\n/** @private */\n\nvar navigating = 'navigating';\n/** @private */\n\nvar renderCell = 'renderCell';\n/** @private */\n\nvar _eventClick = 'eventClick';\n/** @private */\n\nvar eventRendered = 'eventRendered';\n/** @private */\n\nvar dataBinding = 'dataBinding';\n/** @private */\n\nvar dataBound = 'dataBound';\n/** @private */\n\nvar popupOpen = 'popupOpen';\n/** @private */\n\nvar popupClose = 'popupClose';\n/** @private */\n\nvar _dragStart = 'dragStart';\n/** @private */\n\nvar _drag = 'drag';\n/** @private */\n\nvar _dragStop = 'dragStop';\n/** @private */\n\nvar _resizeStart = 'resizeStart';\n/** @private */\n\nvar _resizing = 'resizing';\n/** @private */\n\nvar _resizeStop = 'resizeStop';\n/** @private */\n\nvar inlineClick = 'inlineClick';\n/**\n * Specifies schedule internal events\n */\n\n/** @private */\n\nvar initialLoad = 'initial-load';\n/** @private */\n\nvar initialEnd = 'initial-end';\n/** @private */\n\nvar print$1 = 'print';\n/** @private */\n\nvar dataReady = 'data-ready';\n/** @private */\n\nvar eventsLoaded = 'events-loaded';\n/** @private */\n\nvar contentReady = 'content-ready';\n/** @private */\n\nvar scroll = 'scroll';\n/** @private */\n\nvar virtualScroll = 'virtual-scroll';\n/** @private */\n\nvar scrollUiUpdate = 'scroll-ui-update';\n/** @private */\n\nvar uiUpdate = 'ui-update';\n/** @private */\n\nvar documentClick = 'document-click';\n/** @private */\n\nvar _cellMouseDown = 'cell-mouse-down';\n/* eslint-disable @typescript-eslint/no-explicit-any */\n\n/**\n * Schedule common utilities\n */\n\nvar WEEK_LENGTH = 7;\nvar MS_PER_DAY = 86400000;\nvar MS_PER_MINUTE = 60000;\n/**\n * Method to get height from element\n *\n * @param {Element} container Accepts the DOM element\n * @param {string} elementClass Accepts the element class\n * @returns {number} Returns the height of the element\n */\n\nfunction getElementHeightFromClass(container, elementClass) {\n  var height = 0;\n  var el = createElement('div', {\n    className: elementClass\n  }).cloneNode();\n  el.style.visibility = 'hidden';\n  el.style.position = 'absolute';\n  container.appendChild(el);\n  height = el.getBoundingClientRect().height;\n  remove(el);\n  return height;\n}\n/**\n * Method to get translateY value\n *\n * @param {HTMLElement | Element} element Accepts the DOM element\n * @returns {number} Returns the translateY value of given element\n */\n\n\nfunction getTranslateY(element) {\n  var style = getComputedStyle(element);\n  return window.WebKitCSSMatrix ? new WebKitCSSMatrix(style.webkitTransform).m42 : 0;\n}\n/**\n * Method to get week first date\n *\n * @param {Date} date Accepts the date object\n * @param {number} firstDayOfWeek Accepts the first day of week number\n * @returns {Date} Returns the date object\n */\n\n\nfunction getWeekFirstDate(date, firstDayOfWeek) {\n  var date1 = new Date(date.getTime());\n  firstDayOfWeek = (firstDayOfWeek - date1.getDay() + 7 * -1) % 7;\n  return new Date(date1.setDate(date1.getDate() + firstDayOfWeek));\n}\n/**\n * Method to get week last date\n *\n * @param {Date} date Accepts the date object\n * @param {number} firstDayOfWeek Accepts the first day of week number\n * @returns {Date} Returns the date object\n */\n\n\nfunction getWeekLastDate(date, firstDayOfWeek) {\n  var weekFirst = getWeekFirstDate(date, firstDayOfWeek);\n  var weekLast = new Date(weekFirst.getFullYear(), weekFirst.getMonth(), weekFirst.getDate() + 6);\n  return new Date(weekLast.getTime());\n}\n/**\n * Method to get first date of month\n *\n * @param {Date} date Accepts the date object\n * @returns {Date} Returns the date object\n */\n\n\nfunction firstDateOfMonth(date) {\n  return new Date(date.getFullYear(), date.getMonth(), 1);\n}\n/**\n * Method to get last date of month\n *\n * @param {Date} date Accepts the date object\n * @returns {Date} Returns the date object\n */\n\n\nfunction lastDateOfMonth(date) {\n  return new Date(date.getFullYear(), date.getMonth() + 1, 0);\n}\n/**\n * Method to get week number\n *\n * @param {Date} date Accepts the date object\n * @returns {number} Returns the week number\n */\n\n\nfunction getWeekNumber(date) {\n  var date1 = new Date(date.getFullYear(), 0, 1).valueOf();\n  var currentDate = new Date(date.getFullYear(), date.getMonth(), date.getDate()).valueOf();\n  var dayOfYear = (currentDate - date1 + MS_PER_DAY) / MS_PER_DAY;\n  return Math.ceil(dayOfYear / 7);\n}\n/**\n * Method to get week middle date\n *\n * @param {Date} weekFirst Accepts the week first date object\n * @param {Date} weekLast Accepts the week last date object\n * @returns {Date} Returns the date object\n */\n\n\nfunction getWeekMiddleDate(weekFirst, weekLast) {\n  return new Date(weekLast.valueOf() - (weekLast.valueOf() - weekFirst.valueOf()) / 2);\n}\n/**\n * Method to set time to date object\n *\n * @param {Date} date Accepts the date object\n * @param {number} time Accepts the milliseconds\n * @returns {Date} Returns the date object\n */\n\n\nfunction setTime(date, time) {\n  var tzOffsetBefore = date.getTimezoneOffset();\n  var d = new Date(date.getTime() + time);\n  var tzOffsetDiff = d.getTimezoneOffset() - tzOffsetBefore;\n  date.setTime(d.getTime() + tzOffsetDiff * MS_PER_MINUTE);\n  return date;\n}\n/**\n * Method the reset hours in date object\n *\n * @param {Date} date Accepts the date object\n * @returns {Date} Returns the date object\n */\n\n\nfunction resetTime(date) {\n  return new Date(date.getFullYear(), date.getMonth(), date.getDate());\n}\n/**\n * Method to get milliseconds from date object\n *\n * @param {Date} date Accepts the date object\n * @returns {number} Returns the milliseconds from date object\n */\n\n\nfunction getDateInMs(date) {\n  var localOffset = new Date(date.getFullYear(), date.getMonth(), date.getDate(), 0, 0, 0).getTimezoneOffset();\n  var dateOffset = date.getTimezoneOffset();\n  var timezoneOffset = dateOffset - localOffset;\n  return date.getTime() - new Date(date.getFullYear(), date.getMonth(), date.getDate(), 0, 0, 0).getTime() - timezoneOffset * 60 * 1000;\n}\n/**\n * Method to get date count between two dates\n *\n * @param {Date} startDate Accepts the date object\n * @param {Date} endDate Accepts the date object\n * @returns {number} Returns the date count\n */\n\n\nfunction getDateCount(startDate, endDate) {\n  return Math.ceil((endDate.getTime() - startDate.getTime()) / MS_PER_DAY);\n}\n/**\n * Method to add no of days in date object\n *\n * @param {Date} date Accepts the date object\n * @param {number} noOfDays Accepts the number of days count\n * @returns {Date} Returns the date object\n */\n\n\nfunction addDays(date, noOfDays) {\n  date = new Date('' + date);\n  return new Date(date.setDate(date.getDate() + noOfDays));\n}\n/**\n * Method to add no of months in date object\n *\n * @param {Date} date Accepts the date object\n * @param {number} noOfMonths Accepts the number of month count\n * @returns {Date} Returns the date object\n */\n\n\nfunction addMonths(date, noOfMonths) {\n  date = new Date('' + date);\n  var day = date.getDate();\n  date.setDate(1);\n  date.setMonth(date.getMonth() + noOfMonths);\n  date.setDate(Math.min(day, getMaxDays(date)));\n  return date;\n}\n/**\n * Method to add no of years in date object\n *\n * @param {Date} date Accepts the date object\n * @param {number} noOfYears Accepts the number of month count\n * @returns {Date} Returns the date object\n */\n\n\nfunction addYears(date, noOfYears) {\n  date = new Date('' + date);\n  var day = date.getDate();\n  date.setDate(1);\n  date.setFullYear(date.getFullYear() + noOfYears);\n  date.setDate(Math.min(day, getMaxDays(date)));\n  return date;\n}\n/**\n * Method to get start and end hours\n *\n * @param {Date} date Accepts the date object\n * @param {Date} startHour Accepts the start hour date object\n * @param {Date} endHour Accepts the end hour date object\n * @returns {Object} Returns the start and end hour date objects\n */\n\n\nfunction getStartEndHours(date, startHour, endHour) {\n  var date1 = new Date(date.getTime());\n  date1.setHours(startHour.getHours());\n  date1.setMinutes(startHour.getMinutes());\n  date1.setSeconds(startHour.getSeconds());\n  var date2 = new Date(date.getTime());\n\n  if (endHour.getHours() === 0) {\n    date2 = addDays(date2, 1);\n  } else {\n    date2.setHours(endHour.getHours());\n    date2.setMinutes(endHour.getMinutes());\n    date2.setSeconds(endHour.getSeconds());\n  }\n\n  return {\n    startHour: date1,\n    endHour: date2\n  };\n}\n/**\n * Method to get month last date\n *\n * @param {Date} date Accepts the date object\n * @returns {number} Returns the month last date\n */\n\n\nfunction getMaxDays(date) {\n  return lastDateOfMonth(date).getDate();\n}\n/**\n * Method to get days count between two dates\n *\n * @param {Date} startDate Accepts the date object\n * @param {Date} endDate Accepts the date object\n * @returns {number} Returns the days count\n */\n\n\nfunction getDaysCount(startDate, endDate) {\n  var strTime = resetTime(new Date(startDate));\n  var endTime = resetTime(new Date(endDate));\n  return Math.round((endTime.getTime() - strTime.getTime()) / MS_PER_DAY);\n}\n/**\n * Method to get date object from date string\n *\n * @param {string} date Accepts the date string\n * @returns {Date} Returns the date object\n */\n\n\nfunction getDateFromString(date) {\n  return date.indexOf('Date') !== -1 ? new Date(parseInt(date.match(/\\d+/g).toString(), 10)) : date.indexOf('T') !== -1 ? new Date(date) : new Date(date.replace(/-/g, '/'));\n}\n/** @private */\n\n\nvar scrollWidth = null;\n/**\n * Method to get scrollbar width\n *\n * @returns {number} Returns the scrollbar width\n * @private\n */\n\nfunction getScrollBarWidth() {\n  if (scrollWidth !== null) {\n    return scrollWidth;\n  }\n\n  var divNode = createElement('div');\n  var value = 0;\n  divNode.style.cssText = 'width:100px;height: 100px;overflow: scroll;position: absolute;top: -9999px;';\n  document.body.appendChild(divNode);\n  var ratio = devicePixelRatio ? devicePixelRatio.toFixed(2) === '1.10' || devicePixelRatio <= 1 ? Math.ceil(devicePixelRatio % 1) : Math.floor(devicePixelRatio % 1) : 0;\n  value = divNode.offsetWidth - divNode.clientWidth - ratio | 0;\n  document.body.removeChild(divNode);\n  return scrollWidth = value;\n}\n/**\n * Method to find the index from data collection\n *\n * @param {Object} data Accepts the data as object\n * @param {string} field Accepts the field name\n * @param {string} value Accepts the value name\n * @param {Object} event Accepts the data as object\n * @param {Object[]} resourceCollection Accepts the data collections\n * @returns {number} Returns the index number\n */\n// eslint-disable-next-line max-len\n\n\nfunction findIndexInData(data, field, value, event, resourceCollection) {\n  for (var i = 0, length = data.length; i < length; i++) {\n    if (data[i][field] === value) {\n      if (event) {\n        var _field = resourceCollection.slice(-2)[0].field;\n        var res = event[_field] instanceof Array ? event[_field] : [event[_field]];\n        var resData = res.join(',');\n\n        if (resData.includes(data[i][resourceCollection.slice(-1)[0].groupIDField])) {\n          return i;\n        }\n      } else {\n        return i;\n      }\n    }\n  }\n\n  return -1;\n}\n/**\n * Method to get element outer height\n *\n * @param {HTMLElement} element Accepts the DOM element\n * @returns {number} Returns the outer height of the given element\n */\n\n\nfunction getOuterHeight(element) {\n  var style = getComputedStyle(element);\n  return element.offsetHeight + (parseInt(style.marginTop, 10) || 0) + (parseInt(style.marginBottom, 10) || 0);\n}\n/**\n * Method to remove child elements\n *\n * @param {HTMLElement | Element} element Accepts the DOM element\n * @returns {void}\n */\n\n\nfunction removeChildren(element) {\n  var elementChildren = [].slice.call(element.children);\n\n  var _iterator = _createForOfIteratorHelper(elementChildren),\n      _step;\n\n  try {\n    for (_iterator.s(); !(_step = _iterator.n()).done;) {\n      var elementChild = _step.value;\n\n      if (!elementChild.classList.contains('blazor-template')) {\n        element.removeChild(elementChild);\n      }\n    }\n  } catch (err) {\n    _iterator.e(err);\n  } finally {\n    _iterator.f();\n  }\n}\n/**\n * Method to check DST is present or not in date object\n *\n * @param {Date} date Accepts the date object\n * @returns {boolean} Returns the boolean value for either DST is present or not\n */\n\n\nfunction isDaylightSavingTime(date) {\n  var jan = new Date(date.getFullYear(), 0, 1);\n  var jul = new Date(date.getFullYear(), 6, 1);\n  return date.getTimezoneOffset() < Math.max(jan.getTimezoneOffset(), jul.getTimezoneOffset());\n}\n/**\n * Method to get UTC time value from date\n *\n * @param {Date} date Accepts the date\n * @returns {number} Returns the UTC time value\n */\n\n\nfunction getUniversalTime(date) {\n  var year = date.getFullYear();\n  var month = date.getMonth();\n  var day = date.getDate();\n  var hours = date.getHours();\n  var minutes = date.getMinutes();\n  var seconds = date.getSeconds();\n  var milliseconds = date.getMilliseconds();\n  return Date.UTC(year, month, day, hours, minutes, seconds, milliseconds);\n}\n/**\n * Method to check the device\n *\n * @returns {boolean} Returns the boolean value for either device is present or not.\n */\n\n\nfunction isMobile() {\n  return window.navigator.userAgent.toLowerCase().indexOf('mobi') > -1;\n}\n/**\n * Method to check the IPad device\n *\n * @returns {boolean} Returns the boolean value for either IPad device is present or not.\n */\n\n\nfunction isIPadDevice() {\n  return window.navigator.userAgent.toLowerCase().indexOf('ipad') > -1;\n}\n/**\n * Method to capitalize the first word in string\n *\n * @param {string} inputString Accepts the string value\n * @param {string} type Accepts the string type\n * @returns {string} Returns the output string\n */\n\n\nfunction capitalizeFirstWord(inputString, type) {\n  if (type === 'multiple') {\n    inputString = inputString.split(' ').map(function (e) {\n      return e.charAt(0).toLocaleUpperCase() + e.substring(1);\n    }).join(' ');\n  } else if (type === 'single') {\n    if (inputString[0] >= '0' && inputString[0] <= '9') {\n      var array = inputString.match(/[a-zA-Z]/);\n      inputString = isNullOrUndefined(array) ? inputString : inputString.slice(0, array.index) + inputString[array.index].toLocaleUpperCase() + inputString.slice(array.index + 1);\n    }\n\n    inputString = inputString[0].toLocaleUpperCase() + inputString.slice(1);\n  }\n\n  return inputString;\n}\n/**\n * CSS Constants\n */\n\n/** @private */\n\n\nvar ROOT = 'e-schedule';\n/** @private */\n\nvar RTL = 'e-rtl';\n/** @private */\n\nvar DEVICE_CLASS = 'e-device';\n/** @private */\n\nvar MULTI_DRAG = 'e-multi-drag';\n/** @private */\n\nvar ICON = 'e-icons';\n/** @private */\n\nvar ENABLE_CLASS = 'e-enable';\n/** @private */\n\nvar DISABLE_CLASS = 'e-disable';\n/** @private */\n\nvar TABLE_CONTAINER_CLASS = 'e-table-container';\n/** @private */\n\nvar SCHEDULE_TABLE_CLASS = 'e-schedule-table';\n/** @private */\n\nvar ALLDAY_CELLS_CLASS = 'e-all-day-cells';\n/** @private */\n\nvar HEADER_POPUP_CLASS = 'e-header-popup';\n/** @private */\n\nvar HEADER_CALENDAR_CLASS = 'e-header-calendar';\n/** @private */\n\nvar ALLDAY_ROW_CLASS = 'e-all-day-row';\n/** @private */\n\nvar CONTENT_TABLE_CLASS = 'e-content-table';\n/** @private */\n\nvar WORK_CELLS_CLASS = 'e-work-cells';\n/** @private */\n\nvar WORK_HOURS_CLASS = 'e-work-hours';\n/** @private */\n\nvar POPUP_OPEN = 'e-popup-open';\n/** @private */\n\n/** @private */\n\nvar DATE_HEADER_WRAP_CLASS = 'e-date-header-wrap';\n/** @private */\n\nvar DATE_HEADER_CONTAINER_CLASS = 'e-date-header-container';\n/** @private */\n\nvar HEADER_CELLS_CLASS = 'e-header-cells';\n/** @private */\n\nvar WORKDAY_CLASS = 'e-work-days';\n/** @private */\n\nvar OTHERMONTH_CLASS = 'e-other-month';\n/** @private */\n\nvar CURRENT_DAY_CLASS = 'e-current-day';\n/** @private */\n\nvar CURRENTDATE_CLASS = 'e-current-date';\n/** @private */\n\nvar CURRENT_PANEL_CLASS = 'e-current-panel';\n/** @private */\n\nvar PREVIOUS_PANEL_CLASS = 'e-previous-panel';\n/** @private */\n\nvar NEXT_PANEL_CLASS = 'e-next-panel';\n/** @private */\n\nvar PREVIOUS_DATE_CLASS = 'e-prev';\n/** @private */\n\nvar NEXT_DATE_CLASS = 'e-next';\n/** @private */\n\nvar TRANSLATE_CLASS = 'e-translate';\n/** @private */\n\nvar LEFT_INDENT_CLASS = 'e-left-indent';\n/** @private */\n\nvar LEFT_INDENT_WRAP_CLASS = 'e-left-indent-wrap';\n/** @private */\n\nvar EVENT_TABLE_CLASS = 'e-event-table';\n/** @private */\n\nvar RESOURCE_LEFT_TD_CLASS = 'e-resource-left-td';\n/** @private */\n\nvar RESOURCE_GROUP_CELLS_CLASS = 'e-resource-group-cells';\n/** @private */\n\nvar RESOURCE_TEXT_CLASS = 'e-resource-text';\n/** @private */\n\nvar RESOURCE_COLUMN_WRAP_CLASS = 'e-resource-column-wrap';\n/** @private */\n\nvar RESOURCE_COLUMN_TABLE_CLASS = 'e-resource-column-table';\n/** @private */\n\nvar RESOURCE_CHILD_CLASS = 'e-child-node';\n/** @private */\n\nvar RESOURCE_PARENT_CLASS = 'e-parent-node';\n/** @private */\n\nvar RESOURCE_EXPAND_CLASS = 'e-resource-expand';\n/** @private */\n\nvar RESOURCE_COLLAPSE_CLASS = 'e-resource-collapse';\n/** @private */\n\nvar RESOURCE_TREE_ICON_CLASS = 'e-resource-tree-icon';\n/** @private */\n\nvar RESOURCE_CELLS_CLASS = 'e-resource-cells';\n/** @private */\n\nvar TIME_CELLS_WRAP_CLASS = 'e-time-cells-wrap';\n/** @private */\n\nvar TIME_CELLS_CLASS = 'e-time-cells';\n/** @private */\n\nvar TIME_SLOT_CLASS = 'e-time-slots';\n/** @private */\n\nvar ALTERNATE_CELLS_CLASS = 'e-alternate-cells';\n/** @private */\n\nvar CURRENT_TIME_CLASS = 'e-current-time';\n/** @private */\n\nvar CURRENT_TIMELINE_CLASS = 'e-current-timeline';\n/** @private */\n\nvar PREVIOUS_TIMELINE_CLASS = 'e-previous-timeline';\n/** @private */\n\nvar HIDE_CHILDS_CLASS = 'e-hide-childs';\n/** @private */\n\nvar SCROLL_CONTAINER_CLASS = 'e-scroll-container';\n/** @private */\n\n/** @private */\n\nvar TIMELINE_WRAPPER_CLASS = 'e-timeline-wrapper';\n/** @private */\n\nvar APPOINTMENT_WRAPPER_CLASS = 'e-appointment-wrapper';\n/** @private */\n\nvar DAY_WRAPPER_CLASS = 'e-day-wrapper';\n/** @private */\n\nvar TOOLBAR_CONTAINER = 'e-schedule-toolbar-container';\n/** @private */\n\nvar RESOURCE_TOOLBAR_CONTAINER = 'e-schedule-resource-toolbar-container';\n/** @private */\n\nvar HEADER_TOOLBAR = 'e-schedule-toolbar';\n/** @private */\n\nvar RESOURCE_HEADER_TOOLBAR = 'e-schedule-resource-toolbar';\n/** @private */\n\nvar SELECTED_CELL_CLASS = 'e-selected-cell';\n/** @private */\n\nvar WEEK_NUMBER_WRAPPER_CLASS = 'e-week-number-wrapper';\n/** @private */\n\nvar WEEK_NUMBER_CLASS = 'e-week-number';\n/** @private */\n\nvar APPOINTMENT_WRAP_CLASS = 'e-appointment-wrap';\n/** @private */\n\nvar WRAPPER_CONTAINER_CLASS = 'e-wrapper-container';\n/** @private */\n\nvar APPOINTMENT_CONTAINER_CLASS = 'e-appointment-container';\n/** @private */\n\nvar APPOINTMENT_CLASS = 'e-appointment';\n/** @private */\n\nvar BLOCK_APPOINTMENT_CLASS = 'e-block-appointment';\n/** @private */\n\nvar BLOCK_INDICATOR_CLASS = 'e-block-indicator';\n/** @private */\n\nvar APPOINTMENT_BORDER = 'e-appointment-border';\n/** @private */\n\nvar APPOINTMENT_DETAILS = 'e-appointment-details';\n/** @private */\n\nvar SUBJECT_WRAP = 'e-subject-wrap';\n/** @private */\n\nvar RESOURCE_NAME = 'e-resource-name';\n/** @private */\n\nvar APPOINTMENT_TIME = 'e-time';\n/** @private */\n\nvar TABLE_WRAP_CLASS = 'e-table-wrap';\n/** @private */\n\nvar OUTER_TABLE_CLASS = 'e-outer-table';\n/** @private */\n\nvar CONTENT_WRAP_CLASS = 'e-content-wrap';\n/** @private */\n\nvar VIRTUAL_TRACK_CLASS = 'e-virtual-track';\n/** @private */\n\nvar AGENDA_CELLS_CLASS = 'e-agenda-cells';\n/** @private */\n\nvar AGENDA_CURRENT_DAY_CLASS = 'e-current-day';\n/** @private */\n\nvar AGENDA_SELECTED_CELL = 'e-active-appointment-agenda';\n/** @private */\n\nvar MONTH_HEADER_CLASS = 'e-month-header';\n/** @private */\n\nvar AGENDA_HEADER_CLASS = 'e-day-date-header';\n/** @private */\n\nvar AGENDA_RESOURCE_CLASS = 'e-resource-column';\n/** @private */\n\nvar AGENDA_DATE_CLASS = 'e-date-column';\n/** @private */\n\nvar NAVIGATE_CLASS = 'e-navigate';\n/** @private */\n\nvar DATE_HEADER_CLASS = 'e-date-header';\n/** @private */\n\nvar AGENDA_DAY_BORDER_CLASS = 'e-day-border';\n/** @private */\n\nvar DATE_BORDER_CLASS = 'e-date-border';\n/** @private */\n\nvar AGENDA_DAY_PADDING_CLASS = 'e-day-padding';\n/** @private */\n\nvar DATE_TIME_CLASS = 'e-date-time';\n/** @private */\n\nvar DATE_TIME_WRAPPER_CLASS = 'e-date-time-wrapper';\n/** @private */\n\nvar AGENDA_EMPTY_EVENT_CLASS = 'e-empty-event';\n/** @private */\n\nvar AGENDA_NO_EVENT_CLASS = 'e-no-event';\n/** @private */\n\nvar APPOINTMENT_INDICATOR_CLASS = 'e-appointment-indicator';\n/** @private */\n\nvar EVENT_INDICATOR_CLASS = 'e-indicator';\n/** @private */\n\nvar EVENT_ICON_UP_CLASS = 'e-up-icon';\n/** @private */\n\nvar EVENT_ICON_DOWN_CLASS = 'e-down-icon';\n/** @private */\n\nvar EVENT_ICON_LEFT_CLASS = 'e-left-icon';\n/** @private */\n\nvar EVENT_ICON_RIGHT_CLASS = 'e-right-icon';\n/** @private */\n\nvar EVENT_ACTION_CLASS = 'e-event-action';\n/** @private */\n\nvar NEW_EVENT_CLASS = 'e-new-event';\n/** @private */\n\nvar CLONE_ELEMENT_CLASS = 'e-schedule-event-clone';\n/** @private */\n\nvar MONTH_CLONE_ELEMENT_CLASS = 'e-month-event';\n/** @private */\n\nvar CLONE_TIME_INDICATOR_CLASS = 'e-clone-time-indicator';\n/** @private */\n\nvar DRAG_CLONE_CLASS = 'e-drag-clone';\n/** @private */\n\nvar EVENT_RESIZE_CLASS = 'e-event-resize';\n/** @private */\n\nvar RESIZE_CLONE_CLASS = 'e-resize-clone';\n/** @private */\n\nvar LEFT_RESIZE_HANDLER = 'e-left-handler';\n/** @private */\n\nvar RIGHT_RESIZE_HANDLER = 'e-right-handler';\n/** @private */\n\nvar TOP_RESIZE_HANDLER = 'e-top-handler';\n/** @private */\n\nvar BOTTOM_RESIZE_HANDLER = 'e-bottom-handler';\n/** @private */\n\nvar EVENT_RECURRENCE_ICON_CLASS = 'e-recurrence-icon';\n/** @private */\n\nvar EVENT_RECURRENCE_EDIT_ICON_CLASS = 'e-recurrence-edit-icon';\n/** @private */\n\nvar HEADER_ROW_CLASS = 'e-header-row';\n/** @private */\n\nvar ALLDAY_APPOINTMENT_WRAPPER_CLASS = 'e-all-day-appointment-wrapper';\n/** @private */\n\nvar ALLDAY_APPOINTMENT_CLASS = 'e-all-day-appointment';\n/** @private */\n\nvar EVENT_COUNT_CLASS = 'e-appointment-hide';\n/** @private */\n\nvar ROW_COUNT_WRAPPER_CLASS = 'e-row-count-wrapper';\n/** @private */\n\nvar ALLDAY_APPOINTMENT_SECTION_CLASS = 'e-all-day-appointment-section';\n/** @private */\n\nvar APPOINTMENT_ROW_EXPAND_CLASS = 'e-appointment-expand';\n/** @private */\n\nvar APPOINTMENT_ROW_COLLAPSE_CLASS = 'e-appointment-collapse';\n/** @private */\n\nvar MORE_INDICATOR_CLASS = 'e-more-indicator';\n/** @private */\n\nvar CELL_POPUP_CLASS = 'e-cell-popup';\n/** @private */\n\nvar EVENT_POPUP_CLASS = 'e-event-popup';\n/** @private */\n\nvar MULTIPLE_EVENT_POPUP_CLASS = 'e-multiple-event-popup';\n/** @private */\n\nvar POPUP_HEADER_CLASS = 'e-popup-header';\n/** @private */\n\nvar POPUP_HEADER_ICON_WRAPPER = 'e-header-icon-wrapper';\n/** @private */\n\nvar POPUP_CONTENT_CLASS = 'e-popup-content';\n/** @private */\n\nvar POPUP_FOOTER_CLASS = 'e-popup-footer';\n/** @private */\n\nvar DATE_TIME_DETAILS_CLASS = 'e-date-time-details';\n/** @private */\n\nvar RECURRENCE_SUMMARY_CLASS = 'e-recurrence-summary';\n/** @private */\n\nvar QUICK_POPUP_EVENT_DETAILS_CLASS = 'e-event-details';\n/** @private */\n\nvar EVENT_CREATE_CLASS = 'e-event-create';\n/** @private */\n\nvar EDIT_EVENT_CLASS = 'e-event-edit';\n/** @private */\n\nvar DELETE_EVENT_CLASS = 'e-event-delete';\n/** @private */\n\nvar TEXT_ELLIPSIS = 'e-text-ellipsis';\n/** @private */\n\nvar MORE_POPUP_WRAPPER_CLASS = 'e-more-popup-wrapper';\n/** @private */\n\nvar MORE_EVENT_POPUP_CLASS = 'e-more-event-popup';\n/** @private */\n\nvar MORE_EVENT_HEADER_CLASS = 'e-more-event-header';\n/** @private */\n\nvar MORE_EVENT_DATE_HEADER_CLASS = 'e-more-event-date-header';\n/** @private */\n\nvar MORE_EVENT_HEADER_DAY_CLASS = 'e-header-day';\n/** @private */\n\nvar MORE_EVENT_HEADER_DATE_CLASS = 'e-header-date';\n/** @private */\n\nvar MORE_EVENT_CLOSE_CLASS = 'e-more-event-close';\n/** @private */\n\nvar MORE_EVENT_CONTENT_CLASS = 'e-more-event-content';\n/** @private */\n\nvar MORE_EVENT_WRAPPER_CLASS = 'e-more-appointment-wrapper';\n/** @private */\n\nvar QUICK_DIALOG_CLASS = 'e-quick-dialog';\n/** @private */\n\nvar QUICK_DIALOG_OCCURRENCE_CLASS = 'e-quick-dialog-occurrence-event';\n/** @private */\n\nvar QUICK_DIALOG_SERIES_CLASS = 'e-quick-dialog-series-event';\n/** @private */\n\nvar QUICK_DIALOG_FOLLOWING_EVENTS_CLASS = 'e-quick-dialog-following-events';\n/** @private */\n\nvar FOLLOWING_EVENTS_DIALOG = 'e-following-events-dialog';\n/** @private */\n\nvar QUICK_DIALOG_DELETE_CLASS = 'e-quick-dialog-delete';\n/** @private */\n\nvar QUICK_DIALOG_CANCEL_CLASS = 'e-quick-dialog-cancel';\n/** @private */\n\nvar QUICK_DIALOG_ALERT_OK = 'e-quick-alertok';\n/** @private */\n\nvar QUICK_DIALOG_ALERT_CANCEL = 'e-quick-alertcancel';\n/** @private */\n\nvar QUICK_DIALOG_ALERT_FOLLOWING = 'e-quick-alertfollowing';\n/** @private */\n\nvar QUICK_DIALOG_ALERT_BTN_CLASS = 'e-quick-dialog-alert-btn';\n/** @private */\n\nvar EVENT_WINDOW_DIALOG_CLASS = 'e-schedule-dialog';\n/** @private */\n\nvar FORM_CONTAINER_CLASS = 'e-form-container';\n/** @private */\n\nvar FORM_CLASS = 'e-schedule-form';\n/** @private */\n\nvar EVENT_WINDOW_ALLDAY_TZ_DIV_CLASS = 'e-all-day-time-zone-row';\n/** @private */\n\nvar EVENT_WINDOW_ALL_DAY_CLASS = 'e-all-day';\n/** @private */\n\nvar TIME_ZONE_CLASS = 'e-time-zone';\n/** @private */\n\nvar TIME_ZONE_ICON_CLASS = 'e-time-zone-icon';\n/** @private */\n\nvar TIME_ZONE_DETAILS_CLASS = 'e-time-zone-details';\n/** @private */\n\nvar EVENT_WINDOW_REPEAT_DIV_CLASS = 'e-repeat-parent-row';\n/** @private */\n\nvar EVENT_WINDOW_REPEAT_CLASS = 'e-repeat';\n/** @private */\n\nvar EVENT_WINDOW_TITLE_LOCATION_DIV_CLASS = 'e-title-location-row';\n/** @private */\n\nvar SUBJECT_CLASS = 'e-subject';\n/** @private */\n\nvar LOCATION_CLASS = 'e-location';\n/** @private */\n\nvar LOCATION_ICON_CLASS = 'e-location-icon';\n/** @private */\n\nvar LOCATION_DETAILS_CLASS = 'e-location-details';\n/** @private */\n\nvar EVENT_WINDOW_START_END_DIV_CLASS = 'e-start-end-row';\n/** @private */\n\nvar EVENT_WINDOW_START_CLASS = 'e-start';\n/** @private */\n\nvar EVENT_WINDOW_END_CLASS = 'e-end';\n/** @private */\n\nvar EVENT_WINDOW_RESOURCES_DIV_CLASS = 'e-resources-row';\n/** @private */\n\nvar DESCRIPTION_CLASS = 'e-description';\n/** @private */\n\nvar DESCRIPTION_ICON_CLASS = 'e-description-icon';\n/** @private */\n\nvar DESCRIPTION_DETAILS_CLASS = 'e-description-details';\n/** @private */\n\nvar EVENT_WINDOW_TIME_ZONE_DIV_CLASS = 'e-time-zone-row';\n/** @private */\n\nvar EVENT_WINDOW_START_TZ_CLASS = 'e-start-time-zone';\n/** @private */\n\nvar EVENT_WINDOW_END_TZ_CLASS = 'e-end-time-zone';\n/** @private */\n\nvar EVENT_WINDOW_BACK_ICON_CLASS = 'e-back-icon';\n/** @private */\n\nvar EVENT_WINDOW_SAVE_ICON_CLASS = 'e-save-icon';\n/** @private */\n\nvar EVENT_WINDOW_CANCEL_BUTTON_CLASS = 'e-event-cancel';\n/** @private */\n\nvar EVENT_WINDOW_SAVE_BUTTON_CLASS = 'e-event-save';\n/** @private */\n\nvar EVENT_WINDOW_DIALOG_PARENT_CLASS = 'e-dialog-parent';\n/** @private */\n\nvar EVENT_WINDOW_TITLE_TEXT_CLASS = 'e-title-text';\n/** @private */\n\nvar EVENT_WINDOW_ICON_DISABLE_CLASS = 'e-icon-disable';\n/** @private */\n\nvar EDIT_CLASS = 'e-edit';\n/** @private */\n\nvar EDIT_ICON_CLASS = 'e-edit-icon';\n/** @private */\n\nvar DELETE_CLASS = 'e-delete';\n/** @private */\n\nvar DELETE_ICON_CLASS = 'e-delete-icon';\n/** @private */\n\nvar CLOSE_CLASS = 'e-close';\n/** @private */\n\nvar CLOSE_ICON_CLASS = 'e-close-icon';\n/** @private */\n\nvar ERROR_VALIDATION_CLASS = 'e-schedule-error';\n/** @private */\n\nvar EVENT_TOOLTIP_ROOT_CLASS = 'e-schedule-event-tooltip';\n/** @private */\n\nvar ALLDAY_ROW_ANIMATE_CLASS = 'e-animate';\n/** @private */\n\nvar TIMESCALE_DISABLE = 'e-timescale-disable';\n/** @private */\n\nvar DISABLE_DATE = 'e-disable-date';\n/** @private */\n\nvar HIDDEN_CLASS = 'e-hidden';\n/** @private */\n\nvar DISABLE_DATES = 'e-disable-dates';\n/** @private */\n\nvar POPUP_WRAPPER_CLASS = 'e-quick-popup-wrapper';\n/** @private */\n\nvar POPUP_TABLE_CLASS = 'e-popup-table';\n/** @private */\n\nvar RESOURCE_MENU = 'e-resource-menu';\n/** @private */\n\nvar RESOURCE_MENU_ICON = 'e-icon-menu';\n/** @private */\n\nvar RESOURCE_LEVEL_TITLE = 'e-resource-level-title';\n/** @private */\n\nvar RESOURCE_TREE = 'e-resource-tree';\n/** @private */\n\nvar RESOURCE_TREE_POPUP_OVERLAY = 'e-resource-tree-popup-overlay';\n/** @private */\n\nvar RESOURCE_TREE_POPUP = 'e-resource-tree-popup';\n/** @private */\n\nvar RESOURCE_CLASS = 'e-resource';\n/** @private */\n\nvar RESOURCE_ICON_CLASS = 'e-resource-icon';\n/** @private */\n\nvar RESOURCE_DETAILS_CLASS = 'e-resource-details';\n/** @private */\n\nvar DATE_TIME_ICON_CLASS = 'e-date-time-icon';\n/** @private */\n\nvar VIRTUAL_SCROLL_CLASS = 'e-virtual-scroll';\n/** @private */\n\nvar ICON_DISABLE_CLASS = 'e-icon-disable';\n/** @private */\n\nvar AUTO_HEIGHT = 'e-auto-height';\n/** @private */\n\nvar IGNORE_WHITESPACE = 'e-ignore-whitespace';\n/** @private */\n\nvar EVENT_TEMPLATE = 'e-template';\n/** @private */\n\nvar READ_ONLY = 'e-read-only';\n/** @private */\n\nvar MONTH_HEADER_WRAPPER = 'e-month-header-wrapper';\n/** @private */\n\nvar INLINE_SUBJECT_CLASS = 'e-inline-subject';\n/** @private */\n\nvar INLINE_APPOINTMENT_CLASS = 'e-inline-appointment';\n/** @hidden */\n\nvar SCROLL_HIDDEN = 'e-scroll-hidden';\n/** @private */\n\nvar ALLDAY_APPOINTMENT_SCROLL = 'e-all-day-scroll';\n/** @private */\n\nvar ALLDAY_APPOINTMENT_AUTO = 'e-all-day-auto';\n/* eslint-disable @typescript-eslint/no-explicit-any */\n\n/**\n * Header module\n */\n\nvar HeaderRenderer = /*#__PURE__*/function () {\n  function HeaderRenderer(parent) {\n    _classCallCheck(this, HeaderRenderer);\n\n    this.parent = parent;\n    this.l10n = this.parent.localeObj;\n    this.renderHeader();\n    this.addEventListener();\n  }\n\n  _createClass(HeaderRenderer, [{\n    key: \"addEventListener\",\n    value: function addEventListener() {\n      this.parent.on(documentClick, this.closeHeaderPopup, this);\n    }\n  }, {\n    key: \"removeEventListener\",\n    value: function removeEventListener() {\n      this.parent.off(documentClick, this.closeHeaderPopup);\n    }\n  }, {\n    key: \"closeHeaderPopup\",\n    value: function closeHeaderPopup(e) {\n      var closestEle = closest(e.event.target, '.e-date-range,.e-header-popup,.e-day,.e-selected');\n      var closestPop = closest(e.event.target, '.e-hor-nav,.e-toolbar-pop');\n      var contentWrap = this.parent.element.querySelector('.' + CONTENT_WRAP_CLASS);\n\n      if (this.parent.isAdaptive) {\n        if (!isNullOrUndefined(closestPop) && (closestPop.classList.contains('e-toolbar-pop') || closestPop.classList.contains('e-hor-nav')) && !(closestPop.classList.contains('e-hor-nav') && this.element.querySelector('.e-toolbar-pop').classList.contains(POPUP_OPEN))) {\n          addClass([contentWrap], SCROLL_HIDDEN);\n        } else {\n          removeClass([contentWrap], SCROLL_HIDDEN);\n          var popupEle = this.element.querySelector('.e-toolbar-pop');\n\n          if (!isNullOrUndefined(popupEle)) {\n            var popupObj = popupEle.ej2_instances[0];\n\n            if (popupObj && !(!isNullOrUndefined(closestPop) && closestPop.classList.contains('e-hor-nav') && popupEle.classList.contains(POPUP_OPEN))) {\n              popupObj.hide();\n            }\n          }\n        }\n      }\n\n      if (!isNullOrUndefined(closestEle)) {\n        return;\n      }\n\n      this.hideHeaderPopup();\n    }\n  }, {\n    key: \"hideHeaderPopup\",\n    value: function hideHeaderPopup() {\n      if (this.headerPopup) {\n        this.headerPopup.hide();\n      }\n    }\n  }, {\n    key: \"renderHeader\",\n    value: function renderHeader() {\n      this.element = createElement('div', {\n        className: TOOLBAR_CONTAINER\n      });\n      var toolbarEle = createElement('div', {\n        className: HEADER_TOOLBAR\n      });\n      this.element.appendChild(toolbarEle);\n      this.parent.element.insertBefore(this.element, this.parent.element.firstElementChild);\n      this.renderToolbar();\n    }\n  }, {\n    key: \"renderToolbar\",\n    value: function renderToolbar() {\n      var _this = this;\n\n      var items = this.getItems();\n      this.parent.trigger(actionBegin, {\n        requestType: 'toolbarItemRendering',\n        items: items\n      }, function (args) {\n        _this.toolbarObj = new Toolbar({\n          items: args.items,\n          overflowMode: 'Popup',\n          clicked: _this.toolbarClickHandler.bind(_this),\n          enableRtl: _this.parent.enableRtl,\n          locale: _this.parent.locale\n        });\n\n        _this.toolbarObj.appendTo(_this.parent.element.querySelector('.' + HEADER_TOOLBAR));\n\n        var prevNavEle = _this.toolbarObj.element.querySelector('.e-prev');\n\n        if (prevNavEle) {\n          prevNavEle.firstElementChild.setAttribute('title', _this.l10n.getConstant('previous'));\n        }\n\n        var nextNavEle = _this.toolbarObj.element.querySelector('.e-next');\n\n        if (nextNavEle) {\n          nextNavEle.firstElementChild.setAttribute('title', _this.l10n.getConstant('next'));\n        }\n\n        _this.updateAddIcon();\n\n        _this.updateActiveView();\n\n        _this.parent.trigger(actionComplete, {\n          requestType: 'toolBarItemRendered',\n          items: _this.toolbarObj.items\n        });\n      });\n    }\n  }, {\n    key: \"updateItems\",\n    value: function updateItems() {\n      var _this2 = this;\n\n      if (this.toolbarObj) {\n        var items = this.getItems();\n        this.parent.trigger(actionBegin, {\n          requestType: 'toolbarItemRendering',\n          items: items\n        }, function (args) {\n          _this2.toolbarObj.items = args.items;\n\n          _this2.toolbarObj.dataBind();\n\n          _this2.parent.trigger(actionComplete, {\n            requestType: 'toolBarItemRendered',\n            items: _this2.toolbarObj.items\n          });\n        });\n      }\n    }\n  }, {\n    key: \"getPopUpRelativeElement\",\n    value: function getPopUpRelativeElement() {\n      if (this.parent.isAdaptive) {\n        return this.toolbarObj.element;\n      }\n\n      return this.element.querySelector('.e-date-range');\n    }\n  }, {\n    key: \"setDayOfWeek\",\n    value: function setDayOfWeek(index) {\n      if (this.headerCalendar) {\n        this.headerCalendar.firstDayOfWeek = index;\n        this.headerCalendar.dataBind();\n      }\n    }\n  }, {\n    key: \"setCalendarDate\",\n    value: function setCalendarDate(date) {\n      if (this.headerCalendar) {\n        this.headerCalendar.value = date;\n        this.headerCalendar.dataBind();\n      }\n    }\n  }, {\n    key: \"setCalendarMinMaxDate\",\n    value: function setCalendarMinMaxDate() {\n      if (this.headerCalendar) {\n        this.headerCalendar.min = this.parent.minDate;\n        this.headerCalendar.max = this.parent.maxDate;\n        this.headerCalendar.dataBind();\n      }\n    }\n  }, {\n    key: \"getCalendarView\",\n    value: function getCalendarView() {\n      if (['Month', 'MonthAgenda', 'TimelineMonth'].indexOf(this.parent.currentView) > -1) {\n        return 'Year';\n      } else if (['Year', 'TimelineYear'].indexOf(this.parent.currentView) > -1) {\n        return 'Decade';\n      } else {\n        return 'Month';\n      }\n    }\n  }, {\n    key: \"setCalendarView\",\n    value: function setCalendarView() {\n      if (this.headerCalendar) {\n        var calendarView = this.getCalendarView();\n        this.headerCalendar.depth = calendarView;\n        this.headerCalendar.start = calendarView;\n        this.headerCalendar.refresh();\n      }\n    }\n  }, {\n    key: \"updateActiveView\",\n    value: function updateActiveView() {\n      var selEle = [].slice.call(this.toolbarObj.element.querySelectorAll('.e-views'));\n      removeClass(selEle, ['e-active-view']);\n\n      if (selEle.length > 0 && selEle[this.parent.viewIndex]) {\n        addClass([selEle[this.parent.viewIndex]], ['e-active-view']);\n      }\n    }\n  }, {\n    key: \"updateDateRange\",\n    value: function updateDateRange(text) {\n      var selEle = this.toolbarObj.element.querySelector('.e-date-range');\n\n      if (selEle) {\n        selEle.setAttribute('aria-label', text);\n        selEle.querySelector('.e-tbar-btn-text').innerHTML = text;\n        this.refresh();\n      }\n    }\n  }, {\n    key: \"refresh\",\n    value: function refresh() {\n      if (this.toolbarObj) {\n        this.toolbarObj.refreshOverflow();\n      }\n    }\n  }, {\n    key: \"updateAddIcon\",\n    value: function updateAddIcon() {\n      var addEle = this.toolbarObj.element.querySelector('.e-add');\n\n      if (addEle) {\n        if (!this.parent.eventSettings.allowAdding) {\n          addClass([addEle], HIDDEN_CLASS);\n        } else {\n          removeClass([addEle], HIDDEN_CLASS);\n        }\n      }\n    }\n  }, {\n    key: \"getDateRangeText\",\n    value: function getDateRangeText() {\n      var dateString = this.parent.globalize.formatDate(this.parent.selectedDate, {\n        format: 'MMMM y',\n        calendar: this.parent.getCalendarMode()\n      });\n      return capitalizeFirstWord(dateString, 'single');\n    }\n  }, {\n    key: \"getItems\",\n    value: function getItems() {\n      var items = [];\n      items.push({\n        align: 'Left',\n        prefixIcon: 'e-icon-prev',\n        tooltipText: 'Previous',\n        overflow: 'Show',\n        cssClass: 'e-prev',\n        htmlAttributes: {\n          'aria-label': 'previous period',\n          'role': 'navigation'\n        }\n      });\n      items.push({\n        align: 'Left',\n        prefixIcon: 'e-icon-next',\n        tooltipText: 'Next',\n        overflow: 'Show',\n        cssClass: 'e-next',\n        htmlAttributes: {\n          'aria-label': 'next period',\n          'role': 'navigation'\n        }\n      });\n      items.push({\n        align: 'Left',\n        text: this.getDateRangeText(),\n        suffixIcon: 'e-icon-down-arrow',\n        cssClass: 'e-date-range',\n        overflow: 'Show',\n        htmlAttributes: {\n          'aria-atomic': 'true',\n          'aria-live': 'assertive',\n          'aria-label': 'title',\n          'role': 'navigation'\n        }\n      });\n\n      if (this.parent.isAdaptive || this.parent.enableAdaptiveUI) {\n        items.push({\n          align: 'Right',\n          showAlwaysInPopup: this.parent.isAdaptive || this.parent.enableAdaptiveUI,\n          prefixIcon: 'e-icon-add',\n          text: this.l10n.getConstant('newEvent'),\n          cssClass: 'e-add',\n          overflow: 'Show'\n        });\n        items.push({\n          align: 'Right',\n          showAlwaysInPopup: this.parent.isAdaptive || this.parent.enableAdaptiveUI,\n          prefixIcon: 'e-icon-today',\n          text: this.l10n.getConstant('today'),\n          cssClass: 'e-today',\n          overflow: 'Show'\n        });\n      } else {\n        items.push({\n          align: 'Right',\n          showAlwaysInPopup: this.parent.isAdaptive || this.parent.enableAdaptiveUI,\n          prefixIcon: 'e-icon-day',\n          text: this.l10n.getConstant('today'),\n          cssClass: 'e-today',\n          overflow: 'Show'\n        });\n\n        if (this.parent.views.length > 1) {\n          items.push({\n            align: 'Right',\n            type: 'Separator',\n            cssClass: 'e-schedule-seperator'\n          });\n        }\n      }\n\n      if (this.parent.views.length > 1) {\n        var _iterator2 = _createForOfIteratorHelper(this.parent.views),\n            _step2;\n\n        try {\n          for (_iterator2.s(); !(_step2 = _iterator2.n()).done;) {\n            var item = _step2.value;\n            items.push(this.getItemObject(item));\n          }\n        } catch (err) {\n          _iterator2.e(err);\n        } finally {\n          _iterator2.f();\n        }\n      }\n\n      return items;\n    }\n  }, {\n    key: \"getItemObject\",\n    value: function getItemObject(item) {\n      var viewName;\n      var displayName;\n\n      if (typeof item === 'string') {\n        viewName = item.toLowerCase();\n        displayName = null;\n      } else {\n        viewName = item.option.toLowerCase();\n        displayName = item.displayName;\n      }\n\n      var view;\n      var orientationClass;\n      var isItemInsidePopup = this.parent.isAdaptive || this.parent.enableAdaptiveUI;\n\n      switch (viewName) {\n        case 'day':\n          view = {\n            align: 'Right',\n            showAlwaysInPopup: isItemInsidePopup,\n            prefixIcon: 'e-icon-day',\n            text: displayName || this.l10n.getConstant('day'),\n            cssClass: 'e-views e-day'\n          };\n          break;\n\n        case 'week':\n          view = {\n            align: 'Right',\n            showAlwaysInPopup: isItemInsidePopup,\n            prefixIcon: 'e-icon-week',\n            text: displayName || this.l10n.getConstant('week'),\n            cssClass: 'e-views e-week'\n          };\n          break;\n\n        case 'workweek':\n          view = {\n            align: 'Right',\n            showAlwaysInPopup: isItemInsidePopup,\n            prefixIcon: 'e-icon-workweek',\n            text: displayName || this.l10n.getConstant('workWeek'),\n            cssClass: 'e-views e-work-week'\n          };\n          break;\n\n        case 'month':\n          view = {\n            align: 'Right',\n            showAlwaysInPopup: isItemInsidePopup,\n            prefixIcon: 'e-icon-month',\n            text: displayName || this.l10n.getConstant('month'),\n            cssClass: 'e-views e-month'\n          };\n          break;\n\n        case 'year':\n          view = {\n            align: 'Right',\n            showAlwaysInPopup: isItemInsidePopup,\n            prefixIcon: 'e-icon-year',\n            text: displayName || this.l10n.getConstant('year'),\n            cssClass: 'e-views e-year'\n          };\n          break;\n\n        case 'agenda':\n          view = {\n            align: 'Right',\n            showAlwaysInPopup: isItemInsidePopup,\n            prefixIcon: 'e-icon-agenda',\n            text: displayName || this.l10n.getConstant('agenda'),\n            cssClass: 'e-views e-agenda'\n          };\n          break;\n\n        case 'monthagenda':\n          view = {\n            align: 'Right',\n            showAlwaysInPopup: isItemInsidePopup,\n            prefixIcon: 'e-icon-month-agenda',\n            text: displayName || this.l10n.getConstant('monthAgenda'),\n            cssClass: 'e-views e-month-agenda'\n          };\n          break;\n\n        case 'timelineday':\n          view = {\n            align: 'Right',\n            showAlwaysInPopup: isItemInsidePopup,\n            prefixIcon: 'e-icon-timeline-day',\n            text: displayName || this.l10n.getConstant('timelineDay'),\n            cssClass: 'e-views e-timeline-day'\n          };\n          break;\n\n        case 'timelineweek':\n          view = {\n            align: 'Right',\n            showAlwaysInPopup: isItemInsidePopup,\n            prefixIcon: 'e-icon-timeline-week',\n            text: displayName || this.l10n.getConstant('timelineWeek'),\n            cssClass: 'e-views e-timeline-week'\n          };\n          break;\n\n        case 'timelineworkweek':\n          view = {\n            align: 'Right',\n            showAlwaysInPopup: isItemInsidePopup,\n            prefixIcon: 'e-icon-timeline-workweek',\n            text: displayName || this.l10n.getConstant('timelineWorkWeek'),\n            cssClass: 'e-views e-timeline-work-week'\n          };\n          break;\n\n        case 'timelinemonth':\n          view = {\n            align: 'Right',\n            showAlwaysInPopup: isItemInsidePopup,\n            prefixIcon: 'e-icon-timeline-month',\n            text: displayName || this.l10n.getConstant('timelineMonth'),\n            cssClass: 'e-views e-timeline-month'\n          };\n          break;\n\n        case 'timelineyear':\n          orientationClass = item.orientation === 'Vertical' ? 'vertical' : 'horizontal';\n          view = {\n            align: 'Right',\n            showAlwaysInPopup: isItemInsidePopup,\n            prefixIcon: 'e-icon-timeline-year-' + orientationClass,\n            text: displayName || this.l10n.getConstant('timelineYear'),\n            cssClass: 'e-views e-timeline-year'\n          };\n          break;\n      }\n\n      return view;\n    }\n  }, {\n    key: \"renderHeaderPopup\",\n    value: function renderHeaderPopup() {\n      var headerPopupEle = createElement('div', {\n        className: HEADER_POPUP_CLASS\n      });\n      var headerCalendarEle = createElement('div', {\n        className: HEADER_CALENDAR_CLASS\n      });\n      headerPopupEle.appendChild(headerCalendarEle);\n      this.element.appendChild(headerPopupEle);\n      this.headerPopup = new Popup(headerPopupEle, {\n        actionOnScroll: 'hide',\n        targetType: 'relative',\n        relateTo: this.getPopUpRelativeElement(),\n        position: {\n          X: 'left',\n          Y: 'bottom'\n        },\n        enableRtl: this.parent.enableRtl\n      });\n      var calendarView = this.getCalendarView();\n      this.headerCalendar = new Calendar({\n        value: this.parent.selectedDate,\n        min: this.parent.minDate,\n        max: this.parent.maxDate,\n        firstDayOfWeek: this.parent.activeViewOptions.firstDayOfWeek,\n        enableRtl: this.parent.enableRtl,\n        locale: this.parent.locale,\n        depth: calendarView,\n        start: calendarView,\n        calendarMode: this.parent.calendarMode,\n        change: this.calendarChange.bind(this)\n      });\n      this.setCalendarTimezone();\n      this.headerCalendar.appendTo(headerCalendarEle);\n      this.headerPopup.hide();\n    }\n  }, {\n    key: \"calendarChange\",\n    value: function calendarChange(args) {\n      if (args.value.getTime() !== this.parent.selectedDate.getTime()) {\n        var calendarDate = resetTime(new Date(args.value));\n        this.parent.changeDate(calendarDate);\n      }\n\n      this.headerPopup.hide();\n    }\n  }, {\n    key: \"setCalendarTimezone\",\n    value: function setCalendarTimezone() {\n      if (this.headerCalendar) {\n        this.headerCalendar.timezone = this.parent.timezone || this.parent.tzModule.getLocalTimezoneName();\n      }\n    }\n  }, {\n    key: \"calculateViewIndex\",\n    value: function calculateViewIndex(args) {\n      var target = closest(args.originalEvent.target, '.e-views');\n      var views = [].slice.call(this.element.querySelectorAll('.e-views'));\n      return views.indexOf(target);\n    }\n  }, {\n    key: \"toolbarClickHandler\",\n    value: function toolbarClickHandler(args) {\n      if (!args.item) {\n        return;\n      }\n\n      var strClass = args.item.cssClass.replace('e-views ', '');\n      var data;\n      var isSameTime;\n\n      switch (strClass) {\n        case 'e-date-range':\n          if (!this.headerPopup) {\n            this.renderHeaderPopup();\n          }\n\n          if (this.headerPopup.element.classList.contains(POPUP_OPEN)) {\n            this.headerPopup.hide();\n          } else {\n            this.headerPopup.show();\n          }\n\n          break;\n\n        case 'e-day':\n          this.parent.changeView('Day', args.originalEvent, undefined, this.calculateViewIndex(args));\n          break;\n\n        case 'e-week':\n          this.parent.changeView('Week', args.originalEvent, undefined, this.calculateViewIndex(args));\n          break;\n\n        case 'e-work-week':\n          this.parent.changeView('WorkWeek', args.originalEvent, undefined, this.calculateViewIndex(args));\n          break;\n\n        case 'e-month':\n          this.parent.changeView('Month', args.originalEvent, undefined, this.calculateViewIndex(args));\n          break;\n\n        case 'e-year':\n          this.parent.changeView('Year', args.originalEvent, undefined, this.calculateViewIndex(args));\n          break;\n\n        case 'e-agenda':\n          this.parent.changeView('Agenda', args.originalEvent, undefined, this.calculateViewIndex(args));\n          break;\n\n        case 'e-month-agenda':\n          this.parent.changeView('MonthAgenda', args.originalEvent, undefined, this.calculateViewIndex(args));\n          break;\n\n        case 'e-timeline-day':\n          this.parent.changeView('TimelineDay', args.originalEvent, undefined, this.calculateViewIndex(args));\n          break;\n\n        case 'e-timeline-week':\n          this.parent.changeView('TimelineWeek', args.originalEvent, undefined, this.calculateViewIndex(args));\n          break;\n\n        case 'e-timeline-work-week':\n          this.parent.changeView('TimelineWorkWeek', args.originalEvent, undefined, this.calculateViewIndex(args));\n          break;\n\n        case 'e-timeline-month':\n          this.parent.changeView('TimelineMonth', args.originalEvent, undefined, this.calculateViewIndex(args));\n          break;\n\n        case 'e-timeline-year':\n          this.parent.changeView('TimelineYear', args.originalEvent, undefined, this.calculateViewIndex(args));\n          break;\n\n        case 'e-today':\n          if (this.parent.currentView === 'Agenda' || !this.parent.isSelectedDate(resetTime(this.parent.getCurrentTime()))) {\n            this.parent.changeDate(resetTime(this.parent.getCurrentTime()), args.originalEvent);\n          }\n\n          break;\n\n        case 'e-prev':\n          this.parent.changeDate(this.parent.activeView.getNextPreviousDate('previous'), args.originalEvent);\n          break;\n\n        case 'e-next':\n          this.parent.changeDate(this.parent.activeView.getNextPreviousDate('next'), args.originalEvent);\n          break;\n\n        case 'e-add':\n          isSameTime = this.parent.activeCellsData.startTime.getTime() === this.parent.activeCellsData.endTime.getTime();\n\n          if (this.parent.activeCellsData && !isSameTime) {\n            data = this.parent.activeCellsData;\n          } else {\n            var interval = this.parent.activeViewOptions.timeScale.interval;\n            var slotCount = this.parent.activeViewOptions.timeScale.slotCount;\n            var msInterval = interval * MS_PER_MINUTE / slotCount;\n            var startTime = new Date(this.parent.selectedDate.getTime());\n            var currentTime = this.parent.getCurrentTime();\n            startTime.setHours(currentTime.getHours(), Math.round(startTime.getMinutes() / msInterval) * msInterval, 0);\n            var endTime = new Date(new Date(startTime.getTime()).setMilliseconds(startTime.getMilliseconds() + msInterval));\n            data = {\n              startTime: startTime,\n              endTime: endTime,\n              isAllDay: false\n            };\n          }\n\n          this.parent.eventWindow.openEditor(extend(data, {\n            cancel: false,\n            event: args.originalEvent\n          }), 'Add');\n          break;\n      }\n\n      if (isNullOrUndefined(this.toolbarObj)) {\n        return;\n      }\n\n      var toolbarPopUp = this.toolbarObj.element.querySelector('.e-toolbar-pop');\n\n      if (toolbarPopUp && args.item.type !== 'Input') {\n        toolbarPopUp.ej2_instances[0].hide({\n          name: 'SlideUp',\n          duration: 100\n        });\n      }\n    }\n  }, {\n    key: \"getHeaderElement\",\n    value: function getHeaderElement() {\n      return this.toolbarObj.element;\n    }\n  }, {\n    key: \"updateHeaderItems\",\n    value: function updateHeaderItems(classType) {\n      var prevNavEle = this.toolbarObj.element.querySelector('.e-prev');\n      var nextNavEle = this.toolbarObj.element.querySelector('.e-next');\n      var dateRangeEle = this.toolbarObj.element.querySelector('.e-date-range');\n\n      if (prevNavEle) {\n        if (classType === 'add') {\n          addClass([prevNavEle], HIDDEN_CLASS);\n        } else {\n          removeClass([prevNavEle], HIDDEN_CLASS);\n        }\n      }\n\n      if (nextNavEle) {\n        if (classType === 'add') {\n          addClass([nextNavEle], HIDDEN_CLASS);\n        } else {\n          removeClass([nextNavEle], HIDDEN_CLASS);\n        }\n      }\n\n      if (dateRangeEle) {\n        if (classType === 'add') {\n          addClass([dateRangeEle], TEXT_ELLIPSIS);\n        } else {\n          removeClass([dateRangeEle], TEXT_ELLIPSIS);\n        }\n      }\n    }\n  }, {\n    key: \"previousNextIconHandler\",\n    value: function previousNextIconHandler() {\n      var dates = this.parent.currentView === 'Agenda' ? [this.parent.getCurrentViewDates()[0]] : this.parent.getCurrentViewDates();\n      var prevNavEle = this.toolbarObj.element.querySelector('.' + PREVIOUS_DATE_CLASS);\n      var nextNavEle = this.toolbarObj.element.querySelector('.' + NEXT_DATE_CLASS);\n      var firstDate = new Date(dates[0].getTime());\n      var lastDate = new Date(dates[dates.length - 1].getTime());\n\n      if (this.parent.currentView === 'WorkWeek' || this.parent.currentView === 'TimelineWorkWeek') {\n        firstDate = getWeekFirstDate(resetTime(this.parent.selectedDate), this.parent.firstDayOfWeek);\n        lastDate = addDays(firstDate, 7 * this.parent.activeViewOptions.interval);\n      }\n\n      if (this.parent.currentView === 'Month') {\n        firstDate = firstDateOfMonth(this.parent.selectedDate);\n        var lastMonthFirstDate = addMonths(firstDate, this.parent.activeViewOptions.interval - 1);\n        lastDate = lastDateOfMonth(lastMonthFirstDate);\n      }\n\n      if (!isNullOrUndefined(prevNavEle)) {\n        this.toolbarObj.enableItems(prevNavEle, firstDate > this.parent.minDate);\n      }\n\n      if (!isNullOrUndefined(nextNavEle)) {\n        this.toolbarObj.enableItems(nextNavEle, lastDate < this.parent.maxDate);\n      }\n\n      this.setCalendarMinMaxDate();\n    }\n  }, {\n    key: \"getModuleName\",\n    value: function getModuleName() {\n      return 'headerbar';\n    }\n  }, {\n    key: \"destroy\",\n    value: function destroy() {\n      if (this.headerPopup && !this.headerPopup.isDestroyed) {\n        this.headerPopup.destroy();\n        this.headerPopup = null;\n      }\n\n      if (this.headerCalendar && !this.headerCalendar.isDestroyed) {\n        this.headerCalendar.destroy();\n        this.headerCalendar = null;\n      }\n\n      if (this.toolbarObj && !this.toolbarObj.isDestroyed) {\n        this.toolbarObj.destroy();\n        this.removeEventListener();\n        remove(this.element);\n        this.toolbarObj = null;\n      }\n\n      this.element = null;\n      this.parent = null;\n      this.l10n = null;\n    }\n  }]);\n\n  return HeaderRenderer;\n}();\n/**\n * `Scroll` module\n */\n\n\nvar Scroll = /*#__PURE__*/function () {\n  /**\n   * Constructor for the scrolling.\n   *\n   * @param {Schedule} parent Accepts the Schedule instance\n   */\n  function Scroll(parent) {\n    _classCallCheck(this, Scroll);\n\n    this.parent = parent;\n    this.addEventListener();\n  }\n  /**\n   * For internal use only - Get the module name.\n   *\n   * @returns {string} Returns the module name.\n   * @private\n   */\n\n\n  _createClass(Scroll, [{\n    key: \"getModuleName\",\n    value: function getModuleName() {\n      return 'scroll';\n    }\n    /**\n     * Internal method to set the element width\n     *\n     * @returns {void}\n     * @private\n     */\n\n  }, {\n    key: \"setWidth\",\n    value: function setWidth() {\n      this.parent.element.style.width = formatUnit(this.parent.width);\n    }\n    /**\n     * Internal method to set the element height\n     *\n     * @returns {void}\n     * @private\n     */\n\n  }, {\n    key: \"setHeight\",\n    value: function setHeight() {\n      this.parent.element.style.height = formatUnit(this.parent.height);\n    }\n    /**\n     * Internal method to bind events\n     *\n     * @returns {void}\n     * @private\n     */\n\n  }, {\n    key: \"addEventListener\",\n    value: function addEventListener() {\n      this.parent.on(contentReady, this.setDimensions, this);\n      this.parent.on(uiUpdate, this.onPropertyChanged, this);\n    }\n    /**\n     * Internal method to unbind events\n     *\n     * @returns {void}\n     * @private\n     */\n\n  }, {\n    key: \"removeEventListener\",\n    value: function removeEventListener() {\n      this.parent.off(contentReady, this.setDimensions);\n      this.parent.off(uiUpdate, this.onPropertyChanged);\n    }\n    /**\n     * Internal method to set the dimensions\n     *\n     * @returns {void}\n     * @private\n     */\n\n  }, {\n    key: \"setDimensions\",\n    value: function setDimensions() {\n      this.setWidth();\n      this.setHeight();\n      var data = {\n        cssProperties: this.parent.getCssProperties(),\n        module: this.getModuleName()\n      };\n      this.parent.notify(scrollUiUpdate, data);\n    }\n    /**\n     * Internal method to set the dimensions dynamically\n     *\n     * @returns {void}\n     * @private\n     */\n\n  }, {\n    key: \"onPropertyChanged\",\n    value: function onPropertyChanged() {\n      this.setDimensions();\n    }\n    /**\n     * Destroy the scroll module\n     *\n     * @returns {void}\n     * @private\n     */\n\n  }, {\n    key: \"destroy\",\n    value: function destroy() {\n      this.removeEventListener();\n    }\n  }]);\n\n  return Scroll;\n}();\n/**\n * `touch` module is used to handle touch interactions.\n */\n\n\nvar ScheduleTouch = /*#__PURE__*/function () {\n  function ScheduleTouch(parent) {\n    _classCallCheck(this, ScheduleTouch);\n\n    this.parent = parent;\n    this.element = this.parent.element.querySelector('.' + TABLE_CONTAINER_CLASS);\n    this.touchObj = new Touch(this.element, {\n      scroll: this.scrollHandler.bind(this),\n      swipe: this.swipeHandler.bind(this),\n      tapHold: this.tapHoldHandler.bind(this),\n      swipeSettings: {\n        swipeThresholdDistance: 1\n      }\n    });\n    EventHandler.add(this.element, 'transitionend', this.onTransitionEnd, this);\n    this.touchLeftDirection = this.parent.enableRtl ? 'Right' : 'Left';\n    this.touchRightDirection = this.parent.enableRtl ? 'Left' : 'Right';\n  }\n\n  _createClass(ScheduleTouch, [{\n    key: \"scrollHandler\",\n    value: function scrollHandler(e) {\n      if (this.parent.currentView === 'Agenda' || this.parent.uiStateValues.action || e.originalEvent && (e.originalEvent.target.classList.contains(APPOINTMENT_CLASS) || closest(e.originalEvent.target, '.' + APPOINTMENT_CLASS))) {\n        return;\n      }\n\n      if (!this.timeStampStart) {\n        this.timeStampStart = Date.now();\n      }\n\n      if (this.element.classList.contains(TRANSLATE_CLASS)) {\n        this.onTransitionEnd();\n      }\n\n      if (e.scrollDirection === 'Left' || e.scrollDirection === 'Right') {\n        var args = {\n          requestType: 'dateNavigate',\n          cancel: false,\n          event: e.originalEvent\n        };\n        this.parent.trigger(actionBegin, args);\n\n        if (args.cancel) {\n          return;\n        }\n\n        var scrollDiv = this.element.querySelector('.' + CONTENT_WRAP_CLASS);\n\n        if (scrollDiv && scrollDiv.scrollWidth > scrollDiv.clientWidth) {\n          return;\n        } else {\n          this.isScrollTriggered = true;\n          e.originalEvent.preventDefault();\n          e.originalEvent.stopPropagation();\n        }\n      }\n\n      if (e.scrollDirection === this.touchLeftDirection) {\n        if (!this.nextPanel) {\n          this.renderPanel(NEXT_PANEL_CLASS, 'next');\n          this.nextPanel = {\n            element: this.parent.activeView.getPanel(),\n            selectedDate: new Date(this.parent.selectedDate.getTime())\n          };\n          this.setDimensions(this.nextPanel.element);\n        }\n\n        var x = this.parent.enableRtl ? e.distanceX : -e.distanceX;\n        this.element.style.transform = 'translatex(' + (this.getTranslateX(this.element) + x) + 'px)';\n      } else if (e.scrollDirection === this.touchRightDirection) {\n        var prevWidth = 0;\n\n        if (!this.previousPanel) {\n          this.renderPanel(PREVIOUS_PANEL_CLASS, 'previous');\n          this.previousPanel = {\n            element: this.parent.activeView.getPanel(),\n            selectedDate: new Date(this.parent.selectedDate.getTime())\n          };\n          this.setDimensions(this.previousPanel.element);\n          prevWidth = this.previousPanel.element.offsetWidth;\n        }\n\n        var _x = this.parent.enableRtl ? prevWidth - e.distanceX : -prevWidth + e.distanceX;\n\n        this.element.style.transform = 'translatex(' + (this.getTranslateX(this.element) + _x) + 'px)';\n      }\n    }\n  }, {\n    key: \"swipeHandler\",\n    value: function swipeHandler(e) {\n      if (!this.isScrollTriggered || this.parent.uiStateValues.action) {\n        return;\n      }\n\n      this.isScrollTriggered = false;\n      var swipeDate = e.swipeDirection === 'Left' ? this.parent.activeView.renderDates[0] : this.parent.activeView.renderDates.slice(-1)[0];\n\n      if (e.swipeDirection === 'Left' && swipeDate < this.parent.maxDate || e.swipeDirection === 'Right' && swipeDate >= this.parent.minDate) {\n        var time = Date.now() - this.timeStampStart;\n        var offsetDist = e.distanceX * (Browser.isDevice ? 6 : 1.66);\n\n        if (offsetDist > time || e.distanceX > this.parent.element.offsetWidth / 2) {\n          this.swapPanels(e.swipeDirection);\n\n          if (offsetDist > time && e.distanceX > this.parent.element.offsetWidth / 2) {\n            this.element.style.transitionDuration = offsetDist / time / 10 + 's';\n          }\n\n          this.confirmSwipe(e.swipeDirection);\n        } else {\n          this.cancelSwipe();\n        }\n\n        var args = {\n          requestType: 'dateNavigate',\n          cancel: false,\n          event: e.originalEvent\n        };\n        this.parent.trigger(actionComplete, args);\n      } else {\n        this.cancelSwipe();\n      }\n\n      this.timeStampStart = null;\n    }\n  }, {\n    key: \"tapHoldHandler\",\n    value: function tapHoldHandler(e) {\n      var target = closest(e.originalEvent.target, '.' + APPOINTMENT_CLASS);\n\n      if (!isNullOrUndefined(target) && this.parent.isAdaptive) {\n        this.parent.quickPopup.tapHoldEventPopup(e.originalEvent);\n        return;\n      }\n    }\n  }, {\n    key: \"renderPanel\",\n    value: function renderPanel(clsName, nextPrevType) {\n      if (!this.currentPanel) {\n        this.currentPanel = {\n          element: this.parent.activeView.getPanel(),\n          selectedDate: new Date(this.parent.selectedDate.getTime())\n        };\n        this.setDimensions(this.currentPanel.element);\n      } else {\n        this.parent.setProperties({\n          selectedDate: this.currentPanel.selectedDate\n        }, true);\n      }\n\n      this.parent.setProperties({\n        selectedDate: this.parent.activeView.getNextPreviousDate(nextPrevType)\n      }, true);\n\n      if (this.parent.headerModule) {\n        this.parent.headerModule.setCalendarDate(this.parent.selectedDate);\n      }\n\n      this.parent.activeView.getRenderDates();\n      this.parent.activeView.renderLayout(clsName);\n    }\n  }, {\n    key: \"swapPanels\",\n    value: function swapPanels(direction) {\n      if (direction === this.touchLeftDirection) {\n        var temp = this.nextPanel;\n        this.nextPanel = this.currentPanel;\n        this.currentPanel = temp;\n      } else {\n        var _temp = this.previousPanel;\n        this.previousPanel = this.currentPanel;\n        this.currentPanel = _temp;\n      }\n    }\n  }, {\n    key: \"confirmSwipe\",\n    value: function confirmSwipe(swipeDirection) {\n      var _this3 = this;\n\n      var previousDate = swipeDirection === this.touchLeftDirection ? this.nextPanel.selectedDate : this.previousPanel.selectedDate;\n      var args = {\n        action: 'date',\n        cancel: false,\n        previousDate: previousDate,\n        currentDate: this.currentPanel.selectedDate\n      };\n      this.parent.trigger(navigating, args, function (navArgs) {\n        if (navArgs.cancel) {\n          _this3.swapPanels(swipeDirection);\n\n          _this3.cancelSwipe();\n        } else {\n          _this3.parent.activeView.setPanel(_this3.currentPanel.element);\n\n          _this3.parent.setProperties({\n            selectedDate: _this3.currentPanel.selectedDate\n          }, true);\n\n          var translateX;\n\n          if (_this3.parent.enableRtl) {\n            translateX = swipeDirection === _this3.touchLeftDirection ? _this3.previousPanel ? _this3.previousPanel.element.offsetLeft : _this3.currentPanel.element.offsetWidth : 0;\n          } else {\n            translateX = swipeDirection === _this3.touchLeftDirection ? -_this3.currentPanel.element.offsetLeft : 0;\n          }\n\n          addClass([_this3.element], TRANSLATE_CLASS);\n          _this3.element.style.transform = 'translatex(' + translateX + 'px)';\n\n          if (_this3.parent.headerModule) {\n            _this3.parent.headerModule.updateDateRange(_this3.parent.activeView.getDateRangeText());\n          }\n\n          _this3.parent.renderTemplates();\n\n          _this3.parent.crudModule.refreshDataManager();\n        }\n      });\n    }\n  }, {\n    key: \"cancelSwipe\",\n    value: function cancelSwipe() {\n      this.parent.activeView.setPanel(this.currentPanel.element);\n      this.parent.setProperties({\n        selectedDate: this.currentPanel.selectedDate\n      }, true);\n      this.parent.activeView.getRenderDates();\n      this.parent.activeView.generateColumnLevels();\n      addClass([this.element], TRANSLATE_CLASS);\n      var prevWidth = this.previousPanel ? this.previousPanel.element.offsetWidth : 0;\n      this.element.style.transform = 'translatex(' + (this.parent.enableRtl ? prevWidth : -this.currentPanel.element.offsetLeft) + 'px)';\n    }\n  }, {\n    key: \"onTransitionEnd\",\n    value: function onTransitionEnd() {\n      removeClass([this.element], TRANSLATE_CLASS);\n      this.element.style.transitionDuration = '';\n      this.element.style.transform = '';\n\n      if (this.previousPanel) {\n        remove(this.previousPanel.element);\n        this.previousPanel = null;\n        removeClass([this.currentPanel.element], PREVIOUS_PANEL_CLASS);\n        addClass([this.currentPanel.element], CURRENT_PANEL_CLASS);\n      }\n\n      if (this.nextPanel) {\n        remove(this.nextPanel.element);\n        this.nextPanel = null;\n        removeClass([this.currentPanel.element], NEXT_PANEL_CLASS);\n        addClass([this.currentPanel.element], CURRENT_PANEL_CLASS);\n      }\n\n      this.currentPanel = null;\n      this.parent.activeView.getPanel().style.width = '';\n    }\n  }, {\n    key: \"getTranslateX\",\n    value: function getTranslateX(element) {\n      var style = window.getComputedStyle(element);\n      return new WebKitCSSMatrix(style.webkitTransform).m41;\n    }\n  }, {\n    key: \"setDimensions\",\n    value: function setDimensions(element) {\n      element.style.width = this.parent.element.clientWidth + 'px';\n    }\n  }, {\n    key: \"resetValues\",\n    value: function resetValues() {\n      this.currentPanel = null;\n      this.previousPanel = null;\n      this.nextPanel = null;\n      this.timeStampStart = null;\n      this.element.style.transform = '';\n      removeChildren(this.element);\n      removeClass([this.element], TRANSLATE_CLASS);\n    }\n  }, {\n    key: \"destroy\",\n    value: function destroy() {\n      if (this.touchObj) {\n        this.touchObj.destroy();\n        this.touchObj = null;\n      }\n\n      EventHandler.remove(this.element, 'transitionend', this.onTransitionEnd);\n      this.resetValues();\n    }\n  }]);\n\n  return ScheduleTouch;\n}();\n/* eslint-disable @typescript-eslint/no-explicit-any */\n\n/**\n * Keyboard interaction\n */\n\n\nvar KeyboardInteraction = /*#__PURE__*/function () {\n  function KeyboardInteraction(parent) {\n    _classCallCheck(this, KeyboardInteraction);\n\n    this.selectedCells = [];\n    this.keyConfigs = {\n      downArrow: 'downarrow',\n      upArrow: 'uparrow',\n      rightArrow: 'rightarrow',\n      leftArrow: 'leftarrow',\n      shiftDownArrow: 'shift+downarrow',\n      shiftUpArrow: 'shift+uparrow',\n      shiftRightArrow: 'shift+rightarrow',\n      shiftLeftArrow: 'shift+leftarrow',\n      ctrlLeftArrow: 'ctrl+leftarrow',\n      ctrlRightArrow: 'ctrl+rightarrow',\n      altOne: 'alt+1',\n      altTwo: 'alt+2',\n      altThree: 'alt+3',\n      altFour: 'alt+4',\n      altFive: 'alt+5',\n      altSix: 'alt+6',\n      altSeven: 'alt+7',\n      altEight: 'alt+8',\n      altNine: 'alt+9',\n      enter: 'enter',\n      escape: 'escape',\n      delete: 'delete',\n      home: 'home',\n      pageUp: 'pageup',\n      pageDown: 'pagedown',\n      tab: 'tab',\n      shiftTab: 'shift+tab',\n      ctrlShiftUpArrow: 'ctrl+shift+uparrow',\n      ctrlShiftDownArrow: 'ctrl+shift+downarrow',\n      ctrlShiftLeftArrow: 'ctrl+shift+leftarrow',\n      ctrlShiftRightArrow: 'ctrl+shift+rightarrow'\n    };\n    this.parent = parent;\n    this.parent.element.tabIndex = this.parent.element.tabIndex === -1 ? 0 : this.parent.element.tabIndex;\n    this.keyboardModule = new KeyboardEvents(this.parent.element, {\n      keyAction: this.keyActionHandler.bind(this),\n      keyConfigs: this.keyConfigs,\n      eventName: 'keydown'\n    });\n    this.addEventListener();\n  }\n\n  _createClass(KeyboardInteraction, [{\n    key: \"keyActionHandler\",\n    value: function keyActionHandler(e) {\n      switch (e.action) {\n        case 'downArrow':\n        case 'shiftDownArrow':\n          this.processDown(e, e.shiftKey);\n          break;\n\n        case 'upArrow':\n        case 'shiftUpArrow':\n          this.processUp(e, e.shiftKey);\n          break;\n\n        case 'leftArrow':\n        case 'shiftLeftArrow':\n          this.processLeft(e, e.shiftKey);\n          break;\n\n        case 'rightArrow':\n        case 'shiftRightArrow':\n          this.processRight(e, e.shiftKey);\n          break;\n\n        case 'ctrlLeftArrow':\n          this.parent.changeDate(this.parent.activeView.getNextPreviousDate('previous'), e);\n\n          if (this.parent.headerModule) {\n            this.parent.headerModule.element.querySelector('.e-prev button').focus();\n          }\n\n          break;\n\n        case 'ctrlRightArrow':\n          this.parent.changeDate(this.parent.activeView.getNextPreviousDate('next'), e);\n\n          if (this.parent.headerModule) {\n            this.parent.headerModule.element.querySelector('.e-next button').focus();\n          }\n\n          break;\n\n        case 'altOne':\n        case 'altTwo':\n        case 'altThree':\n        case 'altFour':\n        case 'altFive':\n        case 'altSix':\n        case 'altSeven':\n        case 'altEight':\n        case 'altNine':\n          this.processViewNavigation(e);\n          break;\n\n        case 'enter':\n          this.processEnter(e);\n          break;\n\n        case 'home':\n          this.focusFirstCell();\n          break;\n\n        case 'tab':\n        case 'shiftTab':\n          this.processTab(e, e.shiftKey);\n          break;\n\n        case 'delete':\n          this.processDelete(e);\n          break;\n\n        case 'ctrlShiftUpArrow':\n        case 'ctrlShiftDownArrow':\n        case 'ctrlShiftLeftArrow':\n        case 'ctrlShiftRightArrow':\n          this.processCtrlShiftNavigationArrows(e);\n          break;\n\n        case 'escape':\n          this.processEscape(e);\n      }\n    }\n  }, {\n    key: \"addEventListener\",\n    value: function addEventListener() {\n      this.parent.on(_cellMouseDown, this.onCellMouseDown, this);\n    }\n  }, {\n    key: \"removeEventListener\",\n    value: function removeEventListener() {\n      this.parent.off(_cellMouseDown, this.onCellMouseDown);\n    }\n  }, {\n    key: \"onCellMouseDown\",\n    value: function onCellMouseDown(e) {\n      if (e.event.shiftKey) {\n        return;\n      }\n\n      this.initialTarget = this.getClosestCell(e.event);\n\n      if (this.parent.activeViewOptions.readonly || this.parent.currentView === 'MonthAgenda' || !this.initialTarget) {\n        return;\n      }\n\n      if (e.event.target.classList.contains(WORK_CELLS_CLASS) && e.event.which !== 3) {\n        this.parent.removeSelectedClass();\n        EventHandler.add(this.parent.getContentTable(), 'mousemove', this.onMouseSelection, this);\n        EventHandler.add(this.parent.getContentTable(), 'mouseup', this.onMoveUp, this);\n      }\n\n      if (e.event.target.classList.contains(ALLDAY_CELLS_CLASS) && e.event.which !== 3) {\n        this.parent.removeSelectedClass();\n        var allDayRow = this.parent.getAllDayRow();\n        EventHandler.add(allDayRow, 'mousemove', this.onMouseSelection, this);\n        EventHandler.add(allDayRow, 'mouseup', this.onMoveUp, this);\n      }\n    }\n  }, {\n    key: \"onMouseSelection\",\n    value: function onMouseSelection(e) {\n      var appointments = [].slice.call(this.parent.element.querySelectorAll('.' + APPOINTMENT_CLASS));\n      addClass(appointments, 'e-allow-select');\n      var selectionEdges = this.parent.boundaryValidation(e.pageY, e.pageX);\n\n      if (selectionEdges.bottom || selectionEdges.top || selectionEdges.left || selectionEdges.right) {\n        var parent = this.parent.element.querySelector('.' + CONTENT_WRAP_CLASS);\n        var yInBounds = parent.offsetHeight <= parent.scrollHeight && parent.scrollTop >= 0 && parent.scrollTop + parent.offsetHeight <= parent.scrollHeight;\n        var xInBounds = parent.offsetWidth <= parent.scrollWidth && parent.scrollLeft >= 0 && parent.scrollLeft + parent.offsetWidth <= parent.scrollWidth;\n\n        if (yInBounds && (selectionEdges.top || selectionEdges.bottom)) {\n          parent.scrollTop += selectionEdges.top ? -e.target.offsetHeight : e.target.offsetHeight;\n        }\n\n        if (xInBounds && (selectionEdges.left || selectionEdges.right)) {\n          parent.scrollLeft += selectionEdges.left ? -e.target.offsetWidth : e.target.offsetWidth;\n        }\n      }\n\n      var target = this.getClosestCell(e);\n\n      if (target) {\n        this.selectCells(true, target);\n      }\n    }\n  }, {\n    key: \"getClosestCell\",\n    value: function getClosestCell(e) {\n      return closest(e.target, '.' + WORK_CELLS_CLASS + ',.' + ALLDAY_CELLS_CLASS);\n    }\n  }, {\n    key: \"onMoveUp\",\n    value: function onMoveUp(e) {\n      var _this4 = this;\n\n      var appointments = [].slice.call(this.parent.element.querySelectorAll('.' + APPOINTMENT_CLASS));\n      removeClass(appointments, 'e-allow-select');\n\n      if (e.target.classList.contains(WORK_CELLS_CLASS)) {\n        EventHandler.remove(this.parent.getContentTable(), 'mousemove', this.onMouseSelection);\n        EventHandler.remove(this.parent.getContentTable(), 'mouseup', this.onMoveUp);\n      }\n\n      if (e.target.classList.contains(ALLDAY_CELLS_CLASS)) {\n        var allDayRow = this.parent.getAllDayRow();\n        EventHandler.remove(allDayRow, 'mousemove', this.onMouseSelection);\n        EventHandler.remove(allDayRow, 'mouseup', this.onMoveUp);\n      }\n\n      if (this.isPreventAction(e)) {\n        return;\n      }\n\n      var queryStr = '.' + WORK_CELLS_CLASS + ',.' + ALLDAY_CELLS_CLASS + ',.' + HEADER_CELLS_CLASS;\n      var target = closest(e.target, queryStr);\n      this.parent.activeCellsData = this.getSelectedElements(target);\n      var cellData = {};\n\n      if (this.parent.eventWindow) {\n        this.parent.eventWindow.convertToEventData(this.parent.activeCellsData, cellData);\n      }\n\n      var selectedCells = this.parent.getSelectedElements();\n      var args = {\n        data: cellData,\n        element: this.parent.activeCellsData.element,\n        event: e,\n        requestType: 'cellSelect',\n        showQuickPopup: false\n      };\n      this.parent.trigger(select, args, function (selectArgs) {\n        var isPopupShow = selectArgs.showQuickPopup || _this4.parent.quickInfoOnSelectionEnd;\n\n        if (isPopupShow && selectedCells.length > 1) {\n          var cellArgs = extend(_this4.parent.activeCellsData, {\n            cancel: false,\n            event: e,\n            name: 'cellClick'\n          });\n\n          _this4.parent.notify(_cellClick, cellArgs);\n        }\n      });\n    }\n  }, {\n    key: \"processEnter\",\n    value: function processEnter(e) {\n      if (this.parent.activeViewOptions.readonly && !e.target.classList.contains(APPOINTMENT_CLASS) || this.isPreventAction(e)) {\n        return;\n      }\n\n      var target = e.target;\n\n      if (closest(target, '.' + POPUP_WRAPPER_CLASS)) {\n        if (target.classList.contains(QUICK_POPUP_EVENT_DETAILS_CLASS) || target.classList.contains(EVENT_CREATE_CLASS) || target.classList.contains(EDIT_EVENT_CLASS) || target.classList.contains(DELETE_EVENT_CLASS) || target.classList.contains(CLOSE_CLASS)) {\n          target.click();\n          e.preventDefault();\n        } else if (target.classList.contains(SUBJECT_CLASS)) {\n          this.parent.element.querySelector('.' + EVENT_CREATE_CLASS).click();\n          e.preventDefault();\n        }\n\n        return;\n      }\n\n      if (target.classList.contains(RESOURCE_CELLS_CLASS) && target.classList.contains(RESOURCE_PARENT_CLASS)) {\n        var resourceIcon = target.querySelector('.' + RESOURCE_TREE_ICON_CLASS);\n\n        if (resourceIcon) {\n          resourceIcon.click();\n        }\n\n        return;\n      }\n\n      if (target.classList.contains(WORK_CELLS_CLASS) || target.classList.contains(ALLDAY_CELLS_CLASS)) {\n        this.parent.activeCellsData = this.getSelectedElements(target);\n        var args = extend(this.parent.activeCellsData, {\n          cancel: false,\n          event: e\n        });\n\n        if (this.parent.allowInline) {\n          var inlineArgs = {\n            element: args.element,\n            groupIndex: args.groupIndex,\n            type: 'Cell'\n          };\n          this.parent.notify(inlineClick, inlineArgs);\n        } else {\n          this.parent.notify(_cellClick, args);\n        }\n\n        return;\n      }\n\n      if (target.classList.contains(INLINE_SUBJECT_CLASS)) {\n        this.parent.inlineModule.inlineCrudActions(target);\n        return;\n      }\n\n      if (target.classList.contains(APPOINTMENT_CLASS) || target.classList.contains(MORE_EVENT_CLOSE_CLASS) || target.classList.contains(ALLDAY_APPOINTMENT_SECTION_CLASS) || target.classList.contains(MORE_INDICATOR_CLASS)) {\n        target.click();\n        return;\n      }\n\n      if (target.classList.contains(MORE_EVENT_HEADER_DATE_CLASS)) {\n        this.parent.setProperties({\n          selectedDate: this.parent.getDateFromElement(target)\n        }, true);\n        this.parent.changeView(this.parent.getNavigateView(), e);\n        this.processEscape(e);\n        return;\n      }\n    }\n  }, {\n    key: \"getSelectedElements\",\n    value: function getSelectedElements(target) {\n      var cellDetails;\n\n      if (this.selectedCells.length > 1 && target.classList.contains(SELECTED_CELL_CLASS)) {\n        var start = this.parent.getCellDetails(this.selectedCells[0]);\n        var end = this.parent.getCellDetails(this.selectedCells.slice(-1)[0]);\n        start.endTime = end.endTime;\n        start.element = target;\n        cellDetails = start;\n      } else {\n        cellDetails = this.parent.getCellDetails(target);\n      }\n\n      return cellDetails;\n    }\n  }, {\n    key: \"getCells\",\n    value: function getCells(isInverseTable, start, end) {\n      var tableEle = this.parent.getContentTable();\n      var cells = [].slice.call(tableEle.querySelectorAll('td'));\n      var maxRow = tableEle.rows.length;\n      var maxColumn = tableEle.rows[0].cells.length;\n\n      if (start && start.classList.contains(ALLDAY_CELLS_CLASS)) {\n        var allDayRow = this.parent.getAllDayRow();\n        cells = [].slice.call(allDayRow.cells);\n        maxRow = 1;\n        maxColumn = allDayRow.cells.length;\n      }\n\n      var startIndex = cells.indexOf(start);\n      var endIndex = cells.indexOf(end);\n      var inverseCells = [];\n\n      if (isInverseTable) {\n        for (var i = 0; i < maxColumn; i++) {\n          for (var j = 0; j < maxRow; j++) {\n            inverseCells.push(cells[maxColumn * j + i]);\n          }\n        }\n\n        startIndex = inverseCells.indexOf(start);\n        endIndex = inverseCells.indexOf(end);\n      }\n\n      if (startIndex > endIndex) {\n        var temp = startIndex;\n        startIndex = endIndex;\n        endIndex = temp;\n      }\n\n      var sCells = isInverseTable ? inverseCells : cells;\n      return sCells.slice(startIndex, endIndex + 1);\n    }\n  }, {\n    key: \"focusFirstCell\",\n    value: function focusFirstCell() {\n      if (this.parent.currentView === 'Agenda') {\n        var focusCell = this.parent.getContentTable().querySelector('.' + AGENDA_CELLS_CLASS);\n        focusCell.setAttribute('tabindex', '0');\n        focusCell.focus();\n        return;\n      }\n\n      this.parent.eventBase.removeSelectedAppointmentClass();\n\n      if (this.parent.activeView.isTimelineView()) {\n        var cell = this.parent.element.querySelector('.' + CONTENT_TABLE_CLASS + ' tr:not(.' + HIDDEN_CLASS + ') .' + WORK_CELLS_CLASS + ':not(.' + RESOURCE_GROUP_CELLS_CLASS + ')');\n        this.selectCells(false, cell);\n      } else {\n        this.selectCells(false, this.parent.getWorkCellElements()[0]);\n      }\n    }\n  }, {\n    key: \"isInverseTableSelect\",\n    value: function isInverseTableSelect() {\n      return this.parent.activeView.isInverseTableSelect;\n    }\n    /**\n     * Internal method to select cells\n     *\n     * @param {boolean} isMultiple Accepts to select multiple cells or not\n     * @param {HTMLTableCellElement} targetCell Accepts the target cells\n     * @returns {void}\n     * @private\n     */\n\n  }, {\n    key: \"selectCells\",\n    value: function selectCells(isMultiple, targetCell) {\n      var _this5 = this;\n\n      this.parent.removeSelectedClass();\n      var target = targetCell instanceof Array ? targetCell.slice(-1)[0] : targetCell;\n\n      if (isMultiple) {\n        var initialId;\n        var views = ['Day', 'Week', 'WorkWeek', 'Month', 'TimelineDay', 'TimelineWeek', 'TimelineWorkWeek', 'TimelineMonth'];\n        var args = {\n          element: targetCell,\n          requestType: 'mousemove',\n          allowMultipleRow: true\n        };\n        this.parent.inlineModule.removeInlineAppointmentElement();\n        this.parent.trigger(select, args, function (selectArgs) {\n          var allowMultipleRow = !selectArgs.allowMultipleRow || !_this5.parent.allowMultiRowSelection;\n\n          if (allowMultipleRow && views.indexOf(_this5.parent.currentView) > -1) {\n            target = target.parentElement.children[_this5.initialTarget.cellIndex];\n          }\n\n          var selectedCells = _this5.getCells(_this5.isInverseTableSelect(), _this5.initialTarget, target);\n\n          if (_this5.parent.activeViewOptions.group.resources.length > 0) {\n            initialId = _this5.initialTarget.getAttribute('data-group-index');\n            var resourceSelectedCells = [];\n\n            var _iterator3 = _createForOfIteratorHelper(selectedCells),\n                _step3;\n\n            try {\n              for (_iterator3.s(); !(_step3 = _iterator3.n()).done;) {\n                var cell = _step3.value;\n\n                if (cell.getAttribute('data-group-index') === initialId) {\n                  resourceSelectedCells.push(cell);\n                }\n              }\n            } catch (err) {\n              _iterator3.e(err);\n            } finally {\n              _iterator3.f();\n            }\n\n            selectedCells = resourceSelectedCells;\n          }\n\n          if (!_this5.parent.allowMultiCellSelection) {\n            selectedCells = [_this5.initialTarget];\n          }\n\n          _this5.selectedCells = selectedCells;\n\n          if (selectedCells.length > 2 && !target.classList.contains(ALLDAY_CELLS_CLASS)) {\n            var allDayCells = _this5.getAllDayCells(selectedCells);\n\n            if (_this5.parent.activeViewOptions.group.resources.length > 0) {\n              var resourceAllDayCells = [];\n\n              var _iterator4 = _createForOfIteratorHelper(allDayCells),\n                  _step4;\n\n              try {\n                for (_iterator4.s(); !(_step4 = _iterator4.n()).done;) {\n                  var _cell = _step4.value;\n\n                  if (_cell.getAttribute('data-group-index') === initialId) {\n                    resourceAllDayCells.push(_cell);\n                  }\n                }\n              } catch (err) {\n                _iterator4.e(err);\n              } finally {\n                _iterator4.f();\n              }\n\n              allDayCells = resourceAllDayCells;\n            }\n\n            selectedCells = selectedCells.concat(allDayCells);\n          }\n\n          if (target.getAttribute('data-group-index') !== initialId && _this5.parent.activeViewOptions.group.resources.length > 0) {\n            target = _this5.selectedCells[_this5.selectedCells.length - 1];\n          }\n\n          _this5.parent.addSelectedClass(selectedCells, target);\n        });\n      } else {\n        this.initialTarget = target;\n        this.selectedCells = [target];\n        this.parent.addSelectedClass([target], target);\n      }\n    }\n  }, {\n    key: \"selectAppointment\",\n    value: function selectAppointment(isReverse, target) {\n      var appointments = this.getAppointmentElements();\n\n      if (appointments.length < 0) {\n        return;\n      }\n\n      this.parent.eventBase.removeSelectedAppointmentClass();\n      var nextAppEle;\n\n      if (target.classList.contains(APPOINTMENT_CLASS)) {\n        var targetIndex = appointments.indexOf(target);\n        nextAppEle = appointments[isReverse ? targetIndex - 1 : targetIndex + 1];\n      } else {\n        nextAppEle = isReverse ? appointments[appointments.length - 1] : appointments[0];\n      }\n\n      if (nextAppEle) {\n        this.parent.eventBase.addSelectedAppointments([nextAppEle]);\n        nextAppEle.focus();\n        addClass([nextAppEle], AGENDA_SELECTED_CELL);\n      }\n    }\n  }, {\n    key: \"selectAppointmentElementFromWorkCell\",\n    value: function selectAppointmentElementFromWorkCell(isReverse, target) {\n      var _this6 = this;\n\n      this.parent.eventBase.removeSelectedAppointmentClass();\n      this.parent.removeSelectedClass();\n\n      if (target.classList.contains(WORK_CELLS_CLASS) || target.classList.contains(ALLDAY_CELLS_CLASS)) {\n        var appointmentElements = this.getUniqueAppointmentElements();\n        var filteredElements = [];\n        var selectedDate = this.parent.getDateFromElement(target).getTime();\n        var selectedSeriesEvents = this.parent.eventsProcessed.filter(function (eventObject) {\n          return !isReverse ? eventObject[_this6.parent.eventFields.startTime].getTime() >= selectedDate : eventObject[_this6.parent.eventFields.startTime].getTime() <= selectedDate;\n        });\n        selectedSeriesEvents.filter(function (event) {\n          appointmentElements.filter(function (element) {\n            if (JSON.stringify(event.Guid) === JSON.stringify(element.getAttribute('data-guid'))) {\n              filteredElements.push(element);\n            }\n          });\n        });\n\n        if (filteredElements.length > 0) {\n          var selectedElement = isReverse ? filteredElements[filteredElements.length - 1] : filteredElements[0];\n          var focusElements = this.getAppointmentElementsByGuid(selectedElement.getAttribute('data-guid'));\n          this.parent.eventBase.addSelectedAppointments(focusElements);\n          focusElements[focusElements.length - 1].focus();\n        }\n      }\n    }\n  }, {\n    key: \"getAllDayCells\",\n    value: function getAllDayCells(cells) {\n      var allDayRow = this.parent.getAllDayRow();\n\n      if (!allDayRow) {\n        return [];\n      }\n\n      var startCell = cells[0];\n      var endCell = cells[cells.length - 1];\n      var start = this.parent.getCellDetails(startCell);\n      var end = this.parent.getCellDetails(endCell);\n\n      if (end.endTime.getTime() - start.startTime.getTime() >= MS_PER_DAY) {\n        var allDayCells = [].slice.call(allDayRow.cells);\n        return allDayCells.slice(startCell.cellIndex, endCell.cellIndex + 1);\n      }\n\n      return [];\n    }\n  }, {\n    key: \"getAppointmentElements\",\n    value: function getAppointmentElements() {\n      return [].slice.call(this.parent.element.querySelectorAll('.' + APPOINTMENT_CLASS));\n    }\n  }, {\n    key: \"getAppointmentElementsByGuid\",\n    value: function getAppointmentElementsByGuid(guid) {\n      return [].slice.call(this.parent.element.querySelectorAll('div[data-guid=\"' + guid + '\"]'));\n    }\n  }, {\n    key: \"getUniqueAppointmentElements\",\n    value: function getUniqueAppointmentElements() {\n      var appointments = this.getAppointmentElements();\n      var appointmentElements = [];\n      appointments.map(function (value) {\n        return value.getAttribute('data-guid');\n      }).filter(function (value, index, self) {\n        if (self.indexOf(value) === index) {\n          appointmentElements.push(appointments[index]);\n        }\n      });\n      return appointmentElements;\n    }\n  }, {\n    key: \"getWorkCellFromAppointmentElement\",\n    value: function getWorkCellFromAppointmentElement(target) {\n      var selectedObject = this.parent.eventBase.getEventByGuid(target.getAttribute('data-guid'));\n      return this.parent.eventBase.selectWorkCellByTime([selectedObject]);\n    }\n  }, {\n    key: \"processViewNavigation\",\n    value: function processViewNavigation(e) {\n      var index = parseInt(e.key, 10) - 1;\n\n      if (index < this.parent.views.length) {\n        var view = this.parent.viewCollections[index].option;\n        this.parent.changeView(view, e, undefined, index);\n\n        if (this.parent.headerModule) {\n          this.parent.headerModule.element.querySelector('.e-active-view button').focus();\n        }\n      }\n    }\n  }, {\n    key: \"processUp\",\n    value: function processUp(e, isMultiple) {\n      if (isMultiple && (this.parent.activeView.isTimelineView() || this.parent.currentView === 'MonthAgenda')) {\n        return;\n      }\n\n      var target = e.target;\n      var selectedElements = this.parent.getSelectedElements();\n      var selectedEventElements = this.parent.eventBase.getSelectedAppointments();\n      var moreEventWrapper = this.parent.element.querySelector('.' + MORE_POPUP_WRAPPER_CLASS);\n      var quickPopupWrapper = this.getQuickPopupElement();\n\n      if (selectedElements.length > 0 && !e.target.classList.contains(WORK_CELLS_CLASS)) {\n        target = selectedElements[selectedElements.length - 1];\n      }\n\n      if (selectedEventElements.length > 0 && !moreEventWrapper.classList.contains(POPUP_OPEN) && !quickPopupWrapper.classList.contains(POPUP_OPEN) && ['Day', 'Week', 'WorkWeek', 'Month'].indexOf(this.parent.currentView) !== -1) {\n        target = this.getWorkCellFromAppointmentElement(selectedEventElements[selectedEventElements.length - 1]);\n        this.parent.eventBase.removeSelectedAppointmentClass();\n      }\n\n      if (!target) {\n        return;\n      }\n\n      if (target.classList.contains(WORK_CELLS_CLASS) && !this.parent.element.querySelector('.' + POPUP_OPEN)) {\n        var tableRows = this.parent.getTableRows();\n        var curRowIndex = tableRows.indexOf(target.parentElement);\n\n        if (curRowIndex > 0 && curRowIndex < tableRows.length) {\n          this.selectCells(isMultiple, tableRows[curRowIndex - 1].cells[target.cellIndex]);\n        }\n      } else if (this.parent.currentView === 'Agenda' || this.parent.currentView === 'MonthAgenda') {\n        this.selectAppointment(true, target);\n      }\n    }\n  }, {\n    key: \"processDown\",\n    value: function processDown(e, isMultiple) {\n      if (isMultiple && (this.parent.activeView.isTimelineView() || this.parent.currentView === 'MonthAgenda')) {\n        return;\n      }\n\n      var target = e.target;\n      var selectedCells = this.parent.getSelectedElements();\n      var selectedElements = this.parent.eventBase.getSelectedAppointments();\n      var moreEventWrapper = this.parent.element.querySelector('.' + MORE_POPUP_WRAPPER_CLASS);\n      var quickPopupWrapper = this.getQuickPopupElement();\n\n      if (selectedCells.length > 0 && !e.target.classList.contains(WORK_CELLS_CLASS)) {\n        target = selectedCells[selectedCells.length - 1];\n      }\n\n      if (selectedElements.length > 0 && !moreEventWrapper.classList.contains(POPUP_OPEN) && !quickPopupWrapper.classList.contains(POPUP_OPEN) && ['Day', 'Week', 'WorkWeek', 'Month'].indexOf(this.parent.currentView) !== -1) {\n        target = this.getWorkCellFromAppointmentElement(selectedElements[selectedElements.length - 1]);\n        this.parent.eventBase.removeSelectedAppointmentClass();\n      }\n\n      var tableRows = this.parent.getTableRows();\n\n      if (!target) {\n        return;\n      }\n\n      if (target.classList.contains(WORK_CELLS_CLASS) && !this.parent.element.querySelector('.' + POPUP_OPEN)) {\n        var curRowIndex = tableRows.indexOf(target.parentElement);\n\n        if (curRowIndex >= 0 && curRowIndex < tableRows.length - 1) {\n          this.selectCells(isMultiple, tableRows[curRowIndex + 1].cells[target.cellIndex]);\n        }\n      } else if (this.parent.currentView === 'Agenda' || this.parent.currentView === 'MonthAgenda') {\n        this.selectAppointment(false, target);\n      }\n    }\n  }, {\n    key: \"processLeftRight\",\n    value: function processLeftRight(target) {\n      var tableEle = this.parent.getContentTable();\n      var curRowIndex = target.parentNode.sectionRowIndex;\n      var key = {\n        element: tableEle,\n        rowIndex: curRowIndex,\n        columnIndex: target.cellIndex,\n        maxIndex: tableEle.rows[curRowIndex].cells.length\n      };\n      return key;\n    }\n  }, {\n    key: \"getQuickPopupElement\",\n    value: function getQuickPopupElement() {\n      return (this.parent.isAdaptive ? document.body : this.parent.element).querySelector('.' + POPUP_WRAPPER_CLASS);\n    }\n  }, {\n    key: \"isCancelLeftRightAction\",\n    value: function isCancelLeftRightAction(e, isMultiple) {\n      if (this.parent.currentView === 'Agenda' || isMultiple && this.parent.currentView === 'MonthAgenda') {\n        return true;\n      }\n\n      if (this.isPreventAction(e) && isMultiple) {\n        return true;\n      }\n\n      var moreEventWrapper = this.parent.element.querySelector('.' + MORE_POPUP_WRAPPER_CLASS);\n      var quickPopupWrapper = this.getQuickPopupElement();\n\n      if (moreEventWrapper.classList.contains(POPUP_OPEN) || quickPopupWrapper.classList.contains(POPUP_OPEN)) {\n        return true;\n      }\n\n      return false;\n    }\n  }, {\n    key: \"processRight\",\n    value: function processRight(e, isMultiple) {\n      if (this.isCancelLeftRightAction(e, isMultiple)) {\n        return;\n      }\n\n      var selectedCells = this.parent.getSelectedElements();\n      var targetCell;\n      var selectedAppointments = this.parent.eventBase.getSelectedAppointments();\n      var target = e.target;\n\n      if (selectedCells.length > 0 && !target.classList.contains(WORK_CELLS_CLASS) && !target.classList.contains(ALLDAY_CELLS_CLASS)) {\n        target = selectedCells[selectedCells.length - 1];\n      }\n\n      if (selectedAppointments.length > 0) {\n        target = this.getWorkCellFromAppointmentElement(selectedAppointments[selectedAppointments.length - 1]);\n        this.parent.eventBase.removeSelectedAppointmentClass();\n\n        if (!target) {\n          return;\n        }\n      }\n\n      if (target.classList.contains(WORK_CELLS_CLASS) && e.target.classList.contains(WORK_CELLS_CLASS)) {\n        var key = this.processLeftRight(target);\n\n        if (key.columnIndex >= 0 && key.columnIndex < key.maxIndex - 1) {\n          targetCell = this.calculateNextPrevDate(target, key.element.rows[key.rowIndex].cells[target.cellIndex + 1], 'right');\n\n          if (!isNullOrUndefined(targetCell)) {\n            this.selectCells(isMultiple, targetCell);\n          }\n        } else if (key.columnIndex === key.maxIndex - 1) {\n          if (!this.isInverseTableSelect() && key.rowIndex < key.element.rows.length - 1) {\n            targetCell = this.calculateNextPrevDate(target, key.element.rows[key.rowIndex + 1].cells[0], 'right');\n\n            if (!isNullOrUndefined(targetCell)) {\n              this.selectCells(isMultiple, targetCell);\n            }\n          } else if (!isMultiple) {\n            var rowIndex = this.isInverseTableSelect() ? key.rowIndex : 0;\n            this.parent.changeDate(this.parent.activeView.getNextPreviousDate('next'), e);\n            var tableEle = this.parent.getContentTable();\n            this.selectCells(false, tableEle.rows[rowIndex].cells[0]);\n          }\n        }\n      } else if (target.classList.contains(ALLDAY_CELLS_CLASS)) {\n        var curColIndex = target.cellIndex;\n        var allDayRow = this.parent.getAllDayRow();\n        var maxColIndex = allDayRow.cells.length;\n\n        if (curColIndex >= 0 && curColIndex < maxColIndex - 1) {\n          this.selectCells(isMultiple, allDayRow.cells[curColIndex + 1]);\n        } else if (curColIndex === maxColIndex - 1 && !isMultiple) {\n          this.parent.changeDate(this.parent.activeView.getNextPreviousDate('next'), e);\n\n          var _allDayRow = this.parent.getAllDayRow();\n\n          this.selectCells(false, _allDayRow.cells[0]);\n        }\n      }\n    }\n  }, {\n    key: \"processLeft\",\n    value: function processLeft(e, isMultiple) {\n      if (this.isCancelLeftRightAction(e, isMultiple)) {\n        return;\n      }\n\n      var target = e.target;\n      var selectedCells = this.parent.getSelectedElements();\n      var targetCell;\n\n      if (selectedCells.length > 0 && !target.classList.contains(WORK_CELLS_CLASS) && !target.classList.contains(ALLDAY_CELLS_CLASS)) {\n        target = selectedCells[selectedCells.length - 1];\n      }\n\n      var selectedElements = this.parent.eventBase.getSelectedAppointments();\n\n      if (selectedElements.length > 0) {\n        target = this.getWorkCellFromAppointmentElement(selectedElements[selectedElements.length - 1]);\n        this.parent.eventBase.removeSelectedAppointmentClass();\n\n        if (!target) {\n          return;\n        }\n      }\n\n      if (e.target.classList.contains(WORK_CELLS_CLASS) && target.classList.contains(WORK_CELLS_CLASS)) {\n        var key = this.processLeftRight(target);\n\n        if (key.columnIndex > 0 && key.columnIndex < key.maxIndex) {\n          targetCell = this.calculateNextPrevDate(target, key.element.rows[key.rowIndex].cells[target.cellIndex - 1], 'left');\n\n          if (!isNullOrUndefined(targetCell)) {\n            this.selectCells(isMultiple, targetCell);\n          }\n        } else if (key.columnIndex === 0) {\n          if (!this.isInverseTableSelect() && key.rowIndex > 0) {\n            targetCell = this.calculateNextPrevDate(target, key.element.rows[key.rowIndex - 1].cells[key.maxIndex - 1], 'left');\n\n            if (!isNullOrUndefined(targetCell)) {\n              this.selectCells(isMultiple, targetCell);\n            }\n          } else if (!isMultiple) {\n            this.parent.changeDate(this.parent.activeView.getNextPreviousDate('previous'), e);\n            var tableEle = this.parent.getContentTable();\n            var rowIndex = this.isInverseTableSelect() ? key.rowIndex : tableEle.rows.length - 1;\n            this.selectCells(false, tableEle.rows[rowIndex].cells[key.maxIndex - 1]);\n          }\n        }\n      } else if (target.classList.contains(ALLDAY_CELLS_CLASS)) {\n        var curColIndex = target.cellIndex;\n        var allDayRow = this.parent.getAllDayRow();\n        var maxColIndex = allDayRow.cells.length;\n\n        if (curColIndex > 0 && curColIndex < maxColIndex) {\n          this.selectCells(isMultiple, allDayRow.cells[curColIndex - 1]);\n        } else if (curColIndex === 0 && !isMultiple) {\n          this.parent.changeDate(this.parent.activeView.getNextPreviousDate('previous'), e);\n\n          var _allDayRow2 = this.parent.getAllDayRow();\n\n          this.selectCells(false, _allDayRow2.cells[maxColIndex - 1]);\n        }\n      }\n    }\n  }, {\n    key: \"calculateNextPrevDate\",\n    value: function calculateNextPrevDate(currentCell, target, type) {\n      var initialId = this.initialTarget.getAttribute('data-group-index');\n\n      if (this.parent.activeViewOptions.group.resources.length > 0 && this.parent.currentView === 'Month') {\n        if (currentCell && target && target.getAttribute('data-group-index') !== initialId) {\n          var currentDate = this.parent.getDateFromElement(currentCell);\n          var nextPrevDate = type === 'right' ? new Date(currentDate.setDate(currentDate.getDate() + 1)) : new Date(currentDate.setDate(currentDate.getDate() - 1));\n          target = [].slice.call(this.parent.element.querySelectorAll('td[data-date=\"' + nextPrevDate.getTime().toString() + '\"]' + '[data-group-index=\"' + initialId + '\"]'))[0];\n        }\n      }\n\n      return target;\n    }\n  }, {\n    key: \"getFocusableElements\",\n    value: function getFocusableElements(container) {\n      var queryString = 'a[href]:not([tabindex=\"-1\"]),input:not([disabled]):not([tabindex=\"-1\"]),' + 'textarea:not([disabled]):not([tabindex=\"-1\"]),button:not([disabled]):not([tabindex=\"-1\"]),' + 'select:not([disabled]):not([tabindex=\"-1\"]),[tabindex]:not([tabindex=\"-1\"]),[contentEditable=true]:not([tabindex=\"-1\"])';\n      return [].slice.call(container.querySelectorAll(queryString));\n    }\n  }, {\n    key: \"processTabOnPopup\",\n    value: function processTabOnPopup(e, popupElement) {\n      var _this7 = this;\n\n      var focusableElements = this.getFocusableElements(popupElement);\n      focusableElements = focusableElements.filter(function (element) {\n        var footerEle = _this7.parent.element.querySelector('.' + POPUP_FOOTER_CLASS);\n\n        if (footerEle && footerEle.offsetParent) {\n          return !(element.classList.contains(EDIT_CLASS) || element.classList.contains(DELETE_CLASS));\n        } else {\n          return !(element.classList.contains(EDIT_EVENT_CLASS) || element.classList.contains(DELETE_EVENT_CLASS));\n        }\n      });\n      var firstEle = focusableElements[0];\n      var lastEle = focusableElements[focusableElements.length - 1];\n\n      if (!isNullOrUndefined(lastEle) && document.activeElement === lastEle && !e.shiftKey) {\n        e.preventDefault();\n        firstEle.focus();\n      }\n\n      if (!isNullOrUndefined(firstEle) && document.activeElement === firstEle && e.shiftKey) {\n        e.preventDefault();\n        lastEle.focus();\n      }\n    }\n  }, {\n    key: \"processTab\",\n    value: function processTab(e, isReverse) {\n      var target = e.target;\n      var popupWrapper = closest(target, '.' + POPUP_WRAPPER_CLASS + ',.' + MORE_POPUP_WRAPPER_CLASS);\n\n      if (popupWrapper && popupWrapper.classList.contains(POPUP_OPEN)) {\n        if (popupWrapper.classList.contains(MORE_POPUP_WRAPPER_CLASS)) {\n          this.parent.eventBase.removeSelectedAppointmentClass();\n        }\n\n        this.processTabOnPopup(e, popupWrapper);\n        return;\n      }\n\n      if (target.classList.contains(ROOT)) {\n        this.parent.eventBase.removeSelectedAppointmentClass();\n        return;\n      }\n\n      if (target.classList.contains(RESOURCE_CELLS_CLASS) && this.parent.activeView.isTimelineView() && this.parent.activeViewOptions.group.resources.length > 0) {\n        var index = parseInt(target.getAttribute('data-group-index'), 10);\n        var appSelector = \".\".concat(APPOINTMENT_CLASS, \"[data-group-index=\\\"\").concat(isReverse ? index - 1 : index, \"\\\"]\");\n        var appElements = [].slice.call(this.parent.element.querySelectorAll(appSelector));\n\n        if (appElements.length > 0) {\n          this.parent.eventBase.removeSelectedAppointmentClass();\n          var focusAppointment = isReverse ? appElements.slice(-1)[0] : appElements[0];\n          this.parent.eventBase.addSelectedAppointments([focusAppointment]);\n          focusAppointment.focus();\n          e.preventDefault();\n        } else if (index + 1 === this.parent.resourceBase.lastResourceLevel.length) {\n          this.parent.element.focus();\n          e.preventDefault();\n        } else if (this.parent.virtualScrollModule) {\n          var virtual = this.parent.element.querySelector('.' + VIRTUAL_TRACK_CLASS);\n          var averageRowHeight = Math.round(virtual.offsetHeight / this.parent.resourceBase.expandedResources.length);\n          this.parent.element.querySelector('.e-content-wrap').scrollTop = (isReverse ? index - 1 : index + 1) * averageRowHeight;\n          this.parent.virtualScrollModule.virtualScrolling();\n        } else {\n          this.setScrollPosition(index);\n        }\n\n        return;\n      }\n\n      if (target.classList.contains(APPOINTMENT_CLASS)) {\n        var _appElements = [].slice.call(this.parent.element.querySelectorAll('.' + APPOINTMENT_CLASS));\n\n        if (this.parent.activeView.isTimelineView() && this.parent.activeViewOptions.group.resources.length > 0) {\n          var _index = parseInt(target.getAttribute('data-group-index'), 10);\n\n          _appElements = [].slice.call(this.parent.element.querySelectorAll(\".\".concat(APPOINTMENT_CLASS, \"[data-group-index=\\\"\").concat(_index, \"\\\"]\")));\n          var resCellSelector = \".\".concat(RESOURCE_CELLS_CLASS, \"[data-group-index=\\\"\").concat(isReverse ? _index : _index + 1, \"\\\"]\");\n          var resourceCell = this.parent.element.querySelector(resCellSelector);\n\n          if (resourceCell && (isReverse && target.getAttribute('data-guid') === _appElements[0].getAttribute('data-guid') || !isReverse && target.getAttribute('data-guid') === _appElements.slice(-1)[0].getAttribute('data-guid'))) {\n            this.parent.eventBase.removeSelectedAppointmentClass();\n\n            if (this.parent.virtualScrollModule) {\n              resourceCell.focus({\n                preventScroll: true\n              });\n            } else {\n              resourceCell.focus();\n            }\n\n            if (this.parent.activeView.isTimelineView() && this.parent.activeViewOptions.group.resources.length > 0 && isNullOrUndefined(this.parent.virtualScrollModule)) {\n              this.setScrollPosition(_index);\n            }\n\n            e.preventDefault();\n            return;\n          }\n        }\n\n        var selectedAppointments = this.parent.eventBase.getSelectedAppointments();\n\n        if (selectedAppointments.length > 0) {\n          target = selectedAppointments[selectedAppointments.length - 1];\n        }\n\n        this.parent.eventBase.removeSelectedAppointmentClass();\n\n        if (!isReverse && target.getAttribute('data-guid') === _appElements[_appElements.length - 1].getAttribute('data-guid') || isReverse && target.getAttribute('data-guid') === _appElements[0].getAttribute('data-guid')) {\n          return;\n        }\n\n        if (this.parent.currentView === 'Agenda' || this.parent.currentView === 'MonthAgenda') {\n          this.selectAppointment(isReverse, target);\n          e.preventDefault();\n        }\n\n        return;\n      }\n\n      var selectedCells = this.parent.getSelectedElements();\n\n      if (selectedCells.length > 0 && !target.classList.contains(APPOINTMENT_CLASS)) {\n        target = selectedCells[selectedCells.length - 1];\n        this.selectAppointmentElementFromWorkCell(isReverse, target);\n        e.preventDefault();\n        return;\n      }\n\n      if (target && !target.classList.contains(RESOURCE_CELLS_CLASS) && this.parent.activeView.isTimelineView() && this.parent.activeViewOptions.group.resources.length > 0) {\n        this.processTabOnResourceCells(target, isReverse);\n      }\n    } // eslint-disable-next-line @typescript-eslint/no-unused-vars\n\n  }, {\n    key: \"processDelete\",\n    value: function processDelete(e) {\n      var activeEle = document.activeElement;\n\n      if (this.parent.currentView === 'MonthAgenda') {\n        var selectedEle = this.parent.eventBase.getSelectedEvents().element;\n        activeEle = selectedEle && isNullOrUndefined(selectedEle.length) ? selectedEle : selectedEle[0];\n      }\n\n      if (activeEle && activeEle.classList.contains(APPOINTMENT_CLASS)) {\n        addClass([activeEle], APPOINTMENT_BORDER);\n        this.parent.activeEventData = this.parent.eventBase.getSelectedEvents();\n\n        if (this.parent.activeViewOptions.readonly || activeEle.classList.contains(READ_ONLY) || !this.parent.eventSettings.allowDeleting) {\n          return;\n        }\n\n        this.parent.quickPopup.deleteClick(e);\n      }\n    }\n  }, {\n    key: \"processCtrlShiftNavigationArrows\",\n    value: function processCtrlShiftNavigationArrows(e) {\n      if (this.parent.activeViewOptions.group.resources.length > 0 && document.activeElement.classList.contains(APPOINTMENT_CLASS)) {\n        var groupIndex = parseInt(document.activeElement.getAttribute('data-group-index'), 10);\n        var index = e.action === 'ctrlShiftLeftArrow' || e.action === 'ctrlShiftUpArrow' ? groupIndex - 1 : groupIndex + 1;\n        index = index < 0 ? 0 : index > this.parent.resourceBase.lastResourceLevel.length ? this.parent.resourceBase.lastResourceLevel.length : index;\n        var eventEle = [];\n\n        while (eventEle.length === 0 && index >= 0 && index <= this.parent.resourceBase.lastResourceLevel.length) {\n          eventEle = [].slice.call(this.parent.element.querySelectorAll(\".\".concat(APPOINTMENT_CLASS, \"[data-group-index=\\\"\").concat(index, \"\\\"]\")));\n          index = e.action === 'ctrlShiftLeftArrow' || e.action === 'ctrlShiftUpArrow' ? index - 1 : index + 1;\n        }\n\n        var nextAppEle = eventEle[0];\n\n        if (nextAppEle) {\n          this.parent.eventBase.removeSelectedAppointmentClass();\n          this.parent.eventBase.addSelectedAppointments([nextAppEle]);\n          nextAppEle.focus();\n        }\n      } else if (this.parent.activeViewOptions.group.resources.length > 0 && !document.activeElement.classList.contains(APPOINTMENT_CLASS)) {\n        var _index2 = this.parent.resourceBase.renderedResources[0].groupIndex;\n        var appSelector = \".\".concat(APPOINTMENT_CLASS, \"[data-group-index=\\\"\").concat(_index2, \"\\\"]\");\n        var appElements = [].slice.call(this.parent.element.querySelectorAll(appSelector));\n\n        if (appElements.length > 0) {\n          this.parent.eventBase.removeSelectedAppointmentClass();\n          var focusAppointment = appElements[0];\n          this.parent.eventBase.addSelectedAppointments([focusAppointment]);\n          focusAppointment.focus();\n          e.preventDefault();\n        }\n      }\n    }\n  }, {\n    key: \"processEscape\",\n    value: function processEscape(event) {\n      this.parent.quickPopup.onClosePopup(event);\n      this.parent.quickPopup.morePopup.hide();\n\n      if (this.parent.headerModule) {\n        this.parent.headerModule.hideHeaderPopup();\n      }\n\n      if (this.parent.inlineModule) {\n        this.parent.inlineModule.removeInlineAppointmentElement();\n      }\n    }\n  }, {\n    key: \"isPreventAction\",\n    value: function isPreventAction(e) {\n      var target = closest(e.target, '.' + RESOURCE_GROUP_CELLS_CLASS);\n\n      if (this.parent.activeView.isTimelineView() && !isNullOrUndefined(target)) {\n        return true;\n      }\n\n      return false;\n    }\n  }, {\n    key: \"processTabOnResourceCells\",\n    value: function processTabOnResourceCells(target, isReverse) {\n      var tabElements = [].slice.call(this.parent.element.querySelectorAll('[tabIndex=\"0\"]'));\n      var currentTabIndex = tabElements.indexOf(target);\n      var nextTabElement = !isReverse ? tabElements[currentTabIndex + 1] : tabElements[currentTabIndex - 1];\n\n      if (nextTabElement && nextTabElement.classList.contains(RESOURCE_CELLS_CLASS)) {\n        var groupIndex = parseInt(nextTabElement.getAttribute('data-group-index'), 10);\n\n        if (this.parent.virtualScrollModule) {\n          var resColWrap = this.parent.element.querySelector('.' + RESOURCE_COLUMN_WRAP_CLASS);\n          var resCells = [].slice.call(this.parent.element.querySelectorAll('.' + RESOURCE_CELLS_CLASS));\n          resCells.forEach(function (element) {\n            if (element.getBoundingClientRect().top < resColWrap.getBoundingClientRect().top) {\n              element.setAttribute('tabindex', '-1');\n            }\n          });\n        } else {\n          this.setScrollPosition(groupIndex);\n        }\n      }\n    }\n  }, {\n    key: \"setScrollPosition\",\n    value: function setScrollPosition(index) {\n      var workCell = this.parent.element.querySelector(\".\".concat(WORK_CELLS_CLASS, \"[data-group-index=\\\"\").concat(index, \"\\\"]\"));\n\n      if (workCell) {\n        this.parent.element.querySelector('.' + CONTENT_WRAP_CLASS).scrollTop = workCell.offsetTop;\n      }\n    }\n    /**\n     * Get module name.\n     *\n     * @returns {string} Returns the module name.\n     */\n\n  }, {\n    key: \"getModuleName\",\n    value: function getModuleName() {\n      return 'keyboard';\n    }\n    /**\n     * To destroy the keyboard module.\n     *\n     * @returns {void}\n     * @private\n     */\n\n  }, {\n    key: \"destroy\",\n    value: function destroy() {\n      this.removeEventListener();\n      this.keyboardModule.destroy();\n    }\n  }]);\n\n  return KeyboardInteraction;\n}();\n/* eslint-disable @typescript-eslint/no-explicit-any */\n\n/**\n * data module is used to generate query and data source.\n *\n * @private\n */\n\n\nvar Data = /*#__PURE__*/function () {\n  /**\n   * Constructor for data module\n   *\n   * @param {Object | DataManager} dataSource Accepts the datasource as JSON objects or DataManager\n   * @param {Query} query Accepts the query to process the data\n   * @private\n   */\n  function Data(dataSource, query) {\n    _classCallCheck(this, Data);\n\n    this.initDataManager(dataSource, query);\n  }\n  /**\n   * The function used to initialize dataManager and query\n   *\n   * @param {Object | DataManager} dataSource Accepts the datasource as JSON objects or DataManager\n   * @param {Query} query Accepts the query to process the data\n   * @returns {void}\n   * @private\n   */\n\n\n  _createClass(Data, [{\n    key: \"initDataManager\",\n    value: function initDataManager(dataSource, query) {\n      this.dataManager = dataSource instanceof DataManager ? dataSource : new DataManager(dataSource);\n      this.query = query instanceof Query ? query : new Query();\n    }\n    /**\n     * The function used to generate updated Query from schedule model\n     *\n     * @param {Date} startDate Accepts the start date\n     * @param {Date} endDate Accepts the end date\n     * @returns {void}\n     * @private\n     */\n\n  }, {\n    key: \"generateQuery\",\n    value: function generateQuery(startDate, endDate) {\n      var query = this.query.clone();\n\n      if (startDate) {\n        query.addParams('StartDate', startDate.toISOString());\n      }\n\n      if (endDate) {\n        query.addParams('EndDate', endDate.toISOString());\n      }\n\n      return query;\n    }\n    /**\n     * The function used to get dataSource by executing given Query\n     *\n     * @param  {Query} query - A Query that specifies to generate dataSource\n     * @returns {void}\n     * @private\n     */\n\n  }, {\n    key: \"getData\",\n    value: function getData(query) {\n      return this.dataManager.executeQuery(query);\n    }\n    /**\n     * To destroy the crud module.\n     *\n     * @returns {void}\n     * @private\n     */\n\n  }, {\n    key: \"destroy\",\n    value: function destroy() {\n      this.dataManager = null;\n      this.query = null;\n    }\n  }]);\n\n  return Data;\n}();\n/* eslint-disable @typescript-eslint/no-explicit-any */\n\n/** @private */\n\n\nvar Gregorian = /*#__PURE__*/function () {\n  function Gregorian() {\n    _classCallCheck(this, Gregorian);\n  }\n\n  _createClass(Gregorian, [{\n    key: \"firstDateOfMonth\",\n    value: function firstDateOfMonth(date) {\n      return new Date(date.getFullYear(), date.getMonth());\n    }\n  }, {\n    key: \"lastDateOfMonth\",\n    value: function lastDateOfMonth(dt) {\n      return new Date(dt.getFullYear(), dt.getMonth() + 1, 0);\n    }\n  }, {\n    key: \"isMonthStart\",\n    value: function isMonthStart(date) {\n      return date.getDate() === 1;\n    }\n  }, {\n    key: \"getLeapYearDaysCount\",\n    value: function getLeapYearDaysCount() {\n      return 366;\n    }\n  }, {\n    key: \"getYearDaysCount\",\n    value: function getYearDaysCount(date, interval) {\n      return (date.getFullYear() + interval) % 4 === 0 ? 366 : 365;\n    }\n  }, {\n    key: \"getDate\",\n    value: function getDate(date) {\n      return date.getDate();\n    }\n  }, {\n    key: \"getMonth\",\n    value: function getMonth(date) {\n      return date.getMonth() + 1;\n    }\n  }, {\n    key: \"getFullYear\",\n    value: function getFullYear(date) {\n      return date.getFullYear();\n    }\n  }, {\n    key: \"getYearLastDate\",\n    value: function getYearLastDate(date, interval) {\n      return new Date(date.getFullYear() + interval, 0, 0);\n    }\n  }, {\n    key: \"getMonthDaysCount\",\n    value: function getMonthDaysCount(date) {\n      return this.lastDateOfMonth(date).getDate();\n    }\n  }, {\n    key: \"getMonthStartDate\",\n    value: function getMonthStartDate(date) {\n      return new Date(date.getFullYear(), date.getMonth(), 1, date.getHours(), date.getMinutes());\n    }\n  }, {\n    key: \"getMonthEndDate\",\n    value: function getMonthEndDate(date) {\n      date.setDate(1);\n      return new Date(date.setMonth(date.getMonth() + 1));\n    }\n  }, {\n    key: \"getExpectedDays\",\n    value: function getExpectedDays(date, days) {\n      return days;\n    }\n  }, {\n    key: \"setDate\",\n    value: function setDate(dateObj, date) {\n      dateObj.setDate(date);\n    }\n  }, {\n    key: \"setValidDate\",\n    value: function setValidDate(date, interval, startDate, monthValue, beginDate) {\n      if (!isNullOrUndefined(beginDate)) {\n        date.setMonth((beginDate ? monthValue : date.getMonth()) + interval);\n      } else {\n        date.setMonth(date.getMonth() + interval, startDate);\n      }\n    }\n  }, {\n    key: \"setMonth\",\n    value: function setMonth(date, interval, startDate) {\n      date.setFullYear(date.getFullYear());\n      date.setMonth(interval - 1);\n      date.setDate(startDate);\n    }\n  }, {\n    key: \"addYears\",\n    value: function addYears(date, interval) {\n      date.setFullYear(date.getFullYear() + interval);\n    }\n  }, {\n    key: \"isSameMonth\",\n    value: function isSameMonth(date1, date2) {\n      return date1.getMonth() === date2.getMonth();\n    }\n  }, {\n    key: \"checkMonth\",\n    value: function checkMonth(date, months) {\n      return months.indexOf(date.getMonth() + 1) === -1;\n    }\n  }, {\n    key: \"compareMonth\",\n    value: function compareMonth(date1, date2) {\n      return date1.getMonth() > date2.getMonth();\n    }\n  }, {\n    key: \"isSameYear\",\n    value: function isSameYear(date1, date2) {\n      return date1.getFullYear() === date2.getFullYear();\n    }\n  }, {\n    key: \"isLastMonth\",\n    value: function isLastMonth(date) {\n      return date.getMonth() === 11;\n    }\n  }, {\n    key: \"isLeapYear\",\n    value: function isLeapYear(year, interval) {\n      return (year + interval) % 4 === 0;\n    }\n  }]);\n\n  return Gregorian;\n}();\n/** @private */\n\n\nvar Islamic = /*#__PURE__*/function () {\n  function Islamic() {\n    _classCallCheck(this, Islamic);\n  }\n\n  _createClass(Islamic, [{\n    key: \"firstDateOfMonth\",\n    value: function firstDateOfMonth(date) {\n      var hDate = this.getHijriDate(date);\n      var gDate = HijriParser.toGregorian(hDate.year, hDate.month, 1);\n      return gDate;\n    }\n  }, {\n    key: \"lastDateOfMonth\",\n    value: function lastDateOfMonth(date) {\n      var hDate = this.getHijriDate(date);\n      var daysInMonth = this.getDaysInMonth(hDate.month, hDate.year);\n      var gDate = HijriParser.toGregorian(hDate.year, hDate.month, daysInMonth);\n      var finalGDate = new Date(gDate.getTime());\n      finalGDate = new Date(finalGDate.setDate(finalGDate.getDate() + 1));\n      var finalHDate = this.getHijriDate(finalGDate);\n\n      if (hDate.month === finalHDate.month) {\n        return finalGDate;\n      }\n\n      finalHDate = this.getHijriDate(gDate);\n\n      if (hDate.month === finalHDate.month) {\n        return gDate;\n      }\n\n      return new Date(gDate.setDate(gDate.getDate() - 1));\n    }\n  }, {\n    key: \"isMonthStart\",\n    value: function isMonthStart(date) {\n      var hijriDate = this.getHijriDate(date);\n      return hijriDate.date === 1;\n    }\n  }, {\n    key: \"getLeapYearDaysCount\",\n    value: function getLeapYearDaysCount() {\n      return 355;\n    }\n  }, {\n    key: \"getYearDaysCount\",\n    value: function getYearDaysCount(date, interval) {\n      var hDate = this.getHijriDate(date);\n      return this.isLeapYear(hDate.year, interval) ? 355 : 354;\n    }\n  }, {\n    key: \"getDate\",\n    value: function getDate(date) {\n      var hijriDate = this.getHijriDate(date);\n      return hijriDate.date;\n    }\n  }, {\n    key: \"getMonth\",\n    value: function getMonth(date) {\n      var hDate = this.getHijriDate(date);\n      return hDate.month;\n    }\n  }, {\n    key: \"getFullYear\",\n    value: function getFullYear(date) {\n      var hDate = this.getHijriDate(date);\n      return hDate.year;\n    }\n  }, {\n    key: \"getYearLastDate\",\n    value: function getYearLastDate(date, interval) {\n      var hDate = this.getHijriDate(date);\n      var gDate = HijriParser.toGregorian(hDate.year + interval, 1, 0);\n      return gDate;\n    }\n  }, {\n    key: \"getMonthDaysCount\",\n    value: function getMonthDaysCount(date) {\n      var maxDate = this.lastDateOfMonth(date);\n      var hijriDate = this.getHijriDate(maxDate);\n      return hijriDate.date;\n    }\n  }, {\n    key: \"getMonthStartDate\",\n    value: function getMonthStartDate(date) {\n      var firstDate = this.firstDateOfMonth(date);\n      return new Date(firstDate.getFullYear(), firstDate.getMonth(), firstDate.getDate(), date.getHours(), date.getMinutes());\n    }\n  }, {\n    key: \"getMonthEndDate\",\n    value: function getMonthEndDate(date) {\n      var lastDate = this.lastDateOfMonth(date);\n      lastDate.setDate(lastDate.getDate() + 1);\n      return new Date(lastDate.setMonth(lastDate.getMonth()));\n    }\n  }, {\n    key: \"getExpectedDays\",\n    value: function getExpectedDays(date, days) {\n      var hDate = this.getHijriDate(date);\n      var day = [];\n\n      for (var i = 0; i < days.length; i++) {\n        var gDate = HijriParser.toGregorian(hDate.year, hDate.month, days[i]);\n        day.push(gDate.getDate());\n      }\n\n      return day;\n    }\n  }, {\n    key: \"setDate\",\n    value: function setDate(dateObj, date) {\n      var hDate = this.getHijriDate(dateObj);\n      var gDate = HijriParser.toGregorian(hDate.year, hDate.month, date);\n      this.updateDateObj(dateObj, gDate);\n    }\n  }, {\n    key: \"setValidDate\",\n    value: function setValidDate(date, interval, startDate, monthValue, beginDate) {\n      var firstDate = !isNullOrUndefined(beginDate) ? this.firstDateOfMonth(beginDate) : date;\n      var hDate = this.getHijriDate(firstDate);\n      var gDate = HijriParser.toGregorian(hDate.year, hDate.month + interval, startDate);\n      this.updateDateObj(date, gDate);\n    }\n  }, {\n    key: \"setMonth\",\n    value: function setMonth(date, interval, startDate) {\n      var hDate = this.getHijriDate(date);\n      var gDate = HijriParser.toGregorian(hDate.year, interval, startDate);\n      this.updateDateObj(date, gDate);\n    }\n  }, {\n    key: \"addYears\",\n    value: function addYears(date, interval, monthValue) {\n      var hDate = this.getHijriDate(date);\n      var gDate = HijriParser.toGregorian(hDate.year + interval, monthValue, 1);\n      this.updateDateObj(date, gDate);\n    }\n  }, {\n    key: \"isSameMonth\",\n    value: function isSameMonth(date1, date2) {\n      var currentHijri = this.getHijriDate(date1);\n      var tempHijri = this.getHijriDate(date2);\n      return currentHijri.month === tempHijri.month;\n    }\n  }, {\n    key: \"checkMonth\",\n    value: function checkMonth(date, months) {\n      var hDate = this.getHijriDate(date);\n      return months.indexOf(hDate.month) === -1;\n    }\n  }, {\n    key: \"compareMonth\",\n    value: function compareMonth(date1, date2) {\n      var hDate = this.getHijriDate(date1);\n      var hDate1 = this.getHijriDate(date2);\n      return hDate.month > hDate1.month;\n    }\n  }, {\n    key: \"isSameYear\",\n    value: function isSameYear(date1, date2) {\n      var hDate = this.getHijriDate(date1);\n      var hDate1 = this.getHijriDate(date2);\n      return hDate.year === hDate1.year;\n    }\n  }, {\n    key: \"isLastMonth\",\n    value: function isLastMonth(date) {\n      var hDate = this.getHijriDate(date);\n      return hDate.month === 12;\n    }\n  }, {\n    key: \"updateDateObj\",\n    value: function updateDateObj(date, gDate) {\n      date.setFullYear(gDate.getFullYear(), gDate.getMonth(), gDate.getDate());\n    }\n  }, {\n    key: \"isLeapYear\",\n    value: function isLeapYear(year, interval) {\n      return (14 + 11 * (year + interval)) % 30 < 11;\n    }\n  }, {\n    key: \"getDaysInMonth\",\n    value: function getDaysInMonth(month, year) {\n      var length = 0;\n      length = 29 + (month + 1) % 2;\n\n      if (month === 11 && this.isLeapYear(year, 0)) {\n        length++;\n      }\n\n      return length;\n    }\n  }, {\n    key: \"getHijriDate\",\n    value: function getHijriDate(date) {\n      return HijriParser.getHijriDate(date);\n    }\n  }]);\n\n  return Islamic;\n}();\n/**\n * Time zone\n */\n\n\nvar Timezone = /*#__PURE__*/function () {\n  function Timezone() {\n    _classCallCheck(this, Timezone);\n\n    this.timezoneData = [];\n    this.timezoneData = this.getTimezoneData();\n  }\n\n  _createClass(Timezone, [{\n    key: \"offset\",\n    value: function offset(date, timezone) {\n      var localOffset = date.getTimezoneOffset();\n\n      try {\n        var convertedDate = new Date(date.toLocaleString('en-US', {\n          timeZone: timezone\n        }));\n\n        if (!isNaN(convertedDate.getTime())) {\n          return (date.getTime() - convertedDate.getTime()) / 60000 + localOffset;\n        }\n\n        return 0;\n      } catch (error) {\n        return 0;\n      }\n    }\n  }, {\n    key: \"convert\",\n    value: function convert(date, fromOffset, toOffset) {\n      if (typeof fromOffset === 'string') {\n        fromOffset = this.offset(date, fromOffset);\n      }\n\n      if (typeof toOffset === 'string') {\n        toOffset = this.offset(date, toOffset);\n      }\n\n      var fromLocalOffset = date.getTimezoneOffset();\n      date = new Date(date.getTime() + (fromOffset - toOffset) * 60000);\n      var toLocalOffset = date.getTimezoneOffset();\n      return new Date(date.getTime() + (toLocalOffset - fromLocalOffset) * 60000);\n    }\n  }, {\n    key: \"add\",\n    value: function add(date, timezone) {\n      return this.convert(date, date.getTimezoneOffset(), timezone);\n    }\n  }, {\n    key: \"remove\",\n    value: function remove(date, timezone) {\n      return this.convert(date, timezone, date.getTimezoneOffset());\n    }\n  }, {\n    key: \"removeLocalOffset\",\n    value: function removeLocalOffset(date) {\n      return new Date(date.getTime() - date.getTimezoneOffset() * 60000);\n    }\n  }, {\n    key: \"getLocalTimezoneName\",\n    value: function getLocalTimezoneName() {\n      return window.Intl ? Intl.DateTimeFormat().resolvedOptions().timeZone || 'UTC' : 'UTC';\n    }\n  }, {\n    key: \"getTimezoneData\",\n    value: function getTimezoneData() {\n      return timezoneData;\n    }\n  }]);\n\n  return Timezone;\n}();\n\nvar timezoneData = [{\n  Value: 'Pacific/Niue',\n  Text: '(UTC-11:00) Niue'\n}, {\n  Value: 'Pacific/Pago_Pago',\n  Text: '(UTC-11:00) Pago Pago'\n}, {\n  Value: 'Pacific/Honolulu',\n  Text: '(UTC-10:00) Hawaii Time'\n}, {\n  Value: 'Pacific/Rarotonga',\n  Text: '(UTC-10:00) Rarotonga'\n}, {\n  Value: 'Pacific/Tahiti',\n  Text: '(UTC-10:00) Tahiti'\n}, {\n  Value: 'Pacific/Marquesas',\n  Text: '(UTC-09:30) Marquesas'\n}, {\n  Value: 'America/Anchorage',\n  Text: '(UTC-09:00) Alaska Time'\n}, {\n  Value: 'Pacific/Gambier',\n  Text: '(UTC-09:00) Gambier'\n}, {\n  Value: 'America/Los_Angeles',\n  Text: '(UTC-08:00) Pacific Time'\n}, {\n  Value: 'America/Tijuana',\n  Text: '(UTC-08:00) Pacific Time - Tijuana'\n}, {\n  Value: 'America/Vancouver',\n  Text: '(UTC-08:00) Pacific Time - Vancouver'\n}, {\n  Value: 'America/Whitehorse',\n  Text: '(UTC-08:00) Pacific Time - Whitehorse'\n}, {\n  Value: 'Pacific/Pitcairn',\n  Text: '(UTC-08:00) Pitcairn'\n}, {\n  Value: 'America/Denver',\n  Text: '(UTC-07:00) Mountain Time'\n}, {\n  Value: 'America/Phoenix',\n  Text: '(UTC-07:00) Mountain Time - Arizona'\n}, {\n  Value: 'America/Mazatlan',\n  Text: '(UTC-07:00) Mountain Time - Chihuahua, Mazatlan'\n}, {\n  Value: 'America/Dawson_Creek',\n  Text: '(UTC-07:00) Mountain Time - Dawson Creek'\n}, {\n  Value: 'America/Edmonton',\n  Text: '(UTC-07:00) Mountain Time - Edmonton'\n}, {\n  Value: 'America/Hermosillo',\n  Text: '(UTC-07:00) Mountain Time - Hermosillo'\n}, {\n  Value: 'America/Yellowknife',\n  Text: '(UTC-07:00) Mountain Time - Yellowknife'\n}, {\n  Value: 'America/Belize',\n  Text: '(UTC-06:00) Belize'\n}, {\n  Value: 'America/Chicago',\n  Text: '(UTC-06:00) Central Time'\n}, {\n  Value: 'America/Mexico_City',\n  Text: '(UTC-06:00) Central Time - Mexico City'\n}, {\n  Value: 'America/Regina',\n  Text: '(UTC-06:00) Central Time - Regina'\n}, {\n  Value: 'America/Tegucigalpa',\n  Text: '(UTC-06:00) Central Time - Tegucigalpa'\n}, {\n  Value: 'America/Winnipeg',\n  Text: '(UTC-06:00) Central Time - Winnipeg'\n}, {\n  Value: 'America/Costa_Rica',\n  Text: '(UTC-06:00) Costa Rica'\n}, {\n  Value: 'America/El_Salvador',\n  Text: '(UTC-06:00) El Salvador'\n}, {\n  Value: 'Pacific/Galapagos',\n  Text: '(UTC-06:00) Galapagos'\n}, {\n  Value: 'America/Guatemala',\n  Text: '(UTC-06:00) Guatemala'\n}, {\n  Value: 'America/Managua',\n  Text: '(UTC-06:00) Managua'\n}, {\n  Value: 'America/Cancun',\n  Text: '(UTC-05:00) America Cancun'\n}, {\n  Value: 'America/Bogota',\n  Text: '(UTC-05:00) Bogota'\n}, {\n  Value: 'Pacific/Easter',\n  Text: '(UTC-05:00) Easter Island'\n}, {\n  Value: 'America/New_York',\n  Text: '(UTC-05:00) Eastern Time'\n}, {\n  Value: 'America/Iqaluit',\n  Text: '(UTC-05:00) Eastern Time - Iqaluit'\n}, {\n  Value: 'America/Toronto',\n  Text: '(UTC-05:00) Eastern Time - Toronto'\n}, {\n  Value: 'America/Guayaquil',\n  Text: '(UTC-05:00) Guayaquil'\n}, {\n  Value: 'America/Havana',\n  Text: '(UTC-05:00) Havana'\n}, {\n  Value: 'America/Jamaica',\n  Text: '(UTC-05:00) Jamaica'\n}, {\n  Value: 'America/Lima',\n  Text: '(UTC-05:00) Lima'\n}, {\n  Value: 'America/Nassau',\n  Text: '(UTC-05:00) Nassau'\n}, {\n  Value: 'America/Panama',\n  Text: '(UTC-05:00) Panama'\n}, {\n  Value: 'America/Port-au-Prince',\n  Text: '(UTC-05:00) Port-au-Prince'\n}, {\n  Value: 'America/Rio_Branco',\n  Text: '(UTC-05:00) Rio Branco'\n}, {\n  Value: 'America/Halifax',\n  Text: '(UTC-04:00) Atlantic Time - Halifax'\n}, {\n  Value: 'America/Barbados',\n  Text: '(UTC-04:00) Barbados'\n}, {\n  Value: 'Atlantic/Bermuda',\n  Text: '(UTC-04:00) Bermuda'\n}, {\n  Value: 'America/Boa_Vista',\n  Text: '(UTC-04:00) Boa Vista'\n}, {\n  Value: 'America/Caracas',\n  Text: '(UTC-04:00) Caracas'\n}, {\n  Value: 'America/Curacao',\n  Text: '(UTC-04:00) Curacao'\n}, {\n  Value: 'America/Grand_Turk',\n  Text: '(UTC-04:00) Grand Turk'\n}, {\n  Value: 'America/Guyana',\n  Text: '(UTC-04:00) Guyana'\n}, {\n  Value: 'America/La_Paz',\n  Text: '(UTC-04:00) La Paz'\n}, {\n  Value: 'America/Manaus',\n  Text: '(UTC-04:00) Manaus'\n}, {\n  Value: 'America/Martinique',\n  Text: '(UTC-04:00) Martinique'\n}, {\n  Value: 'America/Port_of_Spain',\n  Text: '(UTC-04:00) Port of Spain'\n}, {\n  Value: 'America/Porto_Velho',\n  Text: '(UTC-04:00) Porto Velho'\n}, {\n  Value: 'America/Puerto_Rico',\n  Text: '(UTC-04:00) Puerto Rico'\n}, {\n  Value: 'America/Santo_Domingo',\n  Text: '(UTC-04:00) Santo Domingo'\n}, {\n  Value: 'America/Thule',\n  Text: '(UTC-04:00) Thule'\n}, {\n  Value: 'America/St_Johns',\n  Text: '(UTC-03:30) Newfoundland Time - St. Johns'\n}, {\n  Value: 'America/Araguaina',\n  Text: '(UTC-03:00) Araguaina'\n}, {\n  Value: 'America/Asuncion',\n  Text: '(UTC-03:00) Asuncion'\n}, {\n  Value: 'America/Belem',\n  Text: '(UTC-03:00) Belem'\n}, {\n  Value: 'America/Argentina/Buenos_Aires',\n  Text: '(UTC-03:00) Buenos Aires'\n}, {\n  Value: 'America/Campo_Grande',\n  Text: '(UTC-03:00) Campo Grande'\n}, {\n  Value: 'America/Cayenne',\n  Text: '(UTC-03:00) Cayenne'\n}, {\n  Value: 'America/Cuiaba',\n  Text: '(UTC-03:00) Cuiaba'\n}, {\n  Value: 'America/Fortaleza',\n  Text: '(UTC-03:00) Fortaleza'\n}, {\n  Value: 'America/Godthab',\n  Text: '(UTC-03:00) Godthab'\n}, {\n  Value: 'America/Maceio',\n  Text: '(UTC-03:00) Maceio'\n}, {\n  Value: 'America/Miquelon',\n  Text: '(UTC-03:00) Miquelon'\n}, {\n  Value: 'America/Montevideo',\n  Text: '(UTC-03:00) Montevideo'\n}, {\n  Value: 'Antarctica/Palmer',\n  Text: '(UTC-03:00) Palmer'\n}, {\n  Value: 'America/Paramaribo',\n  Text: '(UTC-03:00) Paramaribo'\n}, {\n  Value: 'America/Punta_Arenas',\n  Text: '(UTC-03:00) Punta Arenas'\n}, {\n  Value: 'America/Recife',\n  Text: '(UTC-03:00) Recife'\n}, {\n  Value: 'Antarctica/Rothera',\n  Text: '(UTC-03:00) Rothera'\n}, {\n  Value: 'America/Bahia',\n  Text: '(UTC-03:00) Salvador'\n}, {\n  Value: 'America/Santiago',\n  Text: '(UTC-03:00) Santiago'\n}, {\n  Value: 'Atlantic/Stanley',\n  Text: '(UTC-03:00) Stanley'\n}, {\n  Value: 'America/Noronha',\n  Text: '(UTC-02:00) Noronha'\n}, {\n  Value: 'America/Sao_Paulo',\n  Text: '(UTC-02:00) Sao Paulo'\n}, {\n  Value: 'Atlantic/South_Georgia',\n  Text: '(UTC-02:00) South Georgia'\n}, {\n  Value: 'Atlantic/Azores',\n  Text: '(UTC-01:00) Azores'\n}, {\n  Value: 'Atlantic/Cape_Verde',\n  Text: '(UTC-01:00) Cape Verde'\n}, {\n  Value: 'America/Scoresbysund',\n  Text: '(UTC-01:00) Scoresbysund'\n}, {\n  Value: 'Africa/Abidjan',\n  Text: '(UTC+00:00) Abidjan'\n}, {\n  Value: 'Africa/Accra',\n  Text: '(UTC+00:00) Accra'\n}, {\n  Value: 'Africa/Bissau',\n  Text: '(UTC+00:00) Bissau'\n}, {\n  Value: 'Atlantic/Canary',\n  Text: '(UTC+00:00) Canary Islands'\n}, {\n  Value: 'Africa/Casablanca',\n  Text: '(UTC+00:00) Casablanca'\n}, {\n  Value: 'America/Danmarkshavn',\n  Text: '(UTC+00:00) Danmarkshavn'\n}, {\n  Value: 'Europe/Dublin',\n  Text: '(UTC+00:00) Dublin'\n}, {\n  Value: 'Africa/El_Aaiun',\n  Text: '(UTC+00:00) El Aaiun'\n}, {\n  Value: 'Atlantic/Faroe',\n  Text: '(UTC+00:00) Faeroe'\n}, {\n  Value: 'Etc/UTC',\n  Text: '(UTC+00:00) UTC (no daylight saving)'\n}, {\n  Value: 'Europe/Lisbon',\n  Text: '(UTC+00:00) Lisbon'\n}, {\n  Value: 'Europe/London',\n  Text: '(UTC+00:00) London'\n}, {\n  Value: 'Africa/Monrovia',\n  Text: '(UTC+00:00) Monrovia'\n}, {\n  Value: 'Atlantic/Reykjavik',\n  Text: '(UTC+00:00) Reykjavik'\n}, {\n  Value: 'UTC',\n  Text: 'UTC'\n}, {\n  Value: 'Africa/Algiers',\n  Text: '(UTC+01:00) Algiers'\n}, {\n  Value: 'Europe/Amsterdam',\n  Text: '(UTC+01:00) Amsterdam'\n}, {\n  Value: 'Europe/Andorra',\n  Text: '(UTC+01:00) Andorra'\n}, {\n  Value: 'Europe/Berlin',\n  Text: '(UTC+01:00) Berlin'\n}, {\n  Value: 'Europe/Brussels',\n  Text: '(UTC+01:00) Brussels'\n}, {\n  Value: 'Europe/Budapest',\n  Text: '(UTC+01:00) Budapest'\n}, {\n  Value: 'Europe/Belgrade',\n  Text: '(UTC+01:00) Central European Time - Belgrade'\n}, {\n  Value: 'Europe/Prague',\n  Text: '(UTC+01:00) Central European Time - Prague'\n}, {\n  Value: 'Africa/Ceuta',\n  Text: '(UTC+01:00) Ceuta'\n}, {\n  Value: 'Europe/Copenhagen',\n  Text: '(UTC+01:00) Copenhagen'\n}, {\n  Value: 'Europe/Gibraltar',\n  Text: '(UTC+01:00) Gibraltar'\n}, {\n  Value: 'Africa/Lagos',\n  Text: '(UTC+01:00) Lagos'\n}, {\n  Value: 'Europe/Luxembourg',\n  Text: '(UTC+01:00) Luxembourg'\n}, {\n  Value: 'Europe/Madrid',\n  Text: '(UTC+01:00) Madrid'\n}, {\n  Value: 'Europe/Malta',\n  Text: '(UTC+01:00) Malta'\n}, {\n  Value: 'Europe/Monaco',\n  Text: '(UTC+01:00) Monaco'\n}, {\n  Value: 'Africa/Ndjamena',\n  Text: '(UTC+01:00) Ndjamena'\n}, {\n  Value: 'Europe/Oslo',\n  Text: '(UTC+01:00) Oslo'\n}, {\n  Value: 'Europe/Paris',\n  Text: '(UTC+01:00) Paris'\n}, {\n  Value: 'Europe/Rome',\n  Text: '(UTC+01:00) Rome'\n}, {\n  Value: 'Europe/Stockholm',\n  Text: '(UTC+01:00) Stockholm'\n}, {\n  Value: 'Europe/Tirane',\n  Text: '(UTC+01:00) Tirane'\n}, {\n  Value: 'Africa/Tunis',\n  Text: '(UTC+01:00) Tunis'\n}, {\n  Value: 'Europe/Vienna',\n  Text: '(UTC+01:00) Vienna'\n}, {\n  Value: 'Europe/Warsaw',\n  Text: '(UTC+01:00) Warsaw'\n}, {\n  Value: 'Europe/Zurich',\n  Text: '(UTC+01:00) Zurich'\n}, {\n  Value: 'Asia/Amman',\n  Text: '(UTC+02:00) Amman'\n}, {\n  Value: 'Europe/Athens',\n  Text: '(UTC+02:00) Athens'\n}, {\n  Value: 'Asia/Beirut',\n  Text: '(UTC+02:00) Beirut'\n}, {\n  Value: 'Europe/Bucharest',\n  Text: '(UTC+02:00) Bucharest'\n}, {\n  Value: 'Africa/Cairo',\n  Text: '(UTC+02:00) Cairo'\n}, {\n  Value: 'Europe/Chisinau',\n  Text: '(UTC+02:00) Chisinau'\n}, {\n  Value: 'Asia/Damascus',\n  Text: '(UTC+02:00) Damascus'\n}, {\n  Value: 'Asia/Gaza',\n  Text: '(UTC+02:00) Gaza'\n}, {\n  Value: 'Europe/Helsinki',\n  Text: '(UTC+02:00) Helsinki'\n}, {\n  Value: 'Asia/Jerusalem',\n  Text: '(UTC+02:00) Jerusalem'\n}, {\n  Value: 'Africa/Johannesburg',\n  Text: '(UTC+02:00) Johannesburg'\n}, {\n  Value: 'Africa/Khartoum',\n  Text: '(UTC+02:00) Khartoum'\n}, {\n  Value: 'Europe/Kiev',\n  Text: '(UTC+02:00) Kiev'\n}, {\n  Value: 'Africa/Maputo',\n  Text: '(UTC+02:00) Maputo'\n}, {\n  Value: 'Europe/Kaliningrad',\n  Text: '(UTC+02:00) Moscow-01 - Kaliningrad'\n}, {\n  Value: 'Asia/Nicosia',\n  Text: '(UTC+02:00) Nicosia'\n}, {\n  Value: 'Europe/Riga',\n  Text: '(UTC+02:00) Riga'\n}, {\n  Value: 'Europe/Sofia',\n  Text: '(UTC+02:00) Sofia'\n}, {\n  Value: 'Europe/Tallinn',\n  Text: '(UTC+02:00) Tallinn'\n}, {\n  Value: 'Africa/Tripoli',\n  Text: '(UTC+02:00) Tripoli'\n}, {\n  Value: 'Europe/Vilnius',\n  Text: '(UTC+02:00) Vilnius'\n}, {\n  Value: 'Africa/Windhoek',\n  Text: '(UTC+02:00) Windhoek'\n}, {\n  Value: 'Asia/Baghdad',\n  Text: '(UTC+03:00) Baghdad'\n}, {\n  Value: 'Europe/Istanbul',\n  Text: '(UTC+03:00) Istanbul'\n}, {\n  Value: 'Europe/Minsk',\n  Text: '(UTC+03:00) Minsk'\n}, {\n  Value: 'Europe/Moscow',\n  Text: '(UTC+03:00) Moscow+00 - Moscow'\n}, {\n  Value: 'Africa/Nairobi',\n  Text: '(UTC+03:00) Nairobi'\n}, {\n  Value: 'Asia/Qatar',\n  Text: '(UTC+03:00) Qatar'\n}, {\n  Value: 'Asia/Riyadh',\n  Text: '(UTC+03:00) Riyadh'\n}, {\n  Value: 'Antarctica/Syowa',\n  Text: '(UTC+03:00) Syowa'\n}, {\n  Value: 'Asia/Tehran',\n  Text: '(UTC+03:30) Tehran'\n}, {\n  Value: 'Asia/Baku',\n  Text: '(UTC+04:00) Baku'\n}, {\n  Value: 'Asia/Dubai',\n  Text: '(UTC+04:00) Dubai'\n}, {\n  Value: 'Indian/Mahe',\n  Text: '(UTC+04:00) Mahe'\n}, {\n  Value: 'Indian/Mauritius',\n  Text: '(UTC+04:00) Mauritius'\n}, {\n  Value: 'Europe/Samara',\n  Text: '(UTC+04:00) Moscow+01 - Samara'\n}, {\n  Value: 'Indian/Reunion',\n  Text: '(UTC+04:00) Reunion'\n}, {\n  Value: 'Asia/Tbilisi',\n  Text: '(UTC+04:00) Tbilisi'\n}, {\n  Value: 'Asia/Yerevan',\n  Text: '(UTC+04:00) Yerevan'\n}, {\n  Value: 'Asia/Kabul',\n  Text: '(UTC+04:30) Kabul'\n}, {\n  Value: 'Asia/Aqtau',\n  Text: '(UTC+05:00) Aqtau'\n}, {\n  Value: 'Asia/Aqtobe',\n  Text: '(UTC+05:00) Aqtobe'\n}, {\n  Value: 'Asia/Ashgabat',\n  Text: '(UTC+05:00) Ashgabat'\n}, {\n  Value: 'Asia/Dushanbe',\n  Text: '(UTC+05:00) Dushanbe'\n}, {\n  Value: 'Asia/Karachi',\n  Text: '(UTC+05:00) Karachi'\n}, {\n  Value: 'Indian/Kerguelen',\n  Text: '(UTC+05:00) Kerguelen'\n}, {\n  Value: 'Indian/Maldives',\n  Text: '(UTC+05:00) Maldives'\n}, {\n  Value: 'Antarctica/Mawson',\n  Text: '(UTC+05:00) Mawson'\n}, {\n  Value: 'Asia/Yekaterinburg',\n  Text: '(UTC+05:00) Moscow+02 - Yekaterinburg'\n}, {\n  Value: 'Asia/Tashkent',\n  Text: '(UTC+05:00) Tashkent'\n}, {\n  Value: 'Asia/Colombo',\n  Text: '(UTC+05:30) Colombo'\n}, {\n  Value: 'Asia/Kolkata',\n  Text: '(UTC+05:30) India Standard Time'\n}, {\n  Value: 'Asia/Katmandu',\n  Text: '(UTC+05:45) Katmandu'\n}, {\n  Value: 'Asia/Almaty',\n  Text: '(UTC+06:00) Almaty'\n}, {\n  Value: 'Asia/Bishkek',\n  Text: '(UTC+06:00) Bishkek'\n}, {\n  Value: 'Indian/Chagos',\n  Text: '(UTC+06:00) Chagos'\n}, {\n  Value: 'Asia/Dhaka',\n  Text: '(UTC+06:00) Dhaka'\n}, {\n  Value: 'Asia/Omsk',\n  Text: '(UTC+06:00) Moscow+03 - Omsk'\n}, {\n  Value: 'Asia/Thimphu',\n  Text: '(UTC+06:00) Thimphu'\n}, {\n  Value: 'Antarctica/Vostok',\n  Text: '(UTC+06:00) Vostok'\n}, {\n  Value: 'Indian/Cocos',\n  Text: '(UTC+06:30) Cocos'\n}, {\n  Value: 'Asia/Yangon',\n  Text: '(UTC+06:30) Rangoon'\n}, {\n  Value: 'Asia/Bangkok',\n  Text: '(UTC+07:00) Bangkok'\n}, {\n  Value: 'Indian/Christmas',\n  Text: '(UTC+07:00) Christmas'\n}, {\n  Value: 'Antarctica/Davis',\n  Text: '(UTC+07:00) Davis'\n}, {\n  Value: 'Asia/Saigon',\n  Text: '(UTC+07:00) Hanoi'\n}, {\n  Value: 'Asia/Hovd',\n  Text: '(UTC+07:00) Hovd'\n}, {\n  Value: 'Asia/Jakarta',\n  Text: '(UTC+07:00) Jakarta'\n}, {\n  Value: 'Asia/Krasnoyarsk',\n  Text: '(UTC+07:00) Moscow+04 - Krasnoyarsk'\n}, {\n  Value: 'Asia/Brunei',\n  Text: '(UTC+08:00) Brunei'\n}, {\n  Value: 'Asia/Shanghai',\n  Text: '(UTC+08:00) China Time - Beijing'\n}, {\n  Value: 'Asia/Choibalsan',\n  Text: '(UTC+08:00) Choibalsan'\n}, {\n  Value: 'Asia/Hong_Kong',\n  Text: '(UTC+08:00) Hong Kong'\n}, {\n  Value: 'Asia/Kuala_Lumpur',\n  Text: '(UTC+08:00) Kuala Lumpur'\n}, {\n  Value: 'Asia/Macau',\n  Text: '(UTC+08:00) Macau'\n}, {\n  Value: 'Asia/Makassar',\n  Text: '(UTC+08:00) Makassar'\n}, {\n  Value: 'Asia/Manila',\n  Text: '(UTC+08:00) Manila'\n}, {\n  Value: 'Asia/Irkutsk',\n  Text: '(UTC+08:00) Moscow+05 - Irkutsk'\n}, {\n  Value: 'Asia/Singapore',\n  Text: '(UTC+08:00) Singapore'\n}, {\n  Value: 'Asia/Taipei',\n  Text: '(UTC+08:00) Taipei'\n}, {\n  Value: 'Asia/Ulaanbaatar',\n  Text: '(UTC+08:00) Ulaanbaatar'\n}, {\n  Value: 'Australia/Perth',\n  Text: '(UTC+08:00) Western Time - Perth'\n}, {\n  Value: 'Asia/Pyongyang',\n  Text: '(UTC+08:30) Pyongyang'\n}, {\n  Value: 'Asia/Dili',\n  Text: '(UTC+09:00) Dili'\n}, {\n  Value: 'Asia/Jayapura',\n  Text: '(UTC+09:00) Jayapura'\n}, {\n  Value: 'Asia/Yakutsk',\n  Text: '(UTC+09:00) Moscow+06 - Yakutsk'\n}, {\n  Value: 'Pacific/Palau',\n  Text: '(UTC+09:00) Palau'\n}, {\n  Value: 'Asia/Seoul',\n  Text: '(UTC+09:00) Seoul'\n}, {\n  Value: 'Asia/Tokyo',\n  Text: '(UTC+09:00) Tokyo'\n}, {\n  Value: 'Australia/Darwin',\n  Text: '(UTC+09:30) Central Time - Darwin'\n}, {\n  Value: 'Antarctica/DumontDUrville',\n  Text: '(UTC+10:00) Dumont D\"Urville'\n}, {\n  Value: 'Australia/Brisbane',\n  Text: '(UTC+10:00) Eastern Time - Brisbane'\n}, {\n  Value: 'Pacific/Guam',\n  Text: '(UTC+10:00) Guam'\n}, {\n  Value: 'Asia/Vladivostok',\n  Text: '(UTC+10:00) Moscow+07 - Vladivostok'\n}, {\n  Value: 'Pacific/Port_Moresby',\n  Text: '(UTC+10:00) Port Moresby'\n}, {\n  Value: 'Pacific / Chuuk',\n  Text: '(UTC+10:00) Truk'\n}, {\n  Value: 'Australia/Adelaide',\n  Text: '(UTC+10:30) Central Time - Adelaide'\n}, {\n  Value: 'Antarctica/Casey',\n  Text: '(UTC+11:00) Casey'\n}, {\n  Value: 'Australia/Hobart',\n  Text: '(UTC+11:00) Eastern Time - Hobart'\n}, {\n  Value: 'Australia/Sydney',\n  Text: '(UTC+11:00) Eastern Time - Melbourne, Sydney'\n}, {\n  Value: 'Pacific/Efate',\n  Text: '(UTC+11:00) Efate'\n}, {\n  Value: 'Pacific/Guadalcanal',\n  Text: '(UTC+11:00) Guadalcanal'\n}, {\n  Value: 'Pacific/Kosrae',\n  Text: '(UTC+11:00) Kosrae'\n}, {\n  Value: 'Asia/Magadan',\n  Text: '(UTC+11:00) Moscow+08 - Magadan'\n}, {\n  Value: 'Pacific / Norfolk',\n  Text: '(UTC+11:00) Norfolk'\n}, {\n  Value: 'Pacific/Noumea',\n  Text: '(UTC+11:00) Noumea'\n}, {\n  Value: 'Pacific/Pohnpei',\n  Text: '(UTC+11:00) Ponape'\n}, {\n  Value: 'Pacific/Funafuti',\n  Text: '(UTC+12:00) Funafuti'\n}, {\n  Value: 'Pacific/Kwajalein',\n  Text: '(UTC+12:00) Kwajalein'\n}, {\n  Value: 'Pacific/Majuro',\n  Text: '(UTC+12:00) Majuro'\n}, {\n  Value: 'Asia/Kamchatka',\n  Text: '(UTC+12:00) Moscow+09 - Petropavlovsk - Kamchatskiy'\n}, {\n  Value: 'Pacific / Nauru',\n  Text: '(UTC+12:00) Nauru'\n}, {\n  Value: 'Pacific/Tarawa',\n  Text: '(UTC+12:00) Tarawa'\n}, {\n  Value: 'Pacific/Wake',\n  Text: '(UTC+12:00) Wake'\n}, {\n  Value: 'Pacific/Wallis',\n  Text: '(UTC+12:00) Wallis'\n}, {\n  Value: 'Pacific/Auckland',\n  Text: '(UTC+13:00) Auckland'\n}, {\n  Value: 'Pacific/Enderbury',\n  Text: '(UTC+13:00) Enderbury'\n}, {\n  Value: 'Pacific/Fakaofo',\n  Text: '(UTC+13:00) Fakaofo'\n}, {\n  Value: 'Pacific/Fiji',\n  Text: '(UTC+13:00) Fiji'\n}, {\n  Value: 'Pacific/Tongatapu',\n  Text: '(UTC+13:00) Tongatapu'\n}, {\n  Value: 'Pacific/Apia',\n  Text: '(UTC+14:00) Apia'\n}, {\n  Value: 'Pacific/Kiritimati',\n  Text: '(UTC+14:00) Kiritimati'\n}];\n/* eslint-disable max-len */\n\n/**\n * Date Generator from Recurrence Rule\n */\n\n/**\n * Generate Summary from Recurrence Rule\n *\n * @param {string} rule Accepts the Recurrence rule\n * @param {L10n} localeObject Accepts the locale object\n * @param {string} locale Accepts the locale name\n * @param {CalendarType} calendarType Accepts the calendar type\n * @returns {string} Returns the summary string from given recurrence rule\n */\n\nfunction generateSummary(rule, localeObject, locale) {\n  var calendarType = arguments.length > 3 && arguments[3] !== undefined ? arguments[3] : 'Gregorian';\n  var ruleObject = extractObjectFromRule(rule);\n  var summary = localeObject.getConstant(EVERY) + ' ';\n  var cldrObj;\n  var cldrObj1;\n  var calendarMode = calendarType.toLowerCase();\n\n  if (locale === 'en' || locale === 'en-US') {\n    var nameSpace1 = 'months.stand-alone.abbreviated';\n    var nameSpace = 'days.stand-alone.abbreviated';\n    cldrObj1 = getValue(nameSpace1, getDefaultDateObject(calendarMode));\n    cldrObj = getValue(nameSpace, getDefaultDateObject(calendarMode));\n  } else {\n    var _nameSpace = 'main.' + locale + '.dates.calendars.' + calendarMode + '.months.stand-alone.abbreviated';\n\n    var _nameSpace2 = 'main.' + locale + '.dates.calendars.' + calendarMode + '.days.stand-alone.abbreviated';\n\n    cldrObj1 = getValue(_nameSpace, cldrData);\n    cldrObj = getValue(_nameSpace2, cldrData);\n  }\n\n  if (ruleObject.interval > 1) {\n    summary += ruleObject.interval + ' ';\n  }\n\n  switch (ruleObject.freq) {\n    case 'DAILY':\n      summary += localeObject.getConstant(DAYS);\n      break;\n\n    case 'WEEKLY':\n      summary += localeObject.getConstant(WEEKS) + ' ' + localeObject.getConstant(ON) + ' ';\n      ruleObject.day.forEach(function (day, index) {\n        summary += capitalizeFirstWord(getValue(DAYINDEXOBJECT[day], cldrObj), 'single');\n        summary += ruleObject.day.length - 1 === index ? '' : ', ';\n      });\n      break;\n\n    case 'MONTHLY':\n      summary += localeObject.getConstant(MONTHS) + ' ' + localeObject.getConstant(ON) + ' ';\n      summary += getMonthSummary(ruleObject, cldrObj, localeObject);\n      break;\n\n    case 'YEARLY':\n      summary += localeObject.getConstant(YEARS) + ' ' + localeObject.getConstant(ON) + ' ';\n      summary += capitalizeFirstWord(getValue(ruleObject.month[0].toString(), cldrObj1), 'single') + ' ';\n      summary += getMonthSummary(ruleObject, cldrObj, localeObject);\n      break;\n  }\n\n  if (ruleObject.count) {\n    summary += ', ' + ruleObject.count + ' ' + localeObject.getConstant(TIMES);\n  } else if (ruleObject.until) {\n    var tempDate = ruleObject.until;\n    summary += ', ' + localeObject.getConstant(UNTIL) + ' ' + tempDate.getDate() + ' ' + capitalizeFirstWord(getValue((tempDate.getMonth() + 1).toString(), cldrObj1), 'single') + ' ' + tempDate.getFullYear();\n  }\n\n  return summary;\n}\n/**\n * Generates Month summary\n *\n * @param {RecRule} ruleObject Accepts the recurrence rule object\n * @param {string[]} cldrObj Accepts the collections of month name from calendar\n * @param {L10n} localeObj Accepts the locale object\n * @returns {string} Returns the month summary string from given recurrence rule object\n * @private\n */\n\n\nfunction getMonthSummary(ruleObject, cldrObj, localeObj) {\n  var summary = '';\n\n  if (ruleObject.monthDay.length) {\n    summary += ruleObject.monthDay[0];\n  } else if (ruleObject.day) {\n    var pos = ruleObject.setPosition - 1;\n    summary += localeObj.getConstant(WEEKPOS[pos > -1 ? pos : WEEKPOS.length - 1]) + ' ' + capitalizeFirstWord(getValue(DAYINDEXOBJECT[ruleObject.day[0]], cldrObj), 'single');\n  }\n\n  return summary;\n}\n/**\n * Generates the date collections from the given recurrence rule\n *\n * @param {Date} startDate Accepts the rule start date\n * @param {string} rule Accepts the recurrence rule\n * @param {string} excludeDate Accepts the exception dates in string format\n * @param {number} startDayOfWeek Accepts the start day index of week\n * @param {number} maximumCount Accepts the maximum number count to generate date collections\n * @param {Date} viewDate Accepts the current date instead of start date\n * @param {CalendarType} calendarMode Accepts the calendar type\n * @param {string} oldTimezone Accepts the timezone name\n * @param {string} newTimezone Accepts the timezone name\n * @returns {number[]} Returns the collection of dates\n */\n\n\nfunction generate(startDate, rule, excludeDate, startDayOfWeek) {\n  var maximumCount = arguments.length > 4 && arguments[4] !== undefined ? arguments[4] : MAXOCCURRENCE;\n  var viewDate = arguments.length > 5 && arguments[5] !== undefined ? arguments[5] : null;\n  var calendarMode = arguments.length > 6 && arguments[6] !== undefined ? arguments[6] : 'Gregorian';\n  var oldTimezone = arguments.length > 7 && arguments[7] !== undefined ? arguments[7] : null;\n  var newTimezone = arguments.length > 8 && arguments[8] !== undefined ? arguments[8] : null;\n  var ruleObject = extractObjectFromRule(rule);\n  var cacheDate;\n  calendarUtil = getCalendarUtil(calendarMode);\n  var data = [];\n  var modifiedDate = new Date(startDate.getTime());\n  tempExcludeDate = [];\n  var tempDate = isNullOrUndefined(excludeDate) ? [] : excludeDate.split(',');\n  var tz = new Timezone();\n  tempDate.forEach(function (content) {\n    var parsedDate = getDateFromRecurrenceDateString(content);\n\n    if (oldTimezone && newTimezone) {\n      parsedDate = tz.convert(new Date(parsedDate.getTime()), oldTimezone, newTimezone);\n    }\n\n    tempExcludeDate.push(new Date(parsedDate.getTime()).setHours(0, 0, 0, 0));\n  });\n  ruleObject.recExceptionCount = !isNullOrUndefined(ruleObject.count) ? tempExcludeDate.length : 0;\n\n  if (viewDate && viewDate > startDate && !ruleObject.count) {\n    tempViewDate = new Date(new Date(viewDate.getTime()).setHours(0, 0, 0));\n  } else {\n    tempViewDate = null;\n  }\n\n  if (!ruleObject.until && tempViewDate) {\n    cacheDate = new Date(tempViewDate.getTime());\n    cacheDate.setDate(tempViewDate.getDate() + maximumCount * ruleObject.interval);\n    ruleObject.until = cacheDate;\n  }\n\n  if (ruleObject.until && startDate > ruleObject.until) {\n    return data;\n  }\n\n  maxOccurrence = maximumCount;\n  setFirstDayOfWeek(DAYINDEX[startDayOfWeek]);\n\n  switch (ruleObject.freq) {\n    case 'DAILY':\n      dailyType(modifiedDate, ruleObject.until, data, ruleObject);\n      break;\n\n    case 'WEEKLY':\n      weeklyType(modifiedDate, ruleObject.until, data, ruleObject);\n      break;\n\n    case 'MONTHLY':\n      monthlyType(modifiedDate, ruleObject.until, data, ruleObject);\n      break;\n\n    case 'YEARLY':\n      yearlyType(modifiedDate, ruleObject.until, data, ruleObject);\n  }\n\n  return data;\n}\n/**\n * Generate date object from given date string\n *\n * @param {string} recDateString Accepts the exception date as string\n * @returns {Date} Returns the date from exception date string\n */\n\n\nfunction getDateFromRecurrenceDateString(recDateString) {\n  return new Date(recDateString.substr(0, 4) + '-' + recDateString.substr(4, 2) + '-' + recDateString.substr(6, 5) + ':' + recDateString.substr(11, 2) + ':' + recDateString.substr(13));\n}\n/**\n * Internal method to handle exclude date\n *\n * @param {number[]} data Accepts the exception date collections\n * @param {number} date Accepts the new exclude date\n * @returns {void}\n * @private\n */\n\n\nfunction excludeDateHandler(data, date) {\n  var zeroIndex = new Date(date).setHours(0, 0, 0, 0);\n\n  if (tempExcludeDate.indexOf(zeroIndex) === -1 && (!tempViewDate || zeroIndex >= tempViewDate.getTime())) {\n    data.push(date);\n  }\n}\n/**\n * Internal method for get date count\n *\n * @param {Date} startDate Accepts the date\n * @param {RecRule} ruleObject Accepts the recurrence rule object\n * @returns {number} Returns the number of date count\n * @private\n */\n\n\nfunction getDateCount$1(startDate, ruleObject) {\n  var count = maxOccurrence;\n\n  if (ruleObject.count) {\n    count = ruleObject.count;\n  } else if (ruleObject.until) {\n    if (ruleObject.freq === 'DAILY' || ruleObject.freq === 'WEEKLY') {\n      count = Math.floor((ruleObject.until.getTime() - startDate.getTime()) / MS_PER_DAY) + 1;\n    } else if (ruleObject.freq === 'MONTHLY' || ruleObject.freq === 'YEARLY') {\n      count = Math.floor((ruleObject.until.getMonth() + 12 * ruleObject.until.getFullYear() - (startDate.getMonth() + 12 * startDate.getFullYear())) / ruleObject.interval) + (ruleObject.day.length > 1 ? Math.floor((ruleObject.until.getTime() - startDate.getTime()) / MS_PER_DAY) + 1 : 1);\n\n      if (ruleObject.freq === 'YEARLY') {\n        count = ruleObject.month.length > 1 ? count * ruleObject.month.length : count;\n      }\n    }\n  }\n\n  return count;\n}\n/**\n *  Internal method for daily type recurrence rule\n *\n * @param {Date} startDate Accepts the strat date\n * @param {Date} endDate Accepts the end date\n * @param {number[]} data Accepts the collection of dates\n * @param {RecRule} ruleObject Accepts the recurrence rule object\n * @returns {void}\n * @private\n */\n\n\nfunction dailyType(startDate, endDate, data, ruleObject) {\n  var tempDate = new Date(startDate.getTime());\n  var interval = ruleObject.interval;\n  var expectedCount = getDateCount$1(startDate, ruleObject);\n  var state;\n  var expectedDays = ruleObject.day;\n\n  while (compareDates(tempDate, endDate)) {\n    state = true;\n    state = validateRules(tempDate, ruleObject);\n\n    if (state && (expectedDays.indexOf(DAYINDEX[tempDate.getDay()]) > -1 || expectedDays.length === 0)) {\n      excludeDateHandler(data, tempDate.getTime());\n\n      if (expectedCount && data.length + ruleObject.recExceptionCount >= expectedCount) {\n        break;\n      }\n    }\n\n    tempDate.setDate(tempDate.getDate() + interval);\n  }\n}\n/**\n * Internal method for weekly type recurrence rule\n *\n * @param {Date} startDate Accepts the strat date\n * @param {Date} endDate Accepts the end date\n * @param {number[]} data Accepts the collection of dates\n * @param {RecRule} ruleObject Accepts the recurrence rule object\n * @returns {void}\n * @private\n */\n\n\nfunction weeklyType(startDate, endDate, data, ruleObject) {\n  var tempDate = new Date(startDate.getTime());\n\n  if (!ruleObject.day.length) {\n    ruleObject.day.push(DAYINDEX[startDate.getDay()]);\n  }\n\n  var interval = ruleObject.interval;\n  var expectedDays = ruleObject.day;\n  var expectedCount = getDateCount$1(startDate, ruleObject);\n  var weekState = true;\n  var wkstIndex;\n  var weekCollection = [];\n\n  if (expectedDays.length > 1) {\n    if (isNullOrUndefined(ruleObject.wkst) || ruleObject.wkst === '') {\n      ruleObject.wkst = dayIndex[0];\n    }\n\n    wkstIndex = DAYINDEX.indexOf(ruleObject.wkst);\n\n    while (compareDates(tempDate, endDate)) {\n      var startDateDiff = DAYINDEX.indexOf(DAYINDEX[tempDate.getDay()]) - wkstIndex;\n      startDateDiff = startDateDiff === -1 ? 6 : startDateDiff;\n      var weekstartDate = addDays(tempDate, -startDateDiff);\n      var weekendDate = addDays(weekstartDate, 6);\n      var compareTempDate = new Date(tempDate.getTime());\n      weekendDate = resetTime(weekendDate);\n      compareTempDate = resetTime(compareTempDate);\n\n      while (weekendDate >= compareTempDate) {\n        if (expectedDays.indexOf(DAYINDEX[tempDate.getDay()]) > -1) {\n          weekCollection.push([tempDate.getTime()]);\n        }\n\n        if (expectedCount && data.length + ruleObject.recExceptionCount >= expectedCount) {\n          break;\n        }\n\n        tempDate.setDate(tempDate.getDate() + 1);\n        compareTempDate = new Date(tempDate.getTime());\n        compareTempDate = resetTime(compareTempDate);\n      }\n\n      tempDate.setDate(tempDate.getDate() - 1);\n\n      if (expectedCount && data.length + ruleObject.recExceptionCount >= expectedCount) {\n        break;\n      }\n\n      tempDate.setDate(tempDate.getDate() + 1 + (interval - 1) * 7);\n      insertDataCollection(weekCollection, weekState, startDate, endDate, data, ruleObject);\n      weekCollection = [];\n    }\n  } else {\n    tempDate = getStartDateForWeek(startDate, ruleObject.day);\n\n    while (compareDates(tempDate, endDate)) {\n      weekState = validateRules(tempDate, ruleObject);\n\n      if (weekState && expectedDays.indexOf(DAYINDEX[tempDate.getDay()]) > -1) {\n        excludeDateHandler(data, tempDate.getTime());\n      }\n\n      if (expectedCount && data.length + ruleObject.recExceptionCount >= expectedCount) {\n        break;\n      }\n\n      tempDate.setDate(tempDate.getDate() + interval * 7);\n    }\n\n    insertDataCollection(weekCollection, weekState, startDate, endDate, data, ruleObject);\n    weekCollection = [];\n  }\n}\n/**\n *  Internal method for monthly type recurrence rule\n *\n * @param {Date} startDate Accepts the strat date\n * @param {Date} endDate Accepts the end date\n * @param {number[]} data Accepts the collection of dates\n * @param {RecRule} ruleObject Accepts the recurrence rule object\n * @returns {void}\n * @private\n */\n\n\nfunction monthlyType(startDate, endDate, data, ruleObject) {\n  // Set monthday value if BYDAY, BYMONTH and Month day property is not set based on start date\n  if (!ruleObject.month.length && !ruleObject.day.length && !ruleObject.monthDay.length) {\n    ruleObject.monthDay.push(startDate.getDate());\n\n    if (ruleObject.freq === 'YEARLY') {\n      ruleObject.month.push(startDate.getMonth() + 1);\n    }\n  } else if (ruleObject.month.length > 0 && !ruleObject.day.length && !ruleObject.monthDay.length) {\n    ruleObject.monthDay.push(startDate.getDate());\n  }\n\n  var ruleType = validateMonthlyRuleType(ruleObject);\n\n  switch (ruleType) {\n    case 'day':\n      switch (ruleObject.freq) {\n        case 'MONTHLY':\n          monthlyDayTypeProcessforMonthFreq(startDate, endDate, data, ruleObject);\n          break;\n\n        case 'YEARLY':\n          monthlyDayTypeProcess(startDate, endDate, data, ruleObject);\n          break;\n      }\n\n      break;\n\n    case 'both':\n    case 'date':\n      switch (ruleObject.freq) {\n        case 'MONTHLY':\n          monthlyDateTypeProcessforMonthFreq(startDate, endDate, data, ruleObject);\n          break;\n\n        case 'YEARLY':\n          monthlyDateTypeProcess(startDate, endDate, data, ruleObject);\n          break;\n      }\n\n      break;\n  }\n}\n/**\n * Internal method for yearly type recurrence rule\n *\n * @param {Date} startDate Accepts the strat date\n * @param {Date} endDate Accepts the end date\n * @param {number[]} data Accepts the collection of dates\n * @param {RecRule} ruleObject Accepts the recurrence rule object\n * @returns {void}\n * @private\n */\n\n\nfunction yearlyType(startDate, endDate, data, ruleObject) {\n  var typeValue = checkYearlyType(ruleObject);\n\n  switch (typeValue) {\n    case 'MONTH':\n      monthlyType(startDate, endDate, data, ruleObject);\n      break;\n\n    case 'WEEKNO':\n      processWeekNo(startDate, endDate, data, ruleObject);\n      break;\n\n    case 'YEARDAY':\n      processYearDay(startDate, endDate, data, ruleObject);\n      break;\n  }\n}\n/**\n * Internal method for process week no\n *\n * @param {Date} startDate Accepts the strat date\n * @param {Date} endDate Accepts the end date\n * @param {number[]} data Accepts the collection of dates\n * @param {RecRule} ruleObject Accepts the recurrence rule object\n * @returns {void}\n * @private\n */\n\n\nfunction processWeekNo(startDate, endDate, data, ruleObject) {\n  var stDate = calendarUtil.getYearLastDate(startDate, 0);\n  var tempDate;\n  var expectedCount = getDateCount$1(startDate, ruleObject);\n  var state;\n  var startDay;\n  var firstWeekSpan;\n  var weekNos = ruleObject.weekNo;\n  var weekNo;\n  var maxDate;\n  var minDate;\n  var weekCollection = [];\n  var expectedDays = ruleObject.day;\n\n  while (compareDates(stDate, endDate)) {\n    startDay = dayIndex.indexOf(DAYINDEX[stDate.getDay()]);\n    firstWeekSpan = 6 - startDay + 1;\n\n    for (var index = 0; index < weekNos.length; index++) {\n      weekNo = weekNos[index];\n      weekNo = weekNo > 0 ? weekNo : 53 + weekNo + 1;\n      maxDate = weekNo === 1 ? firstWeekSpan : firstWeekSpan + (weekNo - 1) * 7;\n      minDate = weekNo === 1 ? firstWeekSpan - 7 : firstWeekSpan + (weekNo - 2) * 7;\n\n      while (minDate < maxDate) {\n        tempDate = new Date(stDate.getTime() + MS_PER_DAY * minDate);\n\n        if (expectedDays.length === 0 || expectedDays.indexOf(DAYINDEX[tempDate.getDay()]) > -1) {\n          if (isNullOrUndefined(ruleObject.setPosition)) {\n            insertDateCollection(state, startDate, endDate, data, ruleObject, tempDate.getTime());\n          } else {\n            weekCollection.push([tempDate.getTime()]);\n          }\n        }\n\n        minDate++;\n      }\n    }\n\n    if (!isNullOrUndefined(ruleObject.setPosition)) {\n      insertDatasIntoExistingCollection(weekCollection, state, startDate, endDate, data, ruleObject);\n    }\n\n    if (expectedCount && data.length + ruleObject.recExceptionCount >= expectedCount) {\n      return;\n    }\n\n    stDate = calendarUtil.getYearLastDate(tempDate, ruleObject.interval);\n    weekCollection = [];\n  }\n}\n/**\n * Internal method for process year day\n *\n * @param {Date} startDate Accepts the strat date\n * @param {Date} endDate Accepts the end date\n * @param {number[]} data Accepts the collection of dates\n * @param {RecRule} ruleObject Accepts the recurrence rule object\n * @returns {void}\n * @private\n */\n\n\nfunction processYearDay(startDate, endDate, data, ruleObject) {\n  var stDate = calendarUtil.getYearLastDate(startDate, 0);\n  var tempDate;\n  var expectedCount = getDateCount$1(startDate, ruleObject);\n  var state;\n  var dateCollection = [];\n  var date;\n  var expectedDays = ruleObject.day;\n\n  while (compareDates(stDate, endDate)) {\n    for (var index = 0; index < ruleObject.yearDay.length; index++) {\n      date = ruleObject.yearDay[index];\n      tempDate = new Date(stDate.getTime());\n\n      if ((date === calendarUtil.getLeapYearDaysCount() || date === -calendarUtil.getLeapYearDaysCount()) && !calendarUtil.isLeapYear(calendarUtil.getFullYear(tempDate), 1)) {\n        tempDate.setDate(tempDate.getDate() + 1);\n        continue;\n      }\n\n      tempDate.setDate(tempDate.getDate() + (date < 0 ? calendarUtil.getYearDaysCount(tempDate, 1) + 1 + date : date));\n\n      if (expectedDays.length === 0 || expectedDays.indexOf(DAYINDEX[tempDate.getDay()]) > -1) {\n        if (ruleObject.setPosition == null) {\n          insertDateCollection(state, startDate, endDate, data, ruleObject, tempDate.getTime());\n        } else {\n          dateCollection.push([tempDate.getTime()]);\n        }\n      }\n    }\n\n    if (!isNullOrUndefined(ruleObject.setPosition)) {\n      insertDatasIntoExistingCollection(dateCollection, state, startDate, endDate, data, ruleObject);\n    }\n\n    if (expectedCount && data.length + ruleObject.recExceptionCount >= expectedCount) {\n      return;\n    }\n\n    stDate = calendarUtil.getYearLastDate(tempDate, ruleObject.interval);\n    dateCollection = [];\n  }\n}\n/**\n * Internal method to check yearly type\n *\n * @param {RecRule} ruleObject Accepts the recurrence rule object\n * @returns {YearRuleType} Returns the Yearly rule type object\n * @private\n */\n\n\nfunction checkYearlyType(ruleObject) {\n  if (ruleObject.yearDay.length) {\n    return 'YEARDAY';\n  } else if (ruleObject.weekNo.length) {\n    return 'WEEKNO';\n  }\n\n  return 'MONTH';\n}\n/**\n * Internal method to initialize recurrence rule variables\n *\n * @param {Date} startDate Accepts the start date\n * @param {RecRule} ruleObject Accepts the recurrence rule object\n * @returns {RuleData} Return the rule data object\n * @private\n */\n\n\nfunction initializeRecRuleVariables(startDate, ruleObject) {\n  var ruleData = {\n    monthCollection: [],\n    index: 0,\n    tempDate: new Date(startDate.getTime()),\n    mainDate: new Date(startDate.getTime()),\n    expectedCount: getDateCount$1(startDate, ruleObject),\n    monthInit: 0,\n    dateCollection: []\n  };\n\n  if (ruleObject.month.length) {\n    calendarUtil.setMonth(ruleData.tempDate, ruleObject.month[0], ruleData.tempDate.getDate());\n  }\n\n  return ruleData;\n}\n/**\n * Internal method for process monthly date type recurrence rule\n *\n * @param {Date} startDate Accepts the strat date\n * @param {Date} endDate Accepts the end date\n * @param {number[]} data Accepts the collection of dates\n * @param {RecRule} ruleObject Accepts the recurrence rule object\n * @returns {void}\n * @private\n */\n\n\nfunction monthlyDateTypeProcess(startDate, endDate, data, ruleObject) {\n  if (ruleObject.month.length) {\n    monthlyDateTypeProcessforMonthFreq(startDate, endDate, data, ruleObject);\n    return;\n  }\n\n  var ruleData = initializeRecRuleVariables(startDate, ruleObject);\n  var currentMonthDate;\n  ruleData.tempDate = ruleData.mainDate = calendarUtil.getMonthStartDate(ruleData.tempDate);\n\n  while (compareDates(ruleData.tempDate, endDate)) {\n    currentMonthDate = new Date(ruleData.tempDate.getTime());\n\n    while (calendarUtil.isSameYear(currentMonthDate, ruleData.tempDate) && ruleData.expectedCount && data.length + ruleObject.recExceptionCount <= ruleData.expectedCount) {\n      if (ruleObject.month.length === 0 || ruleObject.month.length > 0 && !calendarUtil.checkMonth(ruleData.tempDate, ruleObject.month)) {\n        processDateCollectionForByMonthDay(ruleObject, ruleData, endDate, false);\n        ruleData.beginDate = new Date(ruleData.tempDate.getTime());\n        ruleData.monthInit = setNextValidDate(ruleData.tempDate, ruleObject, ruleData.monthInit, ruleData.beginDate);\n      } else {\n        calendarUtil.setValidDate(ruleData.tempDate, 1, 1);\n        ruleData.tempDate = getStartDateForWeek(ruleData.tempDate, ruleObject.day);\n        break;\n      }\n    }\n\n    ruleData.tempDate.setFullYear(currentMonthDate.getFullYear(), currentMonthDate.getMonth(), currentMonthDate.getDate());\n    insertDataCollection(ruleData.dateCollection, ruleData.state, startDate, endDate, data, ruleObject);\n\n    if (calendarUtil.isLastMonth(ruleData.tempDate)) {\n      calendarUtil.setValidDate(ruleData.tempDate, 1, 1);\n      ruleData.tempDate = getStartDateForWeek(ruleData.tempDate, ruleObject.day);\n    }\n\n    if (ruleData.expectedCount && data.length + ruleObject.recExceptionCount >= ruleData.expectedCount) {\n      return;\n    }\n\n    ruleData.tempDate.setFullYear(ruleData.tempDate.getFullYear() + ruleObject.interval - 1);\n    ruleData.tempDate = getStartDateForWeek(ruleData.tempDate, ruleObject.day);\n    ruleData.monthInit = setNextValidDate(ruleData.tempDate, ruleObject, ruleData.monthInit, ruleData.beginDate);\n    ruleData.dateCollection = [];\n  }\n}\n/**\n * Internal method for process monthly date type with month frequency from recurrence rule\n *\n * @param {Date} startDate Accepts the strat date\n * @param {Date} endDate Accepts the end date\n * @param {number[]} data Accepts the collection of dates\n * @param {RecRule} ruleObject Accepts the recurrence rule object\n * @returns {void}\n * @private\n */\n\n\nfunction monthlyDateTypeProcessforMonthFreq(startDate, endDate, data, ruleObject) {\n  var ruleData = initializeRecRuleVariables(startDate, ruleObject);\n  ruleData.tempDate = ruleData.mainDate = calendarUtil.getMonthStartDate(ruleData.tempDate);\n\n  if ((ruleObject.freq === 'MONTHLY' && ruleObject.interval === 12 || ruleObject.freq === 'YEARLY') && calendarUtil.getMonthDaysCount(startDate) < ruleObject.monthDay[0]) {\n    return;\n  }\n\n  while (compareDates(ruleData.tempDate, endDate)) {\n    ruleData.beginDate = new Date(ruleData.tempDate.getTime());\n    processDateCollectionForByMonthDay(ruleObject, ruleData, endDate, true, startDate, data);\n\n    if (!isNullOrUndefined(ruleObject.setPosition)) {\n      insertDatasIntoExistingCollection(ruleData.dateCollection, ruleData.state, startDate, endDate, data, ruleObject);\n    }\n\n    if (ruleData.expectedCount && data.length + ruleObject.recExceptionCount >= ruleData.expectedCount) {\n      return;\n    }\n\n    ruleData.monthInit = setNextValidDate(ruleData.tempDate, ruleObject, ruleData.monthInit, ruleData.beginDate);\n    ruleData.dateCollection = [];\n  }\n}\n/**\n * To process date collection for Monthly & Yearly based on BYMONTH Day property\n *\n * @param {RecRule} ruleObject Accepts the recurrence rule object\n * @param {RuleData} recRuleVariables Accepts the rule data\n * @param {Date} endDate Accepts the end date\n * @param {boolean} isByMonth Accepts the boolean to validate either month or not\n * @param {Date} startDate Accepts the start date\n * @param {number[]} data Accepts the collection of dates\n * @returns {void}\n * @private\n */\n\n\nfunction processDateCollectionForByMonthDay(ruleObject, recRuleVariables, endDate, isByMonth, startDate, data) {\n  for (var index = 0; index < ruleObject.monthDay.length; index++) {\n    recRuleVariables.date = ruleObject.monthDay[index];\n    recRuleVariables.tempDate = calendarUtil.getMonthStartDate(recRuleVariables.tempDate);\n    var maxDate = calendarUtil.getMonthDaysCount(recRuleVariables.tempDate);\n    recRuleVariables.date = recRuleVariables.date > 0 ? recRuleVariables.date : maxDate + recRuleVariables.date + 1;\n\n    if (validateProperDate(recRuleVariables.tempDate, recRuleVariables.date, recRuleVariables.mainDate) && recRuleVariables.date > 0) {\n      calendarUtil.setDate(recRuleVariables.tempDate, recRuleVariables.date);\n\n      if (endDate && recRuleVariables.tempDate > endDate) {\n        return;\n      }\n\n      if (ruleObject.day.length === 0 || ruleObject.day.indexOf(DAYINDEX[recRuleVariables.tempDate.getDay()]) > -1) {\n        if (isByMonth && isNullOrUndefined(ruleObject.setPosition) && recRuleVariables.expectedCount && data.length + ruleObject.recExceptionCount < recRuleVariables.expectedCount) {\n          insertDateCollection(recRuleVariables.state, startDate, endDate, data, ruleObject, recRuleVariables.tempDate.getTime());\n        } else {\n          recRuleVariables.dateCollection.push([recRuleVariables.tempDate.getTime()]);\n        }\n      }\n    }\n  }\n}\n/**\n * Internal method to set next valid date\n *\n * @param {Date} tempDate Accepts the date\n * @param {RecRule} ruleObject Accepts the recurrence rule object\n * @param {number} monthInit Accepts the initial month\n * @param {Date} beginDate Accepts the initial date\n * @param {number} interval Accepts the interval duration\n * @returns {number} Returnx the next valid date\n * @private\n */\n\n\nfunction setNextValidDate(tempDate, ruleObject, monthInit) {\n  var beginDate = arguments.length > 3 && arguments[3] !== undefined ? arguments[3] : null;\n  var interval = arguments.length > 4 ? arguments[4] : undefined;\n  var monthData = beginDate ? beginDate.getMonth() : 0;\n  var startDate = calendarUtil.getMonthStartDate(tempDate);\n  interval = isNullOrUndefined(interval) ? ruleObject.interval : interval;\n  tempDate.setFullYear(startDate.getFullYear());\n  tempDate.setMonth(startDate.getMonth());\n  tempDate.setDate(startDate.getDate());\n\n  if (ruleObject.month.length) {\n    monthInit++;\n    monthInit = monthInit % ruleObject.month.length;\n    calendarUtil.setMonth(tempDate, ruleObject.month[monthInit], 1);\n\n    if (monthInit === 0) {\n      calendarUtil.addYears(tempDate, interval, ruleObject.month[0]);\n    }\n  } else {\n    if (beginDate && beginDate.getFullYear() < tempDate.getFullYear()) {\n      monthData = tempDate.getMonth() - 1;\n    }\n\n    calendarUtil.setValidDate(tempDate, interval, 1, monthData, beginDate);\n  }\n\n  return monthInit;\n}\n/**\n * To get month collection when BYDAY property having more than one value in list.\n *\n * @param {Date} startDate Accepts the strat date\n * @param {Date} endDate Accepts the end date\n * @param {number[]} data Accepts the collection of dates\n * @param {RecRule} ruleObject Accepts the recurrence rule object\n * @returns {void}\n * @private\n */\n\n\nfunction getMonthCollection(startDate, endDate, data, ruleObject) {\n  var expectedDays = ruleObject.day;\n  var tempDate = new Date(startDate.getTime());\n  tempDate = calendarUtil.getMonthStartDate(tempDate);\n  var monthCollection = [];\n  var dateCollection = [];\n  var dates = [];\n  var index;\n  var state;\n  var expectedCount = getDateCount$1(startDate, ruleObject);\n  var monthInit = 0;\n  var beginDate;\n\n  if (ruleObject.month.length) {\n    calendarUtil.setMonth(tempDate, ruleObject.month[0], 1);\n  }\n\n  tempDate = getStartDateForWeek(tempDate, ruleObject.day);\n\n  while (compareDates(tempDate, endDate) && expectedCount && data.length + ruleObject.recExceptionCount < expectedCount) {\n    var currentMonthDate = new Date(tempDate.getTime());\n    var isHavingNumber = expectedDays.map(function (item) {\n      return HASNUMBER.test(item);\n    });\n\n    if (isHavingNumber.indexOf(true) > -1) {\n      for (var j = 0; j <= expectedDays.length - 1; j++) {\n        var expectedDaysArray = expectedDays[j].match(SPLITNUMBERANDSTRING);\n        var position = parseInt(expectedDaysArray[0], 10);\n        tempDate = new Date(tempDate.getTime());\n        tempDate = calendarUtil.getMonthStartDate(tempDate);\n        tempDate = getStartDateForWeek(tempDate, expectedDays);\n        currentMonthDate.setFullYear(tempDate.getFullYear(), tempDate.getMonth(), tempDate.getDate());\n\n        while (calendarUtil.isSameYear(currentMonthDate, tempDate) && calendarUtil.isSameMonth(currentMonthDate, tempDate)) {\n          if (expectedDaysArray[expectedDaysArray.length - 1] === DAYINDEX[currentMonthDate.getDay()]) {\n            monthCollection.push([currentMonthDate.getTime()]);\n          }\n\n          currentMonthDate.setDate(currentMonthDate.getDate() + 1);\n        }\n\n        currentMonthDate.setDate(currentMonthDate.getDate() - 1);\n\n        if (expectedDaysArray[0].indexOf('-') > -1) {\n          index = monthCollection.length - -1 * position;\n        } else {\n          index = position - 1;\n        }\n\n        index = isNaN(index) ? 0 : index;\n\n        if (monthCollection.length > 0) {\n          if (isNullOrUndefined(ruleObject.setPosition)) {\n            insertDatasIntoExistingCollection(monthCollection, state, startDate, endDate, data, ruleObject, index);\n          } else {\n            dateCollection = [filterDateCollectionByIndex(monthCollection, index, dates)];\n          }\n        }\n\n        if (expectedCount && data.length + ruleObject.recExceptionCount >= expectedCount) {\n          return;\n        }\n\n        monthCollection = [];\n      }\n\n      if (!isNullOrUndefined(ruleObject.setPosition)) {\n        insertDateCollectionBasedonBySetPos(dateCollection, state, startDate, endDate, data, ruleObject);\n        dates = [];\n      }\n\n      monthInit = setNextValidDate(tempDate, ruleObject, monthInit, beginDate);\n      tempDate = getStartDateForWeek(tempDate, ruleObject.day);\n      monthCollection = [];\n    } else {\n      var weekCollection = [];\n      var dayCycleData = processWeekDays(expectedDays);\n      currentMonthDate.setFullYear(tempDate.getFullYear(), tempDate.getMonth(), tempDate.getDate());\n      var initialDate = new Date(tempDate.getTime());\n      beginDate = new Date(tempDate.getTime());\n\n      while (calendarUtil.isSameMonth(initialDate, tempDate)) {\n        weekCollection.push(tempDate.getTime());\n\n        if (expectedDays.indexOf(DAYINDEX[tempDate.getDay()]) > -1) {\n          monthCollection.push(weekCollection);\n          weekCollection = [];\n        }\n\n        tempDate.setDate(tempDate.getDate() + dayCycleData[DAYINDEX[tempDate.getDay()]]);\n      }\n\n      index = ruleObject.setPosition < 1 ? monthCollection.length + ruleObject.setPosition : ruleObject.setPosition - 1;\n\n      if (isNullOrUndefined(ruleObject.setPosition)) {\n        index = 0;\n        var datas = [];\n\n        for (var week = 0; week < monthCollection.length; week++) {\n          for (var row = 0; row < monthCollection[week].length; row++) {\n            datas.push(monthCollection[week][row]);\n          }\n        }\n\n        monthCollection = [datas];\n      }\n\n      if (monthCollection.length > 0) {\n        insertDatasIntoExistingCollection(monthCollection, state, startDate, endDate, data, ruleObject, index);\n      }\n\n      if (expectedCount && data.length + ruleObject.recExceptionCount >= expectedCount) {\n        return;\n      }\n\n      monthInit = setNextValidDate(tempDate, ruleObject, monthInit, beginDate);\n      tempDate = getStartDateForWeek(tempDate, ruleObject.day);\n      monthCollection = [];\n    }\n  }\n}\n/**\n * To process monday day type for FREQ=MONTHLY\n *\n * @param {Date} startDate Accepts the strat date\n * @param {Date} endDate Accepts the end date\n * @param {number[]} data Accepts the collection of dates\n * @param {RecRule} ruleObject Accepts the recurrence rule object\n * @returns {void}\n * @private\n */\n\n\nfunction monthlyDayTypeProcessforMonthFreq(startDate, endDate, data, ruleObject) {\n  var expectedDays = ruleObject.day; // When BYDAY property having more than 1 value.\n\n  if (expectedDays.length > 1) {\n    getMonthCollection(startDate, endDate, data, ruleObject);\n    return;\n  }\n\n  var tempDate = new Date(startDate.getTime());\n  var expectedCount = getDateCount$1(startDate, ruleObject);\n  var monthCollection = [];\n  var beginDate;\n  var monthInit = 0;\n  tempDate = calendarUtil.getMonthStartDate(tempDate);\n\n  if (ruleObject.month.length) {\n    calendarUtil.setMonth(tempDate, ruleObject.month[0], 1);\n  }\n\n  tempDate = getStartDateForWeek(tempDate, ruleObject.day);\n\n  while (compareDates(tempDate, endDate) && expectedCount && data.length + ruleObject.recExceptionCount < expectedCount) {\n    beginDate = new Date(tempDate.getTime());\n    var currentMonthDate = new Date(tempDate.getTime());\n\n    while (calendarUtil.isSameMonth(tempDate, currentMonthDate)) {\n      monthCollection.push([currentMonthDate.getTime()]);\n      currentMonthDate.setDate(currentMonthDate.getDate() + 7);\n    } // To filter date collection based on BYDAY Index, then BYSETPOS and to insert datas into existing collection\n\n\n    insertDateCollectionBasedonIndex(monthCollection, startDate, endDate, data, ruleObject);\n    monthInit = setNextValidDate(tempDate, ruleObject, monthInit, beginDate);\n    tempDate = getStartDateForWeek(tempDate, ruleObject.day);\n    monthCollection = [];\n  }\n}\n/**\n * To process monday day type for FREQ=YEARLY\n *\n * @param {Date} startDate Accepts the strat date\n * @param {Date} endDate Accepts the end date\n * @param {number[]} data Accepts the collection of dates\n * @param {RecRule} ruleObject Accepts the recurrence rule object\n * @returns {void}\n * @private\n */\n\n\nfunction monthlyDayTypeProcess(startDate, endDate, data, ruleObject) {\n  var expectedDays = ruleObject.day;\n  var isHavingNumber = expectedDays.map(function (item) {\n    return HASNUMBER.test(item);\n  }); // If BYDAY property having more than 1 value in list\n\n  if (expectedDays.length > 1 && isHavingNumber.indexOf(true) > -1) {\n    processDateCollectionforByDayWithInteger(startDate, endDate, data, ruleObject);\n    return;\n  } else if (ruleObject.month.length && expectedDays.length === 1 && isHavingNumber.indexOf(true) > -1) {\n    monthlyDayTypeProcessforMonthFreq(startDate, endDate, data, ruleObject);\n    return;\n  }\n\n  var tempDate = new Date(startDate.getTime());\n  var currentMonthDate;\n  var expectedCount = getDateCount$1(startDate, ruleObject);\n  var interval = ruleObject.interval;\n  var monthCollection = [];\n\n  if (ruleObject.month.length) {\n    calendarUtil.setMonth(tempDate, ruleObject.month[0], tempDate.getDate());\n  } // Set the date as start date of the yeear if yearly freq having ByDay property alone\n\n\n  if (isNullOrUndefined(ruleObject.setPosition) && ruleObject.month.length === 0 && ruleObject.weekNo.length === 0) {\n    tempDate.setFullYear(startDate.getFullYear(), 0, 1);\n  }\n\n  tempDate = calendarUtil.getMonthStartDate(tempDate);\n  tempDate = getStartDateForWeek(tempDate, ruleObject.day);\n\n  while (compareDates(tempDate, endDate)) {\n    currentMonthDate = new Date(tempDate.getTime());\n\n    while (calendarUtil.isSameYear(currentMonthDate, tempDate) && expectedCount && data.length + ruleObject.recExceptionCount <= expectedCount) {\n      currentMonthDate = new Date(tempDate.getTime());\n\n      while (calendarUtil.isSameYear(currentMonthDate, tempDate)) {\n        if (ruleObject.month.length === 0 || ruleObject.month.length > 0 && !calendarUtil.checkMonth(tempDate, ruleObject.month)) {\n          if (expectedDays.length > 1) {\n            if (calendarUtil.compareMonth(currentMonthDate, tempDate)) {\n              calendarUtil.setValidDate(tempDate, 1, 1);\n              tempDate = getStartDateForWeek(tempDate, ruleObject.day);\n              break;\n            }\n\n            if (expectedDays.indexOf(DAYINDEX[currentMonthDate.getDay()]) > -1) {\n              monthCollection.push([currentMonthDate.getTime()]);\n            }\n\n            currentMonthDate.setDate(currentMonthDate.getDate() + 1);\n          } else {\n            // If BYDAY property having 1 value in list\n            if (currentMonthDate.getFullYear() > tempDate.getFullYear()) {\n              calendarUtil.setValidDate(tempDate, 1, 1);\n              tempDate = getStartDateForWeek(tempDate, ruleObject.day);\n              break;\n            }\n\n            var newstr = getDayString(expectedDays[0]);\n\n            if (DAYINDEX[currentMonthDate.getDay()] === newstr && new Date(currentMonthDate.getFullYear(), currentMonthDate.getMonth(), 0) > new Date(startDate.getFullYear())) {\n              monthCollection.push([currentMonthDate.getTime()]);\n            }\n\n            currentMonthDate.setDate(currentMonthDate.getDate() + 7);\n          }\n        } else {\n          calendarUtil.setValidDate(tempDate, 1, 1);\n          tempDate = getStartDateForWeek(tempDate, ruleObject.day);\n          break;\n        }\n      }\n    }\n\n    tempDate.setFullYear(currentMonthDate.getFullYear(), currentMonthDate.getMonth(), currentMonthDate.getDate()); // To filter date collection based on BYDAY Index, then BYSETPOS and to insert datas into existing collection\n\n    insertDateCollectionBasedonIndex(monthCollection, startDate, endDate, data, ruleObject);\n\n    if (calendarUtil.isLastMonth(tempDate)) {\n      calendarUtil.setValidDate(tempDate, 1, 1);\n      tempDate = getStartDateForWeek(tempDate, ruleObject.day);\n    }\n\n    tempDate.setFullYear(tempDate.getFullYear() + interval - 1);\n\n    if (expectedCount && data.length + ruleObject.recExceptionCount >= expectedCount) {\n      return;\n    }\n\n    tempDate = getStartDateForWeek(tempDate, ruleObject.day);\n    monthCollection = [];\n  }\n}\n/**\n * To process the recurrence rule when BYDAY property having values with integer\n *\n * @param {Date} startDate Accepts the strat date\n * @param {Date} endDate Accepts the end date\n * @param {number[]} data Accepts the collection of dates\n * @param {RecRule} ruleObject Accepts the recurrence rule object\n * @returns {void}\n * @private\n */\n\n\nfunction processDateCollectionforByDayWithInteger(startDate, endDate, data, ruleObject) {\n  var expectedDays = ruleObject.day;\n  var expectedCount = getDateCount$1(startDate, ruleObject);\n  var tempDate = new Date(startDate.getTime());\n  var interval = ruleObject.interval;\n  var monthCollection = [];\n  var dateCollection = [];\n  var index;\n  var state;\n  var monthInit = 0;\n  var currentMonthDate;\n  var currentDate;\n  var beginDate;\n  tempDate = calendarUtil.getMonthStartDate(tempDate);\n  var datas = [];\n\n  if (ruleObject.month.length) {\n    calendarUtil.setMonth(tempDate, ruleObject.month[0], 1);\n  }\n\n  tempDate = getStartDateForWeek(tempDate, ruleObject.day);\n\n  while (compareDates(tempDate, endDate)) {\n    currentMonthDate = new Date(tempDate.getTime());\n\n    for (var i = 0; i <= ruleObject.month.length; i++) {\n      for (var j = 0; j <= expectedDays.length - 1; j++) {\n        tempDate = calendarUtil.getMonthStartDate(tempDate);\n        tempDate = getStartDateForWeek(tempDate, ruleObject.day);\n        monthCollection = [];\n\n        while (calendarUtil.isSameYear(currentMonthDate, tempDate) && expectedCount && data.length + ruleObject.recExceptionCount <= expectedCount) {\n          while (calendarUtil.isSameYear(currentMonthDate, tempDate)) {\n            currentMonthDate = new Date(tempDate.getTime());\n\n            if (ruleObject.month.length === 0 || ruleObject.month.length > 0 && ruleObject.month[i] === calendarUtil.getMonth(currentMonthDate)) {\n              var expectedDaysArray = expectedDays[j].match(SPLITNUMBERANDSTRING);\n              var position = parseInt(expectedDaysArray[0], 10);\n              currentDate = new Date(tempDate.getTime());\n\n              while (calendarUtil.isSameYear(currentDate, tempDate) && calendarUtil.isSameMonth(currentDate, tempDate)) {\n                if (expectedDaysArray[expectedDaysArray.length - 1] === DAYINDEX[currentDate.getDay()]) {\n                  monthCollection.push([currentDate.getTime()]);\n                }\n\n                currentDate.setDate(currentDate.getDate() + 1);\n              }\n\n              currentDate.setDate(currentDate.getDate() - 1);\n\n              if (expectedDaysArray[0].indexOf('-') > -1) {\n                index = monthCollection.length - -1 * position;\n              } else {\n                index = position - 1;\n              }\n\n              index = isNaN(index) ? 0 : index;\n            }\n\n            monthInit = setNextValidDate(tempDate, ruleObject, monthInit, beginDate, 1);\n            tempDate = getStartDateForWeek(tempDate, ruleObject.day);\n          }\n        }\n\n        tempDate = j === 0 && currentDate ? new Date(currentDate.getTime()) : new Date(currentMonthDate.getTime());\n\n        if (monthCollection.length > 0) {\n          if (isNullOrUndefined(ruleObject.setPosition)) {\n            insertDatasIntoExistingCollection(monthCollection, state, startDate, endDate, data, ruleObject, index);\n          } else {\n            dateCollection = [filterDateCollectionByIndex(monthCollection, index, datas)];\n          }\n        }\n\n        if (expectedCount && data.length + ruleObject.recExceptionCount >= expectedCount) {\n          return;\n        }\n      }\n    }\n\n    if (!isNullOrUndefined(ruleObject.setPosition)) {\n      insertDateCollectionBasedonBySetPos(dateCollection, state, startDate, endDate, data, ruleObject);\n      datas = [];\n    }\n\n    if (calendarUtil.isLastMonth(tempDate)) {\n      calendarUtil.setValidDate(tempDate, 1, 1);\n      tempDate.setFullYear(tempDate.getFullYear() + interval - 1);\n    } else {\n      tempDate.setFullYear(tempDate.getFullYear() + interval);\n    }\n\n    tempDate = getStartDateForWeek(tempDate, ruleObject.day);\n\n    if (ruleObject.month.length) {\n      calendarUtil.setMonth(tempDate, ruleObject.month[0], tempDate.getDate());\n    }\n  }\n}\n/**\n * To get recurrence collection if BYSETPOS is null\n *\n * @param {number[]} monthCollection Accepts the month collection dates\n * @param {string[]} expectedDays Accepts the exception dates\n * @returns {RuleData} Returns the rule data object\n * @private\n */\n\n\nfunction getRecurrenceCollection(monthCollection, expectedDays) {\n  var index;\n  var recurrenceCollectionObject = {\n    monthCollection: [],\n    index: 0\n  };\n\n  if (expectedDays.length === 1) {\n    // To split numeric value from BYDAY property value\n    var expectedDaysArrays = expectedDays[0].match(SPLITNUMBERANDSTRING);\n    var arrPosition;\n\n    if (expectedDaysArrays.length > 1) {\n      arrPosition = parseInt(expectedDaysArrays[0], 10);\n      index = arrPosition < 1 ? monthCollection.length + arrPosition : arrPosition - 1;\n    } else {\n      index = 0;\n      monthCollection = getDateCollectionforBySetPosNull(monthCollection);\n    }\n  } else {\n    index = 0;\n    monthCollection = getDateCollectionforBySetPosNull(monthCollection);\n  }\n\n  recurrenceCollectionObject.monthCollection = monthCollection;\n  recurrenceCollectionObject.index = index;\n  return recurrenceCollectionObject;\n}\n/**\n * Internal method to process the data collections\n *\n * @param {number[]} dateCollection Accepts the date collections\n * @param {boolean} state Accepts the state\n * @param {Date} startDate Accepts the start date\n * @param {Date} endDate Accepts the end date\n * @param {number[]} data Accepts the collection of numbers\n * @param {RecRule} ruleObject Accepts the recurrence rule object\n * @returns {void}\n * @private\n */\n\n\nfunction insertDataCollection(dateCollection, state, startDate, endDate, data, ruleObject) {\n  var index = ruleObject.setPosition < 1 ? dateCollection.length + ruleObject.setPosition : ruleObject.setPosition - 1;\n\n  if (isNullOrUndefined(ruleObject.setPosition)) {\n    index = 0;\n    dateCollection = getDateCollectionforBySetPosNull(dateCollection);\n  }\n\n  if (dateCollection.length > 0) {\n    insertDatasIntoExistingCollection(dateCollection, state, startDate, endDate, data, ruleObject, index);\n  }\n}\n/**\n * To process month collection if BYSETPOS is null\n *\n * @param {number[]} monthCollection Accepts the month date collections\n * @returns {number[]} Returns the month date collections\n * @private\n */\n\n\nfunction getDateCollectionforBySetPosNull(monthCollection) {\n  var datas = [];\n\n  for (var week = 0; week < monthCollection.length; week++) {\n    for (var row = 0; row < monthCollection[week].length; row++) {\n      datas.push(new Date(monthCollection[week][row]).getTime());\n    }\n  }\n\n  monthCollection = datas.length > 0 ? [datas] : [];\n  return monthCollection;\n}\n/**\n * To filter date collection based on BYDAY Index, then BYSETPOS and to insert datas into existing collection\n *\n * @param {number[]} monthCollection Accepts the month date collections\n * @param {Date} startDate Accepts the start date\n * @param {Date} endDate Accepts the end date\n * @param {number[]} data Accepts the date collections\n * @param {RecRule} ruleObject Accepts the recurrence rule object\n * @returns {void}\n * @private\n */\n\n\nfunction insertDateCollectionBasedonIndex(monthCollection, startDate, endDate, data, ruleObject) {\n  var expectedDays = ruleObject.day;\n  var state;\n  var datas = [];\n  var dateCollection = [];\n  var recurrenceCollections = getRecurrenceCollection(monthCollection, expectedDays);\n  monthCollection = recurrenceCollections.monthCollection;\n  var index = recurrenceCollections.index;\n\n  if (ruleObject.setPosition != null) {\n    dateCollection = [filterDateCollectionByIndex(monthCollection, index, datas)];\n    insertDateCollectionBasedonBySetPos(dateCollection, state, startDate, endDate, data, ruleObject);\n  } else {\n    if (monthCollection.length > 0) {\n      insertDatasIntoExistingCollection(monthCollection, state, startDate, endDate, data, ruleObject, index);\n    }\n  }\n\n  datas = [];\n}\n/**\n * To filter date collection when BYDAY property having values with number\n *\n * @param {number[]} monthCollection Accepts the date collections\n * @param {number} index Accepts the index of date collections\n * @param {number[]} datas Accepts the collection of dates\n * @returns {number[]} Returns the collection of dates\n * @private\n */\n\n\nfunction filterDateCollectionByIndex(monthCollection, index, datas) {\n  for (var week = 0; week < monthCollection[index].length; week++) {\n    datas.push(monthCollection[index][week]);\n  }\n\n  return datas;\n}\n/**\n * To insert processed date collection in final array element\n *\n * @param {boolean} state Accepts the state of the recurrence rule\n * @param {Date} startDate Accepts the start date\n * @param {Date} endDate Accepts the end date\n * @param {number[]} data Accepts the collection of date\n * @param {RecRule} ruleObject Accepts the recurrence rule object\n * @param {number} dayData Accepts the date index\n * @returns {void}\n * @private\n */\n\n\nfunction insertDateCollection(state, startDate, endDate, data, ruleObject, dayData) {\n  var expectedCount = getDateCount$1(startDate, ruleObject);\n  var chDate = new Date(dayData);\n  state = validateRules(chDate, ruleObject);\n\n  if (chDate >= startDate && compareDates(chDate, endDate) && state && expectedCount && data.length + ruleObject.recExceptionCount < expectedCount) {\n    excludeDateHandler(data, dayData);\n  }\n}\n/**\n * Return the last week number of given month and year.\n *\n * @param {number} year Accepts the Year in number format\n * @param {number} startDayOfWeek Accepts the start date\n * @param {number[]} monthCollection Accepts the collection of dates\n * @param {number} week Accepts the week in number format\n * @param {RecRule} ruleObject Accepts the recurrence rule object\n * @returns {number} returns week number\n * @private\n */\n\n\nfunction weekCount(year, startDayOfWeek, monthCollection, week, ruleObject) {\n  var firstDayOfWeek = startDayOfWeek || 0;\n  var firstOfMonth = new Date(year, ruleObject.month[0] - 1, 1);\n  var lastOfMonth = new Date(year, ruleObject.month[0] - 1, 0);\n  var numberOfDaysInMonth = lastOfMonth.getDate();\n  var firstWeekDay = (firstOfMonth.getDay() - firstDayOfWeek + 7) % 7;\n  var used = firstWeekDay + numberOfDaysInMonth;\n  var count = Math.ceil(used / 7) - 1;\n  var dayData = monthCollection[week][count];\n  var chDate = new Date(dayData);\n  var state = validateRules(chDate, ruleObject);\n  return state ? count : count - 1;\n}\n/**\n * To process date collection based on Byset position after process the collection based on BYDAY property value index: EX:BYDAY=1SUm-1SU\n *\n * @param {number[]} monthCollection Accepts the collection of dates\n * @param {boolean} state Accepts the state of the recurrence rule\n * @param {Date} startDate Accepts the start date\n * @param {Date} endDate Accepts the end date\n * @param {number[]} data Accepts the collection of date\n * @param {RecRule} ruleObject Accepts the recurrence rule object\n * @returns {void}\n * @private\n */\n\n\nfunction insertDateCollectionBasedonBySetPos(monthCollection, state, startDate, endDate, data, ruleObject) {\n  if (monthCollection.length > 0) {\n    for (var week = 0; week < monthCollection.length; week++) {\n      monthCollection[week].sort();\n      var expectedDays = ruleObject.day;\n      var isHavingNumber = expectedDays.map(function (item) {\n        return HASNUMBER.test(item);\n      });\n      var weekIndex = ruleObject.freq === 'YEARLY' && ruleObject.validRules.indexOf('BYMONTH') > -1 && !(isHavingNumber.indexOf(true) > -1) ? weekCount(new Date(monthCollection[0][0]).getFullYear(), 0, monthCollection, week, ruleObject) : monthCollection[week].length + ruleObject.setPosition;\n      var index = ruleObject.setPosition < 1 ? weekIndex : ruleObject.setPosition - 1;\n      var dayData = monthCollection[week][index];\n      insertDateCollection(state, startDate, endDate, data, ruleObject, dayData);\n    }\n  }\n}\n/**\n * To insert datas into existing collection which is processed from previous loop.\n *\n * @param {number[]} monthCollection Accepts the collection of dates\n * @param {boolean} state Accepts the state of the recurrence rule\n * @param {Date} startDate Accepts the start date\n * @param {Date} endDate Accepts the end date\n * @param {number[]} data Accepts the collection of date\n * @param {RecRule} ruleObject Accepts the recurrence rule object\n * @param {number} index Accepts the index value\n * @returns {void}\n * @private\n */\n\n\nfunction insertDatasIntoExistingCollection(monthCollection, state, startDate, endDate, data, ruleObject, index) {\n  if (monthCollection.length > 0) {\n    index = !isNullOrUndefined(index) ? index : ruleObject.setPosition < 1 ? monthCollection.length + ruleObject.setPosition : ruleObject.setPosition - 1;\n    monthCollection[index].sort();\n\n    for (var week = 0; week < monthCollection[index].length; week++) {\n      var dayData = monthCollection[index][week];\n      insertDateCollection(state, startDate, endDate, data, ruleObject, dayData);\n    }\n  }\n}\n/**\n * Internal method to compare dates\n *\n * @param {Date} startDate Accepts the start date\n * @param {Date} endDate Accepts the end date\n * @returns {boolean} Returns the result of checking start and end dates\n * @private\n */\n\n\nfunction compareDates(startDate, endDate) {\n  return endDate ? startDate <= endDate : true;\n}\n/**\n * Internal method to get day string\n *\n * @param {string} expectedDays Accepts the exception date string\n * @returns {string} Returns the valid string\n * @private\n */\n\n\nfunction getDayString(expectedDays) {\n  // To get BYDAY value without numeric value\n  var newstr = expectedDays.replace(REMOVENUMBERINSTRING, '');\n  return newstr;\n}\n/**\n * Internal method to check day index\n *\n * @param {number} day Accepts the day index\n * @param {string[]} expectedDays Accepts the exception dates\n * @returns {boolean} Returns the index date\n * @private\n */\n\n\nfunction checkDayIndex(day, expectedDays) {\n  var sortedExpectedDays = [];\n  expectedDays.forEach(function (element) {\n    var expectedDaysNumberSplit = element.match(SPLITNUMBERANDSTRING);\n\n    if (expectedDaysNumberSplit.length === 2) {\n      sortedExpectedDays.push(expectedDaysNumberSplit[1]);\n    } else {\n      sortedExpectedDays.push(expectedDaysNumberSplit[0]);\n    }\n  });\n  return sortedExpectedDays.indexOf(DAYINDEX[day]) === -1;\n}\n/**\n * Internal method to get start date of week\n *\n * @param {Date} startDate Accepts the start date\n * @param {string[]} expectedDays Accepts the exception dates\n * @returns {Date} Return the week start date\n * @private\n */\n\n\nfunction getStartDateForWeek(startDate, expectedDays) {\n  var tempDate = new Date(startDate.getTime());\n  var newstr;\n\n  if (expectedDays.length > 0) {\n    var expectedDaysArr = [];\n\n    for (var i = 0; i <= expectedDays.length - 1; i++) {\n      newstr = getDayString(expectedDays[i]);\n      expectedDaysArr.push(newstr);\n    }\n\n    if (expectedDaysArr.indexOf(DAYINDEX[tempDate.getDay()]) === -1) {\n      do {\n        tempDate.setDate(tempDate.getDate() + 1);\n      } while (expectedDaysArr.indexOf(DAYINDEX[tempDate.getDay()]) === -1);\n    }\n  }\n\n  return tempDate;\n}\n/**\n * Method to generate recurrence rule object from given rule\n *\n * @param {string} rules Accepts the recurrence rule\n * @returns {RecRule} Returns the recurrence rule object\n */\n\n\nfunction extractObjectFromRule(rules) {\n  var ruleObject = {\n    freq: null,\n    interval: 1,\n    count: null,\n    until: null,\n    day: [],\n    wkst: null,\n    month: [],\n    weekNo: [],\n    monthDay: [],\n    yearDay: [],\n    setPosition: null,\n    validRules: []\n  };\n  var rulesList = rules.split(';');\n  var splitData = [];\n  var temp;\n  rulesList.forEach(function (data) {\n    splitData = data.split('=');\n\n    switch (splitData[0]) {\n      case 'UNTIL':\n        temp = splitData[1];\n        ruleObject.until = getDateFromRecurrenceDateString(temp);\n        break;\n\n      case 'BYDAY':\n        ruleObject.day = splitData[1].split(',');\n        ruleObject.validRules.push(splitData[0]);\n        break;\n\n      case 'BYMONTHDAY':\n        ruleObject.monthDay = splitData[1].split(',').map(Number);\n        ruleObject.validRules.push(splitData[0]);\n        break;\n\n      case 'BYMONTH':\n        ruleObject.month = splitData[1].split(',').map(Number);\n        ruleObject.validRules.push(splitData[0]);\n        break;\n\n      case 'BYYEARDAY':\n        ruleObject.yearDay = splitData[1].split(',').map(Number);\n        ruleObject.validRules.push(splitData[0]);\n        break;\n\n      case 'BYWEEKNO':\n        ruleObject.weekNo = splitData[1].split(',').map(Number);\n        ruleObject.validRules.push(splitData[0]);\n        break;\n\n      case 'INTERVAL':\n        ruleObject.interval = parseInt(splitData[1], 10);\n        break;\n\n      case 'COUNT':\n        ruleObject.count = parseInt(splitData[1], 10);\n        break;\n\n      case 'BYSETPOS':\n        ruleObject.setPosition = parseInt(splitData[1], 10) > 4 ? -1 : parseInt(splitData[1], 10);\n        break;\n\n      case 'FREQ':\n        ruleObject.freq = splitData[1];\n        break;\n\n      case 'WKST':\n        ruleObject.wkst = splitData[1];\n        break;\n    }\n  });\n\n  if (ruleObject.freq === 'MONTHLY' && ruleObject.monthDay.length === 0) {\n    var index = ruleObject.validRules.indexOf('BYDAY');\n    ruleObject.validRules.splice(index, 1);\n  }\n\n  return ruleObject;\n}\n/**\n * Internal method to validate proper date\n *\n * @param {Date} tempDate Accepts the date value\n * @param {number} data Accepts the data value\n * @param {Date} startDate Accepts the start date\n * @returns {boolean} Returns the result of date validate\n * @private\n */\n\n\nfunction validateProperDate(tempDate, data, startDate) {\n  var maxDate = calendarUtil.getMonthDaysCount(tempDate);\n  return data <= maxDate && tempDate >= startDate;\n}\n/**\n * Internal method to process week days\n *\n * @param {string[]} expectedDays Accepts the expection dates\n * @returns {Object} Returns the weekdays object\n * @private\n */\n\n\nfunction processWeekDays(expectedDays) {\n  var dayCycle = {};\n  expectedDays.forEach(function (element, index) {\n    if (index === expectedDays.length - 1) {\n      var startIndex = dayIndex.indexOf(element);\n      var temp = startIndex;\n\n      while (temp % 7 !== dayIndex.indexOf(expectedDays[0])) {\n        temp++;\n      }\n\n      dayCycle[element] = temp - startIndex;\n    } else {\n      dayCycle[element] = dayIndex.indexOf(expectedDays[index + 1]) - dayIndex.indexOf(element);\n    }\n  });\n  return dayCycle;\n}\n/**\n * Internal method to check date\n *\n * @param {Date} tempDate Accepts the date value\n * @param {number[]} expectedDate Accepts the exception dates\n * @returns {boolean} Returns the boolean value\n * @private\n */\n\n\nfunction checkDate(tempDate, expectedDate) {\n  var temp = expectedDate.slice(0);\n  var data;\n  var maxDate = calendarUtil.getMonthDaysCount(tempDate);\n  data = temp.shift();\n\n  while (data) {\n    if (data < 0) {\n      data = data + maxDate + 1;\n    }\n\n    if (data === tempDate.getDate()) {\n      return false;\n    }\n\n    data = temp.shift();\n  }\n\n  return true;\n}\n/**\n * Internal method to check the year value\n *\n * @param {Date} tempDate Accepts the date value\n * @param {number[]} expectedyearDay Accepts the exception dates in year\n * @returns {boolean} Returns the boolean value\n * @private\n */\n\n\nfunction checkYear(tempDate, expectedyearDay) {\n  var temp = expectedyearDay.slice(0);\n  var data;\n  var yearDay = getYearDay(tempDate);\n  data = temp.shift();\n\n  while (data) {\n    if (data < 0) {\n      data = data + calendarUtil.getYearDaysCount(tempDate, 0) + 1;\n    }\n\n    if (data === yearDay) {\n      return false;\n    }\n\n    data = temp.shift();\n  }\n\n  return true;\n}\n/**\n * Internal method to get the year day\n *\n * @param {Date} currentDate Accepts the date value\n * @returns {number} Returns the boolean value\n * @private\n */\n\n\nfunction getYearDay(currentDate) {\n  if (!startDateCollection[calendarUtil.getFullYear(currentDate)]) {\n    startDateCollection[calendarUtil.getFullYear(currentDate)] = calendarUtil.getYearLastDate(currentDate, 0);\n  }\n\n  var tempDate = startDateCollection[calendarUtil.getFullYear(currentDate)];\n  var diff = currentDate.getTime() - tempDate.getTime();\n  return Math.ceil(diff / MS_PER_DAY);\n}\n/**\n * Internal method to validate monthly rule type\n *\n * @param {RecRule} ruleObject Accepts the recurrence rule object\n * @returns {MonthlyType} Returns the monthly type object\n * @private\n */\n\n\nfunction validateMonthlyRuleType(ruleObject) {\n  if (ruleObject.monthDay.length && !ruleObject.day.length) {\n    return 'date';\n  } else if (!ruleObject.monthDay.length && ruleObject.day.length) {\n    return 'day';\n  }\n\n  return 'both';\n}\n/**\n * Internal method to re-order the week days based on first day of week\n *\n * @param {string[]} days Accepts the week days value\n * @returns {void}\n * @private\n */\n\n\nfunction rotate(days) {\n  var data = days.shift();\n  days.push(data);\n}\n/**\n * Internal method to set first day of week\n *\n * @param {string} day Accepts the first day string\n * @returns {void}\n * @private\n */\n\n\nfunction setFirstDayOfWeek(day) {\n  while (dayIndex[0] !== day) {\n    rotate(dayIndex);\n  }\n}\n/**\n * Internal method to validate recurrence rule\n *\n * @param {Date} tempDate Accepts the date value\n * @param {RecRule} ruleObject Accepts the recurrence rule object\n * @returns {boolean} Returns the boolean value\n * @private\n */\n\n\nfunction validateRules(tempDate, ruleObject) {\n  var state = true;\n  var expectedDays = ruleObject.day;\n  var expectedMonth = ruleObject.month;\n  var expectedDate = calendarUtil.getExpectedDays(tempDate, ruleObject.monthDay);\n  var expectedyearDay = ruleObject.yearDay;\n  ruleObject.validRules.forEach(function (rule) {\n    switch (rule) {\n      case 'BYDAY':\n        if (checkDayIndex(tempDate.getDay(), expectedDays)) {\n          state = false;\n        }\n\n        break;\n\n      case 'BYMONTH':\n        if (calendarUtil.checkMonth(tempDate, expectedMonth)) {\n          state = false;\n        }\n\n        break;\n\n      case 'BYMONTHDAY':\n        if (checkDate(tempDate, expectedDate)) {\n          state = false;\n        }\n\n        break;\n\n      case 'BYYEARDAY':\n        if (checkYear(tempDate, expectedyearDay)) {\n          state = false;\n        }\n\n        break;\n    }\n  });\n  return state;\n}\n/**\n * Internal method to get calendar util\n *\n * @param {CalendarType} calendarMode Accepts the calendar type object\n * @returns {CalendarUtil} Returns the calendar util object\n * @private\n */\n\n\nfunction getCalendarUtil(calendarMode) {\n  if (calendarMode === 'Islamic') {\n    return new Islamic();\n  }\n\n  return new Gregorian();\n}\n\nvar startDateCollection = {};\nvar tempExcludeDate;\nvar dayIndex = ['SU', 'MO', 'TU', 'WE', 'TH', 'FR', 'SA'];\nvar maxOccurrence;\nvar tempViewDate;\nvar calendarUtil;\nvar DAYINDEX = ['SU', 'MO', 'TU', 'WE', 'TH', 'FR', 'SA'];\nvar MAXOCCURRENCE = 43;\nvar WEEKPOS = ['first', 'second', 'third', 'fourth', 'last'];\nvar TIMES = 'summaryTimes';\nvar ON = 'summaryOn';\nvar EVERY = 'every';\nvar UNTIL = 'summaryUntil';\nvar DAYS = 'summaryDay';\nvar WEEKS = 'summaryWeek';\nvar MONTHS = 'summaryMonth';\nvar YEARS = 'summaryYear';\nvar DAYINDEXOBJECT = {\n  SU: 'sun',\n  MO: 'mon',\n  TU: 'tue',\n  WE: 'wed',\n  TH: 'thu',\n  FR: 'fri',\n  SA: 'sat'\n}; // To check string has number\n\nvar HASNUMBER = /\\d/; // To find the numbers in string\n\nvar REMOVENUMBERINSTRING = /[^A-Z]+/; // To split number and string\n\nvar SPLITNUMBERANDSTRING = /[a-z]+|[^a-z]+/gi;\n/**\n * Method to generate string from date\n *\n * @param {Date} date Accepts the date value\n * @returns {string} Returns the string value\n */\n\nfunction getRecurrenceStringFromDate(date) {\n  return [date.getUTCFullYear(), roundDateValues(date.getUTCMonth() + 1), roundDateValues(date.getUTCDate()), 'T', roundDateValues(date.getUTCHours()), roundDateValues(date.getUTCMinutes()), roundDateValues(date.getUTCSeconds()), 'Z'].join('');\n}\n/**\n * Internal method to round the date values\n *\n * @param {string | number} date Accepts the date value in either string or number format\n * @returns {string} Returns the date value in string format\n * @private\n */\n\n\nfunction roundDateValues(date) {\n  return ('0' + date).slice(-2);\n}\n/* eslint-disable @typescript-eslint/no-explicit-any */\n\n/* eslint-disable max-len */\n\n/**\n * EventBase for appointment rendering\n */\n\n\nvar EventBase = /*#__PURE__*/function () {\n  /**\n   * Constructor for EventBase\n   *\n   * @param {Schedule} parent Accepts the schedule instance\n   */\n  function EventBase(parent) {\n    _classCallCheck(this, EventBase);\n\n    this.slots = [];\n    this.isDoubleTapped = false;\n    this.parent = parent;\n  }\n\n  _createClass(EventBase, [{\n    key: \"processData\",\n    value: function processData(events, timeZonePropChanged, oldTimezone) {\n      var _this8 = this;\n\n      var start = this.parent.activeView.startDate();\n      var end = this.parent.activeView.endDate();\n      var fields = this.parent.eventFields;\n      var processed = [];\n      var temp = 1;\n      var generateID = false;\n      var resourceCollection = this.parent.resourceBase ? this.parent.resourceBase.resourceCollection : [];\n\n      if (events.length > 0 && isNullOrUndefined(events[0][fields.id])) {\n        generateID = true;\n      }\n\n      var _iterator5 = _createForOfIteratorHelper(events),\n          _step5;\n\n      try {\n        var _loop = function _loop() {\n          var event = _step5.value;\n\n          if (generateID) {\n            event[fields.id] = temp++;\n          }\n\n          event = _this8.updateEventDateTime(event);\n\n          if (timeZonePropChanged) {\n            _this8.processTimezoneChange(event, oldTimezone);\n          } else if (!_this8.parent.isPrinting) {\n            event = _this8.processTimezone(event);\n          }\n\n          for (var level = 0; level < resourceCollection.length; level++) {\n            if (event[resourceCollection[level].field] === null || event[resourceCollection[level].field] === 0) {\n              event[resourceCollection[level].field] = undefined;\n            }\n          }\n\n          if (!isNullOrUndefined(event[fields.recurrenceRule]) && event[fields.recurrenceRule] === '') {\n            event[fields.recurrenceRule] = null;\n          }\n\n          if (!isNullOrUndefined(event[fields.recurrenceRule]) && isNullOrUndefined(event[fields.recurrenceID]) && !(_this8.parent.crudModule && _this8.parent.crudModule.crudObj.isCrudAction)) {\n            processed = processed.concat(_this8.generateOccurrence(event, null, oldTimezone, true));\n          } else {\n            if (_this8.parent.crudModule && _this8.parent.crudModule.crudObj.isCrudAction) {\n              if (!isNullOrUndefined(event[fields.recurrenceRule]) && isNullOrUndefined(event[fields.recurrenceID])) {\n                var recurrenceEvent = _this8.generateOccurrence(event, null, oldTimezone, true);\n\n                var _iterator7 = _createForOfIteratorHelper(recurrenceEvent),\n                    _step7;\n\n                try {\n                  var _loop2 = function _loop2() {\n                    var occurrence = _step7.value;\n\n                    var app = _this8.parent.eventsProcessed.filter(function (data) {\n                      return data[fields.startTime].getTime() - occurrence[fields.startTime].getTime() === 0 && data[fields.id] === occurrence[fields.id];\n                    });\n\n                    occurrence.Guid = app.length > 0 ? app[0].Guid : _this8.generateGuid();\n                    processed.push(occurrence);\n                  };\n\n                  for (_iterator7.s(); !(_step7 = _iterator7.n()).done;) {\n                    _loop2();\n                  }\n                } catch (err) {\n                  _iterator7.e(err);\n                } finally {\n                  _iterator7.f();\n                }\n              } else {\n                var app = _this8.parent.eventsProcessed.filter(function (data) {\n                  return data[_this8.parent.eventFields.id] === event[_this8.parent.eventFields.id];\n                });\n\n                event.Guid = app.length > 0 ? app[0].Guid : _this8.generateGuid();\n                processed.push(event);\n              }\n            } else {\n              event.Guid = _this8.generateGuid();\n              processed.push(event);\n            }\n          }\n        };\n\n        for (_iterator5.s(); !(_step5 = _iterator5.n()).done;) {\n          _loop();\n        }\n      } catch (err) {\n        _iterator5.e(err);\n      } finally {\n        _iterator5.f();\n      }\n\n      this.parent.eventsProcessed = [];\n      var eventData = processed.filter(function (data) {\n        return !data[_this8.parent.eventFields.isBlock];\n      });\n      this.parent.eventsProcessed = this.filterEvents(start, end, eventData);\n      var blockData = processed.filter(function (data) {\n        return data[_this8.parent.eventFields.isBlock];\n      });\n\n      var _iterator6 = _createForOfIteratorHelper(blockData),\n          _step6;\n\n      try {\n        for (_iterator6.s(); !(_step6 = _iterator6.n()).done;) {\n          var eventObj = _step6.value;\n\n          if (eventObj[fields.isAllDay]) {\n            var isDifferentDate = resetTime(new Date(eventObj[fields.startTime].getTime())) < resetTime(new Date(eventObj[fields.endTime].getTime()));\n\n            if (!isDifferentDate) {\n              eventObj[fields.startTime] = resetTime(eventObj[fields.startTime]);\n              eventObj[fields.endTime] = addDays(resetTime(eventObj[fields.endTime]), 1);\n            }\n          }\n        }\n      } catch (err) {\n        _iterator6.e(err);\n      } finally {\n        _iterator6.f();\n      }\n\n      this.parent.blockProcessed = blockData;\n      return eventData;\n    }\n  }, {\n    key: \"updateEventDateTime\",\n    value: function updateEventDateTime(eventData) {\n      if (typeof eventData[this.parent.eventFields.startTime] === 'string') {\n        eventData[this.parent.eventFields.startTime] = getDateFromString(eventData[this.parent.eventFields.startTime]);\n      }\n\n      if (typeof eventData[this.parent.eventFields.endTime] === 'string') {\n        eventData[this.parent.eventFields.endTime] = getDateFromString(eventData[this.parent.eventFields.endTime]);\n      }\n\n      return eventData;\n    }\n  }, {\n    key: \"getProcessedEvents\",\n    value: function getProcessedEvents() {\n      var eventCollection = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : this.parent.eventsData;\n      var processed = [];\n\n      var _iterator8 = _createForOfIteratorHelper(eventCollection),\n          _step8;\n\n      try {\n        for (_iterator8.s(); !(_step8 = _iterator8.n()).done;) {\n          var event = _step8.value;\n\n          if (!isNullOrUndefined(event[this.parent.eventFields.recurrenceRule]) && isNullOrUndefined(event[this.parent.eventFields.recurrenceID])) {\n            processed = processed.concat(this.generateOccurrence(event));\n          } else {\n            processed.push(event);\n          }\n        }\n      } catch (err) {\n        _iterator8.e(err);\n      } finally {\n        _iterator8.f();\n      }\n\n      return processed;\n    }\n  }, {\n    key: \"timezonePropertyChange\",\n    value: function timezonePropertyChange(oldTimezone) {\n      var data = this.parent.eventsData.concat(this.parent.blockData);\n      var processed = this.processData(data, true, oldTimezone);\n      this.parent.notify(dataReady, {\n        processedData: processed\n      });\n    }\n  }, {\n    key: \"timezoneConvert\",\n    value: function timezoneConvert(eventData) {\n      var fields = this.parent.eventFields;\n      eventData[fields.startTimezone] = eventData[fields.startTimezone] || eventData[fields.endTimezone];\n      eventData[fields.endTimezone] = eventData[fields.endTimezone] || eventData[fields.startTimezone];\n\n      if (this.parent.timezone) {\n        var startTz = eventData[fields.startTimezone];\n        var endTz = eventData[fields.endTimezone];\n        eventData[fields.startTime] = this.parent.tzModule.convert(eventData[fields.startTime], this.parent.timezone, startTz);\n        eventData[fields.endTime] = this.parent.tzModule.convert(eventData[fields.endTime], this.parent.timezone, endTz);\n      }\n    }\n  }, {\n    key: \"processTimezoneChange\",\n    value: function processTimezoneChange(event, oldTimezone) {\n      var fields = this.parent.eventFields;\n\n      if (event[fields.isAllDay]) {\n        return;\n      }\n\n      if (oldTimezone && this.parent.timezone) {\n        event[fields.startTime] = this.parent.tzModule.convert(event[fields.startTime], oldTimezone, this.parent.timezone);\n        event[fields.endTime] = this.parent.tzModule.convert(event[fields.endTime], oldTimezone, this.parent.timezone);\n      } else if (!oldTimezone && this.parent.timezone) {\n        event[fields.startTime] = this.parent.tzModule.add(event[fields.startTime], this.parent.timezone);\n        event[fields.endTime] = this.parent.tzModule.add(event[fields.endTime], this.parent.timezone);\n      } else if (oldTimezone && !this.parent.timezone) {\n        event[fields.startTime] = this.parent.tzModule.remove(event[fields.startTime], oldTimezone);\n        event[fields.endTime] = this.parent.tzModule.remove(event[fields.endTime], oldTimezone);\n      }\n    }\n  }, {\n    key: \"processTimezone\",\n    value: function processTimezone(event) {\n      var isReverse = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : false;\n      var fields = this.parent.eventFields;\n\n      if (event[fields.startTimezone] || event[fields.endTimezone]) {\n        var startTimezone = event[fields.startTimezone] || event[fields.endTimezone];\n        var endTimezone = event[fields.endTimezone] || event[fields.startTimezone];\n\n        if (isReverse) {\n          if (this.parent.timezone) {\n            event[fields.startTime] = this.parent.tzModule.convert(event[fields.startTime], startTimezone, this.parent.timezone);\n            event[fields.endTime] = this.parent.tzModule.convert(event[fields.endTime], endTimezone, this.parent.timezone);\n            event[fields.startTime] = this.parent.tzModule.remove(event[fields.startTime], this.parent.timezone);\n            event[fields.endTime] = this.parent.tzModule.remove(event[fields.endTime], this.parent.timezone);\n          } else {\n            event[fields.startTime] = this.parent.tzModule.remove(event[fields.startTime], startTimezone);\n            event[fields.endTime] = this.parent.tzModule.remove(event[fields.endTime], endTimezone);\n          }\n        } else {\n          event[fields.startTime] = this.parent.tzModule.add(event[fields.startTime], startTimezone);\n          event[fields.endTime] = this.parent.tzModule.add(event[fields.endTime], endTimezone);\n\n          if (this.parent.timezone) {\n            event[fields.startTime] = this.parent.tzModule.convert(event[fields.startTime], startTimezone, this.parent.timezone);\n            event[fields.endTime] = this.parent.tzModule.convert(event[fields.endTime], endTimezone, this.parent.timezone);\n          }\n        }\n      } else if (this.parent.timezone) {\n        if (isReverse) {\n          event[fields.startTime] = this.parent.tzModule.remove(event[fields.startTime], this.parent.timezone);\n          event[fields.endTime] = this.parent.tzModule.remove(event[fields.endTime], this.parent.timezone);\n        } else {\n          event[fields.startTime] = this.parent.tzModule.add(event[fields.startTime], this.parent.timezone);\n          event[fields.endTime] = this.parent.tzModule.add(event[fields.endTime], this.parent.timezone);\n        }\n      }\n\n      return event;\n    }\n  }, {\n    key: \"filterBlockEvents\",\n    value: function filterBlockEvents(eventObj) {\n      var fields = this.parent.eventFields;\n      var eStart = eventObj[fields.startTime];\n      var eEnd = eventObj[fields.endTime];\n      var resourceData;\n\n      if (this.parent.activeViewOptions.group.resources.length > 0) {\n        var data = this.getGroupIndexFromEvent(eventObj);\n        resourceData = this.parent.resourceBase.lastResourceLevel[data];\n      }\n\n      var blockEvents = extend([], this.parent.blockProcessed, null, true);\n\n      var _iterator9 = _createForOfIteratorHelper(blockEvents),\n          _step9;\n\n      try {\n        for (_iterator9.s(); !(_step9 = _iterator9.n()).done;) {\n          var _eventObj = _step9.value;\n\n          if (_eventObj[fields.isAllDay]) {\n            var isDifferentTime = _eventObj[fields.endTime].getTime() > resetTime(new Date(_eventObj[fields.endTime].getTime())).getTime();\n\n            if (isDifferentTime) {\n              _eventObj[fields.startTime] = resetTime(_eventObj[fields.startTime]);\n              _eventObj[fields.endTime] = addDays(resetTime(_eventObj[fields.endTime]), 1);\n            }\n          }\n        }\n      } catch (err) {\n        _iterator9.e(err);\n      } finally {\n        _iterator9.f();\n      }\n\n      return this.filterEvents(eStart, eEnd, blockEvents, resourceData);\n    }\n  }, {\n    key: \"filterEvents\",\n    value: function filterEvents(startDate, endDate) {\n      var appointments = arguments.length > 2 && arguments[2] !== undefined ? arguments[2] : this.parent.eventsProcessed;\n      var resourceTdData = arguments.length > 3 ? arguments[3] : undefined;\n      var fieldMapping = this.parent.eventFields;\n      var predicate = new Predicate(fieldMapping.startTime, 'greaterthanorequal', startDate).and(new Predicate(fieldMapping.endTime, 'greaterthanorequal', startDate)).and(new Predicate(fieldMapping.startTime, 'lessthan', endDate)).or(new Predicate(fieldMapping.startTime, 'lessthanorequal', startDate).and(new Predicate(fieldMapping.endTime, 'greaterthan', startDate)));\n      var filter = new DataManager({\n        json: appointments\n      }).executeLocal(new Query().where(predicate));\n\n      if (resourceTdData) {\n        filter = this.filterEventsByResource(resourceTdData, filter);\n      }\n\n      return this.sortByTime(filter);\n    }\n  }, {\n    key: \"filterEventsByRange\",\n    value: function filterEventsByRange(eventCollection, startDate, endDate) {\n      var _this9 = this;\n\n      var filteredEvents = [];\n\n      if (startDate && endDate) {\n        filteredEvents = this.filterEvents(startDate, endDate, eventCollection);\n      } else if (startDate && !endDate) {\n        filteredEvents = eventCollection.filter(function (e) {\n          return e[_this9.parent.eventFields.startTime] >= startDate;\n        });\n      } else if (!startDate && endDate) {\n        filteredEvents = eventCollection.filter(function (e) {\n          return e[_this9.parent.eventFields.endTime] <= endDate;\n        });\n      } else {\n        filteredEvents = eventCollection;\n      }\n\n      return this.sortByTime(filteredEvents);\n    }\n  }, {\n    key: \"filterEventsByResource\",\n    value: function filterEventsByResource(resourceTdData) {\n      var appointments = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : this.parent.eventsProcessed;\n      var predicate = {};\n      var resourceCollection = this.parent.resourceBase.resourceCollection;\n\n      for (var level = 0; level < resourceCollection.length; level++) {\n        predicate[resourceCollection[level].field] = resourceTdData.groupOrder[level];\n      }\n\n      var keys = Object.keys(predicate);\n      var filteredCollection = appointments.filter(function (eventObj) {\n        return keys.every(function (key) {\n          if (eventObj[key] instanceof Array) {\n            return eventObj[key].indexOf(predicate[key]) > -1;\n          } else {\n            return eventObj[key] === predicate[key];\n          }\n        });\n      });\n      return filteredCollection;\n    }\n  }, {\n    key: \"sortByTime\",\n    value: function sortByTime(appointmentsCollection) {\n      if (this.parent.eventSettings.sortComparer) {\n        appointmentsCollection = this.parent.eventSettings.sortComparer.call(this.parent, appointmentsCollection);\n      } else {\n        var fieldMappings = this.parent.eventFields;\n        appointmentsCollection.sort(function (a, b) {\n          var d1 = a[fieldMappings.startTime];\n          var d2 = b[fieldMappings.startTime];\n          return d1.getTime() - d2.getTime();\n        });\n      }\n\n      return appointmentsCollection;\n    }\n  }, {\n    key: \"sortByDateTime\",\n    value: function sortByDateTime(appointments) {\n      if (this.parent.eventSettings.sortComparer) {\n        appointments = this.parent.eventSettings.sortComparer.call(this.parent, appointments);\n      } else {\n        var fieldMapping = this.parent.eventFields;\n        appointments.sort(function (object1, object2) {\n          var d3 = object1[fieldMapping.startTime];\n          var d4 = object2[fieldMapping.startTime];\n          var d5 = object1[fieldMapping.endTime];\n          var d6 = object2[fieldMapping.endTime];\n          var d1 = d5.getTime() - d3.getTime();\n          var d2 = d6.getTime() - d4.getTime();\n          return d3.getTime() - d4.getTime() || d2 - d1;\n        });\n      }\n\n      return appointments;\n    }\n  }, {\n    key: \"getSmallestMissingNumber\",\n    value: function getSmallestMissingNumber(array) {\n      var large = Math.max.apply(Math, _toConsumableArray(array));\n\n      for (var i = 0; i < large; i++) {\n        if (array.indexOf(i) === -1) {\n          return i;\n        }\n      }\n\n      return large + 1;\n    }\n  }, {\n    key: \"splitEventByDay\",\n    value: function splitEventByDay(event) {\n      var eventFields = this.parent.eventFields;\n      var data = [];\n      var eventStartTime = event[eventFields.startTime];\n      var eventEndTime = event[eventFields.endTime];\n      var isDifferentDate = resetTime(new Date(eventStartTime.getTime())) < resetTime(new Date(eventEndTime.getTime()));\n\n      if (isDifferentDate) {\n        var start = new Date(eventStartTime.getTime());\n        var end = addDays(resetTime(new Date(eventStartTime.getTime())), 1);\n        var endDate = eventEndTime.getHours() === 0 && eventEndTime.getMinutes() === 0 ? eventEndTime : addDays(eventEndTime, 1);\n        var index = 1;\n        var eventLength = getDaysCount(eventStartTime.getTime(), endDate.getTime());\n\n        while (end <= eventEndTime && start.getTime() !== end.getTime()) {\n          var app = extend({}, event);\n          app[eventFields.startTime] = start;\n          app[eventFields.endTime] = end;\n          app.data = {\n            index: index,\n            count: eventLength\n          };\n          app.Guid = this.generateGuid();\n          app.isSpanned = true;\n          data.push(app);\n          start = end;\n\n          if (resetTime(new Date(start.getTime())).getTime() === resetTime(new Date(eventEndTime.getTime())).getTime() && !(end.getTime() === eventEndTime.getTime())) {\n            end = new Date(start.getTime());\n            end = new Date(end.setHours(eventEndTime.getHours(), eventEndTime.getMinutes(), eventEndTime.getSeconds()));\n          } else {\n            end = addDays(resetTime(new Date(start.getTime())), 1);\n          }\n\n          index++;\n        }\n      } else {\n        data.push(event);\n      }\n\n      return data;\n    }\n  }, {\n    key: \"splitEvent\",\n    value: function splitEvent(event, dateRender) {\n      var fields = this.parent.eventFields;\n      var start = resetTime(event[fields.startTime]).getTime();\n      var end = resetTime(event[fields.endTime]).getTime();\n\n      if (getDateInMs(event[fields.endTime]) <= 0) {\n        var temp = addDays(resetTime(event[fields.endTime]), -1).getTime();\n        end = start > temp ? start : temp;\n      }\n\n      var orgStart = start;\n      var orgEnd = end;\n      var ranges = [];\n\n      if (start !== end) {\n        if (start < dateRender[0].getTime()) {\n          start = dateRender[0].getTime();\n        }\n\n        if (end > dateRender[dateRender.length - 1].getTime()) {\n          end = dateRender[dateRender.length - 1].getTime();\n        }\n\n        var cStart = start;\n\n        for (var level = 0; level < this.slots.length; level++) {\n          var slot = this.slots[level];\n\n          if (this.parent.currentView === 'WorkWeek' || this.parent.currentView === 'TimelineWorkWeek' || this.parent.activeViewOptions.group.byDate || this.parent.activeViewOptions.showWeekend) {\n            var slotDates = [];\n\n            var _iterator10 = _createForOfIteratorHelper(slot),\n                _step10;\n\n            try {\n              for (_iterator10.s(); !(_step10 = _iterator10.n()).done;) {\n                var s = _step10.value;\n                slotDates.push(new Date(s));\n              }\n            } catch (err) {\n              _iterator10.e(err);\n            } finally {\n              _iterator10.f();\n            }\n\n            var renderedDates = this.getRenderedDates(slotDates);\n\n            if (!isNullOrUndefined(renderedDates) && renderedDates.length > 0) {\n              slot = [];\n\n              var _iterator11 = _createForOfIteratorHelper(renderedDates),\n                  _step11;\n\n              try {\n                for (_iterator11.s(); !(_step11 = _iterator11.n()).done;) {\n                  var date = _step11.value;\n                  slot.push(date.getTime());\n                }\n              } catch (err) {\n                _iterator11.e(err);\n              } finally {\n                _iterator11.f();\n              }\n            }\n          }\n\n          if (typeof slot === 'number') {\n            var _temp2 = slot;\n            slot = [];\n            slot.push(_temp2);\n          }\n\n          var firstSlot = slot[0];\n          cStart = cStart <= firstSlot && end >= firstSlot ? firstSlot : cStart;\n\n          if (cStart > end || firstSlot > end) {\n            break;\n          }\n\n          if (!this.parent.activeViewOptions.group.byDate && this.parent.activeViewOptions.showWeekend && this.parent.currentView !== 'WorkWeek' && this.parent.currentView !== 'TimelineWorkWeek') {\n            var startIndex = slot.indexOf(cStart);\n\n            if (startIndex !== -1) {\n              var endIndex = slot.indexOf(end);\n              var hasBreak = endIndex !== -1;\n              endIndex = hasBreak ? endIndex : slot.length - 1;\n              var count = endIndex - startIndex + 1;\n              var isLeft = slot[startIndex] !== orgStart;\n              var isRight = slot[endIndex] !== orgEnd;\n              ranges.push(this.cloneEventObject(event, slot[startIndex], slot[endIndex], count, isLeft, isRight));\n\n              if (hasBreak) {\n                break;\n              }\n            }\n          } else {\n            if (this.dateInRange(cStart, slot[0], slot[slot.length - 1])) {\n              var availSlot = [];\n\n              for (var i = 0; i < slot.length; i++) {\n                if (this.dateInRange(slot[i], orgStart, orgEnd)) {\n                  availSlot.push(slot[i]);\n                }\n              }\n\n              if (availSlot.length > 0) {\n                if (!this.parent.activeViewOptions.group.byDate) {\n                  var _isLeft = availSlot[0] !== orgStart;\n\n                  var _isRight = availSlot[availSlot.length - 1] !== orgEnd;\n\n                  ranges.push(this.cloneEventObject(event, availSlot[0], availSlot[availSlot.length - 1], availSlot.length, _isLeft, _isRight));\n                } else {\n                  var _iterator12 = _createForOfIteratorHelper(availSlot),\n                      _step12;\n\n                  try {\n                    for (_iterator12.s(); !(_step12 = _iterator12.n()).done;) {\n                      var _slot = _step12.value;\n                      ranges.push(this.cloneEventObject(event, _slot, _slot, 1, _slot !== orgStart, _slot !== orgEnd));\n                    }\n                  } catch (err) {\n                    _iterator12.e(err);\n                  } finally {\n                    _iterator12.f();\n                  }\n                }\n              }\n            }\n          }\n        }\n      } else {\n        ranges.push(this.cloneEventObject(event, start, end, 1, false, false));\n      }\n\n      return ranges;\n    }\n  }, {\n    key: \"cloneEventObject\",\n    value: function cloneEventObject(event, start, end, count, isLeft, isRight) {\n      var fields = this.parent.eventFields;\n      var e = extend({}, event, null, true);\n      var data = {\n        count: count,\n        isLeft: isLeft,\n        isRight: isRight\n      };\n      data[fields.startTime] = event[fields.startTime];\n      data[fields.endTime] = event[fields.endTime];\n      e.data = data;\n      e[fields.startTime] = new Date(start);\n      e[fields.endTime] = new Date(end);\n      return e;\n    }\n  }, {\n    key: \"dateInRange\",\n    value: function dateInRange(date, start, end) {\n      return start <= date && date <= end;\n    }\n  }, {\n    key: \"getSelectedEventElements\",\n    value: function getSelectedEventElements(target) {\n      this.removeSelectedAppointmentClass();\n\n      if (this.parent.selectedElements.length <= 0) {\n        this.parent.selectedElements.push(target);\n      } else {\n        var isAlreadySelected = this.parent.selectedElements.filter(function (element) {\n          return element.getAttribute('data-guid') === target.getAttribute('data-guid');\n        });\n\n        if (isAlreadySelected.length <= 0) {\n          var elementSelector = 'div[data-guid=\"' + target.getAttribute('data-guid') + '\"]';\n          var focusElements = [].slice.call(this.parent.element.querySelectorAll(elementSelector));\n\n          var _iterator13 = _createForOfIteratorHelper(focusElements),\n              _step13;\n\n          try {\n            for (_iterator13.s(); !(_step13 = _iterator13.n()).done;) {\n              var element = _step13.value;\n              this.parent.selectedElements.push(element);\n            }\n          } catch (err) {\n            _iterator13.e(err);\n          } finally {\n            _iterator13.f();\n          }\n        } else {\n          var selectedElements = this.parent.selectedElements.filter(function (element) {\n            return element.getAttribute('data-guid') !== target.getAttribute('data-guid');\n          });\n          this.parent.selectedElements = selectedElements;\n        }\n      }\n\n      if (target && this.parent.selectedElements.length > 0) {\n        this.addSelectedAppointments(this.parent.selectedElements);\n      }\n\n      return this.parent.selectedElements;\n    }\n  }, {\n    key: \"getSelectedEvents\",\n    value: function getSelectedEvents() {\n      var _this10 = this;\n\n      var eventSelect = [];\n      var elementSelect = [];\n      var selectAppointments = [].slice.call(this.parent.element.querySelectorAll('.' + APPOINTMENT_BORDER));\n      selectAppointments.filter(function (element) {\n        var isAlreadyAdded = eventSelect.filter(function (event) {\n          return event.Guid === element.getAttribute('data-guid');\n        });\n\n        if (isAlreadyAdded.length === 0) {\n          eventSelect.push(_this10.getEventByGuid(element.getAttribute('data-guid')));\n        }\n\n        elementSelect.push(element);\n      });\n      return {\n        event: eventSelect.length > 1 ? eventSelect : eventSelect[0],\n        element: elementSelect.length > 1 ? elementSelect : elementSelect[0]\n      };\n    }\n  }, {\n    key: \"removeSelectedAppointmentClass\",\n    value: function removeSelectedAppointmentClass() {\n      var selectedAppointments = this.getSelectedAppointments();\n\n      var _iterator14 = _createForOfIteratorHelper(selectedAppointments),\n          _step14;\n\n      try {\n        for (_iterator14.s(); !(_step14 = _iterator14.n()).done;) {\n          var appointment = _step14.value;\n          appointment.setAttribute('aria-selected', 'false');\n        }\n      } catch (err) {\n        _iterator14.e(err);\n      } finally {\n        _iterator14.f();\n      }\n\n      removeClass(selectedAppointments, APPOINTMENT_BORDER);\n\n      if (this.parent.currentView === 'Agenda' || this.parent.currentView === 'MonthAgenda') {\n        removeClass(selectedAppointments, AGENDA_SELECTED_CELL);\n      }\n    }\n  }, {\n    key: \"addSelectedAppointments\",\n    value: function addSelectedAppointments(cells) {\n      var _iterator15 = _createForOfIteratorHelper(cells),\n          _step15;\n\n      try {\n        for (_iterator15.s(); !(_step15 = _iterator15.n()).done;) {\n          var cell = _step15.value;\n          cell.setAttribute('aria-selected', 'true');\n        }\n      } catch (err) {\n        _iterator15.e(err);\n      } finally {\n        _iterator15.f();\n      }\n\n      if (this.parent.currentView !== 'MonthAgenda') {\n        this.parent.removeSelectedClass();\n      }\n\n      addClass(cells, APPOINTMENT_BORDER);\n    }\n  }, {\n    key: \"getSelectedAppointments\",\n    value: function getSelectedAppointments() {\n      return [].slice.call(this.parent.element.querySelectorAll('.' + APPOINTMENT_BORDER + ',.' + APPOINTMENT_CLASS + ':focus'));\n    }\n  }, {\n    key: \"focusElement\",\n    value: function focusElement(isFocused) {\n      if (this.parent.eventWindow.dialogObject && this.parent.eventWindow.dialogObject.visible) {\n        return;\n      }\n\n      var activeEle = document.activeElement;\n      var selectedCell = this.parent.getSelectedElements();\n\n      if (selectedCell.length > 0 && (activeEle && (this.parent.element.contains(activeEle) || selectedCell.indexOf(activeEle) !== -1) || isFocused)) {\n        if (this.parent.keyboardInteractionModule) {\n          var target = !isNullOrUndefined(this.parent.activeCellsData) && this.parent.activeCellsData.element || selectedCell[selectedCell.length - 1];\n          this.parent.keyboardInteractionModule.selectCells(target instanceof Array, target);\n        }\n\n        return;\n      }\n\n      var selectedAppointments = this.getSelectedAppointments();\n\n      if (selectedAppointments.length > 0) {\n        selectedAppointments[selectedAppointments.length - 1].focus();\n        return;\n      }\n    }\n  }, {\n    key: \"selectWorkCellByTime\",\n    value: function selectWorkCellByTime(eventsData) {\n      var target;\n\n      if (this.parent.currentView === 'Agenda' || this.parent.currentView === 'MonthAgenda') {\n        return target;\n      }\n\n      if (eventsData.length > 0) {\n        var selectedObject = eventsData[eventsData.length - 1];\n        var eventStartTime = selectedObject[this.parent.eventFields.startTime];\n        var nearestTime = new Date(+eventStartTime).setMinutes(0, 0, 0);\n        var isAllDay = this.isAllDayAppointment(selectedObject);\n\n        if (this.parent.currentView === 'Month' || isAllDay) {\n          nearestTime = new Date(+eventStartTime).setHours(0, 0, 0, 0);\n        }\n\n        var targetArea;\n\n        if (isAllDay && ['Day', 'Week', 'WorkWeek'].indexOf(this.parent.currentView) !== -1) {\n          targetArea = this.parent.getAllDayRow();\n        } else {\n          targetArea = this.parent.getContentTable();\n        }\n\n        var queryString = '[data-date=\"' + new Date(nearestTime).getTime() + '\"]';\n\n        if (this.parent.activeViewOptions.group.resources.length > 0) {\n          queryString += '[data-group-index=\"' + this.getGroupIndexFromEvent(selectedObject) + '\"]';\n        }\n\n        target = targetArea.querySelector(queryString);\n\n        if (target) {\n          this.parent.activeCellsData = this.parent.getCellDetails(target);\n\n          if (this.parent.keyboardInteractionModule) {\n            this.parent.keyboardInteractionModule.selectCells(false, target);\n          }\n\n          return target;\n        }\n      }\n\n      return target;\n    }\n  }, {\n    key: \"getGroupIndexFromEvent\",\n    value: function getGroupIndexFromEvent(eventData) {\n      var levelIndex;\n      var resource;\n      var levelName;\n      var idField;\n\n      for (var i = this.parent.resourceBase.resourceCollection.length - 1; i >= 0; i--) {\n        var resourceData = eventData[this.parent.resourceBase.resourceCollection[i].field];\n\n        if (!isNullOrUndefined(resourceData)) {\n          resource = this.parent.resourceBase.resourceCollection[i];\n          levelIndex = i;\n          levelName = resource.name;\n          idField = resource.field;\n          break;\n        }\n      }\n\n      if (isNullOrUndefined(levelName) && isNullOrUndefined(levelIndex)) {\n        levelName = this.parent.resourceCollection.slice(-1)[0].name;\n        levelIndex = this.parent.resourceCollection.length - 1;\n        idField = this.parent.resourceCollection.slice(-1)[0].field;\n        resource = this.parent.resourceCollection.filter(function (e, index) {\n          if (e.name === levelName) {\n            levelIndex = index;\n            return e;\n          }\n\n          return null;\n        })[0];\n      }\n\n      var id = eventData[idField] instanceof Array ? eventData[idField][0] : eventData[idField];\n\n      if (levelIndex > 0) {\n        var parentField = this.parent.resourceCollection[levelIndex - 1].field;\n        return this.parent.resourceBase.getIndexFromResourceId(id, levelName, resource, eventData, parentField);\n      } else {\n        return this.parent.resourceBase.getIndexFromResourceId(id, levelName, resource);\n      }\n    }\n  }, {\n    key: \"isAllDayAppointment\",\n    value: function isAllDayAppointment(event) {\n      var fieldMapping = this.parent.eventFields;\n      var isAllDay = event[fieldMapping.isAllDay];\n      var isFullDay = (event[fieldMapping.endTime].getTime() - event[fieldMapping.startTime].getTime()) / MS_PER_DAY >= 1;\n      return isAllDay || this.parent.eventSettings.spannedEventPlacement !== 'TimeSlot' && isFullDay ? true : false;\n    }\n  }, {\n    key: \"addEventListener\",\n    value: function addEventListener() {\n      this.parent.on(documentClick, this.appointmentBorderRemove, this);\n    }\n  }, {\n    key: \"removeEventListener\",\n    value: function removeEventListener() {\n      this.parent.off(documentClick, this.appointmentBorderRemove);\n    }\n  }, {\n    key: \"appointmentBorderRemove\",\n    value: function appointmentBorderRemove(event) {\n      var element = event.event.target;\n\n      if (closest(element, '.' + APPOINTMENT_CLASS)) {\n        if (this.parent.currentView !== 'MonthAgenda') {\n          this.parent.removeSelectedClass();\n        }\n      } else if (!closest(element, '.' + POPUP_OPEN)) {\n        this.removeSelectedAppointmentClass();\n      }\n    }\n  }, {\n    key: \"wireAppointmentEvents\",\n    value: function wireAppointmentEvents(element, event) {\n      var isPreventCrud = arguments.length > 2 && arguments[2] !== undefined ? arguments[2] : false;\n      var isReadOnly = !isNullOrUndefined(event) ? event[this.parent.eventFields.isReadonly] : false;\n      EventHandler.add(element, 'click', this.eventClick, this);\n\n      if (!this.parent.isAdaptive && !this.parent.activeViewOptions.readonly && !isReadOnly) {\n        EventHandler.add(element, 'touchstart', this.eventTouchClick, this);\n        EventHandler.add(element, 'dblclick', this.eventDoubleClick, this);\n      }\n\n      if (!this.parent.activeViewOptions.readonly && !isReadOnly && !isPreventCrud) {\n        if (this.parent.resizeModule) {\n          this.parent.resizeModule.wireResizeEvent(element);\n        }\n\n        if (this.parent.dragAndDropModule) {\n          this.parent.dragAndDropModule.wireDragEvent(element);\n        }\n      }\n    }\n  }, {\n    key: \"eventTouchClick\",\n    value: function eventTouchClick(e) {\n      var _this11 = this;\n\n      setTimeout(function () {\n        return _this11.isDoubleTapped = false;\n      }, 250);\n      e.preventDefault();\n\n      if (this.isDoubleTapped) {\n        this.eventDoubleClick(e);\n      } else if (!this.isDoubleTapped) {\n        this.isDoubleTapped = true;\n        this.eventClick(e);\n      }\n    }\n  }, {\n    key: \"renderResizeHandler\",\n    value: function renderResizeHandler(element, spanEvent, isReadOnly) {\n      if (!this.parent.resizeModule || !this.parent.allowResizing || this.parent.activeViewOptions.readonly || isReadOnly) {\n        return;\n      }\n\n      for (var _i = 0, _Object$keys = Object.keys(spanEvent); _i < _Object$keys.length; _i++) {\n        var resizeEdge = _Object$keys[_i];\n        var resizeHandler = createElement('div', {\n          className: EVENT_RESIZE_CLASS\n        });\n\n        switch (resizeEdge) {\n          case 'isLeft':\n            if (!spanEvent.isLeft) {\n              resizeHandler.appendChild(createElement('div', {\n                className: 'e-left-right-resize'\n              }));\n              addClass([resizeHandler], this.parent.enableRtl ? RIGHT_RESIZE_HANDLER : LEFT_RESIZE_HANDLER);\n              prepend([resizeHandler], element);\n            }\n\n            break;\n\n          case 'isRight':\n            if (!spanEvent.isRight) {\n              resizeHandler.appendChild(createElement('div', {\n                className: 'e-left-right-resize'\n              }));\n              addClass([resizeHandler], this.parent.enableRtl ? LEFT_RESIZE_HANDLER : RIGHT_RESIZE_HANDLER);\n              append([resizeHandler], element);\n            }\n\n            break;\n\n          case 'isTop':\n            if (!spanEvent.isTop) {\n              resizeHandler.appendChild(createElement('div', {\n                className: 'e-top-bottom-resize'\n              }));\n              addClass([resizeHandler], TOP_RESIZE_HANDLER);\n              prepend([resizeHandler], element);\n            }\n\n            break;\n\n          case 'isBottom':\n            if (!spanEvent.isBottom) {\n              resizeHandler.appendChild(createElement('div', {\n                className: 'e-top-bottom-resize'\n              }));\n              addClass([resizeHandler], BOTTOM_RESIZE_HANDLER);\n              append([resizeHandler], element);\n            }\n\n            break;\n        }\n      }\n    }\n  }, {\n    key: \"eventClick\",\n    value: function eventClick(eventData) {\n      var _this12 = this;\n\n      var target = eventData.target;\n\n      if (target.classList.contains(DRAG_CLONE_CLASS) || target.classList.contains(RESIZE_CLONE_CLASS)) {\n        return;\n      }\n\n      if ((eventData.ctrlKey || eventData.metaKey) && eventData.which === 1 && this.parent.keyboardInteractionModule) {\n        this.parent.quickPopup.quickPopup.hide();\n        this.parent.selectedElements = [].slice.call(this.parent.element.querySelectorAll('.' + APPOINTMENT_BORDER));\n\n        var _target = closest(eventData.target, '.' + APPOINTMENT_CLASS);\n\n        this.getSelectedEventElements(_target);\n        this.activeEventData(eventData, false);\n        var selectArgs = {\n          data: this.parent.activeEventData.event,\n          element: this.parent.activeEventData.element,\n          event: eventData,\n          requestType: 'eventSelect'\n        };\n        this.parent.trigger(select, selectArgs);\n        var args = extend(this.parent.activeEventData, {\n          cancel: false,\n          originalEvent: eventData\n        });\n        this.parent.trigger(_eventClick, args);\n      } else {\n        this.removeSelectedAppointmentClass();\n        this.activeEventData(eventData, true);\n        var selectEventArgs = {\n          data: this.parent.activeEventData.event,\n          element: this.parent.activeEventData.element,\n          event: eventData,\n          requestType: 'eventSelect'\n        };\n        this.parent.trigger(select, selectEventArgs);\n\n        var _args = extend(this.parent.activeEventData, {\n          cancel: false,\n          originalEvent: eventData\n        });\n\n        this.parent.trigger(_eventClick, _args, function (eventClickArgs) {\n          if (eventClickArgs.cancel) {\n            _this12.removeSelectedAppointmentClass();\n\n            if (_this12.parent.quickPopup) {\n              _this12.parent.quickPopup.quickPopupHide();\n            }\n          } else {\n            if (_this12.parent.currentView === 'Agenda' || _this12.parent.currentView === 'MonthAgenda') {\n              addClass([_this12.parent.activeEventData.element], AGENDA_SELECTED_CELL);\n            }\n\n            if (_this12.parent.allowInline) {\n              var inlineArgs = {\n                data: eventClickArgs.event,\n                element: eventClickArgs.element,\n                type: 'Event'\n              };\n\n              _this12.parent.notify(inlineClick, inlineArgs);\n            } else {\n              _this12.parent.notify(_eventClick, eventClickArgs);\n            }\n          }\n        });\n      }\n    }\n  }, {\n    key: \"eventDoubleClick\",\n    value: function eventDoubleClick(e) {\n      if (this.parent.quickPopup) {\n        this.parent.quickPopup.quickPopupHide(true);\n      }\n\n      if (e.type === 'touchstart') {\n        this.activeEventData(e, true);\n      }\n\n      this.removeSelectedAppointmentClass();\n\n      if (this.parent.activeEventData.element.classList.contains(INLINE_APPOINTMENT_CLASS) || this.parent.activeEventData.element.querySelector('.' + INLINE_SUBJECT_CLASS)) {\n        return;\n      }\n\n      if (!isNullOrUndefined(this.parent.activeEventData.event) && isNullOrUndefined(this.parent.activeEventData.event[this.parent.eventFields.recurrenceID])) {\n        this.parent.eventWindow.openEditor(this.parent.activeEventData.event, 'Save');\n      } else {\n        this.parent.currentAction = 'EditOccurrence';\n        this.parent.quickPopup.openRecurrenceAlert();\n      }\n    }\n  }, {\n    key: \"getEventByGuid\",\n    value: function getEventByGuid(guid) {\n      return this.parent.eventsProcessed.filter(function (data) {\n        return data.Guid === guid;\n      })[0];\n    }\n  }, {\n    key: \"getEventById\",\n    value: function getEventById(id) {\n      var _this13 = this;\n\n      return this.parent.eventsData.filter(function (data) {\n        return data[_this13.parent.eventFields.id] === id;\n      })[0];\n    }\n  }, {\n    key: \"generateGuid\",\n    value: function generateGuid() {\n      return 'xyxxxxyx-xxxy-yxxx-xyxx-xxyxxxxyyxxx'.replace(/[xy]/g, function (c) {\n        var r = Math.random() * 16 | 0;\n        var v = c === 'x' ? r : r & 0x3 | 0x8;\n        return v.toString(16);\n      });\n    }\n  }, {\n    key: \"getEventIDType\",\n    value: function getEventIDType() {\n      if (this.parent.eventsData.length !== 0) {\n        return typeof this.parent.eventsData[0][this.parent.eventFields.id];\n      }\n\n      if (this.parent.blockData.length !== 0) {\n        return typeof this.parent.blockData[0][this.parent.eventFields.id];\n      }\n\n      return 'string';\n    }\n  }, {\n    key: \"getEventMaxID\",\n    value: function getEventMaxID(resourceId) {\n      var _this14 = this;\n\n      if (this.parent.eventsData.length < 1 && this.parent.blockData.length < 1) {\n        return 1;\n      }\n\n      var eventId;\n      var idType = this.getEventIDType();\n\n      if (idType === 'string') {\n        eventId = this.generateGuid();\n      }\n\n      if (idType === 'number') {\n        var datas = this.parent.eventsData.concat(this.parent.blockData);\n        var maxId = Math.max.apply(Math, _toConsumableArray(datas.map(function (event) {\n          return event[_this14.parent.eventFields.id];\n        })));\n        maxId = isNullOrUndefined(resourceId) ? maxId : maxId + resourceId;\n        eventId = maxId + 1;\n      }\n\n      return eventId;\n    }\n  }, {\n    key: \"activeEventData\",\n    value: function activeEventData(eventData, isMultiple) {\n      var _this15 = this;\n\n      var target = closest(eventData.target, '.' + APPOINTMENT_CLASS);\n      var guid = target.getAttribute('data-guid');\n\n      if (isMultiple) {\n        this.addSelectedAppointments([].slice.call(this.parent.element.querySelectorAll('div[data-guid=\"' + guid + '\"]')));\n        target.focus();\n      }\n\n      var eventObject = this.getEventByGuid(guid);\n\n      if (eventObject && eventObject.isSpanned) {\n        eventObject = this.parent.eventsData.filter(function (obj) {\n          return obj[_this15.parent.eventFields.id] === eventObject[_this15.parent.eventFields.id];\n        })[0];\n      }\n\n      this.parent.activeEventData = {\n        event: eventObject,\n        element: target\n      };\n    }\n  }, {\n    key: \"generateOccurrence\",\n    value: function generateOccurrence(event, viewDate, oldTimezone, isMaxCount) {\n      var startDate = event[this.parent.eventFields.startTime];\n      var endDate = event[this.parent.eventFields.endTime];\n      var eventRule = event[this.parent.eventFields.recurrenceRule];\n      var duration = endDate.getTime() - startDate.getTime();\n      viewDate = new Date((viewDate || this.parent.activeView.startDate()).getTime() - duration);\n      var exception = event[this.parent.eventFields.recurrenceException];\n      var maxCount;\n\n      if (this.parent.currentView !== 'Agenda' && isMaxCount) {\n        maxCount = getDateCount(this.parent.activeView.startDate(), this.parent.activeView.endDate()) + 1;\n      }\n\n      var newTimezone = this.parent.timezone || this.parent.tzModule.getLocalTimezoneName();\n      var firstDay = this.parent.activeViewOptions.firstDayOfWeek;\n      var calendarMode = this.parent.calendarMode;\n      var dates = generate(startDate, eventRule, exception, firstDay, maxCount, viewDate, calendarMode, oldTimezone, newTimezone);\n\n      if (this.parent.currentView === 'Agenda' && eventRule.indexOf('COUNT') === -1 && eventRule.indexOf('UNTIL') === -1) {\n        if (isNullOrUndefined(event.generatedDates)) {\n          event.generatedDates = {\n            start: new Date(dates[0]),\n            end: new Date(dates[dates.length - 1])\n          };\n        } else {\n          if (dates[0] < event.generatedDates.start.getTime()) {\n            event.generatedDates.start = new Date(dates[0]);\n          }\n\n          if (dates[dates.length - 1] > event.generatedDates.end.getTime()) {\n            event.generatedDates.end = new Date(dates[dates.length - 1]);\n          }\n        }\n      }\n\n      var occurrenceCollection = [];\n\n      var _iterator16 = _createForOfIteratorHelper(dates),\n          _step16;\n\n      try {\n        for (_iterator16.s(); !(_step16 = _iterator16.n()).done;) {\n          var date = _step16.value;\n          var clonedObject = extend({}, event, null, true);\n          clonedObject[this.parent.eventFields.startTime] = new Date(date);\n          clonedObject[this.parent.eventFields.endTime] = new Date(new Date(date).setMilliseconds(duration));\n          clonedObject[this.parent.eventFields.recurrenceID] = clonedObject[this.parent.eventFields.id];\n          delete clonedObject[this.parent.eventFields.recurrenceException];\n          delete clonedObject[this.parent.eventFields.followingID];\n          clonedObject.Guid = this.generateGuid();\n          occurrenceCollection.push(clonedObject);\n        }\n      } catch (err) {\n        _iterator16.e(err);\n      } finally {\n        _iterator16.f();\n      }\n\n      return occurrenceCollection;\n    }\n  }, {\n    key: \"getParentEvent\",\n    value: function getParentEvent(eventObj) {\n      var isParent = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : false;\n      var parentEvent;\n\n      do {\n        eventObj = this.getFollowingEvent(eventObj);\n\n        if (eventObj) {\n          parentEvent = extend({}, eventObj, null, true);\n        }\n      } while (eventObj && isParent);\n\n      if (isParent && parentEvent) {\n        var collection = this.getEventCollections(parentEvent);\n        var followObj = collection.follow.slice(-1)[0];\n\n        if (collection.occurrence.length > 0 && !parentEvent[this.parent.eventFields.recurrenceException]) {\n          followObj = collection.occurrence.slice(-1)[0];\n        }\n\n        if (followObj) {\n          parentEvent[this.parent.eventFields.recurrenceRule] = followObj[this.parent.eventFields.recurrenceRule];\n        }\n      }\n\n      return parentEvent;\n    }\n  }, {\n    key: \"getEventCollections\",\n    value: function getEventCollections(parentObj, childObj) {\n      var followingCollection = [];\n      var occurrenceCollection = [];\n      var followingEvent = parentObj;\n\n      do {\n        followingEvent = this.getFollowingEvent(followingEvent, true);\n\n        if (followingEvent) {\n          followingCollection.push(followingEvent);\n        }\n\n        occurrenceCollection = occurrenceCollection.concat(this.getOccurrenceEvent(followingEvent || parentObj));\n      } while (followingEvent);\n\n      var collections = {};\n\n      if (childObj) {\n        var fields = this.parent.eventFields;\n        collections = {\n          follow: followingCollection.filter(function (eventData) {\n            return eventData[fields.startTime] >= childObj[fields.startTime];\n          }),\n          occurrence: occurrenceCollection.filter(function (eventData) {\n            return eventData[fields.startTime] >= childObj[fields.startTime];\n          })\n        };\n      } else {\n        collections = {\n          follow: followingCollection,\n          occurrence: occurrenceCollection\n        };\n      }\n\n      return collections;\n    }\n  }, {\n    key: \"getFollowingEvent\",\n    value: function getFollowingEvent(parentObj, isReverse) {\n      var fields = this.parent.eventFields;\n      var fieldValue;\n\n      if (isReverse) {\n        fieldValue = parentObj[fields.id];\n      } else {\n        fieldValue = parentObj[fields.recurrenceID] || parentObj[fields.followingID];\n      }\n\n      var parentApp = this.parent.eventsData.filter(function (data) {\n        return data[isReverse ? fields.followingID : fields.id] === fieldValue;\n      });\n      return parentApp.shift();\n    }\n  }, {\n    key: \"isFollowingEvent\",\n    value: function isFollowingEvent(parentObj, childObj) {\n      var parentStart = parentObj[this.parent.eventFields.startTime];\n      var childStart = childObj[this.parent.eventFields.startTime];\n      return parentStart.getHours() === childStart.getHours() && parentStart.getMinutes() === childStart.getMinutes() && parentStart.getSeconds() === childStart.getSeconds();\n    }\n  }, {\n    key: \"getOccurrenceEvent\",\n    value: function getOccurrenceEvent(eventObj) {\n      var isGuid = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : false;\n      var isFollowing = arguments.length > 2 && arguments[2] !== undefined ? arguments[2] : false;\n      var idField = isGuid ? 'Guid' : isFollowing ? this.parent.eventFields.followingID : this.parent.eventFields.recurrenceID;\n      var fieldKey = isGuid ? 'Guid' : this.parent.eventFields.id;\n      var dataSource = isGuid ? this.parent.eventsProcessed : this.parent.eventsData;\n      return dataSource.filter(function (data) {\n        return data[idField] === eventObj[fieldKey];\n      });\n    }\n  }, {\n    key: \"getOccurrencesByID\",\n    value: function getOccurrencesByID(id) {\n      var fields = this.parent.eventFields;\n      var occurrenceCollection = [];\n      var parentObject = this.parent.eventsData.filter(function (obj) {\n        return obj[fields.id] === id;\n      });\n\n      var _iterator17 = _createForOfIteratorHelper(parentObject),\n          _step17;\n\n      try {\n        for (_iterator17.s(); !(_step17 = _iterator17.n()).done;) {\n          var event = _step17.value;\n\n          if (!isNullOrUndefined(event[fields.recurrenceRule])) {\n            occurrenceCollection = occurrenceCollection.concat(this.generateOccurrence(event));\n          }\n        }\n      } catch (err) {\n        _iterator17.e(err);\n      } finally {\n        _iterator17.f();\n      }\n\n      return occurrenceCollection;\n    }\n  }, {\n    key: \"getOccurrencesByRange\",\n    value: function getOccurrencesByRange(startTime, endTime) {\n      var fields = this.parent.eventFields;\n      var occurrenceCollection = [];\n\n      var _iterator18 = _createForOfIteratorHelper(this.parent.eventsData),\n          _step18;\n\n      try {\n        for (_iterator18.s(); !(_step18 = _iterator18.n()).done;) {\n          var event = _step18.value;\n\n          if (!isNullOrUndefined(event[fields.recurrenceRule])) {\n            occurrenceCollection = occurrenceCollection.concat(this.generateOccurrence(event));\n          }\n        }\n      } catch (err) {\n        _iterator18.e(err);\n      } finally {\n        _iterator18.f();\n      }\n\n      var filter = occurrenceCollection.filter(function (obj) {\n        return obj[fields.startTime] >= startTime && obj[fields.endTime] <= endTime && !isNullOrUndefined(obj[fields.recurrenceID]);\n      });\n      return filter;\n    }\n  }, {\n    key: \"getDeletedOccurrences\",\n    value: function getDeletedOccurrences(recurrenceData) {\n      var _this16 = this;\n\n      var fields = this.parent.eventFields;\n      var parentObject;\n      var deletedOccurrences = [];\n\n      if (typeof recurrenceData === 'string' || typeof recurrenceData === 'number') {\n        parentObject = this.parent.eventsData.filter(function (obj) {\n          return obj[fields.id] === recurrenceData;\n        })[0];\n      } else {\n        parentObject = extend({}, recurrenceData, null, true);\n      }\n\n      if (parentObject[fields.recurrenceException]) {\n        (function () {\n          var exDateString = parentObject[fields.recurrenceException].split(',');\n\n          var _loop3 = function _loop3(i, len) {\n            var edited = _this16.parent.eventsData.filter(function (eventObj) {\n              return eventObj[fields.recurrenceID] === parentObject[fields.id] && eventObj[fields.recurrenceException] === exDateString[i];\n            });\n\n            if (edited.length === 0) {\n              var exDate = getDateFromRecurrenceDateString(exDateString[i]);\n              var childObject = extend({}, recurrenceData, null, true);\n              childObject[fields.recurrenceID] = parentObject[fields.id];\n              delete childObject[fields.followingID];\n              childObject[fields.recurrenceException] = exDateString[i];\n              var startDate = new Date(exDate.getTime());\n              var time = parentObject[fields.endTime].getTime() - parentObject[fields.startTime].getTime();\n              var endDate = new Date(startDate.getTime());\n              endDate.setMilliseconds(time);\n              childObject[fields.startTime] = new Date(startDate.getTime());\n              childObject[fields.endTime] = new Date(endDate.getTime());\n              deletedOccurrences.push(childObject);\n            }\n          };\n\n          for (var i = 0, len = exDateString.length; i < len; i++) {\n            _loop3(i, len);\n          }\n        })();\n      }\n\n      return deletedOccurrences;\n    }\n  }, {\n    key: \"applyResourceColor\",\n    value: function applyResourceColor(element, data, type, index, alpha) {\n      if (!this.parent.resourceBase) {\n        return;\n      }\n\n      var alphaColor = function alphaColor(color, alpha) {\n        color = color.replace('#', '');\n        var r = parseInt(color.substring(0, color.length / 3), 16);\n        var g = parseInt(color.substring(color.length / 3, 2 * color.length / 3), 16);\n        var b = parseInt(color.substring(2 * color.length / 3, 3 * color.length / 3), 16);\n        return \"rgba(\".concat(r, \", \").concat(g, \", \").concat(b, \", \").concat(alpha, \")\");\n      }; // index refers groupOrder\n\n\n      var color = this.parent.resourceBase.getResourceColor(data, index);\n\n      if (color) {\n        element.style[type] = !isNullOrUndefined(alpha) ? alphaColor(color, alpha) : color;\n      }\n    }\n  }, {\n    key: \"createBlockAppointmentElement\",\n    value: function createBlockAppointmentElement(record, resIndex) {\n      var eventSubject = record[this.parent.eventFields.subject] || this.parent.eventSettings.fields.subject.default;\n      var appointmentWrapper = createElement('div', {\n        className: BLOCK_APPOINTMENT_CLASS,\n        attrs: {\n          'data-id': 'Appointment_' + record[this.parent.eventFields.id],\n          'aria-readonly': 'true',\n          'aria-selected': 'false'\n        }\n      });\n      var templateElement;\n\n      if (!isNullOrUndefined(this.parent.activeViewOptions.eventTemplate)) {\n        var scheduleId = this.parent.element.id + '_';\n        var viewName = this.parent.activeViewOptions.eventTemplateName;\n        var templateId = scheduleId + viewName + 'eventTemplate';\n        templateElement = this.parent.getAppointmentTemplate()(record, this.parent, 'eventTemplate', templateId, false);\n      } else {\n        var appointmentSubject = createElement('div', {\n          className: SUBJECT_CLASS,\n          innerHTML: eventSubject\n        });\n        templateElement = [appointmentSubject];\n      }\n\n      append(templateElement, appointmentWrapper);\n      this.setWrapperAttributes(appointmentWrapper, resIndex);\n      return appointmentWrapper;\n    }\n  }, {\n    key: \"setWrapperAttributes\",\n    value: function setWrapperAttributes(appointmentWrapper, resIndex) {\n      if (!isNullOrUndefined(this.cssClass)) {\n        addClass([appointmentWrapper], this.cssClass);\n      }\n\n      if (this.parent.activeViewOptions.group.resources.length > 0) {\n        appointmentWrapper.setAttribute('data-group-index', resIndex.toString());\n      }\n    }\n  }, {\n    key: \"getReadonlyAttribute\",\n    value: function getReadonlyAttribute(event) {\n      return (event[this.parent.eventFields.isReadonly] || this.parent.readonly).toString();\n    }\n  }, {\n    key: \"isBlockRange\",\n    value: function isBlockRange(eventData) {\n      var eventCollection = eventData instanceof Array ? eventData : [eventData];\n      var isBlockAlert = false;\n      var fields = this.parent.eventFields;\n\n      var _iterator19 = _createForOfIteratorHelper(eventCollection),\n          _step19;\n\n      try {\n        for (_iterator19.s(); !(_step19 = _iterator19.n()).done;) {\n          var event = _step19.value;\n          var dataCol = [];\n\n          if (!isNullOrUndefined(event[fields.recurrenceRule]) && (isNullOrUndefined(event[fields.recurrenceID]) || event[fields.id] === event[fields.recurrenceID])) {\n            dataCol = this.generateOccurrence(event);\n          } else {\n            dataCol.push(event);\n          }\n\n          var _iterator20 = _createForOfIteratorHelper(dataCol),\n              _step20;\n\n          try {\n            for (_iterator20.s(); !(_step20 = _iterator20.n()).done;) {\n              var data = _step20.value;\n              var filterBlockEvents = this.filterBlockEvents(data);\n\n              if (filterBlockEvents.length > 0) {\n                isBlockAlert = true;\n                break;\n              }\n            }\n          } catch (err) {\n            _iterator20.e(err);\n          } finally {\n            _iterator20.f();\n          }\n        }\n      } catch (err) {\n        _iterator19.e(err);\n      } finally {\n        _iterator19.f();\n      }\n\n      this.parent.uiStateValues.isBlock = isBlockAlert;\n      return isBlockAlert;\n    }\n  }, {\n    key: \"getFilterEventsList\",\n    value: function getFilterEventsList(dataSource, query) {\n      return new DataManager(dataSource).executeLocal(new Query().where(query));\n    }\n  }, {\n    key: \"getSeriesEvents\",\n    value: function getSeriesEvents(parentEvent, startTime) {\n      var fields = this.parent.eventFields;\n      startTime = isNullOrUndefined(startTime) ? parentEvent[fields.startTime] : startTime;\n      var deleteFutureEditEvents;\n      var futureEvents;\n      var deleteFutureEditEventList = [];\n      var delId = parentEvent[fields.id];\n      var followingId = parentEvent[fields.followingID];\n      var deleteFutureEvent;\n      var startTimeQuery = this.parent.currentAction === 'EditSeries' ? 'greaterthan' : 'greaterthanorequal';\n\n      do {\n        deleteFutureEvent = new Predicate(fields.followingID, 'equal', delId).and(new Predicate(fields.startTime, startTimeQuery, startTime));\n        futureEvents = this.getFilterEventsList(this.parent.eventsData, deleteFutureEvent);\n        deleteFutureEditEvents = futureEvents.slice(-1)[0];\n\n        if (!isNullOrUndefined(deleteFutureEditEvents) && deleteFutureEditEvents[fields.id] !== followingId) {\n          deleteFutureEditEventList.push(deleteFutureEditEvents);\n          delId = deleteFutureEditEvents[fields.id];\n          followingId = deleteFutureEditEvents[fields.followingID];\n        } else {\n          followingId = null;\n        }\n      } while (futureEvents.length === 1 && !isNullOrUndefined(deleteFutureEditEvents[fields.followingID]));\n\n      return deleteFutureEditEventList;\n    }\n  }, {\n    key: \"getEditedOccurrences\",\n    value: function getEditedOccurrences(deleteFutureEditEventList, startTime) {\n      var fields = this.parent.eventFields;\n      var deleteRecurrenceEventList = [];\n      var delEditedEvents;\n\n      var _iterator21 = _createForOfIteratorHelper(deleteFutureEditEventList),\n          _step21;\n\n      try {\n        for (_iterator21.s(); !(_step21 = _iterator21.n()).done;) {\n          var event = _step21.value;\n          var delEventQuery = new Predicate(fields.recurrenceID, 'equal', event[fields.id]).or(new Predicate(fields.recurrenceID, 'equal', event[fields.followingID]).and(new Predicate(fields.recurrenceID, 'notequal', undefined)).and(new Predicate(fields.recurrenceID, 'notequal', null)));\n\n          if (this.parent.currentAction === 'EditFollowingEvents' || this.parent.currentAction === 'DeleteFollowingEvents') {\n            delEventQuery = delEventQuery.and(new Predicate(fields.startTime, 'greaterthanorequal', startTime));\n          }\n\n          delEditedEvents = this.getFilterEventsList(this.parent.eventsData, delEventQuery);\n          deleteRecurrenceEventList = deleteRecurrenceEventList.concat(delEditedEvents);\n        }\n      } catch (err) {\n        _iterator21.e(err);\n      } finally {\n        _iterator21.f();\n      }\n\n      return deleteRecurrenceEventList;\n    }\n  }, {\n    key: \"getRenderedDates\",\n    value: function getRenderedDates(dateRender) {\n      var firstDate = 0;\n      var lastDate = dateRender.length;\n      var filteredDates;\n\n      if (dateRender[0] < this.parent.minDate && dateRender[dateRender.length - 1] > this.parent.maxDate) {\n        for (var i = 0; i < dateRender.length; i++) {\n          if (resetTime(dateRender[i]).getTime() === resetTime(new Date(this.parent.minDate)).getTime()) {\n            firstDate = i;\n          }\n\n          if (resetTime(dateRender[i]).getTime() === resetTime(new Date(this.parent.maxDate)).getTime()) {\n            lastDate = i;\n          }\n        }\n\n        filteredDates = dateRender.filter(function (date) {\n          return date >= dateRender[firstDate] && date <= dateRender[lastDate];\n        });\n      }\n\n      return filteredDates;\n    }\n  }, {\n    key: \"isValidEvent\",\n    value: function isValidEvent(eventObj, start, end, schedule) {\n      var isHourRange = end.getTime() > schedule.startHour.getTime() && start.getTime() < schedule.endHour.getTime();\n      var isSameRange = schedule.startHour.getTime() <= start.getTime() && eventObj[this.parent.eventFields.startTime].getTime() >= schedule.startHour.getTime() && eventObj[this.parent.eventFields.endTime].getTime() < schedule.endHour.getTime() && start.getTime() === end.getTime();\n      return isHourRange || isSameRange;\n    }\n  }, {\n    key: \"allDayExpandScroll\",\n    value: function allDayExpandScroll(dateHeader, heightPropChanged) {\n      var indentHeight = 0;\n      var headerRows = [].slice.call(this.parent.element.querySelectorAll('.' + HEADER_ROW_CLASS));\n      headerRows.forEach(function (element) {\n        var tdEle = [].slice.call(element.children);\n        tdEle.forEach(function (ele) {\n          ele.style.top = indentHeight + 'px';\n        });\n        indentHeight += element.offsetHeight;\n      });\n      indentHeight = dateHeader.offsetHeight - indentHeight;\n      this.parent.element.querySelector('.' + ALLDAY_CELLS_CLASS).style.height = indentHeight / 12 + 'em';\n      var content = this.parent.element.querySelector('.' + CONTENT_WRAP_CLASS);\n\n      if (this.parent.uiStateValues.expand && (content.offsetWidth - content.clientWidth > 0 || heightPropChanged)) {\n        addClass([dateHeader], ALLDAY_APPOINTMENT_SCROLL);\n      } else {\n        removeClass([dateHeader], ALLDAY_APPOINTMENT_SCROLL);\n      }\n    }\n  }, {\n    key: \"unWireEvents\",\n    value: function unWireEvents() {\n      var appElements = [].slice.call(this.parent.element.querySelectorAll('.' + APPOINTMENT_CLASS));\n\n      var _iterator22 = _createForOfIteratorHelper(appElements),\n          _step22;\n\n      try {\n        for (_iterator22.s(); !(_step22 = _iterator22.n()).done;) {\n          var element = _step22.value;\n          EventHandler.clearEvents(element);\n        }\n      } catch (err) {\n        _iterator22.e(err);\n      } finally {\n        _iterator22.f();\n      }\n    }\n  }, {\n    key: \"destroy\",\n    value: function destroy() {\n      this.unWireEvents();\n      this.parent = null;\n    }\n  }]);\n\n  return EventBase;\n}();\n/* eslint-disable @typescript-eslint/no-explicit-any */\n\n/**\n * Vertical view appointment rendering\n */\n\n\nvar VerticalEvent = /*#__PURE__*/function (_EventBase) {\n  _inherits(VerticalEvent, _EventBase);\n\n  var _super = _createSuper(VerticalEvent);\n\n  function VerticalEvent(parent) {\n    var _this17;\n\n    _classCallCheck(this, VerticalEvent);\n\n    _this17 = _super.call(this, parent);\n    _this17.dateRender = [];\n    _this17.renderedEvents = [];\n    _this17.renderedAllDayEvents = [];\n    _this17.overlapEvents = [];\n    _this17.moreEvents = [];\n    _this17.overlapList = [];\n    _this17.allDayEvents = [];\n    _this17.slotCount = _this17.parent.activeViewOptions.timeScale.slotCount;\n    _this17.interval = _this17.parent.activeViewOptions.timeScale.interval;\n    _this17.allDayLevel = 0;\n    _this17.startHour = _this17.parent.activeView.getStartHour();\n    _this17.endHour = _this17.parent.activeView.getEndHour();\n    _this17.element = _this17.parent.activeView.getPanel();\n    _this17.fields = _this17.parent.eventFields;\n    _this17.animation = new Animation({\n      progress: _this17.animationUiUpdate.bind(_assertThisInitialized(_this17))\n    });\n\n    _this17.addEventListener();\n\n    return _this17;\n  }\n\n  _createClass(VerticalEvent, [{\n    key: \"renderAppointments\",\n    value: function renderAppointments() {\n      if (isNullOrUndefined(this.parent)) {\n        return;\n      }\n\n      if (this.parent.dragAndDropModule) {\n        this.parent.dragAndDropModule.setDragArea();\n      }\n\n      var wrapperElements = [].slice.call(this.parent.element.querySelectorAll('.' + BLOCK_APPOINTMENT_CLASS + ',.' + APPOINTMENT_CLASS + ',.' + ROW_COUNT_WRAPPER_CLASS));\n      var isDragging = this.parent.crudModule && this.parent.crudModule.crudObj.isCrudAction ? true : false;\n\n      var _iterator23 = _createForOfIteratorHelper(wrapperElements),\n          _step23;\n\n      try {\n        for (_iterator23.s(); !(_step23 = _iterator23.n()).done;) {\n          var wrapper = _step23.value;\n\n          if (isDragging && !(wrapper.classList.contains(ALLDAY_APPOINTMENT_CLASS) || wrapper.classList.contains(ROW_COUNT_WRAPPER_CLASS))) {\n            var groupIndex = parseInt(wrapper.getAttribute('data-group-index'), 10);\n\n            for (var j = 0, len = this.parent.crudModule.crudObj.sourceEvent.length; j < len; j++) {\n              if (groupIndex === this.parent.crudModule.crudObj.sourceEvent[j].groupIndex || groupIndex === this.parent.crudModule.crudObj.targetEvent[j].groupIndex) {\n                remove(wrapper);\n              }\n            }\n          } else {\n            remove(wrapper);\n          }\n        }\n      } catch (err) {\n        _iterator23.e(err);\n      } finally {\n        _iterator23.f();\n      }\n\n      if (!this.element.querySelector('.' + WORK_CELLS_CLASS)) {\n        return;\n      }\n\n      this.allDayElement = [].slice.call(this.element.querySelectorAll('.' + ALLDAY_CELLS_CLASS));\n      this.setAllDayRowHeight(0);\n\n      if (this.parent.eventsProcessed.length === 0 && this.parent.blockProcessed.length === 0) {\n        return;\n      }\n\n      var expandCollapse = this.element.querySelector('.' + ALLDAY_APPOINTMENT_SECTION_CLASS);\n      EventHandler.remove(expandCollapse, 'click', this.rowExpandCollapse);\n      EventHandler.add(expandCollapse, 'click', this.rowExpandCollapse, this);\n      this.renderedEvents = [];\n      this.renderedAllDayEvents = [];\n      this.initializeValues();\n      this.processBlockEvents();\n      this.renderEvents('normalEvents');\n\n      if (this.allDayEvents.length > 0) {\n        this.allDayEvents = this.allDayEvents.filter(function (item, index, arr) {\n          return index === arr.map(function (item) {\n            return item.Guid;\n          }).indexOf(item.Guid);\n        });\n        removeClass(this.allDayElement, ALLDAY_ROW_ANIMATE_CLASS);\n        this.slots.push(this.parent.activeView.renderDates.map(function (date) {\n          return +date;\n        }));\n        this.renderEvents('allDayEvents');\n      }\n\n      this.parent.notify(contentReady, {});\n      addClass(this.allDayElement, ALLDAY_ROW_ANIMATE_CLASS);\n\n      if (isDragging) {\n        this.parent.crudModule.crudObj.isCrudAction = false;\n      }\n\n      this.parent.renderTemplates();\n    }\n  }, {\n    key: \"initializeValues\",\n    value: function initializeValues() {\n      this.resources = this.parent.activeViewOptions.group.resources.length > 0 ? this.parent.uiStateValues.isGroupAdaptive ? [this.parent.resourceBase.lastResourceLevel[this.parent.uiStateValues.groupIndex]] : this.parent.resourceBase.lastResourceLevel : [];\n      this.cellHeight = parseFloat(this.parent.element.querySelector('.e-content-wrap tbody tr').getBoundingClientRect().height.toFixed(2));\n      this.dateRender[0] = this.parent.activeView.renderDates;\n\n      if (this.parent.activeViewOptions.group.resources.length > 0) {\n        for (var i = 0, len = this.resources.length; i < len; i++) {\n          this.dateRender[i] = this.resources[i].renderDates;\n        }\n      }\n    }\n  }, {\n    key: \"getHeight\",\n    value: function getHeight(start, end) {\n      var appHeight = (getUniversalTime(end) - getUniversalTime(start)) / MS_PER_MINUTE * (this.cellHeight * this.slotCount) / this.interval;\n      appHeight = appHeight <= 0 ? this.cellHeight : appHeight;\n      return appHeight;\n    }\n  }, {\n    key: \"appendEvent\",\n    value: function appendEvent(eventObj, appointmentElement, index, appLeft) {\n      var appointmentWrap = [].slice.call(this.element.querySelectorAll('.' + APPOINTMENT_WRAPPER_CLASS));\n\n      if (this.parent.enableRtl) {\n        setStyleAttribute(appointmentElement, {\n          'right': appLeft\n        });\n      } else {\n        setStyleAttribute(appointmentElement, {\n          'left': appLeft\n        });\n      }\n\n      var eventType = appointmentElement.classList.contains(BLOCK_APPOINTMENT_CLASS) ? 'blockEvent' : 'event';\n      var args = {\n        data: extend({}, eventObj, null, true),\n        element: appointmentElement,\n        cancel: false,\n        type: eventType\n      };\n      this.parent.trigger(eventRendered, args, function (eventArgs) {\n        if (!eventArgs.cancel) {\n          appointmentWrap[index].appendChild(appointmentElement);\n        }\n      });\n    }\n  }, {\n    key: \"processBlockEvents\",\n    value: function processBlockEvents() {\n      var resources = this.getResourceList();\n      var dateCount = 0;\n\n      var _iterator24 = _createForOfIteratorHelper(resources),\n          _step24;\n\n      try {\n        for (_iterator24.s(); !(_step24 = _iterator24.n()).done;) {\n          var resource = _step24.value;\n          var renderDates = this.dateRender[resource];\n\n          for (var day = 0, length = renderDates.length; day < length; day++) {\n            var startDate = new Date(renderDates[day].getTime());\n            var endDate = addDays(renderDates[day], 1);\n            var filterEvents = this.filterEvents(startDate, endDate, this.parent.blockProcessed, this.resources[resource]);\n\n            var _iterator25 = _createForOfIteratorHelper(filterEvents),\n                _step25;\n\n            try {\n              for (_iterator25.s(); !(_step25 = _iterator25.n()).done;) {\n                var event = _step25.value;\n\n                if (this.parent.resourceBase) {\n                  this.setValues(event, resource);\n                }\n\n                this.renderBlockEvents(event, day, resource, dateCount);\n                this.cssClass = null;\n                this.groupOrder = null;\n              }\n            } catch (err) {\n              _iterator25.e(err);\n            } finally {\n              _iterator25.f();\n            }\n\n            dateCount += 1;\n          }\n        }\n      } catch (err) {\n        _iterator24.e(err);\n      } finally {\n        _iterator24.f();\n      }\n    }\n  }, {\n    key: \"renderBlockEvents\",\n    value: function renderBlockEvents(eventObj, dayIndex, resource, dayCount) {\n      var spannedData = this.isSpannedEvent(eventObj, dayIndex, resource);\n      var eStart = spannedData[this.fields.startTime];\n      var eEnd = spannedData[this.fields.endTime];\n      var currentDate = resetTime(new Date(this.dateRender[resource][dayIndex].getTime()));\n      var schedule = getStartEndHours(currentDate, this.startHour, this.endHour);\n\n      if (eStart <= eEnd && this.isValidEvent(eventObj, eStart, eEnd, schedule)) {\n        var blockTop;\n        var blockHeight;\n\n        if (spannedData[this.fields.isAllDay]) {\n          var contentWrap = this.parent.element.querySelector('.' + CONTENT_WRAP_CLASS + ' table');\n          blockHeight = formatUnit(contentWrap.offsetHeight);\n          blockTop = formatUnit(0);\n        } else {\n          blockHeight = formatUnit(this.getHeight(eStart, eEnd));\n          blockTop = formatUnit(this.getTopValue(eStart, dayIndex, resource));\n        }\n\n        var appointmentElement = this.createBlockAppointmentElement(eventObj, resource);\n        setStyleAttribute(appointmentElement, {\n          'width': '100%',\n          'height': blockHeight,\n          'top': blockTop\n        });\n        var index = this.parent.activeViewOptions.group.byDate ? this.resources.length * dayIndex + resource : dayCount;\n        this.appendEvent(eventObj, appointmentElement, index, '0px');\n      }\n    }\n  }, {\n    key: \"renderEvents\",\n    value: function renderEvents(eventType) {\n      var _this18 = this;\n\n      removeClass(this.allDayElement, ALLDAY_ROW_ANIMATE_CLASS);\n      var eventCollection = eventType === 'allDayEvents' ? this.sortByDateTime(this.allDayEvents) : undefined;\n      var resources = this.getResourceList();\n      var dateCount = 0;\n      var isRender;\n\n      var _iterator26 = _createForOfIteratorHelper(resources),\n          _step26;\n\n      try {\n        var _loop4 = function _loop4() {\n          var resource = _step26.value;\n          isRender = true;\n\n          if (_this18.parent.crudModule && _this18.parent.crudModule.crudObj.isCrudAction && eventType !== 'allDayEvents' && !_this18.parent.uiStateValues.isGroupAdaptive) {\n            if (_this18.parent.crudModule.crudObj.sourceEvent.filter(function (data) {\n              return data.groupIndex === resource;\n            }).length === 0 && _this18.parent.crudModule.crudObj.targetEvent.filter(function (data) {\n              return data.groupIndex === resource;\n            }).length === 0) {\n              isRender = false;\n            }\n          }\n\n          _this18.slots = [];\n          var renderDates = _this18.dateRender[resource];\n          var renderedDate = _this18.getRenderedDates(renderDates) || renderDates;\n\n          _this18.slots.push(renderDates.map(function (date) {\n            return +date;\n          }));\n\n          for (var day = 0, length = renderDates.length; day < length && renderDates[day] <= renderedDate[renderedDate.length - 1]; day++) {\n            _this18.renderedEvents = [];\n            var startDate = new Date(renderDates[day].getTime());\n            var endDate = addDays(renderDates[day], 1);\n\n            var filterEvents = _this18.filterEvents(startDate, endDate, eventCollection, _this18.resources[resource]);\n\n            if (isRender) {\n              var _iterator27 = _createForOfIteratorHelper(filterEvents),\n                  _step27;\n\n              try {\n                for (_iterator27.s(); !(_step27 = _iterator27.n()).done;) {\n                  var event = _step27.value;\n\n                  if (_this18.parent.resourceBase) {\n                    _this18.setValues(event, resource);\n                  }\n\n                  if (eventType === 'allDayEvents') {\n                    _this18.renderAllDayEvents(event, day, resource, dateCount);\n                  } else {\n                    if (_this18.isAllDayAppointment(event)) {\n                      _this18.allDayEvents.push(extend({}, event, null, true));\n                    } else {\n                      if (_this18.parent.eventSettings.enableMaxHeight) {\n                        if (_this18.getOverlapIndex(event, day, false, resource) > 0) {\n                          continue;\n                        }\n                      }\n\n                      _this18.renderNormalEvents(event, day, resource, dateCount);\n                    }\n                  }\n\n                  _this18.cssClass = null;\n                  _this18.groupOrder = null;\n                }\n              } catch (err) {\n                _iterator27.e(err);\n              } finally {\n                _iterator27.f();\n              }\n            } else {\n              var _iterator28 = _createForOfIteratorHelper(filterEvents),\n                  _step28;\n\n              try {\n                for (_iterator28.s(); !(_step28 = _iterator28.n()).done;) {\n                  var _event = _step28.value;\n\n                  if (_this18.isAllDayAppointment(_event)) {\n                    _this18.allDayEvents.push(extend({}, _event, null, true));\n                  }\n                }\n              } catch (err) {\n                _iterator28.e(err);\n              } finally {\n                _iterator28.f();\n              }\n            }\n\n            dateCount += 1;\n          }\n        };\n\n        for (_iterator26.s(); !(_step26 = _iterator26.n()).done;) {\n          _loop4();\n        }\n      } catch (err) {\n        _iterator26.e(err);\n      } finally {\n        _iterator26.f();\n      }\n    }\n  }, {\n    key: \"setValues\",\n    value: function setValues(event, resourceIndex) {\n      if (this.parent.activeViewOptions.group.resources.length > 0) {\n        this.cssClass = this.resources[resourceIndex].cssClass;\n        this.groupOrder = this.resources[resourceIndex].groupOrder;\n      } else {\n        this.cssClass = this.parent.resourceBase.getCssClass(event);\n      }\n    }\n  }, {\n    key: \"getResourceList\",\n    value: function getResourceList() {\n      // eslint-disable-next-line prefer-spread\n      var resources = Array.apply(null, {\n        length: this.parent.activeViewOptions.group.resources.length > 0 && !this.parent.uiStateValues.isGroupAdaptive ? this.resources.length : 1\n      }).map(function (value, index) {\n        return index;\n      });\n      return resources;\n    } // eslint-disable-next-line max-len\n\n  }, {\n    key: \"createAppointmentElement\",\n    value: function createAppointmentElement(record, isAllDay, data, resource) {\n      var fieldMapping = this.parent.eventFields;\n      var recordSubject = record[fieldMapping.subject] || this.parent.eventSettings.fields.subject.default || this.parent.localeObj.getConstant('addTitle');\n      var appointmentWrapper = createElement('div', {\n        className: APPOINTMENT_CLASS,\n        attrs: {\n          'data-id': 'Appointment_' + record[fieldMapping.id],\n          'data-guid': record.Guid,\n          'role': 'button',\n          'tabindex': '0',\n          'aria-readonly': this.parent.eventBase.getReadonlyAttribute(record),\n          'aria-selected': 'false',\n          'aria-grabbed': 'true',\n          'aria-label': this.parent.getAnnouncementString(record)\n        }\n      });\n\n      if (record[this.fields.isReadonly]) {\n        addClass([appointmentWrapper], 'e-read-only');\n      }\n\n      var appointmentDetails = createElement('div', {\n        className: APPOINTMENT_DETAILS\n      });\n      appointmentWrapper.appendChild(appointmentDetails);\n\n      if (this.parent.activeViewOptions.group.resources.length > 0) {\n        var resourceIndex = this.parent.uiStateValues.isGroupAdaptive ? this.parent.uiStateValues.groupIndex : resource;\n        appointmentWrapper.setAttribute('data-group-index', resourceIndex.toString());\n      }\n\n      var templateElement;\n      var eventData = data;\n\n      if (!isNullOrUndefined(this.parent.activeViewOptions.eventTemplate)) {\n        var elementId = this.parent.element.id + '_';\n        var viewName = this.parent.activeViewOptions.eventTemplateName;\n        var templateId = elementId + viewName + 'eventTemplate';\n        templateElement = this.parent.getAppointmentTemplate()(record, this.parent, 'eventTemplate', templateId, false);\n      } else {\n        var appointmentSubject = createElement('div', {\n          className: SUBJECT_CLASS,\n          innerHTML: recordSubject\n        });\n\n        if (isAllDay) {\n          if (record[fieldMapping.isAllDay]) {\n            templateElement = [appointmentSubject];\n          } else {\n            templateElement = [];\n            var appointmentStartTime = createElement('div', {\n              className: APPOINTMENT_TIME + (this.parent.isAdaptive ? ' ' + DISABLE_CLASS : ''),\n              innerHTML: this.parent.getTimeString(record[fieldMapping.startTime])\n            });\n            var appointmentEndTime = createElement('div', {\n              className: APPOINTMENT_TIME + (this.parent.isAdaptive ? ' ' + DISABLE_CLASS : ''),\n              innerHTML: this.parent.getTimeString(record[fieldMapping.endTime])\n            });\n            addClass([appointmentSubject], 'e-text-center');\n\n            if (!eventData.isLeft) {\n              templateElement.push(appointmentStartTime);\n            }\n\n            templateElement.push(appointmentSubject);\n\n            if (!eventData.isRight) {\n              templateElement.push(appointmentEndTime);\n            }\n          }\n        } else {\n          var timeStr = this.parent.getTimeString(record[fieldMapping.startTime]) + ' - ' + this.parent.getTimeString(record[fieldMapping.endTime]);\n          var appointmentTime = createElement('div', {\n            className: APPOINTMENT_TIME + (this.parent.isAdaptive ? ' ' + DISABLE_CLASS : ''),\n            innerHTML: timeStr\n          });\n          var appointmentLocation = createElement('div', {\n            className: LOCATION_CLASS,\n            innerHTML: record[fieldMapping.location] || this.parent.eventSettings.fields.location.default || ''\n          });\n          templateElement = [appointmentSubject, appointmentTime, appointmentLocation];\n        }\n      }\n\n      append(templateElement, appointmentDetails);\n\n      if (!this.parent.isAdaptive && (!isNullOrUndefined(record[fieldMapping.recurrenceRule]) || !isNullOrUndefined(record[fieldMapping.recurrenceID]))) {\n        var iconClass = record[fieldMapping.id] === record[fieldMapping.recurrenceID] ? EVENT_RECURRENCE_ICON_CLASS : EVENT_RECURRENCE_EDIT_ICON_CLASS;\n        var recurrenceIcon = createElement('div', {\n          className: ICON + ' ' + iconClass\n        });\n\n        if (isAllDay) {\n          appointmentDetails.appendChild(recurrenceIcon);\n        } else {\n          appointmentWrapper.appendChild(recurrenceIcon);\n        }\n      }\n\n      this.renderSpannedIcon(isAllDay ? appointmentDetails : appointmentWrapper, eventData);\n\n      if (!isNullOrUndefined(this.cssClass)) {\n        addClass([appointmentWrapper], this.cssClass);\n      }\n\n      this.applyResourceColor(appointmentWrapper, record, 'backgroundColor', this.groupOrder);\n      this.renderResizeHandler(appointmentWrapper, eventData, record[this.fields.isReadonly]);\n      return appointmentWrapper;\n    }\n  }, {\n    key: \"createMoreIndicator\",\n    value: function createMoreIndicator(allDayRow, count, currentDay) {\n      var index = currentDay + count;\n      var countWrapper = allDayRow[index];\n\n      if (countWrapper.childElementCount <= 0) {\n        var innerCountWrap = createElement('div', {\n          className: ROW_COUNT_WRAPPER_CLASS,\n          id: ROW_COUNT_WRAPPER_CLASS + '-' + index.toString()\n        });\n        var moreIndicatorElement = createElement('div', {\n          className: MORE_INDICATOR_CLASS,\n          attrs: {\n            'tabindex': '0',\n            'role': 'list',\n            'data-index': index.toString(),\n            'data-count': '1'\n          },\n          innerHTML: '+1&nbsp;' + (this.parent.isAdaptive ? '' : this.parent.localeObj.getConstant('more'))\n        });\n        innerCountWrap.appendChild(moreIndicatorElement);\n        countWrapper.appendChild(innerCountWrap);\n        EventHandler.add(moreIndicatorElement, 'click', this.rowExpandCollapse, this);\n      } else {\n        var countCell = countWrapper.querySelector('.' + MORE_INDICATOR_CLASS);\n        var moreCount = parseInt(countCell.getAttribute('data-count'), 10) + 1;\n        countCell.setAttribute('data-count', moreCount.toString());\n        countCell.innerHTML = '+' + this.parent.globalize.formatNumber(moreCount) + '&nbsp;' + (this.parent.isAdaptive ? '' : this.parent.localeObj.getConstant('more'));\n      }\n    }\n  }, {\n    key: \"renderSpannedIcon\",\n    value: function renderSpannedIcon(element, spanEvent) {\n      var iconElement = createElement('div', {\n        className: EVENT_INDICATOR_CLASS + ' ' + ICON\n      });\n\n      if (spanEvent.isLeft) {\n        var iconLeft = iconElement.cloneNode();\n        addClass([iconLeft], EVENT_ICON_LEFT_CLASS);\n        prepend([iconLeft], element);\n      }\n\n      if (spanEvent.isRight) {\n        var iconRight = iconElement.cloneNode();\n        addClass([iconRight], EVENT_ICON_RIGHT_CLASS);\n        append([iconRight], element);\n      }\n\n      if (spanEvent.isTop) {\n        var iconTop = iconElement.cloneNode();\n        addClass([iconTop], EVENT_ICON_UP_CLASS);\n        prepend([iconTop], element);\n      }\n\n      if (spanEvent.isBottom) {\n        var iconBottom = iconElement.cloneNode();\n        addClass([iconBottom], EVENT_ICON_DOWN_CLASS);\n        append([iconBottom], element);\n      }\n    }\n  }, {\n    key: \"isSpannedEvent\",\n    value: function isSpannedEvent(record, day, resource) {\n      var currentDate = resetTime(this.dateRender[resource][day]);\n      var renderedDate = this.getRenderedDates(this.dateRender[resource]) || [currentDate];\n      var currentDay = renderedDate.filter(function (date) {\n        return date.getDay() === day;\n      });\n\n      if (currentDay.length === 0) {\n        currentDate = resetTime(renderedDate[0]);\n      }\n\n      var fieldMapping = this.parent.eventFields;\n      var startEndHours = getStartEndHours(currentDate, this.startHour, this.endHour);\n      var event = extend({}, record, null, true);\n      event.isSpanned = {\n        isBottom: false,\n        isTop: false\n      };\n\n      if (record[fieldMapping.startTime].getTime() < startEndHours.startHour.getTime()) {\n        event[fieldMapping.startTime] = startEndHours.startHour;\n        event.isSpanned.isTop = true;\n      }\n\n      if (record[fieldMapping.endTime].getTime() > startEndHours.endHour.getTime()) {\n        event[fieldMapping.endTime] = startEndHours.endHour;\n        event.isSpanned.isBottom = true;\n      }\n\n      return event;\n    }\n  }, {\n    key: \"renderAllDayEvents\",\n    value: function renderAllDayEvents(eventObj, dayIndex, resource, dayCount, inline) {\n      var _this19 = this;\n\n      var currentDates = this.getRenderedDates(this.dateRender[resource]) || this.dateRender[resource];\n\n      if (this.parent.activeViewOptions.group.byDate) {\n        this.slots[0] = [this.dateRender[resource][dayIndex].getTime()];\n        currentDates = [this.dateRender[resource][dayIndex]];\n      }\n\n      var record = this.splitEvent(eventObj, currentDates)[0];\n      var allDayRowCell = this.element.querySelector('.' + ALLDAY_CELLS_CLASS + ':first-child');\n      var cellTop = allDayRowCell.offsetTop;\n      var eStart = new Date(record[this.parent.eventFields.startTime].getTime());\n      var eEnd = new Date(record[this.parent.eventFields.endTime].getTime());\n      var appWidth = 0;\n      var topValue = 1;\n      var isDateRange = currentDates[0].getTime() <= eStart.getTime() && addDays(currentDates.slice(-1)[0], 1).getTime() >= eStart.getTime();\n\n      if (eStart <= eEnd && isDateRange) {\n        var isAlreadyRendered = [];\n\n        if (this.renderedAllDayEvents[resource]) {\n          isAlreadyRendered = this.renderedAllDayEvents[resource].filter(function (event) {\n            return event.Guid === eventObj.Guid;\n          });\n\n          if (this.parent.activeViewOptions.group.byDate) {\n            isAlreadyRendered = isAlreadyRendered.filter(function (event) {\n              return event[_this19.parent.eventFields.startTime] >= currentDates[dayIndex] && event[_this19.parent.eventFields.endTime] <= addDays(new Date(+currentDates[dayIndex]), 1);\n            });\n          }\n        }\n\n        if (isAlreadyRendered.length === 0) {\n          var allDayDifference = record.data.count;\n          var allDayIndex = this.getOverlapIndex(record, dayIndex, true, resource);\n          record.Index = allDayIndex;\n          this.allDayLevel = this.allDayLevel < allDayIndex ? allDayIndex : this.allDayLevel;\n          var widthAdjustment = record.data.isRight ? 0 : this.parent.currentView === 'Day' ? 4 : 7;\n\n          if (allDayDifference >= 0) {\n            appWidth = allDayDifference * 100 - widthAdjustment;\n          }\n\n          if (isNullOrUndefined(this.renderedAllDayEvents[resource])) {\n            this.renderedAllDayEvents[resource] = [];\n          }\n\n          this.renderedAllDayEvents[resource].push(extend({}, record, null, true));\n          var allDayRow = [].slice.call(this.element.querySelector('.' + ALLDAY_ROW_CLASS).children);\n          var wIndex = this.parent.activeViewOptions.group.byDate ? this.resources.length * dayIndex + resource : dayCount;\n          var eventWrapper = this.element.querySelector('.' + ALLDAY_APPOINTMENT_WRAPPER_CLASS + ':nth-child(' + (wIndex + 1) + ')');\n          var appointmentElement;\n\n          if (inline) {\n            appointmentElement = this.parent.inlineModule.createInlineAppointmentElement(eventObj);\n          } else {\n            appointmentElement = this.createAppointmentElement(eventObj, true, record.data, resource);\n          }\n\n          addClass([appointmentElement], ALLDAY_APPOINTMENT_CLASS);\n          var args = {\n            data: eventObj,\n            element: appointmentElement,\n            cancel: false\n          };\n          this.parent.trigger(eventRendered, args, function (eventArgs) {\n            if (!eventArgs.cancel) {\n              eventWrapper.appendChild(appointmentElement);\n              var appHeight = appointmentElement.offsetHeight;\n              topValue += (allDayIndex === 0 ? cellTop : cellTop + allDayIndex * appHeight) + 1;\n              setStyleAttribute(appointmentElement, {\n                'width': appWidth + '%',\n                'top': formatUnit(topValue)\n              });\n\n              if (allDayIndex > 1) {\n                _this19.moreEvents.push(appointmentElement);\n\n                for (var count = 0, length = allDayDifference; count < length; count++) {\n                  _this19.createMoreIndicator(allDayRow, count, wIndex);\n                }\n              }\n\n              allDayRowCell.setAttribute('data-count', _this19.allDayLevel.toString());\n              var allDayRowHeight = (!_this19.parent.uiStateValues.expand && _this19.allDayLevel > 2 ? 3 * appHeight : (_this19.allDayLevel + 1) * appHeight) + 4;\n\n              _this19.setAllDayRowHeight(allDayRowHeight);\n\n              _this19.addOrRemoveClass();\n\n              _this19.wireAppointmentEvents(appointmentElement, eventObj);\n            }\n          });\n        }\n      }\n    }\n  }, {\n    key: \"renderNormalEvents\",\n    value: function renderNormalEvents(eventObj, dayIndex, resource, dayCount, inline) {\n      var record = this.isSpannedEvent(eventObj, dayIndex, resource);\n      var eStart = record[this.fields.startTime];\n      var eEnd = record[this.fields.endTime];\n      var appWidth = '0%';\n      var appLeft = '0%';\n      var topValue = 0;\n      var currentDate = resetTime(new Date(this.dateRender[resource][dayIndex].getTime()));\n      var schedule = getStartEndHours(currentDate, this.startHour, this.endHour);\n      var isValidEvent = this.isValidEvent(eventObj, eStart, eEnd, schedule);\n\n      if (eStart <= eEnd && isValidEvent) {\n        var appHeight = this.getHeight(eStart, eEnd);\n\n        if (eStart.getTime() > schedule.startHour.getTime()) {\n          topValue = this.getTopValue(eStart, dayIndex, resource);\n        }\n\n        var appIndex = this.getOverlapIndex(record, dayIndex, false, resource);\n        record.Index = appIndex;\n        this.overlapList.push(record);\n\n        if (this.overlapList.length > 1) {\n          if (isNullOrUndefined(this.overlapEvents[appIndex])) {\n            this.overlapEvents[appIndex] = [];\n          }\n\n          this.overlapEvents[appIndex].push(record);\n        } else {\n          this.overlapEvents = [];\n          this.overlapEvents.push([record]);\n        }\n\n        appWidth = this.getEventWidth();\n        var argsData = {\n          index: appIndex,\n          left: appLeft,\n          width: appWidth,\n          day: dayIndex,\n          dayIndex: dayCount,\n          record: record,\n          resource: resource\n        };\n        var tempData = this.adjustOverlapElements(argsData);\n        appWidth = tempData.appWidth;\n\n        if (isNullOrUndefined(this.renderedEvents[resource])) {\n          this.renderedEvents[resource] = [];\n        }\n\n        this.renderedEvents[resource].push(extend({}, record, null, true));\n        var appointmentElement;\n\n        if (inline) {\n          appointmentElement = this.parent.inlineModule.createInlineAppointmentElement(eventObj);\n        } else {\n          appointmentElement = this.createAppointmentElement(eventObj, false, record.isSpanned, resource);\n        }\n\n        setStyleAttribute(appointmentElement, {\n          'width': this.parent.eventSettings.enableMaxHeight ? '100%' : tempData.appWidth,\n          'height': appHeight + 'px',\n          'top': topValue + 'px'\n        });\n        var iconHeight = appointmentElement.querySelectorAll('.' + EVENT_INDICATOR_CLASS).length * 15;\n        var maxHeight = appHeight - 40 - iconHeight;\n        var subjectElement = appointmentElement.querySelector('.' + SUBJECT_CLASS);\n\n        if (!this.parent.isAdaptive && subjectElement) {\n          subjectElement.style.maxHeight = formatUnit(maxHeight);\n        }\n\n        var index = this.parent.activeViewOptions.group.byDate ? this.resources.length * dayIndex + resource : dayCount;\n        this.appendEvent(eventObj, appointmentElement, index, tempData.appLeft);\n        this.wireAppointmentEvents(appointmentElement, eventObj);\n\n        if (appHeight < this.cellHeight) {\n          var resizeHandlers = [].slice.call(appointmentElement.querySelectorAll('.' + EVENT_RESIZE_CLASS));\n          resizeHandlers.forEach(function (resizeHandler) {\n            resizeHandler.style.height = Math.ceil(appHeight / resizeHandler.offsetHeight) + 'px';\n          });\n        }\n      }\n    }\n  }, {\n    key: \"getEventWidth\",\n    value: function getEventWidth() {\n      var width = this.parent.currentView === 'Day' ? 97 : 94;\n      var tempWidth = (width - this.overlapEvents.length) / this.overlapEvents.length;\n      return (tempWidth < 0 ? 0 : tempWidth) + '%';\n    }\n  }, {\n    key: \"getEventLeft\",\n    value: function getEventLeft(appWidth, index) {\n      var tempLeft = (parseFloat(appWidth) + 1) * index;\n      return (tempLeft > 99 ? 99 : tempLeft) + '%';\n    }\n  }, {\n    key: \"getTopValue\",\n    value: function getTopValue(date, day, resource) {\n      var startEndHours = getStartEndHours(resetTime(this.dateRender[resource][day]), this.startHour, this.endHour);\n      var startHour = startEndHours.startHour;\n      var diffInMinutes = (date.getHours() - startHour.getHours()) * 60 + (date.getMinutes() - startHour.getMinutes());\n      return this.parent.activeViewOptions.timeScale.enable ? diffInMinutes * this.cellHeight * this.slotCount / this.interval : 0;\n    }\n  }, {\n    key: \"getOverlapIndex\",\n    value: function getOverlapIndex(record, day, isAllDay, resource) {\n      var _this20 = this;\n\n      var fieldMapping = this.parent.eventFields;\n      var eventsList = [];\n      var appIndex = -1;\n      this.overlapEvents = [];\n\n      if (isAllDay) {\n        if (!isNullOrUndefined(this.renderedAllDayEvents[resource])) {\n          var date = resetTime(new Date(this.dateRender[resource][day].getTime()));\n          eventsList = this.renderedAllDayEvents[resource].filter(function (app) {\n            return resetTime(app[fieldMapping.startTime]).getTime() <= date.getTime() && resetTime(app[fieldMapping.endTime]).getTime() >= date.getTime();\n          });\n\n          if (this.parent.activeViewOptions.group.resources.length > 0) {\n            eventsList = this.filterEventsByResource(this.resources[resource], eventsList);\n          }\n        }\n      } else {\n        var appointmentList = !isNullOrUndefined(this.renderedEvents[resource]) ? this.renderedEvents[resource] : [];\n        var appointment = [];\n        var recordStart = record[fieldMapping.startTime];\n        var recordEnd = record[fieldMapping.endTime];\n        this.overlapList = appointmentList.filter(function (data) {\n          return data[fieldMapping.endTime] > recordStart && data[fieldMapping.startTime] <= recordEnd || data[fieldMapping.startTime] >= recordEnd && data[fieldMapping.endTime] <= recordStart || data[fieldMapping.endTime].getTime() === data[fieldMapping.startTime].getTime() && data[fieldMapping.startTime].getTime() === recordStart.getTime() && data[fieldMapping.endTime] < recordEnd;\n        });\n\n        if (this.parent.activeViewOptions.group.resources.length > 0) {\n          this.overlapList = this.filterEventsByResource(this.resources[resource], this.overlapList);\n        }\n\n        this.overlapList.forEach(function (obj) {\n          var filterList = appointmentList.filter(function (data) {\n            return data[fieldMapping.endTime] > obj[fieldMapping.startTime] && data[fieldMapping.startTime] <= obj[fieldMapping.endTime];\n          });\n\n          if (_this20.parent.activeViewOptions.group.resources.length > 0) {\n            filterList = _this20.filterEventsByResource(_this20.resources[resource], filterList);\n          }\n\n          var collection = filterList.filter(function (val) {\n            return _this20.overlapList.indexOf(val) === -1;\n          });\n\n          if (collection.length > 0) {\n            appointment = appointment.concat(collection);\n          }\n        });\n\n        for (var i = 0; i < appointment.length - 1; i++) {\n          for (var j = i + 1; j < appointment.length; j++) {\n            if (appointment[i][fieldMapping.id] === appointment[j][fieldMapping.id]) {\n              appointment.splice(j, 1);\n              j--;\n            }\n          }\n        }\n\n        this.overlapList = this.overlapList.concat(appointment);\n        eventsList = this.overlapList;\n\n        var _iterator29 = _createForOfIteratorHelper(eventsList),\n            _step29;\n\n        try {\n          for (_iterator29.s(); !(_step29 = _iterator29.n()).done;) {\n            var event = _step29.value;\n            var _record = event;\n            var index = _record.Index;\n\n            if (isNullOrUndefined(this.overlapEvents[index])) {\n              this.overlapEvents[index] = [event];\n            } else {\n              this.overlapEvents[index].push(event);\n            }\n          }\n        } catch (err) {\n          _iterator29.e(err);\n        } finally {\n          _iterator29.f();\n        }\n      }\n\n      if (!isAllDay) {\n        eventsList = eventsList.filter(function (obj) {\n          return obj[fieldMapping.startTime] === record[fieldMapping.startTime] && obj[fieldMapping.endTime] > record[fieldMapping.endTime] || obj[fieldMapping.endTime] > record[fieldMapping.startTime] && obj[fieldMapping.startTime] < record[fieldMapping.endTime] || obj[fieldMapping.endTime] === record[fieldMapping.startTime] && obj[fieldMapping.startTime] === record[fieldMapping.endTime] || obj[fieldMapping.startTime].getTime() === record[fieldMapping.startTime].getTime() && obj[fieldMapping.endTime].getTime() === record[fieldMapping.endTime].getTime() || obj[fieldMapping.startTime].getTime() === record[fieldMapping.startTime].getTime() && obj[fieldMapping.endTime].getTime() < record[fieldMapping.endTime].getTime() || obj[fieldMapping.endTime].getTime() > record[fieldMapping.endTime].getTime();\n        });\n      }\n\n      if (eventsList.length > 0) {\n        var appLevel = eventsList.map(function (obj) {\n          return obj.Index;\n        });\n        appIndex = appLevel.length > 0 ? this.getSmallestMissingNumber(appLevel) : 0;\n      }\n\n      return appIndex === -1 ? 0 : appIndex;\n    }\n  }, {\n    key: \"adjustOverlapElements\",\n    value: function adjustOverlapElements(args) {\n      var data = {\n        appWidth: args.width,\n        appLeft: args.left\n      };\n\n      for (var i = 0, length1 = this.overlapEvents.length; i < length1; i++) {\n        if (!isNullOrUndefined(this.overlapEvents[i])) {\n          for (var j = 0, length2 = this.overlapEvents[i].length; j < length2; j++) {\n            var dayCount = this.parent.activeViewOptions.group.byDate ? this.resources.length * args.day + args.resource : args.dayIndex;\n            var element = this.element.querySelector('#e-appointment-wrapper-' + dayCount);\n\n            if (element.childElementCount > 0) {\n              var eleGuid = this.overlapEvents[i][j].Guid;\n\n              if (element.querySelectorAll('div[data-guid=\"' + eleGuid + '\"]').length > 0 && eleGuid !== args.record.Guid) {\n                var apps = element.querySelector('div[data-guid=\"' + eleGuid + '\"]');\n\n                if (parseFloat(args.width) <= parseFloat(apps.style.width)) {\n                  if (this.parent.enableRtl) {\n                    apps.style.right = this.getEventLeft(args.width, i);\n                  } else {\n                    apps.style.left = this.getEventLeft(args.width, i);\n                  }\n\n                  apps.style.width = parseFloat(args.width) + '%';\n                  data.appWidth = apps.style.width;\n                } else {\n                  data.appWidth = apps.style.width;\n                }\n              } else {\n                var appWidth = args.width;\n\n                if (isNullOrUndefined(this.overlapEvents[i - 1])) {\n                  appWidth = this.getEventWidth();\n                }\n\n                data.appWidth = appWidth;\n                data.appLeft = this.getEventLeft(appWidth, args.index);\n              }\n            }\n          }\n        }\n      }\n\n      return data;\n    }\n  }, {\n    key: \"setAllDayRowHeight\",\n    value: function setAllDayRowHeight(height) {\n      var dateHeader = this.parent.element.querySelector('.' + DATE_HEADER_WRAP_CLASS);\n\n      if (this.parent.height === 'auto' || !this.parent.enableAllDayScroll) {\n        addClass([dateHeader], ALLDAY_APPOINTMENT_AUTO);\n      }\n\n      var allDayRow = this.parent.element.querySelector('.' + ALLDAY_ROW_CLASS);\n      allDayRow.style.height = '';\n\n      if (this.parent.uiStateValues.expand && this.parent.height !== 'auto' && this.parent.enableAllDayScroll) {\n        allDayRow.style.height = height / 12 + 'em';\n        this.parent.eventBase.allDayExpandScroll(dateHeader);\n      } else {\n        dateHeader.scrollTop = 0;\n\n        var _iterator30 = _createForOfIteratorHelper(this.allDayElement),\n            _step30;\n\n        try {\n          for (_iterator30.s(); !(_step30 = _iterator30.n()).done;) {\n            var element = _step30.value;\n            element.style.height = height / 12 + 'em';\n          }\n        } catch (err) {\n          _iterator30.e(err);\n        } finally {\n          _iterator30.f();\n        }\n\n        removeClass([dateHeader], ALLDAY_APPOINTMENT_SCROLL);\n      }\n\n      this.animation.animate(this.allDayElement[0]);\n    }\n  }, {\n    key: \"addOrRemoveClass\",\n    value: function addOrRemoveClass() {\n      var _this21 = this;\n\n      this.moreEvents.filter(function (element) {\n        if (!_this21.parent.uiStateValues.expand && _this21.allDayLevel > 2) {\n          addClass([element], EVENT_COUNT_CLASS);\n          element.setAttribute('tabindex', '-1');\n        } else {\n          removeClass([element], EVENT_COUNT_CLASS);\n          element.setAttribute('tabindex', '0');\n        }\n      });\n      var moreEventCount = this.element.querySelector('.' + ALLDAY_APPOINTMENT_SECTION_CLASS);\n\n      if (this.parent.uiStateValues.expand) {\n        removeClass([moreEventCount], APPOINTMENT_ROW_EXPAND_CLASS);\n        addClass([moreEventCount], APPOINTMENT_ROW_COLLAPSE_CLASS);\n      } else {\n        removeClass([moreEventCount], APPOINTMENT_ROW_COLLAPSE_CLASS);\n        addClass([moreEventCount], APPOINTMENT_ROW_EXPAND_CLASS);\n      }\n\n      if (this.allDayLevel > 2) {\n        removeClass([moreEventCount], DISABLE_CLASS);\n      } else {\n        addClass([moreEventCount], DISABLE_CLASS);\n      }\n\n      var countCell = [].slice.call(this.element.querySelectorAll('.' + ROW_COUNT_WRAPPER_CLASS));\n      countCell.forEach(function (element) {\n        if (!_this21.parent.uiStateValues.expand && _this21.allDayLevel > 2) {\n          removeClass([element], DISABLE_CLASS);\n        } else {\n          addClass([element], DISABLE_CLASS);\n        }\n      });\n    }\n  }, {\n    key: \"getEventHeight\",\n    value: function getEventHeight() {\n      var eventElement = createElement('div', {\n        className: APPOINTMENT_CLASS,\n        styles: 'visibility:hidden'\n      });\n      var eventWrapper = this.element.querySelector('.' + ALLDAY_APPOINTMENT_WRAPPER_CLASS + ':first-child');\n      eventWrapper.appendChild(eventElement);\n      var height = eventElement.offsetHeight;\n      remove(eventElement);\n      return height;\n    }\n  }, {\n    key: \"rowExpandCollapse\",\n    value: function rowExpandCollapse() {\n      var target = this.element.querySelector('.' + ALLDAY_APPOINTMENT_SECTION_CLASS);\n      this.parent.uiStateValues.expand = target.classList.contains(APPOINTMENT_ROW_EXPAND_CLASS);\n      var rowHeight;\n\n      if (this.parent.uiStateValues.expand) {\n        target.setAttribute('title', this.parent.localeObj.getConstant('collapseAllDaySection'));\n        target.setAttribute('aria-label', 'Collapse section');\n        rowHeight = (this.allDayLevel + 1) * this.getEventHeight() + 4;\n      } else {\n        target.setAttribute('title', this.parent.localeObj.getConstant('expandAllDaySection'));\n        target.setAttribute('aria-label', 'Expand section');\n        rowHeight = 3 * this.getEventHeight() + 4;\n      }\n\n      this.setAllDayRowHeight(rowHeight);\n      this.addOrRemoveClass();\n      this.animation.animate(target);\n    }\n  }, {\n    key: \"animationUiUpdate\",\n    value: function animationUiUpdate() {\n      this.parent.notify(contentReady, {});\n    }\n  }, {\n    key: \"destroy\",\n    value: function destroy() {\n      if (!this.parent || this.parent && this.parent.isDestroyed) {\n        return;\n      }\n\n      this.removeEventListener();\n      this.allDayElement = null;\n      this.renderedAllDayEvents = null;\n      this.renderedEvents = null;\n      this.slotCount = null;\n      this.interval = null;\n      this.startHour = null;\n      this.endHour = null;\n      this.element = null;\n      this.fields = null;\n      this.animation = null;\n\n      _get(_getPrototypeOf(VerticalEvent.prototype), \"destroy\", this).call(this);\n    }\n  }]);\n\n  return VerticalEvent;\n}(EventBase);\n/* eslint-disable @typescript-eslint/no-explicit-any */\n\n\nvar EVENT_GAP = 0;\n/**\n * Month view events render\n */\n\nvar MonthEvent = /*#__PURE__*/function (_EventBase2) {\n  _inherits(MonthEvent, _EventBase2);\n\n  var _super2 = _createSuper(MonthEvent);\n\n  function MonthEvent(parent) {\n    var _this22;\n\n    _classCallCheck(this, MonthEvent);\n\n    _this22 = _super2.call(this, parent);\n    _this22.renderedEvents = [];\n    _this22.monthHeaderHeight = 0;\n    _this22.moreIndicatorHeight = 19;\n    _this22.renderType = 'day';\n    _this22.element = _this22.parent.activeView.getPanel();\n    _this22.fields = _this22.parent.eventFields;\n    _this22.maxHeight = _this22.parent.eventSettings.enableMaxHeight && !_this22.parent.eventSettings.enableIndicator && !_this22.parent.rowAutoHeight;\n    _this22.withIndicator = _this22.parent.eventSettings.enableMaxHeight && _this22.parent.eventSettings.enableIndicator && !_this22.parent.rowAutoHeight;\n    _this22.maxOrIndicator = _this22.maxHeight || _this22.withIndicator;\n    _this22.moreIndicatorHeight = _this22.parent.rowAutoHeight && _this22.parent.eventSettings.ignoreWhitespace ? 0 : _this22.moreIndicatorHeight;\n\n    _this22.addEventListener();\n\n    return _this22;\n  }\n\n  _createClass(MonthEvent, [{\n    key: \"removeEventWrapper\",\n    value: function removeEventWrapper(appElement) {\n      if (appElement.length > 0) {\n        appElement = this.parent.currentView === 'Month' ? appElement : [appElement[0]];\n\n        var _iterator31 = _createForOfIteratorHelper(appElement),\n            _step31;\n\n        try {\n          for (_iterator31.s(); !(_step31 = _iterator31.n()).done;) {\n            var wrap = _step31.value;\n\n            if (!wrap.classList.contains('e-more-indicator') && wrap.parentElement && wrap.parentElement.parentNode) {\n              remove(wrap.parentElement);\n            }\n          }\n        } catch (err) {\n          _iterator31.e(err);\n        } finally {\n          _iterator31.f();\n        }\n      }\n    }\n  }, {\n    key: \"renderAppointments\",\n    value: function renderAppointments() {\n      if (this.parent.dragAndDropModule) {\n        this.parent.dragAndDropModule.setDragArea();\n      }\n\n      var conWrap = this.parent.element.querySelector('.' + CONTENT_WRAP_CLASS);\n\n      if (this.parent.rowAutoHeight) {\n        this.parent.uiStateValues.top = conWrap.scrollTop;\n        this.parent.uiStateValues.left = conWrap.scrollLeft;\n      }\n\n      var appointmentWrapper = [].slice.call(this.element.querySelectorAll('.' + APPOINTMENT_WRAPPER_CLASS));\n\n      if (this.parent.crudModule && this.parent.crudModule.crudObj.isCrudAction) {\n        for (var i = 0, len = this.parent.crudModule.crudObj.sourceEvent.length; i < len; i++) {\n          var appElement = [].slice.call(this.element.querySelectorAll('.e-appointment-wrapper ' + '[data-group-index=\"' + this.parent.crudModule.crudObj.sourceEvent[i].groupIndex + '\"]'));\n          this.removeEventWrapper(appElement);\n\n          if (this.parent.crudModule.crudObj.targetEvent[i] && this.parent.crudModule.crudObj.sourceEvent[i].groupIndex !== this.parent.crudModule.crudObj.targetEvent[i].groupIndex) {\n            var ele = [].slice.call(this.element.querySelectorAll('.e-appointment-wrapper ' + '[data-group-index=\"' + this.parent.crudModule.crudObj.targetEvent[i].groupIndex + '\"]'));\n            this.removeEventWrapper(ele);\n          }\n        }\n      } else {\n        var _iterator32 = _createForOfIteratorHelper(appointmentWrapper),\n            _step32;\n\n        try {\n          for (_iterator32.s(); !(_step32 = _iterator32.n()).done;) {\n            var wrap = _step32.value;\n            remove(wrap);\n          }\n        } catch (err) {\n          _iterator32.e(err);\n        } finally {\n          _iterator32.f();\n        }\n      }\n\n      this.removeHeightProperty(CONTENT_TABLE_CLASS);\n\n      if (!this.element.querySelector('.' + WORK_CELLS_CLASS)) {\n        return;\n      }\n\n      if (this.parent.currentView === 'Month') {\n        var wrapper = createElement('div', {\n          className: APPOINTMENT_WRAPPER_CLASS\n        });\n        var cellTd = this.parent.element.querySelector('.' + WORK_CELLS_CLASS);\n        cellTd.appendChild(wrapper);\n        this.monthHeaderHeight = wrapper.offsetTop - cellTd.offsetTop;\n        cellTd.removeChild(wrapper);\n      }\n\n      this.eventHeight = getElementHeightFromClass(this.element, APPOINTMENT_CLASS);\n      var scrollTop = conWrap.scrollTop;\n\n      if (this.parent.rowAutoHeight && this.parent.virtualScrollModule && !isNullOrUndefined(this.parent.currentAction)) {\n        conWrap.scrollTop = conWrap.scrollTop - 1;\n      }\n\n      if (this.parent.activeViewOptions.group.resources.length > 0) {\n        this.renderResourceEvents();\n\n        if (this.parent.virtualScrollModule) {\n          this.parent.virtualScrollModule.updateFocusedWorkCell();\n        }\n      } else {\n        this.renderEventsHandler(this.parent.activeView.renderDates, this.parent.activeViewOptions.workDays);\n      }\n\n      if (this.parent.rowAutoHeight) {\n        this.updateBlockElements();\n        var data = {\n          cssProperties: this.parent.getCssProperties(),\n          module: this.parent.getModuleName(),\n          isPreventScrollUpdate: true,\n          scrollPosition: {\n            left: this.parent.uiStateValues.left,\n            top: this.parent.uiStateValues.top\n          }\n        };\n\n        if (this.parent.virtualScrollModule) {\n          if (this.parent.currentAction) {\n            conWrap.scrollTop = scrollTop;\n            this.parent.currentAction = null;\n          } else {\n            this.parent.virtualScrollModule.updateVirtualScrollHeight();\n          }\n        }\n\n        if (!this.parent.enablePersistence) {\n          this.parent.notify(contentReady, {});\n        }\n\n        this.parent.notify(scrollUiUpdate, data);\n\n        if (this.parent.currentView === 'Month' && this.parent.showWeekNumber) {\n          var totalCells = [].slice.call(this.parent.element.querySelectorAll('.e-content-wrap table tr td:first-child'));\n          var weekNumberCells = [].slice.call(this.parent.element.querySelectorAll('.' + WEEK_NUMBER_CLASS));\n          weekNumberCells.forEach(function (cell, i) {\n            var height = totalCells[i].offsetHeight;\n            setStyleAttribute(cell, {\n              'height': height + 'px'\n            });\n          });\n          this.parent.element.querySelector('.' + WEEK_NUMBER_WRAPPER_CLASS).scrollTop = this.parent.element.querySelector('.' + CONTENT_WRAP_CLASS).scrollTop;\n        }\n      }\n\n      this.parent.renderTemplates();\n    }\n  }, {\n    key: \"renderEventsHandler\",\n    value: function renderEventsHandler(dateRender, workDays, resData) {\n      this.renderedEvents = [];\n      var eventsList;\n      var blockList;\n      var resIndex = 0;\n\n      if (resData) {\n        resIndex = resData.groupIndex;\n        this.cssClass = resData.cssClass;\n        this.groupOrder = resData.groupOrder;\n        eventsList = this.parent.eventBase.filterEventsByResource(resData, this.parent.eventsProcessed);\n        blockList = this.parent.eventBase.filterEventsByResource(resData, this.parent.blockProcessed);\n        this.workCells = [].slice.call(this.element.querySelectorAll('.' + WORK_CELLS_CLASS + '[data-group-index=\"' + resIndex + '\"]'));\n      } else {\n        eventsList = this.parent.eventsProcessed;\n        blockList = this.parent.blockProcessed;\n        this.workCells = [].slice.call(this.element.querySelectorAll('.' + WORK_CELLS_CLASS));\n      }\n\n      this.sortByDateTime(eventsList);\n      this.sortByDateTime(blockList);\n\n      if (this.parent.currentView === 'Month' && this.parent.rowAutoHeight && this.parent.activeViewOptions.group.resources.length === 0) {\n        var totalCells = [].slice.call(this.parent.element.querySelectorAll('.e-content-wrap table tr td:first-child'));\n        var height = this.parent.height === 'auto' ? (this.parent.element.querySelector('.e-content-wrap').clientHeight + this.parent.element.querySelector('.e-date-header-wrap').clientHeight) / totalCells.length : this.parent.element.querySelector('.e-schedule-table').clientHeight / totalCells.length;\n        totalCells.forEach(function (cell) {\n          setStyleAttribute(cell, {\n            'height': height + 'px'\n          });\n        });\n      }\n\n      var cellDetail = this.workCells.slice(-1)[0].getBoundingClientRect();\n      this.cellWidth = cellDetail.width;\n      this.cellHeight = cellDetail.height;\n      this.dateRender = dateRender;\n      var filteredDates = this.getRenderedDates(dateRender);\n      this.getSlotDates(workDays);\n      this.processBlockEvents(blockList, resIndex, resData);\n\n      var _iterator33 = _createForOfIteratorHelper(eventsList),\n          _step33;\n\n      try {\n        for (_iterator33.s(); !(_step33 = _iterator33.n()).done;) {\n          var event = _step33.value;\n\n          if (this.parent.resourceBase && !resData) {\n            this.cssClass = this.parent.resourceBase.getCssClass(event);\n          }\n\n          var spannedEvents = this.splitEvent(event, filteredDates || this.dateRender);\n\n          var _iterator34 = _createForOfIteratorHelper(spannedEvents),\n              _step34;\n\n          try {\n            for (_iterator34.s(); !(_step34 = _iterator34.n()).done;) {\n              var _event2 = _step34.value;\n\n              if (this.maxHeight) {\n                var sDate = this.parent.currentView === 'Month' ? _event2[this.fields.startTime] : this.getStartTime(_event2, _event2.data);\n\n                if (this.getIndex(sDate) > 0) {\n                  continue;\n                }\n              }\n\n              this.updateIndicatorIcon(_event2);\n              this.renderEvents(_event2, resIndex, eventsList);\n            }\n          } catch (err) {\n            _iterator34.e(err);\n          } finally {\n            _iterator34.f();\n          }\n        }\n      } catch (err) {\n        _iterator33.e(err);\n      } finally {\n        _iterator33.f();\n      }\n\n      this.cssClass = null;\n      this.groupOrder = null;\n    }\n  }, {\n    key: \"processBlockEvents\",\n    value: function processBlockEvents(blockEvents, resIndex, resData) {\n      var _iterator35 = _createForOfIteratorHelper(blockEvents),\n          _step35;\n\n      try {\n        for (_iterator35.s(); !(_step35 = _iterator35.n()).done;) {\n          var event = _step35.value;\n\n          if (this.parent.resourceBase && !resData) {\n            this.cssClass = this.parent.resourceBase.getCssClass(event);\n          }\n\n          var blockSpannedList = [];\n\n          if (this.renderType === 'day' && !event[this.fields.isAllDay]) {\n            var temp = extend({}, event, null, true);\n            var isSameDate = this.isSameDate(temp[this.fields.startTime], temp[this.fields.endTime]);\n            temp.isBlockIcon = isSameDate;\n\n            if (!isSameDate && getDateInMs(temp[this.fields.startTime]) > 0) {\n              var e = extend({}, event, null, true);\n              e[this.fields.endTime] = addDays(resetTime(new Date(event[this.fields.startTime] + '')), 1);\n              e.isBlockIcon = true;\n              temp[this.fields.startTime] = e[this.fields.endTime];\n              blockSpannedList.push(e);\n            }\n\n            isSameDate = this.isSameDate(temp[this.fields.startTime], temp[this.fields.endTime]);\n\n            if (!isSameDate && getDateInMs(temp[this.fields.endTime]) > 0) {\n              var _e = extend({}, event, null, true);\n\n              _e[this.fields.startTime] = resetTime(new Date(event[this.fields.endTime] + ''));\n              _e.isBlockIcon = true;\n              blockSpannedList.push(_e);\n              temp[this.fields.endTime] = _e[this.fields.startTime];\n            }\n\n            blockSpannedList.push(temp);\n          } else {\n            blockSpannedList.push(event);\n          }\n\n          for (var _i2 = 0, _blockSpannedList = blockSpannedList; _i2 < _blockSpannedList.length; _i2++) {\n            var blockEvent = _blockSpannedList[_i2];\n            var spannedEvents = this.splitEvent(blockEvent, this.dateRender);\n\n            var _iterator36 = _createForOfIteratorHelper(spannedEvents),\n                _step36;\n\n            try {\n              for (_iterator36.s(); !(_step36 = _iterator36.n()).done;) {\n                var _event3 = _step36.value;\n                this.renderBlockEvents(_event3, resIndex, !!blockEvent.isBlockIcon);\n              }\n            } catch (err) {\n              _iterator36.e(err);\n            } finally {\n              _iterator36.f();\n            }\n          }\n        }\n      } catch (err) {\n        _iterator35.e(err);\n      } finally {\n        _iterator35.f();\n      }\n    }\n  }, {\n    key: \"isSameDate\",\n    value: function isSameDate(start, end) {\n      return new Date(+start).setHours(0, 0, 0, 0) === new Date(+end).setHours(0, 0, 0, 0);\n    }\n  }, {\n    key: \"renderBlockEvents\",\n    value: function renderBlockEvents(event, resIndex, isIcon) {\n      var eventData = event.data;\n      var startTime = this.getStartTime(event, eventData);\n      var endTime = this.getEndTime(event, eventData);\n      var day = this.parent.getIndexOfDate(this.dateRender, resetTime(new Date(startTime.getTime())));\n\n      if (day < 0 || startTime > endTime) {\n        return;\n      }\n\n      var cellTd = this.getCellTd(day);\n      var position = this.getPosition(startTime, endTime, event[this.fields.isAllDay], day);\n\n      if (!isIcon) {\n        var diffInDays = eventData.count;\n        var appWidth = this.getEventWidth(startTime, endTime, event[this.fields.isAllDay], diffInDays);\n        appWidth = appWidth <= 0 ? this.cellWidth : appWidth;\n        var appLeft = this.parent.enableRtl ? 0 : position;\n        var appRight = this.parent.enableRtl ? position : 0;\n        var appHeight = this.cellHeight - this.monthHeaderHeight;\n        var appTop = this.getRowTop(resIndex);\n        var blockElement = this.createBlockAppointmentElement(event, resIndex);\n        setStyleAttribute(blockElement, {\n          'width': appWidth + 'px',\n          'height': appHeight + 'px',\n          'left': appLeft + 'px',\n          'right': appRight + 'px',\n          'top': appTop + 'px'\n        });\n        this.renderEventElement(event, blockElement, cellTd);\n      } else {\n        this.renderBlockIndicator(cellTd, position, resIndex);\n      }\n    } // eslint-disable-next-line @typescript-eslint/no-unused-vars\n\n  }, {\n    key: \"renderBlockIndicator\",\n    value: function renderBlockIndicator(cellTd, position, resIndex) {\n      var blockIndicator = createElement('div', {\n        className: 'e-icons ' + BLOCK_INDICATOR_CLASS\n      });\n\n      if (isNullOrUndefined(cellTd.querySelector('.' + BLOCK_INDICATOR_CLASS))) {\n        cellTd.appendChild(blockIndicator);\n      }\n    } // eslint-disable-next-line @typescript-eslint/no-unused-vars\n\n  }, {\n    key: \"getStartTime\",\n    value: function getStartTime(event, eventData) {\n      return event[this.fields.startTime];\n    } // eslint-disable-next-line @typescript-eslint/no-unused-vars\n\n  }, {\n    key: \"getEndTime\",\n    value: function getEndTime(event, eventData) {\n      return event[this.fields.endTime];\n    }\n  }, {\n    key: \"getCellTd\",\n    value: function getCellTd(day) {\n      return this.workCells[day];\n    }\n  }, {\n    key: \"getEventWidth\",\n    value: function getEventWidth(startDate, endDate, isAllDay, count) {\n      return count * this.cellWidth - 1;\n    } // eslint-disable-next-line @typescript-eslint/no-unused-vars\n\n  }, {\n    key: \"getPosition\",\n    value: function getPosition(startTime, endTime, isAllDay, day) {\n      return 0;\n    } // eslint-disable-next-line @typescript-eslint/no-unused-vars\n\n  }, {\n    key: \"getRowTop\",\n    value: function getRowTop(resIndex) {\n      return 0;\n    }\n  }, {\n    key: \"updateIndicatorIcon\",\n    value: function updateIndicatorIcon(event) {\n      if (this.parent.currentView.indexOf('Timeline') === -1 || this.parent.currentView === 'TimelineMonth' || event[this.fields.isAllDay]) {\n        return;\n      }\n\n      var cloneData = event.data;\n      var start = this.parent.activeView.getStartHour();\n      var end = this.parent.activeView.getEndHour();\n      var startHour = getStartEndHours(event[this.fields.startTime], start, end);\n      var endHour = getStartEndHours(event[this.fields.endTime], start, end);\n      var actualStartTime = cloneData[this.fields.startTime];\n      var actualEndTime = cloneData[this.fields.endTime];\n      cloneData.isLeft = cloneData.isLeft || actualStartTime.getTime() < startHour.startHour.getTime();\n      cloneData.isRight = cloneData.isRight || actualEndTime.getTime() > endHour.endHour.getTime();\n\n      if (resetTime(actualStartTime).getTime() !== resetTime(actualEndTime).getTime()) {\n        var actualStartHour = startHour.startHour;\n        var actualEndHour = endHour.endHour;\n        var startTime = new Date(resetTime(actualStartTime));\n        startTime.setHours(actualEndHour.getHours(), actualEndHour.getMinutes(), actualEndHour.getSeconds());\n        cloneData.isLeft = cloneData.isLeft || actualStartTime.getTime() >= (actualStartHour.getDate() === startHour.endHour.getDate() ? startTime.getTime() : addDays(startTime, 1).getTime());\n\n        if (actualEndTime.getTime() !== resetTime(actualEndTime).getTime()) {\n          var endTime = new Date(resetTime(actualEndTime));\n          cloneData.isRight = cloneData.isRight || actualEndTime.getTime() <= endTime.setHours(actualStartHour.getHours(), actualStartHour.getMinutes(), actualStartHour.getSeconds());\n        }\n      }\n    }\n  }, {\n    key: \"renderResourceEvents\",\n    value: function renderResourceEvents() {\n      var resources = this.parent.uiStateValues.isGroupAdaptive ? [this.parent.resourceBase.lastResourceLevel[this.parent.uiStateValues.groupIndex]] : this.parent.resourceBase.lastResourceLevel;\n\n      if (this.parent.crudModule && this.parent.crudModule.crudObj.isCrudAction) {\n        for (var i = 0, len = this.parent.crudModule.crudObj.sourceEvent.length; i < len; i++) {\n          var sourceRes = this.parent.crudModule.crudObj.sourceEvent[i];\n          this.renderEventsHandler(sourceRes.renderDates, sourceRes.workDays, sourceRes);\n\n          if (this.parent.crudModule.crudObj.sourceEvent[i].groupIndex !== this.parent.crudModule.crudObj.targetEvent[i].groupIndex) {\n            var target = this.parent.crudModule.crudObj.targetEvent[i];\n            this.renderEventsHandler(target.renderDates, target.workDays, target);\n          }\n        }\n\n        this.parent.crudModule.crudObj.isCrudAction = false;\n      } else {\n        var _iterator37 = _createForOfIteratorHelper(resources),\n            _step37;\n\n        try {\n          for (_iterator37.s(); !(_step37 = _iterator37.n()).done;) {\n            var slotData = _step37.value;\n            this.renderEventsHandler(slotData.renderDates, slotData.workDays, slotData);\n          }\n        } catch (err) {\n          _iterator37.e(err);\n        } finally {\n          _iterator37.f();\n        }\n      }\n    }\n  }, {\n    key: \"getSlotDates\",\n    value: function getSlotDates(workDays) {\n      this.slots = [];\n      var dates = this.dateRender.map(function (date) {\n        return +date;\n      });\n      var noOfDays = this.parent.activeViewOptions.showWeekend ? WEEK_LENGTH : workDays.length;\n\n      while (dates.length > 0) {\n        this.slots.push(dates.splice(0, noOfDays));\n      }\n    }\n  }, {\n    key: \"createAppointmentElement\",\n    value: function createAppointmentElement(record, resIndex) {\n      var isCloneElement = arguments.length > 2 && arguments[2] !== undefined ? arguments[2] : false;\n      var eventSubject = record[this.fields.subject] || this.parent.eventSettings.fields.subject.default || this.parent.localeObj.getConstant('addTitle');\n      var newRecord = extend({}, record, record.data, true);\n      var attrs = {\n        'data-id': 'Appointment_' + record[this.fields.id],\n        'role': 'button',\n        'tabindex': '0',\n        'aria-readonly': this.parent.eventBase.getReadonlyAttribute(record),\n        'aria-selected': 'false',\n        'aria-grabbed': 'true',\n        'aria-label': this.parent.getAnnouncementString(newRecord, eventSubject)\n      };\n\n      if (!isCloneElement) {\n        attrs['data-guid'] = record.Guid;\n      }\n\n      if (this.parent.activeViewOptions.group.resources.length > 0) {\n        attrs['data-group-index'] = resIndex.toString();\n      }\n\n      var appointmentWrapper = createElement('div', {\n        className: APPOINTMENT_CLASS,\n        attrs: attrs\n      });\n\n      if (!isNullOrUndefined(this.cssClass)) {\n        addClass([appointmentWrapper], this.cssClass);\n      }\n\n      if (record[this.fields.isReadonly]) {\n        addClass([appointmentWrapper], 'e-read-only');\n      }\n\n      var appointmentDetails = createElement('div', {\n        className: APPOINTMENT_DETAILS\n      });\n      appointmentWrapper.appendChild(appointmentDetails);\n      var templateElement;\n      var eventData = record.data;\n      var eventObj = this.getEventData(record);\n\n      if (!isNullOrUndefined(this.parent.activeViewOptions.eventTemplate)) {\n        var scheduleId = this.parent.element.id + '_';\n        var viewName = this.parent.activeViewOptions.eventTemplateName;\n        var templateId = scheduleId + viewName + 'eventTemplate';\n        templateElement = this.parent.getAppointmentTemplate()(eventObj, this.parent, 'eventTemplate', templateId, false);\n      } else {\n        var eventLocation = record[this.fields.location] || this.parent.eventSettings.fields.location.default || '';\n        var appointmentSubject = createElement('div', {\n          className: SUBJECT_CLASS,\n          innerHTML: eventSubject + (eventLocation ? ';&nbsp' + eventLocation : '')\n        });\n        var appointmentStartTime = createElement('div', {\n          className: APPOINTMENT_TIME + (this.parent.isAdaptive ? ' ' + DISABLE_CLASS : ''),\n          innerHTML: this.parent.getTimeString(eventData[this.fields.startTime])\n        });\n        var appointmentEndTime = createElement('div', {\n          className: APPOINTMENT_TIME + (this.parent.isAdaptive ? ' ' + DISABLE_CLASS : ''),\n          innerHTML: this.parent.getTimeString(eventData[this.fields.endTime])\n        });\n\n        if (this.parent.currentView === 'Month') {\n          if (record[this.fields.isAllDay]) {\n            templateElement = [appointmentSubject];\n            addClass([appointmentSubject], 'e-text-center');\n          } else if (eventData.count <= 1 && !eventData.isLeft && !eventData.isRight) {\n            templateElement = [appointmentStartTime, appointmentSubject];\n          } else {\n            templateElement = [];\n            addClass([appointmentSubject], 'e-text-center');\n\n            if (!eventData.isLeft) {\n              templateElement.push(appointmentStartTime);\n            }\n\n            templateElement.push(appointmentSubject);\n\n            if (!eventData.isRight) {\n              templateElement.push(appointmentEndTime);\n            }\n          }\n        } else {\n          var innerElement;\n\n          if (record[this.fields.isAllDay]) {\n            var allDayString = createElement('div', {\n              className: APPOINTMENT_TIME,\n              innerHTML: this.parent.localeObj.getConstant('allDay')\n            });\n            innerElement = [appointmentSubject, allDayString];\n          } else {\n            var timeString = this.parent.getTimeString(eventData[this.fields.startTime]) + ' - ' + this.parent.getTimeString(eventData[this.fields.endTime]);\n            var appTime = createElement('div', {\n              className: APPOINTMENT_TIME + (this.parent.isAdaptive ? ' ' + DISABLE_CLASS : ''),\n              innerHTML: timeString\n            });\n            var appLocation = createElement('div', {\n              className: LOCATION_CLASS,\n              innerHTML: eventLocation\n            });\n            innerElement = [appointmentSubject, appTime, appLocation];\n          }\n\n          var wrap = createElement('div', {\n            className: 'e-inner-wrap'\n          });\n          append(innerElement, wrap);\n          templateElement = [wrap];\n        }\n      }\n\n      append(templateElement, appointmentDetails);\n      this.appendEventIcons(record, appointmentDetails);\n      this.renderResizeHandler(appointmentWrapper, record.data, record[this.fields.isReadonly]);\n      return appointmentWrapper;\n    }\n  }, {\n    key: \"appendEventIcons\",\n    value: function appendEventIcons(record, appointmentDetails) {\n      var eventData = record.data;\n\n      if (!isNullOrUndefined(record[this.fields.recurrenceRule]) || !isNullOrUndefined(record[this.fields.recurrenceID])) {\n        var iconClass = record[this.fields.id] === record[this.fields.recurrenceID] ? EVENT_RECURRENCE_ICON_CLASS : EVENT_RECURRENCE_EDIT_ICON_CLASS;\n        appointmentDetails.appendChild(createElement('div', {\n          className: ICON + ' ' + iconClass + (this.parent.isAdaptive ? ' ' + DISABLE_CLASS : '')\n        }));\n      }\n\n      if (eventData.isLeft) {\n        var iconLeft = createElement('div', {\n          className: EVENT_INDICATOR_CLASS + ' ' + ICON + ' ' + EVENT_ICON_LEFT_CLASS\n        });\n        prepend([iconLeft], appointmentDetails);\n      }\n\n      if (eventData.isRight) {\n        var iconRight = createElement('div', {\n          className: EVENT_INDICATOR_CLASS + ' ' + ICON + ' ' + EVENT_ICON_RIGHT_CLASS\n        });\n        append([iconRight], appointmentDetails);\n      }\n    } // eslint-disable-next-line @typescript-eslint/no-unused-vars\n\n  }, {\n    key: \"renderEvents\",\n    value: function renderEvents(event, resIndex, eventsList) {\n      var startTime = event[this.fields.startTime];\n      var endTime = event[this.fields.endTime];\n      var day = this.parent.getIndexOfDate(this.dateRender, resetTime(startTime));\n\n      if (day < 0) {\n        return;\n      }\n\n      if (startTime.getTime() < this.parent.minDate.getTime() || endTime.getTime() > this.parent.maxDate.getTime()) {\n        return;\n      }\n\n      var overlapCount = this.getIndex(startTime);\n      event.Index = overlapCount;\n      var appHeight = this.eventHeight;\n      this.renderedEvents.push(extend({}, event, null, true));\n      var diffInDays = event.data.count;\n\n      if (startTime.getTime() <= endTime.getTime()) {\n        var appWidth = diffInDays * this.cellWidth - 5;\n        var cellTd = this.workCells[day];\n        var appTop = overlapCount * (appHeight + EVENT_GAP);\n        var height = this.monthHeaderHeight + (overlapCount + 1) * (appHeight + EVENT_GAP) + this.moreIndicatorHeight;\n        var enableAppRender = this.maxOrIndicator ? overlapCount < 1 ? true : false : this.cellHeight > height;\n\n        if (this.parent.rowAutoHeight || enableAppRender) {\n          var appointmentElement;\n\n          if (this.inlineValue) {\n            appointmentElement = this.parent.inlineModule.createInlineAppointmentElement();\n          } else {\n            appointmentElement = this.createAppointmentElement(event, resIndex);\n          }\n\n          this.applyResourceColor(appointmentElement, event, 'backgroundColor', this.groupOrder);\n          this.wireAppointmentEvents(appointmentElement, event);\n          setStyleAttribute(appointmentElement, {\n            'width': appWidth + 'px',\n            'top': appTop + 'px'\n          });\n          this.renderEventElement(event, appointmentElement, cellTd);\n\n          if (this.parent.rowAutoHeight) {\n            var firstChild = cellTd.parentElement.firstElementChild;\n            this.updateCellHeight(firstChild, height);\n          }\n        } else {\n          for (var i = 0; i < diffInDays; i++) {\n            var _cellTd = this.workCells[day + i];\n\n            if (_cellTd && isNullOrUndefined(_cellTd.querySelector('.' + MORE_INDICATOR_CLASS))) {\n              var startDate = new Date(this.dateRender[day + i].getTime());\n              var endDate = addDays(this.dateRender[day + i], 1);\n\n              var groupIndex = _cellTd.getAttribute('data-group-index');\n\n              var filterEvents = this.getFilteredEvents(startDate, endDate, groupIndex);\n              var appArea = this.cellHeight - this.monthHeaderHeight - this.moreIndicatorHeight;\n              appHeight = this.withIndicator ? appArea : appHeight;\n              var renderedAppCount = Math.floor(appArea / (appHeight + EVENT_GAP));\n              var count = filterEvents.length - renderedAppCount <= 0 ? 1 : filterEvents.length - renderedAppCount;\n              var moreIndicatorElement = this.getMoreIndicatorElement(count, startDate, endDate);\n\n              if (!isNullOrUndefined(groupIndex)) {\n                moreIndicatorElement.setAttribute('data-group-index', groupIndex);\n              }\n\n              moreIndicatorElement.style.top = appArea + 'px';\n              moreIndicatorElement.style.width = this.cellWidth - 2 + 'px';\n              this.renderElement(_cellTd, moreIndicatorElement);\n              EventHandler.add(moreIndicatorElement, 'click', this.moreIndicatorClick, this);\n            }\n          }\n        }\n      }\n    }\n  }, {\n    key: \"updateCellHeight\",\n    value: function updateCellHeight(cell, height) {\n      if (height > cell.offsetHeight) {\n        setStyleAttribute(cell, {\n          'height': height + 'px'\n        });\n      }\n    }\n  }, {\n    key: \"updateBlockElements\",\n    value: function updateBlockElements() {\n      var blockElement = [].slice.call(this.element.querySelectorAll('.' + BLOCK_APPOINTMENT_CLASS));\n\n      var _iterator38 = _createForOfIteratorHelper(blockElement),\n          _step38;\n\n      try {\n        for (_iterator38.s(); !(_step38 = _iterator38.n()).done;) {\n          var element = _step38.value;\n          var target = closest(element, 'tr');\n          this.monthHeaderHeight = element.offsetParent.offsetTop - target.offsetTop;\n          element.style.height = target.offsetHeight - 1 - this.monthHeaderHeight + 'px';\n          var firstChild = target.firstElementChild;\n          var width = Math.round(element.offsetWidth / firstChild.offsetWidth);\n          element.style.width = firstChild.offsetWidth * width + 'px';\n        }\n      } catch (err) {\n        _iterator38.e(err);\n      } finally {\n        _iterator38.f();\n      }\n    } // eslint-disable-next-line max-len\n\n  }, {\n    key: \"getFilteredEvents\",\n    value: function getFilteredEvents(startDate, endDate, groupIndex, eventsList) {\n      var filteredEvents;\n\n      if (isNullOrUndefined(groupIndex)) {\n        filteredEvents = this.filterEvents(startDate, endDate);\n      } else {\n        var data = this.parent.resourceBase.lastResourceLevel[parseInt(groupIndex, 10)];\n        filteredEvents = this.filterEvents(startDate, endDate, isNullOrUndefined(eventsList) ? undefined : eventsList, data);\n      }\n\n      return filteredEvents;\n    }\n  }, {\n    key: \"getOverlapEvents\",\n    value: function getOverlapEvents(date, appointments) {\n      var appointmentsList = [];\n\n      var _iterator39 = _createForOfIteratorHelper(appointments),\n          _step39;\n\n      try {\n        for (_iterator39.s(); !(_step39 = _iterator39.n()).done;) {\n          var app = _step39.value;\n          var dateTime = resetTime(date).getTime();\n\n          if (resetTime(app[this.fields.startTime]).getTime() <= dateTime && resetTime(app[this.fields.endTime]).getTime() >= dateTime) {\n            appointmentsList.push(app);\n          }\n        }\n      } catch (err) {\n        _iterator39.e(err);\n      } finally {\n        _iterator39.f();\n      }\n\n      return appointmentsList;\n    }\n  }, {\n    key: \"getIndex\",\n    value: function getIndex(date) {\n      var appIndex = -1;\n      var appointments = this.renderedEvents;\n\n      if (appointments.length > 0) {\n        var appointmentsList = this.getOverlapEvents(date, appointments);\n        var appLevel = appointmentsList.map(function (obj) {\n          return obj.Index;\n        });\n        appIndex = appLevel.length > 0 ? this.getSmallestMissingNumber(appLevel) : 0;\n      }\n\n      return appIndex === -1 ? 0 : appIndex;\n    }\n  }, {\n    key: \"moreIndicatorClick\",\n    value: function moreIndicatorClick(event) {\n      var _this23 = this;\n\n      var target = closest(event.target, '.' + MORE_INDICATOR_CLASS);\n      var startDate = new Date(parseInt(target.getAttribute('data-start-date'), 10));\n      var endDate = new Date(parseInt(target.getAttribute('data-end-date'), 10));\n      var groupIndex = target.getAttribute('data-group-index');\n      var moreArgs = {\n        cancel: false,\n        event: event,\n        element: target,\n        isPopupOpen: true,\n        startTime: startDate,\n        endTime: endDate,\n        viewName: this.parent.getNavigateView()\n      };\n\n      if (groupIndex) {\n        moreArgs.groupIndex = parseInt(groupIndex, 10);\n      }\n\n      this.parent.trigger(moreEventsClick, moreArgs, function (clickArgs) {\n        if (!clickArgs.cancel) {\n          if (clickArgs.isPopupOpen) {\n            var filteredEvents = _this23.getFilteredEvents(startDate, endDate, groupIndex);\n\n            var _moreArgs = {\n              date: startDate,\n              event: filteredEvents,\n              element: event.target\n            };\n\n            _this23.parent.quickPopup.moreEventClick(_moreArgs, endDate, groupIndex);\n          } else {\n            _this23.parent.setProperties({\n              selectedDate: startDate\n            }, true);\n\n            _this23.parent.changeView(clickArgs.viewName, event);\n          }\n        }\n      });\n    }\n  }, {\n    key: \"renderEventElement\",\n    value: function renderEventElement(event, appointmentElement, cellTd) {\n      var _this24 = this;\n\n      var eventType = appointmentElement.classList.contains(BLOCK_APPOINTMENT_CLASS) ? 'blockEvent' : 'event';\n      var isAppointment = appointmentElement.classList.contains(APPOINTMENT_CLASS);\n      var eventObj = this.getEventData(event);\n      var args = {\n        data: eventObj,\n        element: appointmentElement,\n        cancel: false,\n        type: eventType\n      };\n      this.parent.trigger(eventRendered, args, function (eventArgs) {\n        if (eventArgs.cancel) {\n          _this24.renderedEvents.pop();\n        } else {\n          _this24.renderElement(cellTd, appointmentElement, isAppointment);\n        }\n      });\n    }\n  }, {\n    key: \"getEventData\",\n    value: function getEventData(event) {\n      var eventObj = extend({}, event, null, true);\n      eventObj[this.fields.startTime] = event.data[this.fields.startTime];\n      eventObj[this.fields.endTime] = event.data[this.fields.endTime];\n      return eventObj;\n    }\n  }, {\n    key: \"renderElement\",\n    value: function renderElement(cellTd, element) {\n      var isAppointment = arguments.length > 2 && arguments[2] !== undefined ? arguments[2] : false;\n\n      if (this.maxOrIndicator && isAppointment) {\n        this.setMaxEventHeight(element, cellTd);\n      }\n\n      var wrapperEle = cellTd.querySelector('.' + APPOINTMENT_WRAPPER_CLASS);\n\n      if (wrapperEle) {\n        wrapperEle.appendChild(element);\n      } else {\n        var wrapper = createElement('div', {\n          className: APPOINTMENT_WRAPPER_CLASS\n        });\n        wrapper.appendChild(element);\n        cellTd.appendChild(wrapper);\n      }\n    }\n  }, {\n    key: \"getMoreIndicatorElement\",\n    value: function getMoreIndicatorElement(count, startDate, endDate) {\n      var moreIndicatorElement = createElement('div', {\n        className: MORE_INDICATOR_CLASS,\n        innerHTML: '+' + this.parent.globalize.formatNumber(count) + '&nbsp;' + (this.parent.isAdaptive ? '' : this.parent.localeObj.getConstant('more')),\n        attrs: {\n          'tabindex': '0',\n          'data-start-date': startDate.getTime().toString(),\n          'data-end-date': endDate.getTime().toString(),\n          'role': 'list'\n        }\n      });\n      return moreIndicatorElement;\n    }\n  }, {\n    key: \"removeHeightProperty\",\n    value: function removeHeightProperty(selector) {\n      var rows = [].slice.call(this.element.querySelectorAll('.' + selector + ' tbody tr'));\n\n      var _iterator40 = _createForOfIteratorHelper(rows),\n          _step40;\n\n      try {\n        for (_iterator40.s(); !(_step40 = _iterator40.n()).done;) {\n          var row = _step40.value;\n          row.firstElementChild.style.height = '';\n        }\n      } catch (err) {\n        _iterator40.e(err);\n      } finally {\n        _iterator40.f();\n      }\n    }\n  }, {\n    key: \"setMaxEventHeight\",\n    value: function setMaxEventHeight(event, cell) {\n      var headerHeight = getOuterHeight(cell.querySelector('.' + DATE_HEADER_CLASS));\n      var height = cell.offsetHeight - headerHeight - (this.maxHeight ? 0 : this.moreIndicatorHeight);\n      setStyleAttribute(event, {\n        'height': height + 'px',\n        'align-items': 'center'\n      });\n    }\n  }, {\n    key: \"destroy\",\n    value: function destroy() {\n      this.element = null;\n      this.fields = null;\n      this.maxHeight = null;\n      this.withIndicator = null;\n      this.maxOrIndicator = null;\n      this.moreIndicatorHeight = null;\n      this.removeEventListener();\n\n      _get(_getPrototypeOf(MonthEvent.prototype), \"destroy\", this).call(this);\n    }\n  }]);\n\n  return MonthEvent;\n}(EventBase);\n/* eslint-disable max-len */\n\n/* eslint-disable @typescript-eslint/no-explicit-any */\n\n\nvar EVENT_GAP$1 = 2;\nvar BLOCK_INDICATOR_WIDTH = 22;\nvar BLOCK_INDICATOR_HEIGHT = 18;\n/**\n * Timeline view events render\n */\n\nvar TimelineEvent = /*#__PURE__*/function (_MonthEvent) {\n  _inherits(TimelineEvent, _MonthEvent);\n\n  var _super3 = _createSuper(TimelineEvent);\n\n  function TimelineEvent(parent, type) {\n    var _this25;\n\n    _classCallCheck(this, TimelineEvent);\n\n    _this25 = _super3.call(this, parent);\n    _this25.startHour = _this25.parent.activeView.getStartHour();\n    _this25.endHour = _this25.parent.activeView.getEndHour();\n    _this25.slotCount = _this25.parent.activeViewOptions.timeScale.slotCount;\n    _this25.interval = _this25.parent.activeViewOptions.timeScale.interval;\n    _this25.day = 0;\n    _this25.rowIndex = 0;\n    _this25.renderType = type;\n    _this25.eventContainers = [].slice.call(_this25.element.querySelectorAll('.' + APPOINTMENT_CONTAINER_CLASS));\n    var tr = [].slice.call(_this25.element.querySelectorAll('.' + CONTENT_TABLE_CLASS + ' tbody tr'));\n    _this25.dayLength = tr.length === 0 ? 0 : tr[0].children.length;\n    _this25.content = _this25.parent.element.querySelector('.' + CONTENT_TABLE_CLASS);\n    return _this25;\n  }\n\n  _createClass(TimelineEvent, [{\n    key: \"getSlotDates\",\n    value: function getSlotDates() {\n      this.slots = [];\n      this.slots.push(this.parent.activeView.renderDates.map(function (date) {\n        return +date;\n      }));\n\n      if (this.parent.activeViewOptions.headerRows.length > 0 && this.parent.activeViewOptions.headerRows.slice(-1)[0].option !== 'Hour') {\n        this.renderType = 'day';\n        this.cellWidth = this.content.offsetWidth / this.dateRender.length;\n        this.slotsPerDay = 1;\n      } else {\n        this.slotsPerDay = this.dayLength / this.dateRender.length;\n      }\n    }\n  }, {\n    key: \"getOverlapEvents\",\n    value: function getOverlapEvents(date, appointments) {\n      var appointmentsList = [];\n\n      if (this.renderType === 'day') {\n        var _iterator41 = _createForOfIteratorHelper(appointments),\n            _step41;\n\n        try {\n          for (_iterator41.s(); !(_step41 = _iterator41.n()).done;) {\n            var app = _step41.value;\n\n            if (resetTime(app[this.fields.startTime]).getTime() <= resetTime(new Date(date.getTime())).getTime() && resetTime(app[this.fields.endTime]).getTime() >= resetTime(new Date(date.getTime())).getTime()) {\n              appointmentsList.push(app);\n            }\n          }\n        } catch (err) {\n          _iterator41.e(err);\n        } finally {\n          _iterator41.f();\n        }\n      } else {\n        var _iterator42 = _createForOfIteratorHelper(appointments),\n            _step42;\n\n        try {\n          for (_iterator42.s(); !(_step42 = _iterator42.n()).done;) {\n            var _app = _step42.value;\n            var eventData = _app.data;\n\n            if (eventData.trimStartTime.getTime() <= date.getTime() && eventData.trimEndTime.getTime() > date.getTime()) {\n              appointmentsList.push(_app);\n            }\n          }\n        } catch (err) {\n          _iterator42.e(err);\n        } finally {\n          _iterator42.f();\n        }\n      }\n\n      return appointmentsList;\n    }\n  }, {\n    key: \"getSortComparerIndex\",\n    value: function getSortComparerIndex(startDate, endDate) {\n      var appIndex = -1;\n      var appointments = this.renderedEvents;\n\n      if (appointments.length > 0) {\n        var appointmentsList = this.getOverlapSortComparerEvents(startDate, endDate, appointments);\n        var appLevel = appointmentsList.map(function (obj) {\n          return obj.Index;\n        });\n        appIndex = appLevel.length > 0 ? this.getSmallestMissingNumber(appLevel) : 0;\n      }\n\n      return appIndex === -1 ? 0 : appIndex;\n    }\n  }, {\n    key: \"getOverlapSortComparerEvents\",\n    value: function getOverlapSortComparerEvents(startDate, endDate, appointmentsCollection) {\n      var appointments = [];\n\n      var _iterator43 = _createForOfIteratorHelper(appointmentsCollection),\n          _step43;\n\n      try {\n        for (_iterator43.s(); !(_step43 = _iterator43.n()).done;) {\n          var app = _step43.value;\n\n          if (this.renderType === 'day') {\n            if (resetTime(app[this.fields.startTime]).getTime() <= resetTime(new Date(startDate.getTime())).getTime() && resetTime(app[this.fields.endTime]).getTime() >= resetTime(new Date(startDate.getTime())).getTime()) {\n              appointments.push(app);\n            }\n          } else {\n            var eventData = app.data;\n\n            if (eventData.trimStartTime.getTime() <= startDate.getTime() && startDate.getTime() < eventData.trimEndTime.getTime() || startDate.getTime() <= eventData.trimStartTime.getTime() && eventData.trimStartTime.getTime() < endDate.getTime()) {\n              appointments.push(app);\n            }\n          }\n        }\n      } catch (err) {\n        _iterator43.e(err);\n      } finally {\n        _iterator43.f();\n      }\n\n      return appointments;\n    }\n  }, {\n    key: \"renderResourceEvents\",\n    value: function renderResourceEvents() {\n      this.removeHeightProperty(RESOURCE_COLUMN_TABLE_CLASS);\n      var resources = this.parent.uiStateValues.isGroupAdaptive ? [this.parent.resourceBase.lastResourceLevel[this.parent.uiStateValues.groupIndex]] : this.parent.resourceBase.renderedResources;\n\n      if (this.parent.crudModule && this.parent.crudModule.crudObj.isCrudAction) {\n        for (var i = 0, len = this.parent.crudModule.crudObj.sourceEvent.length; i < len; i++) {\n          var source = this.parent.crudModule.crudObj.sourceEvent[i];\n          this.rowIndex = source.groupIndex;\n          this.renderEventsHandler(this.parent.activeView.renderDates, this.parent.activeViewOptions.workDays, source);\n\n          if (this.parent.crudModule.crudObj.targetEvent[i] && this.parent.crudModule.crudObj.sourceEvent[i].groupIndex !== this.parent.crudModule.crudObj.targetEvent[i].groupIndex) {\n            var target = this.parent.crudModule.crudObj.targetEvent[i];\n            this.rowIndex = target.groupIndex;\n            this.renderEventsHandler(this.parent.activeView.renderDates, this.parent.activeViewOptions.workDays, target);\n          }\n        }\n\n        this.parent.crudModule.crudObj.isCrudAction = false;\n      } else {\n        for (var _i3 = 0; _i3 < resources.length; _i3++) {\n          this.rowIndex = _i3;\n          this.renderEventsHandler(this.parent.activeView.renderDates, this.parent.activeViewOptions.workDays, resources[_i3]);\n        }\n      }\n    }\n  }, {\n    key: \"renderEvents\",\n    value: function renderEvents(event, resIndex, appointmentsList) {\n      var startTime = event[this.fields.startTime];\n      var endTime = event[this.fields.endTime];\n\n      if (startTime.getTime() < this.parent.minDate.getTime() || endTime.getTime() > this.parent.maxDate.getTime()) {\n        return;\n      }\n\n      var eventData = event.data;\n      startTime = this.getStartTime(event, eventData);\n      endTime = this.getEndTime(event, eventData);\n      this.day = this.parent.getIndexOfDate(this.dateRender, resetTime(new Date(startTime.getTime())));\n\n      if (this.day < 0) {\n        return;\n      }\n\n      var cellTd = this.getCellTd();\n      var overlapCount = isNullOrUndefined(this.parent.eventSettings.sortComparer) ? this.getIndex(startTime) : this.getSortComparerIndex(startTime, endTime);\n      event.Index = overlapCount;\n      var elem = this.element.querySelector('.' + APPOINTMENT_CLASS);\n      var eleHeight = elem ? elem.getBoundingClientRect().height : 0;\n      var appHeight = elem && eleHeight > 0 ? eleHeight : this.eventHeight;\n      var diffInDays = eventData.count;\n      var eventObj = extend({}, event, null, true);\n      eventObj[this.fields.startTime] = eventData[this.fields.startTime];\n      eventObj[this.fields.endTime] = eventData[this.fields.endTime];\n      var currentDate = resetTime(new Date(this.dateRender[this.day].getTime()));\n      var schedule = getStartEndHours(currentDate, this.startHour, this.endHour);\n      var isValidEvent = this.isValidEvent(eventObj, startTime, endTime, schedule);\n\n      if (startTime <= endTime && isValidEvent) {\n        var appWidth = this.getEventWidth(startTime, endTime, event[this.fields.isAllDay], diffInDays);\n        appWidth = this.renderType === 'day' ? appWidth - 2 : appWidth;\n        var appLeft = 0;\n        var appRight = 0;\n        var position = this.getPosition(startTime, endTime, event[this.fields.isAllDay], this.day);\n        appWidth = appWidth <= 0 ? this.cellWidth : appWidth; // appWidth 0 when start and end time as same\n\n        this.renderedEvents.push(extend({}, event, null, true));\n        var top = this.getRowTop(resIndex);\n        var appTop = top + (this.maxHeight ? 0 : EVENT_GAP$1) + overlapCount * (appHeight + EVENT_GAP$1);\n        appLeft = this.parent.enableRtl ? 0 : position;\n        appRight = this.parent.enableRtl ? position : 0;\n        var height = (overlapCount + 1) * (appHeight + EVENT_GAP$1) + this.moreIndicatorHeight;\n        var renderApp = this.maxOrIndicator ? overlapCount < 1 ? true : false : this.cellHeight > height;\n\n        if (this.parent.rowAutoHeight || renderApp) {\n          var appointmentElement;\n\n          if (isNullOrUndefined(this.inlineValue)) {\n            appointmentElement = this.createAppointmentElement(event, resIndex);\n          } else {\n            appointmentElement = this.parent.inlineModule.createInlineAppointmentElement();\n          }\n\n          this.applyResourceColor(appointmentElement, event, 'backgroundColor', this.groupOrder);\n          setStyleAttribute(appointmentElement, {\n            'width': appWidth + 'px',\n            'left': appLeft + 'px',\n            'right': appRight + 'px',\n            'top': appTop + 'px'\n          });\n          this.wireAppointmentEvents(appointmentElement, event);\n          this.renderEventElement(event, appointmentElement, cellTd);\n\n          if (this.parent.rowAutoHeight) {\n            var firstChild = this.getFirstChild(resIndex);\n            this.updateCellHeight(firstChild, height);\n          }\n\n          if (this.parent.activeViewOptions.option !== 'TimelineMonth' && this.parent.activeViewOptions.timeScale.enable && appWidth < this.cellWidth) {\n            var resizeHandlers = [].slice.call(appointmentElement.querySelectorAll('.' + EVENT_RESIZE_CLASS));\n            resizeHandlers.forEach(function (resizeHandler) {\n              resizeHandler.style.width = Math.ceil(appWidth / resizeHandler.getBoundingClientRect().width) + 'px';\n            });\n          }\n        } else {\n          for (var i = 0; i < diffInDays; i++) {\n            var moreIndicator = cellTd.querySelector('.' + MORE_INDICATOR_CLASS);\n            var appPos = this.parent.enableRtl ? appRight : appLeft;\n            appPos = Math.floor(appPos / this.cellWidth) * this.cellWidth;\n            var interval = this.interval / this.slotCount;\n            var startDate = this.parent.activeViewOptions.option === 'TimelineMonth' || this.renderType === 'day' || i !== 0 ? new Date(this.dateRender[this.day + i].getTime()) : new Date(startTime);\n            var endDate = addDays(this.dateRender[this.day + i], 1);\n\n            if (this.parent.activeViewOptions.option === 'TimelineMonth' || this.renderType === 'day') {\n              var _position = this.getPosition(startDate, endDate, event[this.fields.isAllDay], this.day + i);\n\n              this.renderTimelineMoreIndicator(startTime, startDate, endDate, appHeight, interval, resIndex, appointmentsList, top, appLeft, appRight, cellTd, moreIndicator, appPos, _position);\n            } else {\n              var slotCount = (getUniversalTime(endTime) - getUniversalTime(startTime)) / MS_PER_MINUTE * this.slotCount / this.interval;\n\n              for (var k = 0; k < slotCount; k++) {\n                startDate = k === 0 ? new Date(startDate.getTime()) : new Date(startDate.getTime() + 60000 * interval);\n                endDate = new Date(startDate.getTime() + 60000 * interval);\n\n                if (endDate.getTime() > endTime.getTime()) {\n                  break;\n                }\n\n                var _position2 = this.getPosition(startDate, endDate, false, this.day + i);\n\n                if (appPos > _position2) {\n                  break;\n                }\n\n                appPos = _position2;\n                this.renderTimelineMoreIndicator(startTime, startDate, endDate, appHeight, interval, resIndex, appointmentsList, top, appLeft, appRight, cellTd, moreIndicator, appPos, _position2);\n              }\n            }\n          }\n        }\n      }\n\n      this.parent.renderTemplates();\n    }\n  }, {\n    key: \"renderTimelineMoreIndicator\",\n    value: function renderTimelineMoreIndicator(startTime, startDate, endDate, appHeight, interval, resIndex, appointmentsList, top, appLeft, appRight, cellTd, moreIndicator, appPos, position) {\n      appLeft = this.parent.enableRtl ? appRight = position : position;\n      appPos = this.parent.enableRtl ? appRight : appLeft;\n      appPos = Math.floor(appPos / this.cellWidth) * this.cellWidth;\n\n      if (cellTd && isNullOrUndefined(moreIndicator) || !this.isAlreadyAvail(appPos, cellTd)) {\n        var startDateTime = this.parent.activeViewOptions.option === 'TimelineMonth' || this.renderType === 'day' ? new Date(+startTime) : startDate;\n        var slotStartTime = new Date(startDateTime.setMinutes(Math.floor(startDateTime.getMinutes() / interval) * interval));\n        var slotEndTime = new Date(slotStartTime.getTime() + 60000 * interval);\n        var groupIndex;\n\n        if (this.parent.activeViewOptions.group.resources.length > 0 && !isNullOrUndefined(resIndex)) {\n          groupIndex = resIndex.toString();\n        }\n\n        var filterEvents = this.getFilterEvents(startDate, endDate, slotStartTime, slotEndTime, groupIndex, appointmentsList);\n        var appArea = this.cellHeight - this.moreIndicatorHeight;\n        appHeight = this.withIndicator ? appArea - EVENT_GAP$1 : appHeight;\n        var renderedAppCount = Math.floor(appArea / (appHeight + EVENT_GAP$1));\n        var count = filterEvents.length - renderedAppCount <= 0 ? 1 : filterEvents.length - renderedAppCount;\n        var moreIndicatorElement;\n\n        if (this.renderType === 'day') {\n          moreIndicatorElement = this.getMoreIndicatorElement(count, startDate, endDate);\n        } else {\n          moreIndicatorElement = this.getMoreIndicatorElement(count, slotStartTime, slotEndTime);\n        }\n\n        if (!isNullOrUndefined(groupIndex)) {\n          moreIndicatorElement.setAttribute('data-group-index', groupIndex);\n        }\n\n        moreIndicatorElement.style.top = top + appArea + 'px';\n        moreIndicatorElement.style.width = this.cellWidth + 'px';\n        moreIndicatorElement.style.left = Math.floor(appLeft / this.cellWidth) * this.cellWidth + 'px';\n        moreIndicatorElement.style.right = Math.floor(appRight / this.cellWidth) * this.cellWidth + 'px';\n        this.renderElement(cellTd, moreIndicatorElement);\n        EventHandler.add(moreIndicatorElement, 'click', this.moreIndicatorClick, this);\n      }\n    }\n  }, {\n    key: \"updateCellHeight\",\n    value: function updateCellHeight(cell, height) {\n      if (height > cell.getBoundingClientRect().height) {\n        setStyleAttribute(cell, {\n          'height': height + 'px'\n        });\n\n        if (this.parent.activeViewOptions.group.resources.length > 0) {\n          var resourceCell = this.parent.element.querySelector('.' + RESOURCE_COLUMN_TABLE_CLASS + ' ' + 'tbody td[data-group-index=\"' + cell.getAttribute('data-group-index') + '\"]');\n\n          if (resourceCell) {\n            setStyleAttribute(resourceCell, {\n              'height': height + 'px'\n            });\n          }\n        }\n\n        var monthHeader = this.parent.element.querySelector('.e-month-header-wrapper table tr:nth-child(' + (cell.parentElement.rowIndex + 1) + ') td');\n\n        if (monthHeader) {\n          setStyleAttribute(monthHeader, {\n            'height': height + 'px'\n          });\n        }\n      }\n    }\n  }, {\n    key: \"getFirstChild\",\n    value: function getFirstChild(index) {\n      var query = '.' + CONTENT_TABLE_CLASS + ' tbody td';\n      var groupIndex = '';\n\n      if (this.parent.activeViewOptions.group.resources.length > 0) {\n        groupIndex = '[data-group-index=\"' + index.toString() + '\"]';\n      }\n\n      var td = this.parent.element.querySelector(query + groupIndex);\n      return td;\n    }\n  }, {\n    key: \"updateBlockElements\",\n    value: function updateBlockElements() {\n      var blockElement = [].slice.call(this.element.querySelectorAll('.' + BLOCK_APPOINTMENT_CLASS));\n\n      var _iterator44 = _createForOfIteratorHelper(blockElement),\n          _step44;\n\n      try {\n        for (_iterator44.s(); !(_step44 = _iterator44.n()).done;) {\n          var element = _step44.value;\n          var resIndex = parseInt(element.getAttribute('data-group-index'), 10);\n          var firstChild = this.getFirstChild(resIndex);\n          element.style.height = firstChild.offsetHeight + 'px';\n          var width = Math.round(element.offsetWidth / firstChild.offsetWidth);\n          element.style.width = firstChild.offsetWidth * width + 'px';\n        }\n      } catch (err) {\n        _iterator44.e(err);\n      } finally {\n        _iterator44.f();\n      }\n\n      var blockIndicator = [].slice.call(this.element.querySelectorAll('.' + BLOCK_INDICATOR_CLASS));\n\n      var _iterator45 = _createForOfIteratorHelper(blockIndicator),\n          _step45;\n\n      try {\n        for (_iterator45.s(); !(_step45 = _iterator45.n()).done;) {\n          var _element = _step45.value;\n\n          var _resIndex = parseInt(_element.getAttribute('data-group-index'), 10);\n\n          _element.style.top = this.getRowTop(_resIndex) + this.getFirstChild(_resIndex).offsetHeight - BLOCK_INDICATOR_HEIGHT + 'px';\n        }\n      } catch (err) {\n        _iterator45.e(err);\n      } finally {\n        _iterator45.f();\n      }\n    }\n  }, {\n    key: \"getStartTime\",\n    value: function getStartTime(event, eventData) {\n      var startTime = event[this.fields.startTime];\n      var schedule = getStartEndHours(startTime, this.startHour, this.endHour);\n\n      if (schedule.startHour.getTime() >= eventData[this.fields.startTime]) {\n        startTime = schedule.startHour;\n      } else if (schedule.endHour.getTime() <= eventData[this.fields.startTime]) {\n        startTime = this.getNextDay(schedule.startHour, eventData);\n      } else {\n        startTime = eventData[this.fields.startTime];\n      } // To overcome the overflow\n\n\n      eventData.trimStartTime = event[this.fields.isAllDay] ? schedule.startHour : eventData[this.fields.startTime];\n      return startTime;\n    }\n  }, {\n    key: \"getNextDay\",\n    value: function getNextDay(startTime, eventData) {\n      var startDate;\n\n      for (var i = 1; i <= this.dateRender.length; i++) {\n        startDate = addDays(startTime, i);\n\n        if (this.parent.getIndexOfDate(this.dateRender, resetTime(new Date(startTime.getTime()))) !== -1) {\n          eventData.count = eventData.count - 1;\n          return startDate;\n        }\n      }\n\n      return startDate;\n    }\n  }, {\n    key: \"getEndTime\",\n    value: function getEndTime(event, eventData) {\n      var endTime = event[this.fields.endTime];\n      var schedule = getStartEndHours(endTime, this.startHour, this.endHour);\n\n      if (this.parent.currentView === 'TimelineMonth' || !this.parent.activeViewOptions.timeScale.enable || this.parent.activeViewOptions.headerRows.length > 0 && this.parent.activeViewOptions.headerRows.slice(-1)[0].option !== 'Hour') {\n        endTime = eventData[this.fields.endTime];\n      } else {\n        endTime = eventData[this.fields.endTime];\n\n        if (schedule.endHour.getTime() <= eventData[this.fields.endTime]) {\n          endTime = schedule.endHour;\n        }\n\n        if (schedule.startHour.getTime() >= eventData[this.fields.endTime].getTime() && !event.isAllDay) {\n          endTime = this.getPreviousDay(schedule.startHour, schedule.endHour, eventData);\n        }\n      } // To overcome the overflow\n\n\n      eventData.trimEndTime = event[this.fields.isAllDay] ? schedule.endHour : eventData[this.fields.endTime];\n      return endTime;\n    }\n  }, {\n    key: \"getPreviousDay\",\n    value: function getPreviousDay(startTime, endTime, eventData) {\n      for (var i = 1; i <= this.dateRender.length; i++) {\n        var endDate = addDays(endTime, -i);\n\n        if (this.parent.getIndexOfDate(this.dateRender, resetTime(new Date(startTime.getTime()))) !== -1) {\n          endDate = resetTime(new Date(endDate.getTime()));\n          endDate.setHours(endTime.getHours(), endTime.getMinutes(), endTime.getSeconds());\n          var count = eventData.count;\n          var actualEndTime = eventData[this.fields.endTime];\n          eventData.count = actualEndTime.getHours() !== 0 || actualEndTime.getMinutes() !== 0 ? count - 1 : count;\n          return endDate;\n        }\n      }\n\n      return eventData[this.fields.endTime];\n    }\n  }, {\n    key: \"getEventWidth\",\n    value: function getEventWidth(startDate, endDate, isAllDay, count) {\n      if (this.renderType === 'day' || isAllDay) {\n        return count * this.slotsPerDay * this.cellWidth;\n      }\n\n      if (this.isSameDay(startDate, endDate)) {\n        return this.getSameDayEventsWidth(startDate, endDate);\n      } else {\n        return this.getSpannedEventsWidth(startDate, endDate, count);\n      }\n    }\n  }, {\n    key: \"getSameDayEventsWidth\",\n    value: function getSameDayEventsWidth(startDate, endDate) {\n      return (getUniversalTime(endDate) - getUniversalTime(startDate)) / MS_PER_MINUTE * (this.cellWidth * this.slotCount) / this.interval;\n    }\n  }, {\n    key: \"getSpannedEventsWidth\",\n    value: function getSpannedEventsWidth(startDate, endDate, diffInDays) {\n      var width = diffInDays * this.slotsPerDay * this.cellWidth;\n      var endWidth;\n      var start = getStartEndHours(resetTime(new Date(startDate.getTime())), this.startHour, this.endHour);\n      var startWidth = this.getSameDayEventsWidth(start.startHour, startDate);\n\n      if (this.parent.getIndexOfDate(this.dateRender, resetTime(new Date(endDate.getTime()))) === -1) {\n        endWidth = 0;\n      } else {\n        var end = getStartEndHours(resetTime(new Date(endDate.getTime())), this.startHour, this.endHour);\n        endWidth = this.getSameDayEventsWidth(endDate, end.endHour);\n        endWidth = this.slotsPerDay * this.cellWidth === endWidth ? 0 : endWidth;\n      }\n\n      var spannedWidth = startWidth + endWidth;\n      return width > spannedWidth ? width - spannedWidth : width - startWidth;\n    }\n  }, {\n    key: \"isSameDay\",\n    value: function isSameDay(startTime, endTime) {\n      var startDay = this.parent.getIndexOfDate(this.dateRender, resetTime(new Date(startTime.getTime())));\n      var endDay = this.parent.getIndexOfDate(this.dateRender, resetTime(new Date(endTime.getTime())));\n      return startDay === endDay;\n    }\n  }, {\n    key: \"getAppointmentLeft\",\n    value: function getAppointmentLeft(schedule, startTime, day) {\n      var slotTd = this.isSameDay(startTime, schedule.startHour) ? (getUniversalTime(startTime) - getUniversalTime(schedule.startHour)) / (MS_PER_MINUTE * this.interval) * this.slotCount : 0;\n\n      if (day === 0) {\n        return slotTd;\n      } else {\n        var daySlot = Math.round((getUniversalTime(schedule.endHour) - getUniversalTime(schedule.startHour)) / MS_PER_MINUTE / this.interval * this.slotCount);\n        return daySlot * day + slotTd;\n      }\n    }\n  }, {\n    key: \"getPosition\",\n    value: function getPosition(startTime, endTime, isAllDay, day) {\n      if (this.renderType === 'day' || isAllDay) {\n        return day * this.slotsPerDay * this.cellWidth;\n      }\n\n      var currentDate = resetTime(new Date(this.dateRender[day].getTime()));\n      var schedule = getStartEndHours(currentDate, this.startHour, this.endHour);\n      var cellIndex;\n\n      if (schedule.endHour.getTime() <= endTime.getTime() && schedule.startHour.getTime() >= startTime.getTime()) {\n        cellIndex = this.getAppointmentLeft(schedule, schedule.startHour, day);\n      } else if (schedule.endHour.getTime() <= endTime.getTime()) {\n        cellIndex = this.getAppointmentLeft(schedule, startTime, day);\n      } else if (schedule.startHour.getTime() >= startTime.getTime()) {\n        cellIndex = this.getAppointmentLeft(schedule, schedule.startHour, day);\n      } else {\n        cellIndex = this.getAppointmentLeft(schedule, startTime, day);\n      }\n\n      return cellIndex * this.cellWidth;\n    }\n  }, {\n    key: \"getFilterEvents\",\n    value: function getFilterEvents(startDate, endDate, startTime, endTime, gIndex, eventsList) {\n      if (this.renderType === 'day') {\n        return this.getFilteredEvents(startDate, endDate, gIndex, eventsList);\n      } else {\n        return this.getFilteredEvents(startTime, endTime, gIndex, eventsList);\n      }\n    }\n  }, {\n    key: \"isAlreadyAvail\",\n    value: function isAlreadyAvail(appPos, cellTd) {\n      var moreIndicator = [].slice.call(cellTd.querySelectorAll('.' + MORE_INDICATOR_CLASS));\n\n      for (var i = 0; i < moreIndicator.length; i++) {\n        var indicatorPos = void 0;\n\n        if (moreIndicator) {\n          indicatorPos = this.parent.enableRtl ? moreIndicator[i].style.right : moreIndicator[i].style.left;\n        }\n\n        if (parseInt(indicatorPos, 10) === Math.floor(appPos)) {\n          return true;\n        }\n      }\n\n      return false;\n    }\n  }, {\n    key: \"getRowTop\",\n    value: function getRowTop(resIndex) {\n      if (this.parent.activeViewOptions.group.resources.length > 0 && !this.parent.uiStateValues.isGroupAdaptive) {\n        return this.parent.element.querySelector('.' + CONTENT_WRAP_CLASS + ' ' + 'tbody td[data-group-index=\"' + resIndex.toString() + '\"]').offsetTop;\n      }\n\n      return 0;\n    }\n  }, {\n    key: \"getCellTd\",\n    value: function getCellTd() {\n      var wrapIndex = this.parent.uiStateValues.isGroupAdaptive ? 0 : this.rowIndex;\n      return this.eventContainers[wrapIndex];\n    }\n  }, {\n    key: \"renderBlockIndicator\",\n    value: function renderBlockIndicator(cellTd, position, resIndex) {\n      // No need to render block icon for Year, Month and Week header rows\n      if (this.parent.headerRows.length > 0 && (this.parent.headerRows[this.parent.headerRows.length - 1].option !== 'Hour' || this.parent.headerRows[this.parent.headerRows.length - 1].option !== 'Date')) {\n        return;\n      }\n\n      position = Math.floor(position / this.cellWidth) * this.cellWidth + this.cellWidth - BLOCK_INDICATOR_WIDTH;\n\n      if (!this.isAlreadyAvail(position, cellTd)) {\n        var blockIndicator = createElement('div', {\n          className: 'e-icons ' + BLOCK_INDICATOR_CLASS\n        });\n\n        if (this.parent.activeViewOptions.group.resources.length > 0) {\n          blockIndicator.setAttribute('data-group-index', resIndex.toString());\n        }\n\n        if (this.parent.enableRtl) {\n          blockIndicator.style.right = position + 'px';\n        } else {\n          blockIndicator.style.left = position + 'px';\n        }\n\n        blockIndicator.style.top = this.getRowTop(resIndex) + this.cellHeight - BLOCK_INDICATOR_HEIGHT + 'px';\n        this.renderElement(cellTd, blockIndicator);\n      }\n    } // eslint-disable-next-line @typescript-eslint/no-unused-vars\n\n  }, {\n    key: \"setMaxEventHeight\",\n    value: function setMaxEventHeight(event, cell) {\n      setStyleAttribute(event, {\n        'height': this.cellHeight - (this.maxHeight ? 0 : EVENT_GAP$1) - (this.maxHeight ? 0 : this.moreIndicatorHeight) + 'px'\n      });\n    }\n  }, {\n    key: \"destroy\",\n    value: function destroy() {\n      this.renderType = null;\n      this.eventContainers = null;\n      this.dayLength = null;\n      this.content = null;\n\n      _get(_getPrototypeOf(TimelineEvent.prototype), \"destroy\", this).call(this);\n\n      this.parent = null;\n    }\n  }]);\n\n  return TimelineEvent;\n}(MonthEvent);\n/* eslint-disable @typescript-eslint/no-explicit-any */\n\n/**\n * Inline Edit interactions\n */\n\n\nvar InlineEdit = /*#__PURE__*/function () {\n  function InlineEdit(parent) {\n    _classCallCheck(this, InlineEdit);\n\n    this.parent = parent;\n    this.parent.on(inlineClick, this.inlineEdit, this);\n  }\n\n  _createClass(InlineEdit, [{\n    key: \"inlineEdit\",\n    value: function inlineEdit(args) {\n      if (this.parent.quickPopup) {\n        this.parent.quickPopup.quickPopupHide();\n      }\n\n      var moreWrapper = this.parent.element.querySelector('.e-more-popup-wrapper ');\n\n      if (moreWrapper && moreWrapper.classList.contains(POPUP_OPEN)) {\n        this.parent.quickPopup.morePopup.hide();\n      }\n\n      if (args.type === 'Cell') {\n        this.removeInlineAppointmentElement();\n        this.cellEdit(args);\n      } else {\n        if (this.parent.element.querySelector('.' + INLINE_SUBJECT_CLASS) !== args.element.querySelector('.' + INLINE_SUBJECT_CLASS)) {\n          this.removeInlineAppointmentElement();\n        }\n\n        this.eventEdit(args);\n      }\n    }\n  }, {\n    key: \"cellEdit\",\n    value: function cellEdit(args) {\n      var saveObj = this.generateEventData();\n      var cellIndex = args.element.cellIndex;\n      var count = this.getEventDaysCount(saveObj);\n\n      if (count > 1) {\n        count = Math.round(count);\n        count--;\n        cellIndex = cellIndex - count;\n      }\n\n      var start = resetTime(new Date('' + saveObj[this.parent.eventFields.startTime])).getTime();\n      var end = resetTime(new Date('' + saveObj[this.parent.eventFields.endTime])).getTime();\n      var resIndex = args.groupIndex || 0;\n\n      if (this.parent.currentView === 'Day' || this.parent.currentView === 'Week' || this.parent.currentView === 'WorkWeek') {\n        var _dayIndex = saveObj[this.parent.eventFields.startTime].getDay();\n\n        this.createVerticalViewInline(saveObj, _dayIndex, resIndex, cellIndex);\n      } else if (this.parent.currentView === 'Month') {\n        this.createMonthViewInline(saveObj, resIndex, start, end);\n      } else {\n        this.createTimelineViewInline(saveObj, start, end, resIndex);\n      }\n\n      var inlineSubject = this.parent.element.querySelector('.' + INLINE_SUBJECT_CLASS);\n\n      if (inlineSubject) {\n        inlineSubject.focus();\n      }\n    }\n  }, {\n    key: \"eventEdit\",\n    value: function eventEdit(args) {\n      var inlineSubject = args.element.querySelector('.' + INLINE_SUBJECT_CLASS);\n      var subject;\n\n      if (inlineSubject) {\n        subject = inlineSubject.value;\n      } else {\n        var subEle = args.element.querySelector('.' + SUBJECT_CLASS);\n        var timeEle = args.element.querySelector('.' + APPOINTMENT_TIME);\n        subject = subEle.innerText;\n        inlineSubject = createElement('input', {\n          className: INLINE_SUBJECT_CLASS,\n          attrs: {\n            value: subject\n          }\n        });\n        addClass([subEle], DISABLE_CLASS);\n\n        if (closest(args.element, '.' + MORE_POPUP_WRAPPER_CLASS)) {\n          args.element.insertBefore(inlineSubject, subEle);\n        } else if (['Agenda', 'MonthAgenda'].indexOf(this.parent.currentView) > -1) {\n          var subjectWrap = args.element.querySelector('.' + SUBJECT_WRAP);\n          subjectWrap.insertBefore(inlineSubject, subjectWrap.firstChild);\n        } else {\n          var elementSelector = ['TimelineDay', 'TimelineWeek', 'TimelineWorkWeek', 'TimelineMonth'].indexOf(this.parent.currentView) > -1 ? '.e-inner-wrap' : '.e-appointment-details';\n          args.element.querySelector(elementSelector).insertBefore(inlineSubject, timeEle);\n        }\n      }\n\n      inlineSubject.focus();\n      inlineSubject.setSelectionRange(subject.length, subject.length);\n    }\n  }, {\n    key: \"createVerticalViewInline\",\n    value: function createVerticalViewInline(saveObj, dayIndex, resIndex, daysCount) {\n      var count = this.getEventDaysCount(saveObj);\n      var verticalEvent = new VerticalEvent(this.parent);\n      verticalEvent.initializeValues();\n      var index = verticalEvent.dateRender[resIndex].map(function (date) {\n        return date.getDay();\n      }).indexOf(dayIndex);\n\n      if (count >= 1) {\n        var _verticalEvent$slots;\n\n        verticalEvent.allDayElement = [].slice.call(this.parent.element.querySelectorAll('.' + ALLDAY_CELLS_CLASS));\n\n        (_verticalEvent$slots = verticalEvent.slots).push.apply(_verticalEvent$slots, _toConsumableArray(this.parent.activeView.renderDates.map(function (date) {\n          return +date;\n        })));\n\n        var allDayElements = [].slice.call(this.parent.element.querySelectorAll('.' + ALLDAY_APPOINTMENT_CLASS));\n        var allDayLevel = 0;\n\n        if (allDayElements.length > 0) {\n          allDayLevel = Math.floor(this.parent.element.querySelector('.' + ALLDAY_ROW_CLASS).getBoundingClientRect().height / allDayElements[0].offsetHeight) - 1;\n        }\n\n        verticalEvent.allDayLevel = allDayLevel;\n        verticalEvent.renderAllDayEvents(saveObj, index, resIndex, daysCount, this.parent.allowInline);\n      } else {\n        verticalEvent.renderNormalEvents(saveObj, index, resIndex, daysCount, this.parent.allowInline);\n      }\n    }\n  }, {\n    key: \"createMonthViewInline\",\n    value: function createMonthViewInline(saveObj, index, start, end) {\n      var count = this.getEventDaysCount(saveObj);\n      var saveObject = this.parent.eventBase.cloneEventObject(saveObj, start, end, count, false, false);\n      var monthEvent = new MonthEvent(this.parent);\n      monthEvent.dateRender = this.parent.activeView.renderDates;\n      monthEvent.inlineValue = this.parent.allowInline;\n      var renderDates = this.parent.activeView.renderDates;\n      var workDays = this.parent.activeViewOptions.workDays;\n      var monthCellSelector = '.' + WORK_CELLS_CLASS;\n\n      if (this.parent.activeViewOptions.group.resources.length > 0) {\n        monthCellSelector += '[data-group-index=\"' + index + '\"]';\n        var resourceData = this.parent.resourceBase.lastResourceLevel[index];\n        renderDates = resourceData.renderDates;\n        workDays = resourceData.workDays;\n      }\n\n      monthEvent.workCells = [].slice.call(this.parent.element.querySelectorAll(monthCellSelector));\n      monthEvent.cellWidth = monthEvent.workCells[0].offsetWidth;\n      monthEvent.cellHeight = monthEvent.workCells[0].offsetHeight;\n      monthEvent.eventHeight = getElementHeightFromClass(this.parent.monthModule.element, APPOINTMENT_CLASS);\n      monthEvent.getSlotDates(workDays);\n      var filteredDates = monthEvent.getRenderedDates(renderDates);\n      var spannedEvents = monthEvent.splitEvent(saveObject, filteredDates || renderDates);\n\n      var _iterator46 = _createForOfIteratorHelper(spannedEvents),\n          _step46;\n\n      try {\n        for (_iterator46.s(); !(_step46 = _iterator46.n()).done;) {\n          var eventData = _step46.value;\n          monthEvent.renderEvents(eventData, index);\n        }\n      } catch (err) {\n        _iterator46.e(err);\n      } finally {\n        _iterator46.f();\n      }\n\n      var inlineSubject = this.parent.element.querySelector('.' + INLINE_SUBJECT_CLASS);\n      inlineSubject.focus();\n    }\n  }, {\n    key: \"createTimelineViewInline\",\n    value: function createTimelineViewInline(saveObj, start, end, resIndex) {\n      var count = this.getEventDaysCount(saveObj);\n      var saveObject = this.parent.eventBase.cloneEventObject(saveObj, start, end, count, false, false);\n      var timelineView = new TimelineEvent(this.parent, this.parent.activeViewOptions.timeScale.enable ? 'hour' : 'day');\n      timelineView.dateRender = this.parent.activeView.renderDates;\n      timelineView.eventContainers = [].slice.call(this.parent.element.querySelectorAll('.' + APPOINTMENT_CONTAINER_CLASS));\n      var workCell = this.parent.element.querySelector('.' + WORK_CELLS_CLASS);\n      timelineView.inlineValue = this.parent.allowInline;\n      timelineView.cellWidth = workCell.offsetWidth;\n      timelineView.cellHeight = workCell.offsetHeight;\n      var dayLength = this.parent.element.querySelectorAll('.' + CONTENT_TABLE_CLASS + ' tbody tr').length === 0 ? 0 : this.parent.element.querySelectorAll('.' + CONTENT_TABLE_CLASS + ' tbody tr')[0].children.length;\n      timelineView.slotsPerDay = dayLength / timelineView.dateRender.length;\n      timelineView.eventHeight = getElementHeightFromClass(timelineView.element, APPOINTMENT_CLASS);\n      timelineView.renderEvents(saveObject, resIndex);\n    }\n  }, {\n    key: \"getEventDaysCount\",\n    value: function getEventDaysCount(saveObj) {\n      var startDate = saveObj[this.parent.eventFields.startTime];\n      var endDate = saveObj[this.parent.eventFields.endTime];\n      var daysCount = Math.abs(endDate.getTime() - startDate.getTime()) / MS_PER_DAY;\n      return daysCount;\n    }\n  }, {\n    key: \"generateEventData\",\n    value: function generateEventData(target) {\n      var inlineElement = this.parent.element.querySelector('.' + INLINE_SUBJECT_CLASS);\n      var subject = inlineElement ? inlineElement.value : target ? target.innerHTML : '';\n      var saveObj = {};\n      saveObj[this.parent.eventFields.id] = this.parent.eventBase.getEventMaxID();\n      saveObj[this.parent.eventFields.subject] = subject;\n      saveObj[this.parent.eventFields.startTime] = this.parent.activeCellsData.startTime;\n      saveObj[this.parent.eventFields.endTime] = this.parent.activeCellsData.endTime;\n      saveObj[this.parent.eventFields.isAllDay] = this.parent.activeCellsData.isAllDay;\n      this.parent.eventWindow.setDefaultValueToObject(saveObj);\n\n      if (this.parent.resourceBase) {\n        this.parent.resourceBase.setResourceValues(saveObj, this.parent.activeCellsData.groupIndex);\n      }\n\n      return saveObj;\n    }\n  }, {\n    key: \"documentClick\",\n    value: function documentClick() {\n      var target = this.parent.element.querySelector('.' + INLINE_SUBJECT_CLASS);\n\n      if (target && target.value !== '') {\n        this.inlineCrudActions(target);\n      }\n    }\n  }, {\n    key: \"inlineCrudActions\",\n    value: function inlineCrudActions(target) {\n      if (closest(target, '.' + INLINE_APPOINTMENT_CLASS)) {\n        var saveObj = this.generateEventData(target);\n        this.parent.addEvent(saveObj);\n      } else {\n        var eventTarget = closest(target, '.' + APPOINTMENT_CLASS);\n        var eventDetails = this.parent.getEventDetails(eventTarget);\n        eventDetails[this.parent.eventFields.subject] = target.value;\n        var currentAction;\n\n        if (eventDetails[this.parent.eventFields.id] === eventDetails[this.parent.eventFields.recurrenceID]) {\n          currentAction = 'EditOccurrence';\n          eventDetails[this.parent.eventFields.id] = this.parent.eventBase.getEventMaxID();\n        }\n\n        this.parent.saveEvent(eventDetails, currentAction);\n      }\n\n      this.removeInlineAppointmentElement();\n    }\n  }, {\n    key: \"createInlineAppointmentElement\",\n    value: function createInlineAppointmentElement(inlineData) {\n      var inlineAppointmentElement = createElement('div', {\n        className: APPOINTMENT_CLASS + ' ' + INLINE_APPOINTMENT_CLASS\n      });\n      var inlineDetails = createElement('div', {\n        className: APPOINTMENT_DETAILS\n      });\n      inlineAppointmentElement.appendChild(inlineDetails);\n      var inline = createElement('input', {\n        className: INLINE_SUBJECT_CLASS\n      });\n      inlineDetails.appendChild(inline);\n\n      if (inlineData) {\n        this.parent.eventBase.applyResourceColor(inlineAppointmentElement, inlineData, 'backgroundColor');\n      }\n\n      return inlineAppointmentElement;\n    }\n  }, {\n    key: \"removeInlineAppointmentElement\",\n    value: function removeInlineAppointmentElement() {\n      var inlineAppointment = [].slice.call(this.parent.element.querySelectorAll('.' + INLINE_APPOINTMENT_CLASS));\n\n      if (inlineAppointment.length > 0) {\n        inlineAppointment.forEach(function (node) {\n          return remove(node);\n        });\n      }\n\n      var inlineSubject = this.parent.element.querySelector('.' + INLINE_SUBJECT_CLASS);\n\n      if (inlineSubject) {\n        var appointmentSubject = closest(inlineSubject, '.' + APPOINTMENT_CLASS);\n        removeClass([appointmentSubject.querySelector('.' + SUBJECT_CLASS)], DISABLE_CLASS);\n        remove(inlineSubject);\n      }\n    }\n  }, {\n    key: \"destroy\",\n    value: function destroy() {\n      this.parent.off(inlineClick, this.inlineEdit);\n    }\n  }]);\n\n  return InlineEdit;\n}();\n/* eslint-disable @typescript-eslint/no-explicit-any */\n\n/**\n * Appointment window field validation\n */\n\n\nvar FieldValidator = /*#__PURE__*/function () {\n  function FieldValidator() {\n    _classCallCheck(this, FieldValidator);\n  }\n\n  _createClass(FieldValidator, [{\n    key: \"renderFormValidator\",\n    value: function renderFormValidator(form, rules, element, locale) {\n      var _this26 = this;\n\n      this.element = element;\n      this.formObj = new FormValidator(form, {\n        locale: locale,\n        customPlacement: function customPlacement(inputElement, error) {\n          _this26.errorPlacement(inputElement, error);\n        },\n        rules: rules,\n        validationComplete: function validationComplete(args) {\n          _this26.validationComplete(args);\n        },\n        focusout: function focusout(args) {\n          _this26.focusOut(args);\n        }\n      });\n    }\n  }, {\n    key: \"focusOut\",\n    value: function focusOut(args) {\n      var target = args.relatedTarget;\n\n      if (target && (target.classList.contains('e-dlg-closeicon-btn') || target.classList.contains('e-close') || target.classList.contains(ALLDAY_CELLS_CLASS) || target.classList.contains(HEADER_CELLS_CLASS) || target.classList.contains(QUICK_POPUP_EVENT_DETAILS_CLASS) || target.classList.contains(WORK_CELLS_CLASS) || target.classList.contains(EVENT_WINDOW_CANCEL_BUTTON_CLASS))) {\n        this.ignoreError = true;\n      } else {\n        this.ignoreError = false;\n      }\n    }\n  }, {\n    key: \"validationComplete\",\n    value: function validationComplete(args) {\n      var elem = this.element.querySelector('#' + args.inputName + '_Error');\n\n      if (elem) {\n        elem.style.display = args.status === 'failure' ? '' : 'none';\n      }\n    }\n  }, {\n    key: \"errorPlacement\",\n    value: function errorPlacement(inputElement, error) {\n      var id = error.getAttribute('for');\n      var elem = this.element.querySelector('#' + id + '_Error');\n\n      if (!elem && !this.ignoreError) {\n        this.createTooltip(inputElement, error, id, '');\n      }\n\n      if (!isNullOrUndefined(elem)) {\n        elem.querySelector('.e-error').innerHTML = error.innerHTML;\n      }\n    }\n  }, {\n    key: \"createTooltip\",\n    value: function createTooltip(element, error, name, display) {\n      var dlgContent;\n      var client;\n      var inputClient = element.getBoundingClientRect();\n\n      if (this.element.classList.contains(POPUP_WRAPPER_CLASS)) {\n        dlgContent = this.element;\n        client = this.element.getBoundingClientRect();\n      } else {\n        dlgContent = this.element.querySelector('.e-schedule-dialog .e-dlg-content');\n        client = dlgContent.getBoundingClientRect();\n      }\n\n      var div = createElement('div', {\n        className: 'e-tooltip-wrap e-popup ' + ERROR_VALIDATION_CLASS,\n        id: name + '_Error',\n        styles: 'display:' + display + ';top:' + (inputClient.bottom - client.top + dlgContent.scrollTop + 9) + 'px;left:' + (inputClient.left - client.left + dlgContent.scrollLeft + inputClient.width / 2) + 'px;'\n      });\n      var content = createElement('div', {\n        className: 'e-tip-content'\n      });\n      content.appendChild(error);\n      var arrow = createElement('div', {\n        className: 'e-arrow-tip e-tip-top'\n      });\n      arrow.appendChild(createElement('div', {\n        className: 'e-arrow-tip-outer e-tip-top'\n      }));\n      arrow.appendChild(createElement('div', {\n        className: 'e-arrow-tip-inner e-tip-top'\n      }));\n      div.appendChild(content);\n      div.appendChild(arrow);\n      dlgContent.appendChild(div);\n      div.style.left = parseInt(div.style.left, 10) - div.offsetWidth / 2 + 'px';\n    }\n  }, {\n    key: \"destroyToolTip\",\n    value: function destroyToolTip() {\n      if (this.element) {\n        var elements = [].slice.call(this.element.querySelectorAll('.' + ERROR_VALIDATION_CLASS));\n\n        var _iterator47 = _createForOfIteratorHelper(elements),\n            _step47;\n\n        try {\n          for (_iterator47.s(); !(_step47 = _iterator47.n()).done;) {\n            var elem = _step47.value;\n            remove(elem);\n          }\n        } catch (err) {\n          _iterator47.e(err);\n        } finally {\n          _iterator47.f();\n        }\n      }\n\n      if (this.formObj && this.formObj.element) {\n        this.formObj.reset();\n      }\n    }\n  }, {\n    key: \"destroy\",\n    value: function destroy() {\n      if (this.formObj && this.formObj.element && !this.formObj.isDestroyed) {\n        this.formObj.destroy();\n      }\n\n      this.formObj = null;\n      this.element = null;\n    }\n  }]);\n\n  return FieldValidator;\n}();\n/* eslint-disable @typescript-eslint/no-explicit-any */\n\n\nvar EVENT_FIELD = 'e-field';\n/**\n * Quick Popups interactions\n */\n\nvar QuickPopups = /*#__PURE__*/function () {\n  function QuickPopups(parent) {\n    _classCallCheck(this, QuickPopups);\n\n    this.isMultipleEventSelect = false;\n    this.isCrudAction = false;\n    this.parent = parent;\n    this.l10n = this.parent.localeObj;\n    this.fieldValidator = new FieldValidator();\n    this.render();\n    this.addEventListener();\n  }\n\n  _createClass(QuickPopups, [{\n    key: \"render\",\n    value: function render() {\n      this.renderQuickPopup();\n      this.renderMorePopup();\n      this.renderQuickDialog();\n    }\n  }, {\n    key: \"renderQuickPopup\",\n    value: function renderQuickPopup() {\n      var quickPopupWrapper = createElement('div', {\n        className: POPUP_WRAPPER_CLASS + ' e-popup-close'\n      });\n\n      if (this.parent.isAdaptive) {\n        document.body.appendChild(quickPopupWrapper);\n        addClass([quickPopupWrapper], DEVICE_CLASS);\n      } else {\n        this.parent.element.appendChild(quickPopupWrapper);\n      }\n\n      this.quickPopup = new Popup(quickPopupWrapper, {\n        targetType: this.parent.isAdaptive ? 'container' : 'relative',\n        enableRtl: this.parent.enableRtl,\n        open: this.quickPopupOpen.bind(this),\n        close: this.quickPopupClose.bind(this),\n        hideAnimation: this.parent.isAdaptive ? {\n          name: 'ZoomOut'\n        } : {\n          name: 'FadeOut',\n          duration: 150\n        },\n        showAnimation: this.parent.isAdaptive ? {\n          name: 'ZoomIn'\n        } : {\n          name: 'FadeIn',\n          duration: 150\n        },\n        collision: this.parent.isAdaptive ? {\n          X: 'fit',\n          Y: 'fit'\n        } : this.parent.enableRtl ? {\n          X: 'flip',\n          Y: 'fit'\n        } : {\n          X: 'none',\n          Y: 'fit'\n        },\n        position: this.parent.isAdaptive || this.parent.enableRtl ? {\n          X: 'left',\n          Y: 'top'\n        } : {\n          X: 'right',\n          Y: 'top'\n        },\n        viewPortElement: this.parent.isAdaptive ? document.body : this.parent.element,\n        zIndex: this.parent.isAdaptive ? 1004 : 3\n      });\n    }\n  }, {\n    key: \"renderMorePopup\",\n    value: function renderMorePopup() {\n      var moreEventPopup = \"<div class=\\\"\".concat(MORE_EVENT_POPUP_CLASS, \"\\\"><div class=\\\"\").concat(MORE_EVENT_HEADER_CLASS, \"\\\">\") + \"<div class=\\\"\".concat(MORE_EVENT_CLOSE_CLASS, \"\\\" title=\\\"\").concat(this.l10n.getConstant('close'), \"\\\" tabindex=\\\"0\\\"></div>\") + \"<div class=\\\"\".concat(MORE_EVENT_DATE_HEADER_CLASS, \"\\\"><div class=\\\"\").concat(MORE_EVENT_HEADER_DAY_CLASS, \"\\\"></div>\") + \"<div class=\\\"\".concat(MORE_EVENT_HEADER_DATE_CLASS, \" \").concat(NAVIGATE_CLASS, \"\\\" tabindex=\\\"0\\\"></div></div></div></div>\");\n      var moreEventWrapper = createElement('div', {\n        className: MORE_POPUP_WRAPPER_CLASS + ' e-popup-close',\n        innerHTML: moreEventPopup\n      });\n\n      if (this.parent.isAdaptive) {\n        document.body.appendChild(moreEventWrapper);\n        addClass([moreEventWrapper], DEVICE_CLASS);\n      } else {\n        this.parent.element.appendChild(moreEventWrapper);\n      }\n\n      this.morePopup = new Popup(moreEventWrapper, {\n        targetType: this.parent.isAdaptive ? 'container' : 'relative',\n        enableRtl: this.parent.enableRtl,\n        hideAnimation: {\n          name: 'ZoomOut',\n          duration: 300\n        },\n        showAnimation: {\n          name: 'ZoomIn',\n          duration: 300\n        },\n        open: this.morePopupOpen.bind(this),\n        close: this.morePopupClose.bind(this),\n        collision: this.parent.isAdaptive ? {\n          X: 'fit',\n          Y: 'fit'\n        } : this.parent.enableRtl ? {\n          X: 'flip',\n          Y: 'fit'\n        } : {\n          X: 'flip',\n          Y: 'flip'\n        },\n        viewPortElement: this.parent.isAdaptive ? document.body : this.parent.element,\n        zIndex: this.parent.isAdaptive ? 1002 : 2\n      });\n      var closeButton = this.morePopup.element.querySelector('.' + MORE_EVENT_CLOSE_CLASS);\n      this.renderButton('e-round', ICON + ' ' + CLOSE_ICON_CLASS, false, closeButton, this.closeClick);\n      EventHandler.add(this.morePopup.element.querySelector('.' + MORE_EVENT_HEADER_DATE_CLASS), 'click', this.navigationClick, this);\n    }\n  }, {\n    key: \"renderQuickDialog\",\n    value: function renderQuickDialog() {\n      var buttonModel = [{\n        buttonModel: {\n          cssClass: 'e-quick-alertok e-flat',\n          isPrimary: true\n        },\n        click: this.dialogButtonClick.bind(this)\n      }, {\n        buttonModel: {\n          cssClass: 'e-quick-alertcancel e-flat',\n          isPrimary: false\n        },\n        click: this.dialogButtonClick.bind(this)\n      }, {\n        buttonModel: {\n          cssClass: 'e-quick-dialog-cancel e-disable e-flat',\n          isPrimary: false\n        },\n        click: this.dialogButtonClick.bind(this)\n      }];\n\n      if (this.parent.eventSettings.editFollowingEvents) {\n        var followingSeriesButton = {\n          buttonModel: {\n            cssClass: 'e-quick-alertfollowing e-flat',\n            isPrimary: false\n          },\n          click: this.dialogButtonClick.bind(this)\n        };\n        buttonModel.splice(1, 0, followingSeriesButton);\n      }\n\n      this.quickDialog = new Dialog({\n        animationSettings: {\n          effect: 'Zoom'\n        },\n        buttons: buttonModel,\n        cssClass: QUICK_DIALOG_CLASS,\n        closeOnEscape: true,\n        enableRtl: this.parent.enableRtl,\n        beforeClose: this.beforeQuickDialogClose.bind(this),\n        isModal: true,\n        position: {\n          X: 'center',\n          Y: 'center'\n        },\n        showCloseIcon: true,\n        target: document.body,\n        visible: false,\n        width: 'auto'\n      });\n      var dialogElement = createElement('div', {\n        id: this.parent.element.id + 'QuickDialog'\n      });\n      this.parent.element.appendChild(dialogElement);\n      this.quickDialog.appendTo(dialogElement);\n      var okButton = this.quickDialog.element.querySelector('.' + QUICK_DIALOG_ALERT_OK);\n\n      if (okButton) {\n        okButton.setAttribute('aria-label', this.l10n.getConstant('occurrence'));\n        okButton.setAttribute('aria-label', okButton.innerHTML);\n      }\n\n      var cancelButton = this.quickDialog.element.querySelector('.' + QUICK_DIALOG_ALERT_CANCEL);\n\n      if (cancelButton) {\n        cancelButton.setAttribute('aria-label', this.l10n.getConstant('series'));\n        cancelButton.setAttribute('aria-label', cancelButton.innerHTML);\n      }\n\n      if (this.quickDialog.element.querySelector('.e-dlg-closeicon-btn')) {\n        this.quickDialog.element.querySelector('.e-dlg-closeicon-btn').setAttribute('title', this.l10n.getConstant('close'));\n      }\n    } // eslint-disable-next-line max-len\n\n  }, {\n    key: \"renderButton\",\n    value: function renderButton(className, iconName, isDisabled, element, clickEvent) {\n      var buttonObj = new Button({\n        cssClass: className,\n        disabled: isDisabled,\n        enableRtl: this.parent.enableRtl,\n        iconCss: iconName\n      });\n      buttonObj.appendTo(element);\n      EventHandler.add(element, 'click', clickEvent, this);\n      removeClass([element], ICON);\n    }\n  }, {\n    key: \"quickDialogClass\",\n    value: function quickDialogClass(action) {\n      var classList$$1 = [QUICK_DIALOG_OCCURRENCE_CLASS, QUICK_DIALOG_SERIES_CLASS, QUICK_DIALOG_DELETE_CLASS, QUICK_DIALOG_CANCEL_CLASS, QUICK_DIALOG_ALERT_BTN_CLASS, DISABLE_CLASS];\n      var okButton = this.quickDialog.element.querySelector('.' + QUICK_DIALOG_ALERT_OK);\n      var cancelButton = this.quickDialog.element.querySelector('.' + QUICK_DIALOG_ALERT_CANCEL);\n      var followingEventButton = this.quickDialog.element.querySelector('.' + QUICK_DIALOG_ALERT_FOLLOWING);\n      removeClass([okButton, cancelButton], classList$$1);\n      addClass([this.quickDialog.element.querySelector('.' + QUICK_DIALOG_CANCEL_CLASS)], DISABLE_CLASS);\n\n      if (this.parent.eventSettings.editFollowingEvents) {\n        addClass([followingEventButton], DISABLE_CLASS);\n        removeClass([this.quickDialog.element], FOLLOWING_EVENTS_DIALOG);\n      }\n\n      switch (action) {\n        case 'Recurrence':\n          addClass([okButton], QUICK_DIALOG_OCCURRENCE_CLASS);\n          addClass([cancelButton], QUICK_DIALOG_SERIES_CLASS);\n\n          if (this.parent.eventSettings.editFollowingEvents) {\n            removeClass([followingEventButton], DISABLE_CLASS);\n            addClass([this.quickDialog.element], FOLLOWING_EVENTS_DIALOG);\n            addClass([followingEventButton], QUICK_DIALOG_FOLLOWING_EVENTS_CLASS);\n          }\n\n          break;\n\n        case 'Delete':\n          addClass([okButton], QUICK_DIALOG_DELETE_CLASS);\n          addClass([cancelButton], QUICK_DIALOG_CANCEL_CLASS);\n          break;\n\n        case 'Alert':\n          addClass([okButton], [QUICK_DIALOG_ALERT_OK, QUICK_DIALOG_ALERT_BTN_CLASS]);\n          addClass([cancelButton], [QUICK_DIALOG_ALERT_CANCEL, DISABLE_CLASS]);\n          break;\n      }\n    }\n  }, {\n    key: \"applyFormValidation\",\n    value: function applyFormValidation() {\n      var form = this.quickPopup.element.querySelector('.' + FORM_CLASS);\n      var rules = {};\n      rules[this.parent.eventSettings.fields.subject.name] = this.parent.eventSettings.fields.subject.validation;\n      this.fieldValidator.renderFormValidator(form, rules, this.quickPopup.element, this.parent.locale);\n    }\n  }, {\n    key: \"openRecurrenceAlert\",\n    value: function openRecurrenceAlert() {\n      var editDeleteOnly = this.quickDialog.element.querySelector('.' + QUICK_DIALOG_ALERT_OK);\n\n      if (editDeleteOnly) {\n        editDeleteOnly.innerHTML = this.l10n.getConstant(this.parent.currentAction === 'Delete' ? 'deleteEvent' : 'editEvent');\n        editDeleteOnly.setAttribute('aria-label', editDeleteOnly.innerHTML);\n      }\n\n      var editFollowingEventsOnly = this.quickDialog.element.querySelector('.' + QUICK_DIALOG_ALERT_FOLLOWING);\n\n      if (editFollowingEventsOnly) {\n        editFollowingEventsOnly.innerHTML = this.l10n.getConstant('editFollowingEvent');\n        editFollowingEventsOnly.setAttribute('aria-label', editFollowingEventsOnly.innerHTML);\n      }\n\n      var editDeleteSeries = this.quickDialog.element.querySelector('.' + QUICK_DIALOG_ALERT_CANCEL);\n\n      if (editDeleteSeries) {\n        editDeleteSeries.innerHTML = this.l10n.getConstant(this.parent.currentAction === 'Delete' ? 'deleteSeries' : 'editSeries');\n        editDeleteSeries.setAttribute('aria-label', editDeleteSeries.innerHTML);\n      }\n\n      this.quickDialog.content = this.l10n.getConstant('editContent');\n      this.quickDialog.header = this.l10n.getConstant(this.parent.currentAction === 'Delete' ? 'deleteTitle' : 'editTitle');\n      this.quickDialogClass('Recurrence');\n      var activeEvent = this.parent.activeEventData.event;\n\n      if (this.parent.eventSettings.editFollowingEvents && this.parent.currentAction === 'EditOccurrence' && !isNullOrUndefined(activeEvent[this.parent.eventFields.recurrenceID]) && activeEvent[this.parent.eventFields.recurrenceID] !== activeEvent[this.parent.eventFields.id]) {\n        var followingEventButton = this.quickDialog.element.querySelector('.' + QUICK_DIALOG_ALERT_FOLLOWING);\n        addClass([followingEventButton], DISABLE_CLASS);\n      }\n\n      this.showQuickDialog('RecurrenceAlert');\n    }\n  }, {\n    key: \"openRecurrenceValidationAlert\",\n    value: function openRecurrenceValidationAlert(type) {\n      this.quickDialogClass('Alert');\n      var okButton = this.quickDialog.element.querySelector('.' + QUICK_DIALOG_ALERT_OK);\n      okButton.innerHTML = this.l10n.getConstant('ok');\n      okButton.setAttribute('aria-label', okButton.innerHTML);\n      var cancelButton = this.quickDialog.element.querySelector('.' + QUICK_DIALOG_ALERT_CANCEL);\n      cancelButton.innerHTML = this.l10n.getConstant('cancel');\n      cancelButton.setAttribute('aria-label', cancelButton.innerHTML);\n      this.quickDialog.header = this.l10n.getConstant('alert');\n      var dialogCancel;\n\n      switch (type) {\n        case 'wrongPattern':\n          addClass([cancelButton], DISABLE_CLASS);\n          this.quickDialog.content = this.l10n.getConstant('wrongPattern');\n          break;\n\n        case 'createError':\n          addClass([cancelButton], DISABLE_CLASS);\n          this.quickDialog.content = this.l10n.getConstant('createError');\n          break;\n\n        case 'sameDayAlert':\n          addClass([cancelButton], DISABLE_CLASS);\n          this.quickDialog.content = this.l10n.getConstant('sameDayAlert');\n          break;\n\n        case 'seriesChangeAlert':\n          dialogCancel = this.quickDialog.element.querySelector('.' + QUICK_DIALOG_CANCEL_CLASS);\n          removeClass([cancelButton, dialogCancel], DISABLE_CLASS);\n          this.quickDialog.content = this.l10n.getConstant('seriesChangeAlert');\n          okButton.innerHTML = this.l10n.getConstant('yes');\n          cancelButton.innerHTML = this.l10n.getConstant('no');\n          dialogCancel.innerHTML = this.l10n.getConstant('cancel');\n          break;\n\n        case 'occurrenceAlert':\n          addClass([cancelButton], DISABLE_CLASS);\n          this.quickDialog.content = this.l10n.getConstant('occurenceAlert');\n          break;\n      }\n\n      if (!this.parent.enableRecurrenceValidation && type === 'wrongPattern' || this.parent.enableRecurrenceValidation) {\n        this.showQuickDialog('RecurrenceValidationAlert');\n      }\n    }\n  }, {\n    key: \"openDeleteAlert\",\n    value: function openDeleteAlert() {\n      if (this.parent.activeViewOptions.readonly) {\n        return;\n      }\n\n      var okButton = this.quickDialog.element.querySelector('.' + QUICK_DIALOG_ALERT_OK);\n\n      if (okButton) {\n        okButton.innerHTML = this.l10n.getConstant('delete');\n        okButton.setAttribute('aria-label', okButton.innerHTML);\n      }\n\n      var cancelButton = this.quickDialog.element.querySelector('.' + QUICK_DIALOG_ALERT_CANCEL);\n\n      if (cancelButton) {\n        cancelButton.innerHTML = this.l10n.getConstant('cancel');\n        cancelButton.setAttribute('aria-label', cancelButton.innerHTML);\n      }\n\n      this.quickDialog.content = this.parent.activeEventData.event.length > 1 ? this.l10n.getConstant('deleteMultipleContent') : this.l10n.getConstant('deleteContent');\n      this.quickDialog.header = this.parent.activeEventData.event.length > 1 ? this.l10n.getConstant('deleteMultipleEvent') : this.l10n.getConstant('deleteEvent');\n      this.quickDialogClass('Delete');\n      this.showQuickDialog('DeleteAlert');\n    }\n  }, {\n    key: \"openValidationError\",\n    value: function openValidationError(type, eventData) {\n      this.quickDialog.header = this.l10n.getConstant('alert');\n      this.quickDialog.content = this.l10n.getConstant(type);\n      var okButton = this.quickDialog.element.querySelector('.' + QUICK_DIALOG_ALERT_OK);\n\n      if (okButton) {\n        okButton.innerHTML = this.l10n.getConstant('ok');\n        okButton.setAttribute('aria-label', okButton.innerHTML);\n      }\n\n      var cancelButton = this.quickDialog.element.querySelector('.' + QUICK_DIALOG_ALERT_CANCEL);\n\n      if (cancelButton) {\n        cancelButton.innerHTML = this.l10n.getConstant('cancel');\n        okButton.setAttribute('aria-label', cancelButton.innerHTML);\n      }\n\n      this.quickDialogClass('Alert');\n      this.showQuickDialog('ValidationAlert', eventData);\n    }\n  }, {\n    key: \"showQuickDialog\",\n    value: function showQuickDialog(popupType, eventData) {\n      var _this27 = this;\n\n      this.quickDialog.dataBind();\n      var eventProp = {\n        type: popupType,\n        cancel: false,\n        element: this.quickDialog.element,\n        data: extend({}, eventData || this.parent.activeEventData.event, null, true)\n      };\n      this.parent.trigger(popupOpen, eventProp, function (popupArgs) {\n        if (!popupArgs.cancel) {\n          _this27.quickDialog.show();\n        }\n      });\n    }\n  }, {\n    key: \"createMoreEventList\",\n    value: function createMoreEventList(eventCollection, groupOrder, groupIndex) {\n      var _this28 = this;\n\n      var fields = this.parent.eventFields;\n      var moreEventContentEle = createElement('div', {\n        className: MORE_EVENT_CONTENT_CLASS\n      });\n      var moreEventWrapperEle = createElement('div', {\n        className: MORE_EVENT_WRAPPER_CLASS\n      });\n\n      if (eventCollection.length === 0) {\n        moreEventWrapperEle = createElement('div', {\n          className: MORE_EVENT_CONTENT_CLASS,\n          innerHTML: this.l10n.getConstant('emptyContainer')\n        });\n      } else {\n        var _iterator48 = _createForOfIteratorHelper(eventCollection),\n            _step48;\n\n        try {\n          var _loop5 = function _loop5() {\n            var eventData = _step48.value;\n\n            var eventText = eventData[fields.subject] || _this28.parent.eventSettings.fields.subject.default || _this28.parent.localeObj.getConstant('addTitle');\n\n            var appointmentElement = createElement('div', {\n              className: APPOINTMENT_CLASS,\n              attrs: {\n                'data-id': '' + eventData[fields.id],\n                'data-guid': eventData.Guid,\n                'role': 'button',\n                'tabindex': '0',\n                'aria-readonly': _this28.parent.eventBase.getReadonlyAttribute(eventData),\n                'aria-selected': 'false',\n                'aria-grabbed': 'true',\n                'aria-label': _this28.parent.getAnnouncementString(eventData)\n              }\n            });\n            var templateElement = void 0;\n\n            if (!isNullOrUndefined(_this28.parent.activeViewOptions.eventTemplate)) {\n              var tempId = _this28.parent.element.id + '_' + _this28.parent.activeViewOptions.eventTemplateName + 'eventTemplate';\n              templateElement = _this28.parent.getAppointmentTemplate()(eventData, _this28.parent, 'eventTemplate', tempId, false);\n              append(templateElement, appointmentElement);\n            } else {\n              appointmentElement.appendChild(createElement('div', {\n                className: SUBJECT_CLASS,\n                innerHTML: eventText\n              }));\n            }\n\n            if (!isNullOrUndefined(groupIndex)) {\n              appointmentElement.setAttribute('data-group-index', groupIndex);\n            }\n\n            if (!isNullOrUndefined(eventData[fields.recurrenceRule])) {\n              var iconClass = eventData[fields.id] === eventData[fields.recurrenceID] ? EVENT_RECURRENCE_ICON_CLASS : EVENT_RECURRENCE_EDIT_ICON_CLASS;\n              appointmentElement.appendChild(createElement('div', {\n                className: ICON + ' ' + iconClass\n              }));\n            }\n\n            var args = {\n              data: extend({}, eventData, null, true),\n              element: appointmentElement,\n              cancel: false\n            };\n\n            _this28.parent.trigger(eventRendered, args, function (eventArgs) {\n              if (!eventArgs.cancel) {\n                moreEventWrapperEle.appendChild(appointmentElement);\n                var isPreventCrud = _this28.parent.isAdaptive || _this28.parent.currentView === 'Year';\n\n                _this28.parent.eventBase.wireAppointmentEvents(appointmentElement, eventData, isPreventCrud);\n\n                _this28.parent.eventBase.applyResourceColor(appointmentElement, eventData, 'backgroundColor', groupOrder);\n              }\n            });\n          };\n\n          for (_iterator48.s(); !(_step48 = _iterator48.n()).done;) {\n            _loop5();\n          }\n        } catch (err) {\n          _iterator48.e(err);\n        } finally {\n          _iterator48.f();\n        }\n      }\n\n      moreEventContentEle.appendChild(moreEventWrapperEle);\n      return moreEventContentEle;\n    }\n  }, {\n    key: \"tapHoldEventPopup\",\n    value: function tapHoldEventPopup(e) {\n      var target = closest(e.target, '.' + APPOINTMENT_CLASS);\n      this.isMultipleEventSelect = false;\n      this.parent.selectedElements = [];\n      this.isMultipleEventSelect = true;\n      this.parent.eventBase.getSelectedEventElements(target);\n      this.parent.activeEventData = this.parent.eventBase.getSelectedEvents();\n      var guid = target.getAttribute('data-guid');\n      var eventObj = this.parent.eventBase.getEventByGuid(guid);\n\n      if (isNullOrUndefined(eventObj)) {\n        return;\n      }\n\n      var eventTitle = eventObj[this.parent.eventFields.subject] || this.l10n.getConstant('noTitle');\n      var eventTemplate = \"<div class=\\\"\".concat(MULTIPLE_EVENT_POPUP_CLASS, \"\\\"><div class=\\\"\").concat(POPUP_HEADER_CLASS, \"\\\">\") + \"<button class=\\\"\".concat(CLOSE_CLASS, \"\\\" title=\\\"\").concat(this.l10n.getConstant('close'), \"\\\"></button>\") + \"<div class=\\\"\".concat(SUBJECT_CLASS, \"\\\">\").concat(eventTitle, \"</div>\") + \"<button class=\\\"\".concat(EDIT_CLASS, \"\\\" title=\\\"\").concat(this.l10n.getConstant('edit'), \"\\\"></button>\") + \"<button class=\\\"\".concat(DELETE_CLASS, \"\\\" title=\\\"\").concat(this.l10n.getConstant('delete'), \"\\\"></button></div></div>\");\n      this.quickPopup.element.innerHTML = eventTemplate;\n      var closeIcon = this.quickPopup.element.querySelector('.' + CLOSE_CLASS);\n      this.renderButton('e-flat e-round e-small', ICON + ' ' + CLOSE_ICON_CLASS, false, closeIcon, this.closeClick);\n      var readonly = this.parent.activeViewOptions.readonly || eventObj[this.parent.eventFields.isReadonly];\n      var editAction = !this.parent.eventSettings.allowEditing || readonly;\n      var deleteAction = !this.parent.eventSettings.allowDeleting || readonly;\n      var editIcon = this.quickPopup.element.querySelector('.' + EDIT_CLASS);\n\n      if (editIcon) {\n        this.renderButton('e-flat e-round e-small', ICON + ' ' + EDIT_ICON_CLASS, editAction, editIcon, this.editClick);\n      }\n\n      var deleteIcon = this.quickPopup.element.querySelector('.' + DELETE_CLASS);\n\n      if (deleteIcon) {\n        this.renderButton('e-flat e-round e-small', ICON + ' ' + DELETE_ICON_CLASS, deleteAction, deleteIcon, this.deleteClick);\n      }\n\n      this.beforeQuickPopupOpen(target);\n    }\n  }, {\n    key: \"isCellBlocked\",\n    value: function isCellBlocked(args) {\n      var tempObj = {};\n      tempObj[this.parent.eventFields.startTime] = this.parent.activeCellsData.startTime;\n      tempObj[this.parent.eventFields.endTime] = this.parent.activeCellsData.endTime;\n      tempObj[this.parent.eventFields.isAllDay] = this.parent.activeCellsData.isAllDay;\n\n      if (this.parent.activeViewOptions.group.resources.length > 0) {\n        var targetCell = args.element instanceof Array ? args.element[0] : args.element;\n        var groupIndex = parseInt(targetCell.getAttribute('data-group-index'), 10);\n        this.parent.resourceBase.setResourceValues(tempObj, isNaN(groupIndex) ? null : groupIndex);\n      }\n\n      return this.parent.eventBase.isBlockRange(tempObj);\n    }\n  }, {\n    key: \"cellClick\",\n    value: function cellClick(args) {\n      var date = new Date(args.startTime.getTime());\n\n      if (!this.parent.showQuickInfo || !this.parent.eventSettings.allowAdding || this.parent.currentView === 'MonthAgenda' || this.isCellBlocked(args) || !this.parent.isMinMaxDate(new Date(date.setHours(0, 0, 0, 0)))) {\n        this.quickPopupHide();\n        return;\n      }\n\n      var targetEle = args.event.target;\n\n      if (this.parent.isAdaptive) {\n        this.quickPopupHide();\n        var newEventClone = this.parent.element.querySelector('.' + NEW_EVENT_CLASS);\n\n        if (isNullOrUndefined(newEventClone)) {\n          newEventClone = createElement('div', {\n            className: NEW_EVENT_CLASS,\n            innerHTML: \"<div class=\\\"e-title\\\">+ \".concat(this.l10n.getConstant('newEvent'), \"</div>\")\n          });\n        }\n\n        var targetCell = closest(targetEle, '.' + WORK_CELLS_CLASS + ',.' + ALLDAY_CELLS_CLASS);\n\n        if (targetCell) {\n          targetCell.appendChild(newEventClone);\n        }\n\n        return;\n      }\n\n      var target = closest(targetEle, '.' + WORK_CELLS_CLASS + ',.' + ALLDAY_CELLS_CLASS + ',.' + HEADER_CELLS_CLASS);\n\n      if (isNullOrUndefined(target) || targetEle.classList.contains(MORE_INDICATOR_CLASS)) {\n        return;\n      }\n\n      var isSameTarget = this.quickPopup.relateTo === target;\n\n      if (isSameTarget && this.quickPopup.element.classList.contains(POPUP_OPEN)) {\n        var _subjectElement = this.quickPopup.element.querySelector('.' + SUBJECT_CLASS);\n\n        if (_subjectElement) {\n          _subjectElement.focus();\n        }\n\n        return;\n      }\n\n      var temp = {};\n      temp[this.parent.eventFields.startTime] = this.parent.activeCellsData.startTime;\n      temp[this.parent.eventFields.endTime] = this.parent.activeCellsData.endTime;\n      temp[this.parent.eventFields.isAllDay] = this.parent.activeCellsData.isAllDay;\n      var quickCellPopup = createElement('div', {\n        className: CELL_POPUP_CLASS\n      });\n      quickCellPopup.appendChild(this.getPopupHeader('Cell', temp));\n      quickCellPopup.appendChild(this.getPopupContent('Cell', args, temp));\n      quickCellPopup.appendChild(this.getPopupFooter('Cell', temp));\n      var subjectElement = quickCellPopup.querySelector('.' + SUBJECT_CLASS);\n\n      if (subjectElement) {\n        Input.createInput({\n          element: subjectElement,\n          properties: {\n            placeholder: this.l10n.getConstant('addTitle')\n          }\n        });\n      }\n\n      if (!isNullOrUndefined(this.parent.eventSettings.fields.subject.default)) {\n        subjectElement.value = this.parent.eventSettings.fields.subject.default;\n      }\n\n      var closeIcon = quickCellPopup.querySelector('.' + CLOSE_CLASS);\n\n      if (closeIcon) {\n        this.renderButton('e-flat e-round e-small', ICON + ' ' + CLOSE_ICON_CLASS, false, closeIcon, this.popupClose);\n      }\n\n      var moreButton = quickCellPopup.querySelector('.' + QUICK_POPUP_EVENT_DETAILS_CLASS);\n\n      if (moreButton) {\n        this.renderButton('e-flat', '', false, moreButton, this.detailsClick);\n      }\n\n      var saveButton = quickCellPopup.querySelector('.' + EVENT_CREATE_CLASS);\n\n      if (saveButton) {\n        this.renderButton('e-flat e-primary', '', this.parent.activeViewOptions.readonly, saveButton, this.saveClick);\n      }\n\n      this.quickPopup.content = quickCellPopup;\n      this.quickPopup.dataBind();\n      this.applyFormValidation();\n\n      if (this.morePopup) {\n        this.morePopup.hide();\n      }\n\n      this.quickPopup.relateTo = target;\n      this.beforeQuickPopupOpen(target);\n    }\n  }, {\n    key: \"isSameEventClick\",\n    value: function isSameEventClick(events) {\n      var isSameTarget = this.quickPopup.relateTo === closest(events.element, '.' + APPOINTMENT_CLASS);\n\n      if (isSameTarget && this.quickPopup.element.classList.contains(POPUP_OPEN)) {\n        var editIcon = this.quickPopup.element.querySelector('.' + EDIT_CLASS);\n\n        if (editIcon) {\n          editIcon.focus();\n        }\n\n        if (!this.parent.isAdaptive) {\n          var editButton = this.quickPopup.element.querySelector('.' + EDIT_EVENT_CLASS);\n\n          if (editButton) {\n            editButton.focus();\n          }\n        }\n\n        return true;\n      }\n\n      return false;\n    }\n  }, {\n    key: \"isQuickTemplate\",\n    value: function isQuickTemplate(type) {\n      return this.parent.quickInfoTemplates.templateType === 'Both' || this.parent.quickInfoTemplates.templateType === type;\n    }\n  }, {\n    key: \"eventClick\",\n    value: function eventClick(events) {\n      if (this.parent.eventTooltip) {\n        this.parent.eventTooltip.close();\n      }\n\n      if (!this.parent.showQuickInfo) {\n        return;\n      }\n\n      if (this.parent.isAdaptive && this.isMultipleEventSelect) {\n        this.updateTapHoldEventPopup(closest(events.element, '.' + APPOINTMENT_CLASS));\n      } else {\n        var isSameTarget = this.isSameEventClick(events);\n\n        if (isSameTarget) {\n          return;\n        }\n\n        var eventData = events.event;\n        var quickEventPopup = createElement('div', {\n          className: EVENT_POPUP_CLASS\n        });\n        quickEventPopup.appendChild(this.getPopupHeader('Event', eventData));\n        quickEventPopup.appendChild(this.getPopupContent('Event', events, eventData));\n        quickEventPopup.appendChild(this.getPopupFooter('Event', eventData));\n        var readonly = this.parent.activeViewOptions.readonly || eventData[this.parent.eventFields.isReadonly];\n        var editAction = !this.parent.eventSettings.allowEditing || readonly;\n        var deleteAction = !this.parent.eventSettings.allowDeleting || readonly;\n        var editIcon = quickEventPopup.querySelector('.' + EDIT_CLASS);\n        var buttonClass = 'e-flat e-round e-small';\n\n        if (editIcon) {\n          this.renderButton(buttonClass, ICON + ' ' + EDIT_ICON_CLASS, editAction, editIcon, this.editClick);\n        }\n\n        var deleteIcon = quickEventPopup.querySelector('.' + DELETE_CLASS);\n\n        if (deleteIcon) {\n          this.renderButton(buttonClass, ICON + ' ' + DELETE_ICON_CLASS, deleteAction, deleteIcon, this.deleteClick);\n        }\n\n        var closeIcon = quickEventPopup.querySelector('.' + CLOSE_CLASS);\n\n        if (closeIcon) {\n          this.renderButton(buttonClass, ICON + ' ' + CLOSE_ICON_CLASS, false, closeIcon, this.popupClose);\n        }\n\n        var editButton = quickEventPopup.querySelector('.' + EDIT_EVENT_CLASS);\n\n        if (editButton) {\n          this.renderButton('e-flat e-primary', '', editAction, editButton, this.editClick);\n        }\n\n        var deleteButton = quickEventPopup.querySelector('.' + DELETE_EVENT_CLASS);\n\n        if (deleteButton) {\n          this.renderButton('e-flat', '', deleteAction, deleteButton, this.deleteClick);\n        }\n\n        this.quickPopup.content = quickEventPopup;\n        this.quickPopup.dataBind();\n\n        if (this.morePopup && !closest(events.element, '.' + MORE_EVENT_WRAPPER_CLASS)) {\n          this.morePopup.hide();\n        }\n\n        this.quickPopup.relateTo = this.parent.isAdaptive ? document.body : closest(events.element, '.' + APPOINTMENT_CLASS);\n        this.beforeQuickPopupOpen(events.element);\n      }\n    }\n  }, {\n    key: \"getPopupHeader\",\n    value: function getPopupHeader(headerType, headerData) {\n      var headerTemplate = createElement('div', {\n        className: POPUP_HEADER_CLASS\n      });\n\n      if (this.isQuickTemplate(headerType) && this.parent.quickInfoTemplates.header) {\n        var headerArgs = extend({}, headerData, {\n          elementType: headerType.toLowerCase()\n        }, true);\n        var templateId = this.parent.element.id;\n        var headerTemp = [].slice.call(this.parent.getQuickInfoTemplatesHeader()(headerArgs, this.parent, 'header', templateId + '_headerTemplate', false));\n        append([].slice.call(headerTemp), headerTemplate);\n      } else {\n        var header;\n        var args;\n\n        switch (headerType) {\n          case 'Cell':\n            header = \"<div class=\\\"\".concat(POPUP_HEADER_ICON_WRAPPER, \"\\\"><button class=\\\"\").concat(CLOSE_CLASS, \"\\\" title=\") + \"\\\"\".concat(this.l10n.getConstant('close'), \"\\\"></button></div>\");\n            break;\n\n          case 'Event':\n            args = this.getFormattedString(headerData);\n            header = \"<div class=\\\"\".concat(POPUP_HEADER_ICON_WRAPPER, \"\\\">\") + \"<button class=\\\"\".concat(EDIT_CLASS + ' ' + ICON, \"\\\" title=\\\"\").concat(this.l10n.getConstant('edit'), \"\\\"></button>\") + \"<button class=\\\"\".concat(DELETE_CLASS + ' ' + ICON, \"\\\" title=\\\"\").concat(this.l10n.getConstant('delete'), \"\\\"></button>\") + \"<button class=\\\"\".concat(CLOSE_CLASS, \"\\\" title=\\\"\").concat(this.l10n.getConstant('close'), \"\\\"></button></div>\") + \"<div class=\\\"\".concat(SUBJECT_WRAP, \"\\\"><div class=\\\"\").concat(SUBJECT_CLASS, \" \").concat(TEXT_ELLIPSIS, \"\\\" \") + \"title=\\\"\".concat(args.eventSubject, \"\\\">\").concat(args.eventSubject, \"</div></div >\");\n            break;\n        }\n\n        var templateWrapper = createElement('div', {\n          innerHTML: header\n        });\n        append([].slice.call(templateWrapper.childNodes), headerTemplate);\n      }\n\n      return headerTemplate;\n    }\n  }, {\n    key: \"getPopupContent\",\n    value: function getPopupContent(type, args, data) {\n      var contentTemplate = createElement('div', {\n        className: POPUP_CONTENT_CLASS\n      });\n\n      if (this.isQuickTemplate(type) && this.parent.quickInfoTemplates.content) {\n        var contentArgs = extend({}, data, {\n          elementType: type.toLowerCase()\n        }, true);\n        var templateId = this.parent.element.id;\n        var contentTemp = [].slice.call(this.parent.getQuickInfoTemplatesContent()(contentArgs, this.parent, 'content', templateId + '_contentTemplate', false));\n        append([].slice.call(contentTemp), contentTemplate);\n      } else {\n        var content;\n        var cellDetails;\n        var argsData;\n        var resourceText = this.getResourceText(args, type.toLowerCase());\n\n        switch (type) {\n          case 'Cell':\n            cellDetails = this.getFormattedString(data);\n            content = \"<table class=\\\"\".concat(POPUP_TABLE_CLASS, \"\\\"><tbody><tr><td><form class=\\\"\").concat(FORM_CLASS, \"\\\" onsubmit=\") + \"\\\"return false;\\\"><input class=\\\"\".concat(SUBJECT_CLASS, \" \").concat(EVENT_FIELD, \"\\\" type=\\\"text\\\" name=\") + \"\\\"\".concat(this.parent.eventFields.subject, \"\\\" /></form></td></tr><tr><td><div class=\\\"\").concat(DATE_TIME_CLASS, \"\\\">\") + \"<div class=\\\"\".concat(DATE_TIME_ICON_CLASS, \" \").concat(ICON, \"\\\"></div><div class=\\\"\").concat(DATE_TIME_DETAILS_CLASS, \" \") + \"\".concat(TEXT_ELLIPSIS, \"\\\">\").concat(cellDetails.details, \"</div></div>\") + \"\".concat(this.parent.activeViewOptions.group.resources.length > 0 ? \"<div class=\\\"\".concat(RESOURCE_CLASS, \"\\\">\") + \"<div class=\\\"\".concat(RESOURCE_ICON_CLASS, \" \").concat(ICON, \" \\\"></div><div class=\\\"\").concat(RESOURCE_DETAILS_CLASS, \" \") + \"\".concat(TEXT_ELLIPSIS, \"\\\">\").concat(resourceText, \"</div></div>\") : '', \"</td></tr></tbody></table>\");\n            break;\n\n          case 'Event':\n            argsData = this.getFormattedString(data);\n            content = '<div class=\"' + DATE_TIME_CLASS + '\"><div class=\"' + DATE_TIME_ICON_CLASS + ' ' + ICON + '\"></div><div class=\"' + DATE_TIME_WRAPPER_CLASS + ' ' + TEXT_ELLIPSIS + '\"><div class=\"' + DATE_TIME_DETAILS_CLASS + ' ' + TEXT_ELLIPSIS + '\">' + argsData.details + '</div>';\n\n            if (data[this.parent.eventFields.recurrenceRule]) {\n              content += '<div class=\"' + RECURRENCE_SUMMARY_CLASS + ' ' + TEXT_ELLIPSIS + '\">' + this.getRecurrenceSummary(data) + '</div>';\n            }\n\n            content += '</div></div>';\n\n            if (data[this.parent.eventFields.location]) {\n              content += '<div class=\"' + LOCATION_CLASS + '\"><div class=\"' + LOCATION_ICON_CLASS + ' ' + ICON + '\"></div><div class=\"' + LOCATION_DETAILS_CLASS + ' ' + TEXT_ELLIPSIS + '\">' + data[this.parent.eventFields.location] + '</div></div>';\n            }\n\n            if (data[this.parent.eventFields.startTimezone] || data[this.parent.eventFields.endTimezone]) {\n              content += '<div class=\"' + TIME_ZONE_CLASS + '\"><div class=\"' + TIME_ZONE_ICON_CLASS + ' ' + ICON + '\"></div><div class=\"' + TIME_ZONE_DETAILS_CLASS + ' ' + TEXT_ELLIPSIS + '\">' + this.getTimezone(data) + '</div></div>';\n            }\n\n            if (data[this.parent.eventFields.description]) {\n              content += '<div class=\"' + DESCRIPTION_CLASS + '\"><div class=\"' + DESCRIPTION_ICON_CLASS + ' ' + ICON + '\"></div><div class=\"' + DESCRIPTION_DETAILS_CLASS + ' ' + TEXT_ELLIPSIS + '\">' + data[this.parent.eventFields.description] + '</div></div>';\n            }\n\n            if (this.parent.resourceCollection.length > 0) {\n              content += '<div class=\"' + RESOURCE_CLASS + '\"><div class=\"' + RESOURCE_ICON_CLASS + ' ' + ICON + '\"></div><div class=\"' + RESOURCE_DETAILS_CLASS + ' ' + TEXT_ELLIPSIS + '\">' + resourceText + '</div></div>';\n            }\n\n            break;\n        }\n\n        var templateWrapper = createElement('div', {\n          innerHTML: content\n        });\n        append([].slice.call(templateWrapper.childNodes), contentTemplate);\n      }\n\n      return contentTemplate;\n    }\n  }, {\n    key: \"getPopupFooter\",\n    value: function getPopupFooter(footerType, footerData) {\n      var footerTemplate = createElement('div', {\n        className: POPUP_FOOTER_CLASS\n      });\n\n      if (this.isQuickTemplate(footerType) && this.parent.quickInfoTemplates.footer) {\n        var footerArgs = extend({}, footerData, {\n          elementType: footerType.toLowerCase()\n        }, true);\n        var templateId = this.parent.element.id;\n        var footerTemp = [].slice.call(this.parent.getQuickInfoTemplatesFooter()(footerArgs, this.parent, 'footer', templateId + '_footerTemplate', false));\n        append([].slice.call(footerTemp), footerTemplate);\n      } else {\n        var footer;\n\n        switch (footerType) {\n          case 'Cell':\n            footer = \"<button class=\\\"\".concat(QUICK_POPUP_EVENT_DETAILS_CLASS + ' ' + TEXT_ELLIPSIS, \"\\\" title=\") + \"\\\"\".concat(this.l10n.getConstant('moreDetails'), \"\\\">\").concat(this.l10n.getConstant('moreDetails'), \"</button>\") + \"<button class=\\\"\".concat(EVENT_CREATE_CLASS, \" \").concat(TEXT_ELLIPSIS, \"\\\" title=\\\"\").concat(this.l10n.getConstant('save'), \"\\\">\") + \"\".concat(this.l10n.getConstant('save'), \"</button>\");\n            break;\n\n          case 'Event':\n            footer = \"\".concat(this.parent.isAdaptive ? '' : \"<button class=\\\"\".concat(EDIT_EVENT_CLASS, \" \") + \"\".concat(TEXT_ELLIPSIS, \"\\\" title=\\\"\").concat(this.l10n.getConstant('edit'), \"\\\">\").concat(this.l10n.getConstant('edit'), \"</button>\") + \"<button class=\\\"\".concat(DELETE_EVENT_CLASS, \" \").concat(TEXT_ELLIPSIS, \"\\\" title=\\\"\").concat(this.l10n.getConstant('delete'), \"\\\">\") + \"\".concat(this.l10n.getConstant('delete'), \"</button>\"));\n            break;\n        }\n\n        var templateWrapper = createElement('div', {\n          innerHTML: footer\n        });\n        append([].slice.call(templateWrapper.childNodes), footerTemplate);\n      }\n\n      return footerTemplate;\n    }\n  }, {\n    key: \"getResourceText\",\n    value: function getResourceText(args, type) {\n      var _this29 = this;\n\n      if (this.parent.resourceCollection.length === 0) {\n        return null;\n      }\n\n      var resourceValue = '';\n\n      if (this.parent.activeViewOptions.group.resources.length === 0) {\n        (function () {\n          var resourceCollection = _this29.parent.resourceBase.resourceCollection.slice(-1)[0];\n\n          var resourceData = resourceCollection.dataSource;\n\n          if (type === 'event') {\n            var eventData = args.event;\n\n            var _iterator49 = _createForOfIteratorHelper(resourceData),\n                _step49;\n\n            try {\n              for (_iterator49.s(); !(_step49 = _iterator49.n()).done;) {\n                var data = _step49.value;\n                var resourceId = eventData[resourceCollection.field];\n\n                if (resourceId instanceof Array) {\n                  if (resourceId.indexOf(data[resourceCollection.idField]) > -1) {\n                    (function () {\n                      var id = resourceId[resourceId.indexOf(data[resourceCollection.idField])];\n                      var resource = resourceData.filter(function (e) {\n                        return e[resourceCollection.idField] === id;\n                      })[0];\n                      resourceValue += resourceValue === '' ? resource[resourceCollection.textField] : ', ' + resource[resourceCollection.textField];\n                    })();\n                  }\n                } else if (data[resourceCollection.idField] === resourceId) {\n                  resourceValue = data[resourceCollection.textField].toString();\n                }\n              }\n            } catch (err) {\n              _iterator49.e(err);\n            } finally {\n              _iterator49.f();\n            }\n          } else {\n            resourceValue = resourceData[0][resourceCollection.textField].toString();\n          }\n        })();\n      } else {\n        if (type === 'event') {\n          var eventData = args.event;\n          var resourceData;\n          var lastResource;\n\n          for (var i = this.parent.resourceBase.resourceCollection.length - 1; i >= 0; i--) {\n            resourceData = eventData[this.parent.resourceBase.resourceCollection[i].field];\n\n            if (!isNullOrUndefined(resourceData)) {\n              lastResource = this.parent.resourceBase.resourceCollection[i];\n              break;\n            }\n          }\n\n          if (!Array.isArray(resourceData)) {\n            resourceData = [resourceData];\n          }\n\n          var resNames = [];\n          var lastResourceData = lastResource.dataSource;\n          resourceData.forEach(function (value) {\n            var text;\n            var i = findIndexInData(lastResourceData, lastResource.idField, value);\n\n            if (i > -1) {\n              text = lastResourceData[i][lastResource.textField];\n            }\n\n            if (text) {\n              resNames.push(text);\n            }\n          });\n          resourceValue = resNames.join(', ');\n        } else {\n          var argsData = args;\n          var groupIndex = !isNullOrUndefined(argsData.groupIndex) ? argsData.groupIndex : 0;\n          var resourceDetails = this.parent.resourceBase.lastResourceLevel[groupIndex];\n          resourceValue = resourceDetails.resourceData[resourceDetails.resource.textField];\n        }\n      }\n\n      return resourceValue;\n    }\n  }, {\n    key: \"getFormattedString\",\n    value: function getFormattedString(eventData) {\n      var fields = this.parent.eventFields;\n      var eventSubject = eventData[fields.subject] || this.l10n.getConstant('noTitle');\n      var startDate = eventData[fields.startTime];\n      var endDate = eventData[fields.endTime];\n      var startDateDetails = this.getDateFormat(startDate, 'long');\n      var endDateDetails = eventData[fields.isAllDay] && endDate.getHours() === 0 && endDate.getMinutes() === 0 ? this.getDateFormat(addDays(new Date(endDate.getTime()), -1), 'long') : this.getDateFormat(endDate, 'long');\n      var startTimeDetail = this.parent.getTimeString(startDate);\n      var endTimeDetail = this.parent.getTimeString(endDate);\n      var details = '';\n      var spanLength = endDate.getDate() !== startDate.getDate() && (endDate.getTime() - startDate.getTime()) / (60 * 60 * 1000) < 24 ? 1 : 0;\n\n      if (eventData[fields.isAllDay]) {\n        details = startDateDetails + ' (' + this.l10n.getConstant('allDay') + ')';\n\n        if ((endDate.getTime() - startDate.getTime()) / MS_PER_DAY > 1) {\n          details += '&nbsp;-&nbsp;' + endDateDetails + ' (' + this.l10n.getConstant('allDay') + ')';\n        }\n      } else if ((endDate.getTime() - startDate.getTime()) / MS_PER_DAY >= 1 || spanLength > 0) {\n        details = startDateDetails + ' (' + startTimeDetail + ')' + '&nbsp;-&nbsp;' + endDateDetails + ' (' + endTimeDetail + ')';\n      } else {\n        details = startDateDetails + ' (' + (startTimeDetail + '&nbsp;-&nbsp;' + endTimeDetail) + ')';\n      }\n\n      return {\n        eventSubject: eventSubject,\n        details: details\n      };\n    }\n  }, {\n    key: \"moreEventClick\",\n    value: function moreEventClick(data, endDate, groupIndex) {\n      var _this30 = this;\n\n      this.quickPopupHide(true);\n      var moreEventContentEle = this.morePopup.element.querySelector('.' + MORE_EVENT_CONTENT_CLASS);\n\n      if (moreEventContentEle) {\n        remove(moreEventContentEle);\n      }\n\n      var selectedDate = data.date.getTime().toString();\n      var target = closest(data.element, '.' + MORE_INDICATOR_CLASS + ',.' + WORK_CELLS_CLASS);\n      var day = this.parent.globalize.formatDate(data.date, {\n        format: 'E',\n        calendar: this.parent.getCalendarMode()\n      });\n      this.morePopup.element.querySelector('.' + MORE_EVENT_HEADER_DAY_CLASS).innerHTML = capitalizeFirstWord(day, 'single');\n      var dateElement = this.morePopup.element.querySelector('.' + MORE_EVENT_HEADER_DATE_CLASS);\n      dateElement.innerHTML = this.getDateFormat(data.date, 'd');\n      dateElement.setAttribute('data-date', selectedDate);\n      dateElement.setAttribute('data-end-date', endDate.getTime().toString());\n      var groupOrder;\n\n      if (!isNullOrUndefined(groupIndex)) {\n        dateElement.setAttribute('data-group-index', groupIndex);\n        groupOrder = this.parent.resourceBase.lastResourceLevel[parseInt(groupIndex, 10)].groupOrder;\n      }\n\n      var moreEventElements = this.createMoreEventList(data.event, groupOrder, groupIndex);\n      this.morePopup.element.querySelector('.' + MORE_EVENT_POPUP_CLASS).appendChild(moreEventElements);\n      removeClass(this.morePopup.element.querySelector('.' + MORE_EVENT_DATE_HEADER_CLASS).childNodes, CURRENTDATE_CLASS);\n\n      if (resetTime(data.date).getTime() === resetTime(this.parent.getCurrentTime()).getTime()) {\n        addClass(this.morePopup.element.querySelector('.' + MORE_EVENT_DATE_HEADER_CLASS).childNodes, CURRENTDATE_CLASS);\n      }\n\n      if (!this.parent.isAdaptive) {\n        if (this.parent.currentView.indexOf('Timeline') !== -1) {\n          var gIndex = target.getAttribute('data-group-index');\n          var startDate = new Date(parseInt(target.getAttribute('data-start-date'), 10));\n          startDate.setHours(startDate.getHours(), startDate.getMinutes(), 0);\n          var tdDate = startDate.getTime().toString();\n\n          if (isNullOrUndefined(gIndex)) {\n            this.morePopup.relateTo = this.parent.element.querySelector('.' + CONTENT_WRAP_CLASS + ' tbody tr td[data-date=\"' + tdDate + '\"]');\n          } else {\n            this.morePopup.relateTo = this.parent.element.querySelector('.' + CONTENT_WRAP_CLASS + ' tbody tr td[data-group-index=\"' + gIndex + '\"][data-date=\"' + tdDate + '\"]');\n\n            if (isNullOrUndefined(this.morePopup.relateTo)) {\n              var workCells = [].slice.call(this.parent.element.querySelectorAll('.' + CONTENT_WRAP_CLASS + ' tbody tr td[data-group-index=\"' + gIndex + '\"]'));\n\n              for (var i = 0; i < workCells.length; i++) {\n                var date = workCells[i].getAttribute('data-date');\n\n                if (date < tdDate) {\n                  this.morePopup.relateTo = workCells[i];\n                }\n              }\n            }\n          }\n        } else {\n          this.morePopup.relateTo = closest(target, '.' + WORK_CELLS_CLASS);\n        }\n      }\n\n      this.parent.renderTemplates();\n      var eventProp = {\n        type: 'EventContainer',\n        cancel: false,\n        element: this.morePopup.element,\n        data: data\n      };\n      this.parent.trigger(popupOpen, eventProp, function (popupArgs) {\n        if (!popupArgs.cancel) {\n          _this30.morePopup.show();\n        }\n      });\n    }\n  }, {\n    key: \"saveClick\",\n    value: function saveClick(event) {\n      this.dialogEvent = event;\n      this.isCrudAction = true;\n      this.quickPopupHide();\n    }\n  }, {\n    key: \"detailsClick\",\n    value: function detailsClick(event) {\n      var subjectEle = this.quickPopup.element.querySelector('.' + SUBJECT_CLASS);\n\n      if (subjectEle && subjectEle.value !== '') {\n        extend(this.parent.activeCellsData, {\n          subject: subjectEle.value\n        });\n      }\n\n      this.dialogEvent = event;\n      this.isCrudAction = false;\n      this.fieldValidator.destroyToolTip();\n      this.quickPopupHide();\n      this.parent.eventWindow.openEditor(this.parent.activeCellsData, 'Add');\n    }\n  }, {\n    key: \"editClick\",\n    value: function editClick(event) {\n      this.dialogEvent = event;\n      this.quickPopupHide(true);\n      var data = this.parent.activeEventData.event;\n      this.parent.currentAction = 'EditSeries';\n\n      if (!isNullOrUndefined(data[this.parent.eventFields.recurrenceRule])) {\n        this.parent.currentAction = 'EditOccurrence';\n        this.openRecurrenceAlert();\n      } else {\n        this.parent.eventWindow.openEditor(data, this.parent.currentAction);\n      }\n    }\n  }, {\n    key: \"deleteClick\",\n    value: function deleteClick(event) {\n      this.dialogEvent = event;\n      this.quickPopupHide(true);\n      this.parent.currentAction = 'Delete';\n\n      if (this.parent.activeEventData.event[this.parent.eventFields.recurrenceRule]) {\n        this.openRecurrenceAlert();\n      } else {\n        this.openDeleteAlert();\n      }\n    }\n  }, {\n    key: \"updateMoreEventContent\",\n    value: function updateMoreEventContent() {\n      if (this.morePopup.element.classList.contains('e-popup-close')) {\n        return;\n      }\n\n      var moreEventContentEle = this.morePopup.element.querySelector('.' + MORE_EVENT_CONTENT_CLASS);\n\n      if (moreEventContentEle) {\n        remove(moreEventContentEle);\n      }\n\n      var dateElement = this.morePopup.element.querySelector('.' + MORE_EVENT_HEADER_DATE_CLASS);\n      var startDate = new Date(parseInt(dateElement.getAttribute('data-date'), 10));\n      var endDate = new Date(parseInt(dateElement.getAttribute('data-end-date'), 10));\n      var groupIndex = dateElement.getAttribute('data-group-index');\n      var data;\n      var groupOrder;\n\n      if (!isNullOrUndefined(groupIndex)) {\n        data = this.parent.resourceBase.lastResourceLevel[parseInt(groupIndex, 10)];\n        groupOrder = data.groupOrder;\n      }\n\n      var events = this.parent.eventBase.filterEvents(startDate, endDate, this.parent.eventsProcessed, data);\n      var moreElement = this.createMoreEventList(events, groupOrder, groupIndex);\n      this.morePopup.element.querySelector('.' + MORE_EVENT_POPUP_CLASS).appendChild(moreElement);\n    }\n  }, {\n    key: \"closeClick\",\n    value: function closeClick(event) {\n      this.dialogEvent = event;\n      this.quickPopupHide();\n      this.morePopup.hide();\n    }\n  }, {\n    key: \"dialogButtonClick\",\n    value: function dialogButtonClick(event) {\n      this.dialogEvent = event;\n      this.quickDialog.hide();\n      var target = event.target;\n      var cancelBtn = this.quickDialog.element.querySelector('.' + QUICK_DIALOG_ALERT_CANCEL);\n      var eventData = this.parent.activeEventData.event;\n\n      if (target.classList.contains(QUICK_DIALOG_OCCURRENCE_CLASS)) {\n        this.parent.currentAction = this.parent.currentAction === 'Delete' ? 'DeleteOccurrence' : 'EditOccurrence';\n\n        switch (this.parent.currentAction) {\n          case 'EditOccurrence':\n            this.parent.eventWindow.openEditor(eventData, this.parent.currentAction);\n            break;\n\n          case 'DeleteOccurrence':\n            this.parent.crudModule.deleteEvent(eventData, this.parent.currentAction);\n            break;\n        }\n      } else if (target.classList.contains(QUICK_DIALOG_FOLLOWING_EVENTS_CLASS)) {\n        this.parent.currentAction = this.parent.currentAction === 'Delete' ? 'DeleteFollowingEvents' : 'EditFollowingEvents';\n\n        switch (this.parent.currentAction) {\n          case 'EditFollowingEvents':\n            this.parent.eventWindow.openEditor(eventData, this.parent.currentAction);\n            break;\n\n          case 'DeleteFollowingEvents':\n            this.parent.crudModule.deleteEvent(eventData, this.parent.currentAction);\n            break;\n        }\n      } else if (target.classList.contains(QUICK_DIALOG_SERIES_CLASS)) {\n        this.parent.currentAction = this.parent.currentAction === 'Delete' ? 'DeleteSeries' : 'EditSeries';\n\n        switch (this.parent.currentAction) {\n          case 'EditSeries':\n            this.parent.eventWindow.openEditor(this.parent.eventBase.getParentEvent(eventData, true), this.parent.currentAction);\n            break;\n\n          case 'DeleteSeries':\n            this.parent.crudModule.deleteEvent(eventData, this.parent.currentAction);\n            break;\n        }\n      } else if (target.classList.contains(QUICK_DIALOG_DELETE_CLASS)) {\n        this.parent.crudModule.deleteEvent(eventData, this.parent.currentAction);\n      } else if (!cancelBtn.classList.contains(DISABLE_CLASS) && (target.classList.contains(QUICK_DIALOG_ALERT_OK) || target.classList.contains(QUICK_DIALOG_ALERT_CANCEL) && !cancelBtn.classList.contains(QUICK_DIALOG_CANCEL_CLASS))) {\n        this.parent.uiStateValues.isIgnoreOccurrence = target.classList.contains(QUICK_DIALOG_ALERT_CANCEL);\n        this.parent.eventWindow.eventSave(event, this.l10n.getConstant('ok'));\n      }\n    }\n  }, {\n    key: \"updateTapHoldEventPopup\",\n    value: function updateTapHoldEventPopup(target) {\n      var selectedElements = this.parent.eventBase.getSelectedEventElements(target);\n      this.parent.activeEventData = this.parent.eventBase.getSelectedEvents();\n\n      if (selectedElements.length > 0) {\n        var eventObj = this.parent.eventBase.getEventByGuid(selectedElements[0].getAttribute('data-guid'));\n        var titleContent = selectedElements.length === 1 ? eventObj[this.parent.eventFields.subject] || this.l10n.getConstant('noTitle') : '(' + selectedElements.length + ')' + '&nbsp;' + this.l10n.getConstant('selectedItems');\n        this.quickPopup.element.querySelector('.' + SUBJECT_CLASS).innerHTML = titleContent;\n\n        if (selectedElements.length > 1) {\n          addClass([this.quickPopup.element.querySelector('.' + EDIT_ICON_CLASS)], HIDDEN_CLASS);\n        } else {\n          removeClass([this.quickPopup.element.querySelector('.' + EDIT_ICON_CLASS)], HIDDEN_CLASS);\n        }\n      } else {\n        this.parent.selectedElements = [];\n        this.quickPopupHide();\n      }\n    }\n  }, {\n    key: \"getTimezone\",\n    value: function getTimezone(event) {\n      var zoneDetails = '';\n      zoneDetails += event[this.parent.eventFields.startTimezone] || '';\n      zoneDetails += zoneDetails === '' ? '' : ' - ';\n      zoneDetails += event[this.parent.eventFields.endTimezone] || '';\n      return zoneDetails;\n    }\n  }, {\n    key: \"getRecurrenceSummary\",\n    value: function getRecurrenceSummary(event) {\n      var recurrenceEditor = this.parent.eventWindow.getRecurrenceEditorInstance();\n\n      if (recurrenceEditor) {\n        var ruleSummary = recurrenceEditor.getRuleSummary(event[this.parent.eventFields.recurrenceRule]);\n        return ruleSummary.charAt(0).toUpperCase() + ruleSummary.slice(1);\n      }\n\n      return '';\n    }\n  }, {\n    key: \"getDateFormat\",\n    value: function getDateFormat(date, skeletonString) {\n      return capitalizeFirstWord(this.parent.globalize.formatDate(date, {\n        skeleton: skeletonString,\n        calendar: this.parent.getCalendarMode()\n      }), 'single');\n    }\n  }, {\n    key: \"getDataFromTarget\",\n    value: function getDataFromTarget(target) {\n      if (target.classList.contains(APPOINTMENT_CLASS)) {\n        return this.parent.activeEventData.event;\n      } // Deprecated cells data in quick popups\n\n\n      var eventObj = {\n        startTime: this.parent.activeCellsData.startTime,\n        endTime: this.parent.activeCellsData.endTime,\n        isAllDay: this.parent.activeCellsData.isAllDay,\n        groupIndex: this.parent.activeCellsData.groupIndex\n      };\n      var cellsData = this.parent.activeCellsData;\n      this.parent.eventWindow.convertToEventData(cellsData, eventObj);\n      return eventObj;\n    }\n  }, {\n    key: \"beforeQuickDialogClose\",\n    value: function beforeQuickDialogClose(e) {\n      var _this31 = this;\n\n      var args = {\n        event: e.event || this.dialogEvent,\n        type: isNullOrUndefined(this.parent.activeEventData.event) ? 'ValidationAlert' : !isNullOrUndefined(this.parent.activeEventData.event[this.parent.eventFields.recurrenceRule]) ? 'RecurrenceAlert' : 'DeleteAlert',\n        cancel: false,\n        data: this.parent.activeEventData.event,\n        element: this.quickDialog.element\n      };\n      this.parent.trigger(popupClose, args, function (popupCloseArgs) {\n        if (!popupCloseArgs.cancel) {\n          _this31.parent.eventBase.focusElement(true);\n        }\n      });\n    }\n  }, {\n    key: \"beforeQuickPopupOpen\",\n    value: function beforeQuickPopupOpen(target) {\n      var _this32 = this;\n\n      this.parent.renderTemplates();\n      var isEventPopup = this.quickPopup.element.querySelector('.' + EVENT_POPUP_CLASS);\n      var popupType = this.parent.isAdaptive ? isEventPopup ? 'ViewEventInfo' : 'EditEventInfo' : 'QuickInfo';\n      var eventProp = {\n        type: popupType,\n        cancel: false,\n        data: extend({}, this.getDataFromTarget(target), null, true),\n        target: target,\n        element: this.quickPopup.element\n      };\n      this.parent.trigger(popupOpen, eventProp, function (popupArgs) {\n        if (popupArgs.cancel) {\n          _this32.quickPopupHide();\n\n          _this32.destroyPopupButtons('quickPopup');\n\n          if (popupArgs.element.classList.contains(POPUP_OPEN)) {\n            _this32.quickPopupClose();\n          }\n\n          removeChildren(_this32.quickPopup.element);\n          _this32.isMultipleEventSelect = false;\n        } else {\n          var display = _this32.quickPopup.element.style.display;\n          _this32.quickPopup.element.style.display = 'block';\n\n          if (_this32.parent.isAdaptive) {\n            _this32.quickPopup.element.removeAttribute('style');\n\n            _this32.quickPopup.element.style.display = 'block';\n            _this32.quickPopup.element.style.height = formatUnit(popupType === 'EditEventInfo' ? 65 : window.innerHeight);\n          } else {\n            _this32.quickPopup.offsetX = 10;\n            _this32.quickPopup.collision = {\n              X: _this32.parent.enableRtl ? 'flip' : 'none',\n              Y: 'fit'\n            };\n            _this32.quickPopup.position = {\n              X: _this32.parent.enableRtl ? 'left' : 'right',\n              Y: _this32.parent.enableRtl ? 'bottom' : 'top'\n            };\n\n            _this32.quickPopup.dataBind();\n\n            _this32.quickPopup.refreshPosition(null, true);\n\n            var collide = isCollide(_this32.quickPopup.element, _this32.parent.element);\n\n            if (collide.indexOf(_this32.parent.enableRtl ? 'left' : 'right') > -1) {\n              _this32.quickPopup.offsetX = -target.offsetWidth - 10 - _this32.quickPopup.element.offsetWidth;\n\n              _this32.quickPopup.dataBind();\n\n              var leftCollide = isCollide(_this32.quickPopup.element, _this32.parent.element);\n\n              if (leftCollide.indexOf('left') > -1) {\n                _this32.quickPopup.position = {\n                  X: 'center',\n                  Y: 'center'\n                };\n                _this32.quickPopup.collision = {\n                  X: 'fit',\n                  Y: 'fit'\n                };\n                _this32.quickPopup.offsetX = -(_this32.quickPopup.element.offsetWidth / 2);\n\n                _this32.quickPopup.dataBind();\n              }\n            }\n\n            if (_this32.parent.virtualScrollModule && (collide.indexOf('top') > -1 || collide.indexOf('bottom') > -1)) {\n              var element = _this32.parent.element.querySelector('.' + CONTENT_WRAP_CLASS + ' table');\n\n              var translateY = getTranslateY(element);\n              _this32.quickPopup.offsetY = translateY;\n\n              _this32.quickPopup.dataBind();\n            }\n          }\n\n          if (isEventPopup) {\n            _this32.applyEventColor();\n          }\n\n          _this32.quickPopup.element.style.display = display;\n\n          _this32.quickPopup.dataBind();\n\n          _this32.quickPopup.show();\n        }\n      });\n    }\n  }, {\n    key: \"applyEventColor\",\n    value: function applyEventColor() {\n      var colorField = '';\n\n      if (this.parent.currentView === 'Agenda' || this.parent.currentView === 'MonthAgenda') {\n        colorField = this.parent.enableRtl ? 'border-right-color' : 'border-left-color';\n      } else {\n        colorField = 'background-color';\n      }\n\n      var color = this.parent.activeEventData.element.style[colorField];\n\n      if (color === '') {\n        return;\n      }\n\n      var colorEle = this.quickPopup.element.querySelector('.' + POPUP_HEADER_CLASS);\n      var footerEle = this.quickPopup.element.querySelector('.' + POPUP_FOOTER_CLASS);\n\n      if (footerEle && footerEle.offsetParent) {\n        colorEle = this.quickPopup.element.querySelector('.' + SUBJECT_CLASS);\n\n        if (colorEle) {\n          colorEle.style.borderLeftColor = color;\n          color = \"rgba(\".concat(color.match(/\\d+/g).join(), \",0.3)\");\n        }\n      }\n\n      if (colorEle) {\n        colorEle.style.backgroundColor = color;\n      }\n    }\n  }, {\n    key: \"quickPopupOpen\",\n    value: function quickPopupOpen() {\n      if (this.parent.isAdaptive) {\n        this.quickPopup.element.style.top = '0px';\n        return;\n      }\n\n      if (this.quickPopup.element.querySelector('.' + CELL_POPUP_CLASS)) {\n        var subjectElement = this.quickPopup.element.querySelector('.' + SUBJECT_CLASS);\n\n        if (subjectElement) {\n          subjectElement.focus();\n        }\n      } else {\n        var editElement = this.quickPopup.element.querySelector('.' + EDIT_EVENT_CLASS);\n\n        if (editElement) {\n          editElement.focus();\n        }\n\n        var editIcon = this.quickPopup.element.querySelector('.' + EDIT_CLASS);\n\n        if (editIcon) {\n          editIcon.focus();\n        }\n      }\n    }\n  }, {\n    key: \"quickPopupClose\",\n    value: function quickPopupClose() {\n      this.parent.eventBase.focusElement();\n      this.quickPopup.relateTo = WORK_CELLS_CLASS;\n      this.fieldValidator.destroyToolTip();\n\n      if (this.quickPopup.element.querySelectorAll('.e-formvalidator').length) {\n        this.fieldValidator.destroy();\n      }\n\n      this.destroyPopupButtons('quickPopup');\n      removeChildren(this.quickPopup.element);\n    }\n  }, {\n    key: \"morePopupOpen\",\n    value: function morePopupOpen() {\n      if (this.parent.isAdaptive) {\n        this.morePopup.element.style.top = '0px';\n        this.morePopup.element.style.left = '0px';\n        this.morePopup.element.style.height = formatUnit(window.innerHeight);\n        return;\n      }\n\n      this.morePopup.element.querySelector('.' + MORE_EVENT_HEADER_DATE_CLASS).focus();\n      this.morePopup.refreshPosition();\n    }\n  }, {\n    key: \"morePopupClose\",\n    value: function morePopupClose() {\n      var moreWrapper = this.parent.element.querySelector('.' + MORE_EVENT_WRAPPER_CLASS);\n\n      if (moreWrapper) {\n        remove(moreWrapper);\n      }\n    }\n  }, {\n    key: \"popupClose\",\n    value: function popupClose(event) {\n      this.dialogEvent = event;\n      this.isCrudAction = false;\n      this.quickPopupHide(true);\n    }\n  }, {\n    key: \"quickPopupHide\",\n    value: function quickPopupHide(hideAnimation) {\n      var _this33 = this;\n\n      if (!this.quickPopup.element.classList.contains(POPUP_OPEN)) {\n        return;\n      }\n\n      var isCellPopup = this.quickPopup.element.querySelector('.' + CELL_POPUP_CLASS);\n      var popupData;\n\n      if (isCellPopup) {\n        var formvalidator = this.quickPopup.element.querySelector('.e-formvalidator');\n\n        if (this.isCrudAction && formvalidator && !formvalidator.ej2_instances[0].validate()) {\n          return;\n        }\n\n        var fields = this.parent.eventFields;\n        var saveObj = this.parent.eventWindow.getObjectFromFormData(POPUP_WRAPPER_CLASS);\n        this.parent.eventWindow.setDefaultValueToObject(saveObj);\n        saveObj[fields.id] = this.parent.eventBase.getEventMaxID();\n        saveObj[fields.startTime] = this.parent.activeCellsData.startTime;\n        saveObj[fields.endTime] = this.parent.activeCellsData.endTime;\n        saveObj[fields.isAllDay] = this.parent.activeCellsData.isAllDay;\n\n        if (this.parent.resourceBase) {\n          this.parent.resourceBase.setResourceValues(saveObj);\n        }\n\n        popupData = saveObj;\n      } else {\n        popupData = this.parent.activeEventData.event;\n      }\n\n      var isEventPopup = this.quickPopup.element.querySelector('.' + EVENT_POPUP_CLASS);\n      var args = {\n        event: this.dialogEvent,\n        type: this.parent.isAdaptive ? isEventPopup ? 'ViewEventInfo' : 'EditEventInfo' : 'QuickInfo',\n        cancel: false,\n        data: popupData,\n        element: this.quickPopup.element,\n        target: isCellPopup ? this.parent.activeCellsData.element : this.parent.activeEventData.element\n      };\n      this.parent.trigger(popupClose, args, function (popupCloseArgs) {\n        if (!popupCloseArgs.cancel) {\n          if (_this33.quickPopup.element.classList.contains('e-popup-open')) {\n            if (isCellPopup && _this33.isCrudAction) {\n              _this33.parent.currentAction = 'Add';\n\n              _this33.parent.crudModule.addEvent(popupCloseArgs.data);\n            }\n\n            if (hideAnimation) {\n              var animation = _this33.quickPopup.hideAnimation;\n              _this33.quickPopup.hideAnimation = null;\n\n              _this33.quickPopup.hide();\n\n              _this33.quickPopup.hideAnimation = animation;\n            } else {\n              _this33.quickPopup.hide();\n            }\n\n            _this33.isMultipleEventSelect = false;\n            _this33.isCrudAction = false;\n          }\n        }\n      });\n    }\n  }, {\n    key: \"navigationClick\",\n    value: function navigationClick(e) {\n      var navigateEle = closest(e.target, '.' + NAVIGATE_CLASS);\n\n      if (!isNullOrUndefined(navigateEle)) {\n        var date = this.parent.getDateFromElement(e.currentTarget);\n\n        if (!isNullOrUndefined(date)) {\n          this.closeClick(e);\n          this.parent.setProperties({\n            selectedDate: date\n          }, true);\n          this.parent.changeView(this.parent.getNavigateView(), e);\n        }\n      }\n    }\n  }, {\n    key: \"documentClick\",\n    value: function documentClick(e) {\n      var target = e.event.target;\n      var classNames = '.' + POPUP_WRAPPER_CLASS + ',.' + HEADER_CELLS_CLASS + ',.' + ALLDAY_CELLS_CLASS + ',.' + WORK_CELLS_CLASS + ',.' + APPOINTMENT_CLASS + ',.e-popup';\n      var popupWrap = this.parent.element.querySelector('.' + POPUP_WRAPPER_CLASS);\n\n      if (popupWrap && popupWrap.childElementCount > 0 && !closest(target, classNames) || !closest(target, classNames)) {\n        this.quickPopupHide();\n        this.parent.removeNewEventElement();\n      }\n\n      var tar = this.parent.element.querySelector('.' + INLINE_SUBJECT_CLASS);\n\n      if (tar && tar !== target && this.parent.allowInline) {\n        this.parent.inlineModule.documentClick();\n      }\n\n      if (closest(target, '.' + APPOINTMENT_CLASS + ',.' + HEADER_CELLS_CLASS)) {\n        this.parent.removeNewEventElement();\n      }\n\n      if (!closest(target, '.' + MORE_POPUP_WRAPPER_CLASS) && target.classList && !target.classList.contains(MORE_INDICATOR_CLASS) && !closest(target, '.' + POPUP_OPEN) && !closest(target, '.' + WORK_CELLS_CLASS)) {\n        this.morePopup.hide();\n      }\n    }\n  }, {\n    key: \"onClosePopup\",\n    value: function onClosePopup(event) {\n      if (!isNullOrUndefined(event)) {\n        this.dialogEvent = event;\n      }\n\n      this.quickPopupHide();\n      this.parent.eventBase.focusElement();\n    }\n  }, {\n    key: \"addEventListener\",\n    value: function addEventListener() {\n      this.parent.on(_cellClick, this.cellClick, this);\n      this.parent.on(_eventClick, this.eventClick, this);\n      this.parent.on(documentClick, this.documentClick, this);\n      this.parent.on(dataReady, this.updateMoreEventContent, this);\n    }\n  }, {\n    key: \"removeEventListener\",\n    value: function removeEventListener() {\n      this.parent.off(_cellClick, this.cellClick);\n      this.parent.off(_eventClick, this.eventClick);\n      this.parent.off(documentClick, this.documentClick);\n      this.parent.off(dataReady, this.updateMoreEventContent);\n    }\n  }, {\n    key: \"destroyPopupButtons\",\n    value: function destroyPopupButtons(popupName) {\n      var popup = popupName === 'quickPopup' ? this.quickPopup : this.morePopup;\n      var buttonCollections = [].slice.call(popup.element.querySelectorAll('.e-control.e-btn'));\n\n      var _iterator50 = _createForOfIteratorHelper(buttonCollections),\n          _step50;\n\n      try {\n        for (_iterator50.s(); !(_step50 = _iterator50.n()).done;) {\n          var button = _step50.value;\n          var instance = button.ej2_instances[0];\n\n          if (instance) {\n            instance.destroy();\n          }\n        }\n      } catch (err) {\n        _iterator50.e(err);\n      } finally {\n        _iterator50.f();\n      }\n    }\n  }, {\n    key: \"refreshQuickDialog\",\n    value: function refreshQuickDialog() {\n      this.destroyQuickDialog();\n      this.renderQuickDialog();\n    }\n  }, {\n    key: \"refreshQuickPopup\",\n    value: function refreshQuickPopup() {\n      this.destroyQuickPopup();\n      this.renderQuickPopup();\n    }\n  }, {\n    key: \"refreshMorePopup\",\n    value: function refreshMorePopup() {\n      this.destroyMorePopup();\n      this.renderMorePopup();\n    }\n  }, {\n    key: \"destroyQuickDialog\",\n    value: function destroyQuickDialog() {\n      if (this.quickDialog.element) {\n        this.quickDialog.destroy();\n        remove(this.quickDialog.element);\n        this.quickDialog = null;\n      }\n    }\n  }, {\n    key: \"destroyQuickPopup\",\n    value: function destroyQuickPopup() {\n      if (this.quickPopup.element) {\n        this.destroyPopupButtons('quickPopup');\n        this.quickPopup.destroy();\n        remove(this.quickPopup.element);\n        this.quickPopup = null;\n      }\n    }\n  }, {\n    key: \"destroyMorePopup\",\n    value: function destroyMorePopup() {\n      if (this.morePopup.element) {\n        this.destroyPopupButtons('morePopup');\n        this.morePopup.destroy();\n        remove(this.morePopup.element);\n        this.morePopup = null;\n      }\n    }\n  }, {\n    key: \"destroy\",\n    value: function destroy() {\n      if (this.quickPopup.element.querySelectorAll('.e-formvalidator').length) {\n        this.fieldValidator.destroy();\n      }\n\n      this.removeEventListener();\n      this.destroyQuickPopup();\n      this.destroyMorePopup();\n      this.destroyQuickDialog();\n      this.parent = null;\n      this.l10n = null;\n      this.isCrudAction = null;\n      this.fieldValidator = null;\n      this.isMultipleEventSelect = null;\n    }\n  }]);\n\n  return QuickPopups;\n}();\n/* eslint-disable @typescript-eslint/no-explicit-any */\n\n/**\n * Tooltip for Schedule\n */\n\n\nvar EventTooltip = /*#__PURE__*/function () {\n  function EventTooltip(parent) {\n    _classCallCheck(this, EventTooltip);\n\n    this.parent = parent;\n    this.tooltipObj = new Tooltip({\n      animation: {\n        close: {\n          effect: 'FadeOut'\n        }\n      },\n      content: 'No title',\n      position: 'BottomRight',\n      offsetY: 10,\n      mouseTrail: this.parent.isAdaptive ? false : true,\n      showTipPointer: false,\n      cssClass: this.parent.cssClass + ' ' + EVENT_TOOLTIP_ROOT_CLASS,\n      target: this.getTargets(),\n      beforeRender: this.onBeforeRender.bind(this),\n      beforeClose: this.onBeforeClose.bind(this),\n      enableRtl: this.parent.enableRtl\n    });\n    this.tooltipObj.appendTo(this.parent.element);\n  }\n\n  _createClass(EventTooltip, [{\n    key: \"getTargets\",\n    value: function getTargets() {\n      var targets = [];\n\n      if (this.parent.activeViewOptions.group.headerTooltipTemplate) {\n        targets.push('.' + RESOURCE_CELLS_CLASS);\n      }\n\n      if (this.parent.eventSettings.enableTooltip) {\n        targets.push('.' + APPOINTMENT_CLASS);\n      }\n\n      return targets.join(',');\n    }\n  }, {\n    key: \"onBeforeRender\",\n    value: function onBeforeRender(args) {\n      if (!isNullOrUndefined(args.target.getAttribute('data-tooltip-id'))) {\n        return;\n      }\n\n      if (args.target.classList.contains(RESOURCE_CELLS_CLASS) && this.parent.activeViewOptions.group.resources.length > 0) {\n        var resCollection;\n\n        if (this.parent.activeView.isTimelineView()) {\n          var index = parseInt(args.target.getAttribute('data-group-index'), 10);\n          resCollection = this.parent.resourceBase.lastResourceLevel[index];\n        } else {\n          var rowIndex = args.target.parentNode.sectionRowIndex;\n          var cellIndex = args.target.cellIndex;\n          resCollection = this.parent.activeView.getColumnLevels()[rowIndex][cellIndex];\n        }\n\n        var data = {\n          resource: resCollection.resource,\n          resourceData: resCollection.resourceData\n        };\n        var contentContainer = createElement('div');\n        var templateId = this.parent.element.id + '_headerTooltipTemplate';\n        var tooltipTemplate = [].slice.call(this.parent.getHeaderTooltipTemplate()(data, this.parent, 'headerTooltipTemplate', templateId, false));\n        append(tooltipTemplate, contentContainer);\n        this.setContent(contentContainer);\n        this.parent.renderTemplates();\n        return;\n      }\n\n      var record = this.parent.eventBase.getEventByGuid(args.target.getAttribute('data-guid'));\n\n      if (isNullOrUndefined(record)) {\n        return;\n      }\n\n      if (!isNullOrUndefined(this.parent.eventSettings.tooltipTemplate)) {\n        var _contentContainer = createElement('div');\n\n        var _templateId = this.parent.element.id + '_tooltipTemplate';\n\n        var _tooltipTemplate = [].slice.call(this.parent.getEventTooltipTemplate()(record, this.parent, 'tooltipTemplate', _templateId, false));\n\n        append(_tooltipTemplate, _contentContainer);\n        this.setContent(_contentContainer);\n      } else {\n        var globalize = this.parent.globalize;\n        var fields = this.parent.eventFields;\n        var eventStart = new Date('' + record[fields.startTime]);\n        var eventEnd = new Date('' + record[fields.endTime]);\n        eventEnd = eventEnd.getHours() === 0 && eventEnd.getMinutes() === 0 ? new Date(eventEnd.setMilliseconds(-1000)) : eventEnd;\n        var startDate = resetTime(new Date('' + eventStart));\n        var endDate = resetTime(new Date('' + eventEnd));\n        var tooltipSubject = record[fields.subject] || this.parent.eventSettings.fields.subject.default || this.parent.localeObj.getConstant('addTitle');\n        var tooltipLocation = !isNullOrUndefined(record[fields.location]) ? record[fields.location] : '';\n        var startMonthDate = '';\n        var startMonthYearDate = '';\n        var endMonthYearDate = '';\n        startMonthDate = globalize.formatDate(eventStart, {\n          type: 'date',\n          skeleton: 'MMMd',\n          calendar: this.parent.getCalendarMode()\n        });\n        startMonthYearDate = globalize.formatDate(eventStart, {\n          type: 'date',\n          skeleton: 'medium',\n          calendar: this.parent.getCalendarMode()\n        });\n        endMonthYearDate = globalize.formatDate(eventEnd, {\n          type: 'date',\n          skeleton: 'medium',\n          calendar: this.parent.getCalendarMode()\n        });\n        startMonthDate = capitalizeFirstWord(startMonthDate, 'single');\n        startMonthYearDate = capitalizeFirstWord(startMonthYearDate, 'single');\n        endMonthYearDate = capitalizeFirstWord(endMonthYearDate, 'single');\n        var skeleton = 'short';\n        var startTime = globalize.formatDate(eventStart, {\n          type: 'time',\n          skeleton: skeleton,\n          calendar: this.parent.getCalendarMode()\n        });\n        var endTime = globalize.formatDate(eventEnd, {\n          type: 'time',\n          skeleton: skeleton,\n          calendar: this.parent.getCalendarMode()\n        });\n        var tooltipDetails;\n\n        if (startDate.getTime() === endDate.getTime()) {\n          tooltipDetails = globalize.formatDate(eventStart, {\n            type: 'date',\n            skeleton: 'long',\n            calendar: this.parent.getCalendarMode()\n          });\n          tooltipDetails = capitalizeFirstWord(tooltipDetails, 'single');\n        } else {\n          tooltipDetails = startDate.getFullYear() === endDate.getFullYear() ? startMonthDate + ' - ' + endMonthYearDate : startMonthYearDate + ' - ' + endMonthYearDate;\n        }\n\n        var tooltipTime = record[fields.isAllDay] ? this.parent.localeObj.getConstant('allDay') : startTime + ' - ' + endTime;\n        var content = '<div><div class=\"e-subject\">' + tooltipSubject + '</div>' + '<div class=\"e-location\">' + tooltipLocation + '</div>' + '<div class=\"e-details\">' + tooltipDetails + '</div>' + '<div class=\"e-all-day\">' + tooltipTime + '</div></div>';\n        this.setContent(content);\n      }\n\n      this.parent.renderTemplates();\n    }\n  }, {\n    key: \"onBeforeClose\",\n    value: function onBeforeClose() {\n      this.parent.resetTemplates(['tooltipTemplate', 'headerTooltipTemplate']);\n    }\n  }, {\n    key: \"setContent\",\n    value: function setContent(content) {\n      this.tooltipObj.setProperties({\n        content: content\n      }, true);\n    }\n  }, {\n    key: \"close\",\n    value: function close() {\n      this.tooltipObj.close();\n    }\n  }, {\n    key: \"destroy\",\n    value: function destroy() {\n      this.tooltipObj.destroy();\n      addClass([this.parent.element], 'e-control');\n      this.tooltipObj = null;\n      this.parent = null;\n    }\n  }]);\n\n  return EventTooltip;\n}();\n\nvar __decorate$1 = undefined && undefined.__decorate || function (decorators, target, key, desc) {\n  var c = arguments.length,\n      r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc,\n      d;\n  if (typeof Reflect === \"object\" && typeof Reflect.decorate === \"function\") r = Reflect.decorate(decorators, target, key, desc);else for (var i = decorators.length - 1; i >= 0; i--) {\n    if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;\n  }\n  return c > 3 && r && Object.defineProperty(target, key, r), r;\n};\n\nvar HEADER = 'e-editor';\nvar INPUTWARAPPER = 'e-input-wrapper';\nvar INPUTWARAPPERSIDE = 'e-input-wrapper-side';\nvar REPEATELEMENT = 'e-repeat-element';\nvar REPEATINTERVAL = 'e-repeat-interval';\nvar INTERVALCLASS = 'e-interval';\nvar DAYWRAPPER = 'e-days';\nvar WEEKWRAPPER = 'e-non-week';\nvar WEEKPOSITION = 'e-week-position';\nvar YEAREXPANDERWRAPPER = 'e-year-expander';\nvar YEAREXPANDERELEMENT = 'e-year-expander-element';\nvar MONETHEXPANDERWRAPPER = 'e-month-expander';\nvar MONETHEXPANDWRAPPER = 'e-month-expand-wrapper';\nvar MONTHEXPANDERELEMENT = 'e-month-expander-element';\nvar MONTHEXPANDERCHECKBOXWRAPPER = 'e-month-expander-checkbox-wrapper';\nvar FORMLEFT = 'e-form-left';\nvar FORMRIGHT = 'e-form-right';\nvar MONTHDAYWRAPPER = 'e-month-day';\nvar MONTHEXPANNDERELEM = 'e-month-expander-wrapper';\nvar MONTHPOS = 'e-month-pos';\nvar MONTHWEEK = 'e-month-week';\nvar ENDON = 'e-end-on';\nvar MONTHEXPANDERLABEL = 'e-month-expander-label';\nvar WEEKEXPANDERLABEL = 'e-week-expander-label';\nvar ENDONLABEL = 'e-end-on-label';\nvar ENDONLEFT = 'e-end-on-left';\nvar MONTHDAYELEMENT = 'e-monthday-element';\nvar ENDONELEMENT = 'e-end-on-element';\nvar ENDONDATE = 'e-end-on-date';\nvar UNTILDATE = 'e-until-date';\nvar ENDONCOUNTWRAPPER = 'e-end-on-count';\nvar ENDONCOUNT = 'e-recurrence-count';\nvar HIDEWRAPPER = 'e-hide-recurrence-element';\nvar RTLCLASS = 'e-rtl';\nvar PRIMARY = 'e-primary';\nvar ACTIVE = 'e-active';\nvar RECURRENCETABLE = 'e-recurrence-table';\nvar REPEATCONTENT = 'e-repeat-content';\nvar REPEATCONTENTWRAPPER = 'e-repeat-content-wrapper';\nvar NONE = 'none';\nvar DAILY = 'daily';\nvar WEEKLY = 'weekly';\nvar MONTHLY = 'monthly';\nvar YEARLY = 'yearly';\nvar NEVER = 'never';\nvar UNTIL$1 = 'until';\nvar COUNT = 'count';\nvar TEXTFIELD = 'text';\nvar VALUEFIELD = 'value';\nvar LAST = 'last';\nvar REPEAT = 'repeat';\nvar REPEATEVERY = 'repeatEvery';\nvar ON$1 = 'on';\nvar END = 'end';\nvar RADIOLABEL = 'onDay';\nvar RULEUNTIL = 'UNTIL';\nvar RULEBYDAY = 'BYDAY';\nvar RULEBYMONTHDAY = 'BYMONTHDAY';\nvar RULEBYMONTH = 'BYMONTH';\nvar RULEINTERVAL = 'INTERVAL';\nvar RULECOUNT = 'COUNT';\nvar RULESETPOS = 'BYSETPOS';\nvar RULEFREQ = 'FREQ';\nvar RULEDAILY = 'DAILY';\nvar RULEWEEKLY = 'WEEKLY';\nvar RULEMONTHLY = 'MONTHLY';\nvar RULEYEARLY = 'YEARLY';\nvar RULESUNDAY = 'SU';\nvar RULEMONDAY = 'MO';\nvar RULETUESDAY = 'TU';\nvar RULEWEDNESDAY = 'WE';\nvar RULETHURSDAY = 'TH';\nvar RULEFRIDAY = 'FR';\nvar RULESATURDAY = 'SA';\nvar KEYSUNDAY = 'sun';\nvar KEYMONDAY = 'mon';\nvar KEYTUESDAY = 'tue';\nvar KEYWEDNESDAY = 'wed';\nvar KEYTHURSDAY = 'thu';\nvar KEYFRIDAY = 'fri';\nvar KEYSATURDAY = 'sat';\nvar EQUAL = '=';\nvar SEMICOLON = ';';\nvar COMMA = ',';\nvar FIRST = 'first';\nvar SECOND = 'second';\nvar THIRD = 'third';\nvar FOURTH = 'fourth';\nvar contentType = {\n  none: '',\n  daily: 'days',\n  weekly: 'weeks',\n  monthly: 'months',\n  yearly: 'years'\n};\nvar valueData = {\n  'sun': RULESUNDAY,\n  'mon': RULEMONDAY,\n  'tue': RULETUESDAY,\n  'wed': RULEWEDNESDAY,\n  'thu': RULETHURSDAY,\n  'fri': RULEFRIDAY,\n  'sat': RULESATURDAY\n};\nvar neverClassList = [DAYWRAPPER, WEEKWRAPPER, ENDON, INTERVALCLASS, YEAREXPANDERWRAPPER, MONETHEXPANDERWRAPPER];\nvar weekClassList = [WEEKWRAPPER];\nvar monthClassList = [DAYWRAPPER, YEAREXPANDERWRAPPER];\nvar yearClassList = [DAYWRAPPER];\nvar dailyClassList = [DAYWRAPPER, WEEKWRAPPER, YEAREXPANDERWRAPPER, MONETHEXPANDERWRAPPER];\nvar noEndClassList = [ENDONDATE, ENDONCOUNTWRAPPER];\nvar endOnCountClassList = [ENDONDATE];\nvar endOnDateClassList = [ENDONCOUNTWRAPPER];\n/**\n * Represents the RecurrenceEditor component.\n * ```html\n * <div id=\"recurrence\"></div>\n * ```\n * ```typescript\n * <script>\n *   var recObj = new RecurrenceEditor();\n *   recObj.appendTo(\"#recurrence\");\n * </script>\n * ```\n */\n\nvar RecurrenceEditor = /*#__PURE__*/function (_Component) {\n  _inherits(RecurrenceEditor, _Component);\n\n  var _super4 = _createSuper(RecurrenceEditor);\n\n  /**\n   * Constructor for creating the widget\n   *\n   * @param {RecurrenceEditorModel} options Accepts the recurrence editor model properties to initiate the rendering\n   * @param {string | HTMLElement} element Accepts the DOM element reference\n   */\n  function RecurrenceEditor(options, element) {\n    var _this34;\n\n    _classCallCheck(this, RecurrenceEditor);\n\n    _this34 = _super4.call(this, options, element); // eslint-disable-next-line @typescript-eslint/no-explicit-any\n\n    _this34.defaultLocale = {\n      none: 'None',\n      daily: 'Daily',\n      weekly: 'Weekly',\n      monthly: 'Monthly',\n      month: 'Month',\n      yearly: 'Yearly',\n      never: 'Never',\n      until: 'Until',\n      count: 'Count',\n      first: 'First',\n      second: 'Second',\n      third: 'Third',\n      fourth: 'Fourth',\n      last: 'Last',\n      repeat: 'Repeat',\n      repeatEvery: 'Repeat every',\n      on: 'Repeat On',\n      end: 'End',\n      onDay: 'Day',\n      days: 'Day(s)',\n      weeks: 'Week(s)',\n      months: 'Month(s)',\n      years: 'Year(s)',\n      every: 'every',\n      summaryTimes: 'time(s)',\n      summaryOn: 'on',\n      summaryUntil: 'until',\n      summaryRepeat: 'Repeats',\n      summaryDay: 'day(s)',\n      summaryWeek: 'week(s)',\n      summaryMonth: 'month(s)',\n      summaryYear: 'year(s)',\n      monthWeek: 'Month Week',\n      monthPosition: 'Month Position',\n      monthExpander: 'Month Expander',\n      yearExpander: 'Year Expander',\n      repeatInterval: 'Repeat Interval'\n    };\n    _this34.renderStatus = false;\n    _this34.dayButtons = [];\n    _this34.monthButtons = [];\n    return _this34;\n  }\n\n  _createClass(RecurrenceEditor, [{\n    key: \"startState\",\n    value: function startState(freq, endOn, startDate) {\n      this.showFormElement();\n      this.updateForm(freq);\n      this.freshOnEndForm();\n      this.updateEndOnForm(endOn);\n      this.selectMonthDay(startDate);\n      this.updateUntilDate(startDate);\n      this.onMonthDay.setProperties({\n        checked: true\n      });\n    }\n  }, {\n    key: \"preRender\",\n    value: function preRender() {\n      this.localeObj = new L10n(this.getModuleName(), this.defaultLocale, this.locale);\n      this.calendarUtil = getCalendarUtil(this.calendarMode);\n    }\n  }, {\n    key: \"applyCustomClass\",\n    value: function applyCustomClass(cssClass) {\n      if (cssClass) {\n        addClass([this.element], cssClass.split(' '));\n      }\n    }\n  }, {\n    key: \"initialize\",\n    value: function initialize() {\n      addClass([this.element], 'e-' + this.getModuleName());\n      this.renderComponent();\n\n      if (!isNullOrUndefined(this.value) && this.value !== '') {\n        this.setRecurrenceRule(this.value);\n      } else {\n        if (!isNullOrUndefined(this.repeatType.value)) {\n          this.startState(this.repeatType.value.toString().toUpperCase(), NEVER, this.startDate);\n          this.updateForm(this.repeatType.value.toString());\n        }\n\n        if (this.selectedType > 0) {\n          this.setProperties({\n            value: this.getRecurrenceRule()\n          }, false);\n        }\n      }\n\n      this.applyCustomClass(this.cssClass);\n    }\n  }, {\n    key: \"triggerChangeEvent\",\n    value: function triggerChangeEvent() {\n      var _this35 = this;\n\n      if (this.renderStatus) {\n        var value = this.getRecurrenceRule();\n        this.trigger('change', {\n          value: value\n        }, function (args) {\n          return _this35.setProperties({\n            value: args.value\n          }, false);\n        });\n      }\n    }\n  }, {\n    key: \"resetDayButton\",\n    value: function resetDayButton() {\n      var elements = [].slice.call(this.element.querySelectorAll('.' + DAYWRAPPER + ' button'));\n      elements.forEach(function (element) {\n        return removeClass([element], [ACTIVE, PRIMARY]);\n      });\n    }\n  }, {\n    key: \"daySelection\",\n    value: function daySelection(dayIndex) {\n      this.resetDayButton();\n      var days = [0, 1, 2, 3, 4, 5, 6];\n      this.rotateArray(days, this.firstDayOfWeek);\n      var element = this.element.querySelector('.' + DAYWRAPPER + ' button[data-index=\"' + days.indexOf(dayIndex) + '\"]');\n\n      if (element) {\n        addClass([element], [ACTIVE, PRIMARY]);\n      }\n    }\n  }, {\n    key: \"rtlClass\",\n    value: function rtlClass(status) {\n      if (status) {\n        addClass([this.element], RTLCLASS);\n      } else {\n        removeClass([this.element], RTLCLASS);\n      }\n    }\n  }, {\n    key: \"updateUntilDate\",\n    value: function updateUntilDate(date) {\n      var tempDate = new Date(date.getTime());\n      tempDate.setDate(tempDate.getDate() + 60);\n      this.untilDateObj.setProperties({\n        value: tempDate\n      });\n    }\n  }, {\n    key: \"selectMonthDay\",\n    value: function selectMonthDay(date) {\n      var weekday = [KEYSUNDAY, KEYMONDAY, KEYTUESDAY, KEYWEDNESDAY, KEYTHURSDAY, KEYFRIDAY, KEYSATURDAY];\n      this.monthDate.setProperties({\n        value: this.calendarUtil.getDate(date)\n      });\n      this.monthWeekDays.setProperties({\n        value: valueData[weekday[date.getDay()]]\n      });\n      this.monthValue.setProperties({\n        value: '' + this.calendarUtil.getMonth(date)\n      });\n      this.monthWeekPos.setProperties({\n        value: this.getDayPosition(date)\n      });\n      this.daySelection(date.getDay());\n    }\n  }, {\n    key: \"updateForm\",\n    value: function updateForm(state) {\n      var _this36 = this;\n\n      this.repeatType.setProperties({\n        value: state\n      });\n      var end = this.element.querySelector('.' + ENDON);\n\n      if (state === DAILY) {\n        classList(end, [FORMLEFT], [FORMRIGHT]);\n      } else {\n        classList(end, [FORMRIGHT], [FORMLEFT]);\n      }\n\n      switch (state) {\n        case NONE:\n          neverClassList.forEach(function (className) {\n            return addClass([_this36.element.querySelector('.' + className)], HIDEWRAPPER);\n          });\n          break;\n\n        case WEEKLY:\n          weekClassList.forEach(function (className) {\n            return addClass([_this36.element.querySelector('.' + className)], HIDEWRAPPER);\n          });\n          break;\n\n        case MONTHLY:\n          monthClassList.forEach(function (className) {\n            return addClass([_this36.element.querySelector('.' + className)], HIDEWRAPPER);\n          });\n          break;\n\n        case YEARLY:\n          yearClassList.forEach(function (className) {\n            return addClass([_this36.element.querySelector('.' + className)], HIDEWRAPPER);\n          });\n          break;\n\n        case DAILY:\n          dailyClassList.forEach(function (className) {\n            return addClass([_this36.element.querySelector('.' + className)], HIDEWRAPPER);\n          });\n          break;\n      }\n    }\n  }, {\n    key: \"updateEndOnForm\",\n    value: function updateEndOnForm(state) {\n      var _this37 = this;\n\n      this.endType.setProperties({\n        value: state\n      });\n\n      switch (state) {\n        case NEVER:\n          noEndClassList.forEach(function (className) {\n            return addClass([_this37.element.querySelector('.' + className)], HIDEWRAPPER);\n          });\n          break;\n\n        case UNTIL$1:\n          endOnDateClassList.forEach(function (className) {\n            return addClass([_this37.element.querySelector('.' + className)], HIDEWRAPPER);\n          });\n          break;\n\n        case COUNT:\n          endOnCountClassList.forEach(function (className) {\n            return addClass([_this37.element.querySelector('.' + className)], HIDEWRAPPER);\n          });\n          break;\n      }\n    }\n  }, {\n    key: \"freshOnEndForm\",\n    value: function freshOnEndForm() {\n      var _this38 = this;\n\n      noEndClassList.forEach(function (className) {\n        var element = _this38.element.querySelector('.' + className);\n\n        if (element) {\n          removeClass([element], HIDEWRAPPER);\n        }\n      });\n    }\n  }, {\n    key: \"showFormElement\",\n    value: function showFormElement() {\n      var _this39 = this;\n\n      neverClassList.forEach(function (className) {\n        var hideElement = _this39.element.querySelector('.' + className);\n\n        if (hideElement) {\n          removeClass([hideElement], HIDEWRAPPER);\n        }\n      });\n    }\n  }, {\n    key: \"renderDropdowns\",\n    value: function renderDropdowns() {\n      var _this40 = this;\n\n      // eslint-disable-next-line @typescript-eslint/no-this-alias\n      var self = this;\n      this.repeatType = new DropDownList({\n        //set the data to dataSource property\n        dataSource: this.getRepeatData(),\n        floatLabelType: 'Always',\n        enableRtl: this.enableRtl,\n        index: this.selectedType,\n        fields: {\n          text: TEXTFIELD,\n          value: VALUEFIELD\n        },\n        placeholder: this.localeObj.getConstant(REPEAT),\n        htmlAttributes: {\n          'title': this.localeObj.getConstant(REPEAT)\n        },\n        change: function change(args) {\n          self.setProperties({\n            selectedType: _this40.frequencies.indexOf(args.value)\n          }, false);\n          self.element.querySelector('.' + REPEATCONTENT).innerHTML = self.localeObj.getConstant(contentType[args.value]);\n          self.showFormElement();\n          self.updateForm(args.value);\n          self.resetFormValues();\n          self.triggerChangeEvent();\n        }\n      }); // set placeholder to DropDownList input element\n\n      this.repeatType.appendTo(this.element.querySelector('.' + REPEATELEMENT));\n      this.endType = new DropDownList({\n        dataSource: this.getEndData(),\n        popupWidth: this.getPopupWidth(),\n        enableRtl: this.enableRtl,\n        index: 1,\n        fields: {\n          text: TEXTFIELD,\n          value: VALUEFIELD\n        },\n        change: function change(args) {\n          self.freshOnEndForm();\n          self.updateEndOnForm(args.value);\n          self.resetFormValues();\n          self.triggerChangeEvent();\n        }\n      });\n      this.endType.appendTo(this.element.querySelector('.' + ENDONELEMENT)); // eslint-disable-next-line @typescript-eslint/ban-types\n\n      var renderDropDownList = function renderDropDownList(dropDownData) {\n        return new DropDownList({\n          dataSource: dropDownData,\n          popupWidth: _this40.getPopupWidth(),\n          enableRtl: _this40.enableRtl,\n          fields: {\n            text: TEXTFIELD,\n            value: VALUEFIELD\n          },\n          index: 1,\n          // eslint-disable-next-line @typescript-eslint/no-unused-vars\n          change: function change(args) {\n            self.onWeekDay.setProperties({\n              checked: true\n            });\n            self.resetFormValues();\n            self.triggerChangeEvent();\n          }\n        });\n      };\n\n      this.monthWeekPos = renderDropDownList(this.getMonthPosData());\n      this.monthWeekPos.appendTo(this.element.querySelector('.' + MONTHPOS));\n      this.monthWeekDays = renderDropDownList(this.getDayData('wide'));\n      this.monthWeekDays.appendTo(this.element.querySelector('.' + MONTHWEEK));\n      this.monthValue = new DropDownList({\n        dataSource: this.getMonthData(),\n        fields: {\n          text: TEXTFIELD,\n          value: VALUEFIELD\n        },\n        enableRtl: this.enableRtl,\n        index: 7,\n        // eslint-disable-next-line @typescript-eslint/no-unused-vars\n        change: function change(args) {\n          self.resetFormValues();\n          self.triggerChangeEvent();\n        }\n      });\n      this.monthValue.appendTo(this.element.querySelector('.' + YEAREXPANDERELEMENT));\n    }\n  }, {\n    key: \"setDefaultValue\",\n    value: function setDefaultValue() {\n      var formelement = [].slice.call(this.element.querySelectorAll('.e-control .e-numerictextbox'));\n\n      var _iterator51 = _createForOfIteratorHelper(formelement),\n          _step51;\n\n      try {\n        for (_iterator51.s(); !(_step51 = _iterator51.n()).done;) {\n          var element = _step51.value;\n          var instance = element.ej2_instances[0];\n\n          if (instance.element.classList.contains(REPEATINTERVAL)) {\n            instance.value = 1;\n            instance.dataBind();\n          } else if (instance.element.classList.contains(ENDONCOUNT)) {\n            instance.value = 10;\n            instance.dataBind();\n          }\n        }\n      } catch (err) {\n        _iterator51.e(err);\n      } finally {\n        _iterator51.f();\n      }\n    }\n  }, {\n    key: \"resetFormValues\",\n    value: function resetFormValues() {\n      var recurreneElement = [].slice.call(this.element.querySelectorAll('.e-control [type=\"text\"]'));\n\n      var _iterator52 = _createForOfIteratorHelper(recurreneElement),\n          _step52;\n\n      try {\n        for (_iterator52.s(); !(_step52 = _iterator52.n()).done;) {\n          var element = _step52.value;\n          var instance = void 0;\n\n          if (element.classList.contains('e-datepicker')) {\n            instance = element.ej2_instances[0];\n\n            if (instance.value) {\n              // eslint-disable-next-line no-self-assign\n              instance.value = instance.value;\n              instance.dataBind();\n            } else {\n              this.updateUntilDate(this.startDate);\n            }\n          } else if (element.classList.contains('e-dropdownlist')) {\n            instance = element.ej2_instances[0];\n            instance.index = instance.index || 0;\n            instance.dataBind();\n          } else if (element.classList.contains('e-numerictextbox')) {\n            instance = element.ej2_instances[0];\n            var value = void 0;\n\n            if (instance.element.classList.contains(REPEATINTERVAL)) {\n              value = 1;\n            } else if (instance.element.classList.contains(ENDONCOUNT)) {\n              value = 10;\n            } else {\n              value = this.startDate.getDate();\n            }\n\n            instance.value = instance.value || value;\n            instance.dataBind();\n          }\n        }\n      } catch (err) {\n        _iterator52.e(err);\n      } finally {\n        _iterator52.f();\n      }\n    }\n  }, {\n    key: \"getPopupWidth\",\n    value: function getPopupWidth() {\n      return Browser.isDevice ? '100%' : 'auto';\n    }\n  }, {\n    key: \"renderDatePickers\",\n    value: function renderDatePickers() {\n      // eslint-disable-next-line @typescript-eslint/no-this-alias\n      var self = this;\n      this.untilDateObj = new DatePicker({\n        firstDayOfWeek: this.firstDayOfWeek,\n        enableRtl: this.enableRtl,\n        locale: this.locale,\n        min: this.minDate,\n        max: this.maxDate,\n        format: isNullOrUndefined(this.dateFormat) ? this.getFormat('dateFormats') : this.dateFormat,\n        change: function change(args) {\n          if (args.value) {\n            self.triggerChangeEvent();\n          }\n        }\n      });\n      this.untilDateObj.appendTo(this.element.querySelector('.' + UNTILDATE));\n    }\n  }, {\n    key: \"getFormat\",\n    value: function getFormat(formatType) {\n      var format;\n\n      if (this.locale === 'en' || this.locale === 'en-US') {\n        format = getValue(formatType + '.short', getDefaultDateObject(this.getCalendarMode()));\n      } else {\n        format = getValue('main.' + '' + this.locale + '.dates.calendars.' + this.getCalendarMode() + '.' + formatType + '.short', cldrData);\n      }\n\n      return format;\n    }\n  }, {\n    key: \"dayButtonRender\",\n    value: function dayButtonRender() {\n      var _this41 = this;\n\n      var btns = [].slice.call(this.element.querySelectorAll('.' + DAYWRAPPER + ' button')); // eslint-disable-next-line @typescript-eslint/no-this-alias\n\n      var self = this;\n\n      var _iterator53 = _createForOfIteratorHelper(btns),\n          _step53;\n\n      try {\n        for (_iterator53.s(); !(_step53 = _iterator53.n()).done;) {\n          var btn = _step53.value;\n          var button = new Button({\n            isToggle: true,\n            enableRtl: this.enableRtl\n          }, btn);\n          this.dayButtons.push(button);\n          EventHandler.add(btn, 'click', function (args) {\n            var btns = [].slice.call(_this41.element.querySelectorAll('.' + DAYWRAPPER + ' button.' + PRIMARY));\n            var element = args.target;\n\n            if (!element.classList.contains(PRIMARY)) {\n              addClass([element], PRIMARY);\n              self.triggerChangeEvent();\n            } else if (btns.length > 1) {\n              removeClass([element], PRIMARY);\n              self.triggerChangeEvent();\n            }\n          });\n        }\n      } catch (err) {\n        _iterator53.e(err);\n      } finally {\n        _iterator53.f();\n      }\n    }\n  }, {\n    key: \"radioButtonRender\",\n    value: function radioButtonRender() {\n      // eslint-disable-next-line @typescript-eslint/no-this-alias\n      var self = this;\n      this.onMonthDay = new RadioButton({\n        label: this.localeObj.getConstant(RADIOLABEL),\n        enableRtl: this.enableRtl,\n        name: 'monthType',\n        value: 'day',\n        change: function change() {\n          self.resetFormValues();\n          self.triggerChangeEvent();\n        }\n      });\n      this.onMonthDay.appendTo(this.element.querySelector('.' + MONTHEXPANDERELEMENT));\n      this.monthButtons.push(this.onMonthDay);\n      this.onWeekDay = new RadioButton({\n        label: this.localeObj.getConstant('monthExpander'),\n        cssClass: 'e-month-type',\n        name: 'monthType',\n        enableRtl: this.enableRtl,\n        value: 'daypos',\n        change: function change() {\n          self.resetFormValues();\n          self.triggerChangeEvent();\n        }\n      });\n      this.onWeekDay.appendTo(this.element.querySelector('.' + MONTHEXPANNDERELEM));\n      this.monthButtons.push(this.onWeekDay);\n    }\n  }, {\n    key: \"numericTextboxRender\",\n    value: function numericTextboxRender() {\n      // eslint-disable-next-line @typescript-eslint/no-this-alias\n      var self = this;\n      this.recurrenceCount = new NumericTextBox({\n        value: 10,\n        format: '#',\n        enableRtl: this.enableRtl,\n        min: 1,\n        max: 999,\n        change: function change() {\n          self.triggerChangeEvent();\n        }\n      });\n      this.recurrenceCount.appendTo(this.element.querySelector('.' + ENDONCOUNT));\n      this.monthDate = new NumericTextBox({\n        value: 1,\n        format: '#',\n        enableRtl: this.enableRtl,\n        min: 1,\n        max: 31,\n        change: function change() {\n          self.onMonthDay.setProperties({\n            checked: true\n          });\n          self.triggerChangeEvent();\n        }\n      });\n      this.monthDate.appendTo(this.element.querySelector('.' + MONTHDAYWRAPPER));\n      this.repeatInterval = new NumericTextBox({\n        value: 1,\n        format: '#',\n        min: 1,\n        max: 999,\n        enableRtl: this.enableRtl,\n        floatLabelType: 'Always',\n        placeholder: this.localeObj.getConstant(REPEATEVERY),\n        change: function change() {\n          self.triggerChangeEvent();\n        }\n      });\n      this.repeatInterval.appendTo(this.element.querySelector('.' + REPEATINTERVAL));\n    }\n  }, {\n    key: \"renderComponent\",\n    value: function renderComponent() {\n      this.setTemplate();\n      this.renderDropdowns();\n      this.renderDatePickers();\n      this.dayButtonRender();\n      this.radioButtonRender();\n      this.numericTextboxRender();\n    }\n  }, {\n    key: \"rotateArray\",\n    value: function rotateArray(data, count) {\n      var temp;\n\n      for (var index = 0; index < count; index++) {\n        temp = data.shift();\n        data.push(temp);\n      }\n    }\n  }, {\n    key: \"getEndData\",\n    value: function getEndData() {\n      var endData = [NEVER, UNTIL$1, COUNT]; // eslint-disable-next-line @typescript-eslint/no-this-alias\n\n      var self = this;\n      var dataSource = [];\n      endData.forEach(function (data) {\n        dataSource.push({\n          text: self.localeObj.getConstant(data),\n          value: data\n        });\n      });\n      return dataSource;\n    }\n  }, {\n    key: \"getDayPosition\",\n    value: function getDayPosition(date) {\n      var temp = new Date(date.getTime());\n      var endDate = new Date(date.getTime());\n      var day = date.getDay();\n      var positionCollection = [];\n      temp = this.calendarUtil.getMonthStartDate(temp);\n      endDate = this.calendarUtil.getMonthEndDate(endDate);\n\n      while (temp < endDate) {\n        if (temp.getDay() === day) {\n          positionCollection.push(temp.getTime());\n        }\n\n        temp.setDate(temp.getDate() + 1);\n      }\n\n      if (positionCollection.indexOf(date.getTime()) === positionCollection.length - 1) {\n        return -1;\n      }\n\n      return positionCollection.indexOf(date.getTime()) + 1;\n    }\n  }, {\n    key: \"getRepeatData\",\n    value: function getRepeatData() {\n      var data = []; // eslint-disable-next-line @typescript-eslint/no-this-alias\n\n      var self = this;\n      this.frequencies.forEach(function (element) {\n        var textValue = element === NONE ? NEVER : element;\n        data.push({\n          text: self.localeObj.getConstant(textValue),\n          value: element\n        });\n      });\n      return data;\n    }\n  }, {\n    key: \"getMonthPosData\",\n    value: function getMonthPosData() {\n      var monthpos = [FIRST, SECOND, THIRD, FOURTH, LAST];\n      var monthposValue = {\n        first: 1,\n        second: 2,\n        third: 3,\n        fourth: 4,\n        last: -1\n      }; // eslint-disable-next-line @typescript-eslint/no-this-alias\n\n      var self = this;\n      var dataSource = [];\n      monthpos.forEach(function (data) {\n        dataSource.push({\n          text: self.localeObj.getConstant(data),\n          value: monthposValue[data]\n        });\n      });\n      return dataSource;\n    }\n  }, {\n    key: \"getDayData\",\n    value: function getDayData(format) {\n      var weekday = [KEYSUNDAY, KEYMONDAY, KEYTUESDAY, KEYWEDNESDAY, KEYTHURSDAY, KEYFRIDAY, KEYSATURDAY];\n      var dayData = [];\n      var cldrObj;\n      this.rotateArray(weekday, this.firstDayOfWeek);\n\n      if (this.locale === 'en' || this.locale === 'en-US') {\n        var nameSpaceString = 'days.stand-alone.';\n        cldrObj = getValue(nameSpaceString + format, getDefaultDateObject(this.getCalendarMode()));\n      } else {\n        var _nameSpaceString = 'main.' + '' + this.locale + '.dates.calendars.' + this.getCalendarMode() + '.days.stand-alone.' + format;\n\n        cldrObj = getValue(_nameSpaceString, cldrData);\n      }\n\n      for (var _i4 = 0, _weekday = weekday; _i4 < _weekday.length; _i4++) {\n        var obj = _weekday[_i4];\n        var day = getValue(obj, cldrObj);\n        dayData.push({\n          text: format === 'narrow' ? day : capitalizeFirstWord(day, 'single'),\n          value: valueData[obj]\n        });\n      }\n\n      return dayData;\n    }\n  }, {\n    key: \"getMonthData\",\n    value: function getMonthData() {\n      var monthData = [];\n      var cldrObj;\n\n      if (this.locale === 'en' || this.locale === 'en-US') {\n        var nameSpaceString = 'months.stand-alone.wide';\n        cldrObj = getValue(nameSpaceString, getDefaultDateObject(this.getCalendarMode()));\n      } else {\n        var _nameSpaceString2 = 'main.' + '' + this.locale + '.dates.calendars.' + this.getCalendarMode() + '.months.stand-alone.wide';\n\n        cldrObj = getValue(_nameSpaceString2, cldrData);\n      }\n\n      for (var _i5 = 0, _Object$keys2 = Object.keys(cldrObj); _i5 < _Object$keys2.length; _i5++) {\n        var obj = _Object$keys2[_i5];\n        monthData.push({\n          text: capitalizeFirstWord(getValue(obj, cldrObj), 'single'),\n          value: obj\n        });\n      }\n\n      return monthData;\n    }\n  }, {\n    key: \"setTemplate\",\n    value: function setTemplate() {\n      var dayData = this.getDayData('narrow');\n      var fullDay = this.getDayData('wide');\n      this.element.innerHTML = '<div class=\"' + HEADER + '\">' + '<div class=\"' + INPUTWARAPPER + ' ' + FORMLEFT + '\">' + '<input type=\"text\" tabindex=\"0\" class=\"' + REPEATELEMENT + '\"label=\"' + REPEATELEMENT.substr(2) + '\" />' + '</div><div class=\"' + INPUTWARAPPER + ' ' + INTERVALCLASS + ' ' + FORMRIGHT + '\"><table  class=\"' + RECURRENCETABLE + ' ' + REPEATCONTENTWRAPPER + '\"><tr>' + '<td><input type=\"text\" tabindex=\"0\" class=\"' + REPEATINTERVAL + '\"title=\"' + this.localeObj.getConstant('repeatEvery') + '\" /></td>' + '<td><span class=\"' + REPEATCONTENT + '\"></span></td>' + '</tr></table></div><div class=\"' + INPUTWARAPPERSIDE + ' ' + DAYWRAPPER + ' ' + FORMLEFT + '\">' + '<div class=' + WEEKEXPANDERLABEL + '>' + this.localeObj.getConstant(ON$1) + '</div>' + '<button type=\"button\" class=\"e-round\" data-index=\"0\" title=\"' + fullDay[0].text + '\">' + dayData[0].text + '</button>' + '<button type=\"button\" class=\"e-round\" data-index=\"1\" title=\"' + fullDay[1].text + '\">' + dayData[1].text + '</button>' + '<button type=\"button\" class=\"e-round\" data-index=\"2\" title=\"' + fullDay[2].text + '\">' + dayData[2].text + '</button>' + '<button type=\"button\" class=\"e-round\" data-index=\"3\" title=\"' + fullDay[3].text + '\">' + dayData[3].text + '</button>' + '<button type=\"button\" class=\"e-round\" data-index=\"4\" title=\"' + fullDay[4].text + '\">' + dayData[4].text + '</button>' + '<button type=\"button\" class=\"e-round\" data-index=\"5\" title=\"' + fullDay[5].text + '\">' + dayData[5].text + '</button>' + '<button type=\"button\" class=\"e-round\" data-index=\"6\" title=\"' + fullDay[6].text + '\">' + dayData[6].text + '</button></div>' + '<div class=\"' + INPUTWARAPPERSIDE + ' ' + WEEKWRAPPER + ' ' + FORMLEFT + '\">' + '<div class=' + MONTHEXPANDERLABEL + '>' + this.localeObj.getConstant(ON$1) + '</div>' + '<div class=\"' + YEAREXPANDERWRAPPER + '\">' + '<input class=\"' + YEAREXPANDERELEMENT + '\" type=\"text\" tabindex=\"0\" title=\"' + this.localeObj.getConstant('yearExpander') + '\"/>' + '</div>' + '<div class=\"' + MONETHEXPANDERWRAPPER + '\">' + '<table class=\"' + RECURRENCETABLE + ' ' + MONETHEXPANDWRAPPER + '\"><tr><td>' + '<div class=\"' + INPUTWARAPPER + ' ' + MONTHEXPANDERCHECKBOXWRAPPER + '\">' + '<input class=\"' + MONTHEXPANDERELEMENT + '\"title=\"' + this.localeObj.getConstant('monthExpander') + '\" type=\"radio\">' + '</div></td>' + '<td colspan=\"2\"><div class=\"' + INPUTWARAPPER + ' ' + MONTHDAYELEMENT + '\">' + '<input type=\"text\" tabindex=\"0\" class=\"' + MONTHDAYWRAPPER + '\"title=\"' + this.localeObj.getConstant('on') + '\" />' + '</div></td></tr>' + '<tr><td>' + '<div class=\"' + INPUTWARAPPER + ' ' + MONTHEXPANDERCHECKBOXWRAPPER + '\" style=\"min-width: 30px;margin-bottom:18px;\">' + '<input class=\"' + MONTHEXPANNDERELEM + '\"title=\"' + this.localeObj.getConstant('monthExpander') + '\" type=\"radio\">' + '</div></td>' + '<td><div class=\"' + INPUTWARAPPER + ' ' + WEEKPOSITION + '\" >' + '<input type=\"text\" tabindex=\"0\" class=\"' + MONTHPOS + '\"title=\"' + this.localeObj.getConstant('monthPosition') + '\" />' + '</div></td>' + '<td><div class=\"' + INPUTWARAPPER + '\" style=\"min-width: 120px;\">' + '<input type=\"text\" tabindex=\"0\" class=\"' + MONTHWEEK + '\"title=\"' + this.localeObj.getConstant('monthWeek') + '\" />' + '</div></td></tr></table>' + '</div></div>' + '<div class=\"' + INPUTWARAPPERSIDE + ' ' + ENDON + ' ' + FORMRIGHT + '\">' + '<div class=' + ENDONLABEL + '>' + this.localeObj.getConstant(END) + '</div>' + '<div class=\"' + INPUTWARAPPER + ' ' + ENDONLEFT + '\">' + '<input type=\"text\" tabindex=\"0\" class=\"' + ENDONELEMENT + '\"title=\"' + this.localeObj.getConstant(END) + '\" />' + '</div>' + '<div class=\"' + INPUTWARAPPER + ' ' + ENDONDATE + '\" >' + '<input type=\"text\" tabindex=\"0\" class=\"' + UNTILDATE + '\"title=\"' + this.localeObj.getConstant(UNTIL$1) + '\" />' + '</div>' + '<div class=\"' + INPUTWARAPPER + ' ' + ENDONCOUNTWRAPPER + '\">' + '<input type=\"text\" tabindex=\"0\" class=\"' + ENDONCOUNT + '\"title=\"' + this.localeObj.getConstant(COUNT) + '\" />' + '</div></div>' + '</div></div>';\n    }\n  }, {\n    key: \"getSelectedDaysData\",\n    value: function getSelectedDaysData() {\n      var ruleData = RULEBYDAY + EQUAL;\n      var elements = [].slice.call(this.element.querySelectorAll('.' + DAYWRAPPER + ' button.' + PRIMARY));\n      var weekday = [RULESUNDAY, RULEMONDAY, RULETUESDAY, RULEWEDNESDAY, RULETHURSDAY, RULEFRIDAY, RULESATURDAY];\n      this.rotateArray(weekday, this.firstDayOfWeek);\n\n      for (var index = 0; index < elements.length; index++) {\n        ruleData += weekday[parseInt(elements[index].getAttribute('data-index'), 10)] + (index === elements.length - 1 ? '' : COMMA);\n      }\n\n      return ruleData + SEMICOLON;\n    }\n  }, {\n    key: \"getSelectedMonthData\",\n    value: function getSelectedMonthData() {\n      var ruleData;\n\n      if (this.onWeekDay.checked) {\n        ruleData = RULEBYDAY + EQUAL + this.monthWeekDays.value + SEMICOLON + RULESETPOS + EQUAL + this.monthWeekPos.value + SEMICOLON;\n      } else {\n        ruleData = RULEBYMONTHDAY + EQUAL + this.monthDate.value + SEMICOLON;\n      }\n\n      return ruleData;\n    }\n  }, {\n    key: \"getIntervalData\",\n    value: function getIntervalData() {\n      return RULEINTERVAL + EQUAL + this.repeatInterval.value + SEMICOLON;\n    }\n  }, {\n    key: \"getEndOnCount\",\n    value: function getEndOnCount() {\n      return RULECOUNT + EQUAL + this.recurrenceCount.value + SEMICOLON;\n    }\n  }, {\n    key: \"getYearMonthRuleData\",\n    value: function getYearMonthRuleData() {\n      return RULEBYMONTH + EQUAL + this.monthValue.value + SEMICOLON;\n    }\n  }, {\n    key: \"updateWeekButton\",\n    value: function updateWeekButton(keys) {\n      var weekday = [RULESUNDAY, RULEMONDAY, RULETUESDAY, RULEWEDNESDAY, RULETHURSDAY, RULEFRIDAY, RULESATURDAY];\n      this.rotateArray(weekday, this.firstDayOfWeek);\n\n      var _iterator54 = _createForOfIteratorHelper(this.dayButtons),\n          _step54;\n\n      try {\n        for (_iterator54.s(); !(_step54 = _iterator54.n()).done;) {\n          var obj = _step54.value;\n          var index = parseInt(obj.element.getAttribute('data-index'), 10);\n\n          if (keys.indexOf(weekday[index]) !== -1) {\n            obj.setProperties({\n              isPrimary: true\n            });\n          } else {\n            obj.setProperties({\n              isPrimary: false\n            });\n          }\n        }\n      } catch (err) {\n        _iterator54.e(err);\n      } finally {\n        _iterator54.f();\n      }\n    }\n  }, {\n    key: \"updateMonthUI\",\n    value: function updateMonthUI() {\n      if (this.ruleObject.monthDay.length) {\n        this.monthDate.setProperties({\n          value: this.ruleObject.monthDay[0]\n        });\n        this.onMonthDay.setProperties({\n          checked: true\n        });\n      } else {\n        this.onWeekDay.setProperties({\n          checked: true\n        });\n        this.monthWeekPos.setProperties({\n          value: this.ruleObject.setPosition\n        });\n\n        for (var _i6 = 0, _Object$keys3 = Object.keys(valueData); _i6 < _Object$keys3.length; _i6++) {\n          var key = _Object$keys3[_i6];\n\n          if (valueData[key] === this.ruleObject.day[0]) {\n            this.monthWeekDays.setProperties({\n              value: this.ruleObject.day[0]\n            });\n            break;\n          }\n        }\n      }\n    }\n  }, {\n    key: \"updateUI\",\n    value: function updateUI(repeat, state) {\n      this.repeatInterval.setProperties({\n        value: this.ruleObject.interval\n      });\n\n      switch (state) {\n        case UNTIL$1:\n          this.untilDateObj.setProperties({\n            value: this.ruleObject.until\n          });\n          break;\n\n        case COUNT:\n          this.recurrenceCount.setProperties({\n            value: this.ruleObject.count\n          });\n          break;\n      }\n\n      switch (repeat) {\n        case WEEKLY:\n          this.updateWeekButton(this.ruleObject.day);\n          break;\n\n        case YEARLY:\n          this.monthValue.setProperties({\n            index: this.ruleObject.month[0] - 1\n          });\n          this.updateMonthUI();\n          break;\n\n        case MONTHLY:\n          this.updateMonthUI();\n          break;\n      }\n    }\n  }, {\n    key: \"getUntilData\",\n    value: function getUntilData() {\n      if (!this.untilDateObj.value) {\n        return '';\n      }\n\n      var tempStr = getRecurrenceStringFromDate(this.untilDateObj.value);\n      return RULEUNTIL + EQUAL + tempStr + SEMICOLON;\n    }\n  }, {\n    key: \"destroyComponents\",\n    value: function destroyComponents() {\n      if (!this.recurrenceCount.isDestroyed) {\n        this.recurrenceCount.destroy();\n      }\n\n      if (!this.monthDate.isDestroyed) {\n        this.monthDate.destroy();\n      }\n\n      if (!this.repeatInterval.isDestroyed) {\n        this.repeatInterval.destroy();\n      }\n\n      if (!this.untilDateObj.isDestroyed) {\n        this.untilDateObj.destroy();\n      }\n\n      if (!this.repeatType.isDestroyed) {\n        this.repeatType.destroy();\n      }\n\n      if (!this.endType.isDestroyed) {\n        this.endType.destroy();\n      }\n\n      if (!this.monthWeekPos.isDestroyed) {\n        this.monthWeekPos.destroy();\n      }\n\n      if (!this.monthWeekDays.isDestroyed) {\n        this.monthWeekDays.destroy();\n      }\n\n      if (!this.monthValue.isDestroyed) {\n        this.monthValue.destroy();\n      }\n\n      this.dayButtons.forEach(function (element) {\n        if (!element.isDestroyed) {\n          element.destroy();\n        }\n      });\n      this.dayButtons = [];\n      this.monthButtons.forEach(function (element) {\n        if (!element.isDestroyed) {\n          element.destroy();\n        }\n      });\n      this.monthButtons = [];\n    }\n  }, {\n    key: \"resetFields\",\n    value: function resetFields() {\n      this.startState(NONE, NEVER, this.startDate);\n      this.setDefaultValue();\n    }\n  }, {\n    key: \"updateRuleUntilDate\",\n    value: function updateRuleUntilDate(startDate) {\n      if (this.untilDateObj.value && startDate) {\n        var untilDate = this.untilDateObj.value;\n        var newUntilDate = new Date(untilDate.getFullYear(), untilDate.getMonth(), untilDate.getDate(), startDate.getHours(), startDate.getMinutes(), startDate.getMilliseconds());\n        this.untilDateObj.setProperties({\n          value: newUntilDate\n        });\n      }\n    }\n  }, {\n    key: \"getCalendarMode\",\n    value: function getCalendarMode() {\n      return this.calendarMode.toLowerCase();\n    }\n  }, {\n    key: \"getRuleSummary\",\n    value: function getRuleSummary() {\n      var rule = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : this.getRecurrenceRule();\n      return generateSummary(rule, this.localeObj, this.locale, this.calendarMode);\n    }\n  }, {\n    key: \"getRecurrenceDates\",\n    value: function getRecurrenceDates(startDate, rule, excludeDate, maximumCount, viewDate) {\n      viewDate = isNullOrUndefined(viewDate) ? this.startDate : viewDate;\n      return generate(startDate, rule, excludeDate, this.firstDayOfWeek, maximumCount, viewDate, this.calendarMode);\n    }\n  }, {\n    key: \"getRecurrenceRule\",\n    value: function getRecurrenceRule() {\n      var ruleData = RULEFREQ + EQUAL;\n\n      switch (this.repeatType.value) {\n        case DAILY:\n          ruleData += RULEDAILY + SEMICOLON;\n          break;\n\n        case WEEKLY:\n          ruleData += RULEWEEKLY + SEMICOLON + this.getSelectedDaysData();\n          break;\n\n        case MONTHLY:\n          ruleData += RULEMONTHLY + SEMICOLON + this.getSelectedMonthData();\n          break;\n\n        case YEARLY:\n          ruleData += RULEYEARLY + SEMICOLON + this.getSelectedMonthData() + this.getYearMonthRuleData();\n          break;\n\n        case NONE:\n          return '';\n      }\n\n      ruleData += this.getIntervalData();\n\n      switch (this.endType.value) {\n        case UNTIL$1:\n          ruleData += this.getUntilData();\n          break;\n\n        case COUNT:\n          ruleData += this.getEndOnCount();\n          break;\n      }\n\n      return ruleData;\n    }\n  }, {\n    key: \"setRecurrenceRule\",\n    value: function setRecurrenceRule(rule) {\n      var startDate = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : this.startDate;\n\n      if (!rule) {\n        this.repeatType.setProperties({\n          value: NONE\n        });\n        return;\n      }\n\n      this.renderStatus = false;\n      this.ruleObject = extractObjectFromRule(rule);\n      var endon = this.ruleObject.count ? COUNT : this.ruleObject.until ? UNTIL$1 : NEVER;\n\n      switch (this.ruleObject.freq) {\n        case RULEDAILY:\n          this.startState(DAILY, endon, startDate);\n          this.updateUI(DAILY, endon);\n          break;\n\n        case RULEWEEKLY:\n          this.startState(WEEKLY, endon, startDate);\n          this.updateUI(WEEKLY, endon);\n          break;\n\n        case RULEMONTHLY:\n          this.startState(MONTHLY, endon, startDate);\n          this.updateUI(MONTHLY, endon);\n          break;\n\n        case RULEYEARLY:\n          this.startState(YEARLY, endon, startDate);\n          this.updateUI(YEARLY, endon);\n          break;\n      }\n\n      this.renderStatus = true;\n      this.triggerChangeEvent();\n    }\n    /**\n     * Destroys the widget.\n     *\n     * @returns {void}\n     */\n\n  }, {\n    key: \"destroy\",\n    value: function destroy() {\n      this.destroyComponents();\n\n      _get(_getPrototypeOf(RecurrenceEditor.prototype), \"destroy\", this).call(this);\n\n      var removeClasses = ['e-' + this.getModuleName()];\n\n      if (this.cssClass) {\n        removeClasses = removeClasses.concat(this.cssClass.split(' '));\n      }\n\n      removeClass([this.element], removeClasses);\n\n      while (this.element.firstElementChild) {\n        this.element.removeChild(this.element.firstElementChild);\n      }\n    }\n    /**\n     * Get component name.\n     *\n     * @returns {string} Returns the module name\n     * @private\n     */\n\n  }, {\n    key: \"getModuleName\",\n    value: function getModuleName() {\n      return 'recurrenceeditor';\n    }\n    /**\n     * Get the properties to be maintained in the persisted state.\n     *\n     * @returns {string} Returns the persisted state\n     */\n\n  }, {\n    key: \"getPersistData\",\n    value: function getPersistData() {\n      return this.addOnPersist([]);\n    }\n    /**\n     * Initialize the control rendering\n     *\n     * @returns {void}\n     * @private\n     */\n\n  }, {\n    key: \"render\",\n    value: function render() {\n      this.initialize();\n      this.rtlClass(this.enableRtl);\n      this.renderStatus = true;\n      this.renderComplete();\n    }\n    /**\n     * Called internally, if any of the property value changed.\n     *\n     * @param {RecurrenceEditorModel} newProp Accepts the changed properties new values\n     * @param {RecurrenceEditorModel} oldProp Accepts the changed properties old values\n     * @returns {void}\n     * @private\n     */\n\n  }, {\n    key: \"onPropertyChanged\",\n    value: function onPropertyChanged(newProp, oldProp) {\n      for (var _i7 = 0, _Object$keys4 = Object.keys(newProp); _i7 < _Object$keys4.length; _i7++) {\n        var prop = _Object$keys4[_i7];\n\n        switch (prop) {\n          case 'startDate':\n            this.selectMonthDay(newProp.startDate);\n            this.updateUntilDate(newProp.startDate);\n            this.endType.setProperties({\n              index: 0\n            });\n            break;\n\n          case 'enableRtl':\n            this.rtlClass(newProp.enableRtl);\n            break;\n\n          case 'cssClass':\n            if (oldProp.cssClass) {\n              removeClass([this.element], oldProp.cssClass.split(' '));\n            }\n\n            if (newProp.cssClass) {\n              addClass([this.element], newProp.cssClass.split(' '));\n            }\n\n            break;\n\n          case 'selectedType':\n            this.repeatType.setProperties({\n              index: this.selectedType\n            });\n            break;\n\n          case 'minDate':\n            this.untilDateObj.setProperties({\n              minDate: this.minDate\n            });\n            break;\n\n          case 'maxDate':\n            this.untilDateObj.setProperties({\n              maxDate: this.maxDate\n            });\n            break;\n\n          case 'value':\n            if (this.getRecurrenceRule() !== this.value) {\n              this.setRecurrenceRule(this.value);\n            }\n\n            break;\n\n          case 'calendarMode':\n            this.calendarMode = newProp.calendarMode;\n            this.calendarUtil = getCalendarUtil(newProp.calendarMode);\n            break;\n\n          case 'locale':\n          case 'frequencies':\n          case 'firstDayOfWeek':\n            this.refresh();\n            break;\n\n          case 'dateFormat':\n            this.untilDateObj.setProperties({\n              format: newProp.dateFormat\n            });\n            break;\n        }\n      }\n    }\n  }]);\n\n  return RecurrenceEditor;\n}(Component);\n\n__decorate$1([Property(['none', 'daily', 'weekly', 'monthly', 'yearly'])], RecurrenceEditor.prototype, \"frequencies\", void 0);\n\n__decorate$1([Property(0)], RecurrenceEditor.prototype, \"firstDayOfWeek\", void 0);\n\n__decorate$1([Property(new Date())], RecurrenceEditor.prototype, \"startDate\", void 0);\n\n__decorate$1([Property()], RecurrenceEditor.prototype, \"dateFormat\", void 0);\n\n__decorate$1([Property('Gregorian')], RecurrenceEditor.prototype, \"calendarMode\", void 0);\n\n__decorate$1([Property()], RecurrenceEditor.prototype, \"cssClass\", void 0);\n\n__decorate$1([Property()], RecurrenceEditor.prototype, \"value\", void 0);\n\n__decorate$1([Property(new Date(1900, 0, 1))], RecurrenceEditor.prototype, \"minDate\", void 0);\n\n__decorate$1([Property(new Date(2099, 11, 31))], RecurrenceEditor.prototype, \"maxDate\", void 0);\n\n__decorate$1([Property(0)], RecurrenceEditor.prototype, \"selectedType\", void 0);\n\n__decorate$1([Event()], RecurrenceEditor.prototype, \"change\", void 0);\n\nRecurrenceEditor = __decorate$1([NotifyPropertyChanges], RecurrenceEditor);\n/* eslint-disable @typescript-eslint/no-explicit-any */\n\nvar EVENT_FIELD$1 = 'e-field';\nvar REPEAT_CONTAINER_CLASS = 'e-recurrence-container';\nvar REPEAT_BUTTON_ICON_CLASS = 'e-recurrence-edit';\nvar REPEAT_BUTTON_CLASS = 'e-recurrence-edit-button';\nvar REPEAT_DIALOG_CLASS = 'e-recurrence-dialog';\nvar HIDE_STYLE_CLASS = 'e-hide';\n/**\n * Event editor window\n */\n\nvar EventWindow = /*#__PURE__*/function () {\n  function EventWindow(parent) {\n    _classCallCheck(this, EventWindow);\n\n    this.parent = parent;\n    this.l10n = this.parent.localeObj;\n    this.fields = this.parent.eventFields;\n    this.eventWindowTime = {\n      startTime: new Date(),\n      endTime: new Date()\n    };\n    this.renderEventWindow();\n  }\n\n  _createClass(EventWindow, [{\n    key: \"renderEventWindow\",\n    value: function renderEventWindow() {\n      this.element = createElement('div', {\n        id: this.parent.element.id + '_dialog_wrapper'\n      });\n      this.parent.element.appendChild(this.element);\n      var dialogModel = {\n        animationSettings: {\n          effect: 'Zoom'\n        },\n        content: this.getEventWindowContent(),\n        cssClass: EVENT_WINDOW_DIALOG_CLASS,\n        enableRtl: this.parent.enableRtl,\n        height: this.parent.isAdaptive ? '100%' : 'auto',\n        minHeight: '300px',\n        isModal: true,\n        showCloseIcon: this.parent.isAdaptive ? false : true,\n        target: document.body,\n        visible: false,\n        width: '500px',\n        beforeOpen: this.onBeforeOpen.bind(this),\n        beforeClose: this.onBeforeClose.bind(this)\n      };\n\n      if (this.parent.isAdaptive) {\n        dialogModel.cssClass = EVENT_WINDOW_DIALOG_CLASS + ' ' + DEVICE_CLASS;\n        dialogModel.header = '<div class=\"e-title-header\"><div class=\"e-back-icon e-icons\"></div><div class=\"e-title-text\">' + this.l10n.getConstant('newEvent') + '</div><div class=\"e-save-icon e-icons\"></div></div>';\n      } else {\n        dialogModel.buttons = [{\n          buttonModel: {\n            content: this.l10n.getConstant('deleteButton'),\n            cssClass: DELETE_EVENT_CLASS,\n            disabled: !this.parent.eventSettings.allowDeleting || this.parent.readonly\n          },\n          click: this.eventDelete.bind(this)\n        }, {\n          buttonModel: {\n            content: this.l10n.getConstant('saveButton'),\n            cssClass: 'e-primary ' + EVENT_WINDOW_SAVE_BUTTON_CLASS,\n            isPrimary: true,\n            disabled: !this.parent.eventSettings.allowAdding || this.parent.readonly\n          },\n          click: this.eventSave.bind(this)\n        }, {\n          buttonModel: {\n            cssClass: EVENT_WINDOW_CANCEL_BUTTON_CLASS,\n            content: this.l10n.getConstant('cancelButton')\n          },\n          click: this.dialogClose.bind(this)\n        }];\n        dialogModel.header = '<div class=\"e-title-text\">' + this.l10n.getConstant('newEvent') + '</div>';\n      }\n\n      this.dialogObject = new Dialog(dialogModel, this.element);\n\n      if (this.dialogObject.element.querySelector('.e-dlg-closeicon-btn')) {\n        this.dialogObject.element.querySelector('.e-dlg-closeicon-btn').setAttribute('title', this.l10n.getConstant('close'));\n      }\n\n      addClass([this.element.parentElement], EVENT_WINDOW_DIALOG_CLASS + '-container');\n\n      if (this.parent.isAdaptive) {\n        EventHandler.add(this.element.querySelector('.' + EVENT_WINDOW_BACK_ICON_CLASS), 'click', this.dialogClose, this);\n        EventHandler.add(this.element.querySelector('.' + EVENT_WINDOW_SAVE_ICON_CLASS), 'click', this.eventSave, this);\n      }\n\n      EventHandler.add(this.dialogObject.element, 'keydown', this.preventEventSave, this);\n      this.applyFormValidation();\n    }\n  }, {\n    key: \"refresh\",\n    value: function refresh() {\n      this.destroy(true);\n      this.renderEventWindow();\n    }\n  }, {\n    key: \"refreshRecurrenceEditor\",\n    value: function refreshRecurrenceEditor() {\n      if (this.recurrenceEditor) {\n        var recurrenceEditor = this.recurrenceEditor.element;\n        this.recurrenceEditor.destroy();\n        this.createRecurrenceEditor(recurrenceEditor);\n      }\n    }\n  }, {\n    key: \"setRecurrenceEditor\",\n    value: function setRecurrenceEditor(recurrenceEditor) {\n      if (this.parent.editorTemplate) {\n        this.recurrenceEditor = recurrenceEditor;\n      }\n    }\n  }, {\n    key: \"openEditor\",\n    value: function openEditor(data, type, isEventData, repeatType) {\n      this.parent.currentAction = type;\n      this.parent.removeNewEventElement();\n\n      if (this.parent.quickPopup) {\n        this.parent.quickPopup.quickPopupHide(true);\n      }\n\n      this.parent.inlineModule.removeInlineAppointmentElement();\n\n      if (type === 'Add') {\n        var eventObj = {};\n        this.cellClickAction = !isEventData;\n        this.parent.activeCellsData = data;\n        var event = data;\n\n        if (this.cellClickAction) {\n          this.convertToEventData(event, eventObj);\n        } else {\n          this.parent.activeCellsData = {\n            startTime: event.startTime || event[this.fields.startTime],\n            endTime: event.endTime || event[this.fields.endTime],\n            isAllDay: event.isAllDay || event[this.fields.isAllDay],\n            element: event.element,\n            groupIndex: event.groupIndex\n          };\n          eventObj = event;\n        }\n\n        data = eventObj;\n      }\n\n      if (!isNullOrUndefined(this.parent.editorTemplate)) {\n        this.renderFormElements(this.element.querySelector('.e-schedule-form'), data);\n      }\n\n      if (!this.parent.isAdaptive && isNullOrUndefined(this.parent.editorTemplate)) {\n        removeClass([this.dialogObject.element.querySelector('.e-recurrenceeditor')], DISABLE_CLASS);\n      }\n\n      if (this.recurrenceEditor) {\n        this.recurrenceEditor.firstDayOfWeek = this.parent.activeViewOptions.firstDayOfWeek;\n      }\n\n      switch (type) {\n        case 'Add':\n          this.onCellDetailsUpdate(data, repeatType);\n          break;\n\n        case 'Save':\n        case 'EditOccurrence':\n        case 'EditSeries':\n        case 'EditFollowingEvents':\n          if (type === 'EditOccurrence' && !this.parent.isAdaptive && isNullOrUndefined(this.parent.editorTemplate)) {\n            addClass([this.dialogObject.element.querySelector('.e-recurrenceeditor')], DISABLE_CLASS);\n          }\n\n          this.cellClickAction = false;\n          this.onEventDetailsUpdate(data);\n          break;\n      }\n    }\n  }, {\n    key: \"setDialogContent\",\n    value: function setDialogContent() {\n      this.dialogObject.content = this.getEventWindowContent();\n      this.dialogObject.dataBind();\n    }\n  }, {\n    key: \"preventEventSave\",\n    value: function preventEventSave(e) {\n      if (this.parent && !this.parent.allowKeyboardInteraction && e.code === 'Enter') {\n        this.isEnterKey = true;\n      }\n    }\n  }, {\n    key: \"onBeforeOpen\",\n    value: function onBeforeOpen(args) {\n      var _this42 = this;\n\n      var eventProp = {\n        type: 'Editor',\n        data: this.eventData,\n        cancel: false,\n        element: this.element,\n        target: this.cellClickAction ? this.parent.activeCellsData.element : this.parent.activeEventData.element\n      };\n\n      if (this.cellClickAction) {\n        eventProp.duration = this.getSlotDuration();\n      }\n\n      var saveObj = this.getInstance(EVENT_WINDOW_SAVE_BUTTON_CLASS);\n\n      if (saveObj) {\n        saveObj.disabled = !(this.cellClickAction ? this.parent.eventSettings.allowAdding : this.parent.eventSettings.allowEditing);\n        saveObj.dataBind();\n      }\n\n      var deleteObj = this.getInstance(DELETE_EVENT_CLASS);\n\n      if (deleteObj) {\n        deleteObj.disabled = !this.parent.eventSettings.allowDeleting;\n        deleteObj.dataBind();\n      }\n\n      var callBackPromise = new Deferred();\n      this.parent.trigger(popupOpen, eventProp, function (popupArgs) {\n        args.cancel = popupArgs.cancel;\n        _this42.duration = _this42.cellClickAction ? popupArgs.duration : null;\n\n        _this42.refreshDateTimePicker(_this42.duration);\n\n        if (_this42.cellClickAction && popupArgs.duration !== _this42.getSlotDuration() && isNullOrUndefined(_this42.parent.editorTemplate)) {\n          var startObj = _this42.getInstance(EVENT_WINDOW_START_CLASS);\n\n          var endObj = _this42.getInstance(EVENT_WINDOW_END_CLASS);\n\n          endObj.value = new Date(startObj.value.getTime() + MS_PER_MINUTE * popupArgs.duration);\n          endObj.dataBind();\n        }\n\n        if (_this42.parent.editorTemplate && _this42.element.querySelector('.e-recurrenceeditor') && !_this42.recurrenceEditor) {\n          _this42.recurrenceEditor = _this42.getInstance('e-recurrenceeditor');\n        }\n\n        callBackPromise.resolve(args);\n      });\n      return callBackPromise;\n    }\n  }, {\n    key: \"onBeforeClose\",\n    value: function onBeforeClose(args) {\n      var _this43 = this;\n\n      if (args.isInteracted) {\n        this.isCrudAction = false;\n      }\n\n      var eventProp = {\n        type: 'Editor',\n        event: args.event || this.dialogEvent,\n        data: this.eventCrudData,\n        cancel: false,\n        element: this.element,\n        target: this.cellClickAction ? this.parent.activeCellsData.element : this.parent.activeEventData.element\n      };\n      var callBackPromise = new Deferred();\n      this.parent.trigger(popupClose, eventProp, function (popupArgs) {\n        args.cancel = popupArgs.cancel;\n\n        if (!popupArgs.cancel) {\n          if (_this43.isCrudAction) {\n            args.cancel = _this43.processCrudActions(popupArgs.data);\n            _this43.isCrudAction = args.cancel;\n          }\n\n          if (!_this43.isCrudAction) {\n            _this43.resetForm();\n\n            _this43.parent.eventBase.focusElement(true);\n\n            _this43.eventCrudData = null;\n          }\n        }\n\n        callBackPromise.resolve(args);\n      });\n      return callBackPromise;\n    }\n  }, {\n    key: \"getEventWindowContent\",\n    value: function getEventWindowContent() {\n      var container = createElement('div', {\n        className: FORM_CONTAINER_CLASS\n      });\n      var form = createElement('form', {\n        id: this.parent.element.id + 'EditForm',\n        className: FORM_CLASS,\n        attrs: {\n          onsubmit: 'return false;'\n        }\n      });\n      this.renderFormElements(form);\n      container.appendChild(form);\n      return container;\n    }\n  }, {\n    key: \"renderFormElements\",\n    value: function renderFormElements(form, args) {\n      if (!isNullOrUndefined(this.parent.editorTemplate)) {\n        if (args) {\n          if (this.recurrenceEditor) {\n            this.recurrenceEditor.destroy();\n            this.recurrenceEditor = null;\n          }\n\n          this.destroyComponents();\n          var formElements = [].slice.call(form.children);\n\n          var _iterator55 = _createForOfIteratorHelper(formElements),\n              _step55;\n\n          try {\n            for (_iterator55.s(); !(_step55 = _iterator55.n()).done;) {\n              var element = _step55.value;\n              remove(element);\n            }\n          } catch (err) {\n            _iterator55.e(err);\n          } finally {\n            _iterator55.f();\n          }\n        }\n\n        var templateId = this.parent.element.id + '_editorTemplate';\n        var tempEle = [].slice.call(this.parent.getEditorTemplate()(args || {}, this.parent, 'editorTemplate', templateId, false));\n        append(tempEle, form);\n        this.parent.renderTemplates();\n      } else {\n        form.appendChild(this.getDefaultEventWindowContent());\n      }\n    }\n  }, {\n    key: \"getDefaultEventWindowContent\",\n    value: function getDefaultEventWindowContent() {\n      var parentDiv = this.createDivElement(EVENT_WINDOW_DIALOG_PARENT_CLASS);\n      var titleLocationDiv = this.createDivElement(EVENT_WINDOW_TITLE_LOCATION_DIV_CLASS);\n      parentDiv.appendChild(titleLocationDiv);\n      titleLocationDiv.appendChild(this.renderTextBox(SUBJECT_CLASS));\n      titleLocationDiv.querySelector('.' + SUBJECT_CLASS).setAttribute('title', this.parent.editorTitles.subject);\n      titleLocationDiv.appendChild(this.renderTextBox(LOCATION_CLASS));\n      titleLocationDiv.querySelector('.' + LOCATION_CLASS).setAttribute('title', this.parent.editorTitles.location);\n      var startEndDateTimeDiv = this.createDivElement(EVENT_WINDOW_START_END_DIV_CLASS);\n      parentDiv.appendChild(startEndDateTimeDiv);\n      startEndDateTimeDiv.appendChild(this.renderDateTimePicker(EVENT_WINDOW_START_CLASS, this.onTimeChange.bind(this)));\n      startEndDateTimeDiv.querySelector('.' + EVENT_WINDOW_START_CLASS).setAttribute('title', this.parent.editorTitles.startTime);\n      startEndDateTimeDiv.appendChild(this.renderDateTimePicker(EVENT_WINDOW_END_CLASS));\n      startEndDateTimeDiv.querySelector('.' + EVENT_WINDOW_END_CLASS).setAttribute('title', this.parent.editorTitles.endTime);\n      var allDayTimezoneDiv = this.createDivElement(EVENT_WINDOW_ALLDAY_TZ_DIV_CLASS);\n      parentDiv.appendChild(allDayTimezoneDiv);\n      allDayTimezoneDiv.appendChild(this.renderCheckBox(EVENT_WINDOW_ALL_DAY_CLASS));\n      allDayTimezoneDiv.appendChild(this.renderCheckBox(TIME_ZONE_CLASS));\n      var timezoneParentDiv = this.createDivElement(EVENT_WINDOW_TIME_ZONE_DIV_CLASS);\n      parentDiv.appendChild(timezoneParentDiv);\n      timezoneParentDiv.appendChild(this.renderDropDown(EVENT_WINDOW_START_TZ_CLASS));\n      timezoneParentDiv.appendChild(this.renderDropDown(EVENT_WINDOW_END_TZ_CLASS));\n      var repeatParentDiv = this.createDivElement(EVENT_WINDOW_REPEAT_DIV_CLASS);\n      parentDiv.appendChild(repeatParentDiv);\n      var repeatDiv = this.renderCheckBox(EVENT_WINDOW_REPEAT_CLASS);\n      var repeatEditContainer = createElement('span', {\n        className: REPEAT_CONTAINER_CLASS\n      });\n      var button = createElement('button', {\n        className: REPEAT_BUTTON_CLASS,\n        attrs: {\n          type: 'button',\n          'title': this.l10n.getConstant('editRecurrence')\n        }\n      });\n      this.buttonObj = new Button({\n        iconCss: REPEAT_BUTTON_ICON_CLASS + ' e-icons',\n        cssClass: 'e-medium ' + this.parent.cssClass\n      });\n      repeatEditContainer.appendChild(button);\n      this.buttonObj.appendTo(button);\n      repeatDiv.appendChild(repeatEditContainer);\n      repeatParentDiv.appendChild(repeatDiv);\n\n      if (this.parent.isAdaptive) {\n        EventHandler.add(button, 'click', this.loadRecurrenceEditor, this);\n      } else {\n        this.createRecurrenceEditor(parentDiv);\n      }\n\n      if (this.parent.resourceCollection.length > 0) {\n        var resourceParentDiv = this.createDivElement(EVENT_WINDOW_RESOURCES_DIV_CLASS);\n\n        var _iterator56 = _createForOfIteratorHelper(this.parent.resourceBase.resourceCollection),\n            _step56;\n\n        try {\n          for (_iterator56.s(); !(_step56 = _iterator56.n()).done;) {\n            var resource = _step56.value;\n            resourceParentDiv.appendChild(this.renderResourceDetails(resource));\n          }\n        } catch (err) {\n          _iterator56.e(err);\n        } finally {\n          _iterator56.f();\n        }\n\n        parentDiv.appendChild(resourceParentDiv);\n      }\n\n      var description = this.createDivElement(DESCRIPTION_CLASS + '-row');\n      description.appendChild(this.renderTextBox(DESCRIPTION_CLASS));\n      description.querySelector('.' + DESCRIPTION_CLASS).setAttribute('title', this.parent.editorTitles.description);\n      parentDiv.appendChild(description);\n      var submit = createElement('button', {\n        attrs: {\n          type: 'hidden',\n          title: 'submit',\n          style: 'display:none'\n        }\n      });\n      parentDiv.appendChild(submit);\n      return parentDiv;\n    }\n  }, {\n    key: \"createRecurrenceEditor\",\n    value: function createRecurrenceEditor(parentDiv) {\n      var recurrenceEditor = this.createDivElement();\n      parentDiv.appendChild(recurrenceEditor);\n      this.recurrenceEditor = this.renderRecurrenceEditor();\n      this.recurrenceEditor.appendTo(recurrenceEditor);\n      this.updateMinMaxDateToEditor();\n    }\n  }, {\n    key: \"createDivElement\",\n    value: function createDivElement(className) {\n      return createElement('div', {\n        className: className\n      });\n    }\n  }, {\n    key: \"createInputElement\",\n    value: function createInputElement(className, fieldName, type) {\n      return createElement(type || 'input', {\n        className: className,\n        attrs: {\n          type: 'text',\n          name: fieldName,\n          value: '',\n          id: fieldName,\n          title: this.l10n.getConstant(fieldName.charAt(0).toLowerCase() + fieldName.slice(1)) === '' ? fieldName : this.l10n.getConstant(fieldName.charAt(0).toLowerCase() + fieldName.slice(1))\n        }\n      });\n    }\n  }, {\n    key: \"getSlotDuration\",\n    value: function getSlotDuration() {\n      return this.parent.activeViewOptions.timeScale.interval / this.parent.activeViewOptions.timeScale.slotCount;\n    }\n  }, {\n    key: \"renderDateTimePicker\",\n    value: function renderDateTimePicker(value, changeEvent) {\n      var dateTimeDiv = this.createDivElement(value + '-container');\n      var fieldName = this.getFieldName(value);\n      var dateTimeInput = this.createInputElement(value + ' ' + EVENT_FIELD$1, fieldName);\n      dateTimeDiv.appendChild(dateTimeInput);\n      var dateTimePicker = new DateTimePicker({\n        change: changeEvent,\n        firstDayOfWeek: this.parent.activeViewOptions.firstDayOfWeek,\n        calendarMode: this.parent.calendarMode,\n        min: this.parent.minDate,\n        max: new Date(new Date(+this.parent.maxDate).setHours(23, 59, 59)),\n        cssClass: this.parent.cssClass,\n        enableRtl: this.parent.enableRtl,\n        locale: this.parent.locale,\n        floatLabelType: 'Always',\n        timeFormat: this.parent.activeViewOptions.timeFormat,\n        format: (isNullOrUndefined(this.parent.dateFormat) ? this.getFormat('dateFormats') : this.parent.dateFormat) + ' ' + this.parent.activeViewOptions.timeFormat,\n        placeholder: this.getFieldLabel(value),\n        step: this.getSlotDuration(),\n        width: '100%'\n      });\n      dateTimePicker.appendTo(dateTimeInput);\n      return dateTimeDiv;\n    }\n  }, {\n    key: \"refreshDateTimePicker\",\n    value: function refreshDateTimePicker(duration) {\n      var elementSelector = '.' + EVENT_WINDOW_START_CLASS + ',.' + EVENT_WINDOW_END_CLASS;\n      var startEndElement = [].slice.call(this.element.querySelectorAll(elementSelector));\n\n      var _iterator57 = _createForOfIteratorHelper(startEndElement),\n          _step57;\n\n      try {\n        for (_iterator57.s(); !(_step57 = _iterator57.n()).done;) {\n          var element = _step57.value;\n          var instance = element.ej2_instances[0];\n          instance.firstDayOfWeek = this.parent.activeViewOptions.firstDayOfWeek;\n          instance.timeFormat = this.parent.activeViewOptions.timeFormat;\n          instance.step = duration || this.getSlotDuration();\n          instance.dataBind();\n        }\n      } catch (err) {\n        _iterator57.e(err);\n      } finally {\n        _iterator57.f();\n      }\n    }\n  }, {\n    key: \"onTimeChange\",\n    value: function onTimeChange() {\n      var startObj = this.getInstance(EVENT_WINDOW_START_CLASS);\n\n      if (startObj.element.parentElement.classList.contains('e-input-focus')) {\n        var endObj = this.getInstance(EVENT_WINDOW_END_CLASS);\n        var duration = 0;\n\n        if (this.cellClickAction) {\n          duration = MS_PER_MINUTE * this.duration;\n          this.eventWindowTime.startTime = startObj.value;\n        } else {\n          duration = this.eventData[this.fields.endTime].getTime() - this.eventData[this.fields.startTime].getTime();\n        }\n\n        var endDate = isNullOrUndefined(startObj.value) ? null : new Date(startObj.value.getTime() + duration);\n\n        if (this.cellClickAction) {\n          this.eventWindowTime.endTime = endDate;\n        }\n\n        endObj.value = endDate;\n        endObj.dataBind();\n      }\n\n      if (this.recurrenceEditor) {\n        this.recurrenceEditor.updateRuleUntilDate(this.eventWindowTime.startTime);\n      }\n    }\n  }, {\n    key: \"renderResourceDetails\",\n    value: function renderResourceDetails(resourceData) {\n      var fieldName = resourceData.field;\n      var value = 'e-' + fieldName;\n      var labelValue = resourceData.title;\n      var resourceDiv = this.createDivElement(value + '-container' + ' ' + 'e-resources');\n      var resourceInput = this.createInputElement(value + ' ' + EVENT_FIELD$1, fieldName);\n      resourceDiv.appendChild(resourceInput);\n      var resourceTemplate = '<div class=\"e-resource-template\"><div class=\"e-resource-color\" style=\"background-color:${' + resourceData.colorField + '}\"></div><div class=\"e-resource-text\">${' + resourceData.textField + '}</div></div>';\n\n      if (resourceData.allowMultiple) {\n        var listObj = new MultiSelect({\n          cssClass: this.parent.cssClass || '',\n          dataSource: resourceData.dataSource,\n          change: this.onMultiselectResourceChange.bind(this),\n          itemTemplate: resourceTemplate,\n          fields: {\n            text: resourceData.textField,\n            value: resourceData.idField\n          },\n          htmlAttributes: {\n            'title': labelValue,\n            'name': fieldName\n          },\n          floatLabelType: 'Always',\n          placeholder: labelValue,\n          popupHeight: '230px',\n          popupWidth: '447px',\n          mode: 'Box'\n        });\n        listObj.appendTo(resourceInput);\n      } else {\n        var dropDownList = new DropDownList({\n          cssClass: this.parent.cssClass || '',\n          change: this.onDropdownResourceChange.bind(this),\n          dataSource: resourceData.dataSource,\n          enableRtl: this.parent.enableRtl,\n          fields: {\n            text: resourceData.textField,\n            value: resourceData.idField\n          },\n          htmlAttributes: {\n            'title': labelValue,\n            'name': fieldName\n          },\n          floatLabelType: 'Always',\n          placeholder: labelValue,\n          popupHeight: '230px',\n          popupWidth: '447px',\n          itemTemplate: resourceTemplate\n        });\n        dropDownList.appendTo(resourceInput);\n      }\n\n      return resourceDiv;\n    }\n  }, {\n    key: \"renderDropDown\",\n    value: function renderDropDown(value) {\n      var _this44 = this;\n\n      var fieldName = this.getFieldName(value);\n      var timezoneDiv = this.createDivElement(value + '-container');\n      var timezoneInput = this.createInputElement(value + ' ' + EVENT_FIELD$1, fieldName);\n      timezoneDiv.appendChild(timezoneInput);\n      var dropDownList = new DropDownList({\n        allowFiltering: true,\n        change: this.onTimezoneChange.bind(this),\n        cssClass: this.parent.cssClass || '',\n        dataSource: this.parent.timezoneDataSource,\n        enableRtl: this.parent.enableRtl,\n        fields: {\n          text: 'Text',\n          value: 'Value'\n        },\n        filterBarPlaceholder: this.parent.localeObj.getConstant('searchTimezone'),\n        noRecordsTemplate: this.parent.localeObj.getConstant('noRecords'),\n        filtering: function filtering(e) {\n          var query = new Query();\n          query = e.text !== '' ? query.where('Text', 'contains', e.text, true) : query;\n          e.updateData(_this44.parent.timezoneDataSource, query);\n        },\n        htmlAttributes: {\n          'title': this.getFieldLabel(value),\n          'name': fieldName\n        },\n        floatLabelType: 'Always',\n        placeholder: this.getFieldLabel(value),\n        popupHeight: '230px'\n      });\n      dropDownList.appendTo(timezoneInput);\n      return timezoneDiv;\n    }\n  }, {\n    key: \"onMultiselectResourceChange\",\n    value: function onMultiselectResourceChange(args) {\n      var _this45 = this;\n\n      if (!args.value || !this.parent.activeViewOptions.group.byGroupID || this.parent.resourceCollection.length <= 1) {\n        return;\n      }\n\n      var resourceCollection = this.parent.resourceBase.resourceCollection;\n      var fieldName = args.element.getAttribute('name') || this.getColumnName(args.element);\n\n      for (var i = 0; i < resourceCollection.length; i++) {\n        if (resourceCollection[i].field === fieldName && i < resourceCollection.length - 1) {\n          var resObject = this.createInstance(i);\n          var datasource = [];\n\n          var _loop6 = function _loop6(j) {\n            var resourceModel = resourceCollection[i + 1]; // eslint-disable-next-line max-len\n\n            var filter = resourceModel.dataSource.filter(function (data) {\n              return data[resourceModel.groupIDField] === args.value[j];\n            })[0];\n            var groupId = filter[resourceCollection[i + 1].groupIDField];\n\n            var filterRes = _this45.filterDatasource(i, groupId);\n\n            datasource = datasource.concat(filterRes);\n          };\n\n          for (var j = 0; j < args.value.length; j++) {\n            _loop6(j);\n          }\n\n          resObject.dataSource = datasource;\n          resObject.dataBind();\n        }\n      }\n    }\n  }, {\n    key: \"createInstance\",\n    value: function createInstance(index) {\n      var resourceData = this.parent.resourceBase.resourceCollection[index + 1];\n      var resObject = this.element.querySelector('.e-' + resourceData.field).ej2_instances[0];\n      return resObject;\n    }\n  }, {\n    key: \"onDropdownResourceChange\",\n    value: function onDropdownResourceChange(args) {\n      if (!args.value || this.parent.resourceCollection.length <= 1 || !this.parent.activeViewOptions.group.byGroupID) {\n        return;\n      }\n\n      var fieldName = args.element.getAttribute('name') || this.getColumnName(args.element);\n      var resourceCollection = this.parent.resourceBase.resourceCollection;\n\n      for (var i = 0; i < resourceCollection.length; i++) {\n        if (i < resourceCollection.length - 1 && resourceCollection[i].field === fieldName) {\n          var resObj = this.createInstance(i);\n          var groupId = args.itemData[resourceCollection[i].idField];\n          resObj.dataSource = this.filterDatasource(i, groupId);\n          resObj.dataBind();\n          var resValue = resObj.dataSource[0][resourceCollection[i + 1].idField];\n          resObj.value = resourceCollection[i + 1].allowMultiple ? [resValue] : resValue;\n          resObj.dataBind();\n        }\n      }\n    }\n  }, {\n    key: \"filterDatasource\",\n    value: function filterDatasource(index, groupId) {\n      var resourceData = this.parent.resourceBase.resourceCollection[index + 1];\n      return resourceData.dataSource.filter(function (data) {\n        return data[resourceData.groupIDField] === groupId;\n      });\n    }\n  }, {\n    key: \"onTimezoneChange\",\n    value: function onTimezoneChange(args) {\n      var fieldName = args.element.getAttribute('name') || this.getColumnName(args.element);\n\n      if (fieldName === this.parent.eventFields.startTimezone) {\n        var startTimezoneObj = this.getInstance(EVENT_WINDOW_START_TZ_CLASS);\n        var endTimezoneObj = this.getInstance(EVENT_WINDOW_END_TZ_CLASS);\n        endTimezoneObj.value = startTimezoneObj.value;\n        endTimezoneObj.dataBind();\n      }\n    }\n  }, {\n    key: \"renderCheckBox\",\n    value: function renderCheckBox(value) {\n      var checkBoxDiv = this.createDivElement(value + '-container');\n      var fieldName = this.getFieldName(value);\n      var checkBoxInput = this.createInputElement(value + ' ' + EVENT_FIELD$1, fieldName);\n      checkBoxDiv.appendChild(checkBoxInput);\n      var checkBox = new CheckBox({\n        change: this.onChange.bind(this),\n        cssClass: value + ' ' + this.parent.cssClass,\n        enableRtl: this.parent.enableRtl,\n        label: this.getFieldLabel(value)\n      });\n      checkBox.appendTo(checkBoxInput);\n      checkBoxInput.setAttribute('name', fieldName);\n\n      if (fieldName === 'Repeat') {\n        this.repeatStatus = checkBox;\n      }\n\n      return checkBoxDiv;\n    }\n  }, {\n    key: \"renderTextBox\",\n    value: function renderTextBox(value) {\n      var textBoxDiv = this.createDivElement(value + '-container');\n      var fieldName = this.getFieldName(value);\n      var elementType = value === DESCRIPTION_CLASS ? 'textarea' : 'input';\n      var textBoxInput = this.createInputElement(value + ' ' + EVENT_FIELD$1, fieldName, elementType);\n      textBoxDiv.appendChild(textBoxInput);\n      Input.createInput({\n        element: textBoxInput,\n        floatLabelType: 'Always',\n        properties: {\n          enableRtl: this.parent.enableRtl,\n          placeholder: this.getFieldLabel(value)\n        }\n      });\n      return textBoxDiv;\n    }\n  }, {\n    key: \"getFieldName\",\n    value: function getFieldName(name) {\n      var fieldName = '';\n\n      switch (name) {\n        case SUBJECT_CLASS:\n          fieldName = this.fields.subject;\n          break;\n\n        case LOCATION_CLASS:\n          fieldName = this.fields.location;\n          break;\n\n        case EVENT_WINDOW_START_CLASS:\n          fieldName = this.fields.startTime;\n          break;\n\n        case EVENT_WINDOW_END_CLASS:\n          fieldName = this.fields.endTime;\n          break;\n\n        case DESCRIPTION_CLASS:\n          fieldName = this.fields.description;\n          break;\n\n        case EVENT_WINDOW_ALL_DAY_CLASS:\n          fieldName = this.fields.isAllDay;\n          break;\n\n        case EVENT_WINDOW_START_TZ_CLASS:\n          fieldName = this.fields.startTimezone;\n          break;\n\n        case EVENT_WINDOW_END_TZ_CLASS:\n          fieldName = this.fields.endTimezone;\n          break;\n\n        case TIME_ZONE_CLASS:\n          fieldName = 'Timezone';\n          break;\n\n        case EVENT_WINDOW_REPEAT_CLASS:\n          fieldName = 'Repeat';\n          break;\n      }\n\n      return fieldName;\n    }\n  }, {\n    key: \"getFieldLabel\",\n    value: function getFieldLabel(fieldName) {\n      var labelText = '';\n\n      switch (fieldName) {\n        case SUBJECT_CLASS:\n          labelText = this.parent.editorTitles.subject;\n          break;\n\n        case LOCATION_CLASS:\n          labelText = this.parent.editorTitles.location;\n          break;\n\n        case DESCRIPTION_CLASS:\n          labelText = this.parent.editorTitles.description;\n          break;\n\n        case EVENT_WINDOW_START_CLASS:\n          labelText = this.parent.editorTitles.startTime;\n          break;\n\n        case EVENT_WINDOW_END_CLASS:\n          labelText = this.parent.editorTitles.endTime;\n          break;\n\n        case EVENT_WINDOW_START_TZ_CLASS:\n          labelText = this.parent.editorTitles.startTimezone;\n          break;\n\n        case EVENT_WINDOW_END_TZ_CLASS:\n          labelText = this.parent.editorTitles.endTimezone;\n          break;\n\n        case EVENT_WINDOW_REPEAT_CLASS:\n          labelText = this.parent.editorTitles.recurrenceRule;\n          break;\n\n        case EVENT_WINDOW_ALL_DAY_CLASS:\n          labelText = this.parent.editorTitles.isAllDay;\n          break;\n\n        case TIME_ZONE_CLASS:\n          labelText = this.l10n.getConstant('timezone');\n          break;\n      }\n\n      return labelText;\n    }\n  }, {\n    key: \"onChange\",\n    value: function onChange(args) {\n      var target = args.event.target;\n\n      if (target.classList.contains(EVENT_WINDOW_ALL_DAY_CLASS)) {\n        this.onAllDayChange(args.checked);\n      } else if (target.classList.contains(TIME_ZONE_CLASS)) {\n        this.timezoneChangeStyle(args.checked);\n      } else if (target.classList.contains(EVENT_WINDOW_REPEAT_CLASS)) {\n        this.onRepeatChange(args.checked);\n      }\n    }\n  }, {\n    key: \"renderRepeatDialog\",\n    value: function renderRepeatDialog() {\n      var element = createElement('div');\n      this.repeatDialogObject = new Dialog({\n        header: this.l10n.getConstant('recurrence'),\n        visible: false,\n        content: '<div class=\"e-rec-editor\"></div>',\n        closeOnEscape: true,\n        width: '90%',\n        buttons: [{\n          click: this.repeatSaveDialog.bind(this),\n          buttonModel: {\n            content: this.l10n.getConstant('save'),\n            cssClass: 'e-save',\n            isPrimary: true\n          }\n        }, {\n          click: this.repeatCancelDialog.bind(this),\n          buttonModel: {\n            cssClass: 'e-cancel',\n            content: this.l10n.getConstant('cancel')\n          }\n        }],\n        target: this.element,\n        animationSettings: {\n          effect: 'Zoom'\n        },\n        enableRtl: this.parent.enableRtl,\n        isModal: true,\n        cssClass: REPEAT_DIALOG_CLASS,\n        open: this.repeatOpenDialog.bind(this)\n      });\n      this.element.appendChild(element);\n      this.repeatDialogObject.appendTo(element);\n      this.createRecurrenceEditor(this.repeatDialogObject.element.querySelector('.e-rec-editor'));\n    }\n  }, {\n    key: \"loadRecurrenceEditor\",\n    value: function loadRecurrenceEditor() {\n      this.repeatDialogObject.show();\n\n      if (this.recurrenceEditor && this.repeatRule) {\n        this.recurrenceEditor.setRecurrenceRule(this.repeatRule);\n      }\n    }\n  }, {\n    key: \"onRepeatChange\",\n    value: function onRepeatChange(state) {\n      if (state) {\n        if (!this.repeatDialogObject) {\n          this.renderRepeatDialog();\n        }\n\n        this.recurrenceEditor.setProperties({\n          startDate: this.repeatStartDate,\n          selectedType: 0\n        });\n        this.loadRecurrenceEditor();\n      } else {\n        if (this.repeatDialogObject) {\n          this.repeatDialogObject.hide();\n        }\n\n        this.repeatRule = '';\n\n        if (this.recurrenceEditor) {\n          this.recurrenceEditor.setRecurrenceRule(this.repeatRule);\n          this.updateRepeatLabel(this.repeatRule);\n        }\n\n        var element = this.element.querySelector('.' + REPEAT_CONTAINER_CLASS);\n        addClass([element], HIDE_STYLE_CLASS);\n      }\n    }\n  }, {\n    key: \"repeatSaveDialog\",\n    value: function repeatSaveDialog() {\n      this.repeatRule = this.recurrenceEditor.getRecurrenceRule();\n      var element = this.element.querySelector('.' + REPEAT_CONTAINER_CLASS);\n\n      if (this.recurrenceEditor.getRecurrenceRule()) {\n        removeClass([element], HIDE_STYLE_CLASS);\n      } else {\n        addClass([element], HIDE_STYLE_CLASS);\n        this.repeatStatus.setProperties({\n          checked: false\n        });\n      }\n\n      this.updateRepeatLabel(this.repeatRule);\n      this.closeRepeatDialog();\n    }\n  }, {\n    key: \"closeRepeatDialog\",\n    value: function closeRepeatDialog() {\n      this.repeatDialogObject.hide();\n    }\n  }, {\n    key: \"repeatCancelDialog\",\n    value: function repeatCancelDialog() {\n      this.closeRepeatDialog();\n\n      if (this.recurrenceEditor) {\n        this.recurrenceEditor.setRecurrenceRule(this.repeatTempRule);\n      }\n\n      if (!this.repeatTempRule) {\n        this.repeatStatus.setProperties({\n          checked: false\n        });\n      }\n    }\n  }, {\n    key: \"repeatOpenDialog\",\n    value: function repeatOpenDialog() {\n      this.repeatTempRule = this.recurrenceEditor.getRecurrenceRule();\n    }\n  }, {\n    key: \"onCellDetailsUpdate\",\n    value: function onCellDetailsUpdate(eventObj, repeatType) {\n      if (!this.parent.eventSettings.allowAdding) {\n        return;\n      }\n\n      this.element.querySelector('.' + FORM_CLASS).removeAttribute('data-id');\n      this.element.querySelector('.' + EVENT_WINDOW_TITLE_TEXT_CLASS).innerHTML = this.l10n.getConstant('newEvent');\n      eventObj.Timezone = false;\n      this.repeatStartDate = eventObj[this.fields.startTime];\n      this.repeatRule = '';\n\n      if (!isNullOrUndefined(this.parent.eventSettings.fields.subject.default)) {\n        eventObj[this.fields.subject] = this.parent.eventSettings.fields.subject.default;\n      }\n\n      if (!isNullOrUndefined(this.parent.eventSettings.fields.location.default)) {\n        eventObj[this.fields.location] = this.parent.eventSettings.fields.location.default;\n      }\n\n      if (!isNullOrUndefined(this.parent.eventSettings.fields.description.default)) {\n        eventObj[this.fields.description] = this.parent.eventSettings.fields.description.default;\n      }\n\n      this.showDetails(eventObj);\n\n      if (eventObj[this.fields.recurrenceRule] && this.recurrenceEditor) {\n        this.recurrenceEditor.setRecurrenceRule(eventObj[this.fields.recurrenceRule], eventObj[this.fields.startTime]);\n        this.repeatRule = eventObj[this.fields.recurrenceRule];\n      }\n\n      var deleteButton = this.element.querySelector('.' + DELETE_EVENT_CLASS);\n\n      if (deleteButton) {\n        addClass([deleteButton], DISABLE_CLASS);\n      }\n\n      if (this.recurrenceEditor) {\n        this.recurrenceEditor.setProperties({\n          startDate: eventObj[this.fields.startTime],\n          selectedType: !isNullOrUndefined(repeatType) ? repeatType : !isNullOrUndefined(eventObj[this.fields.recurrenceRule]) ? this.recurrenceEditor.selectedType : 0\n        });\n      }\n\n      if (this.parent.isAdaptive && isNullOrUndefined(this.parent.editorTemplate)) {\n        var element = this.element.querySelector('.' + REPEAT_CONTAINER_CLASS);\n        addClass([element], HIDE_STYLE_CLASS);\n        this.updateRepeatLabel(this.repeatRule);\n      } else {\n        var saveButton = this.element.querySelector('.' + EVENT_WINDOW_SAVE_BUTTON_CLASS);\n        this.disableButton(saveButton, false);\n      }\n\n      this.dialogObject.show();\n    }\n  }, {\n    key: \"convertToEventData\",\n    value: function convertToEventData(cellsData, eventObj) {\n      if (cellsData.subject) {\n        eventObj[this.fields.subject] = cellsData.subject;\n      }\n\n      eventObj[this.fields.startTime] = cellsData.startTime;\n      eventObj[this.fields.endTime] = cellsData.endTime;\n      eventObj[this.fields.isAllDay] = cellsData.isAllDay;\n\n      if (cellsData.RecurrenceRule) {\n        eventObj[this.fields.recurrenceRule] = cellsData.RecurrenceRule;\n      }\n\n      if (this.parent.resourceCollection.length > 0 || this.parent.activeViewOptions.group.resources.length > 0) {\n        this.parent.resourceBase.setResourceValues(eventObj);\n      }\n    }\n  }, {\n    key: \"applyFormValidation\",\n    value: function applyFormValidation() {\n      var getValidationRule = function getValidationRule(rules) {\n        return rules && Object.keys(rules).length > 0 ? rules : undefined;\n      };\n\n      var form = this.element.querySelector('.' + FORM_CLASS);\n      var rules = {};\n      rules[this.parent.eventSettings.fields.subject.name] = getValidationRule(this.parent.eventSettings.fields.subject.validation);\n      rules[this.parent.eventSettings.fields.location.name] = getValidationRule(this.parent.eventSettings.fields.location.validation);\n      rules[this.parent.eventSettings.fields.startTime.name] = getValidationRule(this.parent.eventSettings.fields.startTime.validation);\n      rules[this.parent.eventSettings.fields.endTime.name] = getValidationRule(this.parent.eventSettings.fields.endTime.validation);\n      rules[this.parent.eventSettings.fields.description.name] = getValidationRule(this.parent.eventSettings.fields.description.validation);\n      this.fieldValidator = new FieldValidator();\n      this.fieldValidator.renderFormValidator(form, rules, this.element, this.parent.locale);\n    }\n  }, {\n    key: \"showDetails\",\n    value: function showDetails(eventData) {\n      var eventObj = extend({}, eventData, null, true);\n\n      if (eventObj[this.fields.endTime].getHours() === 0 && eventObj[this.fields.endTime].getMinutes() === 0) {\n        this.trimAllDay(eventObj);\n      }\n\n      this.eventData = eventObj;\n      var formElements = this.getFormElements(EVENT_WINDOW_DIALOG_CLASS);\n      var keyNames = Object.keys(eventObj);\n\n      var _iterator58 = _createForOfIteratorHelper(formElements),\n          _step58;\n\n      try {\n        for (_iterator58.s(); !(_step58 = _iterator58.n()).done;) {\n          var curElement = _step58.value;\n          var columnName = curElement.name || this.getColumnName(curElement);\n\n          if (!isNullOrUndefined(columnName) && columnName !== '') {\n            if (keyNames.indexOf(columnName) !== -1) {\n              this.setValueToElement(curElement, eventObj[columnName]);\n            } else {\n              this.setDefaultValueToElement(curElement);\n            }\n          }\n        }\n      } catch (err) {\n        _iterator58.e(err);\n      } finally {\n        _iterator58.f();\n      }\n\n      if (isNullOrUndefined(this.parent.editorTemplate)) {\n        this.onAllDayChange(eventObj[this.fields.isAllDay]);\n        var timezoneObj = this.getInstance(TIME_ZONE_CLASS + '.' + EVENT_FIELD$1);\n\n        if (!(isNullOrUndefined(eventObj[this.fields.startTimezone]) && isNullOrUndefined(eventObj[this.fields.endTimezone]))) {\n          timezoneObj.checked = true;\n          timezoneObj.dataBind();\n        }\n\n        this.timezoneChangeStyle(timezoneObj.checked);\n        delete eventObj.Timezone;\n      }\n    }\n  }, {\n    key: \"getColumnName\",\n    value: function getColumnName(element) {\n      var attrName = element.getAttribute('data-name') || '';\n\n      if (attrName === '') {\n        var isDropDowns = false;\n        var fieldSelector = '';\n\n        if (element.classList.contains('e-dropdownlist')) {\n          fieldSelector = 'e-ddl';\n          isDropDowns = true;\n        } else if (element.classList.contains('e-multiselect')) {\n          fieldSelector = 'e-multiselect';\n          isDropDowns = true;\n        } else if (element.classList.contains('e-datetimepicker')) {\n          fieldSelector = 'e-datetimepicker';\n        } else if (element.classList.contains('e-datepicker')) {\n          fieldSelector = 'e-datepicker';\n        } else if (element.classList.contains('e-checkbox')) {\n          fieldSelector = 'e-checkbox';\n        }\n\n        var classSelector = isDropDowns ? \".\".concat(fieldSelector, \":not(.e-control)\") : \".\".concat(fieldSelector);\n        var control = closest(element, classSelector) || element.querySelector(\".\".concat(fieldSelector));\n\n        if (control) {\n          var attrEle = control.querySelector('[name]');\n\n          if (attrEle) {\n            attrName = attrEle.name;\n          }\n        }\n      }\n\n      return attrName;\n    }\n  }, {\n    key: \"onAllDayChange\",\n    value: function onAllDayChange(allDayStatus) {\n      var startObj = this.getInstance(EVENT_WINDOW_START_CLASS);\n      var endObj = this.getInstance(EVENT_WINDOW_END_CLASS);\n      var timezoneDiv = this.element.querySelector('.e-time-zone-container');\n      var format;\n\n      if (allDayStatus) {\n        format = isNullOrUndefined(this.parent.dateFormat) ? this.getFormat('dateFormats') : this.parent.dateFormat;\n        addClass(this.element.querySelectorAll('.e-time-icon'), EVENT_WINDOW_ICON_DISABLE_CLASS);\n        addClass([timezoneDiv], DISABLE_CLASS);\n\n        if (this.element.querySelector('.' + EVENT_WINDOW_TIME_ZONE_DIV_CLASS)) {\n          removeClass([this.element.querySelector('.' + EVENT_WINDOW_TIME_ZONE_DIV_CLASS)], ENABLE_CLASS);\n        }\n\n        startObj.format = endObj.format = format;\n      } else {\n        format = isNullOrUndefined(this.parent.dateFormat) ? this.getFormat('dateFormats') + ' ' + this.parent.activeViewOptions.timeFormat : this.parent.dateFormat + ' ' + this.parent.activeViewOptions.timeFormat;\n        removeClass(this.element.querySelectorAll('.e-time-icon'), EVENT_WINDOW_ICON_DISABLE_CLASS);\n        removeClass([timezoneDiv], DISABLE_CLASS);\n\n        if (this.element.querySelector('.e-checkbox-wrapper .e-time-zone').checked) {\n          addClass([this.element.querySelector('.' + EVENT_WINDOW_TIME_ZONE_DIV_CLASS)], ENABLE_CLASS);\n        }\n\n        startObj.format = endObj.format = format;\n      }\n\n      if (this.cellClickAction) {\n        this.updateDateTime(allDayStatus, startObj, endObj);\n      }\n\n      startObj.dataBind();\n      endObj.dataBind();\n\n      if (!isNullOrUndefined(this.recurrenceEditor)) {\n        this.recurrenceEditor.updateRuleUntilDate(startObj.value);\n      }\n    }\n  }, {\n    key: \"updateDateTime\",\n    value: function updateDateTime(allDayStatus, startObj, endObj) {\n      var startDate;\n      var endDate;\n\n      if (allDayStatus) {\n        startDate = resetTime(new Date(this.eventWindowTime.startTime.getTime()));\n\n        if (this.parent.activeCellsData.isAllDay) {\n          var temp = addDays(new Date(this.eventWindowTime.endTime.getTime()), -1).getTime();\n          endDate = +this.eventWindowTime.startTime > temp ? this.eventWindowTime.endTime : new Date(temp);\n        } else {\n          endDate = resetTime(new Date(this.eventWindowTime.endTime.getTime()));\n        }\n      } else {\n        var start = this.parent.activeCellsData.startTime;\n        startDate = new Date(this.eventWindowTime.startTime.getTime());\n        startDate.setHours(start.getHours(), start.getMinutes(), start.getSeconds());\n\n        if (this.parent.activeCellsData.isAllDay) {\n          var startHour = this.parent.getStartEndTime(this.parent.workHours.start);\n          startDate.setHours(startHour.getHours(), startHour.getMinutes(), startHour.getSeconds());\n          endDate = new Date(startDate.getTime());\n          endDate.setMilliseconds(MS_PER_MINUTE * this.getSlotDuration());\n        } else {\n          endDate = new Date(startDate.getTime());\n          endDate.setMilliseconds(this.parent.activeCellsData.endTime.getTime() - this.parent.activeCellsData.startTime.getTime());\n        }\n      }\n\n      this.eventWindowTime = {\n        startTime: new Date(startDate.getTime()),\n        endTime: new Date(endDate.getTime())\n      };\n      startObj.value = startDate;\n      endObj.value = endDate;\n      startObj.dataBind();\n      endObj.dataBind();\n    }\n  }, {\n    key: \"getFormat\",\n    value: function getFormat(formatType) {\n      var format;\n\n      if (this.parent.locale === 'en' || this.parent.locale === 'en-US') {\n        format = getValue(formatType + '.short', getDefaultDateObject(this.parent.getCalendarMode()));\n      } else {\n        format = getValue(\"main.\".concat(this.parent.locale, \".dates.calendars.\").concat(this.parent.getCalendarMode(), \".\").concat(formatType, \".short\"), cldrData);\n      }\n\n      return format;\n    }\n  }, {\n    key: \"onEventDetailsUpdate\",\n    value: function onEventDetailsUpdate(eventObj) {\n      if (!this.parent.eventSettings.allowEditing) {\n        return;\n      }\n\n      if (!this.parent.isAdaptive) {\n        removeClass([this.element.querySelector('.' + DELETE_EVENT_CLASS)], DISABLE_CLASS);\n      }\n\n      this.element.querySelector('.' + EVENT_WINDOW_TITLE_TEXT_CLASS).innerHTML = this.l10n.getConstant('editEvent');\n      this.element.querySelector('.' + FORM_CLASS).setAttribute('data-id', eventObj[this.fields.id].toString());\n\n      if (isNullOrUndefined(this.parent.editorTemplate)) {\n        eventObj = extend({}, eventObj, null, true);\n        var timezoneObj = this.getInstance(TIME_ZONE_CLASS + '.' + EVENT_FIELD$1);\n        var timezoneValue;\n\n        if (eventObj[this.fields.startTimezone] || eventObj[this.fields.endTimezone]) {\n          timezoneValue = true;\n          this.parent.eventBase.timezoneConvert(eventObj);\n        } else {\n          timezoneValue = false;\n        }\n\n        eventObj.Timezone = timezoneValue;\n        timezoneObj.checked = timezoneValue;\n        timezoneObj.dataBind();\n      }\n\n      this.showDetails(eventObj);\n\n      if (eventObj[this.fields.recurrenceRule] && this.recurrenceEditor) {\n        this.recurrenceEditor.setRecurrenceRule(eventObj[this.fields.recurrenceRule], eventObj[this.fields.startTime]);\n      } else if (!this.parent.isAdaptive && this.recurrenceEditor) {\n        this.recurrenceEditor.setProperties({\n          startDate: eventObj[this.fields.startTime]\n        });\n        this.recurrenceEditor.setRecurrenceRule('');\n      }\n\n      this.repeatStartDate = eventObj[this.fields.startTime];\n      this.repeatRule = '';\n\n      if (eventObj[this.fields.recurrenceRule]) {\n        if (this.recurrenceEditor) {\n          this.recurrenceEditor.setRecurrenceRule(eventObj[this.fields.recurrenceRule], eventObj[this.fields.startTime]);\n        }\n\n        this.repeatRule = eventObj[this.fields.recurrenceRule];\n      }\n\n      if (this.parent.isAdaptive && isNullOrUndefined(this.parent.editorTemplate)) {\n        var element = this.element.querySelector('.' + REPEAT_CONTAINER_CLASS);\n\n        if (eventObj[this.fields.recurrenceRule]) {\n          removeClass([element], HIDE_STYLE_CLASS);\n          this.repeatStatus.setProperties({\n            checked: true\n          });\n        } else {\n          addClass([element], HIDE_STYLE_CLASS);\n          this.repeatStatus.setProperties({\n            checked: false\n          });\n        }\n\n        this.updateRepeatLabel(this.repeatRule);\n      }\n\n      var isDisable = this.parent.readonly || eventObj[this.fields.isReadonly];\n\n      if (!this.parent.isAdaptive) {\n        var saveButton = this.element.querySelector('.' + EVENT_WINDOW_SAVE_BUTTON_CLASS);\n        var deleteButton = this.element.querySelector('.' + DELETE_EVENT_CLASS);\n        this.disableButton(saveButton, isDisable);\n        this.disableButton(deleteButton, isDisable);\n      } else {\n        var saveIcon = this.element.querySelector('.' + EVENT_WINDOW_SAVE_ICON_CLASS);\n\n        if (saveIcon) {\n          if (isDisable) {\n            addClass([saveIcon], ICON_DISABLE_CLASS);\n          } else {\n            removeClass([saveIcon], ICON_DISABLE_CLASS);\n          }\n        }\n      }\n\n      this.dialogObject.show();\n    }\n  }, {\n    key: \"disableButton\",\n    value: function disableButton(element, value) {\n      if (element) {\n        element.ej2_instances[0].disabled = value;\n      }\n    }\n  }, {\n    key: \"renderRecurrenceEditor\",\n    value: function renderRecurrenceEditor() {\n      return new RecurrenceEditor({\n        calendarMode: this.parent.calendarMode,\n        cssClass: this.parent.cssClass,\n        dateFormat: this.parent.dateFormat,\n        enableRtl: this.parent.enableRtl,\n        firstDayOfWeek: this.parent.activeViewOptions.firstDayOfWeek,\n        locale: this.parent.locale\n      });\n    }\n  }, {\n    key: \"updateMinMaxDateToEditor\",\n    value: function updateMinMaxDateToEditor() {\n      var startDate = this.element.querySelector('.e-start');\n      var endDate = this.element.querySelector('.e-end');\n\n      if (startDate && endDate) {\n        var startObj = startDate.ej2_instances[0];\n        var endObj = endDate.ej2_instances[0];\n        startObj.min = this.parent.minDate;\n        startObj.max = this.parent.maxDate;\n        endObj.min = this.parent.minDate;\n        endObj.max = this.parent.maxDate;\n        startObj.dataBind();\n        endObj.dataBind();\n      }\n\n      if (this.recurrenceEditor) {\n        var untilDate = this.recurrenceEditor.element.querySelector('.e-until-date');\n\n        if (untilDate) {\n          var untilObj = untilDate.ej2_instances[0];\n          untilObj.min = this.parent.minDate;\n          untilObj.max = this.parent.maxDate;\n          untilObj.dataBind();\n        }\n      }\n    }\n  }, {\n    key: \"updateRepeatLabel\",\n    value: function updateRepeatLabel(repeatRule) {\n      if (this.parent.isAdaptive && !this.repeatDialogObject) {\n        this.renderRepeatDialog();\n      }\n\n      var data = repeatRule ? this.l10n.getConstant('repeats') + ' ' + this.recurrenceEditor.getRuleSummary(repeatRule) : this.l10n.getConstant('repeat');\n      this.repeatStatus.setProperties({\n        label: data\n      });\n    }\n  }, {\n    key: \"dialogClose\",\n    value: function dialogClose(event) {\n      if (this.isEnterKey) {\n        this.isEnterKey = false;\n        return;\n      }\n\n      this.dialogEvent = event;\n      this.isCrudAction = false;\n      this.parent.activeEventData = {\n        event: undefined,\n        element: undefined\n      };\n      this.parent.currentAction = null;\n      this.dialogObject.hide();\n    }\n  }, {\n    key: \"resetForm\",\n    value: function resetForm() {\n      this.fieldValidator.destroyToolTip();\n      this.resetFormFields();\n\n      if (!this.parent.isAdaptive && this.recurrenceEditor && !this.recurrenceEditor.isDestroyed) {\n        this.recurrenceEditor.resetFields();\n      }\n    }\n  }, {\n    key: \"timezoneChangeStyle\",\n    value: function timezoneChangeStyle(value) {\n      var timezoneDiv = this.element.querySelector('.' + EVENT_WINDOW_TIME_ZONE_DIV_CLASS);\n      var localTimezoneName = this.parent.tzModule.getLocalTimezoneName();\n\n      if (value) {\n        addClass([timezoneDiv], ENABLE_CLASS);\n        var startTimezoneObj = this.getInstance(EVENT_WINDOW_START_TZ_CLASS);\n        var endTimezoneObj = this.getInstance(EVENT_WINDOW_END_TZ_CLASS);\n        var timezone = startTimezoneObj.dataSource;\n\n        if (!startTimezoneObj.value || !this.parent.timezone) {\n          var found = timezone.some(function (tz) {\n            return tz.Value === localTimezoneName;\n          });\n\n          if (!found) {\n            timezone.push({\n              Value: localTimezoneName,\n              Text: localTimezoneName\n            });\n            startTimezoneObj.dataSource = timezone;\n            endTimezoneObj.dataSource = timezone;\n            startTimezoneObj.dataBind();\n            endTimezoneObj.dataBind();\n          }\n        }\n\n        startTimezoneObj.value = startTimezoneObj.value || this.parent.timezone || localTimezoneName;\n        endTimezoneObj.value = endTimezoneObj.value || this.parent.timezone || localTimezoneName;\n        startTimezoneObj.dataBind();\n        endTimezoneObj.dataBind();\n      } else {\n        removeClass([timezoneDiv], ENABLE_CLASS);\n      }\n    }\n  }, {\n    key: \"resetFormFields\",\n    value: function resetFormFields() {\n      var formElement = this.getFormElements(EVENT_WINDOW_DIALOG_CLASS);\n\n      var _iterator59 = _createForOfIteratorHelper(formElement),\n          _step59;\n\n      try {\n        for (_iterator59.s(); !(_step59 = _iterator59.n()).done;) {\n          var currentElement = _step59.value;\n          var columnName = currentElement.name || this.getColumnName(currentElement);\n\n          if (!isNullOrUndefined(columnName) && columnName !== '') {\n            this.setDefaultValueToElement(currentElement);\n          }\n        }\n      } catch (err) {\n        _iterator59.e(err);\n      } finally {\n        _iterator59.f();\n      }\n    }\n  }, {\n    key: \"eventSave\",\n    value: function eventSave(event, alert) {\n      if (this.isEnterKey) {\n        this.isEnterKey = false;\n        return;\n      }\n\n      var formElement = this.element.querySelector('.' + FORM_CLASS);\n\n      if (formElement && formElement.classList.contains('e-formvalidator') && !formElement.ej2_instances[0].validate()) {\n        return;\n      }\n\n      var dataCollection = this.getEventDataFromEditor();\n\n      if (this.processEventValidation(dataCollection.tempData, alert)) {\n        return;\n      }\n\n      this.eventCrudData = dataCollection.eventData;\n      this.dialogEvent = event;\n      this.isCrudAction = true;\n      this.dialogObject.hide();\n    }\n  }, {\n    key: \"getEventDataFromEditor\",\n    value: function getEventDataFromEditor() {\n      var eventObj = extend({}, this.getObjectFromFormData(EVENT_WINDOW_DIALOG_CLASS));\n\n      if (!eventObj.Timezone) {\n        eventObj[this.fields.startTimezone] = null;\n        eventObj[this.fields.endTimezone] = null;\n      }\n\n      delete eventObj.Timezone;\n      delete eventObj.Repeat;\n      this.setDefaultValueToObject(eventObj);\n      eventObj[this.fields.recurrenceRule] = this.recurrenceEditor ? this.recurrenceEditor.getRecurrenceRule() || null : undefined;\n      var tempObj = extend({}, eventObj, null, true);\n\n      if (eventObj[this.fields.isAllDay]) {\n        eventObj[this.fields.startTime] = isNullOrUndefined(eventObj[this.fields.startTime]) ? null : resetTime(new Date(eventObj[this.fields.startTime].getTime()));\n        eventObj[this.fields.endTime] = isNullOrUndefined(eventObj[this.fields.endTime]) ? null : addDays(resetTime(new Date(eventObj[this.fields.endTime].getTime())), 1);\n      }\n\n      return {\n        eventData: eventObj,\n        tempData: tempObj\n      };\n    }\n  }, {\n    key: \"processEventValidation\",\n    value: function processEventValidation(eventObj, alert) {\n      var alertType;\n\n      if (isNullOrUndefined(this.parent.editorTemplate)) {\n        if (!eventObj[this.fields.startTime] || !eventObj[this.fields.endTime]) {\n          this.parent.quickPopup.openValidationError('invalidDateError');\n          return true;\n        }\n\n        if (eventObj[this.fields.startTime] > eventObj[this.fields.endTime]) {\n          this.parent.quickPopup.openValidationError('startEndError');\n          return true;\n        }\n      }\n\n      if (this.recurrenceEditor && this.recurrenceEditor.value && this.recurrenceEditor.value !== '') {\n        alertType = this.recurrenceValidation(eventObj[this.fields.startTime], eventObj[this.fields.endTime], alert);\n        var isShowAlert = true;\n\n        if (alertType === 'seriesChangeAlert' && this.parent.uiStateValues.isIgnoreOccurrence) {\n          isShowAlert = false;\n        }\n\n        if (!isNullOrUndefined(alertType) && isShowAlert && (!this.parent.enableRecurrenceValidation && alertType === 'wrongPattern' || this.parent.enableRecurrenceValidation)) {\n          this.parent.quickPopup.openRecurrenceValidationAlert(alertType);\n          return true;\n        }\n      }\n\n      return false;\n    }\n  }, {\n    key: \"processCrudActions\",\n    value: function processCrudActions(eventObj) {\n      var _this46 = this;\n\n      this.parent.uiStateValues.isBlock = false;\n      var resourceData = this.getResourceData(eventObj);\n      var isResourceEventExpand = (this.parent.activeViewOptions.group.resources.length > 0 || this.parent.resourceCollection.length > 0) && !this.parent.activeViewOptions.group.allowGroupEdit && !isNullOrUndefined(resourceData);\n      var eventId = this.getEventIdFromForm();\n\n      if (!isNullOrUndefined(eventId)) {\n        var eveId = this.parent.eventBase.getEventIDType() === 'string' ? eventId : parseInt(eventId, 10);\n        var editedData = this.parent.eventsData.filter(function (data) {\n          return data[_this46.fields.id] === eveId;\n        })[0];\n\n        if (isNullOrUndefined(editedData)) {\n          editedData = this.parent.blockData.filter(function (data) {\n            return data[_this46.fields.id] === eveId;\n          })[0];\n        }\n\n        eventObj = extend({}, editedData, eventObj);\n\n        if (eventObj[this.fields.isReadonly]) {\n          return false;\n        }\n\n        var currentAction;\n\n        if (!isNullOrUndefined(editedData[this.fields.recurrenceRule])) {\n          currentAction = this.parent.currentAction;\n          eventObj.Guid = this.parent.activeEventData.event.Guid;\n\n          if (this.parent.currentAction === 'EditOccurrence') {\n            if (!eventObj[this.fields.recurrenceID]) {\n              eventObj[this.fields.id] = this.parent.eventBase.getEventMaxID();\n              eventObj.Guid = this.parent.activeEventData.event.Guid;\n            } else {\n              eveId = eventObj[this.fields.recurrenceID];\n              currentAction = null;\n            }\n\n            if (this.parent.enableRecurrenceValidation && this.editOccurrenceValidation(eveId, eventObj)) {\n              return true;\n            }\n          }\n\n          if (this.parent.currentAction === 'EditSeries' || eventObj[this.fields.id] !== editedData[this.fields.id]) {\n            eventObj[this.fields.recurrenceID] = editedData[this.fields.id];\n          } else if (this.parent.currentAction === 'EditFollowingEvents') {\n            eventObj[this.fields.id] = this.parent.eventBase.getEventMaxID();\n            eventObj[this.fields.followingID] = editedData[this.fields.id];\n          }\n        }\n\n        if (isResourceEventExpand) {\n          this.resourceSaveEvent(eventObj, 'Save', currentAction);\n        } else {\n          this.parent.saveEvent(eventObj, currentAction);\n        }\n      } else {\n        this.parent.currentAction = 'Add';\n\n        if (isResourceEventExpand) {\n          this.resourceSaveEvent(eventObj, this.parent.currentAction);\n        } else {\n          eventObj[this.fields.id] = this.parent.eventBase.getEventMaxID();\n          this.parent.addEvent(eventObj);\n        }\n      }\n\n      return this.parent.uiStateValues.isBlock;\n    }\n  }, {\n    key: \"getResourceData\",\n    value: function getResourceData(eventObj) {\n      var resourceData = null;\n\n      if (!isNullOrUndefined(this.parent.resourceBase) && !isNullOrUndefined(this.parent.resourceBase.resourceCollection) && this.parent.resourceBase.resourceCollection.length > 0) {\n        var lastResourceData = this.parent.resourceBase.resourceCollection.slice(-1)[0];\n        resourceData = eventObj[lastResourceData.field];\n      }\n\n      return resourceData;\n    }\n  }, {\n    key: \"getObjectFromFormData\",\n    value: function getObjectFromFormData(className) {\n      var formElement = this.getFormElements(className);\n      var eventObj = {};\n\n      var _iterator60 = _createForOfIteratorHelper(formElement),\n          _step60;\n\n      try {\n        for (_iterator60.s(); !(_step60 = _iterator60.n()).done;) {\n          var currentElement = _step60.value;\n          var columnName = currentElement.name || this.getColumnName(currentElement);\n\n          if (!isNullOrUndefined(columnName) && columnName !== '') {\n            eventObj[columnName] = this.getValueFromElement(currentElement);\n          }\n        }\n      } catch (err) {\n        _iterator60.e(err);\n      } finally {\n        _iterator60.f();\n      }\n\n      return eventObj;\n    }\n  }, {\n    key: \"setDefaultValueToObject\",\n    value: function setDefaultValueToObject(eventObj) {\n      if (!isNullOrUndefined(eventObj[this.fields.subject])) {\n        eventObj[this.fields.subject] = eventObj[this.fields.subject] || this.parent.eventSettings.fields.subject.default || this.l10n.getConstant('addTitle');\n      }\n\n      if (!isNullOrUndefined(eventObj[this.fields.location])) {\n        eventObj[this.fields.location] = eventObj[this.fields.location] || this.parent.eventSettings.fields.location.default;\n      }\n\n      if (!isNullOrUndefined(eventObj[this.fields.description])) {\n        eventObj[this.fields.description] = eventObj[this.fields.description] || this.parent.eventSettings.fields.description.default;\n      }\n    }\n  }, {\n    key: \"recurrenceValidation\",\n    value: function recurrenceValidation(startDate, endDate, alert) {\n      var alertMessage;\n      var recEditor = this.recurrenceEditor;\n      var interval = this.getInstance('e-repeat-interval.e-numerictextbox').value;\n\n      if (alert !== this.l10n.getConstant('ok')) {\n        var activeEvent = this.parent.activeEventData.event;\n        var excludedEvents = [];\n\n        if ((this.parent.currentAction === 'EditSeries' || this.parent.currentAction === 'EditFollowingEvents') && !isNullOrUndefined(activeEvent)) {\n          var eventStartTime = activeEvent[this.parent.eventFields.startTime];\n          var seriesEvents = this.parent.eventBase.getSeriesEvents(this.eventData, eventStartTime);\n\n          if (seriesEvents.length > 0) {\n            excludedEvents = this.parent.eventBase.getEditedOccurrences(seriesEvents, eventStartTime);\n          } else {\n            var event = this.parent.eventBase.getEventById(activeEvent[this.parent.eventFields.id]);\n            excludedEvents = this.parent.eventBase.getEditedOccurrences([event], eventStartTime);\n          }\n\n          if (this.parent.currentAction === 'EditSeries' && !isNullOrUndefined(this.eventData[this.parent.eventFields.recurrenceException])) {\n            excludedEvents.push(this.eventData);\n          }\n        }\n\n        if (excludedEvents.length > 0) {\n          alertMessage = 'seriesChangeAlert';\n        }\n\n        if (this.getInstance('e-end-on-left .e-ddl .e-dropdownlist').value === 'until' && this.getInstance('e-end-on-date .e-datepicker').value < startDate) {\n          alertMessage = 'wrongPattern';\n        }\n\n        if (isNullOrUndefined(alertMessage)) {\n          var types = recEditor.value.split(';')[1].split('=')[1].split(',');\n          var obj = {\n            'SU': 0,\n            'MO': 1,\n            'TU': 2,\n            'WE': 3,\n            'TH': 4,\n            'FR': 5,\n            'SA': 6\n          };\n          var temp = [];\n          var tempDiff = [];\n          var tempValue;\n\n          switch (recEditor.value.split(';')[0].split('=')[1]) {\n            case 'DAILY':\n              if ((endDate.getTime() - startDate.getTime()) / (1000 * 3600) > interval * 24) {\n                alertMessage = 'createError';\n              }\n\n              break;\n\n            case 'WEEKLY':\n              types = recEditor.value.split(';')[1].split('=')[1].split(',');\n\n              for (var index = 0; index < types.length * (interval + 1); index++) {\n                temp[index] = types.length > index ? obj[types[index]] : temp[index - types.length] + 7 * interval;\n              }\n\n              tempValue = temp.sort(function (a, b) {\n                return a - b;\n              });\n\n              for (var _index3 = 1; _index3 < tempValue.length; _index3++) {\n                tempDiff.push(tempValue[_index3] - tempValue[_index3 - 1]);\n              }\n\n              if ((endDate.getTime() - startDate.getTime()) / (1000 * 3600) >= Math.min.apply(Math, tempDiff) * 24 || isNullOrUndefined(interval)) {\n                alertMessage = 'createError';\n              }\n\n              break;\n\n            case 'MONTHLY':\n              if (endDate.getTime() >= new Date(+startDate).setMonth(startDate.getMonth() + interval)) {\n                alertMessage = 'createError';\n              }\n\n              break;\n\n            case 'YEARLY':\n              if (endDate.getTime() >= new Date(+startDate).setFullYear(startDate.getFullYear() + interval)) {\n                alertMessage = 'createError';\n              }\n\n              break;\n          }\n        }\n      } else {\n        if (endDate.getTime() >= new Date(+startDate).setMonth(startDate.getMonth() + interval)) {\n          alertMessage = 'createError';\n        }\n\n        if (isNullOrUndefined(alertMessage)) {\n          this.parent.quickPopup.quickDialog.hide();\n        }\n      }\n\n      if (isNullOrUndefined(interval)) {\n        alertMessage = 'createError';\n      }\n\n      return alertMessage;\n    }\n  }, {\n    key: \"getRecurrenceIndex\",\n    value: function getRecurrenceIndex(recColl, event) {\n      var recIndex;\n\n      for (var index = 0; index < recColl.length; index++) {\n        if (event[this.fields.startTime].valueOf() === recColl[index][this.fields.startTime].valueOf()) {\n          recIndex = index;\n          break;\n        }\n      }\n\n      return recIndex;\n    }\n  }, {\n    key: \"trimAllDay\",\n    value: function trimAllDay(data) {\n      if (data[this.fields.isAllDay]) {\n        var temp = addDays(new Date(+data[this.fields.endTime]), -1).getTime();\n        data[this.fields.endTime] = +data[this.fields.startTime] > temp ? data[this.fields.endTime] : new Date(temp);\n      }\n    }\n  }, {\n    key: \"editOccurrenceValidation\",\n    value: function editOccurrenceValidation(eventId, currentData, editData) {\n      var _this47 = this;\n\n      if (editData === void 0) {\n        editData = this.eventData;\n      }\n\n      var recurColl = this.parent.getOccurrencesByID(eventId);\n      var excludedDatas = this.parent.eventsData.filter(function (data) {\n        return data[_this47.fields.recurrenceID] === eventId;\n      });\n      excludedDatas.map(function (data) {\n        return recurColl.push(extend({}, data));\n      });\n      currentData = extend({}, currentData);\n      this.trimAllDay(currentData);\n\n      var _iterator61 = _createForOfIteratorHelper(recurColl),\n          _step61;\n\n      try {\n        for (_iterator61.s(); !(_step61 = _iterator61.n()).done;) {\n          var data = _step61.value;\n          this.trimAllDay(data);\n        }\n      } catch (err) {\n        _iterator61.e(err);\n      } finally {\n        _iterator61.f();\n      }\n\n      this.parent.eventBase.sortByTime(recurColl);\n      var index = this.getRecurrenceIndex(recurColl, editData);\n\n      if (isNullOrUndefined(index)) {\n        return false;\n      }\n\n      if (index === 0) {\n        if (!isNullOrUndefined(recurColl[index + 1])) {\n          if (!(resetTime(new Date(+recurColl[index + 1][this.fields.startTime])).getTime() > resetTime(new Date(+currentData[this.fields.endTime])).getTime()) && resetTime(new Date(+recurColl[recurColl.length - 1][this.fields.endTime])).getTime() >= resetTime(new Date(+currentData[this.fields.startTime])).getTime()) {\n            this.parent.quickPopup.openRecurrenceValidationAlert('sameDayAlert');\n            return true;\n          } else if (resetTime(new Date(+recurColl[recurColl.length - 1][this.fields.endTime])).getTime() < resetTime(new Date(+currentData[this.fields.startTime])).getTime()) {\n            this.parent.quickPopup.openRecurrenceValidationAlert('occurrenceAlert');\n            return true;\n          }\n        }\n\n        return false;\n      } else {\n        if (index === recurColl.length - 1) {\n          if (!(resetTime(new Date(+recurColl[index - 1][this.fields.endTime])).getTime() < resetTime(new Date(+currentData[this.fields.startTime])).getTime()) && resetTime(new Date(+recurColl[recurColl.length - 1 - index][this.fields.startTime])).getTime() <= resetTime(new Date(+currentData[this.fields.endTime])).getTime()) {\n            this.parent.quickPopup.openRecurrenceValidationAlert('sameDayAlert');\n            return true;\n          } else if (resetTime(new Date(+recurColl[recurColl.length - 1 - index][this.fields.endTime])).getTime() > resetTime(new Date(+currentData[this.fields.startTime])).getTime()) {\n            this.parent.quickPopup.openRecurrenceValidationAlert('occurrenceAlert');\n            return true;\n          }\n        } else if (!((resetTime(new Date(+recurColl[index - 1][this.fields.endTime])).getTime() < resetTime(new Date(+currentData[this.fields.startTime])).getTime() || resetTime(new Date(+recurColl[0][this.fields.startTime])).getTime() > resetTime(new Date(+currentData[this.fields.startTime])).getTime()) && (resetTime(new Date(+recurColl[index + 1][this.fields.startTime])).getTime() > resetTime(new Date(+currentData[this.fields.endTime])).getTime() || resetTime(new Date(+recurColl[recurColl.length - 1][this.fields.endTime])).getTime() < resetTime(new Date(+currentData[this.fields.startTime])).getTime()))) {\n          this.parent.quickPopup.openRecurrenceValidationAlert('sameDayAlert');\n          return true;\n        } else if (resetTime(new Date(+recurColl[index + 1][this.fields.endTime])).getTime() < resetTime(new Date(+currentData[this.fields.startTime])).getTime() || resetTime(new Date(+recurColl[index - 1][this.fields.startTime])).getTime() > resetTime(new Date(+currentData[this.fields.endTime])).getTime()) {\n          this.parent.quickPopup.openRecurrenceValidationAlert('occurrenceAlert');\n          return true;\n        }\n      }\n\n      return false;\n    }\n  }, {\n    key: \"resourceSaveEvent\",\n    value: function resourceSaveEvent(eventObj, action, currentAction) {\n      var _this48 = this;\n\n      var lastResourceData = this.parent.resourceBase.resourceCollection.slice(-1)[0];\n      var resourceData = eventObj[lastResourceData.field];\n      resourceData = resourceData instanceof Array ? resourceData : [resourceData];\n      var lastLevel = this.parent.resourceBase.lastResourceLevel;\n      var eventList = [];\n\n      var _loop7 = function _loop7(i) {\n        var events = extend({}, eventObj, null, true);\n        events[_this48.fields.id] = _this48.parent.eventBase.getEventMaxID();\n        var temp = [];\n\n        var addValues = function addValues() {\n          if (action === 'Save' && i === resourceData.length - 1) {\n            if (temp.length > 0) {\n              temp[0][_this48.fields.id] = eventObj[_this48.fields.id];\n\n              for (var k = 1; k < temp.length; k++) {\n                temp[k][_this48.fields.id] = _this48.parent.eventBase.getEventMaxID(i);\n                eventList.push(temp[k]);\n\n                _this48.parent.saveEvent(temp[0], currentAction);\n              }\n            } else {\n              events[_this48.fields.id] = eventObj[_this48.fields.id];\n\n              _this48.parent.saveEvent(events, currentAction);\n            }\n          } else {\n            if (temp.length > 0) {\n              for (var j = 0; j < temp.length; j++) {\n                temp[j][_this48.fields.id] = _this48.parent.eventBase.getEventMaxID(j);\n                eventList.push(temp[j]);\n              }\n            } else {\n              events[_this48.fields.id] = _this48.parent.eventBase.getEventMaxID(i);\n              eventList.push(events);\n            }\n          }\n        };\n\n        if (_this48.parent.activeViewOptions.group.byGroupID && !isNullOrUndefined(lastLevel)) {\n          var lastResource = lastResourceData.dataSource;\n          var resCol = _this48.parent.resourceCollection;\n          var index;\n\n          if (resCol.length > 1) {\n            index = findIndexInData(lastResource, lastResourceData.idField, resourceData[i], events, resCol);\n          } else {\n            index = findIndexInData(lastResource, lastResourceData.idField, resourceData[i]);\n          }\n\n          if (index < 0) {\n            return {\n              v: void 0\n            };\n          }\n\n          var groupId = lastResource[index][lastResourceData.groupIDField];\n          var filter = lastLevel.filter(function (obj) {\n            return obj.resourceData[lastResourceData.idField] === resourceData[i];\n          }).filter(function (obj) {\n            return obj.resourceData[lastResourceData.groupIDField] === groupId;\n          })[0];\n          var groupOrder = filter.groupOrder;\n\n          for (var _index4 = 0; _index4 < _this48.parent.resourceBase.resourceCollection.length; _index4++) {\n            var field = _this48.parent.resourceBase.resourceCollection[_index4].field;\n            events[field] = groupOrder[_index4] instanceof Array ? groupOrder[_index4][0] : groupOrder[_index4];\n          }\n\n          addValues();\n        } else {\n          for (var _index5 = 0; _index5 < _this48.parent.resourceBase.resourceCollection.length - 1; _index5++) {\n            var _field2 = _this48.parent.resourceBase.resourceCollection[_index5].field;\n\n            if (events[_field2] instanceof Array && events[_field2].length > 1) {\n              for (var k = 0; k < events[_field2].length; k++) {\n                var _event4 = extend({}, events, null, true);\n\n                _event4[_field2] = eventObj[_field2][k];\n                _event4[lastResourceData.field] = resourceData[i];\n                temp.push(_event4);\n              }\n            } else {\n              if (temp.length === 0) {\n                events[_field2] = eventObj[_field2] instanceof Array ? eventObj[_field2][0] : eventObj[_field2];\n                events[lastResourceData.field] = resourceData[i];\n              } else {\n                for (var l = 0; l < temp.length; l++) {\n                  temp[l][_field2] = eventObj[_field2] instanceof Array ? eventObj[_field2][0] : eventObj[_field2];\n                }\n              }\n            }\n          }\n\n          events[lastResourceData.field] = resourceData[i];\n          addValues();\n        }\n      };\n\n      for (var i = 0; i < resourceData.length; i++) {\n        var _ret = _loop7(i);\n\n        if (typeof _ret === \"object\") return _ret.v;\n      }\n\n      if (eventList.length > 0) {\n        var _iterator62 = _createForOfIteratorHelper(eventList),\n            _step62;\n\n        try {\n          for (_iterator62.s(); !(_step62 = _iterator62.n()).done;) {\n            var event = _step62.value;\n            event[this.fields.recurrenceException] = null;\n            event[this.fields.recurrenceID] = null;\n          }\n        } catch (err) {\n          _iterator62.e(err);\n        } finally {\n          _iterator62.f();\n        }\n\n        this.parent.addEvent(eventList);\n      }\n    }\n  }, {\n    key: \"getEventIdFromForm\",\n    value: function getEventIdFromForm() {\n      return this.element.querySelector('.' + FORM_CLASS).getAttribute('data-id');\n    }\n  }, {\n    key: \"getFormElements\",\n    value: function getFormElements(className) {\n      var elements = [];\n\n      if (className === EVENT_WINDOW_DIALOG_CLASS) {\n        elements = [].slice.call(this.element.querySelectorAll('.' + EVENT_FIELD$1));\n      } else {\n        elements = [].slice.call(this.parent.element.querySelectorAll('.' + className + ' .' + EVENT_FIELD$1));\n      }\n\n      return elements;\n    }\n  }, {\n    key: \"getValueFromElement\",\n    value: function getValueFromElement(element) {\n      var value;\n\n      if (element.classList.contains('e-datepicker')) {\n        value = element.ej2_instances[0].value;\n      } else if (element.classList.contains('e-datetimepicker')) {\n        value = element.ej2_instances[0].value;\n      } else if (element.classList.contains('e-dropdownlist')) {\n        value = element.ej2_instances[0].value;\n      } else if (element.classList.contains('e-multiselect')) {\n        value = element.ej2_instances[0].value;\n      } else if (element.classList.contains('e-checkbox')) {\n        value = element.ej2_instances[0].checked;\n      } else {\n        if (element.type === 'checkbox') {\n          value = element.checked;\n        } else {\n          value = SanitizeHtmlHelper.sanitize(element.value);\n        }\n      }\n\n      return value;\n    }\n  }, {\n    key: \"setValueToElement\",\n    value: function setValueToElement(element, value) {\n      if (element.classList.contains('e-datepicker')) {\n        var instance = element.ej2_instances[0];\n        instance.value = value;\n        instance.dataBind();\n      } else if (element.classList.contains('e-datetimepicker')) {\n        var _instance = element.ej2_instances[0];\n\n        if (_instance.element.classList.contains(EVENT_WINDOW_START_CLASS)) {\n          this.eventWindowTime.startTime = new Date('' + value);\n        } else {\n          this.eventWindowTime.endTime = new Date('' + value);\n        }\n\n        _instance.value = value;\n\n        _instance.dataBind();\n      } else if (element.classList.contains('e-dropdownlist')) {\n        var _instance2 = element.ej2_instances[0];\n        _instance2.value = value;\n\n        _instance2.dataBind();\n      } else if (element.classList.contains('e-multiselect')) {\n        var _instance3 = element.ej2_instances[0];\n        _instance3.value = [];\n        _instance3.value = value instanceof Array ? value : [value];\n\n        _instance3.dataBind();\n      } else if (element.classList.contains('e-checkbox')) {\n        var _instance4 = element.ej2_instances[0];\n        _instance4.checked = value;\n\n        _instance4.dataBind();\n      } else {\n        if (element.type !== 'checkbox') {\n          element.value = value || '';\n        } else {\n          element.checked = value;\n        }\n      }\n    }\n  }, {\n    key: \"setDefaultValueToElement\",\n    value: function setDefaultValueToElement(element) {\n      if (element.classList.contains('e-datepicker')) {\n        var instance = element.ej2_instances[0];\n        instance.value = this.parent.getCurrentTime();\n        instance.dataBind();\n      } else if (element.classList.contains('e-datetimepicker')) {\n        var _instance5 = element.ej2_instances[0];\n        var dateValue = this.parent.getCurrentTime();\n        this.eventWindowTime = {\n          startTime: dateValue,\n          endTime: dateValue\n        };\n        _instance5.value = dateValue;\n\n        _instance5.dataBind();\n      } else if (element.classList.contains('e-dropdownlist')) {\n        var _instance6 = element.ej2_instances[0];\n        _instance6.value = null;\n\n        _instance6.dataBind();\n      } else if (element.classList.contains('e-multiselect')) {\n        var _instance7 = element.ej2_instances[0];\n        _instance7.value = [];\n\n        _instance7.dataBind();\n      } else if (element.classList.contains('e-checkbox')) {\n        var _instance8 = element.ej2_instances[0];\n        _instance8.checked = false;\n\n        _instance8.dataBind();\n      } else {\n        if (element.type === 'checkbox') {\n          element.checked = false;\n        } else {\n          element.value = '';\n        }\n      }\n    }\n  }, {\n    key: \"getInstance\",\n    value: function getInstance(className) {\n      var element = this.element.querySelector('.' + className);\n      return element ? element.ej2_instances[0] : null;\n    }\n  }, {\n    key: \"eventDelete\",\n    value: function eventDelete(event) {\n      if (this.isEnterKey) {\n        this.isEnterKey = false;\n        return;\n      }\n\n      switch (this.parent.currentAction) {\n        case 'EditOccurrence':\n          if (!isNullOrUndefined(this.parent.activeEventData.event[this.parent.eventFields.recurrenceRule])) {\n            this.parent.currentAction = 'DeleteOccurrence';\n          } else {\n            this.parent.currentAction = 'Delete';\n          }\n\n          break;\n\n        case 'EditSeries':\n          this.parent.currentAction = 'DeleteSeries';\n          break;\n\n        case 'Save':\n          this.parent.currentAction = 'Delete';\n          break;\n\n        case 'EditFollowingEvents':\n          if (!isNullOrUndefined(this.parent.activeEventData.event[this.parent.eventFields.recurrenceRule])) {\n            this.parent.currentAction = 'DeleteFollowingEvents';\n          }\n\n          break;\n      }\n\n      this.dialogEvent = event;\n      this.isCrudAction = false;\n      this.dialogObject.hide();\n      this.parent.quickPopup.openDeleteAlert();\n    }\n  }, {\n    key: \"getRecurrenceEditorInstance\",\n    value: function getRecurrenceEditorInstance() {\n      if (this.parent.isAdaptive && !this.repeatDialogObject) {\n        this.renderRepeatDialog();\n      }\n\n      return this.recurrenceEditor;\n    }\n  }, {\n    key: \"destroyComponents\",\n    value: function destroyComponents() {\n      var formElements = this.getFormElements(EVENT_WINDOW_DIALOG_CLASS);\n\n      var _iterator63 = _createForOfIteratorHelper(formElements),\n          _step63;\n\n      try {\n        for (_iterator63.s(); !(_step63 = _iterator63.n()).done;) {\n          var element = _step63.value;\n          var instance = void 0;\n\n          if (element.classList.contains('e-datetimepicker')) {\n            instance = element.ej2_instances;\n          } else if (element.classList.contains('e-datepicker')) {\n            instance = element.ej2_instances;\n          } else if (element.classList.contains('e-checkbox')) {\n            instance = element.ej2_instances;\n          } else if (element.classList.contains('e-dropdownlist')) {\n            instance = element.ej2_instances;\n          } else if (element.classList.contains('e-multiselect')) {\n            instance = element.ej2_instances;\n          }\n\n          if (instance && instance[0]) {\n            instance[0].destroy();\n          }\n        }\n      } catch (err) {\n        _iterator63.e(err);\n      } finally {\n        _iterator63.f();\n      }\n\n      if (this.buttonObj) {\n        this.buttonObj.destroy();\n      }\n    }\n  }, {\n    key: \"destroy\",\n    value: function destroy(isIgnore) {\n      if (this.parent && !this.parent.isDestroyed) {\n        this.parent.resetTemplates(['editorTemplate']);\n      }\n\n      this.destroyComponents();\n\n      if (this.recurrenceEditor) {\n        this.recurrenceEditor.destroy();\n        this.recurrenceEditor = null;\n      }\n\n      if (this.fieldValidator) {\n        this.fieldValidator.destroy();\n        this.fieldValidator = null;\n      }\n\n      if (this.repeatDialogObject) {\n        this.repeatDialogObject.destroy();\n        this.repeatDialogObject = null;\n      }\n\n      if (this.dialogObject) {\n        if (this.dialogObject.element) {\n          EventHandler.remove(this.dialogObject.element, 'keydown', this.preventEventSave);\n        }\n\n        this.dialogObject.destroy();\n        this.dialogObject = null;\n      }\n\n      if (this.element) {\n        remove(this.element);\n        this.element = null;\n      }\n\n      if (!isIgnore) {\n        this.l10n = null;\n        this.parent = null;\n        this.fields = null;\n        this.buttonObj = null;\n        this.repeatStatus = null;\n        this.eventWindowTime = null;\n      }\n    }\n  }]);\n\n  return EventWindow;\n}();\n/**\n * Virtual Scroll\n */\n\n\nvar VirtualScroll = /*#__PURE__*/function () {\n  function VirtualScroll(parent) {\n    _classCallCheck(this, VirtualScroll);\n\n    this.translateY = 0;\n    this.itemSize = 60;\n    this.bufferCount = 3;\n    this.renderedLength = 0;\n    this.averageRowHeight = 0;\n    this.isScrollHeightNull = true;\n    this.parent = parent;\n    this.addEventListener();\n  }\n\n  _createClass(VirtualScroll, [{\n    key: \"addEventListener\",\n    value: function addEventListener() {\n      if (!this.parent || this.parent && this.parent.isDestroyed) {\n        return;\n      }\n\n      this.parent.on(virtualScroll, this.virtualScrolling, this);\n    }\n  }, {\n    key: \"removeEventListener\",\n    value: function removeEventListener() {\n      if (!this.parent || this.parent && this.parent.isDestroyed) {\n        return;\n      }\n\n      this.parent.off(virtualScroll, this.virtualScrolling);\n    }\n  }, {\n    key: \"getRenderedCount\",\n    value: function getRenderedCount() {\n      this.setItemSize();\n      return Math.ceil(this.parent.element.clientHeight / this.itemSize) + this.bufferCount;\n    }\n  }, {\n    key: \"setTranslateValue\",\n    value: function setTranslateValue() {\n      var resWrap = this.parent.element.querySelector('.' + RESOURCE_COLUMN_WRAP_CLASS);\n      var conWrap = this.parent.element.querySelector('.' + CONTENT_WRAP_CLASS);\n      var eventWrap = this.parent.element.querySelector('.' + EVENT_TABLE_CLASS);\n      var timeIndicator = this.parent.element.querySelector('.' + CURRENT_TIMELINE_CLASS);\n      this.renderVirtualTrackHeight(conWrap, resWrap);\n      this.setTranslate(resWrap, conWrap, eventWrap, timeIndicator);\n    }\n  }, {\n    key: \"renderVirtualTrackHeight\",\n    value: function renderVirtualTrackHeight(contentWrap, resourceWrap) {\n      this.parent.resourceBase.setExpandedResources();\n\n      if (this.isScrollHeightNull) {\n        var wrap = createElement('div', {\n          className: VIRTUAL_TRACK_CLASS\n        });\n        var resWrap = [].slice.call(resourceWrap.querySelectorAll('table td'));\n        var startIndex = parseInt(resWrap[0].getAttribute('data-group-index'), 10);\n        var endIndex = parseInt(resWrap[resWrap.length - 1].getAttribute('data-group-index'), 10);\n        this.parent.resourceBase.renderedResources = this.parent.resourceBase.expandedResources.filter(function (resource) {\n          return resource.groupIndex >= startIndex && resource.groupIndex <= endIndex;\n        });\n        this.setItemSize();\n        wrap.style.height = this.parent.resourceBase.expandedResources.length * this.itemSize + 'px';\n        this.isScrollHeightNull = false;\n        var virtual = this.parent.element.querySelector('.' + VIRTUAL_TRACK_CLASS);\n\n        if (!isNullOrUndefined(virtual)) {\n          remove(virtual);\n        }\n\n        contentWrap.appendChild(wrap);\n      }\n    }\n  }, {\n    key: \"renderVirtualTrack\",\n    value: function renderVirtualTrack(contentWrap) {\n      var wrap = createElement('div', {\n        className: VIRTUAL_TRACK_CLASS\n      });\n      wrap.style.height = this.parent.resourceBase.expandedResources.length * this.itemSize + 'px';\n      contentWrap.appendChild(wrap);\n    }\n  }, {\n    key: \"updateVirtualScrollHeight\",\n    value: function updateVirtualScrollHeight() {\n      var virtual = this.parent.element.querySelector('.' + VIRTUAL_TRACK_CLASS);\n      var lastResourceIndex = this.parent.resourceBase.expandedResources[this.parent.resourceBase.expandedResources.length - 1].groupIndex;\n      var lastRenderIndex = this.parent.resourceBase.renderedResources[this.parent.resourceBase.renderedResources.length - 1].groupIndex;\n\n      if (lastRenderIndex !== lastResourceIndex) {\n        var conTable = this.parent.element.querySelector('.' + CONTENT_TABLE_CLASS);\n        this.renderedLength = conTable.querySelector('tbody').children.length;\n        virtual.style.height = conTable.offsetHeight + (this.parent.resourceBase.expandedResources.length - this.renderedLength) * conTable.offsetHeight / this.renderedLength + 'px';\n      } else {\n        virtual.style.height = '';\n      }\n\n      this.averageRowHeight = virtual.offsetHeight / this.parent.resourceBase.expandedResources.length;\n    }\n  }, {\n    key: \"updateVirtualTrackHeight\",\n    value: function updateVirtualTrackHeight(wrap) {\n      var resourceCount = this.parent.resourceBase.renderedResources.length;\n\n      if (resourceCount !== this.getRenderedCount()) {\n        wrap.style.height = this.parent.element.querySelector('.e-content-wrap').clientHeight + 'px';\n        var resWrap = this.parent.element.querySelector('.' + RESOURCE_COLUMN_WRAP_CLASS);\n        var conWrap = this.parent.element.querySelector('.' + CONTENT_WRAP_CLASS);\n        var eventWrap = this.parent.element.querySelector('.' + EVENT_TABLE_CLASS);\n        this.translateY = 0;\n        this.setTranslate(resWrap, conWrap, eventWrap);\n      } else {\n        var lastRenderIndex = this.parent.resourceBase.renderedResources[resourceCount - 1].groupIndex;\n        var lastCollIndex = this.parent.resourceBase.expandedResources[this.parent.resourceBase.expandedResources.length - 1].groupIndex;\n        var renderedResCount = resourceCount + (lastCollIndex - lastRenderIndex);\n        renderedResCount = renderedResCount > this.parent.resourceBase.expandedResources.length ? this.parent.resourceBase.expandedResources.length : renderedResCount;\n        wrap.style.height = renderedResCount * this.itemSize + 'px';\n      }\n    }\n  }, {\n    key: \"setItemSize\",\n    value: function setItemSize() {\n      this.itemSize = getElementHeightFromClass(this.parent.activeView.element, WORK_CELLS_CLASS) || this.itemSize;\n    }\n  }, {\n    key: \"renderEvents\",\n    value: function renderEvents() {\n      this.setTabIndex();\n      this.parent.refreshEvents(false);\n      this.parent.notify(contentReady, {});\n      this.parent.hideSpinner();\n    }\n  }, {\n    key: \"virtualScrolling\",\n    value: function virtualScrolling() {\n      var _this49 = this;\n\n      if (this.parent.quickPopup) {\n        this.parent.quickPopup.quickPopupHide();\n        this.parent.quickPopup.morePopup.hide();\n      }\n\n      var resWrap = this.parent.element.querySelector('.' + RESOURCE_COLUMN_WRAP_CLASS);\n      var conWrap = this.parent.element.querySelector('.' + CONTENT_WRAP_CLASS);\n      var eventWrap = this.parent.element.querySelector('.' + EVENT_TABLE_CLASS);\n      var timeIndicator = this.parent.element.querySelector('.' + CURRENT_TIMELINE_CLASS);\n      var conTable = this.parent.element.querySelector('.' + CONTENT_TABLE_CLASS);\n      this.renderedLength = resWrap.querySelector('tbody').children.length;\n      var firstTDIndex = parseInt(resWrap.querySelector('tbody td').getAttribute('data-group-index'), 10);\n      var scrollHeight = this.parent.rowAutoHeight ? conTable.offsetHeight - conWrap.offsetHeight : this.bufferCount * this.itemSize;\n      addClass([conWrap], 'e-transition');\n      var resCollection = [];\n\n      if (conWrap.scrollTop - this.translateY < 0) {\n        resCollection = this.upScroll(conWrap, firstTDIndex);\n      } else if (conWrap.scrollTop - this.translateY > scrollHeight) {\n        resCollection = this.downScroll(conWrap, firstTDIndex);\n      }\n\n      if (!isNullOrUndefined(resCollection) && resCollection.length > 0) {\n        this.parent.showSpinner();\n        var selectedEle = this.parent.getSelectedElements();\n        this.focusedEle = selectedEle[selectedEle.length - 1] || this.focusedEle;\n        this.updateContent(resWrap, conWrap, eventWrap, resCollection);\n        this.setTranslate(resWrap, conWrap, eventWrap, timeIndicator);\n\n        if (this.parent.dragAndDropModule && this.parent.dragAndDropModule.actionObj.action === 'drag') {\n          this.parent.dragAndDropModule.navigationWrapper();\n        }\n\n        window.clearTimeout(this.timeValue);\n        this.timeValue = window.setTimeout(function () {\n          _this49.renderEvents();\n        }, 250);\n      }\n    }\n  }, {\n    key: \"upScroll\",\n    value: function upScroll(conWrap, firstTDIndex) {\n      var index = 0;\n      index = ~~(conWrap.scrollTop / this.itemSize) + Math.ceil(conWrap.clientHeight / this.itemSize) - this.renderedLength;\n\n      if (this.parent.rowAutoHeight) {\n        index = index > firstTDIndex ? firstTDIndex - this.bufferCount : index;\n      }\n\n      index = index > 0 ? index : 0;\n      var prevSetCollection = this.getBufferCollection(index, index + this.renderedLength);\n      this.parent.resourceBase.renderedResources = prevSetCollection;\n\n      if (firstTDIndex === 0) {\n        this.translateY = conWrap.scrollTop;\n      } else {\n        var height = this.parent.rowAutoHeight ? this.averageRowHeight : this.itemSize;\n        height = height > 0 ? height : this.itemSize;\n        this.translateY = conWrap.scrollTop - this.bufferCount * height > 0 ? conWrap.scrollTop - this.bufferCount * height : 0;\n      }\n\n      return prevSetCollection;\n    }\n  }, {\n    key: \"downScroll\",\n    value: function downScroll(conWrap, firstTDIndex) {\n      var lastResource = this.parent.resourceBase.renderedResources[this.parent.resourceBase.renderedResources.length - 1].groupIndex;\n      var lastResourceIndex = this.parent.resourceBase.expandedResources[this.parent.resourceBase.expandedResources.length - 1].groupIndex;\n\n      if (lastResource === lastResourceIndex) {\n        return null;\n      }\n\n      var nextSetResIndex = 0;\n      nextSetResIndex = ~~(conWrap.scrollTop / this.itemSize);\n\n      if (this.parent.rowAutoHeight) {\n        nextSetResIndex = ~~((conWrap.scrollTop - this.translateY) / this.averageRowHeight) + firstTDIndex;\n        nextSetResIndex = nextSetResIndex > firstTDIndex + this.bufferCount ? nextSetResIndex : firstTDIndex + this.bufferCount;\n      }\n\n      var lastIndex = nextSetResIndex + this.renderedLength;\n      lastIndex = lastIndex > this.parent.resourceBase.expandedResources.length ? nextSetResIndex + (this.parent.resourceBase.expandedResources.length - nextSetResIndex) : lastIndex;\n      var nextSetCollection = this.getBufferCollection(lastIndex - this.renderedLength, lastIndex);\n      this.translateY = conWrap.scrollTop;\n      return nextSetCollection;\n    }\n  }, {\n    key: \"updateContent\",\n    value: function updateContent(resWrap, conWrap, eventWrap, resCollection) {\n      var renderedLength = resWrap.querySelector('tbody').children.length;\n\n      if (document.activeElement && document.activeElement.classList.contains(RESOURCE_CELLS_CLASS)) {\n        this.isResourceCell = true;\n        this.parent.element.focus();\n      }\n\n      for (var i = 0; i < renderedLength; i++) {\n        remove(resWrap.querySelector('tbody tr'));\n        remove(conWrap.querySelector('tbody tr'));\n        remove(eventWrap.querySelector('div'));\n      }\n\n      this.parent.resourceBase.renderedResources = resCollection;\n      var resourceRows = this.parent.resourceBase.getContentRows(resCollection, true);\n      var contentRows = this.parent.activeView.getContentRows();\n      var eventRows = this.parent.activeView.getEventRows(resCollection.length);\n      append(resourceRows, resWrap.querySelector('tbody'));\n      append(contentRows, conWrap.querySelector('tbody'));\n      append(eventRows, eventWrap);\n    }\n  }, {\n    key: \"getBufferCollection\",\n    value: function getBufferCollection(startIndex, endIndex) {\n      return this.parent.resourceBase.expandedResources.slice(startIndex, endIndex);\n    }\n  }, {\n    key: \"setTranslate\",\n    value: function setTranslate(resWrap, conWrap, eventWrap, timeIndicator) {\n      setStyleAttribute(resWrap.querySelector('table'), {\n        transform: \"translateY(\".concat(this.translateY, \"px)\")\n      });\n      setStyleAttribute(conWrap.querySelector('table'), {\n        transform: \"translateY(\".concat(this.translateY, \"px)\")\n      });\n      setStyleAttribute(eventWrap, {\n        transform: \"translateY(\".concat(this.translateY, \"px)\")\n      });\n\n      if (!isNullOrUndefined(timeIndicator)) {\n        setStyleAttribute(timeIndicator, {\n          transform: \"translateY(\".concat(this.translateY, \"px)\")\n        });\n      }\n    }\n  }, {\n    key: \"updateFocusedWorkCell\",\n    value: function updateFocusedWorkCell() {\n      if (this.focusedEle) {\n        var date = parseInt(this.focusedEle.getAttribute('data-date'), 10);\n        var groupIndex = parseInt(this.focusedEle.getAttribute('data-group-index'), 10);\n        var ele = this.parent.element.querySelector(\".\".concat(WORK_CELLS_CLASS, \"[data-date=\\\"\").concat(date, \"\\\"][data-group-index=\\\"\").concat(groupIndex, \"\\\"]\"));\n\n        if (ele) {\n          this.parent.addSelectedClass([ele], ele, true);\n        }\n\n        this.focusedEle = null;\n      }\n    }\n  }, {\n    key: \"setTabIndex\",\n    value: function setTabIndex() {\n      var resColWrap = this.parent.element.querySelector('.' + RESOURCE_COLUMN_WRAP_CLASS);\n      var resCells = [].slice.call(this.parent.element.querySelectorAll('.' + RESOURCE_CELLS_CLASS));\n\n      if (resCells && resColWrap) {\n        resCells.forEach(function (element) {\n          if (element.getBoundingClientRect().top >= resColWrap.getBoundingClientRect().top) {\n            element.setAttribute('tabindex', '0');\n          }\n        });\n      }\n\n      var focusResCell = this.parent.element.querySelector(\".\".concat(RESOURCE_CELLS_CLASS, \"[tabindex=\\\"\", 0, \"\\\"]\"));\n\n      if (this.isResourceCell && focusResCell) {\n        focusResCell.focus();\n        this.isResourceCell = false;\n      }\n    }\n  }, {\n    key: \"destroy\",\n    value: function destroy() {\n      this.removeEventListener();\n    }\n  }]);\n\n  return VirtualScroll;\n}();\n/**\n * Schedule DOM rendering\n */\n\n\nvar Render = /*#__PURE__*/function () {\n  function Render(parent) {\n    _classCallCheck(this, Render);\n\n    this.parent = parent;\n  }\n\n  _createClass(Render, [{\n    key: \"render\",\n    value: function render(viewName) {\n      var isDataRefresh = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : true;\n      this.initializeLayout(viewName);\n\n      if (this.parent.activeView && isDataRefresh) {\n        this.parent.crudModule.refreshDataManager();\n      }\n    }\n  }, {\n    key: \"initializeLayout\",\n    value: function initializeLayout(viewName) {\n      if (this.parent.activeView) {\n        this.parent.resetTemplates();\n        this.parent.activeView.removeEventListener();\n        this.parent.activeView.destroy();\n      }\n\n      switch (viewName) {\n        case 'Day':\n          this.parent.activeView = this.parent.dayModule;\n          break;\n\n        case 'Week':\n          this.parent.activeView = this.parent.weekModule;\n          break;\n\n        case 'WorkWeek':\n          this.parent.activeView = this.parent.workWeekModule;\n          break;\n\n        case 'Month':\n          this.parent.activeView = this.parent.monthModule;\n          break;\n\n        case 'Year':\n          this.parent.activeView = this.parent.yearModule;\n          break;\n\n        case 'Agenda':\n          this.parent.activeView = this.parent.agendaModule;\n          break;\n\n        case 'MonthAgenda':\n          this.parent.activeView = this.parent.monthAgendaModule;\n          break;\n\n        case 'TimelineDay':\n          this.parent.activeView = this.parent.timelineViewsModule;\n          this.parent.activeView.viewClass = 'e-timeline-day-view';\n          break;\n\n        case 'TimelineWorkWeek':\n          this.parent.activeView = this.parent.timelineViewsModule;\n          this.parent.activeView.viewClass = 'e-timeline-work-week-view';\n          break;\n\n        case 'TimelineWeek':\n          this.parent.activeView = this.parent.timelineViewsModule;\n          this.parent.activeView.viewClass = 'e-timeline-week-view';\n          break;\n\n        case 'TimelineMonth':\n          this.parent.activeView = this.parent.timelineMonthModule;\n          break;\n\n        case 'TimelineYear':\n          this.parent.activeView = this.parent.timelineYearModule;\n          break;\n      }\n\n      if (isNullOrUndefined(this.parent.activeView)) {\n        var firstView = this.parent.viewCollections[0].option;\n\n        if (firstView) {\n          this.parent.setProperties({\n            currentView: firstView\n          }, true);\n\n          if (this.parent.headerModule) {\n            this.parent.headerModule.updateActiveView();\n            this.parent.headerModule.setCalendarView();\n          }\n\n          return this.initializeLayout(firstView);\n        }\n\n        throw Error('Inject required modules');\n      }\n\n      this.parent.activeView.viewIndex = this.parent.viewIndex;\n      this.updateLabelText(viewName);\n      this.parent.activeView.addEventListener();\n      this.parent.activeView.getRenderDates();\n      this.parent.uiStateValues.isGroupAdaptive = this.parent.activeViewOptions.group.resources.length > 0 && (this.parent.enableAdaptiveUI && !this.parent.isAdaptive || this.parent.isAdaptive && this.parent.activeViewOptions.group.enableCompactView);\n\n      if (this.parent.virtualScrollModule) {\n        this.parent.virtualScrollModule.destroy();\n        this.parent.virtualScrollModule = null;\n      }\n\n      if (this.parent.currentView.indexOf('Timeline') !== -1 && this.parent.currentView.indexOf('Year') === -1 && this.parent.activeViewOptions.allowVirtualScrolling && this.parent.activeViewOptions.group.resources.length > 0 && !this.parent.uiStateValues.isGroupAdaptive) {\n        this.parent.virtualScrollModule = new VirtualScroll(this.parent);\n        this.parent.uiStateValues.top = 0;\n      }\n\n      this.updateHeader();\n      this.parent.activeView.renderLayout(CURRENT_PANEL_CLASS);\n      this.parent.renderTemplates();\n\n      if (this.parent.eventTooltip) {\n        this.parent.eventTooltip.destroy();\n        this.parent.eventTooltip = null;\n      }\n\n      if (this.parent.eventSettings.enableTooltip || this.parent.activeViewOptions.group.resources.length > 0 && this.parent.activeViewOptions.group.headerTooltipTemplate) {\n        this.parent.eventTooltip = new EventTooltip(this.parent);\n      }\n    }\n  }, {\n    key: \"updateHeader\",\n    value: function updateHeader() {\n      if (this.parent.headerModule) {\n        this.parent.headerModule.setDayOfWeek(this.parent.activeViewOptions.firstDayOfWeek);\n\n        if (this.parent.activeViewOptions.readonly) {\n          addClass([this.parent.element], READ_ONLY);\n        } else if (this.parent.element.classList.contains(READ_ONLY)) {\n          removeClass([this.parent.element], READ_ONLY);\n        }\n\n        this.parent.headerModule.updateDateRange(this.parent.activeView.getDateRangeText());\n        this.parent.headerModule.updateHeaderItems('remove');\n      }\n    }\n  }, {\n    key: \"updateLabelText\",\n    value: function updateLabelText(view) {\n      var content = this.parent.activeView.getLabelText(view);\n      this.parent.element.setAttribute('role', 'main');\n      this.parent.element.setAttribute('aria-label', content);\n    }\n  }]);\n\n  return Render;\n}();\n\nvar __decorate$2 = undefined && undefined.__decorate || function (decorators, target, key, desc) {\n  var c = arguments.length,\n      r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc,\n      d;\n  if (typeof Reflect === \"object\" && typeof Reflect.decorate === \"function\") r = Reflect.decorate(decorators, target, key, desc);else for (var i = decorators.length - 1; i >= 0; i--) {\n    if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;\n  }\n  return c > 3 && r && Object.defineProperty(target, key, r), r;\n};\n/**\n * A class that represents the configuration of working hours related options of scheduler.\n */\n\n\nvar WorkHours = /*#__PURE__*/function (_ChildProperty) {\n  _inherits(WorkHours, _ChildProperty);\n\n  var _super5 = _createSuper(WorkHours);\n\n  function WorkHours() {\n    _classCallCheck(this, WorkHours);\n\n    return _super5.apply(this, arguments);\n  }\n\n  return WorkHours;\n}(ChildProperty);\n\n__decorate$2([Property(true)], WorkHours.prototype, \"highlight\", void 0);\n\n__decorate$2([Property('09:00')], WorkHours.prototype, \"start\", void 0);\n\n__decorate$2([Property('18:00')], WorkHours.prototype, \"end\", void 0);\n\nvar __decorate$3 = undefined && undefined.__decorate || function (decorators, target, key, desc) {\n  var c = arguments.length,\n      r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc,\n      d;\n  if (typeof Reflect === \"object\" && typeof Reflect.decorate === \"function\") r = Reflect.decorate(decorators, target, key, desc);else for (var i = decorators.length - 1; i >= 0; i--) {\n    if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;\n  }\n  return c > 3 && r && Object.defineProperty(target, key, r), r;\n};\n/**\n * A class that represents the configuration of options related to timescale on scheduler.\n */\n\n\nvar TimeScale = /*#__PURE__*/function (_ChildProperty2) {\n  _inherits(TimeScale, _ChildProperty2);\n\n  var _super6 = _createSuper(TimeScale);\n\n  function TimeScale() {\n    _classCallCheck(this, TimeScale);\n\n    return _super6.apply(this, arguments);\n  }\n\n  return TimeScale;\n}(ChildProperty);\n\n__decorate$3([Property(true)], TimeScale.prototype, \"enable\", void 0);\n\n__decorate$3([Property(60)], TimeScale.prototype, \"interval\", void 0);\n\n__decorate$3([Property(2)], TimeScale.prototype, \"slotCount\", void 0);\n\n__decorate$3([Property()], TimeScale.prototype, \"minorSlotTemplate\", void 0);\n\n__decorate$3([Property()], TimeScale.prototype, \"majorSlotTemplate\", void 0);\n\nvar __decorate$4 = undefined && undefined.__decorate || function (decorators, target, key, desc) {\n  var c = arguments.length,\n      r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc,\n      d;\n  if (typeof Reflect === \"object\" && typeof Reflect.decorate === \"function\") r = Reflect.decorate(decorators, target, key, desc);else for (var i = decorators.length - 1; i >= 0; i--) {\n    if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;\n  }\n  return c > 3 && r && Object.defineProperty(target, key, r), r;\n};\n/**\n * A class that defines the template options available to customize the quick popup of scheduler.\n */\n\n\nvar QuickInfoTemplates = /*#__PURE__*/function (_ChildProperty3) {\n  _inherits(QuickInfoTemplates, _ChildProperty3);\n\n  var _super7 = _createSuper(QuickInfoTemplates);\n\n  function QuickInfoTemplates() {\n    _classCallCheck(this, QuickInfoTemplates);\n\n    return _super7.apply(this, arguments);\n  }\n\n  return QuickInfoTemplates;\n}(ChildProperty);\n\n__decorate$4([Property('Both')], QuickInfoTemplates.prototype, \"templateType\", void 0);\n\n__decorate$4([Property()], QuickInfoTemplates.prototype, \"header\", void 0);\n\n__decorate$4([Property()], QuickInfoTemplates.prototype, \"content\", void 0);\n\n__decorate$4([Property()], QuickInfoTemplates.prototype, \"footer\", void 0);\n\nvar __decorate$5 = undefined && undefined.__decorate || function (decorators, target, key, desc) {\n  var c = arguments.length,\n      r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc,\n      d;\n  if (typeof Reflect === \"object\" && typeof Reflect.decorate === \"function\") r = Reflect.decorate(decorators, target, key, desc);else for (var i = decorators.length - 1; i >= 0; i--) {\n    if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;\n  }\n  return c > 3 && r && Object.defineProperty(target, key, r), r;\n};\n/**\n * A class that represents the header rows related configurations on timeline views.\n */\n\n\nvar HeaderRows = /*#__PURE__*/function (_ChildProperty4) {\n  _inherits(HeaderRows, _ChildProperty4);\n\n  var _super8 = _createSuper(HeaderRows);\n\n  function HeaderRows() {\n    _classCallCheck(this, HeaderRows);\n\n    return _super8.apply(this, arguments);\n  }\n\n  return HeaderRows;\n}(ChildProperty);\n\n__decorate$5([Property()], HeaderRows.prototype, \"option\", void 0);\n\n__decorate$5([Property()], HeaderRows.prototype, \"template\", void 0);\n/* eslint-disable @typescript-eslint/no-explicit-any */\n\n/* eslint-disable max-len */\n\n/**\n * Schedule CRUD operations\n */\n\n\nvar Crud = /*#__PURE__*/function () {\n  function Crud(parent) {\n    _classCallCheck(this, Crud);\n\n    this.parent = parent;\n    this.crudObj = {\n      sourceEvent: null,\n      targetEvent: null,\n      isCrudAction: false\n    };\n  }\n\n  _createClass(Crud, [{\n    key: \"getQuery\",\n    value: function getQuery() {\n      var start = this.parent.activeView.startDate();\n      var end = this.parent.activeView.endDate();\n      return this.parent.dataModule.generateQuery(start, end);\n    }\n  }, {\n    key: \"getTable\",\n    value: function getTable() {\n      if (this.parent.eventSettings.query) {\n        var query = this.parent.eventSettings.query.clone();\n        return query.fromTable;\n      }\n\n      return null;\n    }\n  }, {\n    key: \"refreshDataManager\",\n    value: function refreshDataManager() {\n      var _this50 = this;\n\n      if (!this.parent.activeView) {\n        return;\n      }\n\n      var start = this.parent.activeView.startDate();\n      var end = this.parent.activeView.endDate();\n      var dataManager = this.parent.dataModule.getData(this.parent.dataModule.generateQuery(start, end));\n      dataManager.then(function (e) {\n        return _this50.dataManagerSuccess(e);\n      }).catch(function (e) {\n        return _this50.dataManagerFailure(e);\n      });\n    }\n  }, {\n    key: \"dataManagerSuccess\",\n    value: function dataManagerSuccess(e) {\n      var _this51 = this;\n\n      if (!this.parent || this.parent && this.parent.isDestroyed) {\n        return;\n      }\n\n      this.parent.trigger(dataBinding, e, function (args) {\n        var resultData = extend([], args.result, null, true);\n        _this51.parent.eventsData = resultData.filter(function (data) {\n          return !data[_this51.parent.eventFields.isBlock];\n        });\n        _this51.parent.blockData = resultData.filter(function (data) {\n          return data[_this51.parent.eventFields.isBlock];\n        });\n\n        _this51.parent.refreshEvents(false);\n\n        if (_this51.parent.dragAndDropModule && _this51.parent.dragAndDropModule.actionObj.action === 'drag') {\n          _this51.parent.dragAndDropModule.navigationWrapper();\n        }\n\n        _this51.parent.trigger(dataBound, null, function () {\n          _this51.parent.hideSpinner();\n\n          if (_this51.parent.isPrinting) {\n            _this51.parent.notify(print$1, {});\n          }\n        });\n      });\n    }\n  }, {\n    key: \"dataManagerFailure\",\n    value: function dataManagerFailure(e) {\n      var _this52 = this;\n\n      if (!this.parent || this.parent && this.parent.isDestroyed) {\n        return;\n      }\n\n      this.parent.trigger(actionFailure, {\n        error: e\n      }, function () {\n        return _this52.parent.hideSpinner();\n      });\n    }\n  }, {\n    key: \"refreshData\",\n    value: function refreshData(args) {\n      var _this53 = this;\n\n      var actionArgs = {\n        requestType: args.requestType,\n        cancel: false,\n        data: args.data,\n        addedRecords: args.editParams.addedRecords,\n        changedRecords: args.editParams.changedRecords,\n        deletedRecords: args.editParams.deletedRecords\n      };\n\n      if (this.parent.dragAndDropModule && this.parent.dragAndDropModule.actionObj && this.parent.dragAndDropModule.actionObj.element) {\n        this.parent.dragAndDropModule.actionObj.element.style.display = 'none';\n      }\n\n      if (this.parent.resizeModule && this.parent.resizeModule.actionObj && this.parent.resizeModule.actionObj.element) {\n        this.parent.resizeModule.actionObj.element.style.display = 'none';\n      }\n\n      if (this.parent.activeViewOptions.group.resources.length > 0 && !this.parent.activeViewOptions.group.allowGroupEdit && !this.parent.rowAutoHeight && !this.parent.virtualScrollModule && this.parent.activeViewOptions.group.byGroupID) {\n        if (args.requestType === 'eventCreated' || args.requestType === 'eventRemoved') {\n          this.crudObj.isCrudAction = true;\n          this.crudObj.sourceEvent = [];\n          var crudData = args.data instanceof Array ? args.data.length === 0 && args.requestType === 'eventRemoved' ? args.editParams.deletedRecords : args.data : (typeof args.data === 'string' || typeof args.data === 'number') && args.requestType === 'eventRemoved' ? args.editParams.deletedRecords : [args.data];\n\n          var _iterator64 = _createForOfIteratorHelper(crudData),\n              _step64;\n\n          try {\n            var _loop8 = function _loop8() {\n              var data = _step64.value;\n              _this53.crudObj.isCrudAction = !(args.requestType === 'eventRemoved' && !isNullOrUndefined(data.parent));\n\n              var groupIndex = _this53.parent.eventBase.getGroupIndexFromEvent(data);\n\n              if (groupIndex > -1 && _this53.parent.crudModule.crudObj.sourceEvent.filter(function (tdData) {\n                return tdData.groupIndex === groupIndex;\n              }).length === 0 && _this53.crudObj.isCrudAction) {\n                _this53.crudObj.sourceEvent.push(_this53.parent.resourceBase.lastResourceLevel[groupIndex]);\n              }\n            };\n\n            for (_iterator64.s(); !(_step64 = _iterator64.n()).done;) {\n              _loop8();\n            }\n          } catch (err) {\n            _iterator64.e(err);\n          } finally {\n            _iterator64.f();\n          }\n\n          this.crudObj.targetEvent = this.crudObj.sourceEvent;\n        }\n      }\n\n      if (this.parent.dataModule.dataManager.dataSource.offline) {\n        this.parent.trigger(actionComplete, actionArgs, function (offlineArgs) {\n          if (!offlineArgs.cancel) {\n            _this53.refreshDataManager();\n          }\n        });\n      } else {\n        args.promise.then(function () {\n          if (!_this53.parent || _this53.parent && _this53.parent.isDestroyed) {\n            return;\n          }\n\n          _this53.parent.trigger(actionComplete, actionArgs, function (onlineArgs) {\n            if (!onlineArgs.cancel) {\n              _this53.refreshDataManager();\n            }\n          });\n        }).catch(function (e) {\n          if (!_this53.parent || _this53.parent && _this53.parent.isDestroyed) {\n            return;\n          }\n\n          _this53.parent.trigger(actionFailure, {\n            error: e\n          });\n        });\n      }\n    }\n  }, {\n    key: \"addEvent\",\n    value: function addEvent(eventData) {\n      var _this54 = this;\n\n      if (this.parent.eventSettings.allowAdding && !this.parent.activeViewOptions.readonly) {\n        if (!this.isBlockEvent(eventData) && this.parent.eventBase.isBlockRange(eventData)) {\n          this.parent.quickPopup.openValidationError('blockAlert', eventData);\n          return;\n        }\n\n        var addEvents = eventData instanceof Array ? eventData : [eventData];\n        var args = {\n          requestType: 'eventCreate',\n          cancel: false,\n          data: addEvents,\n          addedRecords: addEvents,\n          changedRecords: [],\n          deletedRecords: []\n        };\n        this.parent.trigger(actionBegin, args, function (addArgs) {\n          if (!addArgs.cancel) {\n            var fields = _this54.parent.eventFields;\n            var editParams = {\n              addedRecords: [],\n              changedRecords: [],\n              deletedRecords: []\n            };\n            var promise;\n\n            if (addArgs.addedRecords instanceof Array) {\n              var _iterator65 = _createForOfIteratorHelper(addArgs.addedRecords),\n                  _step65;\n\n              try {\n                for (_iterator65.s(); !(_step65 = _iterator65.n()).done;) {\n                  var event = _step65.value;\n                  event = _this54.parent.eventBase.updateEventDateTime(event);\n\n                  var _eventData = extend({}, _this54.parent.eventBase.processTimezone(event, true), null, true);\n\n                  editParams.addedRecords.push(_eventData);\n                }\n              } catch (err) {\n                _iterator65.e(err);\n              } finally {\n                _iterator65.f();\n              }\n\n              promise = _this54.parent.dataModule.dataManager.saveChanges(editParams, fields.id, _this54.getTable(), _this54.getQuery());\n            } else {\n              var _event5 = _this54.parent.eventBase.processTimezone(addArgs.addedRecords, true);\n\n              editParams.addedRecords.push(_event5);\n              promise = _this54.parent.dataModule.dataManager.insert(_event5, _this54.getTable(), _this54.getQuery());\n            }\n\n            var crudArgs = {\n              requestType: 'eventCreated',\n              cancel: false,\n              data: addArgs.addedRecords,\n              promise: promise,\n              editParams: editParams\n            };\n\n            _this54.refreshData(crudArgs);\n          }\n        });\n      }\n    }\n  }, {\n    key: \"saveEvent\",\n    value: function saveEvent(eventData, action) {\n      var _this55 = this;\n\n      if (this.parent.eventSettings.allowEditing && !this.parent.activeViewOptions.readonly) {\n        if (this.parent.currentAction !== 'EditFollowingEvents' && !this.isBlockEvent(eventData) && this.parent.eventBase.isBlockRange(eventData)) {\n          this.parent.quickPopup.openValidationError('blockAlert', eventData);\n          return;\n        }\n\n        this.parent.currentAction = action;\n\n        if (action) {\n          switch (action) {\n            case 'Save':\n              this.processSave(eventData);\n              break;\n\n            case 'EditOccurrence':\n              this.processOccurrences(eventData, action);\n              break;\n\n            case 'EditFollowingEvents':\n              this.processFollowSeries(eventData, action);\n              break;\n\n            case 'EditSeries':\n              this.processEntireSeries(eventData, action);\n              break;\n          }\n        } else {\n          var updateEvents = eventData instanceof Array ? eventData : [eventData];\n          var args = {\n            requestType: 'eventChange',\n            cancel: false,\n            data: eventData,\n            addedRecords: [],\n            changedRecords: updateEvents,\n            deletedRecords: []\n          };\n          this.parent.trigger(actionBegin, args, function (saveArgs) {\n            if (!saveArgs.cancel) {\n              var promise;\n              var fields = _this55.parent.eventFields;\n              var editParams = {\n                addedRecords: [],\n                changedRecords: [],\n                deletedRecords: []\n              };\n\n              if (saveArgs.changedRecords instanceof Array) {\n                var _iterator66 = _createForOfIteratorHelper(saveArgs.changedRecords),\n                    _step66;\n\n                try {\n                  for (_iterator66.s(); !(_step66 = _iterator66.n()).done;) {\n                    var event = _step66.value;\n                    event = _this55.parent.eventBase.updateEventDateTime(event);\n\n                    var _eventData2 = extend({}, _this55.parent.eventBase.processTimezone(event, true), null, true);\n\n                    editParams.changedRecords.push(_eventData2);\n                  }\n                } catch (err) {\n                  _iterator66.e(err);\n                } finally {\n                  _iterator66.f();\n                }\n\n                promise = _this55.parent.dataModule.dataManager.saveChanges(editParams, fields.id, _this55.getTable(), _this55.getQuery());\n              } else {\n                var _event6 = _this55.parent.eventBase.processTimezone(saveArgs.changedRecords, true);\n\n                editParams.changedRecords.push(_event6);\n                promise = _this55.parent.dataModule.dataManager.update(fields.id, _event6, _this55.getTable(), _this55.getQuery());\n              }\n\n              var crudArgs = {\n                requestType: 'eventChanged',\n                cancel: false,\n                data: saveArgs.changedRecords,\n                promise: promise,\n                editParams: editParams\n              };\n\n              _this55.refreshData(crudArgs);\n            }\n          });\n        }\n      }\n    }\n  }, {\n    key: \"deleteEvent\",\n    value: function deleteEvent(eventData, action) {\n      var _this56 = this;\n\n      if (this.parent.eventSettings.allowDeleting && !this.parent.activeViewOptions.readonly) {\n        this.parent.currentAction = action;\n        var deleteEvents = [];\n\n        if (typeof eventData === 'string' || typeof eventData === 'number') {\n          deleteEvents = this.parent.eventsData.filter(function (eventObj) {\n            return eventObj[_this56.parent.eventFields.id] === eventData;\n          });\n        } else {\n          deleteEvents = eventData instanceof Array ? eventData : [eventData];\n        }\n\n        if (action) {\n          switch (action) {\n            case 'Delete':\n              this.processDelete(deleteEvents);\n              break;\n\n            case 'DeleteOccurrence':\n              this.processOccurrences(deleteEvents, action);\n              break;\n\n            case 'DeleteFollowingEvents':\n              this.processFollowSeries(deleteEvents, action);\n              break;\n\n            case 'DeleteSeries':\n              this.processEntireSeries(deleteEvents, action);\n              break;\n          }\n        } else {\n          var args = {\n            requestType: 'eventRemove',\n            cancel: false,\n            data: eventData,\n            addedRecords: [],\n            changedRecords: [],\n            deletedRecords: deleteEvents\n          };\n          this.parent.trigger(actionBegin, args, function (deleteArgs) {\n            if (!deleteArgs.cancel) {\n              var promise;\n              var fields = _this56.parent.eventFields;\n              var editParams = {\n                addedRecords: [],\n                changedRecords: [],\n                deletedRecords: []\n              };\n\n              if (deleteArgs.deletedRecords.length > 1) {\n                editParams.deletedRecords = editParams.deletedRecords.concat(deleteArgs.deletedRecords);\n                promise = _this56.parent.dataModule.dataManager.saveChanges(editParams, fields.id, _this56.getTable(), _this56.getQuery());\n              } else {\n                editParams.deletedRecords.push(deleteArgs.deletedRecords[0]);\n                promise = _this56.parent.dataModule.dataManager.remove(fields.id, deleteArgs.deletedRecords[0], _this56.getTable(), _this56.getQuery());\n              }\n\n              _this56.parent.eventBase.selectWorkCellByTime(deleteArgs.deletedRecords);\n\n              var crudArgs = {\n                requestType: 'eventRemoved',\n                cancel: false,\n                data: deleteArgs.deletedRecords,\n                promise: promise,\n                editParams: editParams\n              };\n\n              _this56.refreshData(crudArgs);\n            }\n          });\n        }\n      }\n    }\n  }, {\n    key: \"processOccurrences\",\n    value: function processOccurrences(eventData, action) {\n      var _this57 = this;\n\n      var occurrenceData = [];\n      var isDeletedRecords = false;\n\n      if (eventData instanceof Array) {\n        var _iterator67 = _createForOfIteratorHelper(eventData),\n            _step67;\n\n        try {\n          for (_iterator67.s(); !(_step67 = _iterator67.n()).done;) {\n            var event = _step67.value;\n            occurrenceData.push({\n              occurrence: event,\n              parent: this.getParentEvent(event)\n            });\n          }\n        } catch (err) {\n          _iterator67.e(err);\n        } finally {\n          _iterator67.f();\n        }\n      } else {\n        occurrenceData = {\n          occurrence: eventData,\n          parent: this.getParentEvent(eventData)\n        };\n      }\n\n      var updateEvents = eventData instanceof Array ? eventData : [eventData];\n      var args = {\n        requestType: action === 'EditOccurrence' ? 'eventChange' : 'eventRemove',\n        cancel: false,\n        addedRecords: [],\n        changedRecords: updateEvents,\n        deletedRecords: []\n      };\n      args.data = occurrenceData;\n      this.parent.trigger(actionBegin, args, function (occurrenceArgs) {\n        if (!occurrenceArgs.cancel) {\n          var fields = _this57.parent.eventFields;\n          var editParams = {\n            addedRecords: [],\n            changedRecords: [],\n            deletedRecords: []\n          };\n          var occurrenceEvents = occurrenceData instanceof Array ? occurrenceData : [occurrenceData];\n\n          var _loop9 = function _loop9(a, count) {\n            var childEvent = occurrenceArgs.changedRecords[a];\n            var parentEvent = occurrenceEvents[a].parent;\n            var parentException = parentEvent[fields.recurrenceException];\n            var editedData = void 0;\n            var exceptionDate = void 0;\n\n            switch (action) {\n              case 'EditOccurrence':\n                editedData = _this57.parent.eventsProcessed.filter(function (event) {\n                  return event.Guid === childEvent.Guid;\n                })[0];\n                exceptionDate = _this57.excludeDateCheck(editedData[fields.startTime], parentException);\n\n                if (exceptionDate !== parentEvent[fields.recurrenceException]) {\n                  parentEvent[fields.recurrenceException] = exceptionDate;\n                  childEvent[fields.recurrenceException] = getRecurrenceStringFromDate(editedData[fields.startTime]);\n                  childEvent[fields.recurrenceID] = parentEvent[fields.id];\n                  childEvent[fields.followingID] = null;\n                  editParams.changedRecords.push(_this57.parent.eventBase.processTimezone(parentEvent, true));\n                  editParams.addedRecords.push(_this57.parent.eventBase.processTimezone(childEvent, true));\n                } else {\n                  editParams.changedRecords.push(_this57.parent.eventBase.processTimezone(childEvent, true));\n                }\n\n                break;\n\n              case 'DeleteOccurrence':\n                if (!childEvent[fields.recurrenceException]) {\n                  parentEvent[fields.recurrenceException] = _this57.excludeDateCheck(childEvent[fields.startTime], parentException);\n                  editParams.changedRecords.push(_this57.parent.eventBase.processTimezone(parentEvent, true));\n                }\n\n                if (childEvent[fields.id] !== parentEvent[fields.id]) {\n                  editParams.deletedRecords.push(childEvent);\n                  isDeletedRecords = true;\n                }\n\n                break;\n            }\n          };\n\n          for (var a = 0, count = occurrenceArgs.changedRecords.length; a < count; a++) {\n            _loop9(a, count);\n          }\n\n          var promise = _this57.parent.dataModule.dataManager.saveChanges(editParams, fields.id, _this57.getTable(), _this57.getQuery());\n\n          _this57.parent.eventBase.selectWorkCellByTime(occurrenceArgs.changedRecords);\n\n          var crudArgs = {\n            requestType: action === 'EditOccurrence' ? 'eventChanged' : 'eventRemoved',\n            cancel: false,\n            data: isDeletedRecords ? occurrenceArgs.deletedRecords : occurrenceArgs.changedRecords,\n            promise: promise,\n            editParams: editParams\n          };\n\n          _this57.refreshData(crudArgs);\n        }\n      });\n    }\n  }, {\n    key: \"processFollowSeries\",\n    value: function processFollowSeries(eventData, action) {\n      var _this58 = this;\n\n      var followData = [];\n\n      if (eventData instanceof Array) {\n        var _iterator68 = _createForOfIteratorHelper(eventData),\n            _step68;\n\n        try {\n          for (_iterator68.s(); !(_step68 = _iterator68.n()).done;) {\n            var event = _step68.value;\n            followData.push({\n              occurrence: event,\n              parent: this.getParentEvent(event)\n            });\n          }\n        } catch (err) {\n          _iterator68.e(err);\n        } finally {\n          _iterator68.f();\n        }\n      } else {\n        followData = {\n          occurrence: eventData,\n          parent: this.getParentEvent(eventData)\n        };\n      }\n\n      var updateFollowEvents = eventData instanceof Array ? eventData : [eventData];\n      var args = {\n        requestType: action === 'EditFollowingEvents' ? 'eventChange' : 'eventRemove',\n        cancel: false,\n        addedRecords: [],\n        changedRecords: updateFollowEvents,\n        deletedRecords: []\n      };\n      args.data = followData;\n      this.parent.trigger(actionBegin, args, function (followArgs) {\n        if (!followArgs.cancel) {\n          (function () {\n            var fields = _this58.parent.eventFields;\n            var editParams = {\n              addedRecords: [],\n              changedRecords: [],\n              deletedRecords: []\n            };\n            var followEvents = followData instanceof Array ? followData : [followData];\n\n            var _loop10 = function _loop10(a, count) {\n              var childEvent = followArgs.changedRecords[a];\n              var parentEvent = followEvents[a].parent;\n\n              var followData = _this58.parent.eventBase.getEventCollections(parentEvent, childEvent);\n\n              var isSpanned = void 0;\n\n              switch (action) {\n                case 'EditFollowingEvents':\n                  _this58.processRecurrenceRule(parentEvent, childEvent);\n\n                  isSpanned = !_this58.parent.eventBase.isFollowingEvent(parentEvent, childEvent);\n                  childEvent[fields.followingID] = isSpanned ? null : parentEvent[fields.id];\n                  childEvent[fields.recurrenceID] = null;\n                  editParams.addedRecords.push(_this58.parent.eventBase.processTimezone(childEvent, true));\n                  editParams.changedRecords.push(_this58.parent.eventBase.processTimezone(parentEvent, true));\n\n                  if (!_this58.parent.uiStateValues.isIgnoreOccurrence) {\n                    childEvent[fields.recurrenceException] = null;\n\n                    if (followData.occurrence.length > 0) {\n                      var rule = followData.occurrence.slice(-1)[0][fields.recurrenceRule];\n\n                      if (rule.indexOf('COUNT') === -1) {\n                        childEvent[fields.recurrenceRule] = rule;\n                      }\n                    }\n\n                    if (followData.follow.length > 0) {\n                      childEvent[fields.recurrenceRule] = followData.follow.slice(-1)[0][fields.recurrenceRule];\n                      editParams.deletedRecords = editParams.deletedRecords.concat(followData.follow);\n                    }\n\n                    if (isSpanned) {\n                      followData.occurrence = followData.occurrence.filter(function (eventObj) {\n                        return eventObj[fields.recurrenceID] === childEvent[fields.id];\n                      });\n                    }\n\n                    editParams.deletedRecords = editParams.deletedRecords.concat(followData.occurrence);\n                  }\n\n                  break;\n\n                case 'DeleteFollowingEvents':\n                  _this58.processRecurrenceRule(parentEvent, childEvent[fields.startTime]);\n\n                  editParams.changedRecords.push(_this58.parent.eventBase.processTimezone(parentEvent, true));\n                  editParams.deletedRecords = editParams.deletedRecords.concat(followData.occurrence).concat(followData.follow);\n                  break;\n              }\n            };\n\n            for (var a = 0, count = followArgs.changedRecords.length; a < count; a++) {\n              _loop10(a, count);\n            }\n\n            var promise = _this58.parent.dataModule.dataManager.saveChanges(editParams, fields.id, _this58.getTable(), _this58.getQuery());\n\n            _this58.parent.eventBase.selectWorkCellByTime(followArgs.changedRecords);\n\n            var crudArgs = {\n              requestType: action === 'EditFollowingEvents' ? 'eventChanged' : 'eventRemoved',\n              cancel: false,\n              data: followArgs.changedRecords,\n              promise: promise,\n              editParams: editParams\n            };\n\n            _this58.refreshData(crudArgs);\n          })();\n        }\n      });\n    }\n  }, {\n    key: \"processEntireSeries\",\n    value: function processEntireSeries(eventData, action) {\n      var _this59 = this;\n\n      var seriesData = [];\n      var isDeletedRecords = false;\n\n      if (eventData instanceof Array) {\n        var _iterator69 = _createForOfIteratorHelper(eventData),\n            _step69;\n\n        try {\n          for (_iterator69.s(); !(_step69 = _iterator69.n()).done;) {\n            var event = _step69.value;\n            seriesData.push(this.getParentEvent(event, true));\n          }\n        } catch (err) {\n          _iterator69.e(err);\n        } finally {\n          _iterator69.f();\n        }\n      } else {\n        seriesData = this.getParentEvent(eventData, true);\n      }\n\n      var updateSeriesEvents = eventData instanceof Array ? eventData : [eventData];\n      var args = {\n        requestType: action === 'EditSeries' ? 'eventChange' : 'eventRemove',\n        cancel: false,\n        addedRecords: [],\n        changedRecords: updateSeriesEvents,\n        deletedRecords: []\n      };\n      args.data = seriesData;\n      this.parent.trigger(actionBegin, args, function (seriesArgs) {\n        if (!seriesArgs.cancel) {\n          (function () {\n            var fields = _this59.parent.eventFields;\n            var editParams = {\n              addedRecords: [],\n              changedRecords: [],\n              deletedRecords: []\n            };\n            var seriesEvents = seriesData instanceof Array ? seriesData : [seriesData];\n\n            var _loop11 = function _loop11(a, count) {\n              var childEvent = seriesArgs.changedRecords[a];\n              var parentEvent = seriesEvents[a];\n\n              var eventCollections = _this59.parent.eventBase.getEventCollections(parentEvent);\n\n              var deletedEvents = eventCollections.follow.concat(eventCollections.occurrence);\n\n              switch (action) {\n                case 'EditSeries':\n                  if (childEvent[fields.startTime] > parentEvent[fields.startTime] && childEvent[fields.recurrenceRule]) {\n                    _this59.processRecurrenceRule(parentEvent, childEvent);\n                  }\n\n                  childEvent[fields.id] = parentEvent[fields.id];\n                  childEvent[fields.recurrenceID] = null;\n                  childEvent[fields.followingID] = null;\n\n                  if (_this59.parent.uiStateValues.isIgnoreOccurrence && childEvent[fields.recurrenceException]) {\n                    var originalParent = _this59.parent.eventsData.filter(function (eventObj) {\n                      return eventObj[fields.id] === childEvent[fields.id];\n                    });\n\n                    if (originalParent.length > 0) {\n                      childEvent[fields.recurrenceRule] = originalParent[0][fields.recurrenceRule];\n                    }\n                  } else {\n                    childEvent[fields.recurrenceException] = null;\n                    editParams.deletedRecords = editParams.deletedRecords.concat(deletedEvents);\n                  }\n\n                  editParams.changedRecords.push(_this59.parent.eventBase.processTimezone(childEvent, true));\n                  _this59.parent.uiStateValues.isIgnoreOccurrence = false;\n                  break;\n\n                case 'DeleteSeries':\n                  editParams.deletedRecords = editParams.deletedRecords.concat(deletedEvents.concat(parentEvent));\n                  isDeletedRecords = true;\n                  break;\n              }\n            };\n\n            for (var a = 0, count = seriesArgs.changedRecords.length; a < count; a++) {\n              _loop11(a, count);\n            }\n\n            var promise = _this59.parent.dataModule.dataManager.saveChanges(editParams, fields.id, _this59.getTable(), _this59.getQuery());\n\n            _this59.parent.eventBase.selectWorkCellByTime(seriesArgs.changedRecords);\n\n            var crudArgs = {\n              requestType: action === 'EditSeries' ? 'eventChanged' : 'eventRemoved',\n              cancel: false,\n              data: isDeletedRecords ? seriesArgs.deletedRecords : seriesArgs.changedRecords,\n              promise: promise,\n              editParams: editParams\n            };\n\n            _this59.refreshData(crudArgs);\n          })();\n        }\n      });\n    }\n  }, {\n    key: \"processDelete\",\n    value: function processDelete(eventData) {\n      var _this60 = this;\n\n      var deleteData = [];\n\n      var _iterator70 = _createForOfIteratorHelper(eventData),\n          _step70;\n\n      try {\n        for (_iterator70.s(); !(_step70 = _iterator70.n()).done;) {\n          var eventObj = _step70.value;\n\n          if (eventObj[this.parent.eventFields.recurrenceRule]) {\n            deleteData.push({\n              occurrence: eventObj,\n              parent: this.getParentEvent(eventObj)\n            });\n          } else {\n            deleteData.push(eventObj);\n          }\n        }\n      } catch (err) {\n        _iterator70.e(err);\n      } finally {\n        _iterator70.f();\n      }\n\n      var args = {\n        requestType: 'eventRemove',\n        cancel: false,\n        addedRecords: [],\n        changedRecords: [],\n        deletedRecords: eventData\n      };\n      args.data = deleteData;\n      this.parent.trigger(actionBegin, args, function (deleteArgs) {\n        if (!deleteArgs.cancel) {\n          (function () {\n            var fields = _this60.parent.eventFields;\n            var editParams = {\n              addedRecords: [],\n              changedRecords: [],\n              deletedRecords: []\n            };\n\n            for (var a = 0, count = deleteArgs.deletedRecords.length; a < count; a++) {\n              var isDelete = isNullOrUndefined(deleteArgs.deletedRecords[a][_this60.parent.eventFields.recurrenceRule]);\n\n              if (!isDelete) {\n                (function () {\n                  var parentEvent = deleteData[a].parent;\n                  var isEdited = editParams.changedRecords.filter(function (obj) {\n                    return obj[fields.id] === parentEvent[fields.id];\n                  });\n                  var editedDate = deleteArgs.deletedRecords[a][fields.startTime];\n\n                  if (isEdited.length > 0) {\n                    var editedData = isEdited[0];\n                    editedData[fields.recurrenceException] = _this60.excludeDateCheck(editedDate, editedData[fields.recurrenceException]);\n                  } else {\n                    parentEvent[fields.recurrenceException] = _this60.excludeDateCheck(editedDate, parentEvent[fields.recurrenceException]);\n                  }\n\n                  if (isEdited.length === 0) {\n                    editParams.changedRecords.push(_this60.parent.eventBase.processTimezone(parentEvent, true));\n                  }\n\n                  isDelete = deleteArgs.deletedRecords[a][fields.id] !== parentEvent[fields.id];\n                })();\n              }\n\n              if (isDelete) {\n                editParams.deletedRecords.push(deleteArgs.deletedRecords[a]);\n              }\n            }\n\n            var promise = _this60.parent.dataModule.dataManager.saveChanges(editParams, fields.id, _this60.getTable(), _this60.getQuery());\n\n            var crudArgs = {\n              requestType: 'eventRemoved',\n              cancel: false,\n              data: deleteArgs.deletedRecords,\n              promise: promise,\n              editParams: editParams\n            };\n\n            _this60.refreshData(crudArgs);\n          })();\n        }\n      });\n    }\n  }, {\n    key: \"processSave\",\n    value: function processSave(data) {\n      var _this61 = this;\n\n      var eventData = data instanceof Array ? data : [data];\n      var editData = [];\n\n      var _iterator71 = _createForOfIteratorHelper(eventData),\n          _step71;\n\n      try {\n        for (_iterator71.s(); !(_step71 = _iterator71.n()).done;) {\n          var eventObj = _step71.value;\n\n          if (eventObj[this.parent.eventFields.recurrenceRule]) {\n            editData.push({\n              occurrence: eventObj,\n              parent: this.getParentEvent(eventObj)\n            });\n          } else {\n            editData.push(eventObj);\n          }\n        }\n      } catch (err) {\n        _iterator71.e(err);\n      } finally {\n        _iterator71.f();\n      }\n\n      var args = {\n        requestType: 'eventChange',\n        cancel: false,\n        addedRecords: [],\n        changedRecords: eventData,\n        deletedRecords: []\n      };\n      args.data = editData;\n      this.parent.trigger(actionBegin, args, function (editArgs) {\n        if (!editArgs.cancel) {\n          var fields = _this61.parent.eventFields;\n          var editParams = {\n            addedRecords: [],\n            changedRecords: [],\n            deletedRecords: []\n          };\n\n          var _iterator72 = _createForOfIteratorHelper(editArgs.changedRecords),\n              _step72;\n\n          try {\n            for (_iterator72.s(); !(_step72 = _iterator72.n()).done;) {\n              var record = _step72.value;\n\n              if (!isNullOrUndefined(record[fields.recurrenceRule]) && isNullOrUndefined(record[fields.recurrenceException])) {\n                var exceptionString = getRecurrenceStringFromDate(record[fields.startTime]);\n\n                var parentEle = _this61.getParentEvent(record);\n\n                parentEle[fields.recurrenceException] = isNullOrUndefined(parentEle[fields.recurrenceException]) ? exceptionString : parentEle[fields.recurrenceException].concat(',' + exceptionString);\n                record[fields.id] = _this61.parent.getEventMaxID();\n                record[fields.recurrenceException] = exceptionString;\n                editParams.addedRecords.push(_this61.parent.eventBase.processTimezone(record, true));\n                editParams.changedRecords.push(_this61.parent.eventBase.processTimezone(parentEle, true));\n              } else {\n                editParams.changedRecords.push(_this61.parent.eventBase.processTimezone(record, true));\n              }\n            }\n          } catch (err) {\n            _iterator72.e(err);\n          } finally {\n            _iterator72.f();\n          }\n\n          var promise = _this61.parent.dataModule.dataManager.saveChanges(editParams, fields.id, _this61.getTable(), _this61.getQuery());\n\n          var crudArgs = {\n            requestType: 'eventChanged',\n            cancel: false,\n            data: editArgs.changedRecords,\n            promise: promise,\n            editParams: editParams\n          };\n\n          _this61.refreshData(crudArgs);\n        }\n      });\n    }\n  }, {\n    key: \"getParentEvent\",\n    value: function getParentEvent(event) {\n      var isParent = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : false;\n      var parentEvent = this.parent.eventBase.getParentEvent(event, isParent) || event;\n\n      if (parentEvent[this.parent.eventFields.startTimezone] || parentEvent[this.parent.eventFields.endTimezone]) {\n        this.parent.eventBase.timezoneConvert(parentEvent);\n      }\n\n      return parentEvent;\n    }\n  }, {\n    key: \"excludeDateCheck\",\n    value: function excludeDateCheck(eventStartTime, exceptionDateList) {\n      var exDate = getRecurrenceStringFromDate(eventStartTime);\n\n      if (!isNullOrUndefined(exceptionDateList)) {\n        if (exceptionDateList.indexOf(exDate) === -1) {\n          exceptionDateList = !isNullOrUndefined(exceptionDateList) ? exceptionDateList + ',' + exDate : exDate;\n        }\n      } else {\n        exceptionDateList = exDate;\n      }\n\n      return exceptionDateList;\n    }\n  }, {\n    key: \"processRecurrenceRule\",\n    value: function processRecurrenceRule(parentEvent, followEvent) {\n      var fields = this.parent.eventFields;\n      var recurrenceRule = parentEvent[fields.recurrenceRule];\n      var endDate;\n\n      if (followEvent instanceof Date) {\n        endDate = new Date(+followEvent);\n      } else {\n        endDate = new Date(+followEvent[fields.startTime]);\n        var newRecurrenceRule = followEvent[fields.recurrenceRule];\n        var startDate = parentEvent[fields.startTime];\n        var ruleException = this.parent.currentAction === 'DeleteFollowingEvents' ? followEvent[fields.recurrenceException] : null;\n        var dateCollection = generate(startDate, newRecurrenceRule, ruleException, this.parent.activeViewOptions.firstDayOfWeek);\n        var untilDate = new Date(dateCollection.slice(-1)[0]);\n        untilDate.setHours(endDate.getHours(), endDate.getMinutes(), endDate.getSeconds());\n        endDate.setHours(startDate.getHours(), startDate.getMinutes(), startDate.getSeconds());\n        followEvent[fields.recurrenceRule] = this.getUpdatedRecurrenceRule(newRecurrenceRule, new Date(+untilDate), false);\n      }\n\n      parentEvent[fields.recurrenceRule] = this.getUpdatedRecurrenceRule(recurrenceRule, addDays(new Date(endDate.getTime()), -1), true);\n    }\n  }, {\n    key: \"getUpdatedRecurrenceRule\",\n    value: function getUpdatedRecurrenceRule(recurrenceRule, untilDate, isParent) {\n      var splitRule = recurrenceRule.split(';');\n      var updatedRule = '';\n\n      var _iterator73 = _createForOfIteratorHelper(splitRule),\n          _step73;\n\n      try {\n        for (_iterator73.s(); !(_step73 = _iterator73.n()).done;) {\n          var rule = _step73.value;\n\n          if (rule !== '') {\n            var ruleKey = rule.split('=')[0];\n            var ruleValue = rule.split('=')[1];\n\n            if (ruleKey === 'COUNT' || ruleKey === 'UNTIL') {\n              ruleValue = getRecurrenceStringFromDate(untilDate);\n              rule = rule.replace(rule, 'UNTIL=' + ruleValue);\n            }\n\n            updatedRule += rule + ';';\n          }\n        }\n      } catch (err) {\n        _iterator73.e(err);\n      } finally {\n        _iterator73.f();\n      }\n\n      if (isParent && updatedRule.indexOf('UNTIL') === -1) {\n        updatedRule += 'UNTIL=' + getRecurrenceStringFromDate(untilDate);\n      }\n\n      return updatedRule;\n    }\n  }, {\n    key: \"isBlockEvent\",\n    value: function isBlockEvent(eventData) {\n      var eventCollection = eventData instanceof Array ? eventData : [eventData];\n      var value = false;\n\n      var _iterator74 = _createForOfIteratorHelper(eventCollection),\n          _step74;\n\n      try {\n        for (_iterator74.s(); !(_step74 = _iterator74.n()).done;) {\n          var event = _step74.value;\n          value = event[this.parent.eventFields.isBlock] || false;\n        }\n      } catch (err) {\n        _iterator74.e(err);\n      } finally {\n        _iterator74.f();\n      }\n\n      return value;\n    }\n    /**\n     * To destroy the crud module.\n     *\n     * @returns {void}\n     * @private\n     */\n\n  }, {\n    key: \"destroy\",\n    value: function destroy() {\n      this.crudObj = null;\n      this.parent = null;\n    }\n  }]);\n\n  return Crud;\n}();\n/* eslint-disable @typescript-eslint/no-explicit-any */\n\n/**\n * Work cell interactions\n */\n\n\nvar WorkCellInteraction = /*#__PURE__*/function () {\n  function WorkCellInteraction(parent) {\n    _classCallCheck(this, WorkCellInteraction);\n\n    this.parent = parent;\n    EventHandler.add(this.parent.element, 'mouseover', this.onHover, this);\n  }\n\n  _createClass(WorkCellInteraction, [{\n    key: \"cellMouseDown\",\n    value: function cellMouseDown(e) {\n      if (this.isPreventAction(e)) {\n        return;\n      }\n\n      this.parent.notify(_cellMouseDown, {\n        event: e\n      });\n    }\n  }, {\n    key: \"cellClick\",\n    value: function cellClick(e) {\n      var _this62 = this;\n\n      if (this.isPreventAction(e)) {\n        return;\n      }\n\n      var queryStr = '.' + WORK_CELLS_CLASS + ',.' + ALLDAY_CELLS_CLASS + ',.' + HEADER_CELLS_CLASS;\n      var target = closest(e.target, queryStr);\n\n      if (isNullOrUndefined(target)) {\n        return;\n      }\n\n      if (!isNullOrUndefined(closest(e.target, '.' + NEW_EVENT_CLASS))) {\n        this.parent.eventWindow.openEditor(this.parent.activeCellsData, 'Add');\n        return;\n      }\n\n      var navigateEle = closest(e.target, '.' + NAVIGATE_CLASS);\n      var navigateView = this.parent.getNavigateView();\n      var sameView = this.parent.currentView === navigateView;\n\n      if (isNullOrUndefined(navigateEle) || sameView || isNullOrUndefined(this.parent.viewOptions[navigateView.charAt(0).toLowerCase() + navigateView.slice(1)])) {\n        if (this.parent.activeViewOptions.readonly && this.parent.currentView !== 'MonthAgenda') {\n          if (this.parent.quickPopup) {\n            this.parent.quickPopup.quickPopupHide();\n          }\n\n          return;\n        }\n\n        if (this.parent.isAdaptive && (e.target.classList.contains(MORE_INDICATOR_CLASS) || closest(e.target, '.' + MORE_INDICATOR_CLASS))) {\n          return;\n        }\n\n        var isWorkCell = target.classList.contains(WORK_CELLS_CLASS) || target.classList.contains(ALLDAY_CELLS_CLASS);\n\n        if (isWorkCell && e.shiftKey && e.which === 1 && this.parent.keyboardInteractionModule) {\n          this.parent.keyboardInteractionModule.onMouseSelection(e);\n          return;\n        }\n\n        this.parent.activeCellsData = this.parent.getCellDetails(target);\n        var args = extend(this.parent.activeCellsData, {\n          cancel: false,\n          event: e,\n          name: 'cellClick'\n        });\n        this.parent.trigger(_cellClick, args, function (clickArgs) {\n          if (!clickArgs.cancel) {\n            if (isWorkCell) {\n              _this62.parent.selectCell(target);\n            }\n\n            if (_this62.parent.allowInline) {\n              var inlineArgs = {\n                element: clickArgs.element,\n                groupIndex: clickArgs.groupIndex,\n                type: 'Cell'\n              };\n\n              _this62.parent.notify(inlineClick, inlineArgs);\n            } else {\n              _this62.parent.notify(_cellClick, clickArgs);\n            }\n          } else {\n            if (_this62.parent.quickPopup) {\n              _this62.parent.quickPopup.quickPopupHide();\n            }\n          }\n        });\n      } else {\n        var date = this.parent.getDateFromElement(target);\n\n        if (!isNullOrUndefined(date) && !this.parent.isAdaptive && this.parent.isMinMaxDate(date)) {\n          this.parent.setProperties({\n            selectedDate: date\n          }, true);\n          this.parent.changeView(this.parent.getNavigateView(), e);\n        }\n      }\n    }\n  }, {\n    key: \"cellDblClick\",\n    value: function cellDblClick(e) {\n      var _this63 = this;\n\n      var queryStr = '.' + WORK_CELLS_CLASS + ',.' + ALLDAY_CELLS_CLASS + ',.' + HEADER_CELLS_CLASS;\n      var target = closest(e.target, queryStr);\n\n      if (this.parent.activeViewOptions.readonly || this.isPreventAction(e) || isNullOrUndefined(target)) {\n        return;\n      }\n\n      var args = extend(this.parent.activeCellsData, {\n        cancel: false,\n        event: e,\n        name: 'cellDoubleClick'\n      });\n      this.parent.trigger(cellDoubleClick, args, function (clickArgs) {\n        var date = new Date(clickArgs.startTime.getTime());\n\n        if (!_this63.parent.isMinMaxDate(new Date(date.setHours(0, 0, 0, 0)))) {\n          return;\n        }\n\n        if (!clickArgs.cancel) {\n          _this63.parent.eventWindow.openEditor(_this63.parent.activeCellsData, 'Add');\n        }\n      });\n    }\n  }, {\n    key: \"onHover\",\n    value: function onHover(e) {\n      var targetSelector = '.' + WORK_CELLS_CLASS + ',.' + TIME_SLOT_CLASS + ',.' + ALLDAY_CELLS_CLASS + ',.' + HEADER_CELLS_CLASS + ',.' + RESOURCE_CELLS_CLASS + ',.' + APPOINTMENT_CLASS + ',.' + WEEK_NUMBER_CLASS + ',.' + MONTH_HEADER_CLASS;\n      var hoverTarget = closest(e.target, targetSelector);\n\n      if (hoverTarget) {\n        var hoverArgs = {\n          element: hoverTarget,\n          event: e\n        };\n        this.parent.trigger(hover, hoverArgs);\n      }\n    }\n  }, {\n    key: \"isPreventAction\",\n    value: function isPreventAction(e) {\n      if (closest(e.target, '.' + NAVIGATE_CLASS)) {\n        return false;\n      }\n\n      if (closest(e.target, '.' + APPOINTMENT_WRAPPER_CLASS) && !closest(e.target, '.' + MORE_INDICATOR_CLASS)) {\n        return true;\n      }\n\n      var target = closest(e.target, '.' + APPOINTMENT_CLASS + ',.' + RESOURCE_GROUP_CELLS_CLASS);\n\n      if (!isNullOrUndefined(target)) {\n        return true;\n      }\n\n      target = closest(e.target, '.' + HEADER_CELLS_CLASS);\n\n      if (this.parent.activeView.isTimelineView() && !isNullOrUndefined(target)) {\n        return true;\n      }\n\n      return false;\n    }\n  }, {\n    key: \"destroy\",\n    value: function destroy() {\n      EventHandler.remove(this.parent.element, 'mouseover', this.onHover);\n    }\n  }]);\n\n  return WorkCellInteraction;\n}();\n\nvar __decorate$8 = undefined && undefined.__decorate || function (decorators, target, key, desc) {\n  var c = arguments.length,\n      r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc,\n      d;\n  if (typeof Reflect === \"object\" && typeof Reflect.decorate === \"function\") r = Reflect.decorate(decorators, target, key, desc);else for (var i = decorators.length - 1; i >= 0; i--) {\n    if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;\n  }\n  return c > 3 && r && Object.defineProperty(target, key, r), r;\n};\n/* eslint-disable @typescript-eslint/no-explicit-any */\n\n/**\n * Configuration that applies on each appointment field options of scheduler.\n */\n\n\nvar FieldOptions = /*#__PURE__*/function (_ChildProperty5) {\n  _inherits(FieldOptions, _ChildProperty5);\n\n  var _super9 = _createSuper(FieldOptions);\n\n  function FieldOptions() {\n    _classCallCheck(this, FieldOptions);\n\n    return _super9.apply(this, arguments);\n  }\n\n  return FieldOptions;\n}(ChildProperty);\n\n__decorate$8([Property()], FieldOptions.prototype, \"name\", void 0);\n\n__decorate$8([Property()], FieldOptions.prototype, \"default\", void 0);\n\n__decorate$8([Property()], FieldOptions.prototype, \"title\", void 0);\n\n__decorate$8([Property({})], FieldOptions.prototype, \"validation\", void 0);\n\nvar __decorate$7 = undefined && undefined.__decorate || function (decorators, target, key, desc) {\n  var c = arguments.length,\n      r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc,\n      d;\n  if (typeof Reflect === \"object\" && typeof Reflect.decorate === \"function\") r = Reflect.decorate(decorators, target, key, desc);else for (var i = decorators.length - 1; i >= 0; i--) {\n    if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;\n  }\n  return c > 3 && r && Object.defineProperty(target, key, r), r;\n};\n/**\n * A Class that holds the collection of event fields that requires to be mapped with the dataSource\n * fields along with its available configuration settings. Each field in it accepts both string and Object\n *  data type. When each of the field is assigned with simple `string` value, it is assumed that the dataSource field\n *  name is mapped with it. If the `object` type is defined on each fields, then the validation related settings and mapping of\n *  those fields with dataSource can be given altogether within it.\n */\n\n\nvar Field = /*#__PURE__*/function (_ChildProperty6) {\n  _inherits(Field, _ChildProperty6);\n\n  var _super10 = _createSuper(Field);\n\n  function Field() {\n    _classCallCheck(this, Field);\n\n    return _super10.apply(this, arguments);\n  }\n\n  return Field;\n}(ChildProperty);\n\n__decorate$7([Property('Id')], Field.prototype, \"id\", void 0);\n\n__decorate$7([Property('IsBlock')], Field.prototype, \"isBlock\", void 0);\n\n__decorate$7([Complex({\n  name: 'Subject'\n}, FieldOptions)], Field.prototype, \"subject\", void 0);\n\n__decorate$7([Complex({\n  name: 'StartTime'\n}, FieldOptions)], Field.prototype, \"startTime\", void 0);\n\n__decorate$7([Complex({\n  name: 'EndTime'\n}, FieldOptions)], Field.prototype, \"endTime\", void 0);\n\n__decorate$7([Complex({\n  name: 'StartTimezone'\n}, FieldOptions)], Field.prototype, \"startTimezone\", void 0);\n\n__decorate$7([Complex({\n  name: 'EndTimezone'\n}, FieldOptions)], Field.prototype, \"endTimezone\", void 0);\n\n__decorate$7([Complex({\n  name: 'Location'\n}, FieldOptions)], Field.prototype, \"location\", void 0);\n\n__decorate$7([Complex({\n  name: 'Description'\n}, FieldOptions)], Field.prototype, \"description\", void 0);\n\n__decorate$7([Complex({\n  name: 'IsAllDay'\n}, FieldOptions)], Field.prototype, \"isAllDay\", void 0);\n\n__decorate$7([Complex({\n  name: 'RecurrenceID'\n}, FieldOptions)], Field.prototype, \"recurrenceID\", void 0);\n\n__decorate$7([Complex({\n  name: 'RecurrenceRule'\n}, FieldOptions)], Field.prototype, \"recurrenceRule\", void 0);\n\n__decorate$7([Complex({\n  name: 'RecurrenceException'\n}, FieldOptions)], Field.prototype, \"recurrenceException\", void 0);\n\n__decorate$7([Property('IsReadonly')], Field.prototype, \"isReadonly\", void 0);\n\n__decorate$7([Property('FollowingID')], Field.prototype, \"followingID\", void 0);\n\nvar __decorate$6 = undefined && undefined.__decorate || function (decorators, target, key, desc) {\n  var c = arguments.length,\n      r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc,\n      d;\n  if (typeof Reflect === \"object\" && typeof Reflect.decorate === \"function\") r = Reflect.decorate(decorators, target, key, desc);else for (var i = decorators.length - 1; i >= 0; i--) {\n    if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;\n  }\n  return c > 3 && r && Object.defineProperty(target, key, r), r;\n};\n/* eslint-disable @typescript-eslint/no-explicit-any */\n\n/**\n * Holds the configuration of event related options and dataSource binding to Schedule.\n */\n\n\nvar EventSettings = /*#__PURE__*/function (_ChildProperty7) {\n  _inherits(EventSettings, _ChildProperty7);\n\n  var _super11 = _createSuper(EventSettings);\n\n  function EventSettings() {\n    _classCallCheck(this, EventSettings);\n\n    return _super11.apply(this, arguments);\n  }\n\n  return EventSettings;\n}(ChildProperty);\n\n__decorate$6([Property()], EventSettings.prototype, \"template\", void 0);\n\n__decorate$6([Property([])], EventSettings.prototype, \"dataSource\", void 0);\n\n__decorate$6([Property()], EventSettings.prototype, \"query\", void 0);\n\n__decorate$6([Complex({}, Field)], EventSettings.prototype, \"fields\", void 0);\n\n__decorate$6([Property(false)], EventSettings.prototype, \"enableTooltip\", void 0);\n\n__decorate$6([Property()], EventSettings.prototype, \"tooltipTemplate\", void 0);\n\n__decorate$6([Property('AllDayRow')], EventSettings.prototype, \"spannedEventPlacement\", void 0);\n\n__decorate$6([Property()], EventSettings.prototype, \"resourceColorField\", void 0);\n\n__decorate$6([Property(false)], EventSettings.prototype, \"editFollowingEvents\", void 0);\n\n__decorate$6([Property(true)], EventSettings.prototype, \"allowAdding\", void 0);\n\n__decorate$6([Property(true)], EventSettings.prototype, \"allowEditing\", void 0);\n\n__decorate$6([Property(true)], EventSettings.prototype, \"allowDeleting\", void 0);\n\n__decorate$6([Property(false)], EventSettings.prototype, \"enableMaxHeight\", void 0);\n\n__decorate$6([Property(false)], EventSettings.prototype, \"enableIndicator\", void 0);\n\n__decorate$6([Property(false)], EventSettings.prototype, \"ignoreWhitespace\", void 0);\n\n__decorate$6([Property()], EventSettings.prototype, \"sortComparer\", void 0);\n\nvar __decorate$9 = undefined && undefined.__decorate || function (decorators, target, key, desc) {\n  var c = arguments.length,\n      r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc,\n      d;\n  if (typeof Reflect === \"object\" && typeof Reflect.decorate === \"function\") r = Reflect.decorate(decorators, target, key, desc);else for (var i = decorators.length - 1; i >= 0; i--) {\n    if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;\n  }\n  return c > 3 && r && Object.defineProperty(target, key, r), r;\n};\n/**\n * A class that holds the resource grouping related configurations on Schedule.\n */\n\n\nvar Group = /*#__PURE__*/function (_ChildProperty8) {\n  _inherits(Group, _ChildProperty8);\n\n  var _super12 = _createSuper(Group);\n\n  function Group() {\n    _classCallCheck(this, Group);\n\n    return _super12.apply(this, arguments);\n  }\n\n  return Group;\n}(ChildProperty);\n\n__decorate$9([Property(false)], Group.prototype, \"byDate\", void 0);\n\n__decorate$9([Property(true)], Group.prototype, \"byGroupID\", void 0);\n\n__decorate$9([Property(false)], Group.prototype, \"allowGroupEdit\", void 0);\n\n__decorate$9([Property([])], Group.prototype, \"resources\", void 0);\n\n__decorate$9([Property(true)], Group.prototype, \"enableCompactView\", void 0);\n\n__decorate$9([Property()], Group.prototype, \"headerTooltipTemplate\", void 0);\n\nvar __decorate$10 = undefined && undefined.__decorate || function (decorators, target, key, desc) {\n  var c = arguments.length,\n      r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc,\n      d;\n  if (typeof Reflect === \"object\" && typeof Reflect.decorate === \"function\") r = Reflect.decorate(decorators, target, key, desc);else for (var i = decorators.length - 1; i >= 0; i--) {\n    if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;\n  }\n  return c > 3 && r && Object.defineProperty(target, key, r), r;\n};\n/* eslint-disable @typescript-eslint/no-explicit-any */\n\n/**\n * A class that represents the resource related configurations and its data binding options.\n */\n\n\nvar Resources = /*#__PURE__*/function (_ChildProperty9) {\n  _inherits(Resources, _ChildProperty9);\n\n  var _super13 = _createSuper(Resources);\n\n  function Resources() {\n    _classCallCheck(this, Resources);\n\n    return _super13.apply(this, arguments);\n  }\n\n  return Resources;\n}(ChildProperty);\n\n__decorate$10([Property()], Resources.prototype, \"field\", void 0);\n\n__decorate$10([Property()], Resources.prototype, \"title\", void 0);\n\n__decorate$10([Property()], Resources.prototype, \"name\", void 0);\n\n__decorate$10([Property(false)], Resources.prototype, \"allowMultiple\", void 0);\n\n__decorate$10([Property([])], Resources.prototype, \"dataSource\", void 0);\n\n__decorate$10([Property()], Resources.prototype, \"query\", void 0);\n\n__decorate$10([Property('Id')], Resources.prototype, \"idField\", void 0);\n\n__decorate$10([Property('Text')], Resources.prototype, \"textField\", void 0);\n\n__decorate$10([Property('Expanded')], Resources.prototype, \"expandedField\", void 0);\n\n__decorate$10([Property('GroupID')], Resources.prototype, \"groupIDField\", void 0);\n\n__decorate$10([Property('Color')], Resources.prototype, \"colorField\", void 0);\n\n__decorate$10([Property('StartHour')], Resources.prototype, \"startHourField\", void 0);\n\n__decorate$10([Property('EndHour')], Resources.prototype, \"endHourField\", void 0);\n\n__decorate$10([Property('WorkDays')], Resources.prototype, \"workDaysField\", void 0);\n\n__decorate$10([Property('CssClass')], Resources.prototype, \"cssClassField\", void 0);\n/* eslint-disable @typescript-eslint/no-explicit-any */\n\n/* eslint-disable max-len */\n\n\nvar ResourceBase = /*#__PURE__*/function () {\n  function ResourceBase(parent) {\n    _classCallCheck(this, ResourceBase);\n\n    this.resourceCollection = [];\n    this.leftPixel = 25;\n    this.parent = parent;\n  }\n\n  _createClass(ResourceBase, [{\n    key: \"renderResourceHeaderIndent\",\n    value: function renderResourceHeaderIndent(tr) {\n      var resColTd = createElement('td', {\n        className: RESOURCE_LEFT_TD_CLASS\n      });\n      var resColDiv = createElement('div', {\n        className: RESOURCE_TEXT_CLASS\n      });\n\n      if (this.parent.activeViewOptions.headerIndentTemplate) {\n        var data = {\n          className: [resColTd.className],\n          type: 'emptyCells'\n        };\n        this.parent.renderHeaderIndentTemplate(data, resColTd);\n      } else {\n        resColTd.appendChild(resColDiv);\n      }\n\n      var args = {\n        elementType: 'emptyCells',\n        element: resColTd\n      };\n      this.parent.trigger(renderCell, args);\n      tr.appendChild(resColTd);\n    }\n  }, {\n    key: \"hideResourceRows\",\n    value: function hideResourceRows(tBody) {\n      if (this.resourceCollection.length <= 1 || this.parent.virtualScrollModule) {\n        return;\n      }\n\n      var trCount = this.lastResourceLevel.length;\n\n      for (var i = 0; i < trCount; i++) {\n        var resData = this.lastResourceLevel[i].resourceData;\n        var res = this.lastResourceLevel[i].resource;\n\n        if (resData.ClassName === RESOURCE_PARENT_CLASS && !resData[res.expandedField] && !isNullOrUndefined(resData[res.expandedField])) {\n          var trCollection = [].slice.call(tBody.children);\n          var slicedCollection = trCollection.slice(i + 1, i + (parseInt(resData.Count, 10) + 1));\n          addClass(slicedCollection, HIDDEN_CLASS);\n        }\n      }\n    }\n  }, {\n    key: \"createResourceColumn\",\n    value: function createResourceColumn() {\n      var resColl = this.resourceCollection;\n      var resDiv = createElement('div', {\n        className: RESOURCE_COLUMN_WRAP_CLASS\n      });\n      var tbl = this.parent.activeView.createTableLayout(RESOURCE_COLUMN_TABLE_CLASS);\n\n      if (!this.parent.uiStateValues.isGroupAdaptive && this.parent.rowAutoHeight && this.parent.activeView.isTimelineView() && this.parent.activeViewOptions.group.resources.length > 0) {\n        addClass([tbl], AUTO_HEIGHT);\n      }\n\n      var tBody = tbl.querySelector('tbody');\n      var resData = this.generateTreeData(true);\n      this.countCalculation(resColl.slice(0, -2), resColl.slice(0, -1));\n      this.renderedResources = this.lastResourceLevel;\n\n      if (this.parent.virtualScrollModule) {\n        var resourceCount = this.parent.virtualScrollModule.getRenderedCount();\n        this.setExpandedResources();\n        resData = this.expandedResources.slice(0, resourceCount);\n        this.renderedResources = resData;\n      }\n\n      append(this.getContentRows(resData), tBody);\n      this.hideResourceRows(tBody);\n      tbl.appendChild(tBody);\n      resDiv.appendChild(tbl);\n      return resDiv;\n    }\n  }, {\n    key: \"setRenderedResources\",\n    value: function setRenderedResources() {\n      var resColl = this.resourceCollection; // eslint-disable-next-line @typescript-eslint/no-unused-vars\n\n      var temp = this.generateTreeData(true);\n      this.countCalculation(resColl.slice(0, -2), resColl.slice(0, -1));\n      this.renderedResources = this.lastResourceLevel;\n    }\n  }, {\n    key: \"setExpandedResources\",\n    value: function setExpandedResources() {\n      var resources = [];\n\n      for (var i = 0; i < this.lastResourceLevel.length; i++) {\n        var resource = this.lastResourceLevel[i].resourceData;\n        var count = resource.Count;\n        resources.push(this.lastResourceLevel[i]);\n        var isExpanded = resource[this.lastResourceLevel[i].resource.expandedField];\n\n        if (!isNullOrUndefined(isExpanded) && !isExpanded && count > 0) {\n          i = i + count;\n        }\n      }\n\n      this.expandedResources = resources;\n    }\n  }, {\n    key: \"getContentRows\",\n    value: function getContentRows(resData, isVirtualScroll) {\n      var resRows = [];\n      var left;\n      var rIndex;\n      var resColl = this.resourceCollection;\n      var tr = createElement('tr');\n      var td = createElement('td', {\n        attrs: {\n          tabindex: isVirtualScroll ? '-1' : '0'\n        }\n      });\n\n      for (var i = 0; i < resData.length; i++) {\n        var ntd = td.cloneNode();\n        rIndex = findIndexInData(resColl, 'name', resData[i].resource.name);\n\n        if (rIndex === resColl.length - 1) {\n          extend(resData[i].resourceData, {\n            ClassName: RESOURCE_CHILD_CLASS\n          });\n          this.renderedResources[i].className = [RESOURCE_CHILD_CLASS];\n        } else {\n          extend(resData[i].resourceData, {\n            ClassName: RESOURCE_PARENT_CLASS\n          });\n          this.renderedResources[i].className = [RESOURCE_PARENT_CLASS];\n        }\n\n        left = rIndex * this.leftPixel + 'px';\n\n        if (resData[i].resourceData.ClassName === RESOURCE_PARENT_CLASS && !isNullOrUndefined(resData[i].resourceData.Count) && resData[i].resourceData.Count > 0) {\n          var iconClass = void 0;\n\n          if (resData[i].resourceData[resColl[rIndex].expandedField] || isNullOrUndefined(resData[i].resourceData[resColl[rIndex].expandedField])) {\n            iconClass = RESOURCE_COLLAPSE_CLASS;\n          } else {\n            iconClass = RESOURCE_EXPAND_CLASS;\n          }\n\n          var iconDiv = createElement('div');\n          addClass([iconDiv], [RESOURCE_TREE_ICON_CLASS, iconClass]);\n          this.setMargin(iconDiv, left);\n          ntd.appendChild(iconDiv);\n\n          if (this.resourceCollection.length > 1) {\n            EventHandler.add(iconDiv, 'click', this.onTreeIconClick, this);\n          }\n        }\n\n        this.parent.activeView.setResourceHeaderContent(ntd, resData[i], RESOURCE_TEXT_CLASS);\n        ntd.setAttribute('data-group-index', resData[i].groupIndex.toString());\n        ntd.setAttribute('aria-label', resData[i].resourceData[resData[i].resource.textField] + ' resource');\n\n        if (!this.parent.activeViewOptions.resourceHeaderTemplate) {\n          this.setMargin(ntd.querySelector('.' + RESOURCE_TEXT_CLASS), left);\n        }\n\n        var classCollection = [RESOURCE_CELLS_CLASS, resData[i].resourceData.ClassName];\n        addClass([ntd], classCollection);\n        var args = {\n          elementType: 'resourceHeader',\n          element: ntd,\n          groupIndex: resData[i].groupIndex\n        };\n        this.parent.trigger(renderCell, args);\n        var ntr = tr.cloneNode();\n        ntr.appendChild(ntd);\n        resRows.push(ntr);\n      }\n\n      return resRows;\n    }\n  }, {\n    key: \"setMargin\",\n    value: function setMargin(element, value) {\n      if (!this.parent.enableRtl) {\n        element.style.marginLeft = value;\n      } else {\n        element.style.marginRight = value;\n      }\n    }\n  }, {\n    key: \"countCalculation\",\n    value: function countCalculation(parentCollection, wholeCollection) {\n      var collection;\n\n      for (var y = 0; y < parentCollection.length; y++) {\n        var data = parentCollection[parentCollection.length - (y + 1)].dataSource;\n\n        for (var x = 0; x < data.length; x++) {\n          var totalCount = 0;\n\n          if (this.parent.activeViewOptions.group.byGroupID) {\n            var query = new Query().where(wholeCollection[wholeCollection.length - 1].groupIDField, 'equal', data[x][parentCollection[parentCollection.length - (y + 1)].idField]);\n            collection = new DataManager(wholeCollection[wholeCollection.length - 1].dataSource).executeLocal(query);\n          } else {\n            collection = wholeCollection[wholeCollection.length - 1].dataSource;\n          }\n\n          for (var z = 0; z < collection.length; z++) {\n            totalCount = totalCount + parseInt(collection[z].Count, 10);\n          }\n\n          totalCount = totalCount + parseInt(data[x].Count, 10);\n          extend(data[x], {\n            Count: totalCount\n          });\n        }\n\n        wholeCollection = wholeCollection.slice(0, -1);\n      }\n    }\n  }, {\n    key: \"onTreeIconClick\",\n    value: function onTreeIconClick(e) {\n      var _this64 = this;\n\n      if (this.parent.eventTooltip) {\n        this.parent.eventTooltip.close();\n      }\n\n      var target = e.target;\n      var hide;\n      var trElement = closest(target, '.' + RESOURCE_PARENT_CLASS).parentElement;\n      var index = parseInt(trElement.children[0].getAttribute('data-group-index'), 10);\n      var args = {\n        cancel: false,\n        event: e,\n        groupIndex: index,\n        requestType: !target.classList.contains(RESOURCE_COLLAPSE_CLASS) ? 'resourceExpand' : 'resourceCollapse'\n      };\n      this.parent.trigger(actionBegin, args, function (actionArgs) {\n        if (!actionArgs.cancel) {\n          if (target.classList.contains(RESOURCE_COLLAPSE_CLASS)) {\n            classList(target, [RESOURCE_EXPAND_CLASS], [RESOURCE_COLLAPSE_CLASS]);\n            hide = true;\n          } else {\n            classList(target, [RESOURCE_COLLAPSE_CLASS], [RESOURCE_EXPAND_CLASS]);\n            hide = false;\n          }\n\n          var eventElements = [].slice.call(_this64.parent.element.querySelectorAll('.' + APPOINTMENT_CLASS));\n\n          var _iterator75 = _createForOfIteratorHelper(eventElements),\n              _step75;\n\n          try {\n            for (_iterator75.s(); !(_step75 = _iterator75.n()).done;) {\n              var element = _step75.value;\n              remove(element);\n            }\n          } catch (err) {\n            _iterator75.e(err);\n          } finally {\n            _iterator75.f();\n          }\n\n          if (_this64.parent.virtualScrollModule) {\n            _this64.updateVirtualContent(index, hide, e, target);\n          } else {\n            _this64.updateContent(index, hide);\n          }\n\n          var data = {\n            cssProperties: _this64.parent.getCssProperties(),\n            module: 'scroll'\n          };\n\n          _this64.parent.notify(scrollUiUpdate, data);\n\n          args = {\n            cancel: false,\n            event: e,\n            groupIndex: index,\n            requestType: target.classList.contains(RESOURCE_COLLAPSE_CLASS) ? 'resourceExpanded' : 'resourceCollapsed'\n          };\n\n          _this64.parent.refreshEvents(false);\n\n          _this64.parent.trigger(actionComplete, args);\n        }\n      });\n    }\n  }, {\n    key: \"updateContent\",\n    value: function updateContent(index, hide) {\n      var rowCollection = [];\n      var workCellCollection = [];\n      var headerRowCollection = [];\n      var pNode;\n      var clickedRes = this.lastResourceLevel[index].resourceData;\n      var resRows = [].slice.call(this.parent.element.querySelectorAll('.' + RESOURCE_COLUMN_WRAP_CLASS + ' ' + 'tr'));\n      var contentRows = [].slice.call(this.parent.element.querySelectorAll('.' + CONTENT_WRAP_CLASS + ' ' + 'tbody tr'));\n      var eventRows = [].slice.call(this.parent.element.querySelectorAll('.' + CONTENT_WRAP_CLASS + ' .' + APPOINTMENT_CONTAINER_CLASS));\n\n      for (var j = 0; j < clickedRes.Count; j++) {\n        rowCollection.push(resRows[index + j + 1]);\n        workCellCollection.push(contentRows[index + j + 1]);\n        headerRowCollection.push(eventRows[index + j + 1]);\n      }\n\n      var clonedCollection = this.lastResourceLevel;\n\n      for (var i = 0; i < rowCollection.length; i++) {\n        var expanded = true;\n        pNode = rowCollection[i].children[0].classList.contains(RESOURCE_PARENT_CLASS);\n        clonedCollection[index].resourceData[clonedCollection[index].resource.expandedField] = !hide;\n\n        if (hide) {\n          if (pNode) {\n            var trElem = rowCollection[i].querySelector('.' + RESOURCE_TREE_ICON_CLASS);\n\n            if (trElem) {\n              classList(trElem, [RESOURCE_EXPAND_CLASS], [RESOURCE_COLLAPSE_CLASS]);\n            }\n          }\n\n          if (!rowCollection[i].classList.contains(HIDDEN_CLASS)) {\n            addClass([rowCollection[i], workCellCollection[i], headerRowCollection[i]], HIDDEN_CLASS);\n          }\n        } else {\n          if (pNode) {\n            var rowIndex = rowCollection[i].rowIndex;\n\n            if (!clonedCollection[rowIndex].resourceData[clonedCollection[rowIndex].resource.expandedField] && !isNullOrUndefined(clonedCollection[rowIndex].resourceData[clonedCollection[rowIndex].resource.expandedField])) {\n              rowCollection.splice(i + 1, parseInt(clonedCollection[rowIndex].resourceData.Count, 10));\n              workCellCollection.splice(i + 1, parseInt(clonedCollection[rowIndex].resourceData.Count, 10));\n              headerRowCollection.splice(i + 1, parseInt(clonedCollection[rowIndex].resourceData.Count, 10));\n              expanded = false;\n            }\n\n            if (expanded) {\n              var _trElem = rowCollection[i].querySelector('.' + RESOURCE_TREE_ICON_CLASS);\n\n              if (_trElem) {\n                classList(_trElem, [RESOURCE_COLLAPSE_CLASS], [RESOURCE_EXPAND_CLASS]);\n              }\n            }\n          }\n\n          if (rowCollection[i].classList.contains(HIDDEN_CLASS)) {\n            removeClass([rowCollection[i], workCellCollection[i], headerRowCollection[i]], HIDDEN_CLASS);\n          }\n        }\n      }\n    } // eslint-disable-next-line @typescript-eslint/no-unused-vars\n\n  }, {\n    key: \"updateVirtualContent\",\n    value: function updateVirtualContent(index, expand, e, target) {\n      this.lastResourceLevel[index].resourceData[this.lastResourceLevel[index].resource.expandedField] = !expand;\n      this.setExpandedResources();\n      var resourceCount = this.parent.virtualScrollModule.getRenderedCount();\n      var startIndex = this.expandedResources.indexOf(this.renderedResources[0]);\n      this.renderedResources = this.expandedResources.slice(startIndex, startIndex + resourceCount);\n\n      if (this.renderedResources.length < resourceCount) {\n        var sIndex = this.expandedResources.length - resourceCount;\n        sIndex = sIndex > 0 ? sIndex : 0;\n        this.renderedResources = this.expandedResources.slice(sIndex, this.expandedResources.length);\n      }\n\n      var virtualTrack = this.parent.element.querySelector('.' + VIRTUAL_TRACK_CLASS);\n      this.parent.virtualScrollModule.updateVirtualTrackHeight(virtualTrack);\n      var resTable = this.parent.element.querySelector('.' + RESOURCE_COLUMN_WRAP_CLASS + ' ' + 'table');\n      var contentTable = this.parent.element.querySelector('.' + CONTENT_WRAP_CLASS + ' ' + 'table');\n      var eventTable = this.parent.element.querySelector('.' + EVENT_TABLE_CLASS);\n      this.parent.virtualScrollModule.updateContent(resTable, contentTable, eventTable, this.renderedResources);\n      var timeIndicator = this.parent.element.querySelector('.' + CURRENT_TIMELINE_CLASS);\n\n      if (!isNullOrUndefined(timeIndicator)) {\n        timeIndicator.style.height = this.parent.element.querySelector('.' + CONTENT_TABLE_CLASS).offsetHeight + 'px';\n      }\n    }\n  }, {\n    key: \"renderResourceHeader\",\n    value: function renderResourceHeader() {\n      var resourceWrapper = createElement('div', {\n        className: RESOURCE_TOOLBAR_CONTAINER\n      });\n      resourceWrapper.innerHTML = '<div class=\"' + RESOURCE_HEADER_TOOLBAR + '\"><div class=\"' + RESOURCE_MENU + '\">' + '<div class=\"e-icons ' + RESOURCE_MENU_ICON + '\"></div></div><div class=\"' + RESOURCE_LEVEL_TITLE + '\"></div></div>';\n\n      if (this.parent.currentView === 'MonthAgenda') {\n        var target = this.parent.activeView.getPanel().querySelector('.' + CONTENT_WRAP_CLASS);\n        target.insertBefore(resourceWrapper, target.querySelector('.' + WRAPPER_CONTAINER_CLASS));\n      } else {\n        this.parent.element.insertBefore(resourceWrapper, this.parent.element.querySelector('.' + TABLE_CONTAINER_CLASS));\n      }\n\n      this.renderResourceHeaderText();\n      EventHandler.add(resourceWrapper.querySelector('.' + RESOURCE_MENU_ICON), 'click', this.menuClick, this);\n    }\n  }, {\n    key: \"renderResourceTree\",\n    value: function renderResourceTree() {\n      this.popupOverlay = createElement('div', {\n        className: RESOURCE_TREE_POPUP_OVERLAY\n      });\n      var treeWrapper = createElement('div', {\n        className: RESOURCE_TREE_POPUP + ' e-popup-close'\n      });\n\n      if (this.parent.currentView === 'MonthAgenda') {\n        var target = this.parent.activeView.getPanel().querySelector('.' + WRAPPER_CONTAINER_CLASS);\n        target.insertBefore(treeWrapper, target.children[0]);\n        target.appendChild(this.popupOverlay);\n      } else {\n        this.parent.element.querySelector('.' + TABLE_CONTAINER_CLASS).appendChild(treeWrapper);\n        this.parent.element.querySelector('.' + TABLE_CONTAINER_CLASS).appendChild(this.popupOverlay);\n      }\n\n      var resourceTree = createElement('div', {\n        className: RESOURCE_TREE\n      });\n      treeWrapper.appendChild(resourceTree);\n      this.treeViewObj = new TreeView({\n        cssClass: this.parent.cssClass,\n        enableRtl: this.parent.enableRtl,\n        fields: {\n          dataSource: [].slice.call(this.generateTreeData()),\n          id: 'resourceId',\n          text: 'resourceName',\n          child: 'resourceChild'\n        },\n        nodeTemplate: this.parent.resourceHeaderTemplate,\n        nodeClicked: this.resourceClick.bind(this)\n      });\n      this.treeViewObj.appendTo(resourceTree);\n      this.treeViewObj.expandAll();\n      this.treePopup = new Popup(treeWrapper, {\n        targetType: 'relative',\n        actionOnScroll: 'none',\n        content: this.treeViewObj.element,\n        enableRtl: this.parent.enableRtl,\n        hideAnimation: {\n          name: 'SlideLeftOut',\n          duration: 500\n        },\n        showAnimation: {\n          name: 'SlideLeftIn',\n          duration: 500\n        },\n        viewPortElement: this.parent.element.querySelector('.' + (this.parent.currentView === 'MonthAgenda' ? WRAPPER_CONTAINER_CLASS : TABLE_CONTAINER_CLASS))\n      });\n      this.parent.on(documentClick, this.documentClick, this);\n    }\n  }, {\n    key: \"generateTreeData\",\n    value: function generateTreeData(isTimeLine) {\n      var _this65 = this;\n\n      var treeCollection = [];\n      var resTreeColl = [];\n      var groupIndex = 0;\n\n      var _loop12 = function _loop12(i, len) {\n        var treeHandler = function treeHandler(treeLevel, index, levelId) {\n          var resource = _this65.resourceCollection[index];\n          var treeArgs;\n          var resObj;\n\n          if (!isTimeLine) {\n            treeArgs = {\n              resourceId: levelId,\n              resourceName: treeLevel.resourceData[resource.textField],\n              resource: treeLevel.resource,\n              resourceData: treeLevel.resourceData\n            };\n          } else {\n            resObj = {\n              type: 'resourceHeader',\n              resource: treeLevel.resource,\n              resourceData: treeLevel.resourceData,\n              groupIndex: groupIndex,\n              groupOrder: treeLevel.groupOrder\n            };\n            resTreeColl.push(resObj);\n            groupIndex++;\n          }\n\n          if (treeLevel.child.length > 0 && !isTimeLine) {\n            treeArgs.resourceChild = [];\n          }\n\n          var count = 1;\n\n          var _iterator76 = _createForOfIteratorHelper(treeLevel.child),\n              _step76;\n\n          try {\n            for (_iterator76.s(); !(_step76 = _iterator76.n()).done;) {\n              var tree = _step76.value;\n\n              if (!isTimeLine) {\n                treeArgs.resourceChild.push(treeHandler(tree, index + 1, levelId + '-' + count));\n              } else {\n                treeHandler(tree, index + 1, levelId + '-' + count);\n              }\n\n              count += 1;\n            }\n          } catch (err) {\n            _iterator76.e(err);\n          } finally {\n            _iterator76.f();\n          }\n\n          if (isTimeLine) {\n            extend(resObj.resourceData, {\n              Count: count - 1\n            });\n          }\n\n          return treeArgs;\n        };\n\n        if (!isTimeLine) {\n          treeCollection.push(treeHandler(_this65.resourceTreeLevel[i], 0, (i + 1).toString()));\n        } else {\n          treeHandler(_this65.resourceTreeLevel[i], 0, (i + 1).toString());\n        }\n      };\n\n      for (var i = 0, len = this.resourceTreeLevel.length; i < len; i++) {\n        _loop12(i, len);\n      }\n\n      if (isTimeLine) {\n        this.lastResourceLevel = resTreeColl;\n        return resTreeColl;\n      } else {\n        return treeCollection;\n      }\n    }\n  }, {\n    key: \"renderResourceHeaderText\",\n    value: function renderResourceHeaderText() {\n      var _this66 = this;\n\n      var resource = this.lastResourceLevel[this.parent.uiStateValues.groupIndex];\n      var headerCollection = [];\n\n      var _loop13 = function _loop13(i, len) {\n        var resourceLevel = _this66.resourceCollection[i];\n        var resourceText = resourceLevel.dataSource.filter(function (resData) {\n          return resData[resourceLevel.idField] === resource.groupOrder[i];\n        });\n        var resourceName = createElement('div', {\n          className: RESOURCE_NAME,\n          innerHTML: resourceText[0][resourceLevel.textField]\n        });\n        headerCollection.push(resourceName);\n        var levelIcon = createElement('div', {\n          className: 'e-icons e-icon-next'\n        });\n        headerCollection.push(levelIcon);\n      };\n\n      for (var i = 0, len = resource.groupOrder.length; i < len; i++) {\n        _loop13(i, len);\n      }\n\n      headerCollection.pop();\n      var target = this.parent.currentView === 'MonthAgenda' ? this.parent.activeView.getPanel() : this.parent.element;\n      var headerWrapper = target.querySelector('.' + RESOURCE_LEVEL_TITLE);\n      removeChildren(headerWrapper);\n\n      for (var _i8 = 0, _headerCollection = headerCollection; _i8 < _headerCollection.length; _i8++) {\n        var header = _headerCollection[_i8];\n        headerWrapper.appendChild(header);\n      }\n\n      if (this.lastResourceLevel.length === 1) {\n        addClass([this.parent.element.querySelector('.' + RESOURCE_MENU)], DISABLE_CLASS);\n      }\n    } // eslint-disable-next-line @typescript-eslint/no-unused-vars\n\n  }, {\n    key: \"menuClick\",\n    value: function menuClick(event) {\n      if (this.parent.element.querySelector('.' + RESOURCE_TREE_POPUP).classList.contains(POPUP_OPEN)) {\n        this.treePopup.hide();\n        removeClass([this.popupOverlay], ENABLE_CLASS);\n      } else {\n        var treeNodes = [].slice.call(this.treeViewObj.element.querySelectorAll('.e-list-item:not(.e-has-child)'));\n        removeClass(treeNodes, 'e-active');\n        addClass([treeNodes[this.parent.uiStateValues.groupIndex]], 'e-active');\n        this.treePopup.show();\n        addClass([this.popupOverlay], ENABLE_CLASS);\n      }\n    }\n  }, {\n    key: \"selectResourceByIndex\",\n    value: function selectResourceByIndex(groupIndex) {\n      if (this.lastResourceLevel && groupIndex > -1 && groupIndex < this.lastResourceLevel.length) {\n        this.triggerEvents(groupIndex);\n      }\n    }\n  }, {\n    key: \"resourceClick\",\n    value: function resourceClick(event) {\n      if (!event.node.classList.contains('e-has-child')) {\n        this.treePopup.hide();\n        removeClass([this.popupOverlay], ENABLE_CLASS);\n        var treeNodes = [].slice.call(this.treeViewObj.element.querySelectorAll('.e-list-item:not(.e-has-child)'));\n        var groupIndex = treeNodes.indexOf(event.node);\n        this.triggerEvents(groupIndex, event);\n        event.event.preventDefault();\n      }\n    }\n  }, {\n    key: \"triggerEvents\",\n    value: function triggerEvents(groupIndex, event) {\n      var _this67 = this;\n\n      var args = {\n        cancel: false,\n        event: event ? event.event : null,\n        groupIndex: groupIndex,\n        requestType: 'resourceChange'\n      };\n      this.parent.trigger(actionBegin, args, function (actionArgs) {\n        if (!actionArgs.cancel) {\n          _this67.parent.uiStateValues.groupIndex = actionArgs.groupIndex;\n\n          _this67.parent.renderModule.render(_this67.parent.currentView);\n\n          args = {\n            cancel: false,\n            event: event ? event.event : null,\n            groupIndex: _this67.parent.uiStateValues.groupIndex,\n            requestType: 'resourceChanged'\n          };\n\n          _this67.parent.trigger(actionComplete, args);\n        }\n      });\n    }\n  }, {\n    key: \"documentClick\",\n    value: function documentClick(args) {\n      if (closest(args.event.target, '.' + RESOURCE_TREE_POPUP)) {\n        return;\n      }\n\n      var treeWrapper = this.parent.element.querySelector('.' + RESOURCE_TREE_POPUP);\n\n      if (treeWrapper && treeWrapper.classList.contains(POPUP_OPEN)) {\n        this.treePopup.hide();\n        removeClass([this.popupOverlay], ENABLE_CLASS);\n      }\n    }\n  }, {\n    key: \"bindResourcesData\",\n    value: function bindResourcesData(isSetModel) {\n      var _this68 = this;\n\n      this.parent.showSpinner();\n      var promises = [];\n\n      var _iterator77 = _createForOfIteratorHelper(this.parent.resources),\n          _step77;\n\n      try {\n        for (_iterator77.s(); !(_step77 = _iterator77.n()).done;) {\n          var resource = _step77.value;\n          var dataModule = new Data(resource.dataSource, resource.query);\n          promises.push(dataModule.getData(dataModule.generateQuery()));\n        }\n      } catch (err) {\n        _iterator77.e(err);\n      } finally {\n        _iterator77.f();\n      }\n\n      Promise.all(promises).then(function (e) {\n        return _this68.dataManagerSuccess(e, isSetModel);\n      }).catch(function (e) {\n        return _this68.parent.crudModule.dataManagerFailure(e);\n      });\n    }\n  }, {\n    key: \"dataManagerSuccess\",\n    value: function dataManagerSuccess(e, isSetModel) {\n      if (!this.parent || this.parent && this.parent.isDestroyed) {\n        return;\n      }\n\n      this.parent.resourceCollection = [];\n\n      for (var i = 0, length = e.length; i < length; i++) {\n        var resource = this.parent.resources[i];\n        var resourceObj = this.getResourceModel(resource, e[i].result);\n        this.parent.resourceCollection.push(resourceObj);\n      }\n\n      this.refreshLayout(isSetModel);\n    }\n  }, {\n    key: \"getResourceModel\",\n    value: function getResourceModel(resource, resourceData) {\n      var resourceObj = {\n        field: resource.field,\n        title: resource.title,\n        name: resource.name,\n        allowMultiple: resource.allowMultiple,\n        dataSource: resourceData || resource.dataSource,\n        idField: resource.idField,\n        textField: resource.textField,\n        groupIDField: resource.groupIDField,\n        colorField: resource.colorField,\n        startHourField: resource.startHourField,\n        endHourField: resource.endHourField,\n        workDaysField: resource.workDaysField,\n        expandedField: resource.expandedField,\n        cssClassField: resource.cssClassField\n      };\n      return resourceObj;\n    }\n  }, {\n    key: \"refreshLayout\",\n    value: function refreshLayout(isSetModel) {\n      if (isNullOrUndefined(this.parent.uiStateValues.groupIndex) || !this.parent.enablePersistence) {\n        this.parent.uiStateValues.groupIndex = 0;\n      }\n\n      this.parent.renderElements(isSetModel);\n    }\n  }, {\n    key: \"setResourceCollection\",\n    value: function setResourceCollection() {\n      var requiredResources = [];\n      this.resourceCollection = [];\n      this.colorIndex = null;\n\n      if (this.parent.activeViewOptions.group.resources.length > 0) {\n        var _iterator78 = _createForOfIteratorHelper(this.parent.activeViewOptions.group.resources),\n            _step78;\n\n        try {\n          for (_iterator78.s(); !(_step78 = _iterator78.n()).done;) {\n            var resource = _step78.value;\n\n            var _index6 = findIndexInData(this.parent.resourceCollection, 'name', resource);\n\n            if (_index6 >= 0) {\n              requiredResources.push(this.parent.resourceCollection[_index6]);\n            }\n          }\n        } catch (err) {\n          _iterator78.e(err);\n        } finally {\n          _iterator78.f();\n        }\n      } else if (this.parent.resourceCollection.length > 0) {\n        requiredResources = this.parent.resourceCollection;\n      }\n\n      var index = 0;\n\n      var _iterator79 = _createForOfIteratorHelper(requiredResources),\n          _step79;\n\n      try {\n        for (_iterator79.s(); !(_step79 = _iterator79.n()).done;) {\n          var _resource = _step79.value;\n          var resources = this.getResourceModel(_resource);\n\n          if (_resource.name === this.parent.eventSettings.resourceColorField) {\n            this.colorIndex = index;\n          }\n\n          index++;\n          this.resourceCollection.push(resources);\n        }\n      } catch (err) {\n        _iterator79.e(err);\n      } finally {\n        _iterator79.f();\n      }\n\n      if (isNullOrUndefined(this.colorIndex)) {\n        this.colorIndex = this.resourceCollection.length - 1;\n      }\n    }\n  }, {\n    key: \"generateResourceLevels\",\n    value: function generateResourceLevels(innerDates, isTimeLine) {\n      var _this69 = this;\n\n      var resources = this.resourceCollection;\n      var resTreeGroup = [];\n      var lastColumnDates = [];\n\n      var group = function group(resources, index, prevResource, prevResourceData, prevOrder) {\n        var resTree = [];\n        var resource = resources[0];\n\n        if (resource) {\n          var data;\n\n          if (prevResourceData && _this69.parent.activeViewOptions.group.byGroupID) {\n            var id = prevResourceData[prevResource.idField];\n            data = resource.dataSource.filter(function (e) {\n              return e[resource.groupIDField] === id;\n            });\n          } else {\n            data = resource.dataSource;\n          }\n\n          for (var i = 0; i < data.length; i++) {\n            var groupOrder = [];\n\n            if (prevOrder && prevOrder.length > 0) {\n              groupOrder = groupOrder.concat(prevOrder);\n            }\n\n            groupOrder.push(data[i][resource.idField]);\n            var items = group(resources.slice(1), index + 1, resource, data[i], groupOrder); // Here validate child item empty top level resource only\n\n            if (index === 0 && items.length === 0 && _this69.resourceCollection.length > 1) {\n              continue;\n            }\n\n            var dateCol = [];\n            var renderDates = _this69.parent.activeView.renderDates;\n            var resWorkDays = void 0;\n\n            if (!_this69.parent.activeViewOptions.group.byDate && index + 1 === _this69.resourceCollection.length) {\n              var workDays = data[i][resource.workDaysField];\n              var resStartHour = data[i][resource.startHourField];\n              var resEndHour = data[i][resource.endHourField];\n\n              if (workDays && workDays.length > 0) {\n                renderDates = _this69.parent.activeView.getRenderDates(workDays);\n                resWorkDays = workDays;\n                dateCol = _this69.parent.activeView.getDateSlots(renderDates, workDays);\n              } else {\n                resWorkDays = _this69.parent.activeViewOptions.workDays;\n                dateCol = innerDates;\n              }\n\n              var dateSlots = _this69.generateCustomHours(dateCol, resStartHour, resEndHour, groupOrder);\n\n              lastColumnDates = lastColumnDates.concat(dateSlots);\n            }\n\n            var resCssClass = data[i][resource.cssClassField];\n            var slotData = {\n              type: 'resourceHeader',\n              className: ['e-resource-cells'],\n              resourceLevelIndex: index,\n              groupOrder: groupOrder,\n              resource: resource,\n              resourceData: data[i],\n              colSpan: _this69.parent.activeViewOptions.group.byDate ? 1 : dateCol.length,\n              renderDates: renderDates,\n              workDays: resWorkDays,\n              cssClass: resCssClass,\n              child: items\n            };\n            resTree.push(slotData);\n          }\n\n          if (!resTreeGroup[index]) {\n            resTreeGroup[index] = [];\n          }\n\n          if (resTree.length > 0) {\n            resTreeGroup[index].push(resTree);\n          }\n\n          return resTree;\n        }\n\n        return [];\n      };\n\n      this.resourceTreeLevel = group(resources, 0);\n      return isTimeLine ? [] : this.generateHeaderLevels(resTreeGroup, lastColumnDates, innerDates);\n    }\n  }, {\n    key: \"generateCustomHours\",\n    value: function generateCustomHours(renderDates, startHour, endHour, groupOrder) {\n      var dateSlots = extend([], renderDates, null, true);\n\n      var _iterator80 = _createForOfIteratorHelper(dateSlots),\n          _step80;\n\n      try {\n        for (_iterator80.s(); !(_step80 = _iterator80.n()).done;) {\n          var dateSlot = _step80.value;\n\n          if (startHour) {\n            dateSlot.startHour = this.parent.getStartEndTime(startHour);\n          }\n\n          if (endHour) {\n            dateSlot.endHour = this.parent.getStartEndTime(endHour);\n          }\n\n          if (groupOrder) {\n            dateSlot.groupOrder = groupOrder;\n          }\n        }\n      } catch (err) {\n        _iterator80.e(err);\n      } finally {\n        _iterator80.f();\n      }\n\n      return dateSlots;\n    }\n  }, {\n    key: \"generateHeaderLevels\",\n    value: function generateHeaderLevels(resTreeGroup, lastColumnDates, headerDates) {\n      var headerLevels = [];\n\n      for (var i = resTreeGroup.length - 1; i >= 0; i--) {\n        var temp = 0;\n\n        var _iterator81 = _createForOfIteratorHelper(resTreeGroup[i]),\n            _step81;\n\n        try {\n          for (_iterator81.s(); !(_step81 = _iterator81.n()).done;) {\n            var currentLevelChilds = _step81.value;\n\n            var _iterator82 = _createForOfIteratorHelper(currentLevelChilds),\n                _step82;\n\n            try {\n              for (_iterator82.s(); !(_step82 = _iterator82.n()).done;) {\n                var currentLevelChild = _step82.value;\n\n                if (resTreeGroup[i + 1] && resTreeGroup[i + 1].length > 0) {\n                  var nextLevelChilds = resTreeGroup[i + 1][temp];\n\n                  if (!nextLevelChilds) {\n                    continue;\n                  }\n\n                  var colSpan = 0;\n\n                  var _iterator83 = _createForOfIteratorHelper(nextLevelChilds),\n                      _step83;\n\n                  try {\n                    for (_iterator83.s(); !(_step83 = _iterator83.n()).done;) {\n                      var nextLevelChild = _step83.value;\n\n                      if (!this.parent.activeViewOptions.group.byGroupID || this.parent.activeViewOptions.group.byGroupID && nextLevelChild.resourceData[nextLevelChild.resource.groupIDField] === currentLevelChild.resourceData[currentLevelChild.resource.idField]) {\n                        colSpan += nextLevelChild.colSpan;\n                      }\n                    }\n                  } catch (err) {\n                    _iterator83.e(err);\n                  } finally {\n                    _iterator83.f();\n                  }\n\n                  currentLevelChild.colSpan = colSpan;\n                }\n\n                currentLevelChild.groupIndex = temp;\n                temp++;\n                headerLevels[currentLevelChild.resourceLevelIndex] = headerLevels[currentLevelChild.resourceLevelIndex] || [];\n                headerLevels[currentLevelChild.resourceLevelIndex].push(currentLevelChild);\n              }\n            } catch (err) {\n              _iterator82.e(err);\n            } finally {\n              _iterator82.f();\n            }\n          }\n        } catch (err) {\n          _iterator81.e(err);\n        } finally {\n          _iterator81.f();\n        }\n      }\n\n      this.lastResourceLevel = headerLevels.slice(-1)[0] || [];\n\n      if (!this.parent.activeViewOptions.group.byDate) {\n        var index = 0;\n\n        var _iterator84 = _createForOfIteratorHelper(this.lastResourceLevel),\n            _step84;\n\n        try {\n          for (_iterator84.s(); !(_step84 = _iterator84.n()).done;) {\n            var lastLevelResource = _step84.value;\n\n            for (var _i9 = 0; _i9 < lastLevelResource.colSpan; _i9++) {\n              lastColumnDates[index].groupIndex = lastLevelResource.groupIndex;\n              index++;\n            }\n          }\n        } catch (err) {\n          _iterator84.e(err);\n        } finally {\n          _iterator84.f();\n        }\n\n        headerLevels.push(lastColumnDates);\n        return headerLevels;\n      }\n\n      var dateHeaderLevels = [];\n      var levels = extend([], headerLevels, null, true);\n      var dateColSpan = 0;\n\n      var _iterator85 = _createForOfIteratorHelper(levels[0]),\n          _step85;\n\n      try {\n        for (_iterator85.s(); !(_step85 = _iterator85.n()).done;) {\n          var firstRowTd = _step85.value;\n          dateColSpan += firstRowTd.colSpan;\n        }\n      } catch (err) {\n        _iterator85.e(err);\n      } finally {\n        _iterator85.f();\n      }\n\n      var datesColumn = [];\n\n      var _iterator86 = _createForOfIteratorHelper(headerDates),\n          _step86;\n\n      try {\n        for (_iterator86.s(); !(_step86 = _iterator86.n()).done;) {\n          var headerDate = _step86.value;\n          headerDate.colSpan = dateColSpan;\n          datesColumn.push(headerDate);\n          var resGroup = extend([], levels, null, true);\n\n          for (var k = 0, length = resGroup.length; k < length; k++) {\n            if (k === resGroup.length - 1) {\n              var _iterator87 = _createForOfIteratorHelper(resGroup[k]),\n                  _step87;\n\n              try {\n                for (_iterator87.s(); !(_step87 = _iterator87.n()).done;) {\n                  var resTd = _step87.value;\n                  resTd.date = headerDate.date;\n                  resTd.workDays = headerDate.workDays;\n                  resTd.startHour = this.parent.getStartEndTime(resTd.resourceData[resTd.resource.startHourField]) || headerDate.startHour;\n                  resTd.endHour = this.parent.getStartEndTime(resTd.resourceData[resTd.resource.endHourField]) || headerDate.endHour;\n                }\n              } catch (err) {\n                _iterator87.e(err);\n              } finally {\n                _iterator87.f();\n              }\n            }\n\n            if (!dateHeaderLevels[k]) {\n              dateHeaderLevels[k] = [];\n            }\n\n            dateHeaderLevels[k] = dateHeaderLevels[k].concat(resGroup[k]);\n          }\n        }\n      } catch (err) {\n        _iterator86.e(err);\n      } finally {\n        _iterator86.f();\n      }\n\n      dateHeaderLevels.unshift(datesColumn);\n      return dateHeaderLevels;\n    }\n  }, {\n    key: \"setResourceValues\",\n    value: function setResourceValues(eventObj, groupIndex) {\n      var _this70 = this;\n\n      var setValues = function setValues(index, field, value) {\n        if (_this70.resourceCollection[index].allowMultiple && _this70.parent.activeViewOptions.group.allowGroupEdit) {\n          eventObj[field] = [value];\n        } else {\n          eventObj[field] = value;\n        }\n      };\n\n      if (groupIndex === void 0) {\n        groupIndex = this.parent.uiStateValues.isGroupAdaptive ? this.parent.uiStateValues.groupIndex : this.parent.activeCellsData.groupIndex;\n      }\n\n      if (this.parent.activeViewOptions.group.resources.length > 0 && !isNullOrUndefined(groupIndex)) {\n        var groupOrder = this.lastResourceLevel[groupIndex].groupOrder;\n\n        for (var index = 0; index < this.resourceCollection.length; index++) {\n          setValues(index, this.resourceCollection[index].field, groupOrder[index]);\n        }\n      } else if (this.parent.resourceCollection.length > 0) {\n        for (var _index7 = 0; _index7 < this.resourceCollection.length; _index7++) {\n          var data = this.resourceCollection[_index7].dataSource[0];\n\n          if (data) {\n            setValues(_index7, this.resourceCollection[_index7].field, data[this.resourceCollection[_index7].idField]);\n          }\n        }\n      }\n    }\n  }, {\n    key: \"getResourceColor\",\n    value: function getResourceColor(eventObj, groupOrder) {\n      var colorFieldIndex = !isNullOrUndefined(groupOrder) && this.colorIndex > groupOrder.length - 1 ? groupOrder.length - 1 : this.colorIndex;\n      var resource = this.resourceCollection[colorFieldIndex];\n\n      if (isNullOrUndefined(groupOrder) && this.parent.activeViewOptions.group.allowGroupEdit && resource.allowMultiple) {\n        return undefined;\n      }\n\n      var id = isNullOrUndefined(groupOrder) ? eventObj[resource.field] : groupOrder[colorFieldIndex];\n      var data = this.filterData(resource.dataSource, resource.idField, id);\n\n      if (data.length > 0) {\n        return data[0][resource.colorField];\n      }\n\n      return undefined;\n    }\n  }, {\n    key: \"getCssClass\",\n    value: function getCssClass(eventObj) {\n      var resource = this.resourceCollection.slice(-1)[0];\n\n      if (this.parent.activeViewOptions.group.allowGroupEdit && resource.allowMultiple) {\n        return undefined;\n      }\n\n      var data = this.filterData(resource.dataSource, resource.idField, eventObj[resource.field]);\n\n      if (data.length > 0) {\n        return data[0][resource.cssClassField];\n      }\n\n      return undefined;\n    }\n  }, {\n    key: \"getResourceRenderDates\",\n    value: function getResourceRenderDates() {\n      // eslint-disable-next-line prefer-spread\n      var resourceDates = [].concat.apply([], this.lastResourceLevel.map(function (e) {\n        return e.renderDates;\n      }));\n\n      var removeDuplicateDates = function removeDuplicateDates(dateColl) {\n        return dateColl.filter(function (date, index, dates) {\n          return dates.map(function (dateObj) {\n            return dateObj.getTime();\n          }).indexOf(date.getTime()) === index;\n        });\n      };\n\n      var renderDates = removeDuplicateDates(resourceDates);\n      renderDates.sort(function (a, b) {\n        return a.getTime() - b.getTime();\n      });\n      return renderDates;\n    }\n  }, {\n    key: \"filterData\",\n    value: function filterData(dataSource, field, value) {\n      return dataSource.filter(function (data) {\n        return data[field] === value;\n      });\n    }\n  }, {\n    key: \"getResourceData\",\n    value: function getResourceData(eventObj, index, groupEditIndex) {\n      if (this.parent.activeViewOptions.group.allowGroupEdit) {\n        var resourceObj = {};\n\n        var _iterator88 = _createForOfIteratorHelper(groupEditIndex),\n            _step88;\n\n        try {\n          for (_iterator88.s(); !(_step88 = _iterator88.n()).done;) {\n            var groupIndex = _step88.value;\n            var resourceLevel = this.lastResourceLevel[groupIndex].groupOrder;\n\n            for (var level = 0, length = resourceLevel.length; level < length; level++) {\n              var fieldName = this.resourceCollection[level].field;\n\n              if (isNullOrUndefined(resourceObj[fieldName])) {\n                resourceObj[fieldName] = [];\n              }\n\n              resourceObj[fieldName].push(resourceLevel[level]);\n            }\n          }\n        } catch (err) {\n          _iterator88.e(err);\n        } finally {\n          _iterator88.f();\n        }\n\n        eventObj = extend(eventObj, resourceObj);\n      } else {\n        for (var _level = 0, _length = this.resourceCollection.length; _level < _length; _level++) {\n          if (this.lastResourceLevel[index]) {\n            eventObj[this.resourceCollection[_level].field] = this.lastResourceLevel[index].groupOrder[_level];\n          }\n        }\n      }\n    }\n  }, {\n    key: \"addResource\",\n    value: function addResource(resources, name, index) {\n      var resourceCollection = resources instanceof Array ? resources : [resources];\n\n      var _iterator89 = _createForOfIteratorHelper(this.parent.resourceCollection),\n          _step89;\n\n      try {\n        var _loop14 = function _loop14() {\n          var resource = _step89.value;\n\n          if (resource.name === name) {\n            resourceCollection.forEach(function (addObj, i) {\n              return new DataManager({\n                json: resource.dataSource\n              }).insert(addObj, null, null, index + i);\n            });\n            return \"break\";\n          }\n        };\n\n        for (_iterator89.s(); !(_step89 = _iterator89.n()).done;) {\n          var _ret2 = _loop14();\n\n          if (_ret2 === \"break\") break;\n        }\n      } catch (err) {\n        _iterator89.e(err);\n      } finally {\n        _iterator89.f();\n      }\n\n      this.refreshLayout(true);\n    }\n  }, {\n    key: \"removeResource\",\n    value: function removeResource(resourceId, name) {\n      var resourceCollection = resourceId instanceof Array ? resourceId : [resourceId];\n\n      var _iterator90 = _createForOfIteratorHelper(this.parent.resourceCollection),\n          _step90;\n\n      try {\n        var _loop15 = function _loop15() {\n          var resource = _step90.value;\n\n          if (resource.name === name) {\n            resourceCollection.forEach(function (removeObj) {\n              return new DataManager({\n                json: resource.dataSource\n              }).remove(resource.idField, removeObj);\n            });\n            return \"break\";\n          }\n        };\n\n        for (_iterator90.s(); !(_step90 = _iterator90.n()).done;) {\n          var _ret3 = _loop15();\n\n          if (_ret3 === \"break\") break;\n        }\n      } catch (err) {\n        _iterator90.e(err);\n      } finally {\n        _iterator90.f();\n      }\n\n      this.refreshLayout(true);\n    }\n  }, {\n    key: \"getIndexFromResourceId\",\n    value: function getIndexFromResourceId(id, name, resourceData, event, parentField) {\n      name = name || this.parent.resourceCollection.slice(-1)[0].name;\n\n      if (isNullOrUndefined(resourceData)) {\n        resourceData = this.resourceCollection.filter(function (e) {\n          return e.name === name;\n        })[0];\n\n        if (isNullOrUndefined(resourceData)) {\n          return null;\n        }\n      }\n\n      var resource = resourceData.dataSource.filter(function (e) {\n        if (event && e[resourceData.idField] === id) {\n          if (e[resourceData.groupIDField] === event[parentField]) {\n            return e[resourceData.idField] === id;\n          }\n\n          return null;\n        } else {\n          return e[resourceData.idField] === id;\n        }\n      })[0];\n      return this.lastResourceLevel.map(function (e) {\n        return e.resourceData;\n      }).indexOf(resource);\n    }\n  }, {\n    key: \"resourceExpand\",\n    value: function resourceExpand(id, name, hide) {\n      var resource = this.parent.resourceCollection.filter(function (e) {\n        if (e.name === name) {\n          return e;\n        }\n\n        return null;\n      })[0];\n      var index = 0;\n      var resourceData = resource.dataSource.filter(function (e) {\n        return e[resource.idField] === id;\n      })[0];\n\n      if (!this.parent.activeViewOptions.group.byGroupID) {\n        index = this.getIndexFromResourceId(id, name, resource);\n      } else {\n        index = this.lastResourceLevel.map(function (e) {\n          return e.resourceData;\n        }).indexOf(resourceData);\n      }\n\n      var target = this.parent.element.querySelector('.' + RESOURCE_COLUMN_WRAP_CLASS + ' ' + \"[data-group-index=\\\"\".concat(index, \"\\\"]\") + ' ' + '.' + RESOURCE_TREE_ICON_CLASS);\n\n      if (target) {\n        if (target.classList.contains(RESOURCE_EXPAND_CLASS) && !hide) {\n          target.click();\n        } else if (target.classList.contains(RESOURCE_COLLAPSE_CLASS) && hide) {\n          target.click();\n        }\n      }\n    }\n  }, {\n    key: \"resourceScroll\",\n    value: function resourceScroll(id, name) {\n      if (this.parent.isAdaptive || ['Agenda', 'MonthAgenda'].indexOf(this.parent.currentView) > -1) {\n        return;\n      }\n\n      var levelName = name || this.parent.resourceCollection.slice(-1)[0].name;\n      var levelIndex = this.parent.resourceCollection.length - 1;\n      var resource = this.parent.resourceCollection.filter(function (e, index) {\n        if (e.name === levelName) {\n          levelIndex = index;\n          return e;\n        }\n\n        return null;\n      })[0];\n      var scrollElement = this.parent.element.querySelector('.' + CONTENT_WRAP_CLASS);\n      var index = 0;\n\n      if (this.parent.activeView.isTimelineView()) {\n        if (!this.parent.activeViewOptions.group.byGroupID) {\n          index = this.getIndexFromResourceId(id, levelName, resource);\n        } else {\n          var resourceData = resource.dataSource.filter(function (e) {\n            return e[resource.idField] === id;\n          })[0];\n          index = this.lastResourceLevel.map(function (e) {\n            return e.resourceData;\n          }).indexOf(resourceData);\n        }\n\n        if (this.parent.virtualScrollModule) {\n          var virtual = this.parent.element.querySelector('.' + VIRTUAL_TRACK_CLASS);\n          var averageRowHeight = Math.round(virtual.offsetHeight / this.expandedResources.length);\n\n          if (this.parent.rowAutoHeight) {\n            scrollElement.scrollTop = 0;\n            this.parent.virtualScrollModule.virtualScrolling();\n          }\n\n          scrollElement.scrollTop = index * averageRowHeight - (this.parent.virtualScrollModule.bufferCount - 1) * averageRowHeight;\n          this.parent.virtualScrollModule.virtualScrolling();\n\n          if (this.parent.rowAutoHeight) {\n            var td = this.parent.element.querySelector(\".\".concat(WORK_CELLS_CLASS, \"[data-group-index=\\\"\").concat(index, \"\\\"]\"));\n\n            if (td && !td.parentElement.classList.contains(HIDDEN_CLASS)) {\n              scrollElement.scrollTop = scrollElement.scrollTop < td.offsetTop ? td.offsetTop : scrollElement.scrollTop + td.offsetTop;\n            }\n          } else {\n            scrollElement.scrollTop = index * averageRowHeight;\n          }\n        } else {\n          var _td = this.parent.element.querySelector(\".\".concat(WORK_CELLS_CLASS, \"[data-group-index=\\\"\").concat(index, \"\\\"]\"));\n\n          if (_td && !_td.parentElement.classList.contains(HIDDEN_CLASS)) {\n            scrollElement.scrollTop = _td.offsetTop;\n          }\n        }\n      } else {\n        if (!this.parent.activeViewOptions.group.byGroupID) {\n          index = this.getIndexFromResourceId(id, levelName, resource);\n        } else {\n          if (levelName === this.parent.resourceCollection.slice(-1)[0].name) {\n            index = this.lastResourceLevel.map(function (e) {\n              return e.resourceData[resource.idField];\n            }).indexOf(id);\n          } else {\n            index = resource.dataSource.map(function (e) {\n              return e[resource.idField];\n            }).indexOf(id);\n          }\n        }\n\n        var offsetTarget = this.parent.element.querySelector(\".\".concat(HEADER_ROW_CLASS, \":nth-child(\").concat(levelIndex + 1, \")\"));\n        var offset = [].slice.call(offsetTarget.children).map(function (node) {\n          return node.offsetLeft;\n        });\n        scrollElement.scrollLeft = offset[index];\n      }\n    }\n  }, {\n    key: \"destroy\",\n    value: function destroy() {\n      this.parent.off(documentClick, this.documentClick);\n\n      if (this.treeViewObj) {\n        this.treeViewObj.destroy();\n        this.treeViewObj = null;\n      }\n\n      if (this.treePopup) {\n        this.treePopup.destroy();\n        this.treePopup = null;\n        remove(this.parent.element.querySelector('.' + RESOURCE_TREE_POPUP));\n        remove(this.parent.element.querySelector('.' + RESOURCE_TREE_POPUP_OVERLAY));\n      }\n\n      var resToolBarEle = this.parent.element.querySelector('.' + RESOURCE_TOOLBAR_CONTAINER);\n\n      if (resToolBarEle) {\n        remove(resToolBarEle);\n      }\n    }\n  }]);\n\n  return ResourceBase;\n}();\n\nvar __decorate = undefined && undefined.__decorate || function (decorators, target, key, desc) {\n  var c = arguments.length,\n      r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc,\n      d;\n  if (typeof Reflect === \"object\" && typeof Reflect.decorate === \"function\") r = Reflect.decorate(decorators, target, key, desc);else for (var i = decorators.length - 1; i >= 0; i--) {\n    if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;\n  }\n  return c > 3 && r && Object.defineProperty(target, key, r), r;\n};\n/* eslint-disable @typescript-eslint/no-explicit-any */\n\n/**\n * Represents the Schedule component that displays a list of events scheduled against specific date and timings,\n * thus helping us to plan and manage it properly.\n * ```html\n * <div id=\"schedule\"></div>\n * ```\n * ```typescript\n * <script>\n *   var scheduleObj = new Schedule();\n *   scheduleObj.appendTo(\"#schedule\");\n * </script>\n * ```\n */\n\n\nvar Schedule = /*#__PURE__*/function (_Component2) {\n  _inherits(Schedule, _Component2);\n\n  var _super14 = _createSuper(Schedule);\n\n  /**\n   * Constructor for creating the Schedule widget\n   *\n   * @param {ScheduleModel} options Accepts the schedule model properties to initiate the rendering\n   * @param {string | HTMLElement} element Accepts the DOM element reference\n   */\n  function Schedule(options, element) {\n    _classCallCheck(this, Schedule);\n\n    return _super14.call(this, options, element);\n  }\n  /**\n   * Core method that initializes the control rendering.\n   *\n   * @returns {void}\n   * @private\n   */\n\n\n  _createClass(Schedule, [{\n    key: \"render\",\n    value: function render() {\n      var addClasses = [];\n      var removeClasses = [];\n      addClasses.push(ROOT);\n\n      if (this.enableRtl) {\n        addClasses.push(RTL);\n      } else {\n        removeClasses.push(RTL);\n      }\n\n      if (this.isAdaptive) {\n        addClasses.push(DEVICE_CLASS);\n      } else {\n        removeClasses.push(DEVICE_CLASS);\n      }\n\n      if (this.allowMultiDrag) {\n        addClasses.push(MULTI_DRAG);\n      } else {\n        removeClasses.push(MULTI_DRAG);\n      }\n\n      if (this.cssClass) {\n        var cssClass = this.cssClass.split(' ');\n\n        var _iterator91 = _createForOfIteratorHelper(cssClass),\n            _step91;\n\n        try {\n          for (_iterator91.s(); !(_step91 = _iterator91.n()).done;) {\n            var cls = _step91.value;\n            addClasses.push(cls);\n          }\n        } catch (err) {\n          _iterator91.e(err);\n        } finally {\n          _iterator91.f();\n        }\n      }\n\n      classList(this.element, addClasses, removeClasses);\n      this.validateDate();\n      createSpinner({\n        target: this.element\n      });\n      this.scrollModule = new Scroll(this);\n      this.scrollModule.setWidth();\n      this.scrollModule.setHeight();\n      this.renderModule = new Render(this);\n      this.eventBase = new EventBase(this);\n      this.workCellAction = new WorkCellInteraction(this);\n\n      if (this.allowKeyboardInteraction) {\n        this.keyboardInteractionModule = new KeyboardInteraction(this);\n      }\n\n      this.inlineModule = new InlineEdit(this);\n      this.initializeDataModule();\n      this.renderTableContainer();\n      this.activeViewOptions = this.getActiveViewOptions();\n      this.initializeResources();\n      this.wireEvents();\n    }\n  }, {\n    key: \"renderTableContainer\",\n    value: function renderTableContainer() {\n      if (!this.element.querySelector('.' + TABLE_CONTAINER_CLASS)) {\n        this.element.appendChild(this.createElement('div', {\n          className: TABLE_CONTAINER_CLASS\n        }));\n      }\n    }\n    /**\n     * Method to render react templates\n     *\n     * @returns {void}\n     * @private\n     */\n\n  }, {\n    key: \"renderTemplates\",\n    value: function renderTemplates() {\n      if (this.isReact) {\n        this.renderReactTemplates();\n      }\n    }\n    /**\n     * Method to reset react templates\n     *\n     * @param {string[]} templates Accepts the template ID\n     * @returns {void}\n     * @private\n     */\n\n  }, {\n    key: \"resetTemplates\",\n    value: function resetTemplates(templates) {\n      if (this.isAngular || this.isReact) {\n        this.clearTemplate(templates);\n      }\n    }\n  }, {\n    key: \"initializeResources\",\n    value: function initializeResources() {\n      var isSetModel = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : false;\n\n      if (this.resources.length > 0) {\n        this.resourceBase = new ResourceBase(this);\n        this.resourceBase.bindResourcesData(isSetModel);\n      } else {\n        this.resourceBase = null;\n        this.resourceCollection = [];\n        this.renderElements(isSetModel);\n      }\n    }\n    /**\n     * Method to render the layout elements\n     *\n     * @param {boolean} isLayoutOnly Accepts the boolean value to render layout or not\n     * @returns {void}\n     * @private\n     */\n\n  }, {\n    key: \"renderElements\",\n    value: function renderElements(isLayoutOnly) {\n      if (isLayoutOnly) {\n        this.initializeView(this.currentView);\n        this.eventWindow.refresh();\n        return;\n      }\n\n      this.destroyHeaderModule();\n\n      if (this.showHeaderBar) {\n        this.headerModule = new HeaderRenderer(this);\n      }\n\n      this.renderTableContainer();\n\n      if (Browser.isDevice || Browser.isTouch) {\n        this.scheduleTouchModule = new ScheduleTouch(this);\n      }\n\n      this.initializeView(this.currentView);\n      this.destroyPopups();\n\n      if (!this.isPrinting) {\n        this.initializePopups();\n      }\n    }\n  }, {\n    key: \"validateDate\",\n    value: function validateDate() {\n      var selectedDate = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : this.selectedDate;\n      // persist the selected date value\n      var date = selectedDate instanceof Date ? new Date(selectedDate.getTime()) : new Date(selectedDate);\n      var minDate = this.minDate instanceof Date ? new Date(this.minDate.getTime()) : new Date(this.minDate);\n      var maxDate = this.maxDate instanceof Date ? new Date(this.maxDate.getTime()) : new Date(this.maxDate);\n\n      if (minDate <= maxDate) {\n        if (date < minDate) {\n          date = minDate;\n        }\n\n        if (date > maxDate) {\n          date = maxDate;\n        }\n\n        this.setProperties({\n          selectedDate: new Date('' + date),\n          minDate: new Date('' + minDate),\n          maxDate: new Date('' + maxDate)\n        }, true);\n\n        if (this.eventWindow) {\n          this.eventWindow.updateMinMaxDateToEditor();\n        }\n      } else {\n        throw Error('minDate should be equal or less than maxDate');\n      }\n    }\n  }, {\n    key: \"getViewIndex\",\n    value: function getViewIndex(viewName) {\n      for (var item = 0; item < this.viewCollections.length; item++) {\n        var checkIndex = this.viewCollections[item].option;\n\n        if (checkIndex === viewName) {\n          return item;\n        }\n      }\n\n      return -1;\n    }\n  }, {\n    key: \"setViewOptions\",\n    value: function setViewOptions() {\n      var isModuleLoad = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : false;\n      this.viewOptions = {};\n      this.viewCollections = [];\n      var viewName;\n      var selectedView;\n      var prevIndex = this.viewIndex;\n      var count = 0;\n      this.viewIndex = -1;\n\n      var _iterator92 = _createForOfIteratorHelper(this.views),\n          _step92;\n\n      try {\n        for (_iterator92.s(); !(_step92 = _iterator92.n()).done;) {\n          var view = _step92.value;\n          var isOptions = typeof view === 'string' ? false : true;\n\n          if (typeof view === 'string') {\n            viewName = view;\n\n            if (this.currentView === viewName) {\n              selectedView = viewName;\n              this.viewIndex = count;\n            }\n          } else {\n            viewName = view.option;\n\n            if (view.isSelected) {\n              selectedView = viewName;\n              this.viewIndex = count;\n            }\n          }\n\n          var obj = extend({\n            option: viewName\n          }, isOptions ? view : {});\n          var fieldViewName = viewName.charAt(0).toLowerCase() + viewName.slice(1);\n          obj.cellHeaderTemplateName = obj.cellHeaderTemplate ? obj.option : '';\n          obj.dateHeaderTemplateName = obj.dateHeaderTemplate ? obj.option : '';\n          obj.cellTemplateName = obj.cellTemplate ? obj.option : '';\n          obj.dayHeaderTemplateName = obj.dayHeaderTemplate ? obj.option : '';\n          obj.monthHeaderTemplateName = obj.monthHeaderTemplate ? obj.option : '';\n          obj.resourceHeaderTemplateName = obj.resourceHeaderTemplate ? obj.option : '';\n          obj.headerIndentTemplateName = obj.headerIndentTemplate ? obj.option : '';\n          obj.eventTemplateName = obj.eventTemplate ? obj.option : '';\n\n          if (!isNullOrUndefined(obj.firstDayOfWeek) && obj.firstDayOfWeek === 0) {\n            delete obj.firstDayOfWeek;\n          }\n\n          if (!isNullOrUndefined(obj.interval) && obj.interval === 1) {\n            delete obj.interval;\n          }\n\n          this.viewCollections.push(obj);\n\n          if (isNullOrUndefined(this.viewOptions[fieldViewName])) {\n            this.viewOptions[fieldViewName] = [obj];\n          } else {\n            this.viewOptions[fieldViewName].push(obj);\n          }\n\n          count++;\n        }\n      } catch (err) {\n        _iterator92.e(err);\n      } finally {\n        _iterator92.f();\n      }\n\n      if (!isModuleLoad && selectedView) {\n        this.setProperties({\n          currentView: selectedView\n        }, true);\n      }\n\n      if (this.viewIndex === -1) {\n        var currentIndex = this.getViewIndex(this.currentView);\n        this.viewIndex = typeof this.views[0] !== 'string' && !isNullOrUndefined(prevIndex) && prevIndex !== -1 ? prevIndex : currentIndex === -1 ? 0 : currentIndex;\n      }\n    }\n  }, {\n    key: \"getActiveViewOptions\",\n    value: function getActiveViewOptions() {\n      var timeScale = {\n        enable: this.timeScale.enable,\n        interval: this.timeScale.interval,\n        slotCount: this.timeScale.slotCount,\n        majorSlotTemplate: this.timeScale.majorSlotTemplate,\n        minorSlotTemplate: this.timeScale.minorSlotTemplate\n      };\n      var isYearView = this.viewCollections[this.viewIndex].option.indexOf('Year') > -1;\n      var group = {\n        byDate: isYearView ? false : this.group.byDate,\n        byGroupID: this.group.byGroupID,\n        allowGroupEdit: this.group.allowGroupEdit,\n        resources: this.group.resources,\n        headerTooltipTemplate: this.group.headerTooltipTemplate,\n        enableCompactView: this.group.enableCompactView\n      };\n      var workDays = this.viewCollections[this.viewIndex].workDays ? [] : this.workDays;\n      var scheduleOptions = {\n        dateFormat: this.dateFormat,\n        endHour: this.endHour,\n        isSelected: false,\n        option: null,\n        readonly: this.readonly,\n        startHour: this.startHour,\n        allowVirtualScrolling: false,\n        cellHeaderTemplate: this.cellHeaderTemplate,\n        dayHeaderTemplate: this.dayHeaderTemplate,\n        monthHeaderTemplate: this.monthHeaderTemplate,\n        cellTemplate: this.cellTemplate,\n        eventTemplate: this.eventSettings.template,\n        dateHeaderTemplate: this.dateHeaderTemplate,\n        resourceHeaderTemplate: this.resourceHeaderTemplate,\n        headerIndentTemplate: this.headerIndentTemplate,\n        firstMonthOfYear: this.firstMonthOfYear,\n        firstDayOfWeek: this.firstDayOfWeek,\n        workDays: workDays,\n        monthsCount: this.monthsCount,\n        showWeekend: this.showWeekend,\n        showWeekNumber: this.showWeekNumber,\n        displayName: null,\n        interval: 1,\n        timeScale: timeScale,\n        timeFormat: this.internalTimeFormat,\n        group: group,\n        headerRows: this.headerRows,\n        orientation: 'Horizontal'\n      };\n      var viewOptions = this.viewCollections[this.viewIndex];\n      var viewsData = extend(scheduleOptions, viewOptions, undefined, true);\n\n      if (this.firstDayOfWeek !== 0 && viewOptions.firstDayOfWeek && this.firstDayOfWeek !== viewOptions.firstDayOfWeek) {\n        viewsData.firstDayOfWeek = this.firstDayOfWeek;\n      }\n\n      return viewsData;\n    }\n  }, {\n    key: \"initializeDataModule\",\n    value: function initializeDataModule() {\n      this.eventFields = {\n        id: this.eventSettings.fields.id,\n        isBlock: this.eventSettings.fields.isBlock,\n        subject: this.eventSettings.fields.subject.name,\n        startTime: this.eventSettings.fields.startTime.name,\n        endTime: this.eventSettings.fields.endTime.name,\n        startTimezone: this.eventSettings.fields.startTimezone.name,\n        endTimezone: this.eventSettings.fields.endTimezone.name,\n        location: this.eventSettings.fields.location.name,\n        description: this.eventSettings.fields.description.name,\n        isAllDay: this.eventSettings.fields.isAllDay.name,\n        recurrenceID: this.eventSettings.fields.recurrenceID.name,\n        recurrenceRule: this.eventSettings.fields.recurrenceRule.name,\n        recurrenceException: this.eventSettings.fields.recurrenceException.name,\n        isReadonly: this.eventSettings.fields.isReadonly,\n        followingID: this.eventSettings.fields.followingID\n      };\n      this.setEditorTitles();\n      this.dataModule = new Data(this.eventSettings.dataSource, this.eventSettings.query);\n      this.crudModule = new Crud(this);\n    }\n  }, {\n    key: \"setEditorTitles\",\n    value: function setEditorTitles() {\n      this.editorTitles = {\n        subject: this.eventSettings.fields.subject.title || this.localeObj.getConstant('title'),\n        startTime: this.eventSettings.fields.startTime.title || this.localeObj.getConstant('start'),\n        endTime: this.eventSettings.fields.endTime.title || this.localeObj.getConstant('end'),\n        isAllDay: this.eventSettings.fields.isAllDay.title || this.localeObj.getConstant('allDay'),\n        startTimezone: this.eventSettings.fields.startTimezone.title || this.localeObj.getConstant('startTimezone'),\n        endTimezone: this.eventSettings.fields.endTimezone.title || this.localeObj.getConstant('endTimezone'),\n        location: this.eventSettings.fields.location.title || this.localeObj.getConstant('location'),\n        description: this.eventSettings.fields.description.title || this.localeObj.getConstant('description'),\n        recurrenceRule: this.eventSettings.fields.recurrenceRule.title || this.localeObj.getConstant('repeat')\n      };\n    }\n  }, {\n    key: \"initializeView\",\n    value: function initializeView(viewName) {\n      this.showSpinner();\n      this.activeViewOptions = this.getActiveViewOptions();\n\n      if (this.resourceBase) {\n        this.resourceBase.setResourceCollection();\n      }\n\n      this.initializeTemplates();\n      this.renderModule.render(viewName);\n    }\n  }, {\n    key: \"initializeTemplates\",\n    value: function initializeTemplates() {\n      this.cellHeaderTemplateFn = this.templateParser(this.activeViewOptions.cellHeaderTemplate);\n      this.dayHeaderTemplateFn = this.templateParser(this.activeViewOptions.dayHeaderTemplate);\n      this.monthHeaderTemplateFn = this.templateParser(this.activeViewOptions.monthHeaderTemplate);\n      this.cellTemplateFn = this.templateParser(this.activeViewOptions.cellTemplate);\n      this.dateHeaderTemplateFn = this.templateParser(this.activeViewOptions.dateHeaderTemplate);\n      this.majorSlotTemplateFn = this.templateParser(this.activeViewOptions.timeScale.majorSlotTemplate);\n      this.minorSlotTemplateFn = this.templateParser(this.activeViewOptions.timeScale.minorSlotTemplate);\n      this.appointmentTemplateFn = this.templateParser(this.activeViewOptions.eventTemplate);\n      this.resourceHeaderTemplateFn = this.templateParser(this.activeViewOptions.resourceHeaderTemplate);\n      this.headerIndentTemplateFn = this.templateParser(this.activeViewOptions.headerIndentTemplate);\n      this.headerTooltipTemplateFn = this.templateParser(this.activeViewOptions.group.headerTooltipTemplate);\n      this.eventTooltipTemplateFn = this.templateParser(this.eventSettings.tooltipTemplate);\n      this.editorTemplateFn = this.templateParser(this.editorTemplate);\n      this.quickInfoTemplatesHeaderFn = this.templateParser(this.quickInfoTemplates.header);\n      this.quickInfoTemplatesContentFn = this.templateParser(this.quickInfoTemplates.content);\n      this.quickInfoTemplatesFooterFn = this.templateParser(this.quickInfoTemplates.footer);\n    }\n  }, {\n    key: \"initializePopups\",\n    value: function initializePopups() {\n      this.eventWindow = new EventWindow(this);\n      this.quickPopup = new QuickPopups(this);\n    }\n    /**\n     * Method to get day names\n     *\n     * @param {string} type Accepts the day name\n     * @returns {string[]} Returns the collection of day names\n     * @private\n     */\n\n  }, {\n    key: \"getDayNames\",\n    value: function getDayNames(type) {\n      var culShortNames = [];\n      var cldrObj;\n      var nameSpace = '';\n\n      if (this.locale === 'en' || this.locale === 'en-US') {\n        nameSpace = 'days.stand-alone.';\n        cldrObj = getValue(nameSpace + type, getDefaultDateObject(this.getCalendarMode()));\n      } else {\n        nameSpace = 'main.' + '' + this.locale + '.dates.calendars.' + this.getCalendarMode() + '.days.format.' + type;\n        cldrObj = getValue(nameSpace, cldrData);\n      }\n\n      for (var _i10 = 0, _Object$keys5 = Object.keys(cldrObj); _i10 < _Object$keys5.length; _i10++) {\n        var obj = _Object$keys5[_i10];\n        culShortNames.push(getValue(obj, cldrObj));\n      }\n\n      return culShortNames;\n    }\n  }, {\n    key: \"setCldrTimeFormat\",\n    value: function setCldrTimeFormat() {\n      if (!isNullOrUndefined(this.timeFormat)) {\n        this.internalTimeFormat = this.timeFormat;\n        return;\n      }\n\n      if (this.locale === 'en' || this.locale === 'en-US') {\n        this.internalTimeFormat = getValue('timeFormats.short', getDefaultDateObject(this.getCalendarMode()));\n      } else {\n        this.internalTimeFormat = getValue('main.' + '' + this.locale + '.dates.calendars.' + this.getCalendarMode() + '.timeFormats.short', cldrData);\n      }\n    }\n    /**\n     * Method to get calendar mode\n     *\n     * @returns {string} Returns the calendar mode\n     * @private\n     */\n\n  }, {\n    key: \"getCalendarMode\",\n    value: function getCalendarMode() {\n      return this.calendarMode.toLowerCase();\n    }\n    /**\n     * Method to get time in string\n     *\n     * @param {Date} date Accepts the date object\n     * @returns {string} Returns the time in string\n     * @private\n     */\n\n  }, {\n    key: \"getTimeString\",\n    value: function getTimeString(date) {\n      var time = this.globalize.formatDate(date, {\n        format: this.activeViewOptions.timeFormat,\n        type: 'time',\n        calendar: this.getCalendarMode()\n      });\n      return time.toLocaleUpperCase();\n    }\n    /**\n     * Method to get  date object\n     *\n     * @param {Date} date Accepts the date object\n     * @returns {Date} Returns the date object\n     * @private\n     */\n\n  }, {\n    key: \"getDateTime\",\n    value: function getDateTime(date) {\n      return date instanceof Date ? new Date(date.getTime()) : new Date(date);\n    }\n  }, {\n    key: \"setCalendarMode\",\n    value: function setCalendarMode() {\n      if (this.calendarMode === 'Islamic') {\n        this.calendarUtil = new Islamic();\n      } else {\n        this.calendarUtil = new Gregorian();\n      }\n    }\n    /**\n     * Method to change the current view\n     *\n     * @param {View} view Accepts the view name\n     * @param {Event} event Accepts the event object\n     * @param {boolean} muteOnChange Accepts the value to enable or disable mute on change\n     * @param {number} index Accepts the index value\n     * @returns {void}\n     * @private\n     */\n\n  }, {\n    key: \"changeView\",\n    value: function changeView(view, event, muteOnChange, index) {\n      var _this71 = this;\n\n      if (isNullOrUndefined(index)) {\n        index = this.getViewIndex(view);\n      }\n\n      if (!muteOnChange && index === this.viewIndex && this.currentView === view || index < 0) {\n        return;\n      }\n\n      this.viewIndex = index;\n      var args = {\n        requestType: 'viewNavigate',\n        cancel: false,\n        event: event\n      };\n      this.trigger(actionBegin, args, function (actionArgs) {\n        if (!actionArgs.cancel) {\n          var navArgs = {\n            action: 'view',\n            cancel: false,\n            currentDate: _this71.selectedDate,\n            previousView: _this71.currentView,\n            currentView: view,\n            viewIndex: _this71.viewIndex\n          };\n\n          _this71.trigger(navigating, navArgs, function (navigationArgs) {\n            if (!navigationArgs.cancel) {\n              _this71.viewIndex = navigationArgs.viewIndex;\n\n              _this71.setProperties({\n                currentView: view\n              }, true);\n\n              if (_this71.headerModule) {\n                _this71.headerModule.updateActiveView();\n\n                _this71.headerModule.setCalendarDate(_this71.selectedDate);\n\n                _this71.headerModule.setCalendarView();\n              }\n\n              _this71.initializeView(_this71.currentView);\n\n              _this71.animateLayout();\n\n              args = {\n                requestType: 'viewNavigate',\n                cancel: false,\n                event: event\n              };\n\n              _this71.trigger(actionComplete, args);\n            }\n          });\n        }\n      });\n    }\n    /**\n     * Method to change the view date\n     *\n     * @param {Date} selectedDate Accepts the selected date\n     * @param {Event} event Accepts the event object\n     * @returns {void}\n     * @private\n     */\n\n  }, {\n    key: \"changeDate\",\n    value: function changeDate(selectedDate, event) {\n      var _this72 = this;\n\n      var args = {\n        requestType: 'dateNavigate',\n        cancel: false,\n        event: event\n      };\n      this.trigger(actionBegin, args, function (actionArgs) {\n        if (!actionArgs.cancel) {\n          var navArgs = {\n            action: 'date',\n            cancel: false,\n            previousDate: _this72.selectedDate,\n            currentDate: selectedDate\n          };\n\n          _this72.trigger(navigating, navArgs, function (navigationArgs) {\n            if (!navigationArgs.cancel) {\n              _this72.uiStateValues.isInitial = _this72.activeView.isTimelineView() ? true : _this72.uiStateValues.isInitial;\n\n              _this72.validateDate(navigationArgs.currentDate);\n\n              if (_this72.headerModule) {\n                _this72.headerModule.setCalendarDate(navigationArgs.currentDate);\n              }\n\n              _this72.initializeView(_this72.currentView);\n\n              _this72.animateLayout();\n\n              args = {\n                requestType: 'dateNavigate',\n                cancel: false,\n                event: event\n              };\n\n              _this72.trigger(actionComplete, args);\n            }\n          });\n        }\n      });\n    }\n    /**\n     * Method to validate min and max date\n     *\n     * @param {Date} date Accepts the date object\n     * @returns {boolean} Returns the boolean result to validate the min and max date\n     * @private\n     */\n\n  }, {\n    key: \"isMinMaxDate\",\n    value: function isMinMaxDate() {\n      var date = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : this.selectedDate;\n      return date.getTime() >= this.minDate.getTime() && date.getTime() <= this.maxDate.getTime();\n    }\n    /**\n     * Method to validate the selected date\n     *\n     * @param {Date} date Accepts the date object\n     * @returns {boolean} Returns the boolean value for given date is selected date or not\n     * @private\n     */\n\n  }, {\n    key: \"isSelectedDate\",\n    value: function isSelectedDate(date) {\n      return date.setHours(0, 0, 0, 0) === new Date('' + this.selectedDate).setHours(0, 0, 0, 0);\n    }\n    /**\n     * Method to get the current time\n     *\n     * @param {Date} date Accepts the date object\n     * @returns {Date} Returns the date object after performing the timezone conversion\n     * @private\n     */\n\n  }, {\n    key: \"getCurrentTime\",\n    value: function getCurrentTime() {\n      var date = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : new Date();\n\n      if (this.timezone) {\n        return this.tzModule.convert(date, this.tzModule.getLocalTimezoneName(), this.timezone);\n      }\n\n      return date;\n    }\n    /** Method to get navigate view\n     *\n     * @returns {View} Return the navigate view name\n     * @private\n     */\n\n  }, {\n    key: \"getNavigateView\",\n    value: function getNavigateView() {\n      if (this.activeView.isTimelineView()) {\n        return this.currentView === 'TimelineMonth' || this.currentView === 'TimelineYear' ? 'TimelineDay' : 'Agenda';\n      }\n\n      return 'Day';\n    }\n  }, {\n    key: \"animateLayout\",\n    value: function animateLayout() {\n      if (!this.activeView.element) {\n        return;\n      }\n\n      new Animation({\n        duration: 600,\n        name: 'FadeIn',\n        timingFunction: 'easeIn'\n      }).animate(this.activeView.element);\n    }\n    /**\n     * To provide the array of modules needed for control rendering\n     *\n     * @returns {ModuleDeclaration[]} Returns the declared modules\n     * @private\n     */\n\n  }, {\n    key: \"requiredModules\",\n    value: function requiredModules() {\n      var modules = [];\n      this.setViewOptions(true);\n\n      for (var _i11 = 0, _Object$keys6 = Object.keys(this.viewOptions); _i11 < _Object$keys6.length; _i11++) {\n        var view = _Object$keys6[_i11];\n        view = view === 'timelineDay' || view === 'timelineWeek' || view === 'timelineWorkWeek' ? 'timelineViews' : view;\n        modules.push({\n          member: view,\n          args: [this]\n        });\n      }\n\n      if (this.allowDragAndDrop) {\n        modules.push({\n          member: 'dragAndDrop',\n          args: [this]\n        });\n      }\n\n      if (this.allowResizing) {\n        modules.push({\n          member: 'resize',\n          args: [this]\n        });\n      }\n\n      modules.push({\n        member: 'excelExport',\n        args: [this]\n      });\n      modules.push({\n        member: 'iCalendarExport',\n        args: [this]\n      });\n      modules.push({\n        member: 'iCalendarImport',\n        args: [this]\n      });\n      modules.push({\n        member: 'print',\n        args: [this]\n      });\n      return modules;\n    }\n    /**\n     * Initializes the values of private members.\n     *\n     * @returns {void}\n     * @private\n     */\n\n  }, {\n    key: \"preRender\",\n    value: function preRender() {\n      this.isAdaptive = Browser.isDevice || isIPadDevice();\n      this.globalize = new Internationalization(this.locale);\n      this.tzModule = new Timezone();\n\n      if (this && isNullOrUndefined(this.uiStateValues) || !this.enablePersistence) {\n        this.uiStateValues = {\n          expand: false,\n          isInitial: true,\n          left: 0,\n          top: 0,\n          isGroupAdaptive: false,\n          isIgnoreOccurrence: false,\n          groupIndex: 0,\n          action: false,\n          isBlock: false\n        };\n      }\n\n      this.activeCellsData = {\n        startTime: this.getCurrentTime(),\n        endTime: this.getCurrentTime(),\n        isAllDay: false\n      };\n      this.activeEventData = {\n        event: undefined,\n        element: undefined\n      };\n      this.getDefaultLocale();\n      this.localeObj = new L10n(this.getModuleName(), this.defaultLocale, this.locale);\n      this.setCldrTimeFormat();\n      this.setCalendarMode();\n      this.eventsData = [];\n      this.eventsProcessed = [];\n      this.blockData = [];\n      this.blockProcessed = [];\n      this.resourceCollection = [];\n      this.currentAction = null;\n      this.selectedElements = [];\n      this.setViewOptions();\n    }\n  }, {\n    key: \"getDefaultLocale\",\n    value: function getDefaultLocale() {\n      this.defaultLocale = {\n        day: 'Day',\n        week: 'Week',\n        workWeek: 'Work Week',\n        month: 'Month',\n        year: 'Year',\n        agenda: 'Agenda',\n        weekAgenda: 'Week Agenda',\n        workWeekAgenda: 'Work Week Agenda',\n        monthAgenda: 'Month Agenda',\n        today: 'Today',\n        noEvents: 'No events',\n        emptyContainer: 'There are no events scheduled on this day.',\n        allDay: 'All day',\n        start: 'Start',\n        end: 'End',\n        more: 'more',\n        close: 'Close',\n        cancel: 'Cancel',\n        noTitle: '(No Title)',\n        delete: 'Delete',\n        deleteEvent: 'Delete Event',\n        deleteMultipleEvent: 'Delete Multiple Events',\n        selectedItems: 'Items selected',\n        deleteSeries: 'Entire Series',\n        edit: 'Edit',\n        editSeries: 'Entire Series',\n        editEvent: 'Edit Event',\n        createEvent: 'Create',\n        subject: 'Subject',\n        addTitle: 'Add title',\n        moreDetails: 'More Details',\n        save: 'Save',\n        editContent: 'How would you like to change the appointment in the series?',\n        deleteContent: 'Are you sure you want to delete this event?',\n        deleteMultipleContent: 'Are you sure you want to delete the selected events?',\n        newEvent: 'New Event',\n        title: 'Title',\n        location: 'Location',\n        description: 'Description',\n        timezone: 'Timezone',\n        startTimezone: 'Start Timezone',\n        endTimezone: 'End Timezone',\n        repeat: 'Repeat',\n        saveButton: 'Save',\n        cancelButton: 'Cancel',\n        deleteButton: 'Delete',\n        recurrence: 'Recurrence',\n        wrongPattern: 'The recurrence pattern is not valid.',\n        seriesChangeAlert: 'Do you want to cancel the changes made to specific ' + 'instances of this series and match it to the whole series again?',\n        createError: 'The duration of the event must be shorter than how frequently it occurs. ' + 'Shorten the duration, or change the recurrence pattern in the recurrence event editor.',\n        sameDayAlert: 'Two occurrences of the same event cannot occur on the same day.',\n        occurenceAlert: 'Cannot reschedule an occurrence of the recurring appointment if it skips over ' + 'a later occurrence of the same appointment.',\n        editRecurrence: 'Edit Recurrence',\n        repeats: 'Repeats',\n        alert: 'Alert',\n        startEndError: 'The selected end date occurs before the start date.',\n        invalidDateError: 'The entered date value is invalid.',\n        blockAlert: 'Events cannot be scheduled within the blocked time range.',\n        ok: 'Ok',\n        yes: 'Yes',\n        no: 'No',\n        occurrence: 'Occurrence',\n        series: 'Series',\n        previous: 'Previous',\n        next: 'Next',\n        timelineDay: 'Timeline Day',\n        timelineWeek: 'Timeline Week',\n        timelineWorkWeek: 'Timeline Work Week',\n        timelineMonth: 'Timeline Month',\n        timelineYear: 'Timeline Year',\n        editFollowingEvent: 'Following Events',\n        deleteTitle: 'Delete Event',\n        editTitle: 'Edit Event',\n        beginFrom: 'Begin From',\n        endAt: 'Ends At',\n        expandAllDaySection: 'Expand-all-day-section',\n        collapseAllDaySection: 'Collapse-all-day-section',\n        searchTimezone: 'Search Timezone',\n        noRecords: 'No records found'\n      };\n    }\n  }, {\n    key: \"wireEvents\",\n    value: function wireEvents() {\n      EventHandler.add(window, 'resize', this.onScheduleResize, this);\n      EventHandler.add(window, 'orientationchange', this.onScheduleResize, this);\n      EventHandler.add(document, Browser.touchStartEvent, this.onDocumentClick, this);\n    }\n    /**\n     * Method to remove selected class\n     *\n     * @returns {void}\n     * @private\n     */\n\n  }, {\n    key: \"removeSelectedClass\",\n    value: function removeSelectedClass() {\n      var selectedCells = this.getSelectedElements();\n\n      var _iterator93 = _createForOfIteratorHelper(selectedCells),\n          _step93;\n\n      try {\n        for (_iterator93.s(); !(_step93 = _iterator93.n()).done;) {\n          var cell = _step93.value;\n          cell.setAttribute('aria-selected', 'false');\n          cell.removeAttribute('tabindex');\n        }\n      } catch (err) {\n        _iterator93.e(err);\n      } finally {\n        _iterator93.f();\n      }\n\n      removeClass(selectedCells, SELECTED_CELL_CLASS);\n    }\n    /**\n     * Method to add selected class\n     *\n     * @param {HTMLTableCellElement[]} cells Accepts the collection of elements\n     * @param {HTMLTableCellElement} focusCell Accepts the focus element\n     * @param {boolean} isPreventScroll Accepts the boolean value to prevent scroll\n     * @returns {void}\n     * @private\n     */\n\n  }, {\n    key: \"addSelectedClass\",\n    value: function addSelectedClass(cells, focusCell, isPreventScroll) {\n      var _iterator94 = _createForOfIteratorHelper(cells),\n          _step94;\n\n      try {\n        for (_iterator94.s(); !(_step94 = _iterator94.n()).done;) {\n          var cell = _step94.value;\n          cell.setAttribute('aria-selected', 'true');\n        }\n      } catch (err) {\n        _iterator94.e(err);\n      } finally {\n        _iterator94.f();\n      }\n\n      addClass(cells, SELECTED_CELL_CLASS);\n\n      if (focusCell) {\n        focusCell.setAttribute('tabindex', '0');\n        focusCell.focus({\n          preventScroll: isPreventScroll || false\n        });\n      }\n    }\n    /**\n     * Method to select cell\n     *\n     * @param {HTMLElement | HTMLTableCellElement} element Accepts the select element\n     * @returns {void}\n     * @private\n     */\n\n  }, {\n    key: \"selectCell\",\n    value: function selectCell(element) {\n      this.removeSelectedClass();\n      this.addSelectedClass([element], element);\n    }\n    /**\n     * Method to get all day row element\n     *\n     * @returns {Element} Returns the all day row element\n     * @private\n     */\n\n  }, {\n    key: \"getAllDayRow\",\n    value: function getAllDayRow() {\n      return this.element.querySelector('.' + ALLDAY_ROW_CLASS);\n    }\n    /**\n     * Method to get content table element\n     *\n     * @returns {HTMLElement} Returns the content table element\n     * @private\n     */\n\n  }, {\n    key: \"getContentTable\",\n    value: function getContentTable() {\n      return this.activeView.element.querySelector('.' + CONTENT_TABLE_CLASS + ' tbody');\n    }\n    /**\n     * Method to get all content table rows\n     *\n     * @returns {HTMLElement[]} Returns the content table rows\n     * @private\n     */\n\n  }, {\n    key: \"getTableRows\",\n    value: function getTableRows() {\n      return [].slice.call(this.element.querySelectorAll('.' + CONTENT_TABLE_CLASS + ' tbody tr:not(.' + HIDDEN_CLASS + ')'));\n    }\n    /**\n     * Method to get work cell elements\n     *\n     * @returns {Element[]} Returns the all work cell elements\n     * @private\n     */\n\n  }, {\n    key: \"getWorkCellElements\",\n    value: function getWorkCellElements() {\n      return [].slice.call(this.element.querySelectorAll('.' + WORK_CELLS_CLASS));\n    }\n    /**\n     * Method to get the index from date collection\n     *\n     * @param {Date[]} collection Accepts the collections of date\n     * @param {Date} date Accepts the date object\n     * @returns {number} Returns the index compared date with date collections\n     * @private\n     */\n\n  }, {\n    key: \"getIndexOfDate\",\n    value: function getIndexOfDate(collection, date) {\n      return collection.map(Number).indexOf(+date);\n    }\n    /**\n     * Method to find all day cell\n     *\n     * @param {Element} td Accepts the DOM Element\n     * @returns {boolean} Returns the boolean value\n     * @private\n     */\n\n  }, {\n    key: \"isAllDayCell\",\n    value: function isAllDayCell(td) {\n      if (['Month', 'TimelineMonth', 'TimelineYear', 'MonthAgenda'].indexOf(this.currentView) > -1 || td.classList.contains(ALLDAY_CELLS_CLASS) || td.classList.contains(HEADER_CELLS_CLASS) || !this.activeViewOptions.timeScale.enable) {\n        return true;\n      }\n\n      if (this.activeView.isTimelineView() && this.activeViewOptions.headerRows.length > 0 && this.activeViewOptions.headerRows.slice(-1)[0].option !== 'Hour') {\n        return true;\n      }\n\n      return false;\n    }\n    /**\n     * Method to get date from element\n     *\n     * @param {Element} td Accepts the DOM element\n     * @returns {Date} Returns the date object\n     * @private\n     */\n\n  }, {\n    key: \"getDateFromElement\",\n    value: function getDateFromElement(td) {\n      var dateString;\n\n      if (!isNullOrUndefined(td)) {\n        dateString = td.getAttribute('data-date');\n      }\n\n      if (!isNullOrUndefined(dateString)) {\n        var dateInMS = parseInt(dateString, 10);\n        var date = new Date(dateInMS);\n        return date;\n      }\n\n      return undefined;\n    }\n    /**\n     * Method to get target element from given selector\n     *\n     * @param {string} selector Accepts the element selector\n     * @param {number} left Accepts the pageX value\n     * @param {number} top Accepts the pageY value\n     * @returns {Element[]} Returns the collection of elements based on the given selector\n     * @private\n     */\n\n  }, {\n    key: \"getTargetElement\",\n    value: function getTargetElement(selector, left, top) {\n      var element = document.elementFromPoint(left, top);\n      var targetElement;\n\n      if (element) {\n        targetElement = element.closest(selector);\n      }\n\n      return targetElement ? [targetElement] : null;\n    }\n    /**\n     * Method to process cell header template\n     *\n     * @returns {CallbackFunction} Returns the callback function\n     * @private\n     */\n\n  }, {\n    key: \"getCellHeaderTemplate\",\n    value: function getCellHeaderTemplate() {\n      return this.cellHeaderTemplateFn;\n    }\n    /**\n     * Method to process cell header template in year view.\n     *\n     * @returns {CallbackFunction} Returns the callback function\n     * @private\n     */\n\n  }, {\n    key: \"getDayHeaderTemplate\",\n    value: function getDayHeaderTemplate() {\n      return this.dayHeaderTemplateFn;\n    }\n    /**\n     * Method to process cell header template in year view.\n     *\n     * @returns {CallbackFunction} Returns the callback function\n     * @private\n     */\n\n  }, {\n    key: \"getMonthHeaderTemplate\",\n    value: function getMonthHeaderTemplate() {\n      return this.monthHeaderTemplateFn;\n    }\n    /**\n     * Method to process cell template\n     *\n     * @returns {CallbackFunction} Returns the callback function\n     * @private\n     */\n\n  }, {\n    key: \"getCellTemplate\",\n    value: function getCellTemplate() {\n      return this.cellTemplateFn;\n    }\n    /**\n     * Method to process date header template\n     *\n     * @returns {CallbackFunction} Returns the callback function\n     * @private\n     */\n\n  }, {\n    key: \"getDateHeaderTemplate\",\n    value: function getDateHeaderTemplate() {\n      return this.dateHeaderTemplateFn;\n    }\n    /**\n     * Method to process major slot template\n     *\n     * @returns {CallbackFunction} Returns the callback function\n     * @private\n     */\n\n  }, {\n    key: \"getMajorSlotTemplate\",\n    value: function getMajorSlotTemplate() {\n      return this.majorSlotTemplateFn;\n    }\n    /**\n     * Method to process minor slot template\n     *\n     * @returns {CallbackFunction} Returns the callback function\n     * @private\n     */\n\n  }, {\n    key: \"getMinorSlotTemplate\",\n    value: function getMinorSlotTemplate() {\n      return this.minorSlotTemplateFn;\n    }\n    /**\n     * Method to process appointment template\n     *\n     * @returns {CallbackFunction} Returns the callback function\n     * @private\n     */\n\n  }, {\n    key: \"getAppointmentTemplate\",\n    value: function getAppointmentTemplate() {\n      return this.appointmentTemplateFn;\n    }\n    /**\n     * Method to process appointment tooltip template\n     *\n     * @returns {CallbackFunction} Returns the callback function\n     * @private\n     */\n\n  }, {\n    key: \"getEventTooltipTemplate\",\n    value: function getEventTooltipTemplate() {\n      return this.eventTooltipTemplateFn;\n    }\n    /**\n     * Method to process header tooltip template\n     *\n     * @returns {CallbackFunction} Returns the callback function\n     * @private\n     */\n\n  }, {\n    key: \"getHeaderTooltipTemplate\",\n    value: function getHeaderTooltipTemplate() {\n      return this.headerTooltipTemplateFn;\n    }\n    /**\n     * Method to process editor template\n     *\n     * @returns {CallbackFunction} Returns the callback function\n     * @private\n     */\n\n  }, {\n    key: \"getEditorTemplate\",\n    value: function getEditorTemplate() {\n      return this.editorTemplateFn;\n    }\n    /**\n     * Method to process quick info header template\n     *\n     * @returns {CallbackFunction} Returns the callback function\n     * @private\n     */\n\n  }, {\n    key: \"getQuickInfoTemplatesHeader\",\n    value: function getQuickInfoTemplatesHeader() {\n      return this.quickInfoTemplatesHeaderFn;\n    }\n    /**\n     * Method to process quick info content template\n     *\n     * @returns {CallbackFunction} Returns the callback function\n     * @private\n     */\n\n  }, {\n    key: \"getQuickInfoTemplatesContent\",\n    value: function getQuickInfoTemplatesContent() {\n      return this.quickInfoTemplatesContentFn;\n    }\n    /**\n     * Method to process quick info footer template\n     *\n     * @returns {CallbackFunction} Returns the callback function\n     * @private\n     */\n\n  }, {\n    key: \"getQuickInfoTemplatesFooter\",\n    value: function getQuickInfoTemplatesFooter() {\n      return this.quickInfoTemplatesFooterFn;\n    }\n    /**\n     * Method to process resource header template\n     *\n     * @returns {CallbackFunction} Returns the callback function\n     * @private\n     */\n\n  }, {\n    key: \"getResourceHeaderTemplate\",\n    value: function getResourceHeaderTemplate() {\n      return this.resourceHeaderTemplateFn;\n    }\n    /**\n     * Method to process indent template\n     *\n     * @returns {CallbackFunction} Returns the callback function\n     * @private\n     */\n\n  }, {\n    key: \"getHeaderIndentTemplate\",\n    value: function getHeaderIndentTemplate() {\n      return this.headerIndentTemplateFn;\n    }\n    /**\n     * Method to get dynamic CSS properties\n     *\n     * @returns {ScrollCss} Returns the CSS properties dynamically\n     * @private\n     */\n\n  }, {\n    key: \"getCssProperties\",\n    value: function getCssProperties() {\n      var cssProps = {\n        border: this.enableRtl ? 'borderLeftWidth' : 'borderRightWidth',\n        padding: this.enableRtl ? 'paddingLeft' : 'paddingRight',\n        rtlBorder: this.enableRtl ? 'borderRightWidth' : 'borderLeftWidth',\n        rtlPadding: this.enableRtl ? 'paddingRight' : 'paddingLeft'\n      };\n      return cssProps;\n    }\n    /**\n     * Method to remove new event element in adaptive mode\n     *\n     * @returns {void}\n     * @private\n     */\n\n  }, {\n    key: \"removeNewEventElement\",\n    value: function removeNewEventElement() {\n      var eventClone = this.element.querySelector('.' + NEW_EVENT_CLASS);\n\n      if (!isNullOrUndefined(eventClone)) {\n        remove(eventClone);\n      }\n    }\n    /**\n     * Method to get start end time from string\n     *\n     * @param {string} startEndTime Accepts the start end time string value\n     * @returns {Date} Returns the date object\n     * @private\n     */\n\n  }, {\n    key: \"getStartEndTime\",\n    value: function getStartEndTime(startEndTime) {\n      if (!isNullOrUndefined(startEndTime) && startEndTime !== '') {\n        var startEndDate = resetTime(this.getCurrentTime());\n        var timeString = startEndTime.split(':');\n\n        if (timeString.length === 2) {\n          startEndDate.setHours(parseInt(timeString[0], 10), parseInt(timeString[1], 10), 0);\n        }\n\n        return startEndDate;\n      }\n\n      return null;\n    }\n  }, {\n    key: \"onDocumentClick\",\n    value: function onDocumentClick(args) {\n      this.notify(documentClick, {\n        event: args\n      });\n    }\n  }, {\n    key: \"onScheduleResize\",\n    value: function onScheduleResize() {\n      if (isNullOrUndefined(this.activeView) || (this.isAdaptive || isMobile()) && document.activeElement && document.activeElement.classList.contains(SUBJECT_CLASS)) {\n        return;\n      }\n\n      if (this.activeViewOptions.timeScale.enable && this.activeView) {\n        this.activeView.highlightCurrentTime();\n      }\n\n      if (this.quickPopup) {\n        this.quickPopup.onClosePopup();\n      }\n\n      if (this.currentView === 'Month' || this.currentView !== 'Agenda' && this.currentView !== 'MonthAgenda' && !this.activeViewOptions.timeScale.enable || this.activeView.isTimelineView()) {\n        this.activeView.resetColWidth();\n        this.notify(scrollUiUpdate, {\n          cssProperties: this.getCssProperties(),\n          isPreventScrollUpdate: true\n        });\n        this.refreshEvents(false);\n      } else {\n        this.notify(contentReady, {});\n      }\n    }\n    /**\n     * Method to process the templates\n     *\n     * @param {string} template Accepts the template in string\n     * @returns {CallbackFunction} Returns the callback function\n     * @private\n     */\n\n  }, {\n    key: \"templateParser\",\n    value: function templateParser(template) {\n      if (template) {\n        try {\n          if (document.querySelectorAll(template).length) {\n            return compile(document.querySelector(template).innerHTML.trim());\n          }\n        } catch (error) {\n          return compile(template);\n        }\n      }\n\n      return undefined;\n    }\n    /**\n     * Method to generate the announcement string\n     *\n     * @param {Object} event Accepts the event object\n     * @param {string} subject Accepts the subject text\n     * @returns {string} Returns the announcement string\n     * @private\n     */\n\n  }, {\n    key: \"getAnnouncementString\",\n    value: function getAnnouncementString(event, subject) {\n      var resourceName;\n\n      if (this.quickPopup && this.activeViewOptions.group.resources.length > 0) {\n        var constantText = '\"s event - ';\n        resourceName = this.quickPopup.getResourceText({\n          event: event\n        }, 'event') + constantText;\n      }\n\n      var recordSubject = subject || event[this.eventFields.subject] || this.eventSettings.fields.subject.default;\n      var skeleton = 'full';\n      var startDateText = this.globalize.formatDate(event[this.eventFields.startTime], {\n        type: 'dateTime',\n        skeleton: skeleton,\n        calendar: this.getCalendarMode()\n      });\n      var endDateText = this.globalize.formatDate(event[this.eventFields.endTime], {\n        type: 'dateTime',\n        skeleton: skeleton,\n        calendar: this.getCalendarMode()\n      });\n      var announcementString = recordSubject + ' ' + this.localeObj.getConstant('beginFrom') + ' ' + startDateText + ' ' + this.localeObj.getConstant('endAt') + ' ' + endDateText;\n\n      if (resourceName) {\n        announcementString = resourceName + ' ' + announcementString;\n      }\n\n      return announcementString;\n    }\n    /**\n     * Method to process the element boundary validation\n     *\n     * @param {number} pageY Accepts the pageY value\n     * @param {number} pageX Accepts the pageX value\n     * @returns {ResizeEdges} Returns the boundary validation object\n     * @private\n     */\n\n  }, {\n    key: \"boundaryValidation\",\n    value: function boundaryValidation(pageY, pageX) {\n      var autoScrollDistance = 30;\n      var scrollEdges = {\n        left: false,\n        right: false,\n        top: false,\n        bottom: false\n      };\n      var viewBoundaries = this.element.querySelector('.' + CONTENT_WRAP_CLASS).getBoundingClientRect();\n\n      if (pageY < viewBoundaries.top + autoScrollDistance + window.pageYOffset && pageY > viewBoundaries.top + window.pageYOffset) {\n        scrollEdges.top = true;\n      }\n\n      if (pageY > viewBoundaries.bottom - autoScrollDistance + window.pageYOffset && pageY < viewBoundaries.bottom + window.pageYOffset) {\n        scrollEdges.bottom = true;\n      }\n\n      if (pageX < viewBoundaries.left + autoScrollDistance + window.pageXOffset && pageX > viewBoundaries.left + window.pageXOffset) {\n        scrollEdges.left = true;\n      }\n\n      if (pageX > viewBoundaries.right - autoScrollDistance + window.pageXOffset && pageX < viewBoundaries.right + window.pageXOffset) {\n        scrollEdges.right = true;\n      }\n\n      return scrollEdges;\n    }\n    /**\n     * Method to get the week number.\n     *\n     * @param {Date[]} dates Accepts the date collections\n     * @returns {number} Returns the week number\n     * @private\n     */\n\n  }, {\n    key: \"getWeekNumberContent\",\n    value: function getWeekNumberContent(dates) {\n      var weekNumber;\n\n      if (this.weekRule === 'FirstDay') {\n        var weekNumberDate = getWeekLastDate(dates.slice(-1)[0], this.firstDayOfWeek);\n        weekNumber = this.globalize.formatNumber(getWeekNumber(weekNumberDate));\n      } else if (this.weekRule === 'FirstFourDayWeek') {\n        var weekFirstDate = getWeekFirstDate(dates.slice(-1)[0], this.firstDayOfWeek);\n        var weekLastDate = getWeekLastDate(dates.slice(-1)[0], this.firstDayOfWeek);\n        var weekMidDate = getWeekMiddleDate(weekFirstDate, weekLastDate);\n        weekNumber = this.globalize.formatNumber(getWeekNumber(weekMidDate));\n      } else if (this.weekRule === 'FirstFullWeek') {\n        var _weekFirstDate = getWeekFirstDate(dates.slice(-1)[0], this.firstDayOfWeek);\n\n        weekNumber = this.globalize.formatNumber(getWeekNumber(_weekFirstDate));\n      }\n\n      return weekNumber;\n    }\n    /**\n     * Method to render the header indent template.\n     *\n     * @param {TdData} data Accepts the td data\n     * @param {Element} td Accepts the td element\n     * @returns {void}\n     * @private\n     */\n\n  }, {\n    key: \"renderHeaderIndentTemplate\",\n    value: function renderHeaderIndentTemplate(data, td) {\n      if (this.activeViewOptions.headerIndentTemplate) {\n        var scheduleId = this.element.id + '_';\n        var viewName = this.activeViewOptions.headerIndentTemplateName;\n        var templateId = scheduleId + viewName + 'headerIndentTemplate';\n        var indentTemplate = [].slice.call(this.getHeaderIndentTemplate()(data, this, 'headerIndentTemplate', templateId, false));\n        append(indentTemplate, td);\n      }\n    }\n  }, {\n    key: \"unWireEvents\",\n    value: function unWireEvents() {\n      EventHandler.remove(window, 'resize', this.onScheduleResize);\n      EventHandler.remove(window, 'orientationchange', this.onScheduleResize);\n      EventHandler.remove(document, Browser.touchStartEvent, this.onDocumentClick);\n    }\n    /**\n     * Core method to return the component name.\n     *\n     * @returns {string} Returns the module name\n     * @private\n     */\n\n  }, {\n    key: \"getModuleName\",\n    value: function getModuleName() {\n      return 'schedule';\n    }\n    /**\n     * Returns the properties to be maintained in the persisted state.\n     *\n     * @returns {string} Returns the persistance data\n     * @private\n     */\n\n  }, {\n    key: \"getPersistData\",\n    value: function getPersistData() {\n      return this.addOnPersist(['currentView', 'selectedDate', 'scrollTop', 'scrollLeft']);\n    }\n    /**\n     * Called internally, if any of the property value changed.\n     *\n     * @returns {void}\n     * @private\n     */\n\n  }, {\n    key: \"onPropertyChanged\",\n    value: function onPropertyChanged(newProp, oldProp) {\n      if (this.isReact && isNullOrUndefined(this.activeView)) {\n        return;\n      }\n\n      var state = {\n        isRefresh: false,\n        isResource: false,\n        isDate: false,\n        isView: false,\n        isLayout: false,\n        isDataManager: false\n      };\n\n      for (var _i12 = 0, _Object$keys7 = Object.keys(newProp); _i12 < _Object$keys7.length; _i12++) {\n        var prop = _Object$keys7[_i12];\n\n        switch (prop) {\n          case 'views':\n            this.setViewOptions();\n\n            if (this.headerModule) {\n              this.headerModule.updateItems();\n            }\n\n            state.isView = true;\n            break;\n\n          case 'currentView':\n            state.isView = true;\n            break;\n\n          case 'minDate':\n          case 'maxDate':\n          case 'selectedDate':\n            state.isDate = true;\n            break;\n\n          case 'dateFormat':\n            this.activeViewOptions = this.getActiveViewOptions();\n\n            if (this.headerModule) {\n              this.headerModule.updateDateRange(this.activeView.getDateRangeText());\n            }\n\n            break;\n\n          case 'showHeaderBar':\n            this.destroyHeaderModule();\n\n            if (newProp.showHeaderBar) {\n              this.headerModule = new HeaderRenderer(this);\n              this.headerModule.updateDateRange(this.activeView.getDateRangeText());\n            }\n\n            this.notify(scrollUiUpdate, {\n              cssProperties: this.getCssProperties()\n            });\n\n            if (this.activeView.isTimelineView()) {\n              this.refreshEvents(false);\n            }\n\n            break;\n\n          case 'showWeekend':\n          case 'workDays':\n          case 'startHour':\n          case 'endHour':\n          case 'workHours':\n          case 'readonly':\n          case 'headerRows':\n          case 'showWeekNumber':\n          case 'rowAutoHeight':\n            state.isLayout = true;\n            break;\n\n          case 'locale':\n          case 'calendarMode':\n            this.globalize = new Internationalization(this.locale);\n            this.localeObj = new L10n(this.getModuleName(), this.defaultLocale, this.locale);\n            this.setCldrTimeFormat();\n            this.setCalendarMode();\n            state.isRefresh = true;\n            break;\n\n          case 'firstDayOfWeek':\n            this.activeViewOptions.firstDayOfWeek = newProp.firstDayOfWeek;\n\n            if (this.eventWindow) {\n              this.eventWindow.refreshRecurrenceEditor();\n            }\n\n            state.isLayout = true;\n            break;\n\n          case 'showTimeIndicator':\n            if (this.activeViewOptions.timeScale.enable && this.activeView) {\n              this.activeView.highlightCurrentTime();\n            }\n\n            break;\n\n          case 'cellHeaderTemplate':\n            this.activeViewOptions.cellHeaderTemplate = newProp.cellHeaderTemplate;\n            this.cellHeaderTemplateFn = this.templateParser(this.activeViewOptions.cellHeaderTemplate);\n            state.isLayout = true;\n            break;\n\n          case 'cellTemplate':\n            this.activeViewOptions.cellTemplate = newProp.cellTemplate;\n            this.cellTemplateFn = this.templateParser(this.activeViewOptions.cellTemplate);\n            state.isLayout = true;\n            break;\n\n          case 'dateHeaderTemplate':\n            this.activeViewOptions.dateHeaderTemplate = newProp.dateHeaderTemplate;\n            this.dateHeaderTemplateFn = this.templateParser(this.activeViewOptions.dateHeaderTemplate);\n            state.isLayout = true;\n            break;\n\n          case 'dayHeaderTemplate':\n            this.activeViewOptions.dayHeaderTemplate = newProp.dayHeaderTemplate;\n            this.dayHeaderTemplateFn = this.templateParser(this.activeViewOptions.dayHeaderTemplate);\n            state.isLayout = true;\n            break;\n\n          case 'monthHeaderTemplate':\n            this.activeViewOptions.monthHeaderTemplate = newProp.monthHeaderTemplate;\n            this.monthHeaderTemplateFn = this.templateParser(this.activeViewOptions.monthHeaderTemplate);\n            state.isLayout = true;\n            break;\n\n          case 'resourceHeaderTemplate':\n            this.activeViewOptions.resourceHeaderTemplate = newProp.resourceHeaderTemplate;\n            this.resourceHeaderTemplateFn = this.templateParser(this.activeViewOptions.resourceHeaderTemplate);\n            state.isLayout = true;\n            break;\n\n          case 'timezone':\n            this.eventBase.timezonePropertyChange(oldProp.timezone);\n            this.headerModule.setCalendarTimezone();\n            break;\n\n          case 'enableRtl':\n            this.setRtlClass();\n            state.isRefresh = true;\n            break;\n\n          default:\n            this.extendedPropertyChange(prop, newProp, oldProp, state);\n            break;\n        }\n      }\n\n      this.propertyChangeAction(state);\n    }\n  }, {\n    key: \"propertyChangeAction\",\n    value: function propertyChangeAction(state) {\n      if (state.isRefresh) {\n        this.refresh();\n      } else if (state.isResource) {\n        this.initializeResources(true);\n      } else if (state.isView) {\n        this.changeView(this.currentView, null, true);\n      } else if (state.isDate) {\n        this.changeDate(this.selectedDate);\n      } else if (state.isLayout) {\n        this.initializeView(this.currentView);\n      } else if (state.isDataManager && this.crudModule) {\n        if (this.dragAndDropModule) {\n          this.dragAndDropModule.actionObj.action = '';\n          removeClass([this.element], EVENT_ACTION_CLASS);\n        }\n\n        this.crudModule.refreshDataManager();\n      }\n    }\n  }, {\n    key: \"allDayRowScrollUpdate\",\n    value: function allDayRowScrollUpdate() {\n      var dateHeader = this.element.querySelector('.' + DATE_HEADER_WRAP_CLASS);\n      var allDayRow = this.element.querySelector('.' + ALLDAY_ROW_CLASS);\n\n      if (this.height === 'auto' || !this.enableAllDayScroll) {\n        addClass([dateHeader], ALLDAY_APPOINTMENT_AUTO);\n\n        if (dateHeader.classList.contains(ALLDAY_APPOINTMENT_SCROLL)) {\n          removeClass([dateHeader], ALLDAY_APPOINTMENT_SCROLL);\n        }\n\n        if (this.uiStateValues.expand) {\n          var allDayCells = [].slice.call(this.element.querySelectorAll('.' + ALLDAY_CELLS_CLASS));\n          allDayCells[0].style.height = allDayRow.style.height ? allDayRow.style.height : allDayCells[1].style.height;\n        }\n      } else {\n        if (dateHeader.classList.contains(ALLDAY_APPOINTMENT_AUTO)) {\n          removeClass([dateHeader], ALLDAY_APPOINTMENT_AUTO);\n        }\n\n        this.eventBase.allDayExpandScroll(dateHeader, true);\n      }\n\n      if (!this.uiStateValues.expand) {\n        allDayRow.style.height = '';\n      }\n    }\n  }, {\n    key: \"extendedPropertyChange\",\n    value: function extendedPropertyChange(prop, newProp, oldProp, state) {\n      switch (prop) {\n        case 'width':\n        case 'height':\n        case 'enableAllDayScroll':\n          if (['Day', 'Week', 'WorkWeek'].indexOf(this.currentView) > -1) {\n            this.allDayRowScrollUpdate();\n          }\n\n          this.notify(uiUpdate, {\n            module: 'scroll',\n            properties: {\n              width: newProp.width,\n              height: newProp.height\n            }\n          });\n          break;\n\n        case 'cssClass':\n          if (oldProp.cssClass) {\n            removeClass([this.element], oldProp.cssClass.split(' '));\n          }\n\n          if (newProp.cssClass) {\n            addClass([this.element], newProp.cssClass.split(' '));\n          }\n\n          break;\n\n        case 'hideEmptyAgendaDays':\n        case 'agendaDaysCount':\n          this.activeViewOptions = this.getActiveViewOptions();\n          state.isView = true;\n          break;\n\n        case 'eventSettings':\n          this.onEventSettingsPropertyChanged(newProp.eventSettings, oldProp.eventSettings, state);\n          break;\n\n        case 'allowKeyboardInteraction':\n          if (this.keyboardInteractionModule) {\n            this.keyboardInteractionModule.destroy();\n            this.keyboardInteractionModule = null;\n          }\n\n          if (newProp.allowKeyboardInteraction) {\n            this.keyboardInteractionModule = new KeyboardInteraction(this);\n          }\n\n          break;\n\n        case 'timezoneDataSource':\n          if (this.eventWindow) {\n            this.eventWindow.refresh();\n          }\n\n          break;\n\n        case 'editorTemplate':\n          if (!isNullOrUndefined(this.editorTemplate)) {\n            this.editorTemplateFn = this.templateParser(this.editorTemplate);\n          }\n\n          if (this.eventWindow) {\n            this.eventWindow.setDialogContent();\n          }\n\n          break;\n\n        case 'quickInfoTemplates':\n          if (this.quickInfoTemplates.header) {\n            this.quickInfoTemplatesHeaderFn = this.templateParser(this.quickInfoTemplates.header);\n          }\n\n          if (this.quickInfoTemplates.content) {\n            this.quickInfoTemplatesContentFn = this.templateParser(this.quickInfoTemplates.content);\n          }\n\n          if (this.quickInfoTemplates.footer) {\n            this.quickInfoTemplatesFooterFn = this.templateParser(this.quickInfoTemplates.footer);\n          }\n\n          break;\n\n        case 'group':\n          this.onGroupSettingsPropertyChanged(newProp.group, oldProp.group, state);\n          break;\n\n        case 'resources':\n          state.isResource = true;\n          break;\n\n        case 'timeScale':\n          this.activeViewOptions.timeScale.interval = newProp.timeScale.interval || this.activeViewOptions.timeScale.interval;\n          this.activeViewOptions.timeScale.slotCount = newProp.timeScale.slotCount || this.activeViewOptions.timeScale.slotCount;\n\n          if (this.eventWindow) {\n            this.eventWindow.refreshDateTimePicker();\n          }\n\n          state.isLayout = true;\n          break;\n\n        case 'allowDragAndDrop':\n        case 'allowResizing':\n        case 'eventDragArea':\n          this.refreshEvents(false);\n          break;\n\n        case 'weekRule':\n          state.isLayout = true;\n          break;\n\n        case 'firstMonthOfYear':\n          this.activeViewOptions.firstMonthOfYear = newProp.firstMonthOfYear;\n          this.viewIndex = this.activeView.viewIndex;\n          state.isLayout = true;\n          break;\n\n        case 'monthsCount':\n          this.activeViewOptions.monthsCount = newProp.monthsCount;\n          this.viewIndex = this.activeView.viewIndex;\n          state.isLayout = true;\n          break;\n\n        case 'timeFormat':\n          this.internalTimeFormat = newProp.timeFormat || this.activeViewOptions.timeFormat;\n\n          if (this.eventWindow) {\n            this.eventWindow.refreshDateTimePicker();\n          }\n\n          state.isLayout = true;\n          break;\n\n        case 'enableAdaptiveUI':\n          if (this.showHeaderBar && this.headerModule) {\n            this.destroyHeaderModule();\n            this.headerModule = new HeaderRenderer(this);\n            this.headerModule.updateDateRange(this.activeView.getDateRangeText());\n          }\n\n          state.isLayout = true;\n          break;\n\n        case 'headerIndentTemplate':\n          this.activeViewOptions.headerIndentTemplate = newProp.headerIndentTemplate;\n          this.headerIndentTemplateFn = this.templateParser(this.activeViewOptions.headerIndentTemplate);\n          state.isLayout = true;\n          break;\n      }\n    }\n  }, {\n    key: \"setRtlClass\",\n    value: function setRtlClass() {\n      if (this.enableRtl) {\n        addClass([this.element], 'e-rtl');\n      } else {\n        removeClass([this.element], 'e-rtl');\n      }\n    }\n  }, {\n    key: \"onGroupSettingsPropertyChanged\",\n    value: function onGroupSettingsPropertyChanged(newProp, oldProp, state) {\n      for (var _i13 = 0, _Object$keys8 = Object.keys(newProp); _i13 < _Object$keys8.length; _i13++) {\n        var prop = _Object$keys8[_i13];\n\n        if (prop === 'headerTooltipTemplate') {\n          this.headerTooltipTemplateFn = this.templateParser(newProp[prop]);\n        } else {\n          state.isLayout = true;\n\n          if (this.eventWindow) {\n            this.eventWindow.refresh();\n          }\n        }\n      }\n    }\n  }, {\n    key: \"onEventSettingsPropertyChanged\",\n    value: function onEventSettingsPropertyChanged(newProp, oldProp, state) {\n      for (var _i14 = 0, _Object$keys9 = Object.keys(newProp); _i14 < _Object$keys9.length; _i14++) {\n        var prop = _Object$keys9[_i14];\n\n        switch (prop) {\n          case 'dataSource':\n          case 'query':\n          case 'fields':\n            this.initializeDataModule();\n            state.isDataManager = true;\n            break;\n\n          case 'template':\n            this.activeViewOptions.eventTemplate = newProp.template;\n            this.appointmentTemplateFn = this.templateParser(this.activeViewOptions.eventTemplate);\n            state.isDataManager = true;\n            break;\n\n          case 'enableTooltip':\n            if (this.eventTooltip) {\n              this.eventTooltip.destroy();\n              this.eventTooltip = null;\n            }\n\n            if (newProp.enableTooltip) {\n              this.eventTooltip = new EventTooltip(this);\n            }\n\n            break;\n\n          case 'tooltipTemplate':\n            this.eventTooltipTemplateFn = this.templateParser(this.eventSettings.tooltipTemplate);\n            break;\n\n          case 'resourceColorField':\n            if (this.resourceBase) {\n              this.resourceBase.setResourceCollection();\n            }\n\n            state.isDataManager = true;\n            break;\n\n          case 'editFollowingEvents':\n            if (this.quickPopup) {\n              this.quickPopup.refreshQuickDialog();\n            }\n\n            break;\n\n          case 'allowAdding':\n          case 'allowEditing':\n          case 'allowDeleting':\n            if (this.showHeaderBar && this.headerModule) {\n              this.headerModule.updateAddIcon();\n            }\n\n            if (this.eventWindow) {\n              this.eventWindow.refresh();\n            }\n\n            break;\n\n          case 'spannedEventPlacement':\n          case 'enableMaxHeight':\n          case 'enableIndicator':\n            this.refreshEvents(false);\n            break;\n\n          case 'ignoreWhitespace':\n            state.isLayout = true;\n            break;\n        }\n      }\n    }\n  }, {\n    key: \"destroyHeaderModule\",\n    value: function destroyHeaderModule() {\n      if (this.headerModule) {\n        this.headerModule.destroy();\n        this.headerModule = null;\n      }\n    }\n  }, {\n    key: \"destroyPopups\",\n    value: function destroyPopups() {\n      if (this.quickPopup) {\n        this.quickPopup.destroy();\n        this.quickPopup = null;\n      }\n\n      if (this.eventWindow) {\n        this.eventWindow.destroy();\n        this.eventWindow = null;\n      }\n    }\n    /**\n     * Allows to show the spinner on schedule at the required scenarios.\n     *\n     * @function showSpinner\n     * @returns {void}\n     */\n\n  }, {\n    key: \"showSpinner\",\n    value: function showSpinner() {\n      _showSpinner(this.element);\n    }\n    /**\n     * When the spinner is shown manually using `showSpinner` method, it can be hidden using this `hideSpinner` method.\n     *\n     * @function hideSpinner\n     * @returns {void}\n     */\n\n  }, {\n    key: \"hideSpinner\",\n    value: function hideSpinner() {\n      _hideSpinner(this.element);\n    }\n    /**\n     * Sets different working hours on the required working days by accepting the required start and end time as well as the date collection\n     *  as its parameters.\n     *\n     * @function setWorkHours\n     * @param {Date} dates Collection of dates on which the given start and end hour range needs to be applied.\n     * @param {string} start Defines the work start hour.\n     * @param {string} end Defines the work end hour.\n     * @param {number} groupIndex Defines the resource index from last level.\n     * @returns {void}\n     */\n\n  }, {\n    key: \"setWorkHours\",\n    value: function setWorkHours(dates, start, end, groupIndex) {\n      var cells = [];\n      cells = this.getWorkHourCells(dates, start, end, groupIndex);\n      addClass(cells, WORK_HOURS_CLASS);\n    }\n    /**\n     * Removes or resets different working hours on the required working days by accepting the required start and end time as well as the\n     * date collection as its parameters.\n     * if no parameters has been passed to this function, it will remove all the work hours.\n     *\n     * @param {Date} dates Collection of dates on which the given start and end hour range need to be applied.\n     * @param {string} start Defines the work start hour.\n     * @param {string} end Defines the work end hour.\n     * @param {number} groupIndex Defines the resource index from last level.\n     * @returns {void}\n     */\n\n  }, {\n    key: \"resetWorkHours\",\n    value: function resetWorkHours() {\n      var dates = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : this.activeView.renderDates;\n      var start = arguments.length > 1 ? arguments[1] : undefined;\n      var end = arguments.length > 2 ? arguments[2] : undefined;\n      var groupIndex = arguments.length > 3 ? arguments[3] : undefined;\n\n      if (dates && start && end) {\n        var cells = this.getWorkHourCells(dates, start, end, groupIndex);\n        removeClass(cells, WORK_HOURS_CLASS);\n      } else {\n        var workHourCells = [].slice.call(this.element.querySelectorAll('.' + WORK_HOURS_CLASS));\n        removeClass(workHourCells, WORK_HOURS_CLASS);\n      }\n    }\n  }, {\n    key: \"getWorkHourCells\",\n    value: function getWorkHourCells(dates, start, end, groupIndex) {\n      if (['Agenda', 'MonthAgenda', 'Month', 'TimelineMonth'].indexOf(this.currentView) > -1) {\n        return [];\n      }\n\n      var startHour = this.getStartEndTime(start);\n      var endHour = this.getStartEndTime(end);\n      var tableEle = this.getContentTable();\n\n      if (isNullOrUndefined(startHour) || isNullOrUndefined(endHour) || !tableEle) {\n        return [];\n      }\n\n      startHour.setMilliseconds(0);\n      endHour.setMilliseconds(0);\n      var viewStartHour = this.activeView.getStartHour();\n\n      if (startHour < viewStartHour) {\n        startHour = viewStartHour;\n      }\n\n      var viewEndHour = this.activeView.getEndHour();\n\n      if (endHour > viewEndHour) {\n        endHour = viewEndHour;\n      }\n\n      var msMajorInterval = this.activeViewOptions.timeScale.interval * MS_PER_MINUTE;\n      var msInterval = msMajorInterval / this.activeViewOptions.timeScale.slotCount;\n      var startIndex = Math.round((startHour.getTime() - viewStartHour.getTime()) / msInterval);\n      var endIndex = Math.ceil((endHour.getTime() - viewStartHour.getTime()) / msInterval);\n      var tempStartIndex = startIndex;\n      var tempEndIndex = endIndex;\n      var cells = [];\n\n      var _iterator95 = _createForOfIteratorHelper(dates),\n          _step95;\n\n      try {\n        for (_iterator95.s(); !(_step95 = _iterator95.n()).done;) {\n          var date = _step95.value;\n          date = this.getDateTime(date);\n          resetTime(date);\n          var renderDates = this.activeView.renderDates;\n\n          if (!isNullOrUndefined(groupIndex) && this.resourceBase && !this.activeView.isTimelineView()) {\n            renderDates = this.resourceBase.lastResourceLevel[groupIndex].renderDates;\n          }\n\n          var colIndex = this.getIndexOfDate(renderDates, date);\n\n          if (colIndex >= 0) {\n            if (this.activeView.isTimelineView()) {\n              var slotsPerDay = Math.round((viewEndHour.getTime() - viewStartHour.getTime()) / msInterval);\n              startIndex = tempStartIndex + colIndex * slotsPerDay;\n              endIndex = tempEndIndex + colIndex * slotsPerDay;\n            }\n\n            for (var i = startIndex; i < endIndex; i++) {\n              if (this.activeView.isTimelineView()) {\n                var rowIndex = !isNullOrUndefined(groupIndex) ? groupIndex : 0;\n                cells.push(tableEle.rows[rowIndex].cells[i]);\n              } else {\n                if (!isNullOrUndefined(groupIndex)) {\n                  var selector = '.' + WORK_CELLS_CLASS + '[data-group-index=\"' + groupIndex + '\"]';\n                  var tds = [].slice.call(tableEle.rows[i].querySelectorAll(selector));\n                  cells.push(tds[colIndex]);\n                } else {\n                  cells.push(tableEle.rows[i].cells[colIndex]);\n                }\n              }\n            }\n          }\n        }\n      } catch (err) {\n        _iterator95.e(err);\n      } finally {\n        _iterator95.f();\n      }\n\n      return cells;\n    }\n    /**\n     * Retrieves the start and end time information of the specific cell element.\n     *\n     * @function getCellDetails\n     * @param {Element | Element[]} tdCol Accepts the single or collection of elements.\n     * @returns {CellClickEventArgs} Object An object holding the startTime, endTime and all-day information along with the target HTML element will be returned.\n     */\n\n  }, {\n    key: \"getCellDetails\",\n    value: function getCellDetails(tdCol) {\n      var td = tdCol instanceof Array ? tdCol : [tdCol];\n      var firstTd = getElement(td[0]);\n      var lastTd = getElement(td.slice(-1)[0]);\n      var startTime = this.getDateFromElement(firstTd);\n      var endTime = this.getDateFromElement(lastTd);\n\n      if (isNullOrUndefined(startTime) || isNullOrUndefined(endTime)) {\n        return undefined;\n      }\n\n      var endDateFromColSpan = this.activeView.isTimelineView() && !isNullOrUndefined(lastTd.getAttribute('colSpan')) && this.headerRows.length > 0;\n      var duration = endDateFromColSpan ? parseInt(lastTd.getAttribute('colSpan'), 10) : 1;\n\n      if (!this.activeViewOptions.timeScale.enable || endDateFromColSpan || lastTd.classList.contains(ALLDAY_CELLS_CLASS) || lastTd.classList.contains(HEADER_CELLS_CLASS)) {\n        endTime = addDays(new Date(endTime.getTime()), duration);\n      } else {\n        endTime = this.activeView.getEndDateFromStartDate(endTime);\n      }\n\n      var data = {\n        startTime: startTime,\n        endTime: endTime,\n        isAllDay: this.isAllDayCell(firstTd),\n        element: tdCol\n      };\n      var groupIndex = firstTd.getAttribute('data-group-index');\n\n      if (!isNullOrUndefined(groupIndex)) {\n        data.groupIndex = parseInt(groupIndex, 10);\n      }\n\n      return data;\n    }\n    /**\n     * Retrieves the selected cell elements.\n     *\n     * @function getSelectedElements\n     * @returns {Element[]} The elements of currently selected cells will be returned.\n     */\n\n  }, {\n    key: \"getSelectedElements\",\n    value: function getSelectedElements() {\n      return [].slice.call(this.element.querySelectorAll('.' + SELECTED_CELL_CLASS));\n    }\n    /**\n     * To get the resource collection\n     *\n     * @function getResourceCollections\n     * @returns {ResourcesModel[]} Returns the resource collections\n     */\n\n  }, {\n    key: \"getResourceCollections\",\n    value: function getResourceCollections() {\n      return this.resourceCollection;\n    }\n    /**\n     * To set the resource collection\n     *\n     * @function setResourceCollections\n     * @param {ResourcesModel[]} resourceCol Accepts the resource collections in ResourcesModel type\n     * @returns {void}\n     */\n\n  }, {\n    key: \"setResourceCollections\",\n    value: function setResourceCollections(resourceCol) {\n      this.setProperties({\n        resources: resourceCol\n      }, false);\n    }\n    /**\n     * Current View could be change based on the provided parameters.\n     *\n     * @function changeCurrentView\n     * @param {View} viewName Accept the view in the viewCollections.\n     * @param {number} viewIndex Accept the viewIndex in the viewCollections.\n     * @returns {void}\n     */\n\n  }, {\n    key: \"changeCurrentView\",\n    value: function changeCurrentView(viewName, viewIndex) {\n      var index = this.getViewIndex(viewName);\n      var view = viewName.charAt(0).toLowerCase() + viewName.slice(1);\n      var viewOptions = this.viewOptions[view];\n\n      if (viewOptions) {\n        index = this.viewCollections.indexOf(viewOptions[viewIndex || 0]);\n      }\n\n      if (index === -1 || index === this.viewIndex) {\n        return;\n      }\n\n      this.changeView(viewName, null, null, index);\n    }\n    /**\n     * Return the current view Index.\n     *\n     * @function getCurrentViewIndex\n     * @returns {number} Returns the view index\n     */\n\n  }, {\n    key: \"getCurrentViewIndex\",\n    value: function getCurrentViewIndex() {\n      return this.viewIndex;\n    }\n    /**\n     * Retrieves the resource details based on the provided resource index.\n     *\n     * @param {number} index index of the resources at the last level.\n     * @returns {ResourceDetails} Object An object holding the details of resource and resourceData.\n     */\n\n  }, {\n    key: \"getResourcesByIndex\",\n    value: function getResourcesByIndex(index) {\n      if (this.resourceBase && this.resourceBase.lastResourceLevel) {\n        if (index < 0 || index >= this.resourceBase.lastResourceLevel.length) {\n          return undefined;\n        }\n\n        var data = this.resourceBase.lastResourceLevel[index];\n        var groupData = {};\n        this.resourceBase.setResourceValues(groupData, index);\n        return {\n          resource: data.resource,\n          resourceData: data.resourceData,\n          groupData: groupData\n        };\n      }\n\n      return undefined;\n    }\n    /**\n     * This method allows to expand the resource that available on the scheduler.\n     *\n     * @function expandResource\n     * @param {string | number} resourceId Accepts the resource id in either string or number type\n     * @param {string} name Accepts the name of the resource collection\n     * @returns {void}\n     */\n\n  }, {\n    key: \"expandResource\",\n    value: function expandResource(resourceId, name) {\n      if (this.activeView.isTimelineView() && this.resourceBase && this.resourceCollection.length > 1) {\n        this.resourceBase.resourceExpand(resourceId, name, false);\n      }\n    }\n    /**\n     * This method allows to collapse the resource that available on the scheduler.\n     *\n     * @function collapseResource\n     * @param {string | number} resourceId Accepts the resource id in either string or number type\n     * @param {string} name Accepts the name of the resource collection\n     * @returns {void}\n     */\n\n  }, {\n    key: \"collapseResource\",\n    value: function collapseResource(resourceId, name) {\n      if (this.activeView.isTimelineView() && this.resourceBase && this.resourceCollection.length > 1) {\n        this.resourceBase.resourceExpand(resourceId, name, true);\n      }\n    }\n    /**\n     * Scrolls the Schedule content area to the specified time.\n     *\n     * @function scrollTo\n     * @param {string} hour Accepts the time value in the skeleton format of 'Hm'.\n     * @param {Date} scrollDate Accepts the date object value.\n     * @returns {void}\n     */\n\n  }, {\n    key: \"scrollTo\",\n    value: function scrollTo(hour, scrollDate) {\n      if (this.activeView.scrollToDate && isNullOrUndefined(hour) && scrollDate) {\n        this.activeView.scrollToDate(scrollDate);\n      } else if (this.activeView.scrollToHour) {\n        this.activeView.scrollToHour(hour, scrollDate);\n      }\n    }\n    /**\n     * This method allows scroll to the position of the any resources that available on the scheduler.\n     * This method is applicable for without Agenda and Month agenda views of the schedule.\n     *\n     * @function scrollToResource\n     * @param {string | number} resourceId Accepts the resource id in either string or number type\n     * @param {string} groupName Accepts the name of the resource collection\n     * @returns {void}\n     */\n\n  }, {\n    key: \"scrollToResource\",\n    value: function scrollToResource(resourceId, groupName) {\n      if (this.resourceBase && this.resourceBase.lastResourceLevel) {\n        this.resourceBase.resourceScroll(resourceId, groupName);\n      }\n    }\n    /**\n     * Exports the Scheduler events to a calendar (.ics) file. By default, the calendar is exported with a file name `Calendar.ics`.\n     * To change this file name on export, pass the custom string value as `fileName` to get the file downloaded with this provided name.\n     *\n     * @function exportToICalendar\n     * @param {string} fileName Accepts the string value.\n     * @param {Object[]} customData Accepts the collection of objects.\n     * @returns {void}\n     */\n\n  }, {\n    key: \"exportToICalendar\",\n    value: function exportToICalendar(fileName, customData) {\n      if (this.iCalendarExportModule) {\n        this.iCalendarExportModule.initializeCalendarExport(fileName, customData);\n      } else {\n        throw Error('Inject ICalendarExport module');\n      }\n    }\n    /**\n     * Imports the events from an .ics file downloaded from any of the calendars like Google or Outlook into the Scheduler.\n     * This method accepts the blob object or string format of an .ics file to be imported as a mandatory argument.\n     *\n     * @function importICalendar\n     * @param {Blob | string} fileContent Accepts the file object or string format of an .ics file.\n     * @returns {void}\n     */\n\n  }, {\n    key: \"importICalendar\",\n    value: function importICalendar(fileContent) {\n      if (this.iCalendarImportModule) {\n        this.iCalendarImportModule.initializeCalendarImport(fileContent);\n      } else {\n        throw Error('Inject ICalendarImport module');\n      }\n    }\n    /**\n     * Adds the newly created event into the Schedule dataSource.\n     *\n     * @function addEvent\n     * @param {Object | Object[]} data Single or collection of event objects to be added into Schedule.\n     * @returns {void}\n     */\n\n  }, {\n    key: \"addEvent\",\n    value: function addEvent(data) {\n      this.crudModule.addEvent(data);\n    }\n    /**\n     * Allows the Scheduler events data to be exported as an Excel file either in .xlsx or .csv file formats.\n     * By default, the whole event collection bound to the Scheduler gets exported as an Excel file.\n     * To export only the specific events of Scheduler, you need to pass the custom data collection as\n     * a parameter to this `exportToExcel` method. This method accepts the export options as arguments such as fileName,\n     * exportType, fields, customData, and includeOccurrences. The `fileName` denotes the name to be given for the exported\n     * file and the `exportType` allows you to set the format of an Excel file to be exported either as .xlsx or .csv.\n     * The custom or specific field collection of event dataSource to be exported can be provided through `fields` option\n     * and the custom data collection can be exported by passing them through the `customData` option. There also exists\n     * option to export each individual instances of the recurring events to an Excel file, by setting true or false to the\n     * `includeOccurrences` option, denoting either to include or exclude the occurrences as separate instances on an exported Excel file.\n     *\n     * @function exportToExcel\n     * @param {ExportOptions} excelExportOptions The export options to be set before start with exporting the Scheduler events to an Excel file.\n     * @returns {void}\n     */\n\n  }, {\n    key: \"exportToExcel\",\n    value: function exportToExcel(excelExportOptions) {\n      if (this.excelExportModule) {\n        this.excelExportModule.initializeExcelExport(excelExportOptions || {});\n      } else {\n        throw Error('Inject ExcelExport module');\n      }\n    }\n    /**\n     * Method allows to print the scheduler.\n     *\n     * @function print\n     * @param {ScheduleModel} printOptions The export options to be set before start with exporting\n     * the Scheduler events to the print window.\n     * @returns {void}\n     */\n\n  }, {\n    key: \"print\",\n    value: function print(printOptions) {\n      if (this.printModule) {\n        this.printModule.print(printOptions);\n      } else {\n        throw Error('Inject Print module');\n      }\n    }\n    /**\n     * Updates the changes made in the event object by passing it as an parameter into the dataSource.\n     *\n     * @function saveEvent\n     * @param {Object | Object[]} data Single or collection of event objects to be saved into Schedule.\n     * @param {CurrentAction} currentAction Denotes the action that takes place either for editing occurrence or series.\n     *  The valid current action names are `EditOccurrence` or `EditSeries`.\n     * @returns {void}\n     */\n\n  }, {\n    key: \"saveEvent\",\n    value: function saveEvent(data, currentAction) {\n      this.crudModule.saveEvent(data, currentAction);\n    }\n    /**\n     * Deletes the events based on the provided ID or event collection in the argument list.\n     *\n     * @function deleteEvent\n     * @param {string | number | Object | Object[]} id Accepts the ID as string or number type or single or collection of the event object which needs to be removed from the Schedule.\n     * @param {CurrentAction} currentAction Denotes the delete action that takes place either on occurrence or series events.\n     *  The valid current action names are `Delete`, `DeleteOccurrence` or `DeleteSeries`.\n     * @returns {void}\n     */\n\n  }, {\n    key: \"deleteEvent\",\n    value: function deleteEvent(id, currentAction) {\n      this.crudModule.deleteEvent(id, currentAction);\n    }\n    /**\n     * Retrieves the entire collection of events bound to the Schedule.\n     *\n     * @function getEvents\n     * @param {Date} startDate Accepts the start date.\n     * @param {Date} endDate Accepts te end date.\n     * @param {boolean} includeOccurrences Accepts the boolean value to process the occurrence from recurrence series.\n     * @returns {Object[]} Returns the collection of event objects from the Schedule.\n     */\n\n  }, {\n    key: \"getEvents\",\n    value: function getEvents(startDate, endDate, includeOccurrences) {\n      var eventCollections = [];\n\n      if (includeOccurrences) {\n        eventCollections = this.eventBase.getProcessedEvents();\n      } else {\n        eventCollections = this.eventsData;\n      }\n\n      if (startDate) {\n        startDate = this.getDateTime(startDate);\n      }\n\n      if (endDate) {\n        endDate = this.getDateTime(endDate);\n      }\n\n      eventCollections = this.eventBase.filterEventsByRange(eventCollections, startDate, endDate);\n      return eventCollections;\n    }\n    /**\n     * Retrieves the entire collection of block events bound to the Schedule.\n     *\n     * @function getBlockEvents\n     * @param {Date} startDate Accepts the start date.\n     * @param {Date} endDate Accepts te end date.\n     * @param {boolean} includeOccurrences Accepts the boolean value to process the occurrence from recurrence series.\n     * @returns {Object[]} Returns the collection of block event objects from the Schedule.\n     */\n\n  }, {\n    key: \"getBlockEvents\",\n    value: function getBlockEvents(startDate, endDate, includeOccurrences) {\n      var eventCollections = [];\n\n      if (includeOccurrences) {\n        eventCollections = this.eventBase.getProcessedEvents(this.blockData);\n      } else {\n        eventCollections = this.blockData;\n      }\n\n      if (startDate) {\n        startDate = this.getDateTime(startDate);\n      }\n\n      if (endDate) {\n        endDate = this.getDateTime(endDate);\n      }\n\n      eventCollections = this.eventBase.filterEventsByRange(eventCollections, startDate, endDate);\n      return eventCollections;\n    }\n    /**\n     * Retrieves the occurrences of a single recurrence event based on the provided parent ID.\n     *\n     * @function getOccurrencesByID\n     * @param {number} eventID ID of the parent recurrence data from which the occurrences are fetched.\n     * @returns {Object[]} Returns the collection of occurrence event objects.\n     */\n\n  }, {\n    key: \"getOccurrencesByID\",\n    value: function getOccurrencesByID(eventID) {\n      return this.eventBase.getOccurrencesByID(eventID);\n    }\n    /**\n     * Retrieves all the occurrences that lies between the specific start and end time range.\n     *\n     * @function getOccurrencesByRange\n     * @param {Date} startTime Denotes the start time range.\n     * @param {Date} endTime Denotes the end time range.\n     * @returns {Object[]} Returns the collection of occurrence event objects that lies between the provided start and end time.\n     */\n\n  }, {\n    key: \"getOccurrencesByRange\",\n    value: function getOccurrencesByRange(startTime, endTime) {\n      startTime = this.getDateTime(startTime);\n      endTime = this.getDateTime(endTime);\n      return this.eventBase.getOccurrencesByRange(startTime, endTime);\n    }\n    /**\n     * Retrieves the dates that lies on active view of Schedule.\n     *\n     * @function getCurrentViewDates\n     * @returns {Date[]} Returns the collection of dates.\n     */\n\n  }, {\n    key: \"getCurrentViewDates\",\n    value: function getCurrentViewDates() {\n      return this.activeView ? this.activeView.renderDates : [];\n    }\n    /**\n     * Set the recurrence editor instance from custom editor template.\n     *\n     * @function setRecurrenceEditor\n     * @param {RecurrenceEditor} recurrenceEditor instance has passed to fetch the instance in event window.\n     * @returns {void}\n     */\n\n  }, {\n    key: \"setRecurrenceEditor\",\n    value: function setRecurrenceEditor(recurrenceEditor) {\n      this.eventWindow.setRecurrenceEditor(recurrenceEditor);\n    }\n    /**\n     * Get the maximum id of an event.\n     *\n     * @function getEventMaxID\n     * @returns {number | string} Returns the maximum ID from scheduler data collections.\n     */\n\n  }, {\n    key: \"getEventMaxID\",\n    value: function getEventMaxID() {\n      return this.eventBase.getEventMaxID();\n    }\n    /**\n     * Get deleted occurrences from given recurrence series.\n     *\n     * @function getDeletedOccurrences\n     * @param {string | number | Object} recurrenceData Accepts the parent ID of the event object or parent event object\n     * @returns {Object[]} Returns the collection of deleted occurrence events.\n     */\n\n  }, {\n    key: \"getDeletedOccurrences\",\n    value: function getDeletedOccurrences(recurrenceData) {\n      return this.eventBase.getDeletedOccurrences(recurrenceData);\n    }\n    /**\n     * Retrieves the events that lies on the current date range of the active view of Schedule.\n     *\n     * @function getCurrentViewEvents\n     * @returns {Object[]} Returns the collection of events.\n     */\n\n  }, {\n    key: \"getCurrentViewEvents\",\n    value: function getCurrentViewEvents() {\n      return this.eventsProcessed;\n    }\n    /**\n     * Refreshes the event dataSource. This method may be useful when the events alone in the schedule needs to be re-rendered.\n     *\n     * @function refreshEvents\n     * @param {boolean} isRemoteRefresh Accepts the boolean to refresh data from remote or local\n     * @returns {void}\n     */\n\n  }, {\n    key: \"refreshEvents\",\n    value: function refreshEvents() {\n      var isRemoteRefresh = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : true;\n\n      if (this.dragAndDropModule) {\n        this.dragAndDropModule.actionObj.action = '';\n        removeClass([this.element], EVENT_ACTION_CLASS);\n      }\n\n      if (isRemoteRefresh) {\n        this.crudModule.refreshDataManager();\n      } else {\n        var eventsData = this.eventsData || [];\n        var blockData = this.blockData || [];\n        var data = eventsData.concat(blockData);\n        this.notify(dataReady, {\n          processedData: this.eventBase ? this.eventBase.processData(data) : []\n        });\n      }\n    }\n    /**\n     * Method to refresh the given Schedule templates\n     *\n     * @param {string} templateName Accepts the template name\n     * @returns {void}\n     */\n\n  }, {\n    key: \"refreshTemplates\",\n    value: function refreshTemplates(templateName) {\n      if (templateName) {\n        this.resetTemplates([templateName]);\n      } else {\n        this.resetTemplates();\n      }\n\n      switch (templateName) {\n        case 'eventTemplate':\n          this.appointmentTemplateFn = this.templateParser(this.activeViewOptions.eventTemplate);\n          this.refreshEvents(false);\n          break;\n\n        case 'dateHeaderTemplate':\n          this.dateHeaderTemplateFn = this.templateParser(this.activeViewOptions.dateHeaderTemplate);\n          this.activeView.refreshHeader();\n          break;\n\n        case 'resourceHeaderTemplate':\n          this.resourceHeaderTemplateFn = this.templateParser(this.activeViewOptions.resourceHeaderTemplate);\n\n          if (this.activeView.isTimelineView()) {\n            this.activeView.refreshResourceHeader();\n          } else {\n            this.activeView.refreshHeader();\n          }\n\n          break;\n\n        case 'quickInfoTemplates':\n          if (this.quickPopup) {\n            this.quickPopup.destroy();\n            this.quickPopup = null;\n          }\n\n          this.quickPopup = new QuickPopups(this);\n          this.quickInfoTemplatesHeaderFn = this.templateParser(this.quickInfoTemplates.header);\n          this.quickInfoTemplatesContentFn = this.templateParser(this.quickInfoTemplates.content);\n          this.quickInfoTemplatesFooterFn = this.templateParser(this.quickInfoTemplates.footer);\n          break;\n\n        case 'editorTemplate':\n          if (this.eventWindow) {\n            this.eventWindow.destroy();\n            this.eventWindow = null;\n          }\n\n          this.eventWindow = new EventWindow(this);\n          this.editorTemplateFn = this.templateParser(this.editorTemplate);\n          break;\n\n        case 'tooltipTemplate':\n        case 'headerTooltipTemplate':\n          if (this.eventTooltip) {\n            this.eventTooltip.destroy();\n            this.eventTooltip = null;\n          }\n\n          this.eventTooltip = new EventTooltip(this);\n          this.eventTooltipTemplateFn = this.templateParser(this.eventSettings.tooltipTemplate);\n          this.headerTooltipTemplateFn = this.templateParser(this.activeViewOptions.group.headerTooltipTemplate);\n          break;\n\n        default:\n          this.initializeView(this.currentView);\n          break;\n      }\n    }\n    /**\n     * Refreshes the Schedule layout without re-render.\n     *\n     * @function refreshLayout\n     * @returns {void}\n     */\n\n  }, {\n    key: \"refreshLayout\",\n    value: function refreshLayout() {\n      this.onScheduleResize();\n\n      if (this.headerModule) {\n        this.headerModule.refresh();\n      }\n\n      if (this.eventWindow) {\n        this.eventWindow.refresh();\n      }\n    }\n    /**\n     * To retrieve the appointment object from element.\n     *\n     * @function getEventDetails\n     * @param {Element} element Denotes the event UI element on the Schedule.\n     * @returns {Object} Returns the event details.\n     */\n\n  }, {\n    key: \"getEventDetails\",\n    value: function getEventDetails(element) {\n      element = getElement(element);\n      var guid = element.getAttribute('data-guid');\n\n      if (guid) {\n        return this.eventBase.getEventByGuid(guid);\n      }\n\n      return {};\n    }\n    /**\n     * To check whether the given time range slots are available for event creation or already occupied by other events.\n     *\n     * @function isSlotAvailable\n     * @param {Date | Object} startTime Denotes the start time of the slot.\n     * @param {Date} endTime Denotes the end time of the slot.\n     * @param {number} groupIndex Defines the resource index from last level.\n     * @returns {boolean} Returns true, if the slot that lies in the provided time range does not contain any other events.\n     */\n\n  }, {\n    key: \"isSlotAvailable\",\n    value: function isSlotAvailable(startTime, endTime, groupIndex) {\n      var _this73 = this;\n\n      var eventStart;\n      var eventEnd;\n      var eventObj = this.activeEventData.event;\n\n      if (startTime instanceof Date || typeof startTime === 'string') {\n        eventStart = startTime;\n        eventEnd = endTime;\n      } else {\n        eventObj = startTime;\n        eventStart = startTime[this.eventFields.startTime];\n        eventEnd = startTime[this.eventFields.endTime];\n\n        if (this.resourceBase) {\n          groupIndex = this.eventBase.getGroupIndexFromEvent(startTime);\n        }\n      }\n\n      if (isNullOrUndefined(eventStart) || isNullOrUndefined(eventEnd)) {\n        return true;\n      }\n\n      eventStart = this.getDateTime(eventStart);\n      eventEnd = this.getDateTime(eventEnd);\n      var eventCollection = this.eventBase.filterEvents(eventStart, eventEnd);\n\n      if (!isNullOrUndefined(groupIndex) && this.resourceBase && this.resourceBase.lastResourceLevel.length > 0) {\n        eventCollection = this.eventBase.filterEventsByResource(this.resourceBase.lastResourceLevel[groupIndex], eventCollection);\n      }\n\n      if (eventObj) {\n        if (eventObj.Guid) {\n          eventCollection = eventCollection.filter(function (event) {\n            return event.Guid !== eventObj.Guid;\n          });\n        } else {\n          eventCollection = eventCollection.filter(function (event) {\n            return event[_this73.eventFields.id] !== eventObj[_this73.eventFields.id];\n          });\n        }\n      }\n\n      return eventCollection.length > 0 ? false : true;\n    }\n    /**\n     * To manually open the event editor on specific time or on certain events.\n     *\n     * @function openEditor\n     * @param {Object} data It can be either cell data or event data.\n     * @param {CurrentAction} action Defines the action for which the editor needs to be opened such as either for new event creation or\n     *  for editing of existing events. The applicable action names that can be used here are `Add`, `Save`, `EditOccurrence`\n     *  and `EditSeries`.\n     * @param {boolean} isEventData It allows to decide whether the editor needs to be opened with the clicked cell details or with the\n     *  passed event details.\n     * @param {number} repeatType It opens the editor with the recurrence options based on the provided repeat type.\n     * @returns {void}\n     */\n\n  }, {\n    key: \"openEditor\",\n    value: function openEditor(data, action, isEventData, repeatType) {\n      if (action === 'Add' && !isEventData) {\n        data.startTime = this.getDateTime(data.startTime);\n        data.endTime = this.getDateTime(data.endTime);\n\n        if (!isNullOrUndefined(data.element)) {\n          data.element = getElement(data.element);\n        }\n      } else {\n        data[this.eventFields.startTime] = this.getDateTime(data[this.eventFields.startTime]);\n        data[this.eventFields.endTime] = this.getDateTime(data[this.eventFields.endTime]);\n      }\n\n      this.currentAction = action;\n\n      if (action !== 'Add') {\n        this.activeEventData.event = data;\n      }\n\n      this.eventWindow.openEditor(data, action, isEventData, repeatType);\n    }\n    /**\n     * To manually close the event editor window\n     *\n     * @function closeEditor\n     * @returns {void}\n     */\n\n  }, {\n    key: \"closeEditor\",\n    value: function closeEditor() {\n      if (this.eventWindow) {\n        this.eventWindow.dialogClose();\n      }\n    }\n    /**\n     * To manually close the quick info popup\n     *\n     * @function closeQuickInfoPopup\n     * @returns {void}\n     */\n\n  }, {\n    key: \"closeQuickInfoPopup\",\n    value: function closeQuickInfoPopup() {\n      if (this.quickPopup) {\n        this.quickPopup.quickPopupHide(true);\n      }\n    }\n    /**\n     * Select the resource based on group index in mobile mode.\n     *\n     * @param {number} groupIndex Defines the resource index based on last level.\n     * @returns {void}\n     */\n\n  }, {\n    key: \"selectResourceByIndex\",\n    value: function selectResourceByIndex(groupIndex) {\n      if (this.resourceBase && this.uiStateValues.isGroupAdaptive) {\n        this.resourceBase.selectResourceByIndex(groupIndex);\n      }\n    }\n    /**\n     * Select the resources to the based on id.\n     *\n     * @param {string | number} id id of the resource defined in resources collection.\n     * @param {string} name Name of the resource defined in resources collection.\n     * @returns {number} Returns the group index\n     */\n\n  }, {\n    key: \"getIndexFromResourceId\",\n    value: function getIndexFromResourceId(id, name) {\n      if (this.resourceBase) {\n        return this.resourceBase.getIndexFromResourceId(id, name);\n      }\n\n      return null;\n    }\n    /**\n     * Adds the resources to the specified index.\n     *\n     * @param {Object | Object[]} resources Accepts the resource data in single or collection of data.\n     * @param {string} name Name of the resource defined in resources collection.\n     * @param {number} index Index or position where the resource should be added.\n     * @returns {void}\n     */\n\n  }, {\n    key: \"addResource\",\n    value: function addResource(resources, name, index) {\n      this.resourceBase.addResource(resources, name, index);\n    }\n    /**\n     * Removes the specified resource.\n     *\n     * @param {string | string[] | number | number[]} resourceId Specifies the resource id to be removed.\n     * @param {string} name Specifies the resource name from which the id should be referred.\n     * @returns {void}\n     */\n\n  }, {\n    key: \"removeResource\",\n    value: function removeResource(resourceId, name) {\n      this.resourceBase.removeResource(resourceId, name);\n    }\n    /**\n     * Destroys the Schedule component.\n     *\n     * @function destroy\n     * @returns {void}\n     */\n\n  }, {\n    key: \"destroy\",\n    value: function destroy() {\n      if (this.eventTooltip) {\n        this.eventTooltip.destroy();\n        this.eventTooltip = null;\n      }\n\n      this.destroyPopups();\n      this.unWireEvents();\n      this.destroyHeaderModule();\n\n      if (this.eventTooltip) {\n        this.eventTooltip.destroy();\n        this.eventTooltip = null;\n      }\n\n      if (this.eventBase) {\n        this.eventBase.destroy();\n        this.eventBase = null;\n      }\n\n      if (this.workCellAction) {\n        this.workCellAction.destroy();\n        this.workCellAction = null;\n      }\n\n      if (this.inlineModule) {\n        this.inlineModule.destroy();\n        this.inlineModule = null;\n      }\n\n      if (this.keyboardInteractionModule) {\n        this.keyboardInteractionModule.destroy();\n        this.keyboardInteractionModule = null;\n      }\n\n      if (this.scrollModule) {\n        this.scrollModule.destroy();\n        this.scrollModule = null;\n      }\n\n      if (this.printModule) {\n        this.printModule.destroy();\n      }\n\n      if (this.activeView) {\n        this.resetTemplates();\n        this.activeView.removeEventListener();\n        this.activeView.destroy();\n        this.activeView = null;\n      }\n\n      if (this.scheduleTouchModule) {\n        this.scheduleTouchModule.destroy();\n        this.scheduleTouchModule = null;\n      }\n\n      if (this.crudModule) {\n        this.crudModule.destroy();\n        this.crudModule = null;\n      }\n\n      if (this.dataModule) {\n        this.dataModule.destroy();\n        this.dataModule = null;\n      }\n\n      _get(_getPrototypeOf(Schedule.prototype), \"destroy\", this).call(this);\n\n      var modules = ['dayModule', 'weekModule', 'workWeekModule', 'monthModule', 'monthAgendaModule', 'yearModule', 'agendaModule', 'timelineViewsModule', 'timelineMonthModule', 'timelineYearModule', 'resizeModule', 'dragAndDropModule', 'excelExportModule', 'printModule', 'iCalendarExportModule', 'iCalendarImportModule', 'tzModule', 'eventsData', 'eventsProcessed', 'blockData', 'blockProcessed', 'uiStateValues', 'viewCollections', 'viewOptions', 'defaultLocale', 'localeObj', 'selectedElements', 'resourceCollection', 'editorTitles', 'eventFields', 'activeViewOptions', 'activeEventData', 'activeCellsData', 'renderModule'];\n\n      for (var _i15 = 0, _modules = modules; _i15 < _modules.length; _i15++) {\n        var module = _modules[_i15];\n        this[module] = null;\n      }\n\n      removeChildren(this.element);\n      var removeClasses = [ROOT, RTL, DEVICE_CLASS, MULTI_DRAG];\n\n      if (this.cssClass) {\n        removeClasses = removeClasses.concat(this.cssClass.split(' '));\n      }\n\n      removeClass([this.element], removeClasses);\n    }\n  }]);\n\n  return Schedule;\n}(Component);\n\n__decorate([Property('auto')], Schedule.prototype, \"width\", void 0);\n\n__decorate([Property('auto')], Schedule.prototype, \"height\", void 0);\n\n__decorate([Property(true)], Schedule.prototype, \"showHeaderBar\", void 0);\n\n__decorate([Property(true)], Schedule.prototype, \"showTimeIndicator\", void 0);\n\n__decorate([Property('Week')], Schedule.prototype, \"currentView\", void 0);\n\n__decorate([Property(['Day', 'Week', 'WorkWeek', 'Month', 'Agenda'])], Schedule.prototype, \"views\", void 0);\n\n__decorate([Property(new Date())], Schedule.prototype, \"selectedDate\", void 0);\n\n__decorate([Property(new Date(1900, 0, 1))], Schedule.prototype, \"minDate\", void 0);\n\n__decorate([Property(new Date(2099, 11, 31))], Schedule.prototype, \"maxDate\", void 0);\n\n__decorate([Property()], Schedule.prototype, \"dateFormat\", void 0);\n\n__decorate([Property('Gregorian')], Schedule.prototype, \"calendarMode\", void 0);\n\n__decorate([Property(true)], Schedule.prototype, \"showWeekend\", void 0);\n\n__decorate([Property(0)], Schedule.prototype, \"firstDayOfWeek\", void 0);\n\n__decorate([Property('FirstDay')], Schedule.prototype, \"weekRule\", void 0);\n\n__decorate([Property([1, 2, 3, 4, 5])], Schedule.prototype, \"workDays\", void 0);\n\n__decorate([Property(12)], Schedule.prototype, \"monthsCount\", void 0);\n\n__decorate([Property('00:00')], Schedule.prototype, \"startHour\", void 0);\n\n__decorate([Property('24:00')], Schedule.prototype, \"endHour\", void 0);\n\n__decorate([Property(null)], Schedule.prototype, \"timeFormat\", void 0);\n\n__decorate([Property(false)], Schedule.prototype, \"enableAllDayScroll\", void 0);\n\n__decorate([Property(false)], Schedule.prototype, \"enableAdaptiveUI\", void 0);\n\n__decorate([Property(true)], Schedule.prototype, \"allowResizing\", void 0);\n\n__decorate([Complex({}, WorkHours)], Schedule.prototype, \"workHours\", void 0);\n\n__decorate([Complex({}, TimeScale)], Schedule.prototype, \"timeScale\", void 0);\n\n__decorate([Property(true)], Schedule.prototype, \"allowKeyboardInteraction\", void 0);\n\n__decorate([Property(true)], Schedule.prototype, \"allowDragAndDrop\", void 0);\n\n__decorate([Property()], Schedule.prototype, \"dateHeaderTemplate\", void 0);\n\n__decorate([Property()], Schedule.prototype, \"cellHeaderTemplate\", void 0);\n\n__decorate([Property()], Schedule.prototype, \"dayHeaderTemplate\", void 0);\n\n__decorate([Property()], Schedule.prototype, \"monthHeaderTemplate\", void 0);\n\n__decorate([Property()], Schedule.prototype, \"cellTemplate\", void 0);\n\n__decorate([Property(false)], Schedule.prototype, \"readonly\", void 0);\n\n__decorate([Property(true)], Schedule.prototype, \"showQuickInfo\", void 0);\n\n__decorate([Property(false)], Schedule.prototype, \"allowInline\", void 0);\n\n__decorate([Property(true)], Schedule.prototype, \"allowMultiCellSelection\", void 0);\n\n__decorate([Property(true)], Schedule.prototype, \"allowMultiRowSelection\", void 0);\n\n__decorate([Property(false)], Schedule.prototype, \"quickInfoOnSelectionEnd\", void 0);\n\n__decorate([Property(false)], Schedule.prototype, \"showWeekNumber\", void 0);\n\n__decorate([Property(false)], Schedule.prototype, \"rowAutoHeight\", void 0);\n\n__decorate([Property(false)], Schedule.prototype, \"allowMultiDrag\", void 0);\n\n__decorate([Property(0)], Schedule.prototype, \"firstMonthOfYear\", void 0);\n\n__decorate([Property()], Schedule.prototype, \"editorTemplate\", void 0);\n\n__decorate([Complex({}, QuickInfoTemplates)], Schedule.prototype, \"quickInfoTemplates\", void 0);\n\n__decorate([Property(7)], Schedule.prototype, \"agendaDaysCount\", void 0);\n\n__decorate([Property(true)], Schedule.prototype, \"hideEmptyAgendaDays\", void 0);\n\n__decorate([Property(true)], Schedule.prototype, \"enableRecurrenceValidation\", void 0);\n\n__decorate([Property()], Schedule.prototype, \"timezone\", void 0);\n\n__decorate([Complex({}, EventSettings)], Schedule.prototype, \"eventSettings\", void 0);\n\n__decorate([Property(timezoneData)], Schedule.prototype, \"timezoneDataSource\", void 0);\n\n__decorate([Property()], Schedule.prototype, \"resourceHeaderTemplate\", void 0);\n\n__decorate([Property()], Schedule.prototype, \"headerIndentTemplate\", void 0);\n\n__decorate([Complex({}, Group)], Schedule.prototype, \"group\", void 0);\n\n__decorate([Collection([], Resources)], Schedule.prototype, \"resources\", void 0);\n\n__decorate([Collection([], HeaderRows)], Schedule.prototype, \"headerRows\", void 0);\n\n__decorate([Property()], Schedule.prototype, \"cssClass\", void 0);\n\n__decorate([Property()], Schedule.prototype, \"eventDragArea\", void 0);\n\n__decorate([Event()], Schedule.prototype, \"created\", void 0);\n\n__decorate([Event()], Schedule.prototype, \"destroyed\", void 0);\n\n__decorate([Event()], Schedule.prototype, \"cellClick\", void 0);\n\n__decorate([Event()], Schedule.prototype, \"cellDoubleClick\", void 0);\n\n__decorate([Event()], Schedule.prototype, \"moreEventsClick\", void 0);\n\n__decorate([Event()], Schedule.prototype, \"hover\", void 0);\n\n__decorate([Event()], Schedule.prototype, \"select\", void 0);\n\n__decorate([Event()], Schedule.prototype, \"actionBegin\", void 0);\n\n__decorate([Event()], Schedule.prototype, \"actionComplete\", void 0);\n\n__decorate([Event()], Schedule.prototype, \"actionFailure\", void 0);\n\n__decorate([Event()], Schedule.prototype, \"navigating\", void 0);\n\n__decorate([Event()], Schedule.prototype, \"renderCell\", void 0);\n\n__decorate([Event()], Schedule.prototype, \"eventClick\", void 0);\n\n__decorate([Event()], Schedule.prototype, \"eventRendered\", void 0);\n\n__decorate([Event()], Schedule.prototype, \"dataBinding\", void 0);\n\n__decorate([Event()], Schedule.prototype, \"popupOpen\", void 0);\n\n__decorate([Event()], Schedule.prototype, \"popupClose\", void 0);\n\n__decorate([Event()], Schedule.prototype, \"dragStart\", void 0);\n\n__decorate([Event()], Schedule.prototype, \"drag\", void 0);\n\n__decorate([Event()], Schedule.prototype, \"dragStop\", void 0);\n\n__decorate([Event()], Schedule.prototype, \"resizeStart\", void 0);\n\n__decorate([Event()], Schedule.prototype, \"resizing\", void 0);\n\n__decorate([Event()], Schedule.prototype, \"resizeStop\", void 0);\n\n__decorate([Event()], Schedule.prototype, \"dataBound\", void 0);\n\nSchedule = __decorate([NotifyPropertyChanges], Schedule);\n/* eslint-disable @typescript-eslint/no-explicit-any */\n\n/**\n * Base class for the common drag and resize related actions\n */\n\nvar ActionBase = /*#__PURE__*/function () {\n  function ActionBase(parent) {\n    _classCallCheck(this, ActionBase);\n\n    this.daysVariation = 0;\n    this.parent = parent;\n    this.actionObj = {\n      X: 0,\n      Y: 0,\n      groupIndex: 0,\n      cellWidth: 0,\n      cellHeight: 0,\n      slotInterval: 0,\n      interval: 0,\n      actionIndex: 0,\n      cloneElement: [],\n      originalElement: [],\n      action: null,\n      isAllDay: null,\n      excludeSelectors: null,\n      index: 0,\n      navigationInterval: null,\n      scrollInterval: null\n    };\n    this.scrollArgs = {\n      element: null,\n      width: 0,\n      height: 0\n    };\n    this.resizeEdges = {\n      left: false,\n      right: false,\n      top: false,\n      bottom: false\n    };\n    this.scrollEdges = {\n      left: false,\n      right: false,\n      top: false,\n      bottom: false\n    };\n  }\n\n  _createClass(ActionBase, [{\n    key: \"getChangedData\",\n    value: function getChangedData(multiData) {\n      var _this74 = this;\n\n      var eventObj = extend({}, this.actionObj.event, null, true);\n      eventObj[this.parent.eventFields.startTime] = this.actionObj.start;\n      eventObj[this.parent.eventFields.endTime] = this.actionObj.end;\n\n      if (!isNullOrUndefined(this.actionObj.isAllDay)) {\n        eventObj[this.parent.eventFields.isAllDay] = this.actionObj.isAllDay;\n      }\n\n      if (this.parent.activeViewOptions.group.resources.length > 0) {\n        var originalElement = this.getOriginalElement(this.actionObj.element);\n\n        if (originalElement) {\n          var indexCol = originalElement.map(function (element) {\n            return parseInt(element.getAttribute('data-group-index'), 10);\n          });\n\n          if (indexCol.indexOf(this.actionObj.groupIndex) === -1 || !isNullOrUndefined(multiData) && multiData.length > 0) {\n            var cloneIndex = parseInt(this.actionObj.clone.getAttribute('data-group-index'), 10);\n            indexCol = indexCol.filter(function (index) {\n              return index !== cloneIndex;\n            });\n            indexCol.push(this.actionObj.groupIndex);\n\n            if (multiData && multiData.length > 0) {\n              multiData.forEach(function (data) {\n                _this74.parent.resourceBase.getResourceData(data, _this74.actionObj.groupIndex, indexCol);\n              });\n            } else {\n              this.parent.resourceBase.getResourceData(eventObj, this.actionObj.groupIndex, indexCol);\n            }\n          }\n        }\n      }\n\n      return eventObj;\n    }\n  }, {\n    key: \"saveChangedData\",\n    value: function saveChangedData(eventArgs) {\n      var isMultiSelect = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : false;\n      this.parent.activeEventData.event = this.actionObj.event;\n      this.parent.currentAction = 'Save';\n      var currentAction;\n      var eventsCollection = [eventArgs.data];\n\n      if (isMultiSelect) {\n        eventsCollection = eventArgs.selectedData;\n      }\n\n      var _iterator96 = _createForOfIteratorHelper(eventsCollection),\n          _step96;\n\n      try {\n        for (_iterator96.s(); !(_step96 = _iterator96.n()).done;) {\n          var eventObj = _step96.value;\n          var isSameResource = this.parent.activeViewOptions.group.resources.length > 0 ? parseInt(this.actionObj.element.getAttribute('data-group-index'), 10) === this.actionObj.groupIndex : true;\n\n          if (+eventObj[this.parent.eventFields.startTime] === +this.actionObj.event[this.parent.eventFields.startTime] && +eventObj[this.parent.eventFields.endTime] === +this.actionObj.event[this.parent.eventFields.endTime] && isSameResource) {\n            return;\n          }\n\n          if (eventObj[this.parent.eventFields.recurrenceRule]) {\n            var eveId = eventObj[this.parent.eventFields.recurrenceID] || eventObj[this.parent.eventFields.id];\n\n            if (eventObj[this.parent.eventFields.id] === eventObj[this.parent.eventFields.recurrenceID]) {\n              eventObj[this.parent.eventFields.id] = this.parent.eventBase.getEventMaxID();\n              currentAction = 'EditOccurrence';\n            }\n\n            if (this.parent.enableRecurrenceValidation && this.parent.eventWindow.editOccurrenceValidation(eveId, eventObj, this.actionObj.event)) {\n              return;\n            }\n          } else {\n            currentAction = null;\n          }\n\n          if (eventObj[this.parent.eventFields.startTimezone] || eventObj[this.parent.eventFields.endTimezone]) {\n            this.parent.eventBase.timezoneConvert(eventObj);\n          }\n\n          this.parent.crudModule.saveEvent(eventObj, currentAction);\n        }\n      } catch (err) {\n        _iterator96.e(err);\n      } finally {\n        _iterator96.f();\n      }\n    }\n  }, {\n    key: \"calculateIntervalTime\",\n    value: function calculateIntervalTime(date) {\n      var intervalTime = new Date(+date);\n      intervalTime.setMinutes(Math.floor(intervalTime.getMinutes() / this.actionObj.interval) * this.actionObj.interval);\n      return intervalTime;\n    }\n  }, {\n    key: \"getContentAreaDimension\",\n    value: function getContentAreaDimension() {\n      var viewElement = this.parent.element.querySelector('.' + CONTENT_WRAP_CLASS);\n      var trElement = [].slice.call(viewElement.querySelector('tr').children);\n\n      if (!this.parent.activeView.isTimelineView() && this.parent.activeViewOptions.group.resources.length > 0 && !this.parent.isAdaptive && !this.parent.enableAdaptiveUI) {\n        trElement = this.getResourceElements(trElement);\n      }\n\n      var leftOffset = trElement[0].getBoundingClientRect();\n      var rightOffset = trElement.slice(-1)[0].getBoundingClientRect();\n      var viewDimension = {\n        bottom: viewElement.scrollHeight - 5,\n        left: this.parent.enableRtl ? rightOffset.left : leftOffset.left,\n        right: this.parent.enableRtl ? leftOffset.right : rightOffset.right,\n        top: 0,\n        leftOffset: this.parent.enableRtl ? rightOffset.right : leftOffset.right,\n        rightOffset: this.parent.enableRtl ? leftOffset.left : rightOffset.left\n      };\n      return viewDimension;\n    }\n  }, {\n    key: \"getPageCoordinates\",\n    value: function getPageCoordinates(e) {\n      var eventArgs = e.event;\n      return eventArgs && eventArgs.changedTouches ? eventArgs.changedTouches[0] : e.changedTouches ? e.changedTouches[0] : eventArgs || e;\n    }\n  }, {\n    key: \"getIndex\",\n    value: function getIndex(index) {\n      var contentElements = [].slice.call(this.parent.getContentTable().querySelector('tr').children);\n      var indexes = {\n        minIndex: 0,\n        maxIndex: contentElements.length - 1\n      };\n\n      if (this.actionObj.action === 'resize' && this.parent.activeViewOptions.group.resources.length > 0 && !this.parent.uiStateValues.isGroupAdaptive && !this.parent.activeView.isTimelineView()) {\n        var groupElements = this.getResourceElements(contentElements);\n        indexes.minIndex = groupElements[0].cellIndex;\n        indexes.maxIndex = groupElements.slice(-1)[0].cellIndex;\n      }\n\n      if (index < indexes.minIndex) {\n        index = indexes.minIndex;\n      }\n\n      if (index > indexes.maxIndex) {\n        index = indexes.maxIndex;\n      }\n\n      return index;\n    }\n  }, {\n    key: \"updateTimePosition\",\n    value: function updateTimePosition(date, multiData) {\n      var index = 0;\n\n      var _iterator97 = _createForOfIteratorHelper(this.actionObj.cloneElement),\n          _step97;\n\n      try {\n        for (_iterator97.s(); !(_step97 = _iterator97.n()).done;) {\n          var cloneElement = _step97.value;\n          var timeElement = cloneElement.querySelector('.' + APPOINTMENT_TIME);\n\n          if (timeElement) {\n            var startTime = this.actionObj.start;\n            var endTime = this.actionObj.end;\n\n            if (multiData && multiData.length > 0) {\n              startTime = multiData[index][this.parent.eventFields.startTime];\n              endTime = multiData[index][this.parent.eventFields.endTime];\n            }\n\n            timeElement.innerHTML = this.parent.getTimeString(startTime) + ' - ' + this.parent.getTimeString(endTime);\n          }\n\n          index++;\n        }\n      } catch (err) {\n        _iterator97.e(err);\n      } finally {\n        _iterator97.f();\n      }\n\n      if (!this.parent.activeViewOptions.timeScale.enable || !this.parent.isAdaptive || this.parent.currentView === 'Month' || this.parent.currentView === 'TimelineMonth') {\n        return;\n      }\n\n      var timeIndicator = this.parent.element.querySelector('.' + CLONE_TIME_INDICATOR_CLASS);\n\n      if (!timeIndicator) {\n        timeIndicator = createElement('div', {\n          className: CLONE_TIME_INDICATOR_CLASS\n        });\n        var wrapperClass = this.parent.activeView.isTimelineView() ? DATE_HEADER_WRAP_CLASS : TIME_CELLS_WRAP_CLASS;\n        this.parent.element.querySelector('.' + wrapperClass).appendChild(timeIndicator);\n      }\n\n      timeIndicator.innerHTML = this.parent.getTimeString(date);\n      var offsetValue = 0;\n\n      if (this.parent.activeView.isTimelineView()) {\n        if (this.parent.enableRtl) {\n          var rightValue = parseInt(this.actionObj.clone.style.right, 10);\n          offsetValue = this.actionObj.action === 'drag' || this.resizeEdges.left ? rightValue + this.actionObj.clone.offsetWidth : rightValue;\n          timeIndicator.style.right = formatUnit(offsetValue);\n        } else {\n          var leftValue = parseInt(this.actionObj.clone.style.left, 10);\n          offsetValue = this.actionObj.action === 'drag' || this.resizeEdges.left ? leftValue : leftValue + this.actionObj.clone.offsetWidth;\n          timeIndicator.style.left = formatUnit(offsetValue);\n        }\n      } else {\n        offsetValue = this.actionObj.action === 'drag' || this.resizeEdges.top ? this.actionObj.clone.offsetTop : this.actionObj.clone.offsetTop + this.actionObj.clone.offsetHeight;\n        timeIndicator.style.top = formatUnit(offsetValue);\n      }\n    }\n  }, {\n    key: \"getResourceElements\",\n    value: function getResourceElements(table) {\n      var _this75 = this;\n\n      return table.filter(function (element) {\n        return parseInt(element.getAttribute('data-group-index'), 10) === _this75.actionObj.groupIndex;\n      });\n    }\n  }, {\n    key: \"getOriginalElement\",\n    value: function getOriginalElement(element) {\n      var originalElement;\n      var guid = element.getAttribute('data-guid');\n      var isMorePopup = element.offsetParent && element.offsetParent.classList.contains(MORE_EVENT_POPUP_CLASS);\n\n      if (isMorePopup || this.parent.activeView.isTimelineView()) {\n        originalElement = [].slice.call(this.parent.element.querySelectorAll('[data-guid=\"' + guid + '\"]'));\n      } else {\n        var tr = closest(element, 'tr');\n\n        if (tr) {\n          originalElement = [].slice.call(tr.querySelectorAll('[data-guid=\"' + guid + '\"]'));\n        }\n      }\n\n      return originalElement;\n    }\n  }, {\n    key: \"createCloneElement\",\n    value: function createCloneElement(element) {\n      var cloneWrapper = createElement('div', {\n        innerHTML: element.outerHTML\n      });\n      var cloneElement = cloneWrapper.children[0];\n      var cloneClassLists = [CLONE_ELEMENT_CLASS];\n      cloneClassLists.push(this.actionObj.action === 'drag' ? DRAG_CLONE_CLASS : RESIZE_CLONE_CLASS);\n\n      if (this.parent.currentView === 'Month' || this.parent.currentView === 'TimelineMonth') {\n        cloneClassLists.push(MONTH_CLONE_ELEMENT_CLASS);\n      }\n\n      addClass([cloneElement], cloneClassLists);\n      addClass([element], EVENT_ACTION_CLASS);\n\n      if (!isNullOrUndefined(element.parentElement)) {\n        element.parentElement.appendChild(cloneElement);\n      }\n\n      cloneElement.style.width = formatUnit(cloneElement.offsetWidth - 2);\n      var dragElement = document.querySelector(this.parent.eventDragArea);\n\n      if (this.parent.eventDragArea && this.actionObj.action === 'drag' && dragElement) {\n        dragElement.appendChild(cloneElement);\n      }\n\n      setStyleAttribute(cloneElement, {\n        border: '0px'\n      });\n      return cloneElement;\n    }\n  }, {\n    key: \"removeCloneElementClasses\",\n    value: function removeCloneElementClasses() {\n      var elements = this.actionObj.originalElement;\n\n      if (this.parent.currentView === 'Month' || this.parent.currentView === 'TimelineYear' || this.parent.currentView === 'Day' || this.parent.currentView === 'Week' || this.parent.currentView === 'WorkWeek') {\n        elements = [].slice.call(this.parent.element.querySelectorAll('.' + EVENT_ACTION_CLASS));\n      }\n\n      removeClass(elements, EVENT_ACTION_CLASS);\n    }\n  }, {\n    key: \"removeCloneElement\",\n    value: function removeCloneElement() {\n      this.actionObj.originalElement = [];\n      var dynamicEle = [].slice.call(this.parent.element.querySelectorAll('.e-dynamic-clone'));\n\n      var _iterator98 = _createForOfIteratorHelper(dynamicEle),\n          _step98;\n\n      try {\n        for (_iterator98.s(); !(_step98 = _iterator98.n()).done;) {\n          var cloneEle = _step98.value;\n          remove(cloneEle);\n        }\n      } catch (err) {\n        _iterator98.e(err);\n      } finally {\n        _iterator98.f();\n      }\n\n      var _iterator99 = _createForOfIteratorHelper(this.actionObj.cloneElement),\n          _step99;\n\n      try {\n        for (_iterator99.s(); !(_step99 = _iterator99.n()).done;) {\n          var cloneElement = _step99.value;\n\n          if (!isNullOrUndefined(cloneElement.parentNode)) {\n            remove(cloneElement);\n          }\n        }\n      } catch (err) {\n        _iterator99.e(err);\n      } finally {\n        _iterator99.f();\n      }\n\n      this.actionObj.cloneElement = [];\n      var timeIndicator = this.parent.element.querySelector('.' + CLONE_TIME_INDICATOR_CLASS);\n\n      if (timeIndicator) {\n        remove(timeIndicator);\n      }\n    }\n  }, {\n    key: \"getCursorElement\",\n    value: function getCursorElement(e) {\n      var pages = this.getPageCoordinates(e);\n      return document.elementFromPoint(pages.clientX, pages.clientY);\n    }\n  }, {\n    key: \"autoScroll\",\n    value: function autoScroll() {\n      var parent = this.parent.element.querySelector('.' + CONTENT_WRAP_CLASS);\n      var yIsScrollable = parent.offsetHeight <= parent.scrollHeight;\n      var xIsScrollable = parent.offsetWidth <= parent.scrollWidth;\n      var yInBounds = yIsScrollable && parent.scrollTop >= 0 && parent.scrollTop + parent.offsetHeight <= parent.scrollHeight;\n      var xInBounds = xIsScrollable && parent.scrollLeft >= 0 && parent.scrollLeft + parent.offsetWidth <= parent.scrollWidth;\n\n      if (this.actionObj.action === 'resize' && this.scrollEdges.right && parent.scrollLeft + parent.offsetWidth > parent.scrollWidth) {\n        var tdCollections = [].slice.call(this.parent.getContentTable().querySelector('tr').children).length - 1;\n        var cellIndex = Math.ceil((this.actionObj.clone.offsetLeft + this.actionObj.clone.offsetWidth) / this.actionObj.cellWidth);\n        xInBounds = cellIndex === tdCollections;\n      }\n\n      if (yInBounds && (this.scrollEdges.top || this.scrollEdges.bottom)) {\n        parent.scrollTop += this.scrollEdges.top ? -this.actionObj.scroll.scrollBy : this.actionObj.scroll.scrollBy;\n\n        if (this.actionObj.action === 'resize') {\n          if (parent.scrollHeight !== parent.offsetHeight + parent.scrollTop && parent.scrollTop > 0) {\n            this.actionObj.Y += this.scrollEdges.top ? this.actionObj.scroll.scrollBy : -this.actionObj.scroll.scrollBy;\n          }\n        }\n      }\n\n      if (xInBounds && (this.scrollEdges.left || this.scrollEdges.right)) {\n        parent.scrollLeft += this.scrollEdges.left ? -this.actionObj.scroll.scrollBy : this.actionObj.scroll.scrollBy;\n\n        if (this.actionObj.action === 'resize') {\n          if (parent.scrollWidth !== parent.offsetWidth + parent.scrollLeft && parent.scrollLeft > 0) {\n            this.actionObj.X += this.scrollEdges.left ? this.actionObj.scroll.scrollBy : -this.actionObj.scroll.scrollBy;\n          }\n        }\n      }\n    }\n  }, {\n    key: \"autoScrollValidation\",\n    value: function autoScrollValidation() {\n      if (!this.actionObj.scroll.enable) {\n        return false;\n      }\n\n      var res = this.parent.boundaryValidation(this.actionObj.pageY, this.actionObj.pageX);\n      this.scrollEdges = res;\n      return res.bottom || res.top || res.left || res.right;\n    }\n  }, {\n    key: \"actionClass\",\n    value: function actionClass(type) {\n      if (type === 'addClass') {\n        addClass([this.parent.element], EVENT_ACTION_CLASS);\n      } else {\n        removeClass([this.parent.element], EVENT_ACTION_CLASS);\n      }\n    }\n  }, {\n    key: \"updateScrollPosition\",\n    value: function updateScrollPosition(e) {\n      var _this76 = this;\n\n      if (this.actionObj.scroll.enable && isNullOrUndefined(this.actionObj.scrollInterval)) {\n        this.actionObj.scrollInterval = window.setInterval(function () {\n          if (_this76.autoScrollValidation() && !_this76.actionObj.clone.classList.contains(ALLDAY_APPOINTMENT_CLASS)) {\n            if (_this76.parent.activeView.isTimelineView() && _this76.parent.activeViewOptions.group.resources.length > 0 && _this76.actionObj.groupIndex < 0) {\n              return;\n            }\n\n            _this76.autoScroll();\n\n            if (_this76.actionObj.action === 'drag') {\n              _this76.parent.dragAndDropModule.updateDraggingDateTime(e);\n            } else {\n              _this76.parent.resizeModule.updateResizingDirection(e);\n            }\n          }\n        }, this.actionObj.scroll.timeDelay);\n      }\n    }\n  }, {\n    key: \"updateOriginalElement\",\n    value: function updateOriginalElement(cloneElement) {\n      var query = '[data-id=\"' + cloneElement.getAttribute('data-id') + '\"]';\n\n      if (this.parent.activeViewOptions.group.resources.length > 0) {\n        query = query.concat('[data-group-index = \"' + cloneElement.getAttribute('data-group-index') + '\"]');\n      }\n\n      var elements = [].slice.call(this.parent.element.querySelectorAll(query));\n      addClass(elements, EVENT_ACTION_CLASS);\n      var eventWrappers = [].slice.call(this.parent.element.querySelectorAll('.' + CLONE_ELEMENT_CLASS));\n      removeClass(eventWrappers, EVENT_ACTION_CLASS);\n    }\n  }, {\n    key: \"getUpdatedEvent\",\n    value: function getUpdatedEvent(startTime, endTime, eventObj) {\n      var event = JSON.parse(JSON.stringify(eventObj));\n      event[this.parent.eventFields.startTime] = startTime;\n      event[this.parent.eventFields.endTime] = endTime;\n      return event;\n    }\n  }, {\n    key: \"dynamicYearlyEventsRendering\",\n    value: function dynamicYearlyEventsRendering(event) {\n      var isResize = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : false;\n      var appWidth = this.actionObj.cellWidth - 7;\n\n      if (isResize && (this.resizeEdges.left || this.resizeEdges.right)) {\n        appWidth = this.actionObj.cellWidth * event.count;\n      }\n\n      if (!isResize && this.parent.activeViewOptions.orientation === 'Horizontal' && this.parent.activeViewOptions.group.resources.length === 0) {\n        var eventObj = this.yearEvent.isSpannedEvent(event, event[this.parent.eventFields.startTime]);\n\n        if (eventObj[this.parent.eventFields.startTime].getTime() === eventObj[this.parent.eventFields.endTime].getTime()) {\n          eventObj.isSpanned.count = 1;\n        }\n\n        appWidth = eventObj.isSpanned.count * this.actionObj.cellWidth;\n      }\n\n      var appointmentElement = this.createAppointmentElement(this.actionObj.groupIndex, event[this.parent.eventFields.subject]);\n      appointmentElement.setAttribute('drag', 'true');\n      addClass([appointmentElement], CLONE_ELEMENT_CLASS);\n      setStyleAttribute(appointmentElement, {\n        'width': appWidth + 'px',\n        'border': '0px',\n        'pointer-events': 'none',\n        'position': 'absolute',\n        'overflow': 'hidden',\n        'padding': '3px'\n      });\n\n      if (this.actionObj.clone.style.backgroundColor !== '') {\n        setStyleAttribute(appointmentElement, {\n          'backgroundColor': this.actionObj.clone.style.backgroundColor\n        });\n      }\n\n      var date = resetTime(event[this.parent.eventFields.startTime]).getTime();\n      var query = '.' + WORK_CELLS_CLASS + '[data-date=\"' + date + '\"]';\n\n      if (this.parent.activeViewOptions.group.resources.length > 0 && !this.parent.uiStateValues.isGroupAdaptive) {\n        query = '.' + WORK_CELLS_CLASS + '[data-date=\"' + date + '\"][data-group-index=\"' + this.actionObj.groupIndex + '\"]';\n      }\n\n      var cellTd = this.parent.element.querySelector(query);\n\n      if (isNullOrUndefined(cellTd)) {\n        return;\n      }\n\n      if (isResize) {\n        var dateHeader = cellTd.querySelector('.' + DATE_HEADER_CLASS);\n        var appHeight = this.actionObj.cellHeight * event.count - (dateHeader ? dateHeader.offsetHeight : 0) - 7;\n\n        if (this.resizeEdges.right || this.resizeEdges.left) {\n          appHeight = parseInt(this.actionObj.clone.style.height, 10);\n        }\n\n        setStyleAttribute(appointmentElement, {\n          'height': appHeight + 'px'\n        });\n      }\n\n      this.renderDynamicElement(cellTd, appointmentElement, true);\n      this.actionObj.cloneElement.push(appointmentElement);\n    } // eslint-disable-next-line @typescript-eslint/no-unused-vars\n\n  }, {\n    key: \"renderDynamicElement\",\n    value: function renderDynamicElement(cellTd, element) {\n      var isAppointment = arguments.length > 2 && arguments[2] !== undefined ? arguments[2] : false;\n\n      if (cellTd.querySelector('.' + APPOINTMENT_WRAPPER_CLASS)) {\n        cellTd.querySelector('.' + APPOINTMENT_WRAPPER_CLASS).appendChild(element);\n      } else {\n        var wrapper = createElement('div', {\n          className: APPOINTMENT_WRAPPER_CLASS\n        });\n        wrapper.appendChild(element);\n        cellTd.appendChild(wrapper);\n      }\n    }\n  }, {\n    key: \"createAppointmentElement\",\n    value: function createAppointmentElement(resIndex, innerText) {\n      var appointmentWrapper = createElement('div', {\n        className: APPOINTMENT_CLASS,\n        innerHTML: innerText\n      });\n\n      if (this.parent.activeViewOptions.group.resources.length > 0) {\n        appointmentWrapper.setAttribute('data-group-index', resIndex.toString());\n      }\n\n      return appointmentWrapper;\n    }\n  }, {\n    key: \"dynamicEventsRendering\",\n    value: function dynamicEventsRendering(event) {\n      var _this77 = this;\n\n      var dateRender = this.parent.activeView.renderDates;\n      var workCells = [].slice.call(this.parent.element.querySelectorAll('.' + WORK_CELLS_CLASS));\n      var workDays = this.parent.activeViewOptions.workDays;\n      var groupOrder;\n\n      if (this.parent.activeViewOptions.group.resources.length > 0) {\n        var resources = this.parent.resourceBase.lastResourceLevel.filter(function (res) {\n          return res.groupIndex === _this77.actionObj.groupIndex;\n        });\n        dateRender = resources[0].renderDates;\n        var elementSelector = \".\".concat(WORK_CELLS_CLASS, \"[data-group-index=\\\"\").concat(this.actionObj.groupIndex, \"\\\"]\");\n        workCells = [].slice.call(this.parent.element.querySelectorAll(elementSelector));\n        workDays = resources[0].workDays;\n        groupOrder = resources[0].groupOrder;\n      }\n\n      this.monthEvent.dateRender = dateRender;\n      this.monthEvent.getSlotDates(workDays);\n\n      if (this.resizeEdges.left || this.resizeEdges.right) {\n        var eventWrappers = [].slice.call(this.parent.element.querySelectorAll('.' + CLONE_ELEMENT_CLASS));\n\n        var _iterator100 = _createForOfIteratorHelper(eventWrappers),\n            _step100;\n\n        try {\n          for (_iterator100.s(); !(_step100 = _iterator100.n()).done;) {\n            var wrapper = _step100.value;\n            remove(wrapper);\n          }\n        } catch (err) {\n          _iterator100.e(err);\n        } finally {\n          _iterator100.f();\n        }\n      }\n\n      var spannedEvents = this.monthEvent.splitEvent(event, dateRender);\n\n      var _iterator101 = _createForOfIteratorHelper(spannedEvents),\n          _step101;\n\n      try {\n        for (_iterator101.s(); !(_step101 = _iterator101.n()).done;) {\n          var _event7 = _step101.value;\n          var day = this.parent.getIndexOfDate(dateRender, resetTime(_event7[this.monthEvent.fields.startTime]));\n          var diffInDays = _event7.data.count;\n          var appWidth = diffInDays * this.actionObj.cellWidth - 7;\n          var appointmentElement = this.monthEvent.createAppointmentElement(_event7, this.actionObj.groupIndex, true);\n          appointmentElement.setAttribute('drag', 'true');\n          addClass([appointmentElement], CLONE_ELEMENT_CLASS);\n          this.monthEvent.applyResourceColor(appointmentElement, _event7, 'backgroundColor', groupOrder);\n          setStyleAttribute(appointmentElement, {\n            'width': appWidth + 'px',\n            'border': '0px',\n            'pointer-events': 'none'\n          });\n          var cellTd = workCells[day];\n\n          if (cellTd && isNullOrUndefined(this.parent.eventDragArea)) {\n            this.monthEvent.renderElement(cellTd, appointmentElement, true);\n            this.actionObj.cloneElement.push(appointmentElement);\n          }\n        }\n      } catch (err) {\n        _iterator101.e(err);\n      } finally {\n        _iterator101.f();\n      }\n    }\n  }, {\n    key: \"destroy\",\n    value: function destroy() {\n      if (!this.parent || this.parent && this.parent.isDestroyed) {\n        return;\n      }\n\n      this.actionObj = {};\n      this.scrollArgs = {};\n      this.resizeEdges = {\n        left: false,\n        right: false,\n        top: false,\n        bottom: false\n      };\n      this.scrollEdges = {\n        left: false,\n        right: false,\n        top: false,\n        bottom: false\n      };\n    }\n  }]);\n\n  return ActionBase;\n}();\n/* eslint-disable @typescript-eslint/no-explicit-any */\n\n/**\n * Schedule events resize actions\n */\n\n\nvar Resize = /*#__PURE__*/function (_ActionBase) {\n  _inherits(Resize, _ActionBase);\n\n  var _super15 = _createSuper(Resize);\n\n  function Resize() {\n    _classCallCheck(this, Resize);\n\n    return _super15.apply(this, arguments);\n  }\n\n  _createClass(Resize, [{\n    key: \"wireResizeEvent\",\n    value: function wireResizeEvent(element) {\n      var resizeElement = [].slice.call(element.querySelectorAll('.' + EVENT_RESIZE_CLASS));\n\n      var _iterator102 = _createForOfIteratorHelper(resizeElement),\n          _step102;\n\n      try {\n        for (_iterator102.s(); !(_step102 = _iterator102.n()).done;) {\n          var _element2 = _step102.value;\n          EventHandler.add(_element2, Browser.touchStartEvent, this.resizeStart, this);\n        }\n      } catch (err) {\n        _iterator102.e(err);\n      } finally {\n        _iterator102.f();\n      }\n    }\n  }, {\n    key: \"resizeHelper\",\n    value: function resizeHelper() {\n      if (this.parent.activeViewOptions.group.resources.length > 0 && this.parent.activeViewOptions.group.allowGroupEdit) {\n        for (var i = 0, len = this.actionObj.originalElement.length; i < len; i++) {\n          var cloneElement = this.createCloneElement(this.actionObj.originalElement[i]);\n          this.actionObj.cloneElement[i] = cloneElement;\n\n          if (this.actionObj.element === this.actionObj.originalElement[i]) {\n            this.actionObj.clone = cloneElement;\n          }\n        }\n      } else {\n        if (this.actionObj.element) {\n          this.actionObj.clone = this.createCloneElement(this.actionObj.element);\n        }\n\n        this.actionObj.cloneElement = [this.actionObj.clone];\n        this.actionObj.originalElement = [this.actionObj.element];\n      }\n    }\n  }, {\n    key: \"resizeStart\",\n    value: function resizeStart(e) {\n      var _this78 = this;\n\n      this.actionObj.action = 'resize';\n      this.actionObj.slotInterval = this.parent.activeViewOptions.timeScale.interval / this.parent.activeViewOptions.timeScale.slotCount;\n      this.actionObj.interval = this.actionObj.slotInterval;\n      var resizeTarget = closest(e.target, '.' + EVENT_RESIZE_CLASS);\n      this.actionObj.element = closest(resizeTarget, '.' + APPOINTMENT_CLASS);\n      this.actionObj.event = this.parent.eventBase.getEventByGuid(this.actionObj.element.getAttribute('data-guid'));\n      var eventObj = extend({}, this.actionObj.event, null, true);\n      var resizeArgs = {\n        cancel: false,\n        data: eventObj,\n        element: this.actionObj.element,\n        event: e,\n        interval: this.actionObj.interval,\n        scroll: {\n          enable: true,\n          scrollBy: 30,\n          timeDelay: 100\n        }\n      };\n      this.parent.trigger(_resizeStart, resizeArgs, function (resizeEventArgs) {\n        if (resizeEventArgs.cancel) {\n          return;\n        }\n\n        _this78.actionClass('addClass');\n\n        _this78.parent.uiStateValues.action = true;\n        _this78.resizeEdges = {\n          left: resizeTarget.classList.contains(LEFT_RESIZE_HANDLER),\n          right: resizeTarget.classList.contains(RIGHT_RESIZE_HANDLER),\n          top: resizeTarget.classList.contains(TOP_RESIZE_HANDLER),\n          bottom: resizeTarget.classList.contains(BOTTOM_RESIZE_HANDLER)\n        };\n        _this78.actionObj.groupIndex = _this78.parent.uiStateValues.isGroupAdaptive ? _this78.parent.uiStateValues.groupIndex : 0;\n\n        var workCell = _this78.parent.element.querySelector('.' + WORK_CELLS_CLASS);\n\n        _this78.actionObj.cellWidth = workCell.offsetWidth;\n        _this78.actionObj.cellHeight = workCell.offsetHeight;\n\n        var hRows = _this78.parent.activeViewOptions.headerRows.map(function (row) {\n          return row.option;\n        });\n\n        if (_this78.parent.activeView.isTimelineView() && hRows.length > 0 && ['Date', 'Hour'].indexOf(hRows.slice(-1)[0]) < 0) {\n          var tr = _this78.parent.getContentTable().querySelector('tr');\n\n          var noOfDays = 0;\n          var tdCollections = [].slice.call(tr.children);\n\n          var _iterator103 = _createForOfIteratorHelper(tdCollections),\n              _step103;\n\n          try {\n            for (_iterator103.s(); !(_step103 = _iterator103.n()).done;) {\n              var td = _step103.value;\n              noOfDays += parseInt(td.getAttribute('colspan'), 10);\n            }\n          } catch (err) {\n            _iterator103.e(err);\n          } finally {\n            _iterator103.f();\n          }\n\n          _this78.actionObj.cellWidth = tr.offsetWidth / noOfDays;\n          _this78.actionObj.cellHeight = tr.offsetHeight;\n        }\n\n        var pages = _this78.getPageCoordinates(e);\n\n        _this78.actionObj.X = pages.pageX;\n        _this78.actionObj.Y = pages.pageY;\n        _this78.actionObj.groupIndex = parseInt(_this78.actionObj.element.getAttribute('data-group-index') || '0', 10);\n        _this78.actionObj.interval = resizeEventArgs.interval;\n        _this78.actionObj.scroll = resizeEventArgs.scroll;\n        _this78.actionObj.start = new Date(eventObj[_this78.parent.eventFields.startTime].getTime());\n        _this78.actionObj.end = new Date(eventObj[_this78.parent.eventFields.endTime].getTime());\n        _this78.actionObj.originalElement = _this78.getOriginalElement(_this78.actionObj.element);\n\n        if (_this78.parent.currentView === 'Month') {\n          _this78.daysVariation = -1;\n          _this78.monthEvent = new MonthEvent(_this78.parent);\n        }\n\n        var viewElement = _this78.parent.element.querySelector('.' + CONTENT_WRAP_CLASS);\n\n        _this78.scrollArgs = {\n          element: viewElement,\n          width: viewElement.scrollWidth,\n          height: viewElement.scrollHeight\n        };\n        EventHandler.add(document, Browser.touchMoveEvent, _this78.resizing, _this78);\n        EventHandler.add(document, Browser.touchEndEvent, _this78.resizeStop, _this78);\n      });\n    }\n  }, {\n    key: \"resizing\",\n    value: function resizing(e) {\n      if (this.parent.quickPopup) {\n        this.parent.quickPopup.quickPopupHide();\n      }\n\n      if (this.parent.element.querySelectorAll('.' + RESIZE_CLONE_CLASS).length === 0) {\n        this.resizeHelper();\n      }\n\n      if (!isNullOrUndefined(e.target) && e.target.classList.contains(DISABLE_DATES)) {\n        return;\n      }\n\n      var pages = this.getPageCoordinates(e);\n      this.actionObj.pageX = pages.pageX;\n      this.actionObj.pageY = pages.pageY;\n      this.updateScrollPosition(e);\n      this.updateResizingDirection(e);\n      var eventObj = extend({}, this.actionObj.event, null, true);\n      var resizeArgs = {\n        cancel: false,\n        data: eventObj,\n        element: this.actionObj.element,\n        event: e,\n        startTime: this.actionObj.start,\n        endTime: this.actionObj.end\n      };\n\n      if (this.parent.group.resources.length > 0) {\n        resizeArgs.groupIndex = this.actionObj.groupIndex;\n      }\n\n      this.parent.trigger(_resizing, resizeArgs);\n    }\n  }, {\n    key: \"updateResizingDirection\",\n    value: function updateResizingDirection(e) {\n      if (this.parent.currentView === 'Month' || this.parent.currentView === 'TimelineYear') {\n        this.monthResizing();\n        return;\n      }\n\n      var resizeValidation = this.resizeValidation(e);\n\n      if (this.resizeEdges.left) {\n        if (resizeValidation) {\n          var leftStyles = this.getLeftRightStyles(e, true);\n\n          if (parseInt(leftStyles.width, 10) < 1) {\n            return;\n          }\n\n          var _iterator104 = _createForOfIteratorHelper(this.actionObj.cloneElement),\n              _step104;\n\n          try {\n            for (_iterator104.s(); !(_step104 = _iterator104.n()).done;) {\n              var cloneElement = _step104.value;\n              setStyleAttribute(cloneElement, leftStyles);\n              addClass([cloneElement], LEFT_RESIZE_HANDLER);\n            }\n          } catch (err) {\n            _iterator104.e(err);\n          } finally {\n            _iterator104.f();\n          }\n        }\n\n        this.horizontalResizing(!this.parent.enableRtl);\n      }\n\n      if (this.resizeEdges.right) {\n        if (resizeValidation) {\n          var rightStyles = this.getLeftRightStyles(e, false);\n\n          if (parseInt(rightStyles.width, 10) < 1) {\n            return;\n          }\n\n          var _iterator105 = _createForOfIteratorHelper(this.actionObj.cloneElement),\n              _step105;\n\n          try {\n            for (_iterator105.s(); !(_step105 = _iterator105.n()).done;) {\n              var _cloneElement = _step105.value;\n              setStyleAttribute(_cloneElement, rightStyles);\n              addClass([_cloneElement], RIGHT_RESIZE_HANDLER);\n            }\n          } catch (err) {\n            _iterator105.e(err);\n          } finally {\n            _iterator105.f();\n          }\n        }\n\n        this.horizontalResizing(this.parent.enableRtl);\n      }\n\n      if (this.resizeEdges.top) {\n        if (resizeValidation) {\n          var topStyles = this.getTopBottomStyles(e, true);\n\n          if (parseInt(topStyles.height, 10) < 1) {\n            return;\n          }\n\n          var _iterator106 = _createForOfIteratorHelper(this.actionObj.cloneElement),\n              _step106;\n\n          try {\n            for (_iterator106.s(); !(_step106 = _iterator106.n()).done;) {\n              var _cloneElement2 = _step106.value;\n              setStyleAttribute(_cloneElement2, topStyles);\n              addClass([_cloneElement2], TOP_RESIZE_HANDLER);\n            }\n          } catch (err) {\n            _iterator106.e(err);\n          } finally {\n            _iterator106.f();\n          }\n        }\n\n        this.verticalResizing(true);\n      }\n\n      if (this.resizeEdges.bottom) {\n        if (resizeValidation) {\n          var bottomStyles = this.getTopBottomStyles(e, false);\n\n          if (parseInt(bottomStyles.height, 10) < 1) {\n            return;\n          }\n\n          var _iterator107 = _createForOfIteratorHelper(this.actionObj.cloneElement),\n              _step107;\n\n          try {\n            for (_iterator107.s(); !(_step107 = _iterator107.n()).done;) {\n              var _cloneElement3 = _step107.value;\n              setStyleAttribute(_cloneElement3, bottomStyles);\n              addClass([_cloneElement3], BOTTOM_RESIZE_HANDLER);\n            }\n          } catch (err) {\n            _iterator107.e(err);\n          } finally {\n            _iterator107.f();\n          }\n        }\n\n        this.verticalResizing(false);\n      }\n    }\n  }, {\n    key: \"monthResizing\",\n    value: function monthResizing() {\n      this.removeCloneElement();\n\n      if (isNullOrUndefined(this.actionObj.pageX) || isNullOrUndefined(this.actionObj.pageY)) {\n        return;\n      }\n\n      var td = document.elementFromPoint(this.actionObj.pageX, this.actionObj.pageY);\n\n      if (isNullOrUndefined(td)) {\n        return;\n      }\n\n      var resizeTime = this.parent.getDateFromElement(td);\n      var isSameCell = this.parent.activeViewOptions.group.resources.length > 0 ? parseInt(td.getAttribute('data-group-index'), 10) === this.actionObj.groupIndex : true;\n      var startTime = new Date(this.actionObj.event[this.parent.eventFields.startTime].getTime());\n      var endTime = new Date(this.actionObj.event[this.parent.eventFields.endTime].getTime());\n\n      if (!this.parent.enableRtl && this.resizeEdges.left || this.parent.enableRtl && this.resizeEdges.right || this.resizeEdges.top) {\n        startTime = resizeTime;\n      } else if (!this.parent.enableRtl && this.resizeEdges.right || this.parent.enableRtl && this.resizeEdges.left || this.resizeEdges.bottom) {\n        endTime = addDays(resizeTime, 1);\n      }\n\n      if (isSameCell && startTime < endTime) {\n        this.actionObj.start = startTime;\n        this.actionObj.end = endTime;\n        var event = this.getUpdatedEvent(this.actionObj.start, this.actionObj.end, this.actionObj.event);\n\n        if (this.parent.currentView === 'TimelineYear') {\n          this.yearEventsRendering(event);\n        } else {\n          this.dynamicEventsRendering(event);\n        }\n\n        this.updateOriginalElement(this.actionObj.clone);\n      }\n    }\n  }, {\n    key: \"yearEventsRendering\",\n    value: function yearEventsRendering(event) {\n      var eventWrappers = [].slice.call(this.parent.element.querySelectorAll('.' + CLONE_ELEMENT_CLASS));\n\n      var _iterator108 = _createForOfIteratorHelper(eventWrappers),\n          _step108;\n\n      try {\n        for (_iterator108.s(); !(_step108 = _iterator108.n()).done;) {\n          var wrapper = _step108.value;\n          remove(wrapper);\n        }\n      } catch (err) {\n        _iterator108.e(err);\n      } finally {\n        _iterator108.f();\n      }\n\n      var endDate = new Date(event[this.parent.eventFields.endTime]);\n      var monthDiff = 0;\n\n      if (this.parent.activeViewOptions.group.resources.length === 0) {\n        monthDiff = this.getMonthDiff(event[this.parent.eventFields.startTime], addDays(endDate, -1));\n      }\n\n      for (var i = 0; i <= monthDiff; i++) {\n        var eventObj = void 0;\n\n        if (this.parent.activeViewOptions.group.resources.length === 0) {\n          eventObj = this.getEventCount(event, this.actionObj.start.getMonth() + i);\n        } else {\n          eventObj = extend({}, event, null, true);\n          endDate = this.resizeEdges.left || this.resizeEdges.right ? addDays(endDate, -1) : endDate;\n          eventObj.count = this.getMonthDiff(event[this.parent.eventFields.startTime], endDate) + 1;\n        }\n\n        this.dynamicYearlyEventsRendering(eventObj, true);\n      }\n    }\n  }, {\n    key: \"getMonthDiff\",\n    value: function getMonthDiff(startDate, endDate) {\n      var months;\n      months = (endDate.getFullYear() - startDate.getFullYear()) * 12;\n      months -= startDate.getMonth();\n      months += endDate.getMonth();\n      return months <= 0 ? 0 : months;\n    }\n  }, {\n    key: \"getEventCount\",\n    value: function getEventCount(eventObj, month) {\n      var eventData = extend({}, eventObj, null, true);\n      var eventStart = eventData[this.parent.eventFields.startTime];\n      var eventEnd = eventData[this.parent.eventFields.endTime];\n      var monthStart = new Date(this.parent.selectedDate.getFullYear(), month, 1);\n      var monthEnd = addDays(new Date(this.parent.selectedDate.getFullYear(), month + 1, 0), 1);\n      var count = 1;\n\n      if (eventStart.getTime() < monthStart.getTime()) {\n        eventData[this.parent.eventFields.startTime] = monthStart;\n      }\n\n      if (eventEnd.getTime() > monthEnd.getTime()) {\n        eventData[this.parent.eventFields.endTime] = monthEnd;\n      }\n\n      if (this.parent.activeViewOptions.group.resources.length === 0) {\n        count = Math.ceil((eventData[this.parent.eventFields.endTime].getTime() - eventData[this.parent.eventFields.startTime].getTime()) / MS_PER_DAY);\n      }\n\n      eventData.count = count;\n      return eventData;\n    }\n  }, {\n    key: \"resizeStop\",\n    value: function resizeStop(e) {\n      var _this79 = this;\n\n      EventHandler.remove(document, Browser.touchMoveEvent, this.resizing);\n      EventHandler.remove(document, Browser.touchEndEvent, this.resizeStop);\n      clearInterval(this.actionObj.scrollInterval);\n      this.actionObj.scrollInterval = null;\n      this.removeCloneElementClasses();\n      this.removeCloneElement();\n      this.actionClass('removeClass');\n      this.parent.uiStateValues.action = false;\n      var resizeArgs = {\n        cancel: false,\n        data: this.getChangedData(),\n        element: this.actionObj.element,\n        event: e\n      };\n      this.parent.trigger(_resizeStop, resizeArgs, function (resizeEventArgs) {\n        if (resizeEventArgs.cancel) {\n          return;\n        }\n\n        if (_this79.parent.activeViewOptions.group.resources.length > 0 && !_this79.parent.rowAutoHeight && !_this79.parent.activeViewOptions.group.allowGroupEdit && !_this79.parent.virtualScrollModule && _this79.parent.activeViewOptions.group.byGroupID) {\n          _this79.parent.crudModule.crudObj.sourceEvent = [_this79.parent.resourceBase.lastResourceLevel[parseInt(resizeEventArgs.element.getAttribute('data-group-index'), 10)]];\n          _this79.parent.crudModule.crudObj.targetEvent = _this79.parent.crudModule.crudObj.sourceEvent;\n          _this79.parent.crudModule.crudObj.isCrudAction = true;\n        }\n\n        _this79.saveChangedData(resizeEventArgs);\n      });\n    }\n  }, {\n    key: \"verticalResizing\",\n    value: function verticalResizing(isTop) {\n      var offsetValue = this.actionObj.clone.offsetTop;\n\n      if (!isTop) {\n        offsetValue += this.actionObj.clone.offsetHeight;\n      }\n\n      var minutes = offsetValue / this.actionObj.cellHeight * this.actionObj.slotInterval;\n      var element = this.actionObj.clone.offsetParent;\n\n      if (isNullOrUndefined(element)) {\n        return;\n      }\n\n      var resizeTime = resetTime(this.parent.getDateFromElement(element));\n      resizeTime.setHours(this.parent.activeView.getStartHour().getHours());\n      resizeTime.setMinutes(minutes + this.parent.activeView.getStartHour().getMinutes());\n\n      if (isTop) {\n        this.actionObj.start = this.calculateIntervalTime(resizeTime);\n      } else {\n        this.actionObj.end = this.calculateIntervalTime(resizeTime);\n      }\n\n      this.updateTimePosition(resizeTime);\n    }\n  }, {\n    key: \"horizontalResizing\",\n    value: function horizontalResizing(isLeft) {\n      var eventStart = new Date(this.actionObj.event[this.parent.eventFields.startTime].getTime());\n      var eventEnd = new Date(this.actionObj.event[this.parent.eventFields.endTime].getTime());\n      var resizeTime;\n      var isDateHeader = false;\n      var isTimeViews = ['TimelineDay', 'TimelineWeek', 'TimelineWorkWeek'].indexOf(this.parent.currentView) > -1;\n      var isTimelineMonth = this.parent.currentView === 'TimelineMonth';\n      var isWithoutScale = isTimelineMonth || isTimeViews && !this.parent.activeViewOptions.timeScale.enable;\n\n      if (this.parent.activeView.isTimelineView()) {\n        var tr = this.parent.getContentTable().querySelector('tr');\n        var headerName = this.parent.currentView;\n\n        if (this.parent.activeViewOptions.headerRows.length > 0) {\n          var rows = this.parent.activeViewOptions.headerRows.map(function (row) {\n            return row.option;\n          });\n          headerName = rows.slice(-1)[0];\n\n          if (isTimelineMonth && headerName === 'Hour') {\n            headerName = rows.slice(-2)[0] || 'Month';\n          }\n        }\n\n        resizeTime = isLeft ? eventStart : eventEnd;\n        var cellIndex = 0;\n        var tdCollections = [].slice.call(tr.children);\n        var isLastCell = false;\n\n        if (['Year', 'Month', 'Week', 'Date'].indexOf(headerName) !== -1) {\n          var noOfDays = 0;\n\n          var _iterator109 = _createForOfIteratorHelper(tdCollections),\n              _step109;\n\n          try {\n            for (_iterator109.s(); !(_step109 = _iterator109.n()).done;) {\n              var td = _step109.value;\n              noOfDays += parseInt(td.getAttribute('colspan'), 10);\n            }\n          } catch (err) {\n            _iterator109.e(err);\n          } finally {\n            _iterator109.f();\n          }\n\n          var offsetValue = this.parent.enableRtl ? parseInt(this.actionObj.clone.style.right, 10) : parseInt(this.actionObj.clone.style.left, 10);\n\n          if (!isLeft) {\n            offsetValue += this.actionObj.clone.offsetWidth - this.actionObj.cellWidth;\n          }\n\n          cellIndex = Math.floor(offsetValue / Math.floor(tr.offsetWidth / noOfDays));\n          isDateHeader = isTimeViews && headerName === 'Date';\n          cellIndex = isLeft ? cellIndex : isTimelineMonth || isDateHeader ? cellIndex + 1 : cellIndex;\n          isLastCell = cellIndex === tdCollections.length;\n          cellIndex = cellIndex < 0 ? 0 : cellIndex >= noOfDays ? noOfDays - 1 : cellIndex;\n        } else {\n          var cellWidth = this.actionObj.cellWidth;\n          cellIndex = isLeft ? Math.floor(this.actionObj.clone.offsetLeft / this.actionObj.cellWidth) : Math.ceil((this.actionObj.clone.offsetLeft + (this.actionObj.clone.offsetWidth - cellWidth)) / this.actionObj.cellWidth);\n\n          if (this.parent.enableRtl) {\n            var cellOffsetWidth = 0;\n\n            if (headerName === 'TimelineMonth' || !this.parent.activeViewOptions.timeScale.enable && !isTimelineMonth) {\n              cellOffsetWidth = this.actionObj.cellWidth;\n            }\n\n            var offsetWidth = Math.floor(parseInt(this.actionObj.clone.style.right, 10) / this.actionObj.cellWidth) * this.actionObj.cellWidth + (isLeft ? 0 : this.actionObj.clone.offsetWidth - cellOffsetWidth);\n            cellIndex = Math.floor(offsetWidth / this.actionObj.cellWidth);\n          }\n\n          isLastCell = cellIndex === tdCollections.length;\n          cellIndex = this.getIndex(cellIndex);\n        }\n\n        var resizeDate;\n\n        if (['Year', 'Month', 'Week', 'Date'].indexOf(headerName) !== -1) {\n          resizeDate = new Date(this.parent.activeView.renderDates[cellIndex].getTime());\n        } else {\n          resizeDate = this.parent.getDateFromElement(tr.children[cellIndex]);\n        }\n\n        if (['TimelineMonth', 'Year', 'Month', 'Week', 'Date'].indexOf(headerName) !== -1 || !this.parent.activeViewOptions.timeScale.enable) {\n          resizeTime = new Date(resizeDate.setHours(resizeTime.getHours(), resizeTime.getMinutes(), resizeTime.getSeconds()));\n        } else {\n          var _offsetValue = this.parent.enableRtl ? parseFloat(this.actionObj.clone.style.right) : parseFloat(this.actionObj.clone.style.left);\n\n          if (!isLeft) {\n            _offsetValue += this.actionObj.clone.offsetWidth;\n          }\n\n          var spanMinutes = Math.ceil(this.actionObj.slotInterval / this.actionObj.cellWidth * (_offsetValue - Math.floor(_offsetValue / this.actionObj.cellWidth) * this.actionObj.cellWidth));\n          spanMinutes = isLastCell || !isLeft && spanMinutes === 0 ? this.actionObj.slotInterval : spanMinutes;\n          resizeTime = new Date(resizeDate.getTime());\n          resizeTime.setMinutes(resizeTime.getMinutes() + spanMinutes);\n          this.updateTimePosition(resizeTime);\n        }\n      } else {\n        var cloneIndex = closest(this.actionObj.clone, 'td').cellIndex;\n        var originalWidth = Math.ceil((isLeft ? this.actionObj.element.offsetWidth : 0) / this.actionObj.cellWidth) * this.actionObj.cellWidth;\n\n        var _noOfDays = Math.ceil((this.actionObj.clone.offsetWidth - originalWidth) / this.actionObj.cellWidth);\n\n        var _tr = closest(this.actionObj.clone, 'tr');\n\n        var _dayIndex2 = isLeft ? cloneIndex - _noOfDays : cloneIndex + _noOfDays - 1;\n\n        _dayIndex2 = this.getIndex(_dayIndex2);\n        resizeTime = this.parent.getDateFromElement(_tr.children[_dayIndex2]);\n\n        if (isLeft) {\n          resizeTime.setHours(eventStart.getHours(), eventStart.getMinutes(), eventStart.getSeconds());\n        } else {\n          resizeTime.setHours(eventEnd.getHours(), eventEnd.getMinutes(), eventEnd.getSeconds());\n        }\n      }\n\n      if (isLeft) {\n        if (eventEnd.getTime() - resizeTime.getTime() <= 0) {\n          resizeTime = isWithoutScale ? resetTime(eventEnd) : eventStart;\n        }\n\n        this.actionObj.start = this.parent.activeViewOptions.timeScale.enable ? this.calculateIntervalTime(resizeTime) : resizeTime;\n      } else {\n        var isTimeScaleViews = isTimeViews && this.parent.activeViewOptions.timeScale.enable;\n        var resizeEnd = (!isTimeScaleViews || isDateHeader) && resizeTime.getHours() === 0 && resizeTime.getMinutes() === 0 ? addDays(resizeTime, 1) : resizeTime;\n\n        if (isWithoutScale && resizeEnd.getTime() - eventStart.getTime() <= 0) {\n          resizeEnd = addDays(resetTime(eventStart), 1);\n        }\n\n        this.actionObj.end = this.parent.activeViewOptions.timeScale.enable && this.parent.currentView !== 'Month' ? this.calculateIntervalTime(resizeEnd) : resizeEnd;\n      }\n    }\n  }, {\n    key: \"getTopBottomStyles\",\n    value: function getTopBottomStyles(e, isTop) {\n      var viewElement = this.parent.element.querySelector('.' + CONTENT_WRAP_CLASS);\n      var slotInterval = this.actionObj.cellHeight / this.actionObj.slotInterval * this.actionObj.interval;\n      var clnHeight = isTop ? this.actionObj.element.offsetHeight + (this.actionObj.Y - this.actionObj.pageY) : this.actionObj.element.offsetHeight + (this.actionObj.pageY - this.actionObj.Y);\n      var clnTop = isTop ? this.actionObj.element.offsetTop - (this.actionObj.Y - this.actionObj.pageY) : this.actionObj.clone.offsetTop;\n      clnHeight = clnTop < 0 ? this.actionObj.clone.offsetHeight : this.actionObj.clone.offsetTop + this.actionObj.clone.offsetHeight > this.scrollArgs.height ? this.actionObj.clone.offsetHeight : clnHeight;\n      clnTop = clnTop < 0 ? 0 : clnTop;\n      clnTop = isTop ? Math.floor(clnTop / slotInterval) * slotInterval : clnTop;\n      clnHeight = clnTop + clnHeight >= viewElement.scrollHeight ? viewElement.scrollHeight - clnTop : Math.ceil(clnHeight / slotInterval) * slotInterval;\n      var styles = {\n        height: formatUnit(clnHeight < this.actionObj.cellHeight ? Math.floor(clnHeight / slotInterval) * slotInterval : clnHeight),\n        top: formatUnit(clnHeight < this.actionObj.cellHeight && isTop ? Math.ceil(clnTop / slotInterval) * slotInterval : clnTop),\n        left: '0px',\n        right: '0px',\n        width: '100%'\n      };\n      return styles;\n    }\n  }, {\n    key: \"getLeftRightStyles\",\n    value: function getLeftRightStyles(e, isLeft) {\n      var styles = {};\n      var isTimelineView = this.parent.activeView.isTimelineView();\n      var isTimeViews = ['TimelineDay', 'TimelineWeek', 'TimelineWorkWeek'].indexOf(this.parent.currentView) > -1 && this.parent.activeViewOptions.timeScale.enable;\n      var slotInterval = this.actionObj.cellWidth / this.actionObj.slotInterval * this.actionObj.interval;\n      var pageWidth = isLeft ? this.actionObj.X - this.actionObj.pageX : this.actionObj.pageX - this.actionObj.X;\n      var targetWidth = isTimelineView ? this.actionObj.element.offsetWidth / this.actionObj.cellWidth * this.actionObj.cellWidth : this.parent.currentView === 'Month' ? this.actionObj.element.offsetWidth : Math.ceil(this.actionObj.element.offsetWidth / this.actionObj.cellWidth) * this.actionObj.cellWidth;\n      var offsetWidth = targetWidth + Math.ceil(pageWidth / this.actionObj.cellWidth) * this.actionObj.cellWidth;\n\n      if (isTimeViews) {\n        offsetWidth = targetWidth + (isLeft ? Math.ceil(pageWidth / slotInterval) * slotInterval : Math.floor(pageWidth / slotInterval) * slotInterval);\n        this.actionObj.event[this.parent.eventFields.isAllDay] = false;\n      }\n\n      var width = !isLeft && offsetWidth + this.actionObj.clone.offsetLeft > this.scrollArgs.width ? this.actionObj.clone.offsetWidth : offsetWidth < this.actionObj.cellWidth ? offsetWidth : offsetWidth;\n\n      if (this.parent.enableRtl) {\n        var rightValue = isTimelineView ? parseInt(this.actionObj.element.style.right, 10) : -(offsetWidth - this.actionObj.cellWidth);\n        rightValue = isTimelineView ? rightValue : isLeft ? 0 : rightValue > 0 ? 0 : rightValue;\n\n        if (isTimelineView && !isLeft) {\n          rightValue = Math.ceil((this.actionObj.element.offsetLeft + (this.actionObj.element.offsetWidth + (this.actionObj.pageX - this.actionObj.X))) / slotInterval) * slotInterval;\n          rightValue = rightValue < 0 ? Math.abs(rightValue) : -rightValue;\n        }\n\n        rightValue = rightValue >= this.scrollArgs.width ? this.scrollArgs.width - this.actionObj.cellWidth : rightValue;\n        styles.right = formatUnit(rightValue);\n        width = width + rightValue > this.scrollArgs.width ? this.actionObj.clone.offsetWidth : width;\n      } else {\n        var offsetLeft = isLeft ? this.actionObj.element.offsetLeft - (this.actionObj.X - this.actionObj.pageX) : this.parent.enableRtl ? this.actionObj.element.offsetLeft : 0;\n\n        if (isTimelineView) {\n          offsetLeft = isLeft ? offsetLeft : parseInt(this.actionObj.clone.style.left, 10);\n\n          if (this.parent.enableRtl) {\n            offsetLeft = !isLeft ? this.actionObj.pageX < this.actionObj.X - this.actionObj.clone.offsetWidth ? parseInt(this.actionObj.clone.style.right, 10) : offsetLeft : offsetLeft;\n          } else {\n            offsetLeft = isLeft ? this.actionObj.pageX > this.actionObj.X + this.actionObj.clone.offsetWidth && this.actionObj.clone.offsetWidth === this.actionObj.cellWidth ? parseInt(this.actionObj.clone.style.left, 10) : offsetLeft : offsetLeft;\n          }\n        }\n\n        var leftValue = offsetLeft;\n        offsetLeft = isTimelineView ? isTimeViews ? isLeft ? Math.floor(offsetLeft / slotInterval) * slotInterval : offsetLeft : Math.floor(offsetLeft / this.actionObj.cellWidth) * this.actionObj.cellWidth : Math.ceil(Math.abs(offsetLeft) / this.actionObj.cellWidth) * this.actionObj.cellWidth;\n\n        if (offsetLeft < 0) {\n          offsetLeft = 0;\n          width = this.actionObj.clone.offsetWidth;\n        }\n\n        var cloneWidth = Math.ceil(this.actionObj.clone.offsetWidth / this.actionObj.cellWidth) * this.actionObj.cellWidth;\n\n        if (isLeft) {\n          styles.left = formatUnit(isTimelineView ? offsetLeft : isLeft ? leftValue < 0 ? -offsetLeft : Math.ceil((targetWidth - cloneWidth) / this.actionObj.cellWidth) * this.actionObj.cellWidth : offsetLeft);\n        }\n      }\n\n      styles.width = formatUnit(width);\n      return styles;\n    }\n  }, {\n    key: \"resizeValidation\",\n    value: function resizeValidation(e) {\n      var pages = this.getPageCoordinates(e);\n      var viewDimension = this.getContentAreaDimension();\n      var isTimeScale = this.parent.activeView.isTimelineView() && this.parent.activeViewOptions.timeScale.enable;\n      var cellWidth = this.actionObj.cellWidth;\n      var resizeValidation = false;\n\n      if (this.resizeEdges.left) {\n        if (pages.pageX < viewDimension.leftOffset && pages.pageX >= viewDimension.left && isTimeScale) {\n          cellWidth = 0;\n        }\n\n        resizeValidation = pages.pageX - cellWidth >= viewDimension.left;\n      }\n\n      if (this.resizeEdges.right) {\n        if (pages.pageX > viewDimension.rightOffset && pages.pageX <= viewDimension.right && isTimeScale) {\n          cellWidth = 0;\n        }\n\n        resizeValidation = pages.pageX + cellWidth <= viewDimension.right;\n      }\n\n      if (this.resizeEdges.top) {\n        resizeValidation = this.actionObj.clone.offsetTop >= viewDimension.top;\n      }\n\n      if (this.resizeEdges.bottom) {\n        resizeValidation = this.actionObj.clone.offsetTop + this.actionObj.clone.offsetHeight <= this.scrollArgs.height;\n      }\n\n      return resizeValidation;\n    }\n    /**\n     * Get module name\n     *\n     * @returns {string} Returns the module name..\n     */\n\n  }, {\n    key: \"getModuleName\",\n    value: function getModuleName() {\n      return 'resize';\n    }\n  }]);\n\n  return Resize;\n}(ActionBase);\n/* eslint-disable @typescript-eslint/no-explicit-any */\n\n\nvar EVENT_GAP$2 = 2;\n/**\n * Year view events render\n */\n\nvar YearEvent = /*#__PURE__*/function (_TimelineEvent) {\n  _inherits(YearEvent, _TimelineEvent);\n\n  var _super16 = _createSuper(YearEvent);\n\n  function YearEvent(parent) {\n    var _this80;\n\n    _classCallCheck(this, YearEvent);\n\n    _this80 = _super16.call(this, parent, 'day');\n    _this80.isResource = false;\n    return _this80;\n  }\n\n  _createClass(YearEvent, [{\n    key: \"renderAppointments\",\n    value: function renderAppointments() {\n      if (this.parent.dragAndDropModule) {\n        this.parent.dragAndDropModule.setDragArea();\n      }\n\n      this.fields = this.parent.eventFields;\n      var elementSelector = this.parent.currentView === 'Year' ? '.' + APPOINTMENT_CLASS : '.' + APPOINTMENT_WRAPPER_CLASS + ',.' + MORE_INDICATOR_CLASS;\n      var eventWrappers = [].slice.call(this.parent.element.querySelectorAll(elementSelector));\n\n      var _iterator110 = _createForOfIteratorHelper(eventWrappers),\n          _step110;\n\n      try {\n        for (_iterator110.s(); !(_step110 = _iterator110.n()).done;) {\n          var wrapper = _step110.value;\n          remove(wrapper);\n        }\n      } catch (err) {\n        _iterator110.e(err);\n      } finally {\n        _iterator110.f();\n      }\n\n      this.renderedEvents = [];\n\n      if (this.parent.currentView === 'Year') {\n        this.yearViewEvents();\n      } else {\n        this.removeCellHeight();\n\n        if (this.parent.activeViewOptions.group.resources.length > 0 && !this.parent.uiStateValues.isGroupAdaptive) {\n          this.isResource = true;\n          this.timelineResourceEvents();\n        } else {\n          this.timelineYearViewEvents();\n        }\n      }\n\n      this.parent.renderTemplates();\n      this.parent.notify(contentReady, {});\n    }\n  }, {\n    key: \"yearViewEvents\",\n    value: function yearViewEvents() {\n      var months = this.getMonths();\n\n      var _iterator111 = _createForOfIteratorHelper(months),\n          _step111;\n\n      try {\n        for (_iterator111.s(); !(_step111 = _iterator111.n()).done;) {\n          var month = _step111.value;\n          var queryString = \".e-month-calendar:nth-child(\".concat(months.indexOf(month) + 1, \") td.e-work-cells\");\n          var workCells = [].slice.call(this.parent.element.querySelectorAll(queryString));\n          var monthDate = new Date(this.parent.selectedDate.getFullYear(), month, 1);\n          var monthStart = this.parent.calendarUtil.getMonthStartDate(new Date(monthDate.getTime()));\n          var monthEnd = this.parent.calendarUtil.getMonthEndDate(new Date(monthDate.getTime()));\n          var startDate = getWeekFirstDate(monthStart, this.parent.firstDayOfWeek);\n          var endDate = addDays(getWeekLastDate(monthEnd, this.parent.firstDayOfWeek), 1);\n\n          for (var index = 0; startDate.getTime() < endDate.getTime(); index++) {\n            var start = resetTime(new Date(startDate.getTime()));\n            var end = addDays(new Date(start.getTime()), 1);\n            var filterEvents = this.parent.eventBase.filterEvents(start, end);\n\n            if (filterEvents.length > 0) {\n              var workCell = workCells[index];\n\n              if (workCell) {\n                workCell.appendChild(createElement('div', {\n                  className: APPOINTMENT_CLASS\n                }));\n              }\n            }\n\n            startDate = addDays(new Date(startDate.getTime()), 1);\n          }\n        }\n      } catch (err) {\n        _iterator111.e(err);\n      } finally {\n        _iterator111.f();\n      }\n    }\n  }, {\n    key: \"timelineYearViewEvents\",\n    value: function timelineYearViewEvents() {\n      var _this81 = this;\n\n      var workCell = this.parent.element.querySelector('.' + WORK_CELLS_CLASS);\n      this.cellWidth = workCell.offsetWidth;\n      this.cellHeader = getOuterHeight(workCell.querySelector('.' + DATE_HEADER_CLASS));\n      var eventTable = this.parent.element.querySelector('.' + EVENT_TABLE_CLASS);\n      this.eventHeight = getElementHeightFromClass(eventTable, APPOINTMENT_CLASS);\n      var wrapperCollection = [].slice.call(this.parent.element.querySelectorAll('.' + APPOINTMENT_CONTAINER_CLASS));\n      var months = this.getMonths();\n\n      for (var row = 0; row < months.length; row++) {\n        var wrapper = wrapperCollection[row];\n        var td = row + 1;\n        var eventWrapper = createElement('div', {\n          className: APPOINTMENT_WRAPPER_CLASS\n        });\n        wrapper.appendChild(eventWrapper);\n        var monthStart = new Date(this.parent.selectedDate.getFullYear(), months[row], 1);\n        var monthEnd = new Date(monthStart.getFullYear(), monthStart.getMonth() + 1, 0);\n\n        var _dayIndex3 = monthStart.getDay();\n\n        var isSpannedCollection = [];\n\n        if (this.parent.activeViewOptions.orientation === 'Horizontal') {\n          this.renderedEvents = [];\n        }\n\n        while (monthStart.getTime() <= monthEnd.getTime()) {\n          var leftValue = void 0;\n          var rightValue = void 0;\n\n          if (this.parent.activeViewOptions.orientation === 'Vertical') {\n            var _wrapper = wrapperCollection[_dayIndex3];\n            td = _dayIndex3 + 1;\n\n            var _eventWrapper = _wrapper.querySelector('.' + APPOINTMENT_WRAPPER_CLASS);\n\n            if (!_eventWrapper) {\n              _eventWrapper = createElement('div', {\n                className: APPOINTMENT_WRAPPER_CLASS\n              });\n\n              _wrapper.appendChild(_eventWrapper);\n            }\n\n            if (this.parent.enableRtl) {\n              rightValue = row * this.cellWidth;\n            } else {\n              leftValue = row * this.cellWidth;\n            }\n          } else {\n            if (this.parent.enableRtl) {\n              rightValue = (_dayIndex3 + monthStart.getDate() - 1) * this.cellWidth;\n            } else {\n              leftValue = (_dayIndex3 + monthStart.getDate() - 1) * this.cellWidth;\n            }\n          }\n\n          var rowTd = this.parent.element.querySelector(\".e-content-wrap tr:nth-child(\".concat(td, \") td\"));\n          this.cellHeight = rowTd.offsetHeight;\n          var dayStart = resetTime(new Date(monthStart.getTime()));\n          var dayEnd = addDays(new Date(dayStart.getTime()), 1);\n          var resource = void 0;\n\n          if (this.parent.uiStateValues.isGroupAdaptive) {\n            resource = this.parent.resourceBase.lastResourceLevel[this.parent.uiStateValues.groupIndex];\n          }\n\n          var dayEvents = this.parent.eventBase.filterEvents(dayStart, dayEnd, undefined, resource);\n          dayEvents = this.parent.eventBase.sortByDateTime(dayEvents);\n\n          var _loop16 = function _loop16(index, count) {\n            var eventData = extend({}, dayEvents[index], null, true);\n\n            _this81.updateSpannedEvents(eventData, dayStart, dayEnd);\n\n            var overlapIndex = _this81.getIndex(dayStart);\n\n            eventData.Index = overlapIndex;\n            var availedHeight = _this81.cellHeader + _this81.eventHeight * (overlapIndex + 1) + EVENT_GAP$2 + _this81.moreIndicatorHeight;\n            var appArea = _this81.cellHeight - _this81.cellHeader - _this81.moreIndicatorHeight;\n            var renderedAppCount = Math.floor(appArea / (_this81.eventHeight + EVENT_GAP$2));\n            var moreIndicatorCount = count - renderedAppCount <= 0 ? 1 : count - renderedAppCount;\n\n            if (_this81.parent.activeViewOptions.orientation === 'Horizontal') {\n              var isRendered = _this81.renderedEvents.filter(function (eventObj) {\n                return eventObj.Guid === eventData.Guid;\n              });\n\n              var isSpanned = isSpannedCollection.filter(function (eventObj) {\n                return eventObj.Guid === eventData.Guid;\n              });\n\n              if (isRendered.length > 0 && isRendered[0].MoreIndicator || isSpanned.length > 0 && isSpanned[0].MoreIndicator) {\n                var moreIndex = _this81.parent.activeViewOptions.orientation === 'Horizontal' ? row : _dayIndex3;\n\n                _this81.renderMoreIndicator(eventWrapper, moreIndicatorCount, dayStart, moreIndex, leftValue, rightValue);\n\n                return \"continue\";\n              } else if (isRendered.length > 0 || isSpanned.length > 0) {\n                return \"continue\";\n              }\n            }\n\n            var isRowAutoHeight = _this81.parent.rowAutoHeight && _this81.parent.activeViewOptions.orientation === 'Horizontal';\n\n            if (isRowAutoHeight || _this81.cellHeight > availedHeight) {\n              _this81.renderEvent(eventWrapper, eventData, row, leftValue, rightValue, monthStart, _dayIndex3);\n\n              _this81.updateCellHeight(rowTd, availedHeight);\n\n              isSpannedCollection.push(eventData);\n            } else {\n              var _moreIndex = _this81.parent.activeViewOptions.orientation === 'Horizontal' ? row : _dayIndex3;\n\n              _this81.renderMoreIndicator(eventWrapper, moreIndicatorCount, dayStart, _moreIndex, leftValue, rightValue);\n\n              if (_this81.parent.activeViewOptions.orientation === 'Horizontal') {\n                eventData.MoreIndicator = true;\n\n                _this81.renderedEvents.push(eventData);\n\n                isSpannedCollection.push(eventData);\n              }\n            }\n          };\n\n          for (var index = 0, count = dayEvents.length; index < count; index++) {\n            var _ret4 = _loop16(index, count);\n\n            if (_ret4 === \"continue\") continue;\n          }\n\n          monthStart = addDays(new Date(monthStart.getTime()), 1);\n\n          if (this.parent.activeViewOptions.orientation === 'Vertical') {\n            _dayIndex3++;\n            this.renderedEvents = [];\n          }\n        }\n      }\n    }\n  }, {\n    key: \"updateSpannedEvents\",\n    value: function updateSpannedEvents(eventObj, dayStart, dayEnd) {\n      var isLeftRightResize = this.isResource && this.parent.activeViewOptions.orientation === 'Vertical' || !this.isResource && this.parent.activeViewOptions.orientation === 'Horizontal';\n      var data = {\n        isLeft: true,\n        isRight: true,\n        isBottom: true,\n        isTop: true\n      };\n\n      if (dayStart.getTime() <= eventObj[this.fields.startTime].getTime()) {\n        if (isLeftRightResize) {\n          data.isLeft = false;\n        } else {\n          data.isTop = false;\n        }\n      }\n\n      if (dayEnd.getTime() >= eventObj[this.fields.endTime].getTime() || isLeftRightResize && !this.isResource && addDays(dayEnd, -1).getMonth() === eventObj[this.fields.endTime].getMonth()) {\n        if (isLeftRightResize) {\n          data.isRight = false;\n        } else {\n          data.isBottom = false;\n        }\n      }\n\n      eventObj.data = data;\n    }\n  }, {\n    key: \"timelineResourceEvents\",\n    value: function timelineResourceEvents() {\n      var workCell = this.parent.element.querySelector('.' + WORK_CELLS_CLASS);\n      this.cellWidth = workCell.offsetWidth;\n      this.cellHeader = 0;\n      var eventTable = this.parent.element.querySelector('.' + EVENT_TABLE_CLASS);\n      this.eventHeight = getElementHeightFromClass(eventTable, APPOINTMENT_CLASS);\n      var wrapperCollection = [].slice.call(this.parent.element.querySelectorAll('.' + APPOINTMENT_CONTAINER_CLASS));\n      var resources = this.parent.uiStateValues.isGroupAdaptive ? [this.parent.resourceBase.lastResourceLevel[this.parent.uiStateValues.groupIndex]] : this.parent.resourceBase.lastResourceLevel;\n      var months = this.getMonths();\n\n      if (this.parent.activeViewOptions.orientation === 'Horizontal') {\n        for (var month = 0; month < months.length; month++) {\n          var monthStart = new Date(this.parent.selectedDate.getFullYear(), months[month], 1);\n\n          for (var i = 0, len = resources.length; i < len; i++) {\n            this.renderedEvents = [];\n            this.renderResourceEvent(wrapperCollection[month], resources[i], month, i, monthStart);\n          }\n        }\n      } else {\n        for (var _i16 = 0, _len = resources.length; _i16 < _len; _i16++) {\n          this.renderedEvents = [];\n\n          for (var _month = 0; _month < months.length; _month++) {\n            var _monthStart = new Date(this.parent.selectedDate.getFullYear(), months[_month], 1);\n\n            this.renderResourceEvent(wrapperCollection[_i16], resources[_i16], _month, _i16, _monthStart);\n          }\n        }\n      }\n    }\n  }, {\n    key: \"renderResourceEvent\",\n    value: function renderResourceEvent(wrapper, resource, month, index, monthStart) {\n      var eventWrapper = createElement('div', {\n        className: APPOINTMENT_WRAPPER_CLASS\n      });\n      wrapper.appendChild(eventWrapper);\n      var monthEnd = addDays(lastDateOfMonth(new Date(monthStart.getTime())), 1);\n      var eventDatas = this.parent.eventBase.filterEvents(monthStart, monthEnd, undefined, resource);\n      var rowIndex = this.parent.activeViewOptions.orientation === 'Vertical' ? index : month;\n      var td = this.parent.element.querySelector(\".e-content-wrap tr:nth-child(\".concat(rowIndex + 1, \") td\"));\n      this.cellHeight = td.offsetHeight;\n\n      for (var a = 0; a < eventDatas.length; a++) {\n        var data = eventDatas[a];\n        var overlapIndex = void 0;\n        var eventData = extend({}, data, null, true);\n\n        if (this.parent.activeViewOptions.group.resources.length > 0) {\n          var eventObj = this.isSpannedEvent(eventData, monthStart);\n          overlapIndex = this.getIndex(eventObj[this.fields.startTime]);\n          eventData.Index = overlapIndex;\n        } else {\n          overlapIndex = this.getIndex(eventData[this.fields.startTime]);\n          eventData.Index = overlapIndex;\n        }\n\n        var availedHeight = this.cellHeader + this.eventHeight * (a + 1) + EVENT_GAP$2 + this.moreIndicatorHeight;\n        var leftValue = this.parent.activeViewOptions.orientation === 'Vertical' ? month * this.cellWidth : index * this.cellWidth;\n\n        if (this.parent.rowAutoHeight || this.cellHeight > availedHeight) {\n          this.renderEvent(eventWrapper, eventData, month, leftValue, leftValue, monthStart, index);\n          this.updateCellHeight(td, availedHeight);\n        } else {\n          var moreIndex = this.parent.activeViewOptions.orientation === 'Horizontal' ? month : index;\n          this.renderMoreIndicator(eventWrapper, eventDatas.length - a, monthStart, moreIndex, leftValue, leftValue, index);\n\n          if (this.parent.activeViewOptions.orientation === 'Horizontal') {\n            for (var i = index; i < eventDatas.length; i++) {\n              this.renderedEvents.push(extend({}, eventDatas[i], {\n                Index: overlapIndex + i\n              }, true));\n            }\n          }\n\n          break;\n        }\n      }\n    } // eslint-disable-next-line max-len\n\n  }, {\n    key: \"renderEvent\",\n    value: function renderEvent(wrapper, eventData, row, left, right, monthDate, rowIndex) {\n      var _this82 = this;\n\n      var eventObj = this.isSpannedEvent(eventData, monthDate);\n      var wrap = this.createEventElement(eventObj);\n      var width;\n      var index;\n\n      if (eventObj.isSpanned.count === 1) {\n        var endTime = addDays(eventObj[this.fields.endTime], -1);\n        eventObj[this.fields.endTime] = endTime > eventObj[this.fields.startTime] ? endTime : eventObj[this.fields.endTime];\n      }\n\n      if (eventObj[this.fields.startTime] > eventObj[this.fields.endTime]) {\n        return;\n      }\n\n      if (this.parent.activeViewOptions.orientation === 'Horizontal') {\n        index = row + 1;\n\n        if (eventObj[this.fields.startTime].getTime() === eventObj[this.fields.endTime].getTime()) {\n          eventObj.isSpanned.count = 1;\n        }\n\n        width = eventObj.isSpanned.count * this.cellWidth;\n      } else {\n        index = rowIndex + 1;\n        width = this.cellWidth;\n      }\n\n      var rowTd = this.parent.element.querySelector(\".e-content-wrap tr:nth-child(\".concat(index, \") td\"));\n      var top = rowTd.offsetTop + this.cellHeader + this.eventHeight * eventObj.Index + EVENT_GAP$2;\n      setStyleAttribute(wrap, {\n        'width': width + 'px',\n        'height': this.eventHeight + 'px',\n        'left': left + 'px',\n        'right': right + 'px',\n        'top': top + 'px'\n      });\n      var args = {\n        data: eventObj,\n        element: wrap,\n        cancel: false,\n        type: 'event'\n      };\n      this.parent.trigger(eventRendered, args, function (eventArgs) {\n        if (!eventArgs.cancel) {\n          wrapper.appendChild(wrap);\n\n          _this82.wireAppointmentEvents(wrap, eventObj);\n\n          if (_this82.parent.activeViewOptions.group.resources.length > 0) {\n            _this82.renderedEvents.push(extend({}, eventObj, null, true));\n          } else if (_this82.parent.activeViewOptions.orientation === 'Vertical') {\n            _this82.renderedEvents.push(extend({}, eventObj, null, true));\n          } else if ((eventObj.isSpanned.isRight || eventObj.isSpanned.isLeft) && _this82.parent.activeViewOptions.orientation === 'Horizontal' || !eventObj.isSpanned.isRight) {\n            _this82.renderedEvents.push(extend({}, eventObj, null, true));\n          }\n        }\n      });\n    } // eslint-disable-next-line max-len\n\n  }, {\n    key: \"renderMoreIndicator\",\n    value: function renderMoreIndicator(wrapper, count, startDate, row, left, right, index) {\n      if (this.parent.activeViewOptions.group.resources.length === 0 && wrapper.querySelector('[data-start-date=\"' + startDate.getTime() + '\"]')) {\n        return;\n      }\n\n      var endDate;\n\n      if (this.parent.activeViewOptions.group.resources.length > 0) {\n        endDate = addDays(lastDateOfMonth(new Date(startDate.getTime())), 1);\n      } else {\n        endDate = addDays(new Date(startDate.getTime()), 1);\n      }\n\n      var moreIndicator = this.getMoreIndicatorElement(count, startDate, endDate);\n      var rowTr = this.parent.element.querySelector(\".e-content-wrap tr:nth-child(\".concat(row + 1, \")\"));\n      var top = rowTr.offsetTop + (this.cellHeight - this.moreIndicatorHeight);\n      left = Math.floor(left / this.cellWidth) * this.cellWidth;\n      right = Math.floor(right / this.cellWidth) * this.cellWidth;\n      setStyleAttribute(moreIndicator, {\n        'width': this.cellWidth + 'px',\n        'left': left + 'px',\n        'right': right + 'px',\n        'top': top + 'px'\n      });\n\n      if (!isNullOrUndefined(index)) {\n        moreIndicator.setAttribute('data-group-index', index.toString());\n      }\n\n      wrapper.appendChild(moreIndicator);\n      EventHandler.add(moreIndicator, 'click', this.moreIndicatorClick, this);\n    }\n  }, {\n    key: \"createEventElement\",\n    value: function createEventElement(record) {\n      var eventSubject = record[this.fields.subject] || this.parent.eventSettings.fields.subject.default || this.parent.localeObj.getConstant('addTitle');\n      var eventWrapper = createElement('div', {\n        className: APPOINTMENT_CLASS,\n        attrs: {\n          'data-id': 'Appointment_' + record[this.fields.id],\n          'data-guid': record.Guid,\n          'role': 'button',\n          'tabindex': '0',\n          'aria-readonly': this.parent.eventBase.getReadonlyAttribute(record),\n          'aria-selected': 'false',\n          'aria-grabbed': 'true',\n          'aria-label': this.parent.getAnnouncementString(record)\n        }\n      });\n\n      if (this.cssClass) {\n        addClass([eventWrapper], this.cssClass);\n      }\n\n      if (record[this.fields.isReadonly]) {\n        addClass([eventWrapper], READ_ONLY);\n      }\n\n      if (this.parent.activeViewOptions.group.resources.length > 0) {\n        var resIndex = this.getGroupIndexFromEvent(record);\n        eventWrapper.setAttribute('data-group-index', resIndex.toString());\n      }\n\n      var templateElement = [];\n      var eventObj = extend({}, record, null, true);\n\n      if (this.parent.activeViewOptions.eventTemplate) {\n        var templateId = this.parent.element.id + '_' + this.parent.activeViewOptions.eventTemplateName + 'eventTemplate';\n        templateElement = this.parent.getAppointmentTemplate()(eventObj, this.parent, 'eventTemplate', templateId, false);\n      } else {\n        var locationEle = record[this.fields.location] || this.parent.eventSettings.fields.location.default || '';\n        var subjectEle = createElement('div', {\n          className: SUBJECT_CLASS,\n          innerHTML: eventSubject + (locationEle ? ';&nbsp' + locationEle : '')\n        });\n        var startTimeEle = createElement('div', {\n          className: APPOINTMENT_TIME + (this.parent.isAdaptive ? ' ' + DISABLE_CLASS : ''),\n          innerHTML: this.parent.getTimeString(eventObj[this.fields.startTime])\n        });\n        var endTimeEle = createElement('div', {\n          className: APPOINTMENT_TIME + (this.parent.isAdaptive ? ' ' + DISABLE_CLASS : ''),\n          innerHTML: this.parent.getTimeString(eventObj[this.fields.endTime])\n        });\n        addClass([subjectEle], 'e-text-center');\n\n        if (record[this.fields.isAllDay]) {\n          templateElement = [subjectEle];\n        } else if (!eventObj.isLeft && !eventObj.isRight) {\n          templateElement = [startTimeEle, subjectEle, endTimeEle];\n        } else {\n          if (!eventObj.isLeft) {\n            templateElement.push(startTimeEle);\n          }\n\n          templateElement.push(subjectEle);\n\n          if (!eventObj.isRight) {\n            templateElement.push(endTimeEle);\n          }\n        }\n      }\n\n      var appointmentDetails = createElement('div', {\n        className: APPOINTMENT_DETAILS\n      });\n      append(templateElement, appointmentDetails);\n      eventWrapper.appendChild(appointmentDetails);\n      this.renderResizeHandler(eventWrapper, record.data, record[this.fields.isReadonly]);\n      this.applyResourceColor(eventWrapper, eventObj, 'backgroundColor', this.groupOrder);\n      return eventWrapper;\n    }\n  }, {\n    key: \"isSpannedEvent\",\n    value: function isSpannedEvent(eventObj, monthDate) {\n      var monthStart = new Date(monthDate.getFullYear(), monthDate.getMonth(), 1);\n      var monthEnd = addDays(new Date(monthDate.getFullYear(), monthDate.getMonth() + 1, 0), 1);\n      var eventData = extend({}, eventObj, null, true);\n      var eventStart = eventData[this.fields.startTime];\n      var eventEnd = eventData[this.fields.endTime];\n      var isSpanned = {\n        isLeft: false,\n        isRight: false,\n        count: 1\n      };\n\n      if (this.isResource) {\n        this.updateSpannedEvents(eventObj, monthStart, monthEnd);\n      }\n\n      if (eventStart.getTime() < monthStart.getTime()) {\n        eventData[this.fields.startTime] = monthStart;\n        isSpanned.isLeft = true;\n      }\n\n      if (eventEnd.getTime() > monthEnd.getTime()) {\n        eventData[this.fields.endTime] = monthEnd;\n        isSpanned.isRight = true;\n      }\n\n      if (this.parent.activeViewOptions.group.resources.length === 0) {\n        var end = resetTime(eventData[this.fields.endTime]).getTime();\n        var start = resetTime(eventData[this.fields.startTime]).getTime();\n\n        if (eventObj[this.fields.isAllDay] && end === eventObj[this.fields.endTime].getTime() || isSpanned.isRight) {\n          end = addDays(new Date(end), -1).getTime();\n        }\n\n        isSpanned.count = Math.ceil((end - start) / MS_PER_DAY) + 1;\n      }\n\n      eventData.isSpanned = isSpanned;\n\n      if (resetTime(eventStart).getTime() < resetTime(this.parent.minDate).getTime()) {\n        eventData[this.fields.startTime] = this.parent.minDate;\n      }\n\n      if (resetTime(eventEnd).getTime() > resetTime(this.parent.maxDate).getTime()) {\n        eventData[this.fields.endTime] = this.parent.maxDate;\n      }\n\n      return eventData;\n    }\n  }, {\n    key: \"getOverlapEvents\",\n    value: function getOverlapEvents(date, appointments) {\n      var appointmentsList = [];\n      var dateStart;\n      var dateEnd;\n\n      if (this.parent.activeViewOptions.group.resources.length > 0) {\n        var monthStart = this.parent.calendarUtil.getMonthStartDate(new Date(date.getTime()));\n        var monthEnd = addDays(this.parent.calendarUtil.getMonthEndDate(new Date(date.getTime())), -1);\n        dateStart = resetTime(new Date(monthStart.getTime())).getTime();\n        dateEnd = resetTime(new Date(monthEnd.getTime())).getTime();\n      } else {\n        if (this.parent.rowAutoHeight) {\n          dateStart = resetTime(new Date(date.getTime())).getTime();\n          dateEnd = addDays(resetTime(new Date(date.getTime())), 1).getTime();\n        } else {\n          dateStart = dateEnd = resetTime(new Date(date.getTime())).getTime();\n        }\n      }\n\n      var _iterator112 = _createForOfIteratorHelper(appointments),\n          _step112;\n\n      try {\n        for (_iterator112.s(); !(_step112 = _iterator112.n()).done;) {\n          var app = _step112.value;\n          var appStart = new Date(app[this.fields.startTime].getTime());\n          var appEnd = new Date(app[this.fields.endTime].getTime());\n\n          if (this.parent.activeViewOptions.orientation === 'Vertical' && this.parent.activeViewOptions.group.resources.length > 0) {\n            if (resetTime(appStart).getTime() >= dateStart && resetTime(appEnd).getTime() <= dateEnd) {\n              appointmentsList.push(app);\n            }\n          } else {\n            if (resetTime(appStart).getTime() <= dateStart && resetTime(appEnd).getTime() > dateStart || resetTime(appStart).getTime() >= dateStart && resetTime(appEnd).getTime() <= dateEnd) {\n              appointmentsList.push(app);\n            }\n          }\n        }\n      } catch (err) {\n        _iterator112.e(err);\n      } finally {\n        _iterator112.f();\n      }\n\n      return appointmentsList;\n    }\n  }, {\n    key: \"getMonths\",\n    value: function getMonths() {\n      var _this83 = this;\n\n      // eslint-disable-next-line prefer-spread\n      return Array.apply(null, {\n        length: this.parent.monthsCount\n      }).map(function (value, index) {\n        return _this83.parent.firstMonthOfYear + index;\n      });\n    }\n  }, {\n    key: \"removeCellHeight\",\n    value: function removeCellHeight() {\n      var elementSelector = \".\".concat(MONTH_HEADER_WRAPPER, \" tbody tr,.\").concat(RESOURCE_COLUMN_TABLE_CLASS, \" tbody tr,.\").concat(CONTENT_TABLE_CLASS, \" tbody tr\");\n      var rows = [].slice.call(this.element.querySelectorAll(elementSelector));\n\n      var _iterator113 = _createForOfIteratorHelper(rows),\n          _step113;\n\n      try {\n        for (_iterator113.s(); !(_step113 = _iterator113.n()).done;) {\n          var row = _step113.value;\n          row.firstElementChild.style.height = '';\n        }\n      } catch (err) {\n        _iterator113.e(err);\n      } finally {\n        _iterator113.f();\n      }\n    }\n  }, {\n    key: \"destroy\",\n    value: function destroy() {\n      _get(_getPrototypeOf(YearEvent.prototype), \"destroy\", this).call(this);\n\n      this.parent = null;\n    }\n  }]);\n\n  return YearEvent;\n}(TimelineEvent);\n/* eslint-disable @typescript-eslint/no-explicit-any */\n\n\nvar MINUTES_PER_DAY = 1440;\n/**\n * Schedule events drag actions\n */\n\nvar DragAndDrop = /*#__PURE__*/function (_ActionBase2) {\n  _inherits(DragAndDrop, _ActionBase2);\n\n  var _super17 = _createSuper(DragAndDrop);\n\n  function DragAndDrop() {\n    var _this84;\n\n    _classCallCheck(this, DragAndDrop);\n\n    _this84 = _super17.apply(this, arguments);\n    _this84.widthUptoCursorPoint = 0;\n    _this84.heightUptoCursorPoint = 0;\n    _this84.cursorPointIndex = 0;\n    _this84.isHeaderRows = false;\n    _this84.isTimelineDayProcess = false;\n    _this84.widthPerMinute = 0;\n    _this84.heightPerMinute = 0;\n    _this84.minDiff = 0;\n    _this84.isStepDragging = false;\n    _this84.isMorePopupOpened = false;\n    _this84.isAllDayDrag = false;\n    _this84.isMultiSelect = false;\n    _this84.multiData = [];\n    _this84.updatedData = [];\n    _this84.swagData = [];\n    _this84.startTime = 0;\n    _this84.isAllDayTarget = false;\n    _this84.targetTd = null;\n    _this84.isCursorAhead = false;\n    return _this84;\n  }\n\n  _createClass(DragAndDrop, [{\n    key: \"wireDragEvent\",\n    value: function wireDragEvent(element) {\n      new Draggable(element, {\n        abort: '.' + EVENT_RESIZE_CLASS,\n        clone: true,\n        isDragScroll: true,\n        enableTapHold: this.parent.isAdaptive,\n        enableTailMode: this.parent.eventDragArea ? true : false,\n        cursorAt: this.parent.eventDragArea ? {\n          left: -20,\n          top: -20\n        } : {\n          left: 0,\n          top: 0\n        },\n        dragArea: this.dragArea,\n        dragStart: this.dragStart.bind(this),\n        drag: this.drag.bind(this),\n        dragStop: this.dragStop.bind(this),\n        enableAutoScroll: false,\n        helper: this.dragHelper.bind(this),\n        queryPositionInfo: this.dragPosition.bind(this)\n      });\n    }\n  }, {\n    key: \"setDragArea\",\n    value: function setDragArea() {\n      var dragElement = document.querySelector(this.parent.eventDragArea);\n      this.dragArea = this.parent.eventDragArea && dragElement ? dragElement : this.parent.element.querySelector('.' + CONTENT_TABLE_CLASS);\n    }\n  }, {\n    key: \"dragHelper\",\n    value: function dragHelper(e) {\n      var _this85 = this;\n\n      this.setDragActionDefaultValues();\n      this.actionObj.element = e.element;\n      this.actionObj.action = 'drag';\n      var elements = [];\n\n      if (!this.parent.allowMultiDrag || isNullOrUndefined(this.parent.selectedElements) || this.parent.selectedElements.length === 0 || this.parent.selectedElements.length > 0 && this.parent.selectedElements.indexOf(this.actionObj.element) === -1) {\n        elements = [e.element];\n      } else {\n        elements = this.parent.selectedElements;\n        this.isMultiSelect = true;\n      }\n\n      elements.forEach(function (ele) {\n        var cloneElement = _this85.createCloneElement(ele);\n\n        if (ele.getAttribute('data-guid') === _this85.actionObj.element.getAttribute('data-guid')) {\n          _this85.actionObj.clone = cloneElement;\n\n          if (!_this85.parent.eventDragArea && _this85.parent.currentView !== 'Month' && _this85.parent.activeViewOptions.timeScale.enable && !_this85.parent.activeView.isTimelineView() && !_this85.actionObj.element.classList.contains(ALLDAY_APPOINTMENT_CLASS)) {\n            setStyleAttribute(_this85.actionObj.clone, {\n              cursor: 'move',\n              left: '0%',\n              right: '0%',\n              width: '100%'\n            });\n          }\n\n          _this85.actionObj.clone.style.top = formatUnit(_this85.actionObj.element.offsetTop);\n        }\n\n        _this85.actionObj.cloneElement.push(cloneElement);\n\n        _this85.actionObj.originalElement.push(ele);\n      });\n      return this.actionObj.clone;\n    }\n  }, {\n    key: \"dragPosition\",\n    value: function dragPosition(e) {\n      if (this.parent.eventDragArea) {\n        return {\n          left: e.left,\n          top: e.top\n        };\n      }\n\n      var cellHeight = this.actionObj.cellHeight / this.actionObj.slotInterval * this.actionObj.interval;\n      var leftValue = formatUnit(0);\n\n      if (this.parent.currentView === 'Month') {\n        leftValue = e.left;\n      }\n\n      var cloneRight;\n\n      if (this.isStepDragging) {\n        cloneRight = Math.ceil(this.actionObj.clone.getBoundingClientRect().right) + this.actionObj.interval;\n      } else {\n        cloneRight = this.actionObj.clone.getBoundingClientRect().right;\n      }\n\n      var dragArea = this.parent.element.querySelector('.' + CONTENT_WRAP_CLASS);\n      var contentWrapRight = dragArea.getBoundingClientRect().right;\n\n      if (this.parent.activeView.isTimelineView() && this.parent.currentView !== 'TimelineYear' && !this.parent.enableRtl && this.actionObj.pageX > cloneRight && !this.isMorePopupOpened && !(this.actionObj.pageX > contentWrapRight)) {\n        this.isCursorAhead = true;\n      }\n\n      if (this.parent.activeView.isTimelineView()) {\n        leftValue = formatUnit(this.actionObj.clone.offsetLeft);\n      }\n\n      var topValue;\n\n      if (this.parent.activeView.isTimelineView() || !this.parent.timeScale.enable || !isNullOrUndefined(this.actionObj.clone.offsetParent) && this.actionObj.clone.offsetParent.classList.contains(MORE_EVENT_POPUP_CLASS)) {\n        topValue = formatUnit(this.actionObj.clone.offsetTop);\n      } else if (this.parent.currentView === 'Month') {\n        topValue = formatUnit(0);\n      } else if (this.actionObj.clone.classList.contains(ALLDAY_APPOINTMENT_CLASS)) {\n        topValue = formatUnit(this.parent.element.querySelector('.' + ALLDAY_ROW_CLASS).offsetTop);\n        setStyleAttribute(this.actionObj.clone, {\n          width: formatUnit(Math.ceil(this.actionObj.clone.offsetWidth / this.actionObj.cellWidth) * this.actionObj.cellWidth),\n          right: this.parent.enableRtl && formatUnit(0)\n        });\n      } else {\n        if (this.actionObj.element.classList.contains(ALLDAY_APPOINTMENT_CLASS) && !this.actionObj.clone.classList.contains(ALLDAY_APPOINTMENT_CLASS)) {\n          setStyleAttribute(this.actionObj.clone, {\n            height: formatUnit(this.actionObj.cellHeight),\n            width: formatUnit(this.actionObj.cellWidth - 1),\n            pointerEvents: 'none'\n          });\n        }\n\n        var top = parseInt(e.top, 10);\n        top = top < 0 ? 0 : top;\n        topValue = formatUnit(Math.ceil(top / cellHeight) * cellHeight);\n        var scrollHeight = this.parent.element.querySelector('.e-content-wrap').scrollHeight;\n        var cloneBottom = parseInt(topValue, 10) + this.actionObj.clone.offsetHeight;\n\n        if (cloneBottom > scrollHeight) {\n          topValue = parseInt(topValue, 10) - (cloneBottom - scrollHeight) + 'px';\n        }\n      }\n\n      return {\n        left: leftValue,\n        top: topValue\n      };\n    }\n  }, {\n    key: \"setDragActionDefaultValues\",\n    value: function setDragActionDefaultValues() {\n      this.actionObj.action = 'drag';\n      this.actionObj.isAllDay = null;\n      this.actionObj.slotInterval = this.parent.activeViewOptions.timeScale.interval / this.parent.activeViewOptions.timeScale.slotCount;\n      this.actionObj.interval = this.actionObj.slotInterval;\n      var workCell = this.parent.element.querySelector('.' + WORK_CELLS_CLASS);\n      this.actionObj.cellWidth = workCell.offsetWidth;\n      this.actionObj.cellHeight = workCell.offsetHeight;\n    }\n  }, {\n    key: \"dragStart\",\n    value: function dragStart(e) {\n      var _this86 = this;\n\n      var eventGuid = this.actionObj.element.getAttribute('data-guid');\n      this.actionObj.event = this.parent.eventBase.getEventByGuid(eventGuid);\n      var eventObj = extend({}, this.actionObj.event, null, true);\n      this.startTime = eventObj[this.parent.eventFields.startTime].getTime();\n      var dragArgs = {\n        cancel: false,\n        data: eventObj,\n        selectedData: this.getSelectedData(),\n        event: e,\n        excludeSelectors: null,\n        element: this.actionObj.element,\n        interval: this.actionObj.interval,\n        navigation: {\n          enable: false,\n          timeDelay: 2000\n        },\n        scroll: {\n          enable: true,\n          scrollBy: 30,\n          timeDelay: 100\n        }\n      };\n      this.parent.trigger(_dragStart, dragArgs, function (dragEventArgs) {\n        if (dragEventArgs.cancel || !isNullOrUndefined(_this86.actionObj.element) && isNullOrUndefined(_this86.actionObj.element.parentElement)) {\n          var dragObj = _this86.actionObj.element.ej2_instances[0];\n\n          if (!isNullOrUndefined(dragObj)) {\n            dragObj.intDestroy(e.event);\n          }\n\n          _this86.actionObj.action = '';\n\n          _this86.removeCloneElementClasses();\n\n          _this86.removeCloneElement();\n\n          return;\n        }\n\n        _this86.actionClass('addClass');\n\n        _this86.parent.uiStateValues.action = true;\n        _this86.actionObj.start = eventObj[_this86.parent.eventFields.startTime];\n        _this86.actionObj.end = eventObj[_this86.parent.eventFields.endTime];\n        _this86.actionObj.groupIndex = parseInt(_this86.actionObj.element.getAttribute('data-group-index') || '0', 10);\n        _this86.actionObj.interval = dragEventArgs.interval;\n        _this86.actionObj.navigation = dragEventArgs.navigation;\n        _this86.actionObj.scroll = dragEventArgs.scroll;\n        _this86.actionObj.excludeSelectors = dragEventArgs.excludeSelectors;\n\n        var viewElement = _this86.parent.element.querySelector('.' + CONTENT_WRAP_CLASS);\n\n        _this86.scrollArgs = {\n          element: viewElement,\n          width: viewElement.scrollWidth,\n          height: viewElement.scrollHeight\n        };\n        _this86.widthPerMinute = _this86.actionObj.cellWidth / _this86.actionObj.slotInterval * _this86.actionObj.interval;\n        _this86.heightPerMinute = _this86.actionObj.cellHeight / _this86.actionObj.slotInterval * _this86.actionObj.interval;\n        _this86.widthUptoCursorPoint = 0;\n        _this86.heightUptoCursorPoint = 0;\n        _this86.cursorPointIndex = -1;\n        _this86.isHeaderRows = false;\n        _this86.isTimelineDayProcess = false;\n        _this86.minDiff = 0;\n        _this86.isMorePopupOpened = false;\n        _this86.daysVariation = -1;\n        _this86.isAllDayTarget = _this86.actionObj.clone.classList.contains(ALLDAY_APPOINTMENT_CLASS);\n\n        if ((_this86.parent.activeView.isTimelineView() || !_this86.parent.timeScale.enable) && _this86.parent.currentView !== 'TimelineYear') {\n          if (!isNullOrUndefined(_this86.actionObj.clone.offsetParent) && _this86.actionObj.clone.offsetParent.classList.contains(MORE_EVENT_POPUP_CLASS)) {\n            _this86.isMorePopupOpened = true;\n          }\n\n          _this86.actionObj.pageX = e.event.pageX;\n          var rows = _this86.parent.activeViewOptions.headerRows;\n          _this86.isHeaderRows = rows.length > 0 && rows[rows.length - 1].option !== 'Hour' && rows[rows.length - 1].option !== 'Date';\n          _this86.isTimelineDayProcess = !_this86.parent.activeViewOptions.timeScale.enable || _this86.isHeaderRows || _this86.parent.currentView === 'TimelineMonth' || rows.length > 0 && rows[rows.length - 1].option === 'Date';\n          _this86.isStepDragging = !_this86.isTimelineDayProcess && _this86.actionObj.slotInterval !== _this86.actionObj.interval;\n\n          if (_this86.isTimelineDayProcess) {\n            _this86.timelineEventModule = new TimelineEvent(_this86.parent, 'day');\n          } else {\n            _this86.timelineEventModule = new TimelineEvent(_this86.parent, 'hour');\n          }\n        }\n\n        if (_this86.parent.currentView === 'TimelineYear') {\n          _this86.yearEvent = new YearEvent(_this86.parent);\n        }\n\n        if (_this86.parent.currentView === 'Month') {\n          _this86.startTime = resetTime(new Date(_this86.startTime)).getTime();\n\n          _this86.updateOriginalElement(_this86.actionObj.clone);\n\n          _this86.monthEvent = new MonthEvent(_this86.parent);\n        }\n\n        if (_this86.parent.currentView === 'Day' || _this86.parent.currentView === 'Week' || _this86.parent.currentView === 'WorkWeek') {\n          _this86.verticalEvent = new VerticalEvent(_this86.parent);\n\n          _this86.verticalEvent.initializeValues();\n\n          var splitEvents = _this86.splitEvent(_this86.actionObj.event);\n\n          splitEvents.forEach(function (event) {\n            var query = \".e-day-wrapper[data-date=\\\"\".concat(resetTime(event[_this86.parent.eventFields.startTime]).getTime(), \"\\\"]\");\n\n            if (_this86.parent.activeViewOptions.group.resources.length > 0) {\n              query = query.concat('[data-group-index = \"' + _this86.actionObj.groupIndex + '\"]');\n            }\n\n            var appWrap = _this86.parent.element.querySelector(query);\n\n            if (appWrap) {\n              var appEle = appWrap.querySelector('[data-id=\"' + _this86.actionObj.clone.getAttribute('data-id') + '\"]');\n\n              if (appEle) {\n                addClass([appEle], EVENT_ACTION_CLASS);\n              }\n            }\n          });\n        }\n      });\n    }\n  }, {\n    key: \"getSelectedData\",\n    value: function getSelectedData() {\n      if (this.isMultiSelect && this.multiData.length === 0 && this.parent.selectedElements.length > 0) {\n        var _iterator114 = _createForOfIteratorHelper(this.parent.selectedElements),\n            _step114;\n\n        try {\n          for (_iterator114.s(); !(_step114 = _iterator114.n()).done;) {\n            var element = _step114.value;\n            var eventGuid = element.getAttribute('data-guid');\n            var data = this.parent.eventBase.getEventByGuid(eventGuid);\n            this.multiData.push(extend({}, data, null, true));\n          }\n        } catch (err) {\n          _iterator114.e(err);\n        } finally {\n          _iterator114.f();\n        }\n      }\n\n      return this.multiData;\n    }\n  }, {\n    key: \"drag\",\n    value: function drag(e) {\n      if (this.parent.quickPopup) {\n        this.parent.quickPopup.quickPopupHide(true);\n      }\n\n      if (!isNullOrUndefined(e.target) && e.target.classList.contains(DISABLE_DATES)) {\n        return;\n      }\n\n      var eventObj = extend({}, this.actionObj.event, null, true);\n      var eventArgs = this.getPageCoordinates(e);\n      this.actionObj.Y = this.actionObj.pageY = eventArgs.pageY;\n      this.actionObj.X = this.actionObj.pageX = eventArgs.pageX;\n      this.actionObj.target = e.target;\n      this.widthUptoCursorPoint = this.widthUptoCursorPoint === 0 ? Math.ceil(Math.abs(this.actionObj.clone.getBoundingClientRect().left - this.actionObj.X) / this.widthPerMinute) * this.widthPerMinute : this.widthUptoCursorPoint;\n      this.widthUptoCursorPoint = this.isMorePopupOpened ? this.actionObj.cellWidth : this.widthUptoCursorPoint;\n      this.heightUptoCursorPoint = this.heightUptoCursorPoint === 0 ? Math.ceil(Math.abs(this.actionObj.clone.getBoundingClientRect().top - this.actionObj.Y) / this.heightPerMinute) * this.heightPerMinute : this.heightUptoCursorPoint;\n      this.isAllDayDrag = this.parent.activeViewOptions.timeScale.enable ? this.actionObj.clone.classList.contains(ALLDAY_APPOINTMENT_CLASS) : this.actionObj.event[this.parent.eventFields.isAllDay];\n\n      if (this.isStepDragging && this.minDiff === 0) {\n        this.calculateMinutesDiff(eventObj);\n      }\n\n      if ((this.parent.currentView === 'Month' || this.isAllDayDrag) && this.daysVariation < 0) {\n        var date = this.parent.getDateFromElement(this.actionObj.target);\n\n        if (!isNullOrUndefined(date)) {\n          var currentDate = resetTime(date);\n          var startDate = resetTime(new Date(eventObj[this.parent.eventFields.startTime].getTime()));\n          this.daysVariation = (currentDate.getTime() - startDate.getTime()) / MS_PER_DAY;\n        } else {\n          this.daysVariation = 0;\n        }\n      } else {\n        this.daysVariation = 0;\n      }\n\n      if (this.parent.eventDragArea) {\n        var targetElement = eventArgs.target;\n        this.actionObj.clone.style.top = formatUnit(targetElement.offsetTop);\n        this.actionObj.clone.style.left = formatUnit(targetElement.offsetLeft);\n        var currentTarget = closest(targetElement, '.' + ROOT);\n\n        if (!currentTarget) {\n          this.actionObj.clone.style.height = '';\n          this.actionObj.clone.style.width = '';\n        } else {\n          if (!(this.parent.currentView === 'Week' || this.parent.currentView === 'WorkWeek' || this.parent.currentView === 'Day')) {\n            this.actionObj.clone.style.width = formatUnit(this.actionObj.element.offsetWidth);\n          }\n        }\n      }\n\n      this.updateScrollPosition(e);\n      this.updateNavigatingPosition(e);\n      this.updateDraggingDateTime(e);\n      var dragArgs = {\n        data: eventObj,\n        event: e,\n        element: this.actionObj.element,\n        startTime: this.actionObj.start,\n        endTime: this.actionObj.end,\n        selectedData: this.updatedData\n      };\n\n      if (this.parent.group.resources.length > 0) {\n        dragArgs.groupIndex = this.actionObj.groupIndex;\n      }\n\n      this.parent.trigger(_drag, dragArgs);\n    }\n  }, {\n    key: \"calculateMinutesDiff\",\n    value: function calculateMinutesDiff(eventObj) {\n      if (this.parent.enableRtl) {\n        this.minDiff = (this.actionObj.clone.offsetWidth - this.widthUptoCursorPoint) / this.widthPerMinute * this.actionObj.interval;\n      } else {\n        this.minDiff = this.widthUptoCursorPoint / this.widthPerMinute * this.actionObj.interval;\n      }\n\n      var startDate = eventObj[this.parent.eventFields.startTime];\n      var startTime = this.parent.activeView.renderDates[0];\n      var startEndHours = getStartEndHours(startTime, this.parent.activeView.getStartHour(), this.parent.activeView.getEndHour());\n\n      if (startEndHours.startHour.getTime() > startDate.getTime()) {\n        this.minDiff = this.minDiff + (startEndHours.startHour.getTime() - startDate.getTime()) / MS_PER_MINUTE;\n      }\n    }\n  }, {\n    key: \"dragStop\",\n    value: function dragStop(e) {\n      var _this87 = this;\n\n      this.isCursorAhead = false;\n      this.removeCloneElementClasses();\n      this.removeCloneElement();\n      clearInterval(this.actionObj.navigationInterval);\n      this.actionObj.navigationInterval = null;\n      clearInterval(this.actionObj.scrollInterval);\n      this.actionObj.scrollInterval = null;\n      this.actionClass('removeClass');\n      this.parent.uiStateValues.action = false;\n      this.actionObj.action = null;\n\n      if (this.isAllowDrop(e)) {\n        return;\n      }\n\n      var target = !e.target.classList.contains('e-work-cells') && this.parent.cellTemplate ? closest(e.target, '.e-work-cells') : e.target;\n      var dragArgs = {\n        cancel: false,\n        data: this.getChangedData(this.updatedData),\n        selectedData: this.updatedData,\n        event: e,\n        element: this.actionObj.element,\n        target: target\n      };\n      this.parent.trigger(_dragStop, dragArgs, function (dragEventArgs) {\n        if (dragEventArgs.cancel) {\n          return;\n        }\n\n        if (_this87.parent.activeViewOptions.group.resources.length > 0 && !_this87.parent.activeViewOptions.group.allowGroupEdit && !_this87.parent.rowAutoHeight && !_this87.parent.virtualScrollModule && _this87.parent.activeViewOptions.group.byGroupID) {\n          _this87.parent.crudModule.crudObj.isCrudAction = true;\n          _this87.parent.crudModule.crudObj.sourceEvent = [_this87.parent.resourceBase.lastResourceLevel[parseInt(dragArgs.element.getAttribute('data-group-index'), 10)]];\n\n          var currentGroupIndex = parseInt(dragArgs.target.getAttribute('data-group-index'), 10) || _this87.actionObj.groupIndex;\n\n          _this87.parent.crudModule.crudObj.targetEvent = [_this87.parent.resourceBase.lastResourceLevel[currentGroupIndex]];\n        }\n\n        _this87.saveChangedData(dragEventArgs, _this87.isMultiSelect);\n      });\n      this.updatedData = [];\n      this.multiData = [];\n      this.isMultiSelect = false;\n      this.parent.selectedElements = [];\n    }\n  }, {\n    key: \"updateNavigatingPosition\",\n    value: function updateNavigatingPosition(e) {\n      var _this88 = this;\n\n      if (this.actionObj.navigation.enable) {\n        var currentDate = this.parent.getCurrentTime();\n\n        if (isNullOrUndefined(this.actionObj.navigationInterval)) {\n          this.actionObj.navigationInterval = window.setInterval(function () {\n            if (currentDate) {\n              var crtDate = _this88.parent.getCurrentTime();\n\n              var end = crtDate.getSeconds();\n              var start = currentDate.getSeconds() + _this88.actionObj.navigation.timeDelay / 1000;\n              start = start >= 60 ? start - 60 : start;\n\n              if (start === end) {\n                currentDate = _this88.parent.getCurrentTime();\n\n                _this88.viewNavigation(e);\n\n                _this88.updateDraggingDateTime(e);\n              }\n            }\n          }, this.actionObj.navigation.timeDelay);\n        }\n      }\n    }\n  }, {\n    key: \"updateDraggingDateTime\",\n    value: function updateDraggingDateTime(e) {\n      if (!isNullOrUndefined(this.actionObj.clone.offsetParent) && this.actionObj.clone.offsetParent.classList.contains(MORE_EVENT_POPUP_CLASS)) {\n        this.morePopupEventDragging(e);\n      } else if (this.parent.activeView.isTimelineView() && this.parent.currentView !== 'TimelineYear') {\n        this.timelineEventModule.dateRender = this.parent.activeView.renderDates;\n        this.timelineEventModule.cellWidth = this.actionObj.cellWidth;\n        this.timelineEventModule.getSlotDates();\n        this.actionObj.cellWidth = this.isHeaderRows ? this.timelineEventModule.cellWidth : this.actionObj.cellWidth;\n        this.calculateTimelineTime(e);\n      } else {\n        if (this.parent.currentView === 'Month' || this.parent.currentView === 'TimelineYear') {\n          this.calculateVerticalDate(e);\n        } else {\n          this.calculateVerticalTime(e);\n        }\n      }\n    }\n  }, {\n    key: \"navigationWrapper\",\n    value: function navigationWrapper() {\n      if (!this.parent.activeView.isTimelineView()) {\n        if (this.parent.currentView === 'Month' || !this.parent.timeScale.enable) {\n          var outerWrapperCls = [].slice.call(this.parent.element.querySelectorAll('.' + WORK_CELLS_CLASS));\n          this.actionObj.index = this.parent.activeView.renderDates.length < this.actionObj.index ? this.parent.activeView.renderDates.length - 1 : this.actionObj.index;\n          var targetWrapper = outerWrapperCls[this.actionObj.index].querySelector('.' + APPOINTMENT_WRAPPER_CLASS);\n\n          if (!targetWrapper) {\n            targetWrapper = createElement('div', {\n              className: APPOINTMENT_WRAPPER_CLASS\n            });\n            outerWrapperCls[this.actionObj.index].appendChild(targetWrapper);\n          }\n\n          targetWrapper.appendChild(this.actionObj.clone);\n        } else {\n          var wrapperClass = this.actionObj.clone.classList.contains(ALLDAY_APPOINTMENT_CLASS) ? '.' + ALLDAY_APPOINTMENT_WRAPPER_CLASS : '.' + APPOINTMENT_WRAPPER_CLASS;\n          this.parent.element.querySelectorAll(wrapperClass).item(this.actionObj.index).appendChild(this.actionObj.clone);\n\n          if (wrapperClass === '.' + ALLDAY_APPOINTMENT_WRAPPER_CLASS) {\n            var elementHeight = this.getAllDayEventHeight();\n            var event = [].slice.call(this.parent.element.querySelectorAll('.' + ALLDAY_CELLS_CLASS + ':first-child'));\n\n            if (event[0].offsetHeight < elementHeight) {\n              var _iterator115 = _createForOfIteratorHelper(event),\n                  _step115;\n\n              try {\n                for (_iterator115.s(); !(_step115 = _iterator115.n()).done;) {\n                  var e = _step115.value;\n                  e.style.height = (elementHeight + 2) / 12 + 'em';\n                }\n              } catch (err) {\n                _iterator115.e(err);\n              } finally {\n                _iterator115.f();\n              }\n            }\n\n            this.actionObj.clone.style.height = formatUnit(elementHeight);\n          }\n\n          this.actionObj.height = parseInt(this.actionObj.clone.style.height, 10);\n        }\n      } else {\n        var outWrapper;\n\n        if (this.parent.activeViewOptions.group.resources.length > 0) {\n          outWrapper = this.parent.element.querySelectorAll('.e-appointment-container:not(.e-hidden)').item(this.actionObj.index);\n        } else {\n          outWrapper = this.parent.element.querySelector('.' + APPOINTMENT_CONTAINER_CLASS);\n        }\n\n        var tarWrapper = outWrapper.querySelector('.' + APPOINTMENT_WRAPPER_CLASS);\n\n        if (!tarWrapper) {\n          tarWrapper = createElement('div', {\n            className: APPOINTMENT_WRAPPER_CLASS\n          });\n          outWrapper.appendChild(tarWrapper);\n        }\n\n        this.actionObj.cloneElement.forEach(function (ele) {\n          tarWrapper.appendChild(ele);\n        });\n      }\n    } // eslint-disable-next-line @typescript-eslint/no-unused-vars\n\n  }, {\n    key: \"viewNavigation\",\n    value: function viewNavigation(e) {\n      var navigationType;\n      var dragArea = this.parent.element.querySelector('.' + CONTENT_WRAP_CLASS);\n\n      if (dragArea && (!this.scrollEdges.top && !this.scrollEdges.bottom || closest(this.actionObj.clone, '.' + ALLDAY_APPOINTMENT_WRAPPER_CLASS))) {\n        if (dragArea.scrollLeft === 0 && Math.round(this.actionObj.X) <= Math.round(dragArea.getBoundingClientRect().left + this.actionObj.cellWidth + window.pageXOffset)) {\n          navigationType = this.parent.enableRtl ? 'next' : 'previous';\n        } else if (Math.round(dragArea.scrollLeft) + dragArea.clientWidth === dragArea.scrollWidth && Math.round(this.actionObj.X) >= Math.round(dragArea.getBoundingClientRect().right - this.actionObj.cellWidth + window.pageXOffset)) {\n          navigationType = this.parent.enableRtl ? 'previous' : 'next';\n        }\n\n        if (navigationType) {\n          this.parent.changeDate(this.parent.activeView.getNextPreviousDate(navigationType));\n        }\n      }\n    }\n  }, {\n    key: \"morePopupEventDragging\",\n    value: function morePopupEventDragging(e) {\n      if (isNullOrUndefined(e.target) || e.target && isNullOrUndefined(closest(e.target, 'td'))) {\n        return;\n      }\n\n      var eventObj = extend({}, this.actionObj.event, null, true);\n      var eventDuration = eventObj[this.parent.eventFields.endTime].getTime() - eventObj[this.parent.eventFields.startTime].getTime();\n      var td = closest(e.target, 'td');\n\n      if (this.parent.currentView === 'TimelineYear' && !td.classList.contains('e-work-cells')) {\n        return;\n      }\n\n      var dragStart$$1 = this.parent.getDateFromElement(td);\n      var dragEnd = new Date(dragStart$$1.getTime());\n      dragEnd.setMilliseconds(eventDuration);\n\n      if (this.parent.activeViewOptions.group.resources.length > 0) {\n        this.actionObj.groupIndex = parseInt(td.getAttribute('data-group-index'), 10);\n      }\n\n      this.actionObj.start = new Date(dragStart$$1.getTime());\n      this.actionObj.end = new Date(dragEnd.getTime());\n      this.actionObj.clone.style.top = formatUnit(td.offsetParent.offsetTop);\n      this.actionObj.clone.style.left = formatUnit(td.offsetLeft);\n      this.actionObj.clone.style.width = formatUnit(td.offsetWidth);\n      var eventContainer = td;\n      var eventWrapper;\n\n      if (this.parent.activeView.isTimelineView()) {\n        var rowIndex = closest(td, 'tr').rowIndex;\n        eventContainer = this.parent.element.querySelectorAll('.e-appointment-container').item(rowIndex);\n      }\n\n      eventWrapper = eventContainer.querySelector('.' + APPOINTMENT_WRAPPER_CLASS);\n\n      if (!eventWrapper) {\n        eventWrapper = createElement('div', {\n          className: APPOINTMENT_WRAPPER_CLASS\n        });\n        eventContainer.appendChild(eventWrapper);\n      }\n\n      this.appendCloneElement(eventWrapper);\n    }\n  }, {\n    key: \"calculateVerticalTime\",\n    value: function calculateVerticalTime(e) {\n      var _this89 = this;\n\n      if (isNullOrUndefined(this.actionObj.target) || this.actionObj.target && isNullOrUndefined(closest(this.actionObj.target, 'tr')) || !closest(this.actionObj.target, 'td').classList.contains(WORK_CELLS_CLASS) && !closest(this.actionObj.target, 'td').classList.contains(ALLDAY_CELLS_CLASS)) {\n        return;\n      }\n\n      if (this.parent.activeViewOptions.timeScale.enable) {\n        this.swapDragging(e);\n      }\n\n      var dragArea = this.parent.element.querySelector('.' + CONTENT_WRAP_CLASS);\n      var eventObj = extend({}, this.actionObj.event, null, true);\n      var eventStart = eventObj[this.parent.eventFields.startTime];\n      var eventEnd = eventObj[this.parent.eventFields.endTime];\n      var eventDuration = eventEnd.getTime() - eventStart.getTime();\n      var offsetTop = Math.floor(parseInt(this.actionObj.clone.style.top, 10) / this.actionObj.cellHeight) * this.actionObj.cellHeight;\n      offsetTop = offsetTop < 0 ? 0 : offsetTop;\n\n      if (this.scrollEdges.top || this.scrollEdges.bottom) {\n        offsetTop = this.scrollEdges.top ? dragArea.scrollTop - this.heightUptoCursorPoint + this.actionObj.cellHeight + window.pageYOffset : dragArea.scrollTop + dragArea.offsetHeight - this.actionObj.clone.offsetHeight + window.pageYOffset + (this.actionObj.clone.offsetHeight - this.heightUptoCursorPoint);\n        offsetTop = Math.round(offsetTop / this.actionObj.cellHeight) * this.actionObj.cellHeight;\n        this.actionObj.clone.style.top = formatUnit(offsetTop);\n      }\n\n      var rowIndex = this.parent.activeViewOptions.timeScale.enable ? offsetTop / this.actionObj.cellHeight : 0;\n      var heightPerMinute = this.actionObj.cellHeight / this.actionObj.slotInterval;\n      var diffInMinutes = parseInt(this.actionObj.clone.style.top, 10) - offsetTop;\n      var tr;\n\n      if (this.isAllDayDrag) {\n        tr = this.parent.element.querySelector('.' + ALLDAY_ROW_CLASS);\n      } else {\n        var trCollections = [].slice.call(this.parent.getContentTable().querySelectorAll('tr'));\n        tr = trCollections[rowIndex];\n      }\n\n      var index;\n\n      if (closest(this.actionObj.target, 'td').classList.contains(WORK_CELLS_CLASS) || closest(this.actionObj.target, 'td').classList.contains(ALLDAY_CELLS_CLASS)) {\n        index = closest(this.actionObj.target, 'td').cellIndex;\n      }\n\n      var colIndex = isNullOrUndefined(index) ? closest(this.actionObj.clone, 'td').cellIndex : index;\n      this.actionObj.index = colIndex;\n\n      if (isNullOrUndefined(tr)) {\n        return;\n      }\n\n      var td = tr.children[colIndex];\n\n      if (this.parent.activeViewOptions.group.resources.length > 0) {\n        this.actionObj.groupIndex = parseInt(td.getAttribute('data-group-index'), 10);\n      }\n\n      var dragStart$$1;\n      var dragEnd;\n\n      if (this.parent.activeViewOptions.timeScale.enable && !this.isAllDayDrag) {\n        this.appendCloneElement(this.getEventWrapper(colIndex));\n        dragStart$$1 = this.parent.getDateFromElement(td);\n        dragStart$$1.setMinutes(dragStart$$1.getMinutes() + diffInMinutes / heightPerMinute);\n        dragEnd = new Date(dragStart$$1.getTime());\n\n        if (this.actionObj.element.classList.contains(ALLDAY_APPOINTMENT_CLASS)) {\n          dragEnd.setMinutes(dragEnd.getMinutes() + this.actionObj.slotInterval);\n        } else {\n          dragEnd.setMilliseconds(eventDuration);\n        }\n      } else {\n        dragStart$$1 = this.parent.getDateFromElement(td);\n        dragStart$$1.setDate(dragStart$$1.getDate() - this.daysVariation);\n        dragStart$$1.setHours(eventStart.getHours(), eventStart.getMinutes(), eventStart.getSeconds());\n        dragEnd = new Date(dragStart$$1.getTime());\n        dragEnd.setMilliseconds(eventDuration);\n\n        if (!this.actionObj.element.classList.contains(ALLDAY_APPOINTMENT_CLASS) && this.actionObj.clone.classList.contains(ALLDAY_APPOINTMENT_CLASS)) {\n          dragEnd = addDays(resetTime(dragEnd), 1);\n        }\n\n        this.updateAllDayEvents(dragStart$$1, dragEnd, this.parent.activeViewOptions.group.byDate ? colIndex : undefined);\n      }\n\n      this.actionObj.start = new Date(+dragStart$$1);\n      this.actionObj.end = new Date(+dragEnd);\n      var event = this.getUpdatedEvent(this.actionObj.start, this.actionObj.end, this.actionObj.event);\n      var dynamicWrappers = [].slice.call(this.parent.element.querySelectorAll('.e-dynamic-clone'));\n\n      var _iterator116 = _createForOfIteratorHelper(dynamicWrappers),\n          _step116;\n\n      try {\n        for (_iterator116.s(); !(_step116 = _iterator116.n()).done;) {\n          var _wrapper2 = _step116.value;\n          remove(_wrapper2);\n        }\n      } catch (err) {\n        _iterator116.e(err);\n      } finally {\n        _iterator116.f();\n      }\n\n      if (this.multiData.length > 0) {\n        if (this.isAllDayTarget && this.isAllDayDrag && !isNullOrUndefined(this.actionObj.isAllDay) && !this.actionObj.isAllDay) {\n          var targetCellTime = parseInt(closest(this.actionObj.target, 'td').getAttribute('data-date'), 10);\n          this.multiData.forEach(function (data) {\n            _this89.swagData.push(extend({}, data, null, true));\n\n            if (data[_this89.parent.eventFields.isAllDay]) {\n              data[_this89.parent.eventFields.startTime] = new Date(data[_this89.parent.eventFields.startTime].getTime() + (targetCellTime - _this89.startTime));\n              var startTime = new Date(data[_this89.parent.eventFields.startTime]);\n              var endTime = new Date(startTime.setMinutes(startTime.getMinutes() + _this89.actionObj.slotInterval));\n              data[_this89.parent.eventFields.endTime] = endTime;\n              data[_this89.parent.eventFields.isAllDay] = false;\n            }\n          });\n          this.startTime = targetCellTime;\n        }\n\n        if (this.isAllDayTarget && this.isAllDayDrag && !isNullOrUndefined(this.actionObj.isAllDay) && this.actionObj.isAllDay && this.swagData.length > 0) {\n          this.multiData = this.swagData;\n          this.swagData = [];\n\n          var _eventObj2 = extend({}, this.actionObj.event, null, true);\n\n          this.startTime = _eventObj2[this.parent.eventFields.startTime].getTime();\n        }\n\n        var startTimeDiff = event[this.parent.eventFields.startTime].getTime() - this.startTime;\n\n        for (var _index8 = 0; _index8 < this.multiData.length; _index8++) {\n          this.updatedData[_index8] = this.updateMultipleData(this.multiData[_index8], startTimeDiff);\n\n          var _dayIndex4 = this.getDayIndex(this.updatedData[_index8]);\n\n          if (_dayIndex4 >= 0) {\n            var wrapper = this.getEventWrapper(_dayIndex4, this.updatedData[_index8][this.parent.eventFields.isAllDay]);\n            this.appendCloneElement(wrapper, this.actionObj.cloneElement[_index8]);\n            this.updateEventHeight(this.updatedData[_index8], _index8, _dayIndex4);\n          } else {\n            if (!isNullOrUndefined(this.actionObj.cloneElement[_index8].parentNode)) {\n              remove(this.actionObj.cloneElement[_index8]);\n            }\n          }\n        }\n      } else {\n        this.updateEventHeight(event);\n      }\n\n      this.updateTimePosition(this.actionObj.start, this.updatedData);\n    }\n  }, {\n    key: \"splitEvent\",\n    value: function splitEvent(event) {\n      var eventFields = this.parent.eventFields;\n      var eventData = [];\n      var startTime = event[eventFields.startTime];\n      var endTime = event[eventFields.endTime];\n\n      if (resetTime(new Date(startTime.getTime())) < resetTime(new Date(endTime.getTime()))) {\n        var startReferenceDate = resetTime(new Date(startTime.getTime()));\n        var endReferenceDate = new Date(startReferenceDate.getTime());\n\n        for (var i = 0; startReferenceDate < new Date(endTime.getTime()); i++) {\n          endReferenceDate = new Date(endReferenceDate.setDate(startReferenceDate.getDate() + 1));\n          var eventObj = extend({}, event, null, true);\n          eventObj[eventFields.startTime] = new Date(startReferenceDate);\n          eventObj[eventFields.endTime] = new Date(endReferenceDate);\n          startReferenceDate = new Date(startReferenceDate.setDate(startReferenceDate.getDate() + 1));\n          eventData.push(eventObj);\n        }\n\n        var index = eventData.length - 1;\n        eventData[0][eventFields.startTime] = startTime;\n        eventData[index][eventFields.endTime] = endTime;\n      } else {\n        eventData.push(event);\n      }\n\n      return eventData;\n    }\n  }, {\n    key: \"updateMultipleData\",\n    value: function updateMultipleData(data, timeDifference) {\n      var eventObj = extend({}, data, null, true);\n\n      if (!isNullOrUndefined(this.actionObj.isAllDay) && this.parent.activeViewOptions.timeScale.enable && (this.isAllDayTarget && eventObj[this.parent.eventFields.isAllDay] || !this.isAllDayTarget && !eventObj[this.parent.eventFields.isAllDay])) {\n        eventObj[this.parent.eventFields.isAllDay] = this.actionObj.isAllDay;\n      }\n\n      var endTimeDiff = eventObj[this.parent.eventFields.endTime].getTime() - eventObj[this.parent.eventFields.startTime].getTime();\n\n      if (eventObj[this.parent.eventFields.isAllDay]) {\n        var differInDays = Math.ceil(timeDifference / (1000 * 3600 * 24));\n        var day = Math.ceil(endTimeDiff / (1000 * 3600 * 24));\n        var startTime = new Date(eventObj[this.parent.eventFields.startTime]);\n        eventObj[this.parent.eventFields.startTime] = resetTime(new Date(startTime.setDate(startTime.getDate() + differInDays)));\n        eventObj[this.parent.eventFields.endTime] = addDays(eventObj[this.parent.eventFields.startTime], day);\n      } else {\n        eventObj[this.parent.eventFields.startTime] = new Date(eventObj[this.parent.eventFields.startTime].getTime() + timeDifference);\n        eventObj[this.parent.eventFields.endTime] = new Date(eventObj[this.parent.eventFields.startTime].getTime() + endTimeDiff);\n      }\n\n      return eventObj;\n    }\n  }, {\n    key: \"getDayIndex\",\n    value: function getDayIndex(event) {\n      var eventObj = extend({}, event, null, true);\n      var startTime = resetTime(eventObj[this.parent.eventFields.startTime]).getTime();\n      var query = '';\n      var wrapper = DAY_WRAPPER_CLASS;\n\n      if (this.parent.activeViewOptions.timeScale.enable && eventObj[this.parent.eventFields.isAllDay]) {\n        wrapper = ALLDAY_APPOINTMENT_WRAPPER_CLASS;\n      } else {\n        wrapper = WORK_CELLS_CLASS;\n      }\n\n      query = '.' + wrapper + '[data-date=\"' + startTime + '\"]';\n\n      if (this.parent.activeViewOptions.group.resources.length > 0) {\n        query = query + '[data-group-index=\"' + this.actionObj.groupIndex + '\"]';\n      }\n\n      this.targetTd = this.parent.element.querySelector(query);\n\n      if (isNullOrUndefined(this.targetTd)) {\n        return -1;\n      }\n\n      return this.targetTd.cellIndex;\n    }\n  }, {\n    key: \"updateEventHeight\",\n    value: function updateEventHeight(event, index, colIndex) {\n      this.verticalEvent.initializeValues();\n      var datesCount = 0;\n\n      if (!this.parent.uiStateValues.isGroupAdaptive) {\n        for (var i = 0; i < this.actionObj.groupIndex; i++) {\n          datesCount = datesCount + this.verticalEvent.dateRender[i].length;\n        }\n      }\n\n      var indexGroup = this.parent.uiStateValues.isGroupAdaptive ? datesCount : this.actionObj.groupIndex;\n      var target = this.parent.activeViewOptions.group.byDate && !isNullOrUndefined(this.parent.getDateFromElement(this.actionObj.target)) ? true : false;\n\n      if (target || !this.parent.activeViewOptions.group.byDate) {\n        var dynamicIndex = -1;\n\n        var _dayIndex5 = !this.parent.activeViewOptions.group.byDate ? isNullOrUndefined(index) ? this.actionObj.index - datesCount : colIndex - datesCount : this.parent.getIndexOfDate(this.verticalEvent.dateRender[indexGroup], resetTime( // eslint-disable-next-line max-len\n        this.parent.getDateFromElement(isNullOrUndefined(index) ? this.actionObj.target : this.targetTd)));\n\n        var splitEvents = this.splitEvent(event);\n        var events = this.parent.eventBase.isAllDayAppointment(event) || splitEvents.length > 2 || this.parent.eventSettings.spannedEventPlacement !== 'TimeSlot' ? [event] : splitEvents;\n\n        for (var _i17 = 0; _i17 < events.length; _i17++) {\n          if (_i17 > 0) {\n            var filterQuery = \".e-day-wrapper[data-date=\\\"\".concat(resetTime(events[_i17][this.parent.eventFields.startTime]).getTime(), \"\\\"]\");\n\n            if (this.parent.activeViewOptions.group.resources.length > 0) {\n              filterQuery = filterQuery.concat('[data-group-index = \"' + this.actionObj.groupIndex + '\"]');\n            }\n\n            var appWrap = this.parent.element.querySelector(filterQuery);\n\n            if (appWrap) {\n              _dayIndex5 = _dayIndex5 + 1;\n              dynamicIndex = appWrap.cellIndex;\n            } else {\n              _dayIndex5 = -1;\n            }\n          }\n\n          if (_dayIndex5 >= 0) {\n            var record = this.verticalEvent.isSpannedEvent(events[_i17], _dayIndex5, indexGroup);\n            var eStart = record[this.verticalEvent.fields.startTime];\n            var eEnd = record[this.verticalEvent.fields.endTime];\n            var appHeight = this.parent.activeViewOptions.timeScale.enable ? this.verticalEvent.getHeight(eStart, eEnd) : this.actionObj.element.offsetHeight;\n            var topValue = this.parent.activeViewOptions.timeScale.enable ? this.verticalEvent.getTopValue(eStart, _dayIndex5, indexGroup) : this.actionObj.element.offsetTop;\n\n            if (isNullOrUndefined(index)) {\n              if (_i17 === 0) {\n                this.actionObj.clone.style.top = formatUnit(topValue);\n                this.actionObj.clone.style.height = formatUnit(appHeight);\n              } else {\n                this.renderSpannedEvents(record, dynamicIndex, topValue, appHeight);\n              }\n            } else {\n              var appWidth = this.actionObj.cellWidth;\n\n              if (event[this.parent.eventFields.isAllDay]) {\n                topValue = this.parent.element.querySelector('.' + ALLDAY_ROW_CLASS).offsetTop;\n                appHeight = this.getAllDayEventHeight();\n                var timeDiff = event[this.parent.eventFields.endTime].getTime() - event[this.parent.eventFields.startTime].getTime();\n                var allDayDifference = Math.ceil(timeDiff / (1000 * 3600 * 24));\n\n                if (allDayDifference >= 0) {\n                  appWidth = allDayDifference * this.actionObj.cellWidth;\n                }\n              }\n\n              if (this.actionObj.cloneElement[index]) {\n                if (_i17 === 0) {\n                  this.actionObj.cloneElement[index].style.top = formatUnit(topValue);\n                  this.actionObj.cloneElement[index].style.height = formatUnit(appHeight);\n                  this.actionObj.cloneElement[index].style.width = formatUnit(appWidth);\n                  this.actionObj.cloneElement[index].style.left = formatUnit(0);\n                } else {\n                  this.renderSpannedEvents(record, dynamicIndex, topValue, appHeight);\n                }\n              }\n            }\n          }\n        }\n      }\n    }\n  }, {\n    key: \"renderSpannedEvents\",\n    value: function renderSpannedEvents(record, index, top, height) {\n      var startTime = record[this.parent.eventFields.startTime].getTime();\n      var endTime = record[this.parent.eventFields.endTime].getTime();\n\n      if (startTime !== endTime) {\n        var appointmentElement = this.verticalEvent.createAppointmentElement(record, false, record.isSpanned, this.actionObj.groupIndex);\n        addClass([appointmentElement], [CLONE_ELEMENT_CLASS, 'e-dynamic-clone']);\n        setStyleAttribute(appointmentElement, {\n          'width': '100%',\n          'height': height + 'px',\n          'top': top + 'px',\n          'border': '0px'\n        });\n        var appointmentWrap = [].slice.call(this.parent.element.querySelectorAll('.' + APPOINTMENT_WRAPPER_CLASS));\n        appointmentWrap[index].appendChild(appointmentElement);\n      }\n    }\n  }, {\n    key: \"getRenderedDates\",\n    value: function getRenderedDates() {\n      var _this$parent$eventBas,\n          _this90 = this;\n\n      var renderDates = this.parent.activeView.renderDates;\n\n      (_this$parent$eventBas = this.parent.eventBase.slots).push.apply(_this$parent$eventBas, _toConsumableArray(this.parent.activeView.renderDates.map(function (date) {\n        return +date;\n      })));\n\n      if (this.parent.activeViewOptions.group.resources.length > 0) {\n        var _this$parent$eventBas2;\n\n        this.parent.eventBase.slots = [];\n        var resources = this.parent.resourceBase.lastResourceLevel.filter(function (res) {\n          return res.groupIndex === _this90.actionObj.groupIndex;\n        });\n        renderDates = resources[0].renderDates;\n\n        (_this$parent$eventBas2 = this.parent.eventBase.slots).push.apply(_this$parent$eventBas2, _toConsumableArray(renderDates.map(function (date) {\n          return +date;\n        })));\n      }\n\n      return renderDates;\n    }\n  }, {\n    key: \"updateAllDayEvents\",\n    value: function updateAllDayEvents(startDate, endDate, colIndex) {\n      this.parent.eventBase.slots = [];\n      var event = this.getUpdatedEvent(startDate, endDate, this.actionObj.event);\n      var renderDates = this.getRenderedDates();\n      var events = this.parent.eventBase.splitEvent(event, renderDates);\n      var query = \".e-all-day-cells[data-date=\\\"\".concat(events[0][this.parent.eventFields.startTime].getTime(), \"\\\"]\");\n\n      if (this.parent.activeViewOptions.group.resources.length > 0) {\n        query = query.concat('[data-group-index = \"' + this.actionObj.groupIndex + '\"]');\n      }\n\n      var cell = [].slice.call(this.parent.element.querySelectorAll(query));\n\n      if (cell.length > 0 || !isNullOrUndefined(colIndex)) {\n        var cellIndex = !isNullOrUndefined(colIndex) ? colIndex : cell[0].cellIndex;\n        this.appendCloneElement(this.getEventWrapper(cellIndex)); // eslint-disable-next-line max-len\n\n        this.actionObj.clone.style.width = formatUnit(events[0].data.count * this.actionObj.cellWidth);\n      }\n    } // eslint-disable-next-line @typescript-eslint/no-unused-vars\n\n  }, {\n    key: \"swapDragging\",\n    value: function swapDragging(e) {\n      var colIndex = closest(this.actionObj.target, 'td').cellIndex;\n\n      if (closest(this.actionObj.target, '.' + DATE_HEADER_WRAP_CLASS) && !closest(this.actionObj.clone, '.' + ALLDAY_APPOINTMENT_WRAPPER_CLASS)) {\n        addClass([this.actionObj.clone], ALLDAY_APPOINTMENT_CLASS);\n        this.appendCloneElement(this.getEventWrapper(colIndex));\n        this.actionObj.isAllDay = true;\n        var eventHeight = this.getAllDayEventHeight();\n        var allDayElement = [].slice.call(this.parent.element.querySelectorAll('.' + ALLDAY_CELLS_CLASS + ':first-child'));\n\n        if (allDayElement[0].offsetHeight < eventHeight) {\n          var _iterator117 = _createForOfIteratorHelper(allDayElement),\n              _step117;\n\n          try {\n            for (_iterator117.s(); !(_step117 = _iterator117.n()).done;) {\n              var element = _step117.value;\n              element.style.height = (eventHeight + 2) / 12 + 'em';\n            }\n          } catch (err) {\n            _iterator117.e(err);\n          } finally {\n            _iterator117.f();\n          }\n        }\n\n        setStyleAttribute(this.actionObj.clone, {\n          width: formatUnit(this.actionObj.cellWidth),\n          height: formatUnit(eventHeight),\n          top: formatUnit(this.parent.element.querySelector('.' + ALLDAY_ROW_CLASS).offsetTop)\n        });\n      }\n\n      if (closest(this.actionObj.target, '.' + WORK_CELLS_CLASS) && !closest(this.actionObj.clone, '.' + DAY_WRAPPER_CLASS)) {\n        removeClass([this.actionObj.clone], ALLDAY_APPOINTMENT_CLASS);\n        this.appendCloneElement(this.getEventWrapper(colIndex));\n        this.actionObj.isAllDay = false; // eslint-disable-next-line max-len\n\n        var height = this.actionObj.element.offsetHeight === 0 ? this.actionObj.height : this.actionObj.element.offsetHeight;\n        setStyleAttribute(this.actionObj.clone, {\n          left: formatUnit(0),\n          height: formatUnit(height),\n          width: formatUnit(this.actionObj.cellWidth)\n        });\n      }\n    }\n  }, {\n    key: \"calculateVerticalDate\",\n    value: function calculateVerticalDate(e) {\n      if (isNullOrUndefined(e.target) || e.target && isNullOrUndefined(closest(e.target, 'tr')) || e.target && e.target.tagName === 'DIV') {\n        return;\n      }\n\n      var eventObj = extend({}, this.actionObj.event, null, true);\n\n      if (isNullOrUndefined(this.parent.eventDragArea)) {\n        this.removeCloneElement();\n      }\n\n      var eventDuration = eventObj[this.parent.eventFields.endTime].getTime() - eventObj[this.parent.eventFields.startTime].getTime();\n      var td = closest(this.actionObj.target, 'td');\n\n      if (!isNullOrUndefined(td)) {\n        var tr = td.parentElement;\n        this.actionObj.index = tr.rowIndex * tr.children.length + td.cellIndex;\n        var workCells = [].slice.call(this.parent.element.querySelectorAll('.' + WORK_CELLS_CLASS));\n        td = workCells[this.actionObj.index];\n        var currentDate = this.parent.getDateFromElement(td);\n\n        if (!isNullOrUndefined(currentDate)) {\n          if (this.parent.activeViewOptions.group.resources.length > 0) {\n            this.actionObj.groupIndex = parseInt(td.getAttribute('data-group-index'), 10);\n          }\n\n          var timeString = new Date(currentDate.setDate(currentDate.getDate() - this.daysVariation));\n          var dragStart$$1 = new Date(timeString.getTime());\n          var dragEnd = new Date(dragStart$$1.getTime());\n          var startTimeDiff = eventObj[this.parent.eventFields.startTime].getTime() - resetTime(new Date(+eventObj[this.parent.eventFields.startTime])).getTime();\n          dragStart$$1 = new Date(dragStart$$1.getTime() + startTimeDiff);\n          dragEnd = new Date(dragStart$$1.getTime() + eventDuration);\n          this.actionObj.start = new Date(dragStart$$1.getTime());\n          this.actionObj.end = new Date(dragEnd.getTime());\n        }\n      }\n\n      var event = this.getUpdatedEvent(this.actionObj.start, this.actionObj.end, this.actionObj.event);\n      var eventWrappers = [].slice.call(this.parent.element.querySelectorAll('.' + CLONE_ELEMENT_CLASS));\n\n      var _iterator118 = _createForOfIteratorHelper(eventWrappers),\n          _step118;\n\n      try {\n        for (_iterator118.s(); !(_step118 = _iterator118.n()).done;) {\n          var wrapper = _step118.value;\n          remove(wrapper);\n        }\n      } catch (err) {\n        _iterator118.e(err);\n      } finally {\n        _iterator118.f();\n      }\n\n      if (this.multiData && this.multiData.length > 0) {\n        var startTime = resetTime(new Date(event[this.parent.eventFields.startTime]));\n\n        var _startTimeDiff = startTime.getTime() - this.startTime;\n\n        if (this.parent.currentView === 'TimelineYear' && this.parent.group.resources.length > 0) {\n          _startTimeDiff = (startTime.getFullYear() - new Date(this.startTime).getFullYear()) * 12;\n          _startTimeDiff -= new Date(this.startTime).getMonth();\n          _startTimeDiff += startTime.getMonth();\n        }\n\n        for (var index = 0; index < this.multiData.length; index++) {\n          this.updatedData[index] = this.updateMultipleVerticalDate(this.multiData[index], _startTimeDiff);\n\n          if (this.parent.currentView === 'TimelineYear') {\n            this.dynamicYearlyEventsRendering(this.updatedData[index]);\n          } else {\n            this.dynamicEventsRendering(this.updatedData[index]);\n          }\n        }\n      } else {\n        if (this.parent.currentView === 'TimelineYear') {\n          this.dynamicYearlyEventsRendering(event);\n        } else {\n          this.dynamicEventsRendering(event);\n        }\n      }\n    }\n  }, {\n    key: \"updateMultipleVerticalDate\",\n    value: function updateMultipleVerticalDate(data, timeDifference) {\n      var eventObj = extend({}, data, null, true);\n      var eventDuration = eventObj[this.parent.eventFields.endTime].getTime() - eventObj[this.parent.eventFields.startTime].getTime();\n      var startDate = new Date(eventObj[this.parent.eventFields.startTime]);\n\n      if (this.parent.currentView === 'TimelineYear' && this.parent.group.resources.length > 0) {\n        eventObj[this.parent.eventFields.startTime] = new Date(startDate.setMonth(startDate.getMonth() + timeDifference));\n      } else {\n        var differInDays = Math.ceil(timeDifference / MS_PER_DAY);\n        eventObj[this.parent.eventFields.startTime] = new Date(startDate.setDate(startDate.getDate() + differInDays));\n      }\n\n      eventObj[this.parent.eventFields.endTime] = new Date(eventObj[this.parent.eventFields.startTime].getTime() + eventDuration);\n      return eventObj;\n    }\n  }, {\n    key: \"calculateTimelineTime\",\n    value: function calculateTimelineTime(e) {\n      var eventObj = extend({}, this.actionObj.event, null, true);\n      var eventDuration = eventObj[this.parent.eventFields.endTime].getTime() - eventObj[this.parent.eventFields.startTime].getTime();\n      var offsetLeft = this.parent.enableRtl ? Math.abs(this.actionObj.clone.offsetLeft) - this.actionObj.clone.offsetWidth : parseInt(this.actionObj.clone.style.left, 10);\n      offsetLeft = Math.floor(offsetLeft / this.actionObj.cellWidth) * this.actionObj.cellWidth;\n      var rightOffset;\n\n      if (this.parent.enableRtl) {\n        rightOffset = Math.abs(parseInt(this.actionObj.clone.style.right, 10));\n        this.actionObj.clone.style.right = formatUnit(rightOffset);\n      }\n\n      offsetLeft = this.getOffsetValue(offsetLeft, rightOffset);\n      var colIndex = this.getColumnIndex(offsetLeft);\n      var dragArea = this.parent.element.querySelector('.' + CONTENT_WRAP_CLASS);\n      var contentWrapRight = dragArea.getBoundingClientRect().right;\n      var cursorDrag = this.parent.activeView.isTimelineView() && !this.parent.enableRtl && this.actionObj.pageX > this.actionObj.clone.getBoundingClientRect().right && !this.isMorePopupOpened && !(this.actionObj.pageX > contentWrapRight);\n      var leftVal = this.parent.eventDragArea ? dragArea.scrollLeft - dragArea.offsetLeft : 0;\n\n      if ((this.isCursorAhead || cursorDrag) && !this.isStepDragging) {\n        this.isCursorAhead = true;\n      }\n\n      var cloneIndex = Math.floor((this.actionObj.pageX - this.actionObj.clone.getBoundingClientRect().left + leftVal) / this.actionObj.cellWidth);\n\n      if (this.parent.enableRtl) {\n        cloneIndex = Math.abs(Math.floor((this.actionObj.pageX - this.actionObj.clone.getBoundingClientRect().right) / this.actionObj.cellWidth)) - 1;\n      }\n\n      if (this.cursorPointIndex < 0) {\n        this.cursorIndex(e, eventObj, offsetLeft, cloneIndex);\n      }\n\n      var tr = this.parent.getContentTable().querySelector('tr');\n      var index = this.getCursorCurrentIndex(colIndex, cloneIndex, tr);\n      index = index < 0 ? 0 : index;\n      var eventStart = this.isHeaderRows ? new Date(this.timelineEventModule.dateRender[index].getTime()) : this.parent.getDateFromElement(tr.children[index]);\n\n      if (this.isStepDragging) {\n        var widthDiff = this.getWidthDiff(tr, index);\n\n        if (widthDiff !== 0) {\n          var timeDiff = Math.round(widthDiff / this.widthPerMinute);\n          eventStart.setMinutes(eventStart.getMinutes() + timeDiff * this.actionObj.interval);\n\n          if (this.isCursorAhead || cursorDrag) {\n            eventStart.setMilliseconds(-eventDuration);\n          } else {\n            eventStart.setMinutes(eventStart.getMinutes() - this.minDiff);\n          }\n        } else {\n          eventStart = this.actionObj.start;\n        }\n      } else {\n        if (this.isCursorAhead || cursorDrag) {\n          eventStart.setMinutes(eventStart.getMinutes() + (this.isTimelineDayProcess ? MINUTES_PER_DAY : this.actionObj.slotInterval));\n          eventStart.setMilliseconds(-eventDuration);\n        } else {\n          eventStart.setMinutes(eventStart.getMinutes() - this.cursorPointIndex * (this.isTimelineDayProcess ? MINUTES_PER_DAY : this.actionObj.slotInterval));\n        }\n      }\n\n      eventStart = this.calculateIntervalTime(eventStart);\n\n      if (this.isTimelineDayProcess) {\n        var eventSrt = eventObj[this.parent.eventFields.startTime];\n        eventStart.setHours(eventSrt.getHours(), eventSrt.getMinutes(), eventSrt.getSeconds());\n      }\n\n      if (this.parent.eventDragArea) {\n        var targetDate = this.parent.getDateFromElement(e.target);\n\n        if (!isNullOrUndefined(targetDate)) {\n          eventStart = targetDate;\n        }\n      }\n\n      var eventEnd = new Date(eventStart.getTime());\n      eventEnd.setMilliseconds(eventDuration);\n      var eventsData = [this.getUpdatedEvent(eventStart, eventEnd, this.actionObj.event)];\n\n      if (this.multiData.length > 0) {\n        var startTimeDiff = eventsData[0][this.parent.eventFields.startTime].getTime() - this.startTime;\n\n        for (var i = 0; i < this.multiData.length; i++) {\n          this.updatedData[i] = this.updateMultipleData(this.multiData[i], startTimeDiff);\n        }\n\n        eventsData = this.updatedData;\n      }\n\n      for (var dataIndex = 0; dataIndex < eventsData.length; dataIndex++) {\n        var events = this.timelineEventModule.splitEvent(eventsData[dataIndex], this.timelineEventModule.dateRender);\n        var eventData = events[0].data;\n        var startTime = this.timelineEventModule.getStartTime(events[0], eventData);\n        var endTime = this.timelineEventModule.getEndTime(events[0], eventData); // eslint-disable-next-line max-len\n\n        var width = this.timelineEventModule.getEventWidth(startTime, endTime, eventObj[this.parent.eventFields.isAllDay], eventData.count); // eslint-disable-next-line max-len\n\n        var day = this.parent.getIndexOfDate(this.timelineEventModule.dateRender, resetTime(new Date(startTime.getTime())));\n        day = day < 0 ? 0 : day;\n        var left = this.timelineEventModule.getPosition(startTime, endTime, eventObj[this.parent.eventFields.isAllDay], day);\n        var cloneElement = this.multiData.length > 0 ? this.actionObj.cloneElement[dataIndex] : this.actionObj.clone;\n\n        if (this.parent.enableRtl) {\n          cloneElement.style.right = formatUnit(left);\n        } else {\n          cloneElement.style.left = formatUnit(left);\n        }\n\n        if (!this.isMorePopupOpened) {\n          cloneElement.style.width = formatUnit(width);\n        }\n\n        if (this.parent.activeViewOptions.group.resources.length > 0) {\n          this.calculateResourceGroupingPosition(e, cloneElement);\n        }\n\n        this.actionObj.start = new Date(eventStart.getTime());\n        this.actionObj.end = new Date(eventEnd.getTime());\n        this.updateTimePosition(this.actionObj.start, this.updatedData);\n      }\n    }\n  }, {\n    key: \"getOffsetValue\",\n    value: function getOffsetValue(offsetLeft, rightOffset) {\n      if (this.scrollEdges.left || this.scrollEdges.right) {\n        var viewEle = this.parent.element.querySelector('.' + CONTENT_WRAP_CLASS);\n\n        if (this.parent.enableRtl) {\n          rightOffset = viewEle.offsetWidth - viewEle.scrollLeft;\n\n          if (this.scrollEdges.right) {\n            rightOffset = rightOffset - viewEle.offsetWidth + this.actionObj.clone.offsetWidth - (this.actionObj.clone.offsetWidth - this.widthUptoCursorPoint);\n          } else {\n            rightOffset = rightOffset + this.widthUptoCursorPoint;\n\n            if (rightOffset - this.widthUptoCursorPoint >= viewEle.scrollWidth) {\n              this.actionObj.clone.style.width = formatUnit(this.actionObj.clone.offsetWidth - this.widthUptoCursorPoint + this.actionObj.cellWidth);\n              rightOffset = viewEle.scrollLeft - viewEle.scrollWidth;\n            }\n          }\n\n          this.actionObj.clone.style.left = formatUnit(rightOffset);\n        } else {\n          if (this.scrollEdges.left) {\n            offsetLeft = viewEle.scrollLeft - this.widthUptoCursorPoint + this.actionObj.cellWidth;\n\n            if (viewEle.scrollLeft + viewEle.offsetWidth >= viewEle.offsetWidth) {\n              viewEle.scrollLeft = viewEle.scrollLeft - 1;\n            } else if (this.actionObj.clone.offsetLeft === 0) {\n              offsetLeft = viewEle.scrollLeft;\n            }\n          } else {\n            offsetLeft = viewEle.scrollLeft + viewEle.offsetWidth - this.actionObj.clone.offsetWidth + (this.actionObj.clone.offsetWidth - this.widthUptoCursorPoint);\n          }\n\n          offsetLeft = offsetLeft < 0 ? 0 : offsetLeft;\n          this.actionObj.clone.style.left = formatUnit(offsetLeft);\n        }\n      }\n\n      return offsetLeft;\n    }\n  }, {\n    key: \"getWidthDiff\",\n    value: function getWidthDiff(tr, index) {\n      var pages = this.scrollArgs.element.getBoundingClientRect();\n\n      if (pages.left <= this.actionObj.pageX && pages.right >= this.actionObj.pageX) {\n        var targetLeft = tr.children[index].offsetLeft;\n        var pageX = this.actionObj.pageX - pages.left;\n\n        if (this.parent.enableRtl) {\n          return targetLeft + this.actionObj.cellWidth - (this.scrollArgs.element.scrollLeft + pageX);\n        } else {\n          return this.scrollArgs.element.scrollLeft + pageX - targetLeft;\n        }\n      }\n\n      return 0;\n    }\n  }, {\n    key: \"getColumnIndex\",\n    value: function getColumnIndex(offsetLeft) {\n      var index = Math.floor(offsetLeft / this.actionObj.cellWidth);\n\n      if (this.isHeaderRows) {\n        return index;\n      }\n\n      return this.getIndex(index);\n    }\n  }, {\n    key: \"getCursorCurrentIndex\",\n    value: function getCursorCurrentIndex(colIndex, cloneIndex, tr) {\n      var index = colIndex + cloneIndex;\n\n      if (this.isHeaderRows) {\n        var dateLength = Math.floor(tr.offsetWidth / this.actionObj.cellWidth);\n        return index > dateLength - 1 ? dateLength - 1 : index;\n      }\n\n      return index > tr.children.length - 1 ? tr.children.length - 1 : index;\n    }\n  }, {\n    key: \"cursorIndex\",\n    value: function cursorIndex(e, event, left, index) {\n      var td = closest(e.target, '.e-work-cells');\n\n      if (!isNullOrUndefined(td) && !this.isMorePopupOpened) {\n        var targetDate = this.parent.getDateFromElement(td);\n\n        if (this.isHeaderRows) {\n          var currentIndex = Math.floor(left / this.actionObj.cellWidth);\n          targetDate = new Date(this.timelineEventModule.dateRender[currentIndex + index].getTime());\n        }\n\n        var timeDiff = targetDate.getTime() - event[this.parent.eventFields.startTime].getTime();\n\n        if (this.isTimelineDayProcess) {\n          this.cursorPointIndex = Math.abs(Math.ceil(timeDiff / MS_PER_DAY));\n        } else {\n          var widthDiff = Math.floor(timeDiff / MS_PER_MINUTE / (this.actionObj.slotInterval / this.actionObj.cellWidth));\n          this.cursorPointIndex = Math.floor(widthDiff / this.actionObj.cellWidth);\n          this.cursorPointIndex = this.cursorPointIndex < 0 ? 0 : this.cursorPointIndex;\n        }\n      } else {\n        this.cursorPointIndex = 0;\n      }\n    }\n  }, {\n    key: \"calculateResourceGroupingPosition\",\n    value: function calculateResourceGroupingPosition(e, cloneElement) {\n      var dragArea = this.parent.element.querySelector('.' + CONTENT_WRAP_CLASS);\n      var trCollection = [].slice.call(this.parent.element.querySelectorAll('.e-content-wrap .e-content-table tr:not(.e-hidden)'));\n      var translateY = getTranslateY(dragArea.querySelector('table'));\n      translateY = isNullOrUndefined(translateY) ? 0 : translateY;\n      var rowHeight = this.parent.rowAutoHeight ? ~~(dragArea.querySelector('table').offsetHeight / trCollection.length) : this.actionObj.cellHeight;\n      var rowIndex = Math.floor(Math.floor(this.actionObj.Y + (dragArea.scrollTop - translateY - (window.scrollY || window.pageYOffset)) - dragArea.getBoundingClientRect().top) / rowHeight);\n      rowIndex = rowIndex < 0 ? 0 : rowIndex > trCollection.length - 1 ? trCollection.length - 1 : rowIndex;\n      this.actionObj.index = rowIndex;\n      var eventContainer = this.parent.element.querySelectorAll('.e-appointment-container:not(.e-hidden)').item(rowIndex);\n      var eventWrapper = eventContainer.querySelector('.' + APPOINTMENT_WRAPPER_CLASS);\n\n      if (!eventWrapper) {\n        eventWrapper = createElement('div', {\n          className: APPOINTMENT_WRAPPER_CLASS\n        });\n        eventContainer.appendChild(eventWrapper);\n      }\n\n      this.appendCloneElement(eventWrapper, cloneElement);\n      var td = closest(this.actionObj.target, 'td');\n      this.actionObj.groupIndex = td && !isNaN(parseInt(td.getAttribute('data-group-index'), 10)) ? parseInt(td.getAttribute('data-group-index'), 10) : this.actionObj.groupIndex;\n      var top = trCollection[rowIndex].getBoundingClientRect().height * rowIndex;\n\n      if (this.parent.rowAutoHeight) {\n        var cursorElement = this.getCursorElement(e);\n\n        if (cursorElement) {\n          top = cursorElement.classList.contains(WORK_CELLS_CLASS) ? cursorElement.offsetTop : cursorElement.offsetParent.classList.contains(APPOINTMENT_CLASS) ? cursorElement.offsetParent.offsetTop : top;\n        }\n      }\n\n      cloneElement.style.top = formatUnit(top);\n    }\n  }, {\n    key: \"appendCloneElement\",\n    value: function appendCloneElement(element) {\n      var cloneElement = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : null;\n      cloneElement = isNullOrUndefined(cloneElement) ? this.actionObj.clone : cloneElement;\n      var dragElement = document.querySelector(this.parent.eventDragArea);\n\n      if (this.parent.eventDragArea && dragElement) {\n        dragElement.appendChild(cloneElement);\n      } else {\n        element.appendChild(cloneElement);\n      }\n    }\n  }, {\n    key: \"getEventWrapper\",\n    value: function getEventWrapper(index, isAllDayDrag) {\n      var eventWrapper;\n\n      if (isNullOrUndefined(isAllDayDrag)) {\n        isAllDayDrag = this.actionObj.clone.classList.contains(ALLDAY_APPOINTMENT_CLASS);\n      }\n\n      if (this.parent.activeViewOptions.timeScale.enable) {\n        var wrapperClass = isAllDayDrag ? '.' + ALLDAY_APPOINTMENT_WRAPPER_CLASS : '.' + APPOINTMENT_WRAPPER_CLASS;\n        eventWrapper = this.parent.element.querySelectorAll(wrapperClass).item(index);\n      } else {\n        var targetWrapper = this.parent.element.querySelectorAll('.' + WORK_CELLS_CLASS).item(index);\n        eventWrapper = targetWrapper.querySelector('.' + APPOINTMENT_WRAPPER_CLASS);\n\n        if (!eventWrapper) {\n          eventWrapper = createElement('div', {\n            className: APPOINTMENT_WRAPPER_CLASS\n          });\n          targetWrapper.appendChild(eventWrapper);\n        }\n      }\n\n      return eventWrapper;\n    }\n  }, {\n    key: \"getAllDayEventHeight\",\n    value: function getAllDayEventHeight() {\n      var eventWrapper = createElement('div', {\n        className: APPOINTMENT_CLASS\n      });\n      this.parent.element.querySelector('.' + ALLDAY_APPOINTMENT_WRAPPER_CLASS).appendChild(eventWrapper);\n      var eventHeight = eventWrapper.offsetHeight;\n      remove(eventWrapper);\n      return eventHeight;\n    }\n  }, {\n    key: \"isAllowDrop\",\n    value: function isAllowDrop(e) {\n      if (!this.actionObj.excludeSelectors) {\n        return false;\n      }\n\n      var dropSelectors = this.actionObj.excludeSelectors.split(',');\n      var isAllowDrop = false;\n\n      var _iterator119 = _createForOfIteratorHelper(dropSelectors),\n          _step119;\n\n      try {\n        for (_iterator119.s(); !(_step119 = _iterator119.n()).done;) {\n          var selector = _step119.value;\n\n          if (e.target.classList.contains(selector)) {\n            isAllowDrop = true;\n            break;\n          }\n        }\n      } catch (err) {\n        _iterator119.e(err);\n      } finally {\n        _iterator119.f();\n      }\n\n      return isAllowDrop;\n    }\n    /**\n     * Get module name.\n     *\n     * @returns {string} Returns the module name\n     */\n\n  }, {\n    key: \"getModuleName\",\n    value: function getModuleName() {\n      return 'dragAndDrop';\n    }\n  }]);\n\n  return DragAndDrop;\n}(ActionBase);\n/**\n * view base\n */\n\n\nvar ViewBase = /*#__PURE__*/function () {\n  /**\n   * Constructor\n   *\n   * @param {Schedule} parent Accepts the schedule instance\n   */\n  function ViewBase(parent) {\n    _classCallCheck(this, ViewBase);\n\n    this.parent = parent;\n  }\n\n  _createClass(ViewBase, [{\n    key: \"isTimelineView\",\n    value: function isTimelineView() {\n      return this.parent.currentView.indexOf('Timeline') !== -1;\n    }\n  }, {\n    key: \"getContentRows\",\n    value: function getContentRows() {\n      return [];\n    }\n  }, {\n    key: \"refreshHeader\",\n    value: function refreshHeader() {// Method to refresh the date header\n    }\n  }, {\n    key: \"refreshResourceHeader\",\n    value: function refreshResourceHeader() {\n      remove(this.element.querySelector('tbody').lastElementChild.firstElementChild);\n      var resTd = createElement('td');\n      resTd.appendChild(this.parent.resourceBase.createResourceColumn());\n      prepend([resTd], this.element.querySelector('tbody').lastElementChild);\n      this.parent.notify(contentReady, {});\n    }\n  }, {\n    key: \"getDayName\",\n    value: function getDayName(date) {\n      return this.parent.getDayNames('abbreviated')[date.getDay()];\n    }\n  }, {\n    key: \"getDate\",\n    value: function getDate(date) {\n      return this.parent.globalize.formatDate(date, {\n        format: 'd',\n        calendar: this.parent.getCalendarMode()\n      });\n    }\n  }, {\n    key: \"getTime\",\n    value: function getTime(date) {\n      if (this.parent.isAdaptive) {\n        if (this.parent.activeViewOptions.timeFormat === 'HH:mm' || this.parent.activeViewOptions.timeFormat === 'HH.mm') {\n          return this.parent.globalize.formatDate(date, {\n            format: 'H',\n            calendar: this.parent.getCalendarMode()\n          });\n        }\n\n        return this.parent.globalize.formatDate(date, {\n          skeleton: 'h',\n          calendar: this.parent.getCalendarMode()\n        });\n      }\n\n      return this.parent.getTimeString(date);\n    }\n  }, {\n    key: \"getTimelineDate\",\n    value: function getTimelineDate(date) {\n      var text = this.parent.globalize.formatDate(date, {\n        skeleton: 'MMMd',\n        calendar: this.parent.getCalendarMode()\n      }) + ', ' + this.parent.getDayNames('wide')[date.getDay()];\n      return capitalizeFirstWord(text, 'multiple');\n    }\n  }, {\n    key: \"createEventTable\",\n    value: function createEventTable(trCount) {\n      var eventTable = createElement('div', {\n        className: EVENT_TABLE_CLASS\n      });\n      append(this.getEventRows(trCount), eventTable);\n      return eventTable;\n    }\n  }, {\n    key: \"getEventRows\",\n    value: function getEventRows(trCount) {\n      var eventRows = [];\n      var eventContainer;\n\n      for (var row = 0; row < trCount; row++) {\n        eventContainer = createElement('div', {\n          className: APPOINTMENT_CONTAINER_CLASS\n        });\n\n        if (this.parent.resourceBase && !this.parent.uiStateValues.isGroupAdaptive && this.parent.resourceBase.renderedResources) {\n          eventContainer.setAttribute('data-group-index', this.parent.resourceBase.renderedResources[row].groupIndex.toString());\n        }\n\n        eventRows.push(eventContainer);\n      }\n\n      return eventRows;\n    }\n  }, {\n    key: \"collapseRows\",\n    value: function collapseRows(wrap) {\n      if (this.parent.activeViewOptions.group.resources.length > 0 && !this.parent.uiStateValues.isGroupAdaptive) {\n        this.parent.resourceBase.hideResourceRows(wrap.querySelector('tbody'));\n        this.parent.resourceBase.hideResourceRows(wrap.querySelector('.' + EVENT_TABLE_CLASS));\n      }\n    }\n  }, {\n    key: \"createTableLayout\",\n    value: function createTableLayout(className) {\n      var clsName = className || '';\n      var table = createElement('table', {\n        className: SCHEDULE_TABLE_CLASS + ' ' + clsName,\n        attrs: {\n          role: 'table'\n        }\n      });\n      var tbody = createElement('tbody');\n      table.appendChild(tbody);\n      return table;\n    }\n  }, {\n    key: \"createColGroup\",\n    value: function createColGroup(table, lastRow) {\n      var length = lastRow.length;\n\n      if (lastRow[0] && lastRow[0].colSpan) {\n        length = lastRow.map(function (value) {\n          return value.colSpan;\n        }).reduce(function (prev, next) {\n          return prev + next;\n        });\n      }\n\n      var colGroupEle = createElement('colgroup');\n\n      for (var i = 0; i < length; i++) {\n        colGroupEle.appendChild(createElement('col'));\n      }\n\n      prepend([colGroupEle], table);\n    }\n  }, {\n    key: \"getScrollXIndent\",\n    value: function getScrollXIndent(content) {\n      return content.offsetHeight - content.clientHeight > 0 ? getScrollBarWidth() : 0;\n    }\n  }, {\n    key: \"scrollTopPanel\",\n    value: function scrollTopPanel(target) {\n      this.getDatesHeaderElement().firstElementChild.scrollLeft = target.scrollLeft;\n    }\n  }, {\n    key: \"scrollHeaderLabels\",\n    value: function scrollHeaderLabels(target) {\n      var headerTable = this.element.querySelector('.e-date-header-wrap table');\n      var colWidth = headerTable.offsetWidth / headerTable.querySelectorAll('colgroup col').length;\n\n      var applyLeft = function applyLeft(headerCells, isRtl) {\n        var currentCell;\n        var tdLeft = 0;\n        var colSpan = 0;\n        var hiddenLeft = isRtl ? -target.scrollLeft : target.scrollLeft;\n\n        var _iterator120 = _createForOfIteratorHelper(headerCells),\n            _step120;\n\n        try {\n          for (_iterator120.s(); !(_step120 = _iterator120.n()).done;) {\n            var cell = _step120.value;\n            colSpan += parseInt(cell.getAttribute('colSpan'), 10);\n\n            if (colSpan > Math.floor(hiddenLeft / colWidth)) {\n              currentCell = cell;\n              break;\n            }\n\n            tdLeft += cell.offsetWidth;\n          }\n        } catch (err) {\n          _iterator120.e(err);\n        } finally {\n          _iterator120.f();\n        }\n\n        if (!isNullOrUndefined(currentCell)) {\n          currentCell.children[0].style[isRtl ? 'right' : 'left'] = hiddenLeft - tdLeft + 'px';\n        }\n      };\n\n      var classNames = ['.e-header-year-cell', '.e-header-month-cell', '.e-header-week-cell', '.e-header-cells'];\n\n      for (var _i18 = 0, _classNames = classNames; _i18 < _classNames.length; _i18++) {\n        var className = _classNames[_i18];\n        var headerCells = [].slice.call(this.element.querySelectorAll(className));\n\n        if (headerCells.length > 0) {\n          var _iterator121 = _createForOfIteratorHelper(headerCells),\n              _step121;\n\n          try {\n            for (_iterator121.s(); !(_step121 = _iterator121.n()).done;) {\n              var element = _step121.value;\n              element.children[0].style[this.parent.enableRtl ? 'right' : 'left'] = '';\n            }\n          } catch (err) {\n            _iterator121.e(err);\n          } finally {\n            _iterator121.f();\n          }\n\n          applyLeft(headerCells, this.parent.enableRtl);\n        }\n      }\n    }\n  }, {\n    key: \"addAttributes\",\n    value: function addAttributes(td, element) {\n      if (td.template) {\n        append(td.template, element);\n      }\n\n      if (td.colSpan) {\n        element.setAttribute('colspan', td.colSpan.toString());\n      }\n\n      if (td.className) {\n        addClass([element], td.className);\n      }\n    }\n  }, {\n    key: \"getHeaderBarHeight\",\n    value: function getHeaderBarHeight() {\n      var headerBarHeight = 2;\n\n      if (this.parent.headerModule) {\n        headerBarHeight += getOuterHeight(this.parent.headerModule.getHeaderElement());\n      }\n\n      if (this.parent.uiStateValues.isGroupAdaptive) {\n        var resHeader = this.parent.element.querySelector('.' + RESOURCE_HEADER_TOOLBAR);\n\n        if (resHeader) {\n          headerBarHeight += resHeader.offsetHeight;\n        }\n      }\n\n      return headerBarHeight;\n    }\n  }, {\n    key: \"renderPanel\",\n    value: function renderPanel(type) {\n      if (type === PREVIOUS_PANEL_CLASS) {\n        prepend([this.element], this.parent.element.querySelector('.' + TABLE_CONTAINER_CLASS));\n      } else {\n        this.parent.element.querySelector('.' + TABLE_CONTAINER_CLASS).appendChild(this.element);\n      }\n    }\n  }, {\n    key: \"setPanel\",\n    value: function setPanel(panel) {\n      this.element = panel;\n    }\n  }, {\n    key: \"getPanel\",\n    value: function getPanel() {\n      return this.element;\n    }\n  }, {\n    key: \"getDatesHeaderElement\",\n    value: function getDatesHeaderElement() {\n      return this.element.querySelector('.' + DATE_HEADER_CONTAINER_CLASS);\n    } // eslint-disable-next-line @typescript-eslint/no-unused-vars\n\n  }, {\n    key: \"getDateSlots\",\n    value: function getDateSlots(renderDates, workDays) {\n      return []; // Here getDateSlots only need in vertical and month views\n    }\n  }, {\n    key: \"generateColumnLevels\",\n    value: function generateColumnLevels() {\n      return []; // Here generateColumnLevels only need in vertical and month views\n    }\n  }, {\n    key: \"getColumnLevels\",\n    value: function getColumnLevels() {\n      return this.colLevels;\n    }\n  }, {\n    key: \"highlightCurrentTime\",\n    value: function highlightCurrentTime() {// Here showTimeIndicator functionalities\n    }\n  }, {\n    key: \"startDate\",\n    value: function startDate() {\n      return this.renderDates[0];\n    }\n  }, {\n    key: \"endDate\",\n    value: function endDate() {\n      return addDays(this.renderDates[this.renderDates.length - 1], 1);\n    }\n  }, {\n    key: \"getStartHour\",\n    value: function getStartHour() {\n      var startHour = this.parent.getStartEndTime(this.parent.activeViewOptions.startHour);\n\n      if (isNullOrUndefined(startHour)) {\n        startHour = new Date(2000, 0, 0, 0);\n      }\n\n      return startHour;\n    }\n  }, {\n    key: \"getEndHour\",\n    value: function getEndHour() {\n      var endHour = this.parent.getStartEndTime(this.parent.activeViewOptions.endHour);\n\n      if (isNullOrUndefined(endHour)) {\n        endHour = new Date(2000, 0, 0, 0);\n      }\n\n      return endHour;\n    }\n  }, {\n    key: \"isCurrentDate\",\n    value: function isCurrentDate(date) {\n      return date.setHours(0, 0, 0, 0) === this.parent.getCurrentTime().setHours(0, 0, 0, 0);\n    }\n  }, {\n    key: \"isCurrentMonth\",\n    value: function isCurrentMonth(date) {\n      return date.getFullYear() === this.parent.getCurrentTime().getFullYear() && date.getMonth() === this.parent.getCurrentTime().getMonth();\n    }\n  }, {\n    key: \"isWorkDay\",\n    value: function isWorkDay(date) {\n      var workDays = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : this.parent.activeViewOptions.workDays;\n\n      if (workDays.indexOf(date.getDay()) >= 0) {\n        return true;\n      }\n\n      return false;\n    }\n  }, {\n    key: \"isWorkHour\",\n    value: function isWorkHour(date, startHour, endHour, workDays) {\n      if (isNullOrUndefined(startHour) || isNullOrUndefined(endHour)) {\n        return false;\n      }\n\n      startHour.setMilliseconds(0);\n      endHour.setMilliseconds(0);\n      return !(getDateInMs(date) < getDateInMs(startHour) || getDateInMs(date) >= getDateInMs(endHour) || !this.isWorkDay(date, workDays));\n    }\n  }, {\n    key: \"getRenderDates\",\n    value: function getRenderDates(workDays) {\n      var renderDates = []; // Due to same code for vertical and time line, week & work week views, if condition has used\n\n      if (this.parent.currentView === 'Week' || this.parent.currentView === 'TimelineWeek') {\n        var selectedDate = resetTime(this.parent.selectedDate);\n        var start = getWeekFirstDate(selectedDate, this.parent.activeViewOptions.firstDayOfWeek);\n\n        for (var i = 0, length = WEEK_LENGTH * this.parent.activeViewOptions.interval; i < length; i++) {\n          if (this.parent.activeViewOptions.showWeekend) {\n            renderDates.push(start);\n          } else {\n            if (this.isWorkDay(start, workDays)) {\n              renderDates.push(start);\n            }\n          }\n\n          start = addDays(start, 1);\n        }\n      } else if (this.parent.currentView === 'WorkWeek' || this.parent.currentView === 'TimelineWorkWeek') {\n        var _start = getWeekFirstDate(resetTime(this.parent.selectedDate), this.parent.activeViewOptions.firstDayOfWeek);\n\n        for (var _i19 = 0, _length2 = WEEK_LENGTH * this.parent.activeViewOptions.interval; _i19 < _length2; _i19++) {\n          if (this.isWorkDay(_start, workDays)) {\n            renderDates.push(_start);\n          }\n\n          _start = addDays(_start, 1);\n        }\n      } else {\n        var dayCount = this.parent.currentView === 'Agenda' ? this.parent.agendaDaysCount : this.parent.activeViewOptions.interval;\n\n        var _start2 = resetTime(this.parent.selectedDate);\n\n        do {\n          if (this.parent.activeViewOptions.showWeekend) {\n            renderDates.push(_start2);\n          } else {\n            if (this.isWorkDay(_start2, workDays)) {\n              renderDates.push(_start2);\n            }\n          }\n\n          _start2 = addDays(_start2, 1);\n        } while (dayCount !== renderDates.length);\n      }\n\n      if (!workDays) {\n        this.renderDates = renderDates;\n      }\n\n      if (this.parent.headerModule) {\n        this.parent.headerModule.previousNextIconHandler();\n      }\n\n      return renderDates;\n    }\n  }, {\n    key: \"getNextPreviousDate\",\n    value: function getNextPreviousDate(type) {\n      if (this.parent.currentView === 'Day' || this.parent.currentView === 'TimelineDay') {\n        if (this.parent.activeViewOptions.showWeekend) {\n          var daysCount = this.parent.activeViewOptions.interval;\n          return addDays(this.parent.selectedDate, type === 'next' ? daysCount : -daysCount);\n        } else {\n          var date;\n\n          if (type === 'next') {\n            date = addDays(this.renderDates.slice(-1)[0], 1);\n\n            while (!this.isWorkDay(date)) {\n              date = addDays(date, 1);\n            }\n          } else {\n            date = addDays(this.renderDates[0], -1);\n            var count = 0;\n\n            do {\n              if (this.isWorkDay(date)) {\n                count += 1;\n              }\n\n              if (this.parent.activeViewOptions.interval !== count) {\n                date = addDays(date, -1);\n              }\n            } while (this.parent.activeViewOptions.interval !== count);\n          }\n\n          return date;\n        }\n      }\n\n      var weekLength = type === 'next' ? WEEK_LENGTH : -WEEK_LENGTH;\n      return addDays(this.parent.selectedDate, weekLength * this.parent.activeViewOptions.interval);\n    }\n  }, {\n    key: \"getLabelText\",\n    value: function getLabelText(view) {\n      var viewStr = view.charAt(0).toLowerCase() + view.substring(1);\n      return this.parent.localeObj.getConstant(viewStr) + ' of ' + capitalizeFirstWord(this.parent.globalize.formatDate(this.parent.selectedDate, {\n        skeleton: 'long',\n        calendar: this.parent.getCalendarMode()\n      }), 'single');\n    }\n  }, {\n    key: \"getDateRangeText\",\n    value: function getDateRangeText() {\n      if (this.parent.isAdaptive) {\n        var formatDate = this.parent.activeViewOptions.dateFormat ? this.parent.activeViewOptions.dateFormat : 'MMMM y';\n        return capitalizeFirstWord(this.parent.globalize.formatDate(this.parent.selectedDate, {\n          format: formatDate,\n          calendar: this.parent.getCalendarMode()\n        }), 'single');\n      }\n\n      return this.formatDateRange(this.renderDates[0], this.renderDates[this.renderDates.length - 1]);\n    }\n  }, {\n    key: \"formatDateRange\",\n    value: function formatDateRange(startDate, endDate) {\n      var globalize = this.parent.globalize;\n      var mode = this.parent.getCalendarMode();\n\n      if (startDate === endDate) {\n        endDate = null;\n      }\n\n      if (!isNullOrUndefined(this.parent.activeViewOptions.dateFormat)) {\n        var text = '';\n\n        if (!endDate) {\n          text = globalize.formatDate(startDate, {\n            format: this.parent.activeViewOptions.dateFormat,\n            calendar: mode\n          });\n          return capitalizeFirstWord(text, 'multiple');\n        }\n\n        text = globalize.formatDate(startDate, {\n          format: this.parent.activeViewOptions.dateFormat,\n          calendar: mode\n        }) + ' - ' + globalize.formatDate(endDate, {\n          format: this.parent.activeViewOptions.dateFormat,\n          calendar: mode\n        });\n        return capitalizeFirstWord(text, 'multiple');\n      }\n\n      var formattedStr;\n      var longDateFormat;\n\n      if (this.parent.locale === 'en' || this.parent.locale === 'en-US') {\n        longDateFormat = getValue('dateFormats.long', getDefaultDateObject(mode));\n      } else {\n        longDateFormat = getValue('main.' + '' + this.parent.locale + '.dates.calendars.' + mode + '.dateFormats.long', cldrData);\n      }\n\n      if (!endDate) {\n        return capitalizeFirstWord(globalize.formatDate(startDate, {\n          format: longDateFormat,\n          calendar: mode\n        }), 'single');\n      }\n\n      var dateFormat = longDateFormat.trim().toLocaleLowerCase();\n\n      if (dateFormat.substr(0, 1) === 'd') {\n        if (startDate.getFullYear() === endDate.getFullYear()) {\n          if (startDate.getMonth() === endDate.getMonth()) {\n            formattedStr = globalize.formatDate(startDate, {\n              format: 'dd',\n              calendar: mode\n            }) + ' - ' + globalize.formatDate(endDate, {\n              format: 'dd MMMM yyyy',\n              calendar: mode\n            });\n          } else {\n            formattedStr = globalize.formatDate(startDate, {\n              format: 'dd MMM',\n              calendar: mode\n            }) + ' - ' + globalize.formatDate(endDate, {\n              format: 'dd MMM yyyy',\n              calendar: mode\n            });\n          }\n        } else {\n          formattedStr = globalize.formatDate(startDate, {\n            format: 'dd MMM yyyy',\n            calendar: mode\n          }) + ' - ' + globalize.formatDate(endDate, {\n            format: 'dd MMM yyyy',\n            calendar: mode\n          });\n        }\n      } else if (dateFormat.substr(0, 1) === 'm') {\n        if (startDate.getFullYear() === endDate.getFullYear()) {\n          if (startDate.getMonth() === endDate.getMonth()) {\n            formattedStr = globalize.formatDate(startDate, {\n              format: 'MMMM dd',\n              calendar: mode\n            }) + ' - ' + globalize.formatDate(endDate, {\n              format: 'dd, yyyy',\n              calendar: mode\n            });\n          } else {\n            formattedStr = globalize.formatDate(startDate, {\n              format: 'MMM dd',\n              calendar: mode\n            }) + ' - ' + globalize.formatDate(endDate, {\n              format: 'MMM dd, yyyy',\n              calendar: mode\n            });\n          }\n        } else {\n          formattedStr = globalize.formatDate(startDate, {\n            format: 'MMM dd, yyyy',\n            calendar: mode\n          }) + ' - ' + globalize.formatDate(endDate, {\n            format: 'MMM dd, yyyy',\n            calendar: mode\n          });\n        }\n      } else {\n        formattedStr = globalize.formatDate(startDate, {\n          format: longDateFormat,\n          calendar: mode\n        }) + ' - ' + globalize.formatDate(endDate, {\n          format: longDateFormat,\n          calendar: mode\n        });\n      }\n\n      return capitalizeFirstWord(formattedStr, 'multiple');\n    }\n  }, {\n    key: \"getMobileDateElement\",\n    value: function getMobileDateElement(date, className) {\n      var wrap = createElement('div', {\n        className: className,\n        innerHTML: '<div class=\"e-m-date\">' + this.parent.globalize.formatDate(date, {\n          format: 'd',\n          calendar: this.parent.getCalendarMode()\n        }) + '</div>' + '<div class=\"e-m-day\">' + capitalizeFirstWord(this.parent.globalize.formatDate(date, {\n          format: 'E',\n          calendar: this.parent.getCalendarMode()\n        }), 'single') + '</div>'\n      });\n      return wrap;\n    }\n  }, {\n    key: \"setResourceHeaderContent\",\n    value: function setResourceHeaderContent(tdElement, tdData) {\n      var className = arguments.length > 2 && arguments[2] !== undefined ? arguments[2] : TEXT_ELLIPSIS;\n\n      if (this.parent.activeViewOptions.resourceHeaderTemplate) {\n        var data = {\n          resource: tdData.resource,\n          resourceData: tdData.resourceData\n        };\n        var scheduleId = this.parent.element.id + '_';\n        var viewName = this.parent.activeViewOptions.resourceHeaderTemplateName;\n        var templateId = scheduleId + viewName + 'resourceHeaderTemplate';\n        var quickTemplate = [].slice.call(this.parent.getResourceHeaderTemplate()(data, this.parent, 'resourceHeaderTemplate', templateId, false));\n        append(quickTemplate, tdElement);\n      } else {\n        tdElement.appendChild(createElement('div', {\n          className: className,\n          innerHTML: tdData.resourceData[tdData.resource.textField]\n        }));\n      }\n    }\n  }, {\n    key: \"renderResourceMobileLayout\",\n    value: function renderResourceMobileLayout() {\n      if (this.parent.resourceBase.lastResourceLevel && this.parent.resourceBase.lastResourceLevel.length <= 0) {\n        return;\n      }\n\n      this.parent.resourceBase.renderResourceHeader();\n      this.parent.resourceBase.renderResourceTree();\n    }\n  }, {\n    key: \"addAutoHeightClass\",\n    value: function addAutoHeightClass(element) {\n      if (!this.parent.uiStateValues.isGroupAdaptive && this.parent.rowAutoHeight && this.isTimelineView() && this.parent.activeViewOptions.group.resources.length > 0) {\n        addClass([element], AUTO_HEIGHT);\n      }\n    }\n  }, {\n    key: \"getColElements\",\n    value: function getColElements() {\n      return [].slice.call(this.element.querySelectorAll('.' + CONTENT_WRAP_CLASS + ' col, .' + DATE_HEADER_WRAP_CLASS + ' col'));\n    }\n  }, {\n    key: \"setColWidth\",\n    value: function setColWidth(content) {\n      if (this.isTimelineView()) {\n        var colElements = this.getColElements();\n        var contentBody = this.element.querySelector('.' + CONTENT_TABLE_CLASS + ' tbody');\n        var colWidth = Math.ceil(contentBody.offsetWidth / (colElements.length / 2));\n        colElements.forEach(function (col) {\n          return setStyleAttribute(col, {\n            'width': formatUnit(colWidth)\n          });\n        });\n\n        if (content.offsetHeight !== content.clientHeight) {\n          var resourceColumn = this.parent.element.querySelector('.' + RESOURCE_COLUMN_WRAP_CLASS);\n\n          if (!isNullOrUndefined(resourceColumn)) {\n            setStyleAttribute(resourceColumn, {\n              'height': formatUnit(content.clientHeight)\n            });\n          }\n        }\n      }\n    }\n  }, {\n    key: \"resetColWidth\",\n    value: function resetColWidth() {\n      var colElements = this.getColElements();\n\n      var _iterator122 = _createForOfIteratorHelper(colElements),\n          _step122;\n\n      try {\n        for (_iterator122.s(); !(_step122 = _iterator122.n()).done;) {\n          var col = _step122.value;\n          col.style.width = '';\n        }\n      } catch (err) {\n        _iterator122.e(err);\n      } finally {\n        _iterator122.f();\n      }\n    }\n  }, {\n    key: \"getContentAreaElement\",\n    value: function getContentAreaElement() {\n      return this.element.querySelector('.' + CONTENT_WRAP_CLASS);\n    }\n  }, {\n    key: \"wireExpandCollapseIconEvents\",\n    value: function wireExpandCollapseIconEvents() {\n      if (this.parent.resourceBase && this.parent.resourceBase.resourceCollection.length > 1) {\n        var treeIcons = [].slice.call(this.element.querySelectorAll('.' + RESOURCE_TREE_ICON_CLASS));\n\n        var _iterator123 = _createForOfIteratorHelper(treeIcons),\n            _step123;\n\n        try {\n          for (_iterator123.s(); !(_step123 = _iterator123.n()).done;) {\n            var icon = _step123.value;\n            EventHandler.clearEvents(icon);\n            EventHandler.add(icon, 'click', this.parent.resourceBase.onTreeIconClick, this.parent.resourceBase);\n          }\n        } catch (err) {\n          _iterator123.e(err);\n        } finally {\n          _iterator123.f();\n        }\n      }\n    }\n  }, {\n    key: \"scrollToDate\",\n    value: function scrollToDate(scrollDate) {\n      if (['Month', 'TimelineMonth'].indexOf(this.parent.currentView) === -1 || isNullOrUndefined(scrollDate)) {\n        return;\n      }\n\n      var scrollWrap = this.getContentAreaElement();\n      var tdDate = new Date(resetTime(new Date(+scrollDate)).getTime()).getTime();\n      var dateElement = scrollWrap.querySelector(\".\".concat(WORK_CELLS_CLASS, \"[data-date=\\\"\").concat(tdDate, \"\\\"]\"));\n\n      if (this.parent.currentView === 'Month' && dateElement) {\n        scrollWrap.scrollTop = dateElement.offsetTop;\n      }\n\n      if (this.parent.currentView === 'TimelineMonth' && dateElement) {\n        if (!this.parent.enableRtl) {\n          scrollWrap.scrollLeft = dateElement.offsetLeft;\n        } else {\n          scrollWrap.scrollLeft = -(this.parent.getContentTable().offsetWidth - dateElement.offsetLeft - dateElement.offsetWidth);\n        }\n      }\n    }\n  }, {\n    key: \"setPersistence\",\n    value: function setPersistence() {\n      if (this.parent.enablePersistence) {\n        var contentWrap = this.element.querySelector('.e-content-wrap');\n\n        if (!isNullOrUndefined(contentWrap)) {\n          this.parent.scrollLeft = contentWrap.scrollLeft;\n          this.parent.scrollTop = contentWrap.scrollTop;\n        }\n      }\n    }\n  }, {\n    key: \"retainScrollPosition\",\n    value: function retainScrollPosition() {\n      if (this.parent.enablePersistence) {\n        var conWrap = this.parent.element.querySelector('.e-content-wrap');\n\n        if (!isNullOrUndefined(conWrap) && !isNullOrUndefined(this.parent.scrollLeft) && !isNullOrUndefined(this.parent.scrollTop)) {\n          conWrap.scrollTop = this.parent.scrollTop;\n          conWrap.scrollLeft = this.parent.scrollLeft;\n        }\n      }\n    }\n  }, {\n    key: \"getViewStartDate\",\n    value: function getViewStartDate() {\n      var startDate = this.renderDates[0];\n\n      if (this.parent.activeViewOptions.group.resources.length > 0 && this.parent.resourceBase.lastResourceLevel.length > 0) {\n        startDate = this.parent.resourceBase.getResourceRenderDates()[0];\n      }\n\n      return startDate;\n    }\n  }, {\n    key: \"getViewEndDate\",\n    value: function getViewEndDate() {\n      var endDate = addDays(this.renderDates[this.renderDates.length - 1], 1);\n\n      if (this.parent.activeViewOptions.group.resources.length > 0 && this.parent.resourceBase.lastResourceLevel.length > 0) {\n        endDate = addDays(this.parent.resourceBase.getResourceRenderDates().slice(-1)[0], 1);\n      }\n\n      return endDate;\n    }\n  }, {\n    key: \"destroy\",\n    value: function destroy() {\n      if (this.element && this.element.parentNode) {\n        remove(this.element);\n      }\n\n      this.element = null;\n      this.renderDates = null;\n      this.colLevels = null;\n    }\n  }]);\n\n  return ViewBase;\n}();\n/**\n * vertical view\n */\n\n\nvar VerticalView = /*#__PURE__*/function (_ViewBase) {\n  _inherits(VerticalView, _ViewBase);\n\n  var _super18 = _createSuper(VerticalView);\n\n  function VerticalView(parent) {\n    var _this91;\n\n    _classCallCheck(this, VerticalView);\n\n    _this91 = _super18.call(this, parent);\n    _this91.viewClass = 'e-day-view';\n    _this91.isInverseTableSelect = true;\n    _this91.baseCssClass = 'e-vertical-view';\n    _this91.appointment = null;\n    return _this91;\n  }\n\n  _createClass(VerticalView, [{\n    key: \"getModuleName\",\n    value: function getModuleName() {\n      return 'verticalView';\n    }\n  }, {\n    key: \"addEventListener\",\n    value: function addEventListener() {\n      this.parent.on(scrollUiUpdate, this.scrollUiUpdate, this);\n      this.parent.on(dataReady, this.renderEvents, this);\n    }\n  }, {\n    key: \"removeEventListener\",\n    value: function removeEventListener() {\n      if (this.parent) {\n        this.parent.off(scrollUiUpdate, this.scrollUiUpdate);\n        this.parent.off(dataReady, this.renderEvents);\n      }\n    }\n  }, {\n    key: \"renderEvents\",\n    value: function renderEvents() {\n      this.appointment = this.parent.activeViewOptions.timeScale.enable ? new VerticalEvent(this.parent) : new MonthEvent(this.parent);\n      this.appointment.renderAppointments();\n      this.parent.notify(eventsLoaded, {});\n    }\n  }, {\n    key: \"onContentScroll\",\n    value: function onContentScroll(e) {\n      this.parent.removeNewEventElement();\n      var target = e.target;\n      this.parent.notify(virtualScroll, e);\n      this.scrollLeftPanel(target);\n      this.scrollTopPanel(target);\n\n      if (!this.parent.isAdaptive) {\n        this.parent.uiStateValues.top = target.scrollTop;\n      }\n\n      this.parent.uiStateValues.left = target.scrollLeft;\n\n      if (!isNullOrUndefined(this.parent.quickPopup)) {\n        this.parent.quickPopup.quickPopupHide();\n      }\n\n      this.setPersistence();\n    }\n  }, {\n    key: \"onAdaptiveMove\",\n    value: function onAdaptiveMove(e) {\n      if (this.parent.uiStateValues.action) {\n        e.preventDefault();\n      }\n    }\n  }, {\n    key: \"onAdaptiveScroll\",\n    value: function onAdaptiveScroll(e) {\n      if (this.parent && !this.parent.isDestroyed) {\n        this.parent.removeNewEventElement();\n        this.parent.uiStateValues.top = e.target.scrollTop;\n      }\n    }\n  }, {\n    key: \"scrollLeftPanel\",\n    value: function scrollLeftPanel(target) {\n      var leftPanel = this.getLeftPanelElement();\n\n      if (!isNullOrUndefined(leftPanel)) {\n        leftPanel.scrollTop = target.scrollTop;\n      }\n    }\n  }, {\n    key: \"scrollUiUpdate\",\n    value: function scrollUiUpdate(args) {\n      if (!this.parent) {\n        return;\n      }\n\n      var dateHeader = this.parent.element.querySelector('.' + DATE_HEADER_WRAP_CLASS);\n      var headerBarHeight = this.getHeaderBarHeight();\n      var timeCells = this.getLeftPanelElement();\n      var content = this.getScrollableElement();\n      var header = this.getDatesHeaderElement();\n      var scrollerHeight = this.parent.element.offsetHeight - headerBarHeight - header.offsetHeight;\n      this.setColWidth(content);\n      this.setContentHeight(content, timeCells, scrollerHeight);\n      var scrollBarWidth = getScrollBarWidth(); // eslint-disable-next-line @typescript-eslint/no-explicit-any\n\n      header.firstElementChild.style[args.cssProperties.rtlBorder] = ''; // eslint-disable-next-line @typescript-eslint/no-explicit-any\n\n      header.style[args.cssProperties.rtlPadding] = '';\n      var isDateHeaderScroll = this.parent.enableAllDayScroll ? !(content.offsetWidth - content.clientWidth <= dateHeader.offsetWidth - dateHeader.clientWidth && dateHeader.classList.contains('e-all-day-scroll')) : true;\n\n      if (content.offsetWidth - content.clientWidth > 0 && isDateHeaderScroll) {\n        // eslint-disable-next-line @typescript-eslint/no-explicit-any\n        header.firstElementChild.style[args.cssProperties.border] = scrollBarWidth > 0 ? '1px' : '0px'; // eslint-disable-next-line @typescript-eslint/no-explicit-any\n\n        header.style[args.cssProperties.padding] = scrollBarWidth > 0 ? scrollBarWidth - 1 + 'px' : '0px';\n      } else {\n        // eslint-disable-next-line @typescript-eslint/no-explicit-any\n        header.firstElementChild.style[args.cssProperties.border] = ''; // eslint-disable-next-line @typescript-eslint/no-explicit-any\n\n        header.style[args.cssProperties.padding] = '';\n      }\n\n      if (!args.isPreventScrollUpdate) {\n        if (this.parent.uiStateValues.isInitial) {\n          this.scrollToWorkHour();\n          this.parent.uiStateValues.isInitial = false;\n        } else {\n          if (timeCells) {\n            timeCells.scrollTop = this.parent.uiStateValues.top;\n          }\n\n          content.scrollTop = this.parent.uiStateValues.top;\n          content.scrollLeft = this.parent.uiStateValues.left;\n        }\n      }\n\n      if (this.parent.activeViewOptions.timeScale.enable) {\n        this.highlightCurrentTime();\n      }\n\n      this.retainScrollPosition();\n    }\n  }, {\n    key: \"setContentHeight\",\n    value: function setContentHeight(element, leftPanelElement, height) {\n      if (this.parent.isAdaptive && !this.isTimelineView()) {\n        element.style.height = this.parent.height === 'auto' ? 'auto' : formatUnit(height);\n      } else {\n        if (!isNullOrUndefined(leftPanelElement)) {\n          leftPanelElement.style.height = this.parent.height === 'auto' ? 'auto' : formatUnit(height - this.getScrollXIndent(element));\n        }\n\n        element.style.height = this.parent.height === 'auto' ? 'auto' : formatUnit(height);\n      }\n    }\n  }, {\n    key: \"scrollToWorkHour\",\n    value: function scrollToWorkHour() {\n      if (this.parent.workHours.highlight) {\n        var firstWorkHourCell = this.element.querySelector('.' + WORK_HOURS_CLASS);\n\n        if (firstWorkHourCell) {\n          this.getScrollableElement().scrollTop = firstWorkHourCell.offsetTop;\n          this.parent.uiStateValues.top = firstWorkHourCell.offsetTop;\n          this.parent.uiStateValues.left = 0;\n        }\n      }\n    }\n  }, {\n    key: \"scrollToHour\",\n    value: function scrollToHour(hour, scrollDate) {\n      var date = this.parent.getStartEndTime(hour);\n\n      if (isNullOrUndefined(date) || !isNullOrUndefined(scrollDate)) {\n        return;\n      }\n\n      this.getScrollableElement().scrollTop = this.getTopFromDateTime(date);\n    }\n  }, {\n    key: \"generateColumnLevels\",\n    value: function generateColumnLevels() {\n      var level = this.getDateSlots(this.renderDates, this.parent.activeViewOptions.workDays);\n      var columnLevels = [];\n\n      if (this.parent.activeViewOptions.group.resources.length > 0) {\n        columnLevels = this.parent.resourceBase.generateResourceLevels(level);\n\n        if (this.parent.uiStateValues.isGroupAdaptive && this.parent.resourceBase.lastResourceLevel.length > 0) {\n          var resourceLevel = this.parent.resourceBase.lastResourceLevel[this.parent.uiStateValues.groupIndex];\n          var resStartHour = resourceLevel.resourceData[resourceLevel.resource.startHourField];\n          var resEndHour = resourceLevel.resourceData[resourceLevel.resource.endHourField];\n          var dateSlots = this.getDateSlots(resourceLevel.renderDates, resourceLevel.workDays, resStartHour, resEndHour);\n          columnLevels = [dateSlots];\n        }\n      } else {\n        columnLevels.push(level);\n      }\n\n      this.colLevels = columnLevels;\n      return columnLevels;\n    } // eslint-disable-next-line max-len\n\n  }, {\n    key: \"getDateSlots\",\n    value: function getDateSlots(renderDates, workDays) {\n      var workStartHour = arguments.length > 2 && arguments[2] !== undefined ? arguments[2] : this.parent.workHours.start;\n      var workEndHour = arguments.length > 3 && arguments[3] !== undefined ? arguments[3] : this.parent.workHours.end;\n      var dateCol = [];\n      var start = this.parent.getStartEndTime(workStartHour);\n      var end = this.parent.getStartEndTime(workEndHour);\n\n      var _iterator124 = _createForOfIteratorHelper(renderDates),\n          _step124;\n\n      try {\n        for (_iterator124.s(); !(_step124 = _iterator124.n()).done;) {\n          var col = _step124.value;\n          var classList$$1 = [HEADER_CELLS_CLASS];\n\n          if (this.isCurrentDate(col)) {\n            classList$$1.push(CURRENT_DAY_CLASS);\n          }\n\n          dateCol.push({\n            date: col,\n            type: 'dateHeader',\n            className: classList$$1,\n            colSpan: 1,\n            workDays: workDays,\n            startHour: new Date(+start),\n            endHour: new Date(+end)\n          });\n        }\n      } catch (err) {\n        _iterator124.e(err);\n      } finally {\n        _iterator124.f();\n      }\n\n      return dateCol;\n    }\n  }, {\n    key: \"isWorkHourRange\",\n    value: function isWorkHourRange(date) {\n      return this.getStartHour().getTime() <= date.getTime() && this.getEndHour().getTime() >= date.getTime();\n    }\n  }, {\n    key: \"highlightCurrentTime\",\n    value: function highlightCurrentTime() {\n      var _this92 = this;\n\n      if (this.parent.activeViewOptions.headerRows.length > 0 && this.parent.activeViewOptions.headerRows.slice(-1)[0].option !== 'Hour') {\n        return;\n      }\n\n      if (this.parent.showTimeIndicator && this.isWorkHourRange(this.parent.getCurrentTime())) {\n        var currentDateIndex = this.getCurrentTimeIndicatorIndex();\n\n        if (currentDateIndex.length > 0) {\n          var workCells = [].slice.call(this.element.querySelectorAll('.' + WORK_CELLS_CLASS));\n\n          if (workCells.length > 0) {\n            this.changeCurrentTimePosition();\n          }\n\n          if (isNullOrUndefined(this.currentTimeIndicatorTimer)) {\n            var currentDate = this.parent.getCurrentTime();\n            var interval = MS_PER_MINUTE - (currentDate.getSeconds() * 1000 + currentDate.getMilliseconds());\n\n            if (interval <= MS_PER_MINUTE - 1000) {\n              window.setTimeout(function () {\n                if (!isNullOrUndefined(_this92.currentTimeIndicatorTimer)) {\n                  _this92.clearCurrentTimeIndicatorTimer();\n\n                  _this92.changeCurrentTimePosition();\n\n                  _this92.updateCurrentTimeIndicatorTimer();\n                }\n              }, interval);\n            }\n\n            this.updateCurrentTimeIndicatorTimer();\n          }\n        } else {\n          this.clearCurrentTimeIndicatorTimer();\n        }\n      } else {\n        this.clearCurrentTimeIndicatorTimer();\n      }\n    }\n  }, {\n    key: \"getCurrentTimeIndicatorIndex\",\n    value: function getCurrentTimeIndicatorIndex() {\n      var currentDateIndex = [];\n\n      if (!isNullOrUndefined(this.parent.resourceBase) && this.parent.activeViewOptions.group.resources.length > 0 && !this.parent.uiStateValues.isGroupAdaptive) {\n        var count = 0;\n\n        var _iterator125 = _createForOfIteratorHelper(this.parent.resourceBase.lastResourceLevel),\n            _step125;\n\n        try {\n          for (_iterator125.s(); !(_step125 = _iterator125.n()).done;) {\n            var resource = _step125.value;\n            var index = this.parent.getIndexOfDate(resource.renderDates, resetTime(this.parent.getCurrentTime()));\n\n            if (index >= 0) {\n              var resIndex = this.parent.activeViewOptions.group.byDate ? this.parent.resourceBase.lastResourceLevel.length * index + count : count + index;\n              currentDateIndex.push(resIndex);\n            }\n\n            count += this.parent.activeViewOptions.group.byDate ? 1 : resource.renderDates.length;\n          }\n        } catch (err) {\n          _iterator125.e(err);\n        } finally {\n          _iterator125.f();\n        }\n      } else {\n        var renderDates = this.parent.uiStateValues.isGroupAdaptive && this.parent.resourceBase.lastResourceLevel.length > 0 ? this.parent.resourceBase.lastResourceLevel[this.parent.uiStateValues.groupIndex].renderDates : this.renderDates;\n\n        var _index9 = this.parent.getIndexOfDate(renderDates, resetTime(this.parent.getCurrentTime()));\n\n        if (_index9 >= 0) {\n          currentDateIndex.push(_index9);\n        }\n      }\n\n      return currentDateIndex;\n    }\n  }, {\n    key: \"clearCurrentTimeIndicatorTimer\",\n    value: function clearCurrentTimeIndicatorTimer() {\n      if (!isNullOrUndefined(this.currentTimeIndicatorTimer)) {\n        window.clearInterval(this.currentTimeIndicatorTimer);\n        this.currentTimeIndicatorTimer = null;\n        this.removeCurrentTimeIndicatorElements();\n      }\n    }\n  }, {\n    key: \"updateCurrentTimeIndicatorTimer\",\n    value: function updateCurrentTimeIndicatorTimer() {\n      var _this93 = this;\n\n      this.currentTimeIndicatorTimer = window.setInterval(function () {\n        _this93.changeCurrentTimePosition();\n      }, MS_PER_MINUTE);\n    }\n  }, {\n    key: \"removeCurrentTimeIndicatorElements\",\n    value: function removeCurrentTimeIndicatorElements() {\n      var queryString = '.' + PREVIOUS_TIMELINE_CLASS + ',.' + CURRENT_TIMELINE_CLASS + ',.' + CURRENT_TIME_CLASS;\n      var timeIndicator = [].slice.call(this.element.querySelectorAll(queryString));\n\n      var _iterator126 = _createForOfIteratorHelper(timeIndicator),\n          _step126;\n\n      try {\n        for (_iterator126.s(); !(_step126 = _iterator126.n()).done;) {\n          var indicator = _step126.value;\n          remove(indicator);\n        }\n      } catch (err) {\n        _iterator126.e(err);\n      } finally {\n        _iterator126.f();\n      }\n    }\n  }, {\n    key: \"changeCurrentTimePosition\",\n    value: function changeCurrentTimePosition() {\n      if (!this.parent || this.parent && this.parent.isDestroyed) {\n        return;\n      }\n\n      this.removeCurrentTimeIndicatorElements();\n      var currentDateIndex = this.getCurrentTimeIndicatorIndex();\n      var firstRow = this.parent.getContentTable().rows[0];\n      var top = this.getTopFromDateTime(this.parent.getCurrentTime());\n      var topInPx = formatUnit(top);\n      var rowIndex = Math.floor(top / firstRow.cells[0].offsetHeight);\n      var timeCellsWrap = this.getLeftPanelElement();\n      var timeTrs = [].slice.call(timeCellsWrap.querySelectorAll('tr'));\n\n      if (isNullOrUndefined(rowIndex) || isNaN(rowIndex) || rowIndex === timeTrs.length) {\n        return;\n      }\n\n      var curTimeWrap = [].slice.call(this.element.querySelectorAll('.' + TIMELINE_WRAPPER_CLASS));\n\n      for (var i = 0, length = currentDateIndex[0]; i < length; i++) {\n        curTimeWrap[i].appendChild(createElement('div', {\n          className: PREVIOUS_TIMELINE_CLASS,\n          styles: 'top:' + topInPx\n        }));\n      }\n\n      var _iterator127 = _createForOfIteratorHelper(currentDateIndex),\n          _step127;\n\n      try {\n        for (_iterator127.s(); !(_step127 = _iterator127.n()).done;) {\n          var day = _step127.value;\n          curTimeWrap[day].appendChild(createElement('div', {\n            className: CURRENT_TIMELINE_CLASS,\n            styles: 'top:' + topInPx\n          }));\n        }\n      } catch (err) {\n        _iterator127.e(err);\n      } finally {\n        _iterator127.f();\n      }\n\n      var currentTimeEle = createElement('div', {\n        innerHTML: this.parent.getTimeString(this.parent.getCurrentTime()),\n        className: CURRENT_TIME_CLASS,\n        styles: 'top:' + topInPx\n      });\n\n      if (rowIndex <= timeTrs.length) {\n        removeClass(timeCellsWrap.querySelectorAll('.' + HIDE_CHILDS_CLASS), HIDE_CHILDS_CLASS);\n\n        if (timeTrs[rowIndex]) {\n          addClass([timeTrs[rowIndex].lastElementChild], HIDE_CHILDS_CLASS);\n        }\n\n        prepend([currentTimeEle], timeCellsWrap);\n        currentTimeEle.style.top = formatUnit(currentTimeEle.offsetTop - currentTimeEle.offsetHeight / 2);\n      }\n    }\n  }, {\n    key: \"getTopFromDateTime\",\n    value: function getTopFromDateTime(date) {\n      var startHour = this.getStartHour();\n      var diffInMinutes = (date.getHours() - startHour.getHours()) * 60 + (date.getMinutes() - startHour.getMinutes());\n      return diffInMinutes * this.getWorkCellHeight() * this.parent.activeViewOptions.timeScale.slotCount / this.parent.activeViewOptions.timeScale.interval;\n    }\n  }, {\n    key: \"getWorkCellHeight\",\n    value: function getWorkCellHeight() {\n      return parseFloat(this.element.querySelector('.' + WORK_CELLS_CLASS).getBoundingClientRect().height.toFixed(2));\n    }\n  }, {\n    key: \"getTdContent\",\n    value: function getTdContent(date, type, groupIndex) {\n      var cntEle;\n      var wrapper = createElement('div');\n      var templateName = '';\n      var templateId = this.parent.element.id + '_';\n\n      switch (type) {\n        case 'dateHeader':\n          if (this.parent.activeViewOptions.dateHeaderTemplate) {\n            templateName = 'dateHeaderTemplate';\n            var args = {\n              date: date,\n              type: type\n            };\n            var viewName = this.parent.activeViewOptions.dateHeaderTemplateName;\n            cntEle = [].slice.call(this.parent.getDateHeaderTemplate()(args, this.parent, templateName, templateId + viewName + templateName, false));\n          } else {\n            wrapper.innerHTML = this.parent.activeView.isTimelineView() ? \"<span class=\\\"e-header-date e-navigate\\\">\".concat(this.getTimelineDate(date), \"</span>\") : \"<div class=\\\"e-header-day\\\">\".concat(capitalizeFirstWord(this.getDayName(date), 'single'), \"</div>\") + \"<div class=\\\"e-header-date e-navigate\\\" role=\\\"link\\\">\".concat(this.getDate(date), \"</div>\");\n            cntEle = [].slice.call(wrapper.childNodes);\n          }\n\n          break;\n\n        case 'majorSlot':\n          if (this.parent.activeViewOptions.timeScale.majorSlotTemplate) {\n            templateName = 'majorSlotTemplate';\n            var _args2 = {\n              date: date,\n              type: type\n            };\n            cntEle = [].slice.call(this.parent.getMajorSlotTemplate()(_args2, this.parent, templateName, templateId + templateName, false));\n          } else {\n            wrapper.innerHTML = \"<span>\".concat(this.getTime(date), \"</span>\");\n            cntEle = [].slice.call(wrapper.childNodes);\n          }\n\n          break;\n\n        case 'minorSlot':\n          if (this.parent.activeViewOptions.timeScale.minorSlotTemplate) {\n            templateName = 'minorSlotTemplate';\n            var _args3 = {\n              date: date,\n              type: type\n            };\n            cntEle = [].slice.call(this.parent.getMinorSlotTemplate()(_args3, this.parent, templateName, templateId + templateName, false));\n          } else {\n            cntEle = [].slice.call(wrapper.childNodes);\n          }\n\n          break;\n\n        case 'alldayCells':\n          if (this.parent.activeViewOptions.cellTemplate) {\n            var _viewName = this.parent.activeViewOptions.cellTemplateName;\n            templateName = 'cellTemplate';\n            var _args4 = {\n              date: date,\n              type: type,\n              groupIndex: groupIndex\n            };\n            cntEle = [].slice.call(this.parent.getCellTemplate()(_args4, this.parent, templateName, templateId + _viewName + templateName, false));\n          }\n\n          break;\n      }\n\n      return cntEle;\n    }\n  }, {\n    key: \"refreshHeader\",\n    value: function refreshHeader() {\n      remove(this.element.querySelector('tbody tr'));\n      this.renderHeader();\n      this.parent.notify(contentReady, {});\n    }\n  }, {\n    key: \"renderLayout\",\n    value: function renderLayout(type) {\n      this.setPanel(createElement('div', {\n        className: TABLE_WRAP_CLASS\n      }));\n      var clsList = [this.baseCssClass, this.viewClass];\n      clsList.push(type);\n\n      if (this.parent.activeViewOptions.group.byDate) {\n        clsList.push('e-by-date');\n      }\n\n      if (!this.parent.activeViewOptions.timeScale.enable) {\n        addClass([this.element], [TIMESCALE_DISABLE, this.viewClass]);\n      }\n\n      if (this.parent.activeViewOptions.allowVirtualScrolling) {\n        clsList.push(VIRTUAL_SCROLL_CLASS);\n      }\n\n      if (this.parent.eventSettings.ignoreWhitespace) {\n        clsList.push(IGNORE_WHITESPACE);\n      }\n\n      this.renderPanel(type);\n      addClass([this.element], clsList);\n      this.element.appendChild(this.createTableLayout(OUTER_TABLE_CLASS));\n      this.element.querySelector('table').setAttribute('role', 'presentation');\n      this.colLevels = this.generateColumnLevels();\n      this.renderHeader();\n      this.renderContent();\n\n      if (this.parent.uiStateValues.isGroupAdaptive && !this.parent.element.querySelector('.' + RESOURCE_TOOLBAR_CONTAINER)) {\n        this.renderResourceMobileLayout();\n      }\n\n      this.parent.notify(contentReady, {});\n    }\n  }, {\n    key: \"renderHeader\",\n    value: function renderHeader() {\n      var tr = createElement('tr');\n      var dateTd = createElement('td');\n      dateTd.appendChild(this.renderDatesHeader());\n\n      if (this.parent.activeViewOptions.timeScale.enable) {\n        var indentTd = createElement('td', {\n          className: LEFT_INDENT_CLASS\n        });\n        indentTd.appendChild(this.renderLeftIndent());\n        tr.appendChild(indentTd);\n      }\n\n      tr.appendChild(dateTd);\n      prepend([tr], this.element.querySelector('tbody'));\n    }\n  }, {\n    key: \"renderContent\",\n    value: function renderContent() {\n      var tr = createElement('tr');\n      var workTd = createElement('td');\n\n      if (this.parent.isAdaptive) {\n        workTd.setAttribute('colspan', this.parent.activeViewOptions.timeScale.enable ? '2' : '1');\n        var scrollContainer = createElement('div', {\n          className: SCROLL_CONTAINER_CLASS\n        });\n\n        if (this.parent.activeViewOptions.timeScale.enable) {\n          scrollContainer.appendChild(this.renderTimeCells());\n        }\n\n        scrollContainer.appendChild(this.renderContentArea());\n        workTd.appendChild(scrollContainer);\n        EventHandler.add(scrollContainer, 'scroll', this.onAdaptiveScroll, this);\n        EventHandler.add(scrollContainer, Browser.touchMoveEvent, this.onAdaptiveMove, this);\n        tr.appendChild(workTd);\n      } else {\n        workTd.appendChild(this.renderContentArea());\n\n        if (this.parent.activeViewOptions.timeScale.enable) {\n          var timesTd = createElement('td');\n          timesTd.appendChild(this.renderTimeCells());\n          tr.appendChild(timesTd);\n        }\n\n        tr.appendChild(workTd);\n      }\n\n      this.element.querySelector('tbody').appendChild(tr);\n    }\n  }, {\n    key: \"renderLeftIndent\",\n    value: function renderLeftIndent() {\n      var wrap = createElement('div', {\n        className: LEFT_INDENT_WRAP_CLASS\n      });\n      var tbl = this.createTableLayout();\n      var trEle = createElement('tr');\n      var rowCount = this.colLevels.length;\n      var nth;\n\n      for (var i = 0; i < rowCount; i++) {\n        var _ntr = trEle.cloneNode();\n\n        var _data = {\n          className: [this.colLevels[i][0] && this.colLevels[i][0].className[0]],\n          type: 'emptyCells'\n        };\n\n        if (this.parent.activeViewOptions.showWeekNumber && _data.className.indexOf(HEADER_CELLS_CLASS) !== -1) {\n          _data.className.push(WEEK_NUMBER_CLASS);\n\n          var weekNo = this.parent.getWeekNumberContent(this.renderDates);\n          _data.template = [createElement('span', {\n            innerHTML: '' + weekNo,\n            attrs: {\n              title: this.parent.localeObj.getConstant('week') + ' ' + weekNo\n            }\n          })];\n        }\n\n        nth = this.createTd(_data);\n        this.parent.renderHeaderIndentTemplate(_data, nth);\n\n        _ntr.appendChild(nth);\n\n        tbl.querySelector('tbody').appendChild(_ntr);\n      }\n\n      var ntr = trEle.cloneNode();\n      var appointmentExpandCollapse = createElement('div', {\n        attrs: {\n          'tabindex': '0',\n          'role': 'list',\n          title: this.parent.localeObj.getConstant('expandAllDaySection'),\n          'aria-disabled': 'false',\n          'aria-label': 'Expand section'\n        },\n        className: ALLDAY_APPOINTMENT_SECTION_CLASS + ' ' + APPOINTMENT_ROW_EXPAND_CLASS + ' ' + ICON + ' ' + DISABLE_CLASS\n      });\n      var data = {\n        className: [ALLDAY_CELLS_CLASS],\n        type: 'emptyCells'\n      };\n      nth = this.createTd(data);\n      nth.appendChild(appointmentExpandCollapse);\n      this.parent.renderHeaderIndentTemplate(data, nth);\n      ntr.appendChild(nth);\n      tbl.querySelector('tbody').appendChild(ntr);\n      wrap.appendChild(tbl);\n      return wrap;\n    }\n  }, {\n    key: \"renderDatesHeader\",\n    value: function renderDatesHeader() {\n      var container = createElement('div', {\n        className: DATE_HEADER_CONTAINER_CLASS\n      });\n      var wrap = createElement('div', {\n        className: DATE_HEADER_WRAP_CLASS\n      });\n      container.appendChild(wrap);\n      var tbl = this.createTableLayout();\n      var trEle = createElement('tr');\n      var rowCount = this.colLevels.length;\n      var lastLevel = this.colLevels[rowCount - 1];\n\n      for (var i = 0; i < rowCount; i++) {\n        var ntr = trEle.cloneNode();\n        addClass([ntr], HEADER_ROW_CLASS);\n        var level = this.colLevels[i];\n\n        for (var j = 0; j < level.length; j++) {\n          ntr.appendChild(this.createTd(level[j]));\n        }\n\n        tbl.querySelector('tbody').appendChild(ntr);\n      }\n\n      this.createAllDayRow(tbl, lastLevel);\n      this.createColGroup(tbl, lastLevel);\n      wrap.appendChild(tbl);\n      return container;\n    }\n  }, {\n    key: \"createAllDayRow\",\n    value: function createAllDayRow(table, tdData) {\n      var ntr = createElement('tr');\n      addClass([ntr], ALLDAY_ROW_CLASS);\n\n      for (var j = 0; j < tdData.length; j++) {\n        var td = extend({}, tdData[j]);\n        td.className = [ALLDAY_CELLS_CLASS];\n        td.type = 'alldayCells';\n        var ntd = this.createTd(td);\n        ntd.setAttribute('data-date', td.date.getTime().toString());\n\n        if (!isNullOrUndefined(td.groupIndex)) {\n          ntd.setAttribute('data-group-index', '' + td.groupIndex);\n        } else if (this.parent.uiStateValues.isGroupAdaptive) {\n          ntd.setAttribute('data-group-index', '' + this.parent.uiStateValues.groupIndex);\n        }\n\n        this.wireCellEvents(ntd);\n        ntr.appendChild(ntd);\n      }\n\n      table.querySelector('tbody').appendChild(ntr);\n      var thead = createElement('thead');\n      thead.appendChild(this.createEventWrapper('allDay'));\n      prepend([thead], table);\n    }\n  }, {\n    key: \"createTd\",\n    value: function createTd(td) {\n      var tdEle = createElement('td');\n      this.addAttributes(td, tdEle);\n\n      if (td.date && td.type) {\n        var ele = this.getTdContent(td.date, td.type, td.groupIndex);\n\n        if (ele && ele.length) {\n          append(ele, tdEle);\n        }\n      }\n\n      if (!this.parent.isMinMaxDate(resetTime(new Date('' + td.date)))) {\n        addClass([tdEle], DISABLE_DATES);\n      }\n\n      if (td.type === 'resourceHeader') {\n        this.setResourceHeaderContent(tdEle, td);\n      }\n\n      if (td.type === 'dateHeader' && td.className.indexOf(HEADER_CELLS_CLASS) >= 0) {\n        tdEle.setAttribute('data-date', td.date.getTime().toString());\n\n        if (!isNullOrUndefined(td.groupIndex)) {\n          tdEle.setAttribute('data-group-index', '' + td.groupIndex);\n        }\n\n        this.wireMouseEvents(tdEle);\n      }\n\n      var args = {\n        elementType: td.type,\n        element: tdEle,\n        date: td.date,\n        groupIndex: td.groupIndex\n      };\n      this.parent.trigger(renderCell, args);\n      return tdEle;\n    }\n  }, {\n    key: \"wireCellEvents\",\n    value: function wireCellEvents(element) {\n      EventHandler.add(element, 'mousedown', this.parent.workCellAction.cellMouseDown, this.parent.workCellAction);\n      this.wireMouseEvents(element);\n    }\n  }, {\n    key: \"wireMouseEvents\",\n    value: function wireMouseEvents(element) {\n      EventHandler.add(element, 'click', this.parent.workCellAction.cellClick, this.parent.workCellAction);\n\n      if (!this.parent.isAdaptive) {\n        EventHandler.add(element, 'dblclick', this.parent.workCellAction.cellDblClick, this.parent.workCellAction);\n      }\n    }\n  }, {\n    key: \"renderTimeCells\",\n    value: function renderTimeCells() {\n      var _this94 = this;\n\n      var wrap = createElement('div', {\n        className: TIME_CELLS_WRAP_CLASS\n      });\n      var tbl = this.createTableLayout();\n      var trEle = createElement('tr');\n\n      var handler = function handler(r) {\n        r.type = r.first ? 'majorSlot' : 'minorSlot';\n        r.className = r.last ? [TIME_CELLS_CLASS, TIME_SLOT_CLASS] : [TIME_SLOT_CLASS];\n        var ntr = trEle.cloneNode();\n        var data = {\n          date: r.date,\n          type: r.type,\n          className: r.className\n        };\n        ntr.appendChild(_this94.createTd(data));\n        tbl.querySelector('tbody').appendChild(ntr);\n        return r;\n      };\n\n      this.getTimeSlotRows(handler);\n      wrap.appendChild(tbl);\n      return wrap;\n    }\n  }, {\n    key: \"renderContentArea\",\n    value: function renderContentArea() {\n      var wrap = createElement('div', {\n        className: CONTENT_WRAP_CLASS\n      });\n      var tbl = this.createTableLayout(CONTENT_TABLE_CLASS);\n      this.addAutoHeightClass(tbl);\n      this.renderContentTable(tbl);\n      this.createColGroup(tbl, this.colLevels.slice(-1)[0]);\n      wrap.appendChild(tbl);\n      this.wireCellEvents(tbl.querySelector('tbody'));\n      EventHandler.add(wrap, 'scroll', this.onContentScroll, this);\n      EventHandler.add(wrap, Browser.touchMoveEvent, this.onAdaptiveMove, this);\n      return wrap;\n    }\n  }, {\n    key: \"renderContentTable\",\n    value: function renderContentTable(table) {\n      var _this95 = this;\n\n      var tr = createElement('tr', {\n        attrs: {\n          role: 'row'\n        }\n      });\n      var td = createElement('td', {\n        attrs: {\n          role: 'gridcell',\n          'aria-selected': 'false'\n        }\n      });\n      var tbody = table.querySelector('tbody');\n\n      var handler = function handler(r) {\n        var ntr = tr.cloneNode();\n\n        var _iterator128 = _createForOfIteratorHelper(_this95.colLevels[_this95.colLevels.length - 1]),\n            _step128;\n\n        try {\n          for (_iterator128.s(); !(_step128 = _iterator128.n()).done;) {\n            var tdData = _step128.value;\n\n            var ntd = _this95.createContentTd(tdData, r, td);\n\n            ntr.appendChild(ntd);\n          }\n        } catch (err) {\n          _iterator128.e(err);\n        } finally {\n          _iterator128.f();\n        }\n\n        tbody.appendChild(ntr);\n        return r;\n      };\n\n      this.getTimeSlotRows(handler);\n      this.renderContentTableHeader(table);\n    }\n  }, {\n    key: \"createContentTd\",\n    value: function createContentTd(tdData, r, td) {\n      var ntd = td.cloneNode();\n\n      if (tdData.colSpan) {\n        ntd.setAttribute('colspan', tdData.colSpan.toString());\n      }\n\n      var clsName = this.getContentTdClass(r);\n      var cellDate = resetTime(tdData.date);\n\n      if (!this.parent.isMinMaxDate(cellDate)) {\n        clsName.push(DISABLE_DATES);\n      }\n\n      setTime(cellDate, getDateInMs(r.date));\n      var type = 'workCells';\n\n      if (tdData.className.indexOf(RESOURCE_PARENT_CLASS) !== -1) {\n        clsName.push(RESOURCE_GROUP_CELLS_CLASS);\n        type = 'resourceGroupCells';\n      }\n\n      if (this.parent.workHours.highlight && (this.parent.activeViewOptions.timeScale.enable && this.isWorkHour(cellDate, tdData.startHour, tdData.endHour, tdData.workDays) || !this.parent.activeViewOptions.timeScale.enable && this.isWorkDay(cellDate, tdData.workDays))) {\n        clsName.push(WORK_HOURS_CLASS);\n      }\n\n      addClass([ntd], clsName);\n\n      if (this.parent.activeViewOptions.cellTemplate) {\n        var _args5 = {\n          date: cellDate,\n          type: type,\n          groupIndex: tdData.groupIndex\n        };\n        var scheduleId = this.parent.element.id + '_';\n        var viewName = this.parent.activeViewOptions.cellTemplateName;\n        var templateId = scheduleId + viewName + 'cellTemplate';\n        var tooltipTemplate = [].slice.call(this.parent.getCellTemplate()(_args5, this.parent, 'cellTemplate', templateId, false));\n        append(tooltipTemplate, ntd);\n      }\n\n      ntd.setAttribute('data-date', cellDate.getTime().toString());\n\n      if (!isNullOrUndefined(tdData.groupIndex) || this.parent.uiStateValues.isGroupAdaptive) {\n        var groupIndex = this.parent.uiStateValues.isGroupAdaptive ? this.parent.uiStateValues.groupIndex : tdData.groupIndex;\n        ntd.setAttribute('data-group-index', '' + groupIndex);\n      }\n\n      var args = {\n        elementType: type,\n        element: ntd,\n        date: cellDate,\n        groupIndex: tdData.groupIndex\n      };\n      this.parent.trigger(renderCell, args);\n      return ntd;\n    }\n  }, {\n    key: \"getContentTdClass\",\n    value: function getContentTdClass(r) {\n      return r.last ? [WORK_CELLS_CLASS] : [WORK_CELLS_CLASS, ALTERNATE_CELLS_CLASS];\n    }\n  }, {\n    key: \"renderContentTableHeader\",\n    value: function renderContentTableHeader(table) {\n      var thead = createElement('thead');\n      thead.appendChild(this.createEventWrapper());\n\n      if (this.parent.activeViewOptions.timeScale.enable) {\n        thead.appendChild(this.createEventWrapper('timeIndicator'));\n      }\n\n      prepend([thead], table);\n    }\n  }, {\n    key: \"createEventWrapper\",\n    value: function createEventWrapper() {\n      var type = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : '';\n      var tr = createElement('tr');\n      var levels = this.colLevels.slice(-1)[0];\n\n      for (var i = 0, len = levels.length; i < len; i++) {\n        var col = levels[i];\n        var appointmentWrap = createElement('td', {\n          className: type === 'allDay' ? ALLDAY_APPOINTMENT_WRAPPER_CLASS : type === 'timeIndicator' ? TIMELINE_WRAPPER_CLASS : DAY_WRAPPER_CLASS,\n          attrs: {\n            'data-date': col.date.getTime().toString()\n          }\n        });\n\n        if (!isNullOrUndefined(col.groupIndex)) {\n          appointmentWrap.setAttribute('data-group-index', col.groupIndex.toString());\n        }\n\n        if (type === '') {\n          var innerWrapper = createElement('div', {\n            id: APPOINTMENT_WRAPPER_CLASS + '-' + i.toString(),\n            className: APPOINTMENT_WRAPPER_CLASS\n          });\n          appointmentWrap.appendChild(innerWrapper);\n        }\n\n        tr.appendChild(appointmentWrap);\n      }\n\n      return tr;\n    }\n  }, {\n    key: \"getScrollableElement\",\n    value: function getScrollableElement() {\n      if (this.parent.isAdaptive && !this.isTimelineView()) {\n        return this.element.querySelector('.' + SCROLL_CONTAINER_CLASS);\n      } else {\n        return this.getContentAreaElement();\n      }\n    }\n  }, {\n    key: \"getLeftPanelElement\",\n    value: function getLeftPanelElement() {\n      return this.element.querySelector('.' + TIME_CELLS_WRAP_CLASS);\n    }\n  }, {\n    key: \"getEndDateFromStartDate\",\n    value: function getEndDateFromStartDate(start) {\n      var msMajorInterval = this.parent.activeViewOptions.timeScale.interval * MS_PER_MINUTE;\n      var msInterval = msMajorInterval / this.parent.activeViewOptions.timeScale.slotCount;\n      var end = new Date(start.getTime());\n      end.setMilliseconds(end.getMilliseconds() + msInterval);\n      return end;\n    }\n  }, {\n    key: \"getTimeSlotRows\",\n    value: function getTimeSlotRows(handler) {\n      var rows = [];\n      var startHour = this.getStartHour();\n      var endHour = this.getEndHour();\n      var msMajorInterval = this.parent.activeViewOptions.timeScale.interval * MS_PER_MINUTE;\n      var msInterval = msMajorInterval / this.parent.activeViewOptions.timeScale.slotCount;\n      var length = Math.round(MS_PER_DAY / msInterval);\n      var msStartHour = startHour.getTime();\n      var msEndHour = endHour.getTime();\n\n      if (msStartHour !== msEndHour) {\n        length = Math.abs(msEndHour - msStartHour) / msInterval - (new Date(msEndHour).getTimezoneOffset() - new Date(msStartHour).getTimezoneOffset()) / (60 / this.parent.activeViewOptions.timeScale.slotCount);\n      }\n\n      if (!this.parent.activeViewOptions.timeScale.enable) {\n        length = 1;\n      }\n\n      var start = this.parent.getStartEndTime(this.parent.workHours.start);\n      var end = this.parent.getStartEndTime(this.parent.workHours.end);\n\n      for (var i = 0; i < length; i++) {\n        var dt = new Date(msStartHour + msInterval * i);\n\n        if (isDaylightSavingTime(dt) || new Date(msStartHour).getTimezoneOffset() !== dt.getTimezoneOffset()) {\n          var timeOffset = new Date(msStartHour).getTimezoneOffset() - dt.getTimezoneOffset();\n          dt = new Date(dt.getTime() - 1000 * 60 * timeOffset);\n        }\n\n        var majorTickDivider = i % (msMajorInterval / msInterval);\n        var row = {\n          date: new Date('' + dt),\n          startHour: start,\n          endHour: end,\n          first: majorTickDivider === 0,\n          middle: majorTickDivider < this.parent.activeViewOptions.timeScale.slotCount - 1,\n          last: majorTickDivider === this.parent.activeViewOptions.timeScale.slotCount - 1,\n          type: ''\n        };\n\n        if (handler) {\n          handler(row);\n        }\n\n        rows.push(row);\n      }\n\n      return rows;\n    }\n  }, {\n    key: \"destroy\",\n    value: function destroy() {\n      if (!this.parent || this.parent && this.parent.isDestroyed) {\n        return;\n      }\n\n      this.clearCurrentTimeIndicatorTimer();\n\n      if (this.element) {\n        if (this.appointment) {\n          this.appointment.destroy();\n          this.appointment = null;\n        }\n\n        var contentScrollableEle = this.getContentAreaElement();\n\n        if (contentScrollableEle) {\n          EventHandler.remove(contentScrollableEle, 'scroll', this.onContentScroll);\n          EventHandler.remove(contentScrollableEle, Browser.touchMoveEvent, this.onAdaptiveMove);\n        }\n\n        if (this.parent.resourceBase) {\n          this.parent.resourceBase.destroy();\n        }\n\n        if (this.parent.scheduleTouchModule) {\n          this.parent.scheduleTouchModule.resetValues();\n        }\n\n        _get(_getPrototypeOf(VerticalView.prototype), \"destroy\", this).call(this);\n      }\n    }\n  }]);\n\n  return VerticalView;\n}(ViewBase);\n/**\n * day view\n */\n\n\nvar Day = /*#__PURE__*/function (_VerticalView) {\n  _inherits(Day, _VerticalView);\n\n  var _super19 = _createSuper(Day);\n\n  /**\n   * Constructor for day view\n   *\n   * @param {Schedule} parent Accepts the schedule instance\n   */\n  function Day(parent) {\n    var _this96;\n\n    _classCallCheck(this, Day);\n\n    _this96 = _super19.call(this, parent);\n    _this96.viewClass = 'e-day-view';\n    return _this96;\n  }\n  /**\n   * Get module name.\n   *\n   * @returns {string} Returns the module name.\n   */\n\n\n  _createClass(Day, [{\n    key: \"getModuleName\",\n    value: function getModuleName() {\n      return 'day';\n    }\n  }]);\n\n  return Day;\n}(VerticalView);\n/**\n * week view\n */\n\n\nvar Week = /*#__PURE__*/function (_VerticalView2) {\n  _inherits(Week, _VerticalView2);\n\n  var _super20 = _createSuper(Week);\n\n  /**\n   * Constructor for week view\n   *\n   * @param {Schedule} parent Accepts the schedule instance\n   */\n  function Week(parent) {\n    var _this97;\n\n    _classCallCheck(this, Week);\n\n    _this97 = _super20.call(this, parent);\n    _this97.viewClass = 'e-week-view';\n    return _this97;\n  }\n\n  _createClass(Week, [{\n    key: \"startDate\",\n    value: function startDate() {\n      return this.getViewStartDate();\n    }\n  }, {\n    key: \"endDate\",\n    value: function endDate() {\n      return this.getViewEndDate();\n    }\n    /**\n     * Get module name.\n     *\n     * @returns {string} Returns the module name.\n     */\n\n  }, {\n    key: \"getModuleName\",\n    value: function getModuleName() {\n      return 'week';\n    }\n  }]);\n\n  return Week;\n}(VerticalView);\n/**\n * work week view\n */\n\n\nvar WorkWeek = /*#__PURE__*/function (_VerticalView3) {\n  _inherits(WorkWeek, _VerticalView3);\n\n  var _super21 = _createSuper(WorkWeek);\n\n  /**\n   * Constructor for work week view\n   *\n   * @param {Schedule} parent Accepts the schedule instance\n   */\n  function WorkWeek(parent) {\n    var _this98;\n\n    _classCallCheck(this, WorkWeek);\n\n    _this98 = _super21.call(this, parent);\n    _this98.viewClass = 'e-work-week-view';\n    return _this98;\n  }\n\n  _createClass(WorkWeek, [{\n    key: \"startDate\",\n    value: function startDate() {\n      return this.getViewStartDate();\n    }\n  }, {\n    key: \"endDate\",\n    value: function endDate() {\n      return this.getViewEndDate();\n    }\n    /**\n     * Get module name.\n     *\n     * @returns {string} Returns the module name.\n     */\n\n  }, {\n    key: \"getModuleName\",\n    value: function getModuleName() {\n      return 'workWeek';\n    }\n  }]);\n\n  return WorkWeek;\n}(VerticalView);\n/* eslint-disable @typescript-eslint/no-explicit-any */\n\n/**\n * month view\n */\n\n\nvar Month = /*#__PURE__*/function (_ViewBase2) {\n  _inherits(Month, _ViewBase2);\n\n  var _super22 = _createSuper(Month);\n\n  function Month(parent) {\n    var _this99;\n\n    _classCallCheck(this, Month);\n\n    _this99 = _super22.call(this, parent);\n    _this99.dayNameFormat = 'wide';\n    _this99.viewClass = 'e-month-view';\n    _this99.isInverseTableSelect = false;\n    _this99.monthEvent = null;\n    _this99.monthDates = {};\n    return _this99;\n  }\n\n  _createClass(Month, [{\n    key: \"addEventListener\",\n    value: function addEventListener() {\n      this.parent.on(scrollUiUpdate, this.onScrollUIUpdate, this);\n      this.parent.on(dataReady, this.onDataReady, this);\n      this.parent.on(_cellClick, this.onCellClick, this);\n    }\n  }, {\n    key: \"removeEventListener\",\n    value: function removeEventListener() {\n      if (this.parent) {\n        this.parent.off(scrollUiUpdate, this.onScrollUIUpdate);\n        this.parent.off(dataReady, this.onDataReady);\n        this.parent.off(_cellClick, this.onCellClick);\n      }\n    } // eslint-disable-next-line @typescript-eslint/no-unused-vars\n\n  }, {\n    key: \"onDataReady\",\n    value: function onDataReady(args) {\n      this.monthEvent = new MonthEvent(this.parent);\n      this.monthEvent.renderAppointments();\n      this.parent.notify(eventsLoaded, {});\n    } // eslint-disable-next-line @typescript-eslint/no-unused-vars\n\n  }, {\n    key: \"onCellClick\",\n    value: function onCellClick(event) {}\n  }, {\n    key: \"onContentScroll\",\n    value: function onContentScroll(e) {\n      this.parent.removeNewEventElement();\n      this.parent.notify(virtualScroll, e);\n      this.scrollTopPanel(e.target);\n      this.scrollLeftPanel(e.target);\n      this.setPersistence();\n    }\n  }, {\n    key: \"scrollLeftPanel\",\n    value: function scrollLeftPanel(target) {\n      var leftPanel = this.getLeftPanelElement();\n\n      if (leftPanel) {\n        leftPanel.scrollTop = target.scrollTop;\n      }\n    }\n  }, {\n    key: \"getLeftPanelElement\",\n    value: function getLeftPanelElement() {\n      return this.element.querySelector('.' + WEEK_NUMBER_WRAPPER_CLASS);\n    }\n  }, {\n    key: \"onScrollUIUpdate\",\n    value: function onScrollUIUpdate(args) {\n      var headerHeight = this.getHeaderBarHeight();\n      var header = this.getDatesHeaderElement();\n      var content = this.getContentAreaElement();\n      var height = this.parent.element.offsetHeight - headerHeight - header.offsetHeight;\n      var leftPanel = this.getLeftPanelElement();\n\n      if (this.parent.height !== 'auto') {\n        this.setContentHeight(content, leftPanel, height);\n      }\n\n      var scrollBarWidth = getScrollBarWidth();\n      header.firstElementChild.style[args.cssProperties.rtlBorder] = '';\n      header.style[args.cssProperties.rtlPadding] = '';\n\n      if (content.offsetWidth - content.clientWidth > 0) {\n        header.firstElementChild.style[args.cssProperties.border] = scrollBarWidth > 0 ? '1px' : '0px';\n        header.style[args.cssProperties.padding] = scrollBarWidth > 0 ? scrollBarWidth - 1 + 'px' : '0px';\n      } else {\n        header.firstElementChild.style[args.cssProperties.border] = '';\n        header.style[args.cssProperties.padding] = '';\n      }\n\n      this.setColWidth(content);\n\n      if (args.scrollPosition) {\n        if (leftPanel) {\n          leftPanel.scrollTop = args.scrollPosition.top;\n        }\n\n        content.scrollTop = args.scrollPosition.top;\n        content.scrollLeft = args.scrollPosition.left;\n      } else {\n        var headerCell = this.element.querySelector('.' + HEADER_CELLS_CLASS + '[data-date=\"' + this.parent.selectedDate.getTime().toString() + '\"]');\n\n        if (!isNullOrUndefined(headerCell)) {\n          content.scrollLeft = !this.parent.enableRtl ? headerCell.offsetLeft : -(this.parent.getContentTable().offsetWidth - headerCell.offsetLeft - headerCell.offsetWidth);\n        } else {\n          content.scrollLeft = 0;\n        }\n      }\n\n      this.retainScrollPosition();\n    }\n  }, {\n    key: \"setContentHeight\",\n    value: function setContentHeight(content, leftPanelElement, height) {\n      content.style.height = 'auto';\n\n      if (this.parent.currentView === 'Month') {\n        content.style.height = formatUnit(height);\n      }\n\n      if (leftPanelElement) {\n        if (this.parent.currentView === 'MonthAgenda') {\n          height = this.element.querySelector('.' + CONTENT_TABLE_CLASS).offsetHeight;\n        }\n\n        leftPanelElement.style.height = 'auto';\n        leftPanelElement.style.height = formatUnit(height - this.getScrollXIndent(content));\n      }\n    }\n  }, {\n    key: \"generateColumnLevels\",\n    value: function generateColumnLevels() {\n      var colLevels = [];\n      var level = this.getDateSlots(this.renderDates, this.parent.activeViewOptions.workDays);\n\n      if (this.parent.activeViewOptions.group.resources.length > 0) {\n        colLevels = this.parent.resourceBase.generateResourceLevels(level);\n\n        if (this.parent.currentView === 'MonthAgenda') {\n          colLevels = [level];\n        }\n\n        if (this.parent.uiStateValues.isGroupAdaptive && this.parent.resourceBase.lastResourceLevel.length > 0) {\n          var resourceLevel = this.parent.resourceBase.lastResourceLevel[this.parent.uiStateValues.groupIndex];\n          colLevels = [this.getDateSlots(resourceLevel.renderDates, resourceLevel.workDays)];\n        }\n      } else {\n        colLevels.push(level);\n      }\n\n      this.colLevels = colLevels;\n      return colLevels;\n    }\n  }, {\n    key: \"getDateSlots\",\n    value: function getDateSlots(renderDates, workDays) {\n      var count = this.parent.activeViewOptions.showWeekend ? WEEK_LENGTH : workDays.length;\n      var dateSlots = [];\n\n      for (var col = 0; col < count; col++) {\n        var classList$$1 = [HEADER_CELLS_CLASS];\n        var currentDateIndex = renderDates.slice(0, count).map(function (date) {\n          return date.getDay();\n        });\n\n        if (this.isCurrentMonth(this.parent.selectedDate) && currentDateIndex.indexOf(this.parent.getCurrentTime().getDay()) === col) {\n          classList$$1.push(CURRENT_DAY_CLASS);\n        }\n\n        dateSlots.push({\n          date: renderDates[col],\n          type: 'monthDay',\n          className: classList$$1,\n          colSpan: 1,\n          workDays: workDays\n        });\n      }\n\n      return dateSlots;\n    }\n  }, {\n    key: \"getDayNameFormat\",\n    value: function getDayNameFormat() {\n      if (this.parent.isAdaptive || this.parent.activeViewOptions.group.resources.length > 0) {\n        return 'abbreviated';\n      }\n\n      return 'wide';\n    }\n  }, {\n    key: \"renderLayout\",\n    value: function renderLayout(type) {\n      this.dayNameFormat = this.getDayNameFormat();\n      this.setPanel(createElement('div', {\n        className: TABLE_WRAP_CLASS\n      }));\n      var clsList = [this.viewClass];\n      clsList.push(type);\n\n      if (this.parent.activeViewOptions.group.byDate) {\n        clsList.push('e-by-date');\n      }\n\n      if (this.parent.activeViewOptions.allowVirtualScrolling) {\n        clsList.push(VIRTUAL_SCROLL_CLASS);\n      }\n\n      if (this.parent.eventSettings.ignoreWhitespace) {\n        clsList.push(IGNORE_WHITESPACE);\n      }\n\n      addClass([this.element], clsList);\n      this.renderPanel(type);\n      this.element.appendChild(this.createTableLayout(OUTER_TABLE_CLASS));\n      this.element.querySelector('table').setAttribute('role', 'presentation');\n      this.colLevels = this.generateColumnLevels();\n      this.renderHeader();\n      this.renderContent();\n      var target = this.parent.currentView === 'MonthAgenda' ? this.parent.activeView.getPanel() : this.parent.element;\n\n      if (this.parent.uiStateValues.isGroupAdaptive && !target.querySelector('.' + RESOURCE_TOOLBAR_CONTAINER)) {\n        this.renderResourceMobileLayout();\n      }\n\n      this.parent.notify(contentReady, {});\n    }\n  }, {\n    key: \"refreshHeader\",\n    value: function refreshHeader() {\n      remove(this.element.querySelector('tbody tr'));\n      this.renderHeader();\n      this.parent.notify(contentReady, {});\n    }\n  }, {\n    key: \"wireCellEvents\",\n    value: function wireCellEvents(element) {\n      EventHandler.add(element, 'mousedown', this.parent.workCellAction.cellMouseDown, this.parent.workCellAction);\n      EventHandler.add(element, 'click', this.parent.workCellAction.cellClick, this.parent.workCellAction);\n\n      if (!this.parent.isAdaptive) {\n        EventHandler.add(element, 'dblclick', this.parent.workCellAction.cellDblClick, this.parent.workCellAction);\n      }\n    }\n  }, {\n    key: \"renderHeader\",\n    value: function renderHeader() {\n      var tr = createElement('tr');\n      this.renderLeftIndent(tr);\n      var dateTd = createElement('td');\n      dateTd.appendChild(this.renderDatesHeader());\n      tr.appendChild(dateTd);\n      prepend([tr], this.element.querySelector('tbody'));\n    }\n  }, {\n    key: \"renderLeftIndent\",\n    value: function renderLeftIndent(tr) {\n      if (this.parent.activeViewOptions.showWeekNumber) {\n        tr.appendChild(createElement('td', {\n          className: 'e-left-indent'\n        }));\n      }\n    }\n  }, {\n    key: \"renderContent\",\n    value: function renderContent() {\n      var tr = createElement('tr');\n\n      if (this.parent.activeViewOptions.showWeekNumber) {\n        tr.appendChild(this.renderWeekNumberContent());\n      }\n\n      var workTd = createElement('td');\n      var wrap = createElement('div', {\n        className: CONTENT_WRAP_CLASS\n      });\n      var contentArea = this.renderContentArea();\n\n      if (this.parent.currentView === 'Month') {\n        wrap.appendChild(contentArea);\n      } else {\n        var monthAgendaWrapper = createElement('div', {\n          className: TABLE_CONTAINER_CLASS\n        });\n        monthAgendaWrapper.appendChild(contentArea);\n        wrap.appendChild(monthAgendaWrapper);\n      }\n\n      EventHandler.add(wrap, 'scroll', this.onContentScroll, this);\n      workTd.appendChild(wrap);\n      tr.appendChild(workTd);\n      this.element.querySelector('tbody').appendChild(tr);\n      this.renderAppointmentContainer();\n    }\n  }, {\n    key: \"renderWeekNumberContent\",\n    value: function renderWeekNumberContent() {\n      var dateCol = this.renderDates.map(function (date) {\n        return new Date(+date);\n      });\n      var td = createElement('td');\n      var contentWrapper = createElement('div', {\n        className: WEEK_NUMBER_WRAPPER_CLASS\n      });\n      td.appendChild(contentWrapper);\n      var contentWrapTable = this.createTableLayout();\n      contentWrapper.appendChild(contentWrapTable);\n      var noOfDays = this.parent.activeViewOptions.showWeekend ? WEEK_LENGTH : this.parent.activeViewOptions.workDays.length;\n\n      for (var i = 0, length = this.renderDates.length / noOfDays; i < length; i++) {\n        var dates = dateCol.splice(0, noOfDays);\n        var weekNumber = this.parent.getWeekNumberContent(dates);\n        contentWrapTable.querySelector('tbody').appendChild(this.createWeekNumberElement(weekNumber));\n      }\n\n      return td;\n    }\n  }, {\n    key: \"renderAppointmentContainer\",\n    value: function renderAppointmentContainer() {//Here needs to render mobile view appointment details on selected date\n    }\n  }, {\n    key: \"renderDatesHeader\",\n    value: function renderDatesHeader() {\n      var container = createElement('div', {\n        className: DATE_HEADER_CONTAINER_CLASS\n      });\n      var wrap = createElement('div', {\n        className: DATE_HEADER_WRAP_CLASS\n      });\n      container.appendChild(wrap);\n      var table = this.createTableLayout();\n      this.createColGroup(table, this.colLevels[this.colLevels.length - 1]);\n      var trEle = createElement('tr');\n\n      for (var i = 0; i < this.colLevels.length; i++) {\n        var level = this.colLevels[i];\n        var ntr = trEle.cloneNode();\n\n        for (var j = 0; j < level.length; j++) {\n          var td = level[j];\n          ntr.appendChild(this.createHeaderCell(td));\n        }\n\n        table.querySelector('tbody').appendChild(ntr);\n      }\n\n      wrap.appendChild(table);\n      return container;\n    }\n  }, {\n    key: \"createHeaderCell\",\n    value: function createHeaderCell(td) {\n      var tdEle = createElement('td');\n      this.addAttributes(td, tdEle);\n\n      if (td.type === 'monthDay') {\n        var ele = createElement('span', {\n          innerHTML: capitalizeFirstWord(this.parent.getDayNames(this.dayNameFormat)[td.date.getDay()], 'single')\n        });\n        tdEle.appendChild(ele);\n      }\n\n      if (td.type === 'resourceHeader') {\n        this.setResourceHeaderContent(tdEle, td);\n      }\n\n      if (td.type === 'dateHeader') {\n        addClass([tdEle], DATE_HEADER_CLASS);\n        tdEle.setAttribute('data-date', td.date.getTime().toString());\n\n        if (this.parent.activeViewOptions.dateHeaderTemplate) {\n          var cellArgs = {\n            date: td.date,\n            type: td.type\n          };\n          var elementId = this.parent.element.id + '_';\n          var viewName = this.parent.activeViewOptions.dateHeaderTemplateName;\n          var templateId = elementId + viewName + 'dateHeaderTemplate';\n          var dateTemplate = [].slice.call(this.parent.getDateHeaderTemplate()(cellArgs, this.parent, 'dateHeaderTemplate', templateId, false));\n\n          if (dateTemplate && dateTemplate.length) {\n            append(dateTemplate, tdEle);\n          }\n        } else {\n          var _ele = createElement('span', {\n            className: NAVIGATE_CLASS\n          });\n\n          var skeleton = 'full';\n          var title = this.parent.globalize.formatDate(td.date, {\n            skeleton: skeleton,\n            calendar: this.parent.getCalendarMode()\n          });\n\n          _ele.setAttribute('title', capitalizeFirstWord(title, 'multiple'));\n\n          var innerText = this.parent.calendarUtil.isMonthStart(td.date) && !this.isCurrentDate(td.date) && !this.parent.isAdaptive ? this.parent.globalize.formatDate(td.date, {\n            format: 'MMM d',\n            calendar: this.parent.getCalendarMode()\n          }) : this.parent.globalize.formatDate(td.date, {\n            skeleton: 'd',\n            calendar: this.parent.getCalendarMode()\n          });\n          _ele.innerHTML = capitalizeFirstWord(innerText, 'single');\n          tdEle.appendChild(_ele);\n        }\n\n        this.wireCellEvents(tdEle);\n      }\n\n      var args = {\n        elementType: td.type,\n        element: tdEle,\n        date: td.date,\n        groupIndex: td.groupIndex\n      };\n      this.parent.trigger(renderCell, args);\n      return tdEle;\n    }\n  }, {\n    key: \"getContentSlots\",\n    value: function getContentSlots() {\n      if (!(this.colLevels[this.colLevels.length - 1] && this.colLevels[this.colLevels.length - 1][0])) {\n        return [];\n      }\n\n      var slotDatas = [];\n\n      var prepareSlots = function prepareSlots(rowIndex, renderDate, resData, classList$$1) {\n        var data = {\n          date: new Date(+renderDate),\n          groupIndex: resData.groupIndex,\n          workDays: resData.workDays,\n          type: 'monthCells',\n          className: classList$$1 || [WORK_CELLS_CLASS]\n        };\n\n        if (!slotDatas[rowIndex]) {\n          slotDatas[rowIndex] = [];\n        }\n\n        slotDatas[rowIndex].push(data);\n      };\n\n      var includeResource = this.parent.currentView !== 'MonthAgenda' && this.parent.activeViewOptions.group.resources.length > 0;\n\n      if (includeResource && !this.parent.uiStateValues.isGroupAdaptive && !this.parent.activeViewOptions.group.byDate) {\n        var _iterator129 = _createForOfIteratorHelper(this.colLevels[this.colLevels.length - 2]),\n            _step129;\n\n        try {\n          for (_iterator129.s(); !(_step129 = _iterator129.n()).done;) {\n            var res = _step129.value;\n            var dates = res.renderDates.map(function (date) {\n              return new Date(+date);\n            });\n            var count = this.parent.activeViewOptions.showWeekend ? WEEK_LENGTH : res.workDays.length;\n\n            for (var i = 0; i < res.renderDates.length / count; i++) {\n              var colDates = dates.splice(0, count);\n\n              var _iterator130 = _createForOfIteratorHelper(colDates),\n                  _step130;\n\n              try {\n                for (_iterator130.s(); !(_step130 = _iterator130.n()).done;) {\n                  var colDate = _step130.value;\n                  prepareSlots(i, colDate, res);\n                }\n              } catch (err) {\n                _iterator130.e(err);\n              } finally {\n                _iterator130.f();\n              }\n            }\n          }\n        } catch (err) {\n          _iterator129.e(err);\n        } finally {\n          _iterator129.f();\n        }\n      } else {\n        var _dates = this.renderDates.map(function (date) {\n          return new Date(+date);\n        });\n\n        var _count = this.parent.activeViewOptions.showWeekend ? WEEK_LENGTH : this.parent.activeViewOptions.workDays.length;\n\n        for (var _i20 = 0; _i20 < this.renderDates.length / _count; _i20++) {\n          var _colDates = _dates.splice(0, _count);\n\n          var _iterator131 = _createForOfIteratorHelper(_colDates),\n              _step131;\n\n          try {\n            for (_iterator131.s(); !(_step131 = _iterator131.n()).done;) {\n              var _colDate = _step131.value;\n\n              if (includeResource) {\n                var lastRow = this.colLevels[this.colLevels.length - 1];\n                var resourcesTd = lastRow.slice(0, lastRow.length / _count);\n\n                for (var resIndex = 0; resIndex < resourcesTd.length; resIndex++) {\n                  var clsList = void 0;\n\n                  if (resIndex !== 0) {\n                    clsList = [WORK_CELLS_CLASS, DISABLE_DATE];\n                  }\n\n                  prepareSlots(_i20, _colDate, resourcesTd[resIndex], clsList);\n                }\n              } else {\n                prepareSlots(_i20, _colDate, this.colLevels[this.colLevels.length - 1][0]);\n              }\n            }\n          } catch (err) {\n            _iterator131.e(err);\n          } finally {\n            _iterator131.f();\n          }\n        }\n      }\n\n      return slotDatas;\n    }\n  }, {\n    key: \"updateClassList\",\n    value: function updateClassList(data) {\n      if (this.isOtherMonth(data.date)) {\n        data.className.push(OTHERMONTH_CLASS);\n      }\n\n      if (!this.parent.isMinMaxDate(data.date)) {\n        data.className.push(DISABLE_DATES);\n      }\n\n      if (this.parent.currentView === 'MonthAgenda' && this.parent.isSelectedDate(data.date)) {\n        data.className.push(SELECTED_CELL_CLASS);\n      }\n    }\n  }, {\n    key: \"isOtherMonth\",\n    value: function isOtherMonth(date) {\n      return date.getTime() < this.monthDates.start.getTime() || date.getTime() > this.monthDates.end.getTime();\n    }\n  }, {\n    key: \"renderContentArea\",\n    value: function renderContentArea() {\n      var tbl = this.createTableLayout(CONTENT_TABLE_CLASS);\n      this.addAutoHeightClass(tbl);\n\n      if (this.parent.currentView === 'TimelineMonth') {\n        this.createColGroup(tbl, this.colLevels[this.colLevels.length - 1]);\n      }\n\n      var monthDate = new Date(this.parent.selectedDate.getTime());\n      this.monthDates = {\n        start: this.parent.calendarUtil.firstDateOfMonth(monthDate),\n        end: this.parent.calendarUtil.lastDateOfMonth(addMonths(monthDate, this.parent.activeViewOptions.interval - 1))\n      };\n      var tBody = tbl.querySelector('tbody');\n      append(this.getContentRows(), tBody);\n      this.wireCellEvents(tBody);\n      return tbl;\n    }\n  }, {\n    key: \"getContentRows\",\n    value: function getContentRows() {\n      var trows = [];\n      var tr = createElement('tr', {\n        attrs: {\n          role: 'row'\n        }\n      });\n      var td = createElement('td', {\n        attrs: {\n          role: 'gridcell',\n          'aria-selected': 'false'\n        }\n      });\n      var slotDatas = this.getContentSlots();\n\n      for (var row = 0; row < slotDatas.length; row++) {\n        var ntr = tr.cloneNode();\n\n        for (var col = 0; col < slotDatas[row].length; col++) {\n          var ntd = this.createContentTd(slotDatas[row][col], td);\n          ntr.appendChild(ntd);\n        }\n\n        trows.push(ntr);\n      }\n\n      return trows;\n    }\n  }, {\n    key: \"createContentTd\",\n    value: function createContentTd(data, td) {\n      var ntd = td.cloneNode();\n\n      if (data.colSpan) {\n        ntd.setAttribute('colspan', data.colSpan.toString());\n      }\n\n      this.updateClassList(data);\n      var type = data.type;\n\n      if (data.className.indexOf(RESOURCE_PARENT_CLASS) !== -1) {\n        data.className.push(RESOURCE_GROUP_CELLS_CLASS);\n        type = 'resourceGroupCells';\n      }\n\n      if (this.parent.workHours.highlight && this.isWorkDay(data.date, data.workDays)) {\n        data.className.push(WORKDAY_CLASS);\n      }\n\n      if (this.isCurrentDate(data.date)) {\n        data.className.push(CURRENTDATE_CLASS);\n      }\n\n      addClass([ntd], data.className);\n      ntd.setAttribute('data-date', data.date.getTime().toString());\n\n      if (!isNullOrUndefined(data.groupIndex) || this.parent.uiStateValues.isGroupAdaptive) {\n        var groupIndex = this.parent.uiStateValues.isGroupAdaptive ? this.parent.uiStateValues.groupIndex : data.groupIndex;\n        ntd.setAttribute('data-group-index', '' + groupIndex);\n      }\n\n      this.renderDateHeaderElement(data, ntd);\n\n      if (this.parent.activeViewOptions.cellTemplate) {\n        var _args6 = {\n          date: data.date,\n          type: type,\n          groupIndex: data.groupIndex\n        };\n        var scheduleId = this.parent.element.id + '_';\n        var viewName = this.parent.activeViewOptions.cellTemplateName;\n        var templateId = scheduleId + viewName + 'cellTemplate';\n        var cellTemplate = [].slice.call(this.parent.getCellTemplate()(_args6, this.parent, 'cellTemplate', templateId, false));\n        append(cellTemplate, ntd);\n      }\n\n      var args = {\n        elementType: type,\n        element: ntd,\n        date: data.date,\n        groupIndex: data.groupIndex\n      };\n      this.parent.trigger(renderCell, args);\n      return ntd;\n    }\n  }, {\n    key: \"renderDateHeaderElement\",\n    value: function renderDateHeaderElement(data, ntd) {\n      if (this.parent.currentView === 'TimelineMonth') {\n        return;\n      }\n\n      var dateHeader = createElement('div', {\n        className: DATE_HEADER_CLASS\n      });\n\n      if (this.parent.activeViewOptions.cellHeaderTemplate) {\n        var args = {\n          date: data.date,\n          type: data.type,\n          groupIndex: data.groupIndex\n        };\n        var scheduleId = this.parent.element.id + '_';\n        var viewName = this.parent.activeViewOptions.cellHeaderTemplateName;\n        var templateId = scheduleId + viewName + 'cellHeaderTemplate';\n        var cellHeaderTemplate = [].slice.call(this.parent.getCellHeaderTemplate()(args, this.parent, 'cellHeaderTemplate', templateId, false));\n        append(cellHeaderTemplate, dateHeader);\n      } else {\n        var innerText = this.parent.calendarUtil.isMonthStart(data.date) && !this.isCurrentDate(data.date) && !this.parent.isAdaptive ? this.parent.globalize.formatDate(data.date, {\n          format: 'MMM d',\n          calendar: this.parent.getCalendarMode()\n        }) : this.parent.globalize.formatDate(data.date, {\n          skeleton: 'd',\n          calendar: this.parent.getCalendarMode()\n        });\n        dateHeader.innerHTML = capitalizeFirstWord(innerText, 'single');\n      }\n\n      ntd.appendChild(dateHeader);\n\n      if (this.getModuleName() === 'month') {\n        addClass([dateHeader], NAVIGATE_CLASS);\n        var skeleton = 'full';\n        var announcementText = this.parent.globalize.formatDate(data.date, {\n          skeleton: skeleton,\n          calendar: this.parent.getCalendarMode()\n        });\n        dateHeader.setAttribute('aria-label', announcementText);\n      }\n    }\n  }, {\n    key: \"getMonthStart\",\n    value: function getMonthStart(currentDate) {\n      var monthStart = getWeekFirstDate(this.parent.calendarUtil.firstDateOfMonth(currentDate), this.parent.activeViewOptions.firstDayOfWeek);\n      var start = new Date(monthStart.getFullYear(), monthStart.getMonth(), monthStart.getDate());\n      return start;\n    }\n  }, {\n    key: \"getMonthEnd\",\n    value: function getMonthEnd(currentDate) {\n      var endDate = addMonths(currentDate, this.parent.activeViewOptions.interval - 1);\n      var lastWeekOfMonth = getWeekFirstDate(this.parent.calendarUtil.lastDateOfMonth(endDate), this.parent.activeViewOptions.firstDayOfWeek);\n      var monthEnd = addDays(lastWeekOfMonth, WEEK_LENGTH - 1);\n      return monthEnd;\n    }\n  }, {\n    key: \"getRenderDates\",\n    value: function getRenderDates(workDays) {\n      var renderDates = [];\n      var currentDate = resetTime(this.parent.selectedDate);\n      var start = this.getMonthStart(currentDate);\n      var monthEnd = this.getMonthEnd(currentDate);\n\n      do {\n        if (this.parent.activeViewOptions.showWeekend) {\n          renderDates.push(start);\n        } else {\n          if (this.isWorkDay(start, workDays)) {\n            renderDates.push(start);\n          }\n        }\n\n        start = addDays(start, 1);\n\n        if (start.getHours() > 0) {\n          start = resetTime(start);\n        }\n      } while (start.getTime() <= monthEnd.getTime());\n\n      if (!workDays) {\n        this.renderDates = renderDates;\n      }\n\n      if (this.parent.headerModule) {\n        this.parent.headerModule.previousNextIconHandler();\n      }\n\n      return renderDates;\n    }\n  }, {\n    key: \"getNextPreviousDate\",\n    value: function getNextPreviousDate(type) {\n      if (type === 'next') {\n        return addMonths(this.parent.selectedDate, this.parent.activeViewOptions.interval);\n      } else {\n        return addMonths(this.parent.selectedDate, -this.parent.activeViewOptions.interval);\n      }\n    }\n  }, {\n    key: \"getEndDateFromStartDate\",\n    value: function getEndDateFromStartDate(start) {\n      return addDays(new Date(start.getTime()), 1);\n    }\n  }, {\n    key: \"getDateRangeText\",\n    value: function getDateRangeText() {\n      if (this.parent.isAdaptive || isNullOrUndefined(this.parent.activeViewOptions.dateFormat)) {\n        if (this.parent.activeViewOptions.interval > 1) {\n          var endDate = addMonths(lastDateOfMonth(this.parent.selectedDate), this.parent.activeViewOptions.interval - 1);\n\n          if (this.parent.selectedDate.getFullYear() === endDate.getFullYear()) {\n            var monthNames = this.parent.globalize.formatDate(this.parent.selectedDate, {\n              format: 'MMMM',\n              calendar: this.parent.getCalendarMode()\n            }) + ' - ' + this.parent.globalize.formatDate(endDate, {\n              format: 'MMMM ',\n              calendar: this.parent.getCalendarMode()\n            }) + this.parent.globalize.formatDate(endDate, {\n              skeleton: 'y',\n              calendar: this.parent.getCalendarMode()\n            });\n            return capitalizeFirstWord(monthNames, 'single');\n          }\n\n          var text = this.parent.globalize.formatDate(this.parent.selectedDate, {\n            format: 'MMMM',\n            calendar: this.parent.getCalendarMode()\n          }) + ' ' + this.parent.selectedDate.getFullYear() + ' - ' + this.parent.globalize.formatDate(endDate, {\n            format: 'MMMM ',\n            calendar: this.parent.getCalendarMode()\n          }) + this.parent.globalize.formatDate(endDate, {\n            skeleton: 'y',\n            calendar: this.parent.getCalendarMode()\n          });\n          return capitalizeFirstWord(text, 'single');\n        }\n\n        var format = this.parent.activeViewOptions.dateFormat ? this.parent.activeViewOptions.dateFormat : 'MMMM y';\n        return capitalizeFirstWord(this.parent.globalize.formatDate(this.parent.selectedDate, {\n          format: format,\n          calendar: this.parent.getCalendarMode()\n        }), 'single');\n      }\n\n      return this.formatDateRange(this.parent.selectedDate);\n    }\n  }, {\n    key: \"getLabelText\",\n    value: function getLabelText(view) {\n      return this.parent.localeObj.getConstant(view) + ' of ' + capitalizeFirstWord(this.parent.globalize.formatDate(this.parent.selectedDate, {\n        format: 'MMMM y',\n        calendar: this.parent.getCalendarMode()\n      }), 'single');\n    }\n  }, {\n    key: \"createWeekNumberElement\",\n    value: function createWeekNumberElement(text) {\n      var tr = createElement('tr');\n      var td = createElement('td', {\n        className: WEEK_NUMBER_CLASS,\n        attrs: {\n          'title': text ? this.parent.localeObj.getConstant('week') + ' ' + text : ''\n        },\n        innerHTML: text || ''\n      });\n      tr.appendChild(td);\n      var args = {\n        elementType: 'weekNumberCell',\n        element: td\n      };\n      this.parent.trigger(renderCell, args);\n      return tr;\n    }\n  }, {\n    key: \"unWireEvents\",\n    value: function unWireEvents() {\n      var contentScrollableEle = this.element.querySelector('.' + CONTENT_WRAP_CLASS);\n\n      if (contentScrollableEle) {\n        EventHandler.remove(contentScrollableEle, 'scroll', this.onContentScroll);\n      }\n    }\n  }, {\n    key: \"getModuleName\",\n    value: function getModuleName() {\n      return 'month';\n    }\n  }, {\n    key: \"destroy\",\n    value: function destroy() {\n      if (!this.parent || this.parent && this.parent.isDestroyed) {\n        return;\n      }\n\n      if (this.element) {\n        if (this.monthEvent) {\n          this.monthEvent.destroy();\n          this.monthEvent = null;\n        }\n\n        this.unWireEvents();\n\n        if (this.parent.resourceBase) {\n          this.parent.resourceBase.destroy();\n        }\n\n        if (this.parent.scheduleTouchModule) {\n          this.parent.scheduleTouchModule.resetValues();\n        }\n\n        _get(_getPrototypeOf(Month.prototype), \"destroy\", this).call(this);\n      }\n    }\n  }]);\n\n  return Month;\n}(ViewBase);\n/* eslint-disable @typescript-eslint/no-explicit-any */\n\n/**\n * year view\n */\n\n\nvar Year = /*#__PURE__*/function (_ViewBase3) {\n  _inherits(Year, _ViewBase3);\n\n  var _super23 = _createSuper(Year);\n\n  function Year(parent) {\n    var _this100;\n\n    _classCallCheck(this, Year);\n\n    _this100 = _super23.call(this, parent);\n    _this100.viewClass = 'e-year-view';\n    _this100.isInverseTableSelect = false;\n    _this100.yearEventModule = null;\n    return _this100;\n  }\n\n  _createClass(Year, [{\n    key: \"getModuleName\",\n    value: function getModuleName() {\n      return 'year';\n    }\n  }, {\n    key: \"renderLayout\",\n    value: function renderLayout(className) {\n      if (this.parent.resourceBase) {\n        this.parent.resourceBase.generateResourceLevels([{\n          renderDates: this.parent.activeView.renderDates\n        }]);\n      }\n\n      this.setPanel(createElement('div', {\n        className: TABLE_WRAP_CLASS\n      }));\n      var viewTypeClass = this.parent.activeViewOptions.orientation === 'Horizontal' ? 'e-horizontal' : 'e-vertical';\n      addClass([this.element], [this.viewClass, viewTypeClass, className]);\n      this.renderPanel(className);\n      var calendarTable = this.createTableLayout(OUTER_TABLE_CLASS);\n      this.element.appendChild(calendarTable);\n      this.element.querySelector('table').setAttribute('role', 'presentation');\n      var calendarTBody = calendarTable.querySelector('tbody');\n      this.rowCount = this.getRowColumnCount('row');\n      this.columnCount = this.getRowColumnCount('column');\n      this.renderHeader(calendarTBody);\n      this.renderContent(calendarTBody);\n\n      if (this.parent.currentView !== 'Year' && this.parent.uiStateValues.isGroupAdaptive) {\n        this.generateColumnLevels();\n        this.renderResourceMobileLayout();\n      }\n\n      this.wireEvents(this.element.querySelector('.' + CONTENT_WRAP_CLASS), 'scroll');\n      this.parent.notify(contentReady, {});\n    } // eslint-disable-next-line @typescript-eslint/no-unused-vars\n\n  }, {\n    key: \"renderHeader\",\n    value: function renderHeader(headerWrapper) {}\n  }, {\n    key: \"renderContent\",\n    value: function renderContent(content) {\n      var tr = createElement('tr');\n      content.appendChild(tr);\n      var td = createElement('td');\n      tr.appendChild(td);\n      this.element.querySelector('tbody').appendChild(tr);\n      var contentWrapper = createElement('div', {\n        className: CONTENT_WRAP_CLASS\n      });\n      td.appendChild(contentWrapper);\n      var calendarTable = this.createTableLayout('e-calendar-table');\n      contentWrapper.appendChild(calendarTable);\n      var cTr = createElement('tr');\n      calendarTable.querySelector('tbody').appendChild(cTr);\n      var cTd = createElement('td');\n      cTr.appendChild(cTd);\n      var calendarWrapper = createElement('div', {\n        className: 'e-calendar-wrapper'\n      });\n      cTd.appendChild(calendarWrapper);\n      var months = this.getMonths();\n\n      var _iterator132 = _createForOfIteratorHelper(months),\n          _step132;\n\n      try {\n        for (_iterator132.s(); !(_step132 = _iterator132.n()).done;) {\n          var month = _step132.value;\n          var currentMonth = new Date(this.parent.selectedDate.getFullYear(), month, 1);\n          var calendarElement = createElement('div', {\n            className: 'e-month-calendar e-calendar',\n            attrs: {\n              'data-role': 'calendar'\n            }\n          });\n          calendarElement.appendChild(this.renderCalendarHeader(currentMonth));\n          calendarElement.appendChild(this.renderCalendarContent(currentMonth));\n          calendarWrapper.appendChild(calendarElement);\n        }\n      } catch (err) {\n        _iterator132.e(err);\n      } finally {\n        _iterator132.f();\n      }\n    }\n  }, {\n    key: \"renderCalendarHeader\",\n    value: function renderCalendarHeader(currentDate) {\n      var headerWrapper = createElement('div', {\n        className: 'e-header e-month'\n      });\n      var headerContent = createElement('div', {\n        className: 'e-day e-title',\n        innerHTML: this.getMonthName(currentDate)\n      });\n      headerWrapper.appendChild(headerContent);\n      this.parent.trigger(renderCell, {\n        elementType: 'headerCells',\n        element: headerContent,\n        date: currentDate\n      });\n      return headerWrapper;\n    }\n  }, {\n    key: \"renderCalendarContent\",\n    value: function renderCalendarContent(currentDate) {\n      var dateCollection = this.getMonthDates(currentDate);\n      var contentWrapper = createElement('div', {\n        className: 'e-content e-month'\n      });\n      var contentTable = this.createTableLayout('e-calendar-table ' + CONTENT_TABLE_CLASS);\n      contentWrapper.appendChild(contentTable);\n      var thead = createElement('thead', {\n        className: 'e-week-header'\n      });\n      var tr = createElement('tr');\n      var currentWeek = getWeekFirstDate(firstDateOfMonth(currentDate), this.parent.firstDayOfWeek);\n\n      if (this.parent.activeViewOptions.showWeekNumber) {\n        tr.appendChild(createElement('th'));\n      }\n\n      for (var i = 0; i < WEEK_LENGTH; i++) {\n        tr.appendChild(createElement('th', {\n          innerHTML: this.parent.getDayNames('narrow')[currentWeek.getDay()]\n        }));\n        currentWeek = new Date(currentWeek.getTime() + MS_PER_DAY);\n      }\n\n      thead.appendChild(tr);\n      prepend([thead], contentTable);\n      var tbody = contentTable.querySelector('tbody');\n\n      while (dateCollection.length > 0) {\n        var weekDates = dateCollection.splice(0, WEEK_LENGTH);\n\n        var _tr2 = createElement('tr', {\n          attrs: {\n            'role': 'row'\n          }\n        });\n\n        if (this.parent.activeViewOptions.showWeekNumber) {\n          var weekNumber = this.parent.getWeekNumberContent(weekDates);\n          var td = createElement('td', {\n            className: 'e-week-number',\n            attrs: {\n              'role': 'gridcell',\n              'title': 'Week ' + weekNumber\n            },\n            innerHTML: weekNumber\n          });\n\n          _tr2.appendChild(td);\n\n          this.parent.trigger(renderCell, {\n            elementType: 'weekNumberCells',\n            element: td\n          });\n        }\n\n        var _iterator133 = _createForOfIteratorHelper(weekDates),\n            _step133;\n\n        try {\n          for (_iterator133.s(); !(_step133 = _iterator133.n()).done;) {\n            var date = _step133.value;\n\n            var _td2 = createElement('td', {\n              className: 'e-cell ' + WORK_CELLS_CLASS,\n              attrs: {\n                'role': 'gridcell',\n                'aria-selected': 'false',\n                'data-date': date.getTime().toString()\n              }\n            });\n\n            var span = createElement('span', {\n              className: 'e-day',\n              innerHTML: this.parent.globalize.formatDate(date, {\n                skeleton: 'd',\n                calendar: this.parent.getCalendarMode()\n              }),\n              attrs: {\n                title: this.parent.globalize.formatDate(date, {\n                  type: 'date',\n                  skeleton: 'full'\n                })\n              }\n            });\n\n            _td2.appendChild(span);\n\n            var classList$$1 = [];\n\n            if (currentDate.getMonth() !== date.getMonth()) {\n              classList$$1.push(OTHERMONTH_CLASS);\n            }\n\n            if (this.isCurrentDate(date) && currentDate.getMonth() === date.getMonth()) {\n              classList$$1 = classList$$1.concat(['e-today', 'e-selected']);\n            }\n\n            if (classList$$1.length > 0) {\n              addClass([_td2], classList$$1);\n            }\n\n            _tr2.appendChild(_td2);\n\n            this.wireEvents(_td2, 'cell');\n            this.parent.trigger(renderCell, {\n              elementType: 'workCells',\n              element: _td2,\n              date: date\n            });\n          }\n        } catch (err) {\n          _iterator133.e(err);\n        } finally {\n          _iterator133.f();\n        }\n\n        tbody.appendChild(_tr2);\n      }\n\n      return contentWrapper;\n    }\n  }, {\n    key: \"createTableColGroup\",\n    value: function createTableColGroup(count) {\n      var colGroupEle = createElement('colgroup');\n\n      for (var i = 0; i < count; i++) {\n        colGroupEle.appendChild(createElement('col'));\n      }\n\n      return colGroupEle;\n    }\n  }, {\n    key: \"getMonthName\",\n    value: function getMonthName(date) {\n      var month = this.parent.globalize.formatDate(date, {\n        format: this.parent.activeViewOptions.dateFormat || 'MMMM y',\n        calendar: this.parent.getCalendarMode()\n      });\n      return capitalizeFirstWord(month, 'multiple');\n    }\n  }, {\n    key: \"generateColumnLevels\",\n    value: function generateColumnLevels() {\n      var colLevels = [];\n      var level = this.getDateSlots([this.parent.selectedDate], this.parent.activeViewOptions.workDays);\n\n      if (this.parent.activeViewOptions.group.resources.length > 0) {\n        colLevels = this.parent.resourceBase.generateResourceLevels(level);\n\n        if (this.parent.uiStateValues.isGroupAdaptive) {\n          var resourceLevel = this.parent.resourceBase.lastResourceLevel[this.parent.uiStateValues.groupIndex];\n          colLevels = [this.getDateSlots([this.parent.selectedDate], resourceLevel.workDays)];\n        }\n      } else {\n        colLevels.push(level);\n      }\n\n      colLevels.pop();\n      this.colLevels = colLevels;\n      return colLevels;\n    } // eslint-disable-next-line max-len\n\n  }, {\n    key: \"getDateSlots\",\n    value: function getDateSlots(renderDates, workDays) {\n      var startHour = arguments.length > 2 && arguments[2] !== undefined ? arguments[2] : this.parent.workHours.start;\n      var endHour = arguments.length > 3 && arguments[3] !== undefined ? arguments[3] : this.parent.workHours.end;\n      var dateCol = [{\n        date: renderDates[0],\n        type: 'dateHeader',\n        className: [HEADER_CELLS_CLASS],\n        colSpan: 1,\n        workDays: workDays,\n        startHour: new Date(+this.parent.globalize.parseDate(startHour, {\n          skeleton: 'Hm'\n        })),\n        endHour: new Date(+this.parent.globalize.parseDate(endHour, {\n          skeleton: 'Hm'\n        }))\n      }];\n      return dateCol;\n    }\n  }, {\n    key: \"getMonthDates\",\n    value: function getMonthDates(date) {\n      var startDate = getWeekFirstDate(firstDateOfMonth(date), this.parent.firstDayOfWeek);\n      var endDate = addDays(new Date(+startDate), 6 * WEEK_LENGTH);\n      var dateCollection = [];\n\n      for (var start = startDate; start.getTime() < endDate.getTime(); start = addDays(start, 1)) {\n        dateCollection.push(resetTime(new Date(start)));\n      }\n\n      return dateCollection;\n    }\n  }, {\n    key: \"getRowColumnCount\",\n    value: function getRowColumnCount(type) {\n      var months = this.getMonths();\n      var year = this.parent.selectedDate.getFullYear();\n      var monthDaysCount = [];\n\n      var _iterator134 = _createForOfIteratorHelper(months),\n          _step134;\n\n      try {\n        for (_iterator134.s(); !(_step134 = _iterator134.n()).done;) {\n          var month = _step134.value;\n          monthDaysCount.push(new Date(year, month, 1).getDay() + new Date(year, month + 1, 0).getDate());\n        }\n      } catch (err) {\n        _iterator134.e(err);\n      } finally {\n        _iterator134.f();\n      }\n\n      var maxCount = Math.max.apply(Math, monthDaysCount);\n      var count;\n\n      if (type === 'row') {\n        count = this.parent.activeViewOptions.orientation === 'Horizontal' ? months.length : maxCount;\n      } else {\n        count = this.parent.activeViewOptions.orientation === 'Horizontal' ? maxCount : months.length;\n      }\n\n      return count;\n    }\n  }, {\n    key: \"isCurrentDate\",\n    value: function isCurrentDate(date) {\n      return resetTime(new Date()).getTime() === resetTime(new Date(date.getTime())).getTime();\n    }\n  }, {\n    key: \"getMonths\",\n    value: function getMonths() {\n      var _this101 = this;\n\n      // eslint-disable-next-line prefer-spread\n      return Array.apply(null, {\n        length: this.parent.activeViewOptions.monthsCount\n      }).map(function (value, index) {\n        return _this101.parent.firstMonthOfYear + index;\n      });\n    }\n  }, {\n    key: \"onCellClick\",\n    value: function onCellClick(e) {\n      var target = closest(e.target, '.' + WORK_CELLS_CLASS);\n      var startDate = this.parent.getDateFromElement(target);\n      var endDate = addDays(new Date(startDate.getTime()), 1);\n      var filteredEvents = this.parent.eventBase.filterEvents(startDate, endDate);\n      var moreEventArgs = {\n        date: startDate,\n        event: filteredEvents,\n        element: e.target\n      };\n      this.parent.quickPopup.moreEventClick(moreEventArgs, endDate);\n    }\n  }, {\n    key: \"onContentScroll\",\n    value: function onContentScroll(e) {\n      var target = e.target;\n      var headerWrapper = this.getDatesHeaderElement();\n\n      if (headerWrapper) {\n        headerWrapper.firstElementChild.scrollLeft = target.scrollLeft;\n      }\n\n      var scrollTopSelector = \".\".concat(MONTH_HEADER_WRAPPER, \",.\").concat(RESOURCE_COLUMN_WRAP_CLASS);\n      var scrollTopElement = this.element.querySelector(scrollTopSelector);\n\n      if (scrollTopElement) {\n        scrollTopElement.scrollTop = target.scrollTop;\n      }\n\n      this.setPersistence();\n    }\n  }, {\n    key: \"onScrollUiUpdate\",\n    value: function onScrollUiUpdate(args) {\n      var height = this.parent.element.offsetHeight - this.getHeaderBarHeight();\n      var headerWrapper = this.element.querySelector('.' + DATE_HEADER_CONTAINER_CLASS);\n\n      if (headerWrapper) {\n        height -= headerWrapper.offsetHeight;\n      }\n\n      var contentWrapper = this.element.querySelector('.' + CONTENT_WRAP_CLASS);\n\n      if (contentWrapper) {\n        contentWrapper.style.height = formatUnit(height);\n      }\n\n      if (!this.parent.isAdaptive && headerWrapper) {\n        var scrollBarWidth = getScrollBarWidth();\n\n        if (contentWrapper.offsetWidth - contentWrapper.clientWidth > 0) {\n          headerWrapper.firstElementChild.style[args.cssProperties.border] = scrollBarWidth > 0 ? '1px' : '0px';\n          headerWrapper.style[args.cssProperties.padding] = scrollBarWidth > 0 ? scrollBarWidth - 1 + 'px' : '0px';\n        } else {\n          headerWrapper.firstElementChild.style[args.cssProperties.border] = '';\n          headerWrapper.style[args.cssProperties.padding] = '';\n        }\n      }\n\n      this.setColWidth(this.getContentAreaElement());\n      var leftPanelSelector = \".\".concat(MONTH_HEADER_WRAPPER, \",.\").concat(RESOURCE_COLUMN_WRAP_CLASS);\n      var leftPanelElement = this.element.querySelector(leftPanelSelector);\n\n      if (leftPanelElement) {\n        var isYScroll = contentWrapper.scrollWidth > contentWrapper.clientWidth;\n        leftPanelElement.style.height = formatUnit(height - (isYScroll ? 17 : 0));\n      }\n\n      this.retainScrollPosition();\n    }\n  }, {\n    key: \"getStartDate\",\n    value: function getStartDate() {\n      return new Date(this.parent.selectedDate.getFullYear(), this.parent.firstMonthOfYear % 12, 1);\n    }\n  }, {\n    key: \"getEndDate\",\n    value: function getEndDate() {\n      return addDays(addMonths(this.getStartDate(), this.parent.monthsCount), -1);\n    }\n  }, {\n    key: \"startDate\",\n    value: function startDate() {\n      return getWeekFirstDate(this.getStartDate(), this.parent.firstDayOfWeek);\n    }\n  }, {\n    key: \"endDate\",\n    value: function endDate() {\n      return addDays(getWeekLastDate(this.getEndDate(), this.parent.firstDayOfWeek), 1);\n    }\n  }, {\n    key: \"getEndDateFromStartDate\",\n    value: function getEndDateFromStartDate(start) {\n      var date = new Date(start.getTime());\n\n      if (this.parent.activeViewOptions.group.resources.length > 0 && !this.parent.uiStateValues.isGroupAdaptive) {\n        date = lastDateOfMonth(date);\n      }\n\n      return addDays(new Date(date.getTime()), 1);\n    }\n  }, {\n    key: \"getNextPreviousDate\",\n    value: function getNextPreviousDate(type) {\n      return addYears(this.parent.selectedDate, type === 'next' ? 1 : -1);\n    }\n  }, {\n    key: \"getDateRangeText\",\n    value: function getDateRangeText() {\n      var startDate = this.getStartDate();\n      var endDate = this.getEndDate();\n\n      if (startDate.getFullYear() !== endDate.getFullYear()) {\n        return this.parent.globalize.formatDate(startDate, {\n          skeleton: 'yMMM'\n        }) + ' - ' + this.parent.globalize.formatDate(endDate, {\n          skeleton: 'yMMM'\n        });\n      } else {\n        return this.parent.globalize.formatDate(this.parent.selectedDate, {\n          skeleton: 'y'\n        });\n      }\n    }\n  }, {\n    key: \"addEventListener\",\n    value: function addEventListener() {\n      this.parent.on(scrollUiUpdate, this.onScrollUiUpdate, this);\n      this.parent.on(dataReady, this.onDataReady, this);\n    }\n  }, {\n    key: \"removeEventListener\",\n    value: function removeEventListener() {\n      if (this.parent) {\n        this.parent.off(scrollUiUpdate, this.onScrollUiUpdate);\n        this.parent.off(dataReady, this.onDataReady);\n      }\n    }\n  }, {\n    key: \"onDataReady\",\n    value: function onDataReady(args) {\n      this.yearEventModule = new YearEvent(this.parent);\n      this.yearEventModule.renderAppointments();\n      this.parent.notify(eventsLoaded, args);\n    }\n  }, {\n    key: \"wireEvents\",\n    value: function wireEvents(element, type) {\n      if (type === 'cell') {\n        if (this.parent.currentView !== 'TimelineYear') {\n          EventHandler.add(element, 'click', this.onCellClick, this);\n        } else {\n          EventHandler.add(element, 'click', this.parent.workCellAction.cellClick, this.parent.workCellAction);\n\n          if (!this.parent.isAdaptive) {\n            EventHandler.add(element, 'dblclick', this.parent.workCellAction.cellDblClick, this.parent.workCellAction);\n          }\n        }\n      } else {\n        EventHandler.add(element, 'scroll', this.onContentScroll, this);\n      }\n    }\n  }, {\n    key: \"destroy\",\n    value: function destroy() {\n      if (!this.parent || this.parent && this.parent.isDestroyed) {\n        return;\n      }\n\n      if (this.element) {\n        var contentScroll = this.element.querySelector('.' + CONTENT_WRAP_CLASS);\n\n        if (contentScroll) {\n          EventHandler.remove(contentScroll, 'scroll', this.onContentScroll);\n        }\n\n        if (this.yearEventModule) {\n          this.yearEventModule.destroy();\n          this.yearEventModule = null;\n        }\n\n        if (this.parent.resourceBase) {\n          this.parent.resourceBase.destroy();\n        }\n\n        _get(_getPrototypeOf(Year.prototype), \"destroy\", this).call(this);\n      }\n    }\n  }]);\n\n  return Year;\n}(ViewBase);\n/* eslint-disable @typescript-eslint/no-explicit-any */\n\n\nvar AgendaBase = /*#__PURE__*/function (_ViewBase4) {\n  _inherits(AgendaBase, _ViewBase4);\n\n  var _super24 = _createSuper(AgendaBase);\n\n  function AgendaBase(parent) {\n    _classCallCheck(this, AgendaBase);\n\n    return _super24.call(this, parent);\n  } // eslint-disable-next-line max-len\n\n\n  _createClass(AgendaBase, [{\n    key: \"createAgendaContentElement\",\n    value: function createAgendaContentElement(type, listData, aTd, groupOrder, groupIndex) {\n      var _this102 = this;\n\n      var listElement;\n      var fieldMapping = this.parent.eventFields;\n\n      if (type === 'noEvents') {\n        var noEvents = [{\n          'subject': this.parent.localeObj.getConstant('noEvents')\n        }];\n        listElement = ListBase.createList(this.parent.createElement, noEvents, {\n          moduleName: 'agenda',\n          listClass: this.parent.activeView.viewClass,\n          itemClass: this.parent.activeView.viewClass,\n          template: '<div class=' + AGENDA_NO_EVENT_CLASS + '>${subject}</div>'\n        });\n      } else {\n        listElement = ListBase.createList(this.parent.createElement, listData, {\n          moduleName: 'agenda',\n          listClass: this.parent.activeView.viewClass,\n          itemClass: this.parent.activeView.viewClass\n        });\n        var listElements = [].slice.call(listElement.children);\n        listElements.forEach(function (element, li) {\n          var appWrapper = createElement('div', {\n            className: APPOINTMENT_CLASS,\n            attrs: {\n              'data-id': 'Appointment_' + listData[li][_this102.parent.eventFields.id],\n              'data-guid': listData[li].Guid,\n              'role': 'button',\n              'tabindex': '0',\n              'aria-readonly': _this102.parent.eventBase.getReadonlyAttribute(listData[li]),\n              'aria-selected': 'false',\n              'aria-grabbed': 'true',\n              'aria-label': _this102.parent.getAnnouncementString(listData[li])\n            }\n          });\n\n          if (!isNullOrUndefined(groupIndex)) {\n            appWrapper.setAttribute('data-group-index', groupIndex.toString());\n          }\n\n          _this102.parent.eventBase.applyResourceColor(appWrapper, listData[li], 'borderColor', groupOrder);\n\n          var templateEle;\n\n          if (!isNullOrUndefined(_this102.parent.activeViewOptions.eventTemplate)) {\n            addClass([appWrapper], EVENT_TEMPLATE);\n            var scheduleId = _this102.parent.element.id + '_';\n            var viewName = _this102.parent.activeViewOptions.eventTemplateName;\n            var templateId = scheduleId + viewName + 'eventTemplate';\n            templateEle = _this102.parent.getAppointmentTemplate()(listData[li], _this102.parent, 'eventTemplate', templateId, false);\n\n            if (!isNullOrUndefined(listData[li][fieldMapping.recurrenceRule])) {\n              var iconClass = listData[li][fieldMapping.id] === listData[li][fieldMapping.recurrenceID] ? EVENT_RECURRENCE_ICON_CLASS : EVENT_RECURRENCE_EDIT_ICON_CLASS;\n              appWrapper.appendChild(createElement('div', {\n                className: ICON + ' ' + iconClass\n              }));\n            }\n          } else {\n            templateEle = _this102.createAppointment(listData[li]);\n          }\n\n          append([].slice.call(templateEle), appWrapper);\n          removeChildren(element);\n          element.appendChild(appWrapper);\n          var args = {\n            data: extend({}, listData[li], null, true),\n            element: element,\n            cancel: false\n          };\n\n          _this102.parent.trigger(eventRendered, args, function (eventArgs) {\n            if (eventArgs.cancel) {\n              remove(element);\n            }\n          });\n        });\n      }\n\n      aTd.appendChild(listElement);\n\n      if (this.parent.currentView === 'MonthAgenda' && this.parent.activeViewOptions.group.resources.length > 0 || this.parent.currentView === 'Agenda') {\n        addClass([aTd], AGENDA_DAY_BORDER_CLASS);\n      }\n\n      this.parent.renderTemplates();\n      return aTd;\n    }\n  }, {\n    key: \"createAppointment\",\n    value: function createAppointment(event) {\n      var fieldMapping = this.parent.eventFields;\n      var eventSubject = event[fieldMapping.subject] || this.parent.eventSettings.fields.subject.default || this.parent.localeObj.getConstant('addTitle');\n      var eventLocation = event[fieldMapping.location] || this.parent.eventSettings.fields.location.default;\n      var appSubjectWrap = createElement('div', {\n        className: SUBJECT_WRAP\n      });\n\n      if (!isNullOrUndefined(eventLocation) && eventLocation !== '') {\n        eventSubject += ',';\n      }\n\n      appSubjectWrap.appendChild(createElement('div', {\n        className: SUBJECT_CLASS,\n        innerHTML: eventSubject\n      }));\n\n      if (!isNullOrUndefined(eventLocation) && eventLocation !== '') {\n        appSubjectWrap.appendChild(createElement('div', {\n          className: LOCATION_CLASS,\n          innerHTML: eventLocation\n        }));\n      }\n\n      if (!isNullOrUndefined(event[fieldMapping.recurrenceRule])) {\n        var iconClass = event[fieldMapping.id] === event[fieldMapping.recurrenceID] ? EVENT_RECURRENCE_ICON_CLASS : EVENT_RECURRENCE_EDIT_ICON_CLASS;\n        appSubjectWrap.appendChild(createElement('div', {\n          className: ICON + ' ' + iconClass\n        }));\n      }\n\n      var strDate = event[fieldMapping.startTime];\n      var endDate = event[fieldMapping.endTime];\n      var isAllDay = event[fieldMapping.isAllDay];\n      var allDayStr = this.parent.localeObj.getConstant('allDay');\n      var timeStr = this.parent.getTimeString(strDate) + ' - ' + this.parent.getTimeString(endDate);\n\n      if (!isNullOrUndefined(event.data)) {\n        var milliSeconds = endDate.getTimezoneOffset() !== strDate.getTimezoneOffset() ? endDate.getTime() - strDate.getTime() + 3600000 : endDate.getTime() - strDate.getTime();\n        var eventString = milliSeconds / MS_PER_DAY >= 1 ? allDayStr : timeStr;\n        allDayStr = eventString + ' (' + this.parent.localeObj.getConstant('day') + ' ' + event.data.index + '/' + event.data.count + ')';\n      }\n\n      var displayStr = !isNullOrUndefined(event.data) || isAllDay ? allDayStr : timeStr;\n      var appDateTime = createElement('div', {\n        className: DATE_TIME_CLASS,\n        innerHTML: displayStr\n      });\n      return [appSubjectWrap, appDateTime];\n    }\n  }, {\n    key: \"processAgendaEvents\",\n    value: function processAgendaEvents(events) {\n      var eventsProcessed = [];\n\n      if (isNullOrUndefined(events)) {\n        return eventsProcessed;\n      }\n\n      var _iterator135 = _createForOfIteratorHelper(events),\n          _step135;\n\n      try {\n        for (_iterator135.s(); !(_step135 = _iterator135.n()).done;) {\n          var event = _step135.value;\n          var spanned = this.parent.eventBase.splitEventByDay(event);\n          eventsProcessed = eventsProcessed.concat(spanned.length > 1 ? spanned : event);\n        }\n      } catch (err) {\n        _iterator135.e(err);\n      } finally {\n        _iterator135.f();\n      }\n\n      return eventsProcessed;\n    }\n  }, {\n    key: \"wireEventActions\",\n    value: function wireEventActions() {\n      var eventElement = [].slice.call(this.parent.element.querySelectorAll('.' + APPOINTMENT_CLASS));\n\n      var _iterator136 = _createForOfIteratorHelper(eventElement),\n          _step136;\n\n      try {\n        for (_iterator136.s(); !(_step136 = _iterator136.n()).done;) {\n          var element = _step136.value;\n          this.parent.eventBase.wireAppointmentEvents(element, null, true);\n        }\n      } catch (err) {\n        _iterator136.e(err);\n      } finally {\n        _iterator136.f();\n      }\n\n      var dateHeaderElement = [].slice.call(this.parent.element.querySelectorAll('.e-m-date'));\n\n      var _iterator137 = _createForOfIteratorHelper(dateHeaderElement),\n          _step137;\n\n      try {\n        for (_iterator137.s(); !(_step137 = _iterator137.n()).done;) {\n          var _element3 = _step137.value;\n          EventHandler.add(_element3, 'click', this.parent.agendaModule.dayNavigationClick, this);\n        }\n      } catch (err) {\n        _iterator137.e(err);\n      } finally {\n        _iterator137.f();\n      }\n    }\n  }, {\n    key: \"calculateResourceTableElement\",\n    value: function calculateResourceTableElement(tBody, noOfDays, agendaDate) {\n      if (isNullOrUndefined(this.parent.resourceBase.lastResourceLevel)) {\n        var level = this.getDateSlots(this.renderDates, this.parent.activeViewOptions.workDays);\n        this.parent.resourceBase.generateResourceLevels(level);\n      }\n\n      var agendaLastDate = addDays(new Date(agendaDate.getTime()), noOfDays);\n      var days = this.parent.activeViewOptions.group.byDate || this.parent.currentView === 'MonthAgenda' ? noOfDays : 1;\n      var resColl = this.parent.resourceBase.resourceCollection;\n      var resData = this.parent.resourceBase.lastResourceLevel;\n      var initialDate = agendaDate;\n\n      for (var i = 0; i < days; i++) {\n        var lastLevelInfo = [];\n        var tempLastLevelInfo = [];\n        var tempIndex = 0;\n        var eventObj = void 0;\n        var dateObj = void 0;\n        var firstDate = addDays(initialDate, i);\n        var finalDate = this.parent.activeViewOptions.group.byDate || this.parent.currentView === 'MonthAgenda' ? addDays(firstDate, 1) : agendaLastDate;\n        var agendaCollection = this.parent.eventBase.filterEvents(firstDate, finalDate);\n\n        if (agendaCollection.length > 0 || !this.parent.hideEmptyAgendaDays || this.parent.currentView === 'MonthAgenda') {\n          for (var res = 0; res < resData.length; res++) {\n            noOfDays = !this.parent.activeViewOptions.group.byDate || this.parent.currentView === 'MonthAgenda' ? noOfDays : 1;\n            var data = [];\n            agendaDate = firstDate; // eslint-disable-next-line max-len\n\n            var resDataCollection = this.parent.eventBase.filterEvents(agendaDate, agendaLastDate, agendaCollection, resData[res]);\n\n            if (resDataCollection.length > 0 || !this.parent.hideEmptyAgendaDays || this.parent.currentView === 'MonthAgenda') {\n              for (var r = 0; r < noOfDays; r++) {\n                // eslint-disable-next-line max-len\n                var resDayCollection = this.parent.eventBase.filterEvents(agendaDate, addDays(agendaDate, 1), resDataCollection, undefined);\n\n                if (resDayCollection.length > 0 || !this.parent.hideEmptyAgendaDays || this.parent.currentView === 'MonthAgenda') {\n                  data.push(resDayCollection[0]);\n                  eventObj = {\n                    rowSpan: 1,\n                    type: 'eventColumn',\n                    resource: resColl[resColl.length - 1],\n                    groupIndex: resData[res].groupIndex,\n                    groupOrder: resData[res].groupOrder,\n                    resourceData: resData[res].resourceData,\n                    eventData: resDayCollection,\n                    date: agendaDate\n                  };\n                  dateObj = {\n                    rowSpan: 1,\n                    type: 'dateColumn',\n                    resource: resColl[resColl.length - 1],\n                    groupOrder: resData[res].groupOrder,\n                    resourceData: resData[res].resourceData,\n                    date: agendaDate\n                  };\n\n                  if (!lastLevelInfo[tempIndex]) {\n                    lastLevelInfo[tempIndex] = [];\n                  }\n\n                  lastLevelInfo[tempIndex].push(eventObj);\n                  lastLevelInfo[tempIndex].push(dateObj);\n                  tempIndex++;\n                }\n\n                agendaDate = addDays(agendaDate, 1);\n\n                if (agendaDate.getTime() >= agendaLastDate.getTime() || this.parent.activeViewOptions.group.byDate || this.parent.currentView === 'MonthAgenda') {\n                  lastLevelInfo[lastLevelInfo.length - 1][1].cssClass = AGENDA_DAY_BORDER_CLASS;\n                  var tempObj = {\n                    rowSpan: data.length,\n                    type: 'resourceColumn',\n                    resource: resColl[resColl.length - 1],\n                    groupOrder: resData[res].groupOrder.slice(0, -1),\n                    resourceData: resData[res].resourceData,\n                    groupIndex: lastLevelInfo.length - data.length,\n                    className: [RESOURCE_NAME],\n                    date: agendaDate\n                  };\n                  lastLevelInfo[lastLevelInfo.length - data.length].push(tempObj);\n                  tempLastLevelInfo.push(extend({}, tempObj, null, true));\n                  break;\n                }\n              }\n            }\n          }\n\n          var topResources = resColl.slice(0, -1);\n          var tempGroupedData = [];\n          var totalRowSpan = 0;\n\n          for (var y = 0; y < topResources.length; y++) {\n            var _data2 = topResources[topResources.length - (y + 1)].dataSource;\n\n            for (var x = 0; x < _data2.length; x++) {\n              var z = 0;\n\n              for (var u = 0; u < tempLastLevelInfo.length; u++) {\n                // eslint-disable-next-line max-len\n                if (tempLastLevelInfo[u].groupOrder[topResources.length - (y + 1)] === _data2[x][topResources[topResources.length - (y + 1)].idField]) {\n                  totalRowSpan = totalRowSpan + tempLastLevelInfo[u].rowSpan;\n                  tempGroupedData.push(extend({}, tempLastLevelInfo[u], null, true));\n                }\n\n                if (++z === tempLastLevelInfo.length && tempGroupedData.length > 0) {\n                  tempGroupedData[0].rowSpan = totalRowSpan;\n                  tempGroupedData[0].type = 'parentColumnLevel_' + (y + 1);\n                  tempGroupedData[0].resource = topResources[topResources.length - (y + 1)];\n                  tempGroupedData[0].resourceData = _data2[x];\n                  tempGroupedData[0].date = agendaDate;\n                  lastLevelInfo[tempGroupedData[0].groupIndex].push(tempGroupedData[0]);\n                  tempGroupedData = [];\n                  totalRowSpan = 0;\n                }\n              }\n            }\n          }\n\n          this.createResourceTableRow(lastLevelInfo, tBody);\n        }\n      }\n\n      var totalCollection = this.parent.eventBase.filterEvents(initialDate, agendaLastDate);\n\n      if (totalCollection.length === 0 && !this.parent.activeViewOptions.allowVirtualScrolling && this.parent.hideEmptyAgendaDays) {\n        this.renderEmptyContent(tBody, initialDate);\n      }\n    }\n  }, {\n    key: \"createResourceTableRow\",\n    value: function createResourceTableRow(tContent, tBody) {\n      var tr = createElement('tr', {\n        attrs: {\n          role: 'row'\n        }\n      });\n      var ntr;\n      var td = createElement('td', {\n        attrs: {\n          role: 'gridcell',\n          'aria-selected': 'false'\n        }\n      });\n      var tempData;\n      var rowSpan = 0;\n      var level;\n\n      if (this.parent.activeViewOptions.group.byDate || this.parent.currentView === 'MonthAgenda') {\n        var tContentCollection = [];\n        var parentCollection = this.parent.resourceBase.resourceCollection.slice(0, -1);\n\n        for (var w = 0; w < tContent.length; w++) {\n          tContentCollection = tContentCollection.concat(tContent[w]);\n        }\n\n        level = parentCollection.length > 0 ? 'parentColumnLevel_' + parentCollection.length : 'resourceColumn';\n        var rowSpanCollection = tContentCollection.filter(function (data) {\n          return data.type === level;\n        });\n\n        for (var x = 0; x < rowSpanCollection.length; x++) {\n          rowSpan = rowSpan + rowSpanCollection[x].rowSpan;\n        }\n      }\n\n      for (var row = 0; row < tContent.length; row++) {\n        ntr = tr.cloneNode();\n\n        for (var col = tContent[row].length - 1; col >= 0; col--) {\n          var data = tContent[row][col];\n          var ntd = td.cloneNode();\n\n          if (data.type === 'dateColumn') {\n            if (this.parent.activeViewOptions.group.byDate || this.parent.currentView === 'MonthAgenda') {\n              tempData = tContent[row][col];\n              continue;\n            }\n\n            ntd.setAttribute('data-date', data.date.getTime().toString());\n            ntd.appendChild(this.createDateHeaderElement(data.date));\n            var className = [AGENDA_CELLS_CLASS, AGENDA_DATE_CLASS];\n\n            if (data.cssClass) {\n              className.push(data.cssClass);\n            }\n\n            addClass([ntd], className);\n            ntr.appendChild(ntd);\n          } else if (data.type === 'eventColumn') {\n            var elementType = data.eventData.length === 0 ? 'noEvents' : 'data';\n            ntd = this.createAgendaContentElement(elementType, data.eventData, ntd, data.groupOrder, data.groupIndex);\n            ntd.setAttribute('data-date', data.date.getTime().toString());\n\n            if (this.parent.activeViewOptions.group.byDate || this.parent.currentView === 'MonthAgenda') {\n              addClass([ntd], [AGENDA_CELLS_CLASS, AGENDA_DAY_PADDING_CLASS]);\n            }\n\n            ntr.appendChild(ntd);\n          } else {\n            ntd.setAttribute('rowspan', data.rowSpan.toString());\n            addClass([ntd], AGENDA_RESOURCE_CLASS);\n            this.setResourceHeaderContent(ntd, data, data.className[0]);\n            ntr.appendChild(ntd);\n          }\n        }\n\n        if (this.parent.activeViewOptions.group.byDate && row === 0 && this.parent.currentView !== 'MonthAgenda') {\n          var _ntd = td.cloneNode();\n\n          _ntd.setAttribute('data-date', tempData.date.getTime().toString());\n\n          _ntd.setAttribute('rowspan', rowSpan.toString());\n\n          _ntd.appendChild(this.createDateHeaderElement(tempData.date));\n\n          addClass([_ntd], [AGENDA_CELLS_CLASS, AGENDA_DATE_CLASS, DATE_BORDER_CLASS]);\n          var daysCount = getDaysCount(this.parent.selectedDate.getTime(), tempData.date.getTime());\n          ntr.setAttribute('aria-rowindex', daysCount.toString());\n\n          if (this.parent.element.querySelector(\".e-agenda-view tr[aria-rowindex=\\\"\".concat(daysCount, \"\\\"]\"))) {\n            break;\n          }\n\n          ntr.insertBefore(_ntd, ntr.childNodes[0]);\n        }\n\n        tBody.appendChild(ntr);\n      }\n    }\n  }, {\n    key: \"createDateHeaderElement\",\n    value: function createDateHeaderElement(date) {\n      var dateHeader;\n\n      if (this.parent.activeViewOptions.dateHeaderTemplate) {\n        dateHeader = createElement('div', {\n          className: AGENDA_HEADER_CLASS\n        });\n        var args = {\n          date: date,\n          type: 'dateHeader'\n        };\n        var scheduleId = this.parent.element.id + '_';\n        var viewName = this.parent.activeViewOptions.dateHeaderTemplateName;\n        var templateId = scheduleId + viewName + 'dateHeaderTemplate';\n        var dateTemplate = [].slice.call(this.parent.getDateHeaderTemplate()(args, this.parent, 'dateHeaderTemplate', templateId, false));\n        append(dateTemplate, dateHeader);\n      } else {\n        dateHeader = this.getMobileDateElement(date, AGENDA_HEADER_CLASS);\n      }\n\n      return dateHeader;\n    }\n  }, {\n    key: \"renderEmptyContent\",\n    value: function renderEmptyContent(tBody, agendaDate) {\n      var eTr = this.createTableRowElement(agendaDate, 'noEvents');\n      var eTd = eTr.children[0];\n      var noEvents = createElement('div', {\n        className: AGENDA_EMPTY_EVENT_CLASS,\n        innerHTML: this.parent.localeObj.getConstant('noEvents')\n      });\n      eTd.appendChild(noEvents);\n      tBody.appendChild(eTr);\n    }\n  }, {\n    key: \"createTableRowElement\",\n    value: function createTableRowElement(date, type) {\n      var daysCount = getDaysCount(this.parent.selectedDate.getTime(), date.getTime());\n      var tr = createElement('tr', {\n        attrs: {\n          'role': 'row',\n          'aria-rowindex': daysCount.toString()\n        }\n      });\n      var td = createElement('td', {\n        attrs: {\n          'class': type === 'monthHeader' ? MONTH_HEADER_CLASS : AGENDA_CELLS_CLASS,\n          'role': 'gridcell',\n          'aria-selected': 'false',\n          'aria-colindex': daysCount.toString(),\n          'data-date': date.getTime().toString()\n        }\n      });\n      var dTd = td.cloneNode();\n      var aTd = td.cloneNode();\n      tr.appendChild(dTd);\n\n      if (type !== 'noEvents') {\n        tr.appendChild(aTd);\n      }\n\n      return tr;\n    }\n  }, {\n    key: \"destroy\",\n    value: function destroy() {\n      _get(_getPrototypeOf(AgendaBase.prototype), \"destroy\", this).call(this);\n    }\n  }]);\n\n  return AgendaBase;\n}(ViewBase);\n/* eslint-disable @typescript-eslint/no-explicit-any */\n\n/**\n * agenda view\n */\n\n\nvar Agenda = /*#__PURE__*/function (_AgendaBase) {\n  _inherits(Agenda, _AgendaBase);\n\n  var _super25 = _createSuper(Agenda);\n\n  function Agenda(parent) {\n    var _this103;\n\n    _classCallCheck(this, Agenda);\n\n    _this103 = _super25.call(this, parent);\n    _this103.viewClass = 'e-agenda-view';\n    _this103.isInverseTableSelect = false;\n    _this103.agendaDates = {};\n    _this103.virtualScrollTop = 1;\n    return _this103;\n  }\n\n  _createClass(Agenda, [{\n    key: \"getModuleName\",\n    value: function getModuleName() {\n      return 'agenda';\n    }\n  }, {\n    key: \"renderLayout\",\n    value: function renderLayout() {\n      this.agendaDates = {};\n      this.element = createElement('div', {\n        className: TABLE_WRAP_CLASS\n      });\n      addClass([this.element], this.viewClass);\n      this.element.appendChild(this.createTableLayout(OUTER_TABLE_CLASS));\n      this.element.querySelector('table').setAttribute('role', 'presentation');\n      this.parent.element.querySelector('.' + TABLE_CONTAINER_CLASS).appendChild(this.element);\n      var eTr = createElement('tr');\n      this.element.querySelector('tbody').appendChild(eTr);\n      var workTd = createElement('td');\n      eTr.appendChild(workTd);\n      var wrap = createElement('div', {\n        className: CONTENT_WRAP_CLASS\n      });\n      workTd.appendChild(wrap);\n      var tbl = this.createTableLayout(CONTENT_TABLE_CLASS);\n      wrap.appendChild(tbl);\n      var tBody = tbl.querySelector('tbody');\n      var agendaDate = resetTime(this.parent.selectedDate);\n      this.renderEmptyContent(tBody, agendaDate);\n      this.wireEvents();\n\n      if (this.parent.resourceBase) {\n        this.parent.resourceBase.generateResourceLevels([{\n          renderDates: this.parent.activeView.renderDates\n        }]);\n      }\n\n      if (this.parent.uiStateValues.isGroupAdaptive && !this.parent.element.querySelector('.' + RESOURCE_TOOLBAR_CONTAINER)) {\n        this.renderResourceMobileLayout();\n      }\n\n      this.parent.notify(contentReady, {});\n    }\n  }, {\n    key: \"eventLoad\",\n    value: function eventLoad(args) {\n      this.dataSource = extend([], this.parent.eventsData, null, true);\n\n      var _iterator138 = _createForOfIteratorHelper(this.parent.eventsData),\n          _step138;\n\n      try {\n        for (_iterator138.s(); !(_step138 = _iterator138.n()).done;) {\n          var event = _step138.value;\n          delete event.generatedDates;\n        }\n      } catch (err) {\n        _iterator138.e(err);\n      } finally {\n        _iterator138.f();\n      }\n\n      var eventCollection = this.parent.activeViewOptions.allowVirtualScrolling ? args.processedData : this.parent.eventsProcessed;\n\n      if (this.parent.uiStateValues.isGroupAdaptive) {\n        var resource = this.parent.resourceBase.lastResourceLevel[this.parent.uiStateValues.groupIndex];\n        this.dataSource = this.parent.eventBase.filterEventsByResource(resource, this.dataSource);\n        eventCollection = this.parent.eventBase.filterEventsByResource(resource, eventCollection);\n      }\n\n      this.parent.eventsProcessed = this.processAgendaEvents(eventCollection);\n      var agendaDate = resetTime(this.parent.selectedDate);\n      var tBody = this.element.querySelector('.' + CONTENT_TABLE_CLASS + ' tbody');\n      removeChildren(tBody);\n      this.renderInitialContent(tBody, agendaDate);\n      this.wireEventActions();\n      var contentArea = closest(tBody, '.' + CONTENT_WRAP_CLASS);\n      contentArea.scrollTop = 1;\n      this.parent.notify(eventsLoaded, {});\n\n      if (!this.parent.activeViewOptions.allowVirtualScrolling) {\n        this.retainScrollPosition();\n      }\n    }\n  }, {\n    key: \"refreshEvent\",\n    value: function refreshEvent(refreshDate) {\n      var processedData = [];\n      var fields = this.parent.eventFields;\n\n      var _iterator139 = _createForOfIteratorHelper(this.dataSource),\n          _step139;\n\n      try {\n        for (_iterator139.s(); !(_step139 = _iterator139.n()).done;) {\n          var data = _step139.value;\n\n          if (isNullOrUndefined(data[fields.recurrenceID]) && !isNullOrUndefined(data[fields.recurrenceRule]) && !isNullOrUndefined(data.generatedDates) && refreshDate >= data.generatedDates.end) {\n            processedData = processedData.concat(this.parent.eventBase.generateOccurrence(data, refreshDate));\n          }\n        }\n      } catch (err) {\n        _iterator139.e(err);\n      } finally {\n        _iterator139.f();\n      }\n\n      this.parent.eventsProcessed = this.parent.eventsProcessed.concat(this.processAgendaEvents(processedData));\n    }\n  }, {\n    key: \"refreshHeader\",\n    value: function refreshHeader() {\n      var tBody = this.element.querySelector('.' + CONTENT_TABLE_CLASS + ' tbody');\n\n      if (this.parent.activeViewOptions.group.byDate) {\n        removeChildren(tBody);\n      } else {\n        remove(tBody.firstElementChild);\n      }\n\n      var agendaDate = resetTime(this.parent.selectedDate);\n      var emptyTBody = createElement('tbody');\n      var firstDate = new Date(agendaDate.getTime());\n      var lastDate = this.parent.activeViewOptions.allowVirtualScrolling && this.parent.hideEmptyAgendaDays ? this.getEndDateFromStartDate(firstDate) : addDays(firstDate, this.parent.agendaDaysCount);\n      this.renderContent(emptyTBody, firstDate, lastDate);\n      append([].slice.call(emptyTBody.childNodes), tBody);\n    }\n  }, {\n    key: \"renderInitialContent\",\n    value: function renderInitialContent(tBody, agendaDate) {\n      var emptyTBody = createElement('tbody');\n      var firstDate = new Date(agendaDate.getTime());\n      var lastDate = this.parent.activeViewOptions.allowVirtualScrolling && this.parent.hideEmptyAgendaDays ? this.getEndDateFromStartDate(firstDate) : addDays(firstDate, this.parent.agendaDaysCount);\n      this.renderContent(emptyTBody, firstDate, lastDate);\n      append([].slice.call(emptyTBody.childNodes), tBody); // Initial rendering, to load previous date events upto scroll bar enable\n\n      if (this.parent.activeViewOptions.allowVirtualScrolling && this.parent.hideEmptyAgendaDays && this.parent.eventsData.length > 0) {\n        var contentArea = this.getContentAreaElement();\n        var contentChild = contentArea.querySelector('.e-content-table');\n\n        while (contentArea.offsetWidth <= contentArea.clientWidth) {\n          if (this.parent.isAdaptive && contentChild.offsetHeight >= contentArea.clientHeight) {\n            break;\n          }\n\n          var _emptyTBody = createElement('tbody');\n\n          lastDate = firstDate;\n          firstDate = addDays(lastDate, -this.parent.agendaDaysCount);\n          this.renderContent(_emptyTBody, firstDate, lastDate);\n          prepend([].slice.call(_emptyTBody.childNodes), tBody);\n\n          if (firstDate <= this.parent.minDate) {\n            break;\n          }\n        }\n      }\n\n      if (tBody.childNodes.length <= 0) {\n        this.renderEmptyContent(tBody, agendaDate);\n      }\n    }\n  }, {\n    key: \"renderContent\",\n    value: function renderContent(tBody, agendaDate, lastDate) {\n      var fieldMapping = this.parent.eventFields;\n      var firstDate = new Date(agendaDate.getTime());\n      var isObject = this.appointmentFiltering(firstDate, lastDate);\n\n      if (isObject.length > 0 && this.parent.activeViewOptions.allowVirtualScrolling && this.parent.hideEmptyAgendaDays) {\n        agendaDate = isObject[0][fieldMapping.startTime];\n        agendaDate = new Date(new Date(agendaDate.getTime()).setHours(0, 0, 0, 0));\n        this.updateHeaderText(isObject[0][fieldMapping.startTime]);\n      }\n\n      var endDate;\n\n      if (!this.parent.hideEmptyAgendaDays || this.parent.agendaDaysCount > 0 && isObject.length > 0) {\n        if (this.parent.activeViewOptions.group.resources.length > 0 && !this.parent.uiStateValues.isGroupAdaptive) {\n          var date = agendaDate;\n\n          if (!this.parent.activeViewOptions.group.byDate) {\n            this.parent.activeViewOptions.allowVirtualScrolling = false;\n            date = firstDate;\n\n            if (this.parent.headerModule) {\n              this.parent.headerModule.updateDateRange(this.parent.activeView.getDateRangeText());\n              this.parent.headerModule.updateHeaderItems('remove');\n            }\n          }\n\n          this.calculateResourceTableElement(tBody, this.parent.agendaDaysCount, date);\n        } else {\n          for (var day = 0; day < this.parent.agendaDaysCount; day++) {\n            var filterData = this.appointmentFiltering(agendaDate);\n            var nTr = this.createTableRowElement(agendaDate, 'data');\n\n            if (this.element.querySelector('tr[aria-rowindex=\"' + parseInt(nTr.getAttribute('aria-rowindex'), 10) + '\"]')) {\n              agendaDate = addDays(agendaDate, 1);\n              continue;\n            }\n\n            var dTd = nTr.children[0];\n            var aTd = nTr.children[1];\n\n            if (filterData.length > 0 || !this.parent.hideEmptyAgendaDays && filterData.length === 0) {\n              var elementType = !this.parent.hideEmptyAgendaDays && filterData.length === 0 ? 'noEvents' : 'data';\n              dTd.appendChild(this.createDateHeaderElement(agendaDate));\n              nTr.appendChild(dTd);\n              var cTd = this.createAgendaContentElement(elementType, filterData, aTd);\n              nTr.appendChild(cTd);\n\n              if (cTd.querySelectorAll('li').length > 0) {\n                tBody.appendChild(nTr);\n              }\n            } else if (this.parent.activeViewOptions.allowVirtualScrolling) {\n              day--;\n            }\n\n            if (this.isCurrentDate(new Date(agendaDate.getTime()))) {\n              addClass(dTd.childNodes, AGENDA_CURRENT_DAY_CLASS);\n            }\n\n            agendaDate = addDays(agendaDate, 1);\n\n            if (agendaDate.getTime() > lastDate.getTime()) {\n              break;\n            }\n          }\n        }\n\n        endDate = new Date(agendaDate.getTime() - MS_PER_DAY);\n      }\n\n      this.agendaDates = {\n        start: firstDate,\n        end: endDate\n      };\n    }\n  }, {\n    key: \"agendaScrolling\",\n    value: function agendaScrolling(event) {\n      if (this.parent.quickPopup) {\n        this.parent.quickPopup.quickPopupHide();\n      }\n\n      if (this.parent.activeViewOptions.allowVirtualScrolling) {\n        this.virtualScrolling(event);\n      }\n\n      if (!this.parent.activeViewOptions.allowVirtualScrolling) {\n        this.setPersistence();\n      }\n    }\n  }, {\n    key: \"virtualScrolling\",\n    value: function virtualScrolling(event) {\n      var target = event.target;\n      var scrollTop = target.scrollTop;\n      var scrollHeight = target.scrollHeight;\n      var offsetHeight = target.clientHeight;\n      var totalHeight = scrollTop + offsetHeight;\n      var direction = this.virtualScrollTop < scrollTop ? 'next' : 'previous';\n      var tBody = target.querySelector('tbody');\n      var emptyTBody = createElement('tbody');\n      var topElement = this.getElementFromScrollerPosition(event);\n      var scrollDate = this.parent.getDateFromElement(topElement);\n      var filterDate;\n      var filterData;\n\n      if (scrollTop === 0) {\n        filterDate = this.getPreviousNextDate(addDays(scrollDate, -1), direction);\n        filterData = this.appointmentFiltering(filterDate.start, filterDate.end);\n\n        if (filterData.length > 0 || !this.parent.hideEmptyAgendaDays) {\n          this.renderContent(emptyTBody, filterDate.start, filterDate.end);\n          prepend([].slice.call(emptyTBody.childNodes), tBody);\n          this.wireEventActions();\n\n          for (var s = 0, element = tBody.children; s < element.length; s++) {\n            if (element[s].getAttribute('aria-rowindex') === topElement.getAttribute('aria-colindex')) {\n              var scrollToValue = element[s].offsetTop - this.element.querySelector('.e-agenda-item').offsetHeight;\n              target.scrollTop = scrollToValue;\n              break;\n            }\n          }\n\n          this.updateHeaderText(scrollDate);\n        }\n      } else if (totalHeight >= scrollHeight - 5) {\n        filterDate = this.getPreviousNextDate(addDays(scrollDate, 1), direction);\n        filterData = this.appointmentFiltering(filterDate.start, filterDate.end);\n\n        if (filterData.length > 0 || !this.parent.hideEmptyAgendaDays) {\n          this.renderContent(emptyTBody, filterDate.start, filterDate.end);\n          append([].slice.call(emptyTBody.childNodes), tBody);\n          this.wireEventActions();\n          this.updateHeaderText(scrollDate);\n        }\n      } else {\n        this.updateHeaderText(scrollDate);\n      }\n\n      this.virtualScrollTop = scrollTop;\n      var selectedElements = this.parent.eventBase.getSelectedAppointments();\n\n      if (selectedElements.length > 0) {\n        selectedElements[selectedElements.length - 1].focus();\n      }\n    }\n  }, {\n    key: \"getElementFromScrollerPosition\",\n    value: function getElementFromScrollerPosition(event) {\n      var filterElement;\n      var target = event.target;\n      var scrollTop = target.scrollTop;\n      var scrollHeight = target.scrollHeight;\n      var offsetHeight = target.clientHeight;\n      var totalHeight = scrollTop + offsetHeight;\n      var liCollection = [].slice.call(target.querySelectorAll('.e-agenda-item'));\n      var li;\n      var liDetails;\n\n      if (liCollection.length > 0) {\n        if (scrollTop === 0) {\n          li = liCollection[0];\n          filterElement = closest(li, '.' + AGENDA_CELLS_CLASS);\n        } else if (totalHeight === scrollHeight) {\n          li = liCollection[liCollection.length - 1];\n          filterElement = closest(li, '.' + AGENDA_CELLS_CLASS);\n        } else {\n          for (var a = 0, length = liCollection.length; a < length; a++) {\n            li = liCollection[a];\n            liDetails = li.getBoundingClientRect();\n\n            if (liDetails.top >= 0) {\n              filterElement = closest(li, '.' + AGENDA_CELLS_CLASS);\n              break;\n            }\n          }\n        }\n      }\n\n      return filterElement;\n    }\n  }, {\n    key: \"updateHeaderText\",\n    value: function updateHeaderText(date) {\n      if (this.parent.showHeaderBar) {\n        this.parent.headerModule.updateDateRange(this.getDateRangeText(date));\n      }\n    }\n  }, {\n    key: \"getPreviousNextDate\",\n    value: function getPreviousNextDate(date, type) {\n      var currentDate = new Date(date.getTime());\n      var firstDate = this.getStartDateFromEndDate(date);\n      var lastDate = this.getEndDateFromStartDate(date);\n      var daysCount = 0;\n\n      do {\n        var filterData = this.appointmentFiltering(currentDate);\n\n        if (filterData.length > 0 || !this.parent.hideEmptyAgendaDays) {\n          daysCount++;\n        }\n\n        currentDate = addDays(currentDate, type === 'next' ? 1 : -1);\n\n        if (currentDate < firstDate || currentDate > lastDate) {\n          break;\n        }\n      } while (daysCount !== this.parent.agendaDaysCount);\n\n      var endDate = addDays(currentDate, type === 'next' ? -1 : 1);\n      return type === 'next' ? {\n        start: date,\n        end: addDays(endDate, 1)\n      } : {\n        start: endDate,\n        end: addDays(date, 1)\n      };\n    }\n  }, {\n    key: \"appointmentFiltering\",\n    value: function appointmentFiltering(startDate, endDate) {\n      var dateStart;\n      var dateEnd;\n\n      if (!isNullOrUndefined(startDate) && isNullOrUndefined(endDate)) {\n        dateStart = resetTime(new Date(startDate.getTime()));\n        dateEnd = setTime(new Date(dateStart.getTime()), MS_PER_DAY);\n      } else {\n        dateStart = new Date(startDate.getTime());\n        dateEnd = new Date(endDate.getTime());\n      }\n\n      var filterData = this.parent.eventBase.filterEvents(dateStart, dateEnd);\n\n      if (filterData.length === 0) {\n        this.refreshEvent(startDate);\n        filterData = this.parent.eventBase.filterEvents(dateStart, dateEnd);\n      }\n\n      return filterData;\n    }\n  }, {\n    key: \"getStartDateFromEndDate\",\n    value: function getStartDateFromEndDate(endDate) {\n      var filterDate;\n      var fields = this.parent.eventFields;\n\n      if (this.parent.eventsProcessed.length > 0) {\n        var firstDate = Math.min.apply(Math, _toConsumableArray(this.parent.eventsProcessed.map(function (a) {\n          return a[fields.startTime].getTime();\n        })));\n        filterDate = this.parent.hideEmptyAgendaDays ? new Date(firstDate) : this.parent.minDate;\n      } else {\n        filterDate = this.parent.hideEmptyAgendaDays ? addMonths(endDate, -1) : this.parent.minDate;\n      }\n\n      return resetTime(filterDate);\n    }\n  }, {\n    key: \"getEndDateFromStartDate\",\n    value: function getEndDateFromStartDate(startDate) {\n      var filterDate;\n      var fieldMapping = this.parent.eventFields;\n\n      if (this.parent.eventsProcessed.length > 0) {\n        var lastDate = Math.max.apply(Math, _toConsumableArray(this.parent.eventsProcessed.map(function (a) {\n          return a[fieldMapping.endTime].getTime();\n        })));\n        filterDate = this.parent.hideEmptyAgendaDays ? new Date(lastDate) : this.parent.maxDate;\n      } else {\n        filterDate = this.parent.hideEmptyAgendaDays ? addMonths(startDate, 1) : this.parent.maxDate;\n      }\n\n      return resetTime(addDays(filterDate, 1));\n    }\n  }, {\n    key: \"getNextPreviousDate\",\n    value: function getNextPreviousDate(type) {\n      var noOfDays = type === 'next' ? 1 : -1;\n      return addDays(this.parent.selectedDate, noOfDays);\n    }\n  }, {\n    key: \"startDate\",\n    value: function startDate() {\n      return resetTime(this.parent.selectedDate);\n    }\n  }, {\n    key: \"endDate\",\n    value: function endDate() {\n      if (this.parent.activeViewOptions.allowVirtualScrolling) {\n        return this.getEndDateFromStartDate(this.startDate());\n      } else {\n        return addDays(this.startDate(), this.parent.agendaDaysCount);\n      }\n    }\n  }, {\n    key: \"getDateRangeText\",\n    value: function getDateRangeText(date) {\n      var formatDate = this.parent.activeViewOptions.dateFormat ? this.parent.activeViewOptions.dateFormat : 'MMMM y';\n\n      if (this.parent.activeViewOptions.allowVirtualScrolling || this.parent.isAdaptive) {\n        var currentDate = isNullOrUndefined(date) ? this.parent.selectedDate : date;\n        return capitalizeFirstWord(this.parent.globalize.formatDate(currentDate, {\n          format: formatDate,\n          calendar: this.parent.getCalendarMode()\n        }), 'multiple');\n      } else {\n        var startDate = this.parent.selectedDate;\n        var endDate = addDays(startDate, this.parent.agendaDaysCount - 1);\n        return this.formatDateRange(startDate, endDate);\n      }\n    }\n  }, {\n    key: \"dayNavigationClick\",\n    value: function dayNavigationClick(e) {\n      var element = closest(e.currentTarget, '.' + AGENDA_CELLS_CLASS);\n      var date = this.parent.getDateFromElement(element);\n\n      if (!isNullOrUndefined(date) && !this.parent.isAdaptive && this.parent.isMinMaxDate(date)) {\n        this.parent.setProperties({\n          selectedDate: date\n        }, true);\n        this.parent.changeView('Day', e);\n      }\n    }\n  }, {\n    key: \"wireEvents\",\n    value: function wireEvents() {\n      EventHandler.add(this.element.querySelector('.' + CONTENT_WRAP_CLASS), scroll, this.agendaScrolling, this);\n    }\n  }, {\n    key: \"unWireEvents\",\n    value: function unWireEvents() {\n      EventHandler.remove(this.element.querySelector('.' + CONTENT_WRAP_CLASS), scroll, this.agendaScrolling);\n      var dateHeaderElement = [].slice.call(this.element.querySelectorAll('.e-m-date'));\n\n      var _iterator140 = _createForOfIteratorHelper(dateHeaderElement),\n          _step140;\n\n      try {\n        for (_iterator140.s(); !(_step140 = _iterator140.n()).done;) {\n          var element = _step140.value;\n          EventHandler.remove(element, 'click', this.dayNavigationClick);\n        }\n      } catch (err) {\n        _iterator140.e(err);\n      } finally {\n        _iterator140.f();\n      }\n    }\n  }, {\n    key: \"addEventListener\",\n    value: function addEventListener() {\n      this.parent.on(scrollUiUpdate, this.onAgendaScrollUiUpdate, this);\n      this.parent.on(dataReady, this.eventLoad, this);\n    }\n  }, {\n    key: \"removeEventListener\",\n    value: function removeEventListener() {\n      if (this.parent) {\n        this.parent.off(scrollUiUpdate, this.onAgendaScrollUiUpdate);\n        this.parent.off(dataReady, this.eventLoad);\n      }\n    }\n  }, {\n    key: \"onAgendaScrollUiUpdate\",\n    value: function onAgendaScrollUiUpdate() {\n      var headerHeight = this.getHeaderBarHeight();\n\n      if (this.parent.headerModule) {\n        if (this.parent.activeViewOptions.allowVirtualScrolling) {\n          this.parent.headerModule.updateHeaderItems('add');\n        } else {\n          this.parent.headerModule.updateHeaderItems('remove');\n        }\n      }\n\n      var contentArea = this.element.querySelector('.' + CONTENT_WRAP_CLASS);\n\n      if (this.parent.height !== 'auto') {\n        contentArea.style.height = formatUnit(this.parent.element.offsetHeight - headerHeight);\n      }\n    }\n  }, {\n    key: \"destroy\",\n    value: function destroy() {\n      if (!this.parent || this.parent && this.parent.isDestroyed) {\n        return;\n      }\n\n      if (this.element) {\n        this.unWireEvents();\n\n        if (this.parent.resourceBase) {\n          this.parent.resourceBase.destroy();\n        }\n\n        if (this.parent.headerModule && this.parent.activeViewOptions.allowVirtualScrolling) {\n          this.parent.headerModule.updateHeaderItems('remove');\n        }\n\n        _get(_getPrototypeOf(Agenda.prototype), \"destroy\", this).call(this);\n      }\n    }\n  }]);\n\n  return Agenda;\n}(AgendaBase);\n/* eslint-disable @typescript-eslint/no-explicit-any */\n\n/**\n * month agenda view\n */\n\n\nvar MonthAgenda = /*#__PURE__*/function (_Month) {\n  _inherits(MonthAgenda, _Month);\n\n  var _super26 = _createSuper(MonthAgenda);\n\n  function MonthAgenda(parent) {\n    var _this104;\n\n    _classCallCheck(this, MonthAgenda);\n\n    _this104 = _super26.call(this, parent);\n    _this104.dayNameFormat = 'narrow';\n    _this104.viewClass = 'e-month-agenda-view';\n    _this104.monthAgendaDate = new Date('' + parent.selectedDate);\n    return _this104;\n  }\n\n  _createClass(MonthAgenda, [{\n    key: \"getModuleName\",\n    value: function getModuleName() {\n      return 'monthAgenda';\n    }\n  }, {\n    key: \"renderAppointmentContainer\",\n    value: function renderAppointmentContainer() {\n      var contentArea = this.getContentAreaElement();\n      var wrapperContainer = createElement('div', {\n        className: WRAPPER_CONTAINER_CLASS\n      });\n      contentArea.appendChild(wrapperContainer);\n      var appWrap = createElement('div', {\n        className: APPOINTMENT_WRAP_CLASS\n      });\n      wrapperContainer.appendChild(appWrap);\n      this.appendAppContainer(appWrap);\n      this.setEventWrapperHeight();\n    }\n  }, {\n    key: \"getDayNameFormat\",\n    value: function getDayNameFormat() {\n      if (this.parent.isAdaptive) {\n        return 'narrow';\n      }\n\n      return 'abbreviated';\n    }\n  }, {\n    key: \"setEventWrapperHeight\",\n    value: function setEventWrapperHeight() {\n      var headerHeight = (this.parent.headerModule ? this.parent.headerModule.getHeaderElement().offsetHeight : 0) + 2;\n      var resourceWrapper = this.parent.element.querySelector('.' + RESOURCE_HEADER_TOOLBAR);\n\n      if (resourceWrapper) {\n        headerHeight += resourceWrapper.offsetHeight;\n      }\n\n      var contentArea = this.getContentAreaElement().firstElementChild;\n      var dateHeader = this.element.querySelector('.' + DATE_HEADER_WRAP_CLASS);\n      var availHeight = this.parent.element.offsetHeight - headerHeight - dateHeader.offsetHeight - contentArea.offsetHeight;\n      var wrapperContainer = this.element.querySelector('.' + WRAPPER_CONTAINER_CLASS);\n      var eventWrapper = this.element.querySelector('.' + APPOINTMENT_WRAP_CLASS);\n\n      if (this.parent.height !== 'auto') {\n        wrapperContainer.style.height = eventWrapper.style.height = formatUnit(availHeight);\n      }\n    }\n  }, {\n    key: \"onDataReady\",\n    value: function onDataReady(args) {\n      this.setEventWrapperHeight();\n      this.clearElements();\n      var eventCollection = args.processedData;\n\n      if (this.parent.uiStateValues.isGroupAdaptive) {\n        var resource = this.parent.resourceBase.lastResourceLevel[this.parent.uiStateValues.groupIndex];\n        eventCollection = this.parent.eventBase.filterEventsByResource(resource, eventCollection);\n      }\n\n      this.agendaBase = this.getAgendaBase();\n      this.parent.eventsProcessed = this.agendaBase.processAgendaEvents(eventCollection);\n      var count = 0;\n\n      var _iterator141 = _createForOfIteratorHelper(this.renderDates),\n          _step141;\n\n      try {\n        for (_iterator141.s(); !(_step141 = _iterator141.n()).done;) {\n          var date = _step141.value;\n          var filterData = this.appointmentFiltering(date);\n          var workCell = this.element.querySelectorAll('.' + WORK_CELLS_CLASS)[count];\n\n          if (filterData.length > 0) {\n            if (!workCell.querySelector('.' + APPOINTMENT_INDICATOR_CLASS)) {\n              workCell.appendChild(createElement('div', {\n                className: APPOINTMENT_INDICATOR_CLASS\n              }));\n            }\n\n            if (date.getTime() === resetTime(new Date(this.monthAgendaDate.getTime())).getTime()) {\n              this.onEventRender(filterData, date);\n            }\n          }\n\n          count++;\n        }\n      } catch (err) {\n        _iterator141.e(err);\n      } finally {\n        _iterator141.f();\n      }\n\n      this.parent.notify(eventsLoaded, {});\n    }\n  }, {\n    key: \"onCellClick\",\n    value: function onCellClick(event) {\n      if (this.parent.quickPopup) {\n        this.parent.quickPopup.quickPopupHide();\n      }\n\n      var filterData = this.appointmentFiltering(event.startTime);\n      this.onEventRender(filterData, event.startTime);\n      this.parent.notify(eventsLoaded, {});\n      this.monthAgendaDate = new Date('' + event.startTime);\n    }\n  }, {\n    key: \"onEventRender\",\n    value: function onEventRender(events, date) {\n      this.agendaBase = this.getAgendaBase();\n      var appWrap = this.element.querySelector('.' + APPOINTMENT_WRAP_CLASS);\n      removeChildren(appWrap);\n\n      if (this.parent.activeViewOptions.group.resources.length === 0 || this.parent.uiStateValues.isGroupAdaptive) {\n        if (events.length > 0) {\n          var appContainer = createElement('div', {\n            className: APPOINTMENT_CONTAINER_CLASS\n          });\n          appWrap.appendChild(this.agendaBase.createAgendaContentElement('data', events, appContainer));\n        } else {\n          this.appendAppContainer(appWrap);\n        }\n      } else {\n        if (events.length > 0) {\n          var table = this.createTableLayout();\n          var tBody = table.querySelector('tbody');\n          this.agendaBase.calculateResourceTableElement(tBody, 1, date);\n          table.appendChild(tBody);\n          appWrap.appendChild(table);\n        } else {\n          this.appendAppContainer(appWrap);\n        }\n      }\n\n      this.agendaBase.wireEventActions();\n    }\n  }, {\n    key: \"appointmentFiltering\",\n    value: function appointmentFiltering(date) {\n      var dateStart = resetTime(new Date(date.getTime()));\n      var dateEnd = setTime(new Date(dateStart.getTime()), MS_PER_DAY);\n      return this.parent.eventBase.filterEvents(dateStart, dateEnd);\n    }\n  }, {\n    key: \"clearElements\",\n    value: function clearElements() {\n      var appointmentIndicators = [].slice.call(this.element.querySelectorAll('.' + APPOINTMENT_INDICATOR_CLASS));\n\n      var _iterator142 = _createForOfIteratorHelper(appointmentIndicators),\n          _step142;\n\n      try {\n        for (_iterator142.s(); !(_step142 = _iterator142.n()).done;) {\n          var appointmentIndicator = _step142.value;\n          remove(appointmentIndicator);\n        }\n      } catch (err) {\n        _iterator142.e(err);\n      } finally {\n        _iterator142.f();\n      }\n\n      this.appendAppContainer(this.element.querySelector('.' + APPOINTMENT_WRAP_CLASS));\n    }\n  }, {\n    key: \"appendAppContainer\",\n    value: function appendAppContainer(appWrap) {\n      var app = createElement('div', {\n        className: APPOINTMENT_CONTAINER_CLASS\n      });\n      addClass([app], AGENDA_NO_EVENT_CLASS);\n      app.innerHTML = this.parent.localeObj.getConstant('noEvents');\n      removeChildren(appWrap);\n      appWrap.appendChild(app);\n    }\n  }, {\n    key: \"getNextPreviousDate\",\n    value: function getNextPreviousDate(type) {\n      var selectedDate = this.parent.selectedDate;\n      var interval = type === 'next' ? this.parent.activeViewOptions.interval : -this.parent.activeViewOptions.interval;\n      var navigateDate = addMonths(this.parent.selectedDate, interval);\n      var month = type === 'next' ? 2 : 0;\n      var lastDate = new Date(selectedDate.getFullYear(), selectedDate.getMonth() + month, 0).getDate();\n      var date = lastDate >= this.monthAgendaDate.getDate() ? this.monthAgendaDate.getDate() : lastDate;\n      this.monthAgendaDate = new Date(navigateDate.getFullYear(), navigateDate.getMonth(), date);\n      return this.monthAgendaDate;\n    }\n  }, {\n    key: \"getAgendaBase\",\n    value: function getAgendaBase() {\n      return this.agendaBase || new AgendaBase(this.parent);\n    }\n  }, {\n    key: \"destroy\",\n    value: function destroy() {\n      if (this.agendaBase) {\n        this.agendaBase.destroy();\n        this.agendaBase = null;\n      }\n\n      _get(_getPrototypeOf(MonthAgenda.prototype), \"destroy\", this).call(this);\n    }\n  }]);\n\n  return MonthAgenda;\n}(Month);\n/**\n * timeline header rows\n */\n\n\nvar TimelineHeaderRow = /*#__PURE__*/function () {\n  function TimelineHeaderRow(parent, renderDates) {\n    _classCallCheck(this, TimelineHeaderRow);\n\n    this.parent = parent;\n    this.renderDates = renderDates;\n  }\n\n  _createClass(TimelineHeaderRow, [{\n    key: \"groupByYear\",\n    value: function groupByYear(dates) {\n      var result = {};\n\n      var _iterator143 = _createForOfIteratorHelper(dates),\n          _step143;\n\n      try {\n        for (_iterator143.s(); !(_step143 = _iterator143.n()).done;) {\n          var d = _step143.value;\n          var key = d.getFullYear();\n          result[key] = result[key] || [];\n          result[key].push(d);\n        }\n      } catch (err) {\n        _iterator143.e(err);\n      } finally {\n        _iterator143.f();\n      }\n\n      return result;\n    }\n  }, {\n    key: \"groupByMonth\",\n    value: function groupByMonth(dates) {\n      var result = {};\n\n      var _iterator144 = _createForOfIteratorHelper(dates),\n          _step144;\n\n      try {\n        for (_iterator144.s(); !(_step144 = _iterator144.n()).done;) {\n          var d = _step144.value;\n          var key = (d.getFullYear() - 1970) * 12 + d.getMonth();\n          result[key] = result[key] || [];\n          result[key].push(d);\n        }\n      } catch (err) {\n        _iterator144.e(err);\n      } finally {\n        _iterator144.f();\n      }\n\n      return result;\n    }\n  }, {\n    key: \"groupByWeek\",\n    value: function groupByWeek(dates) {\n      var result = {};\n\n      var _iterator145 = _createForOfIteratorHelper(dates),\n          _step145;\n\n      try {\n        for (_iterator145.s(); !(_step145 = _iterator145.n()).done;) {\n          var d = _step145.value;\n          var jsDate = +new Date(1970, 0, 1);\n          var tzOffsetDiff = d.getTimezoneOffset() - new Date(1970, 0, 1).getTimezoneOffset();\n          var key = Math.ceil(((+d - jsDate - tzOffsetDiff * 60 * 1000) / MS_PER_DAY + new Date(jsDate).getDay() + 1) / 7);\n\n          if (this.parent.firstDayOfWeek && this.parent.firstDayOfWeek > new Date(+d).getDay()) {\n            key = key - 1;\n          }\n\n          result[key] = result[key] || [];\n          result[key].push(d);\n        }\n      } catch (err) {\n        _iterator145.e(err);\n      } finally {\n        _iterator145.f();\n      }\n\n      return result;\n    }\n  }, {\n    key: \"generateSlots\",\n    value: function generateSlots(data, colspan, row, cls, type) {\n      var _this105 = this;\n\n      var dateParser = function dateParser(date, format) {\n        return _this105.parent.globalize.formatDate(date, {\n          format: format,\n          calendar: _this105.parent.getCalendarMode()\n        });\n      };\n\n      var tdDatas = [];\n      var keys = Object.keys(data);\n\n      for (var i = 0; i < keys.length; i++) {\n        var dates = data[keys[i]];\n        var htmlCol = void 0;\n\n        if (row.template) {\n          var args = {\n            date: dates[0],\n            type: type\n          };\n          var templateId = this.parent.element.id + '_headerRowTemplate';\n          htmlCol = [].slice.call(this.parent.templateParser(row.template)(args, this.parent, 'template', templateId, false));\n        } else {\n          var viewTemplate = void 0;\n\n          switch (row.option) {\n            case 'Year':\n              viewTemplate = \"<span class=\\\"e-header-year\\\">\".concat(dateParser(dates[0], 'y'), \"</span>\");\n              break;\n\n            case 'Month':\n              viewTemplate = \"<span class=\\\"e-header-month\\\">\".concat(capitalizeFirstWord(dateParser(dates[0], 'MMMM'), 'single'), \"</span>\");\n              break;\n\n            case 'Week':\n              viewTemplate = \"<span class=\\\"e-header-week\\\">\".concat(this.parent.getWeekNumberContent(dates), \"</span>\");\n          }\n\n          var headerWrapper = createElement('div', {\n            innerHTML: viewTemplate\n          });\n          htmlCol = [].slice.call(headerWrapper.childNodes);\n        }\n\n        tdDatas.push({\n          date: dates[0],\n          type: type,\n          className: [cls],\n          colSpan: dates.length * colspan,\n          template: htmlCol\n        });\n      }\n\n      return tdDatas;\n    }\n  }, {\n    key: \"generateColumnLevels\",\n    value: function generateColumnLevels(dateSlots, hourSlots) {\n      var levels = [];\n      var rows = this.parent.activeViewOptions.headerRows;\n      var lastLevelColspan = 1;\n\n      if (rows[rows.length - 1].option === 'Hour' && hourSlots.length > 0) {\n        lastLevelColspan = hourSlots.length / dateSlots.length;\n      }\n\n      var tdDatas = [];\n      var byYear;\n      var byMonth;\n      var byWeek;\n\n      var _iterator146 = _createForOfIteratorHelper(rows),\n          _step146;\n\n      try {\n        for (_iterator146.s(); !(_step146 = _iterator146.n()).done;) {\n          var row = _step146.value;\n\n          switch (row.option) {\n            case 'Year':\n              byYear = this.groupByYear(this.renderDates);\n              tdDatas = this.generateSlots(byYear, lastLevelColspan, row, 'e-header-year-cell', 'yearHeader');\n              levels.push(tdDatas);\n              break;\n\n            case 'Month':\n              byMonth = this.groupByMonth(this.renderDates);\n              tdDatas = this.generateSlots(byMonth, lastLevelColspan, row, 'e-header-month-cell', 'monthHeader');\n              levels.push(tdDatas);\n              break;\n\n            case 'Week':\n              byWeek = this.groupByWeek(this.renderDates);\n              tdDatas = this.generateSlots(byWeek, lastLevelColspan, row, 'e-header-week-cell', 'weekHeader');\n              levels.push(tdDatas);\n              break;\n\n            case 'Date':\n              tdDatas = dateSlots;\n              tdDatas = tdDatas.map(function (value) {\n                value.colSpan = lastLevelColspan;\n                return value;\n              });\n              levels.push(tdDatas);\n              break;\n\n            case 'Hour':\n              if (hourSlots.length > 0) {\n                levels.push(hourSlots);\n              }\n\n              break;\n          }\n        }\n      } catch (err) {\n        _iterator146.e(err);\n      } finally {\n        _iterator146.f();\n      }\n\n      return levels;\n    }\n  }]);\n\n  return TimelineHeaderRow;\n}();\n/**\n * timeline views\n */\n\n\nvar TimelineViews = /*#__PURE__*/function (_VerticalView4) {\n  _inherits(TimelineViews, _VerticalView4);\n\n  var _super27 = _createSuper(TimelineViews);\n\n  function TimelineViews(parent) {\n    var _this106;\n\n    _classCallCheck(this, TimelineViews);\n\n    _this106 = _super27.call(this, parent);\n    _this106.timelineAppointment = null;\n    _this106.baseCssClass = 'e-timeline-view';\n    return _this106;\n  }\n\n  _createClass(TimelineViews, [{\n    key: \"getModuleName\",\n    value: function getModuleName() {\n      return 'timelineViews';\n    }\n  }, {\n    key: \"getLeftPanelElement\",\n    value: function getLeftPanelElement() {\n      return this.element.querySelector('.' + RESOURCE_COLUMN_WRAP_CLASS);\n    }\n  }, {\n    key: \"scrollTopPanel\",\n    value: function scrollTopPanel(target) {\n      _get(_getPrototypeOf(TimelineViews.prototype), \"scrollTopPanel\", this).call(this, target);\n\n      this.scrollHeaderLabels(target);\n    }\n  }, {\n    key: \"scrollToWorkHour\",\n    value: function scrollToWorkHour() {\n      var start = this.parent.getStartEndTime(this.parent.workHours.start);\n      var currDateTime = this.isWorkDay(this.parent.selectedDate) && this.parent.workHours.highlight && !isNullOrUndefined(start) ? new Date(+this.parent.selectedDate).setHours(start.getHours(), start.getMinutes(), 0, 0) : new Date(+this.parent.selectedDate).setHours(0, 0, 0, 0);\n      var queryString = '[data-date=\"' + new Date(currDateTime).getTime().toString() + '\"]';\n      var firstWorkHourCell = this.element.querySelector(queryString);\n\n      if (firstWorkHourCell) {\n        this.getContentAreaElement().scrollLeft = !this.parent.enableRtl ? firstWorkHourCell.offsetLeft : -(this.parent.getContentTable().offsetWidth - firstWorkHourCell.offsetLeft - firstWorkHourCell.offsetWidth);\n      }\n    }\n  }, {\n    key: \"scrollToHour\",\n    value: function scrollToHour(hour, scrollDate) {\n      var date;\n      var index;\n\n      if (scrollDate) {\n        index = this.parent.getIndexOfDate(this.renderDates, resetTime(scrollDate));\n\n        if (index >= 0) {\n          var timeString = hour.split(':');\n\n          if (timeString.length === 2) {\n            date = new Date(scrollDate.setHours(parseInt(timeString[0], 10), parseInt(timeString[1], 10), 0));\n          }\n        }\n      }\n\n      date = isNullOrUndefined(scrollDate) ? this.parent.getStartEndTime(hour) : date;\n\n      if (isNullOrUndefined(date)) {\n        return;\n      }\n\n      var scrollLeft = isNullOrUndefined(scrollDate) ? this.getLeftFromDateTime(null, date) : this.getLeftFromDateTime([index], date);\n      this.getScrollableElement().scrollLeft = !this.parent.enableRtl ? scrollLeft : -scrollLeft;\n    }\n  }, {\n    key: \"generateColumnLevels\",\n    value: function generateColumnLevels() {\n      var levels = [];\n      var dateSlots = this.getDateSlots(this.renderDates, this.parent.activeViewOptions.workDays);\n      levels.push(dateSlots);\n\n      if (this.parent.activeViewOptions.group.resources.length > 0) {\n        this.parent.resourceBase.generateResourceLevels(dateSlots, !this.parent.uiStateValues.isGroupAdaptive);\n      }\n\n      var hourSlots = [];\n\n      if (this.parent.activeViewOptions.timeScale.enable) {\n        hourSlots = this.generateTimeSlots(levels[levels.length - 1]);\n        levels.push(hourSlots);\n      }\n\n      if (this.parent.activeViewOptions.headerRows.length > 0) {\n        var renderGn = new TimelineHeaderRow(this.parent, this.renderDates);\n        levels = renderGn.generateColumnLevels(dateSlots, hourSlots);\n      }\n\n      return levels;\n    }\n  }, {\n    key: \"generateTimeSlots\",\n    value: function generateTimeSlots(dateSlots) {\n      var _this107 = this;\n\n      var handler = function handler(r) {\n        r.type = r.first ? 'majorSlot' : 'minorSlot';\n        r.className = r.first ? [TIME_SLOT_CLASS] : [TIME_SLOT_CLASS, TIME_CELLS_CLASS];\n        r.workDays = _this107.parent.activeViewOptions.workDays;\n        return r;\n      };\n\n      var timeSlotData = this.getTimeSlotRows(handler);\n      var slots = [];\n\n      var _iterator147 = _createForOfIteratorHelper(dateSlots),\n          _step147;\n\n      try {\n        for (_iterator147.s(); !(_step147 = _iterator147.n()).done;) {\n          var data = _step147.value;\n          data.colSpan = timeSlotData.length;\n          var tempTimeSlots = extend([], timeSlotData, null, true);\n\n          var _iterator148 = _createForOfIteratorHelper(tempTimeSlots),\n              _step148;\n\n          try {\n            for (_iterator148.s(); !(_step148 = _iterator148.n()).done;) {\n              var slot = _step148.value;\n              var cellDate = resetTime(new Date('' + data.date));\n              slot.date = setTime(cellDate, getDateInMs(slot.date));\n              slots.push(slot);\n            }\n          } catch (err) {\n            _iterator148.e(err);\n          } finally {\n            _iterator148.f();\n          }\n        }\n      } catch (err) {\n        _iterator147.e(err);\n      } finally {\n        _iterator147.f();\n      }\n\n      return slots;\n    }\n  }, {\n    key: \"changeCurrentTimePosition\",\n    value: function changeCurrentTimePosition() {\n      if (!this.parent || this.parent && this.parent.isDestroyed) {\n        return;\n      }\n\n      this.removeCurrentTimeIndicatorElements();\n      var currentDateIndex = this.getCurrentTimeIndicatorIndex();\n      var left = this.getLeftFromDateTime(currentDateIndex, this.parent.getCurrentTime());\n      var height = this.element.querySelector('.' + CONTENT_TABLE_CLASS).offsetHeight;\n      var headerWrap = this.element.querySelector('.' + DATE_HEADER_WRAP_CLASS);\n      var contentWrap = this.element.querySelector('.' + CONTENT_WRAP_CLASS);\n      contentWrap.appendChild(createElement('div', {\n        className: CURRENT_TIMELINE_CLASS,\n        styles: (this.parent.enableRtl ? 'right' : 'left') + ':' + formatUnit(left) + '; height:' + formatUnit(height)\n      }));\n\n      if (this.parent.virtualScrollModule) {\n        var timeIndicator = this.parent.element.querySelector('.' + CURRENT_TIMELINE_CLASS);\n        var element = this.parent.element.querySelector('.' + CONTENT_WRAP_CLASS + ' table');\n        setStyleAttribute(timeIndicator, {\n          transform: element.style.transform\n        });\n      }\n\n      var currentTimeEle = createElement('div', {\n        innerHTML: this.parent.getTimeString(this.parent.getCurrentTime()),\n        className: CURRENT_TIME_CLASS\n      });\n      headerWrap.appendChild(currentTimeEle);\n      currentTimeEle.style[this.parent.enableRtl ? 'right' : 'left'] = formatUnit(left - currentTimeEle.offsetWidth / 2);\n    }\n  }, {\n    key: \"getLeftFromDateTime\",\n    value: function getLeftFromDateTime(currentDateIndex, date) {\n      var startHour = this.getStartHour();\n      var endHour = this.getEndHour();\n      var diffInDates = 0;\n      var diffInMinutes = (date.getHours() - startHour.getHours()) * 60 + (date.getMinutes() - startHour.getMinutes());\n\n      if (!isNullOrUndefined(currentDateIndex)) {\n        var end = endHour.getHours() === 0 ? 24 : endHour.getHours();\n\n        if (currentDateIndex[0] !== 0) {\n          diffInDates = currentDateIndex[0] * ((end - startHour.getHours()) * 60) + (endHour.getMinutes() - startHour.getMinutes());\n        }\n\n        diffInMinutes = diffInDates + diffInMinutes;\n      }\n\n      return diffInMinutes * this.getWorkCellWidth() * this.parent.activeViewOptions.timeScale.slotCount / this.parent.activeViewOptions.timeScale.interval;\n    }\n  }, {\n    key: \"getWorkCellWidth\",\n    value: function getWorkCellWidth() {\n      return this.element.querySelector('.e-work-cells').getBoundingClientRect().width;\n    }\n  }, {\n    key: \"renderHeader\",\n    value: function renderHeader() {\n      var tr = createElement('tr');\n\n      if (this.parent.activeViewOptions.group.resources.length > 0 && !this.parent.uiStateValues.isGroupAdaptive) {\n        this.parent.resourceBase.renderResourceHeaderIndent(tr);\n      }\n\n      var dateTd = createElement('td');\n      dateTd.appendChild(this.renderDatesHeader());\n      tr.appendChild(dateTd);\n      prepend([tr], this.element.querySelector('tbody'));\n    } // eslint-disable-next-line @typescript-eslint/no-unused-vars\n\n  }, {\n    key: \"createAllDayRow\",\n    value: function createAllDayRow(table, tdData) {}\n  }, {\n    key: \"getCurrentTimeIndicatorIndex\",\n    value: function getCurrentTimeIndicatorIndex() {\n      var currentDateIndex = [];\n      var index = this.parent.getIndexOfDate(this.renderDates, resetTime(this.parent.getCurrentTime()));\n\n      if (index >= 0) {\n        currentDateIndex.push(index);\n      }\n\n      return currentDateIndex;\n    }\n  }, {\n    key: \"renderContent\",\n    value: function renderContent() {\n      var tr = createElement('tr');\n\n      if (this.parent.activeViewOptions.group.resources.length > 0 && !this.parent.uiStateValues.isGroupAdaptive) {\n        var resTd = createElement('td');\n        resTd.appendChild(this.parent.resourceBase.createResourceColumn());\n        tr.appendChild(resTd);\n      }\n\n      var workTd = createElement('td');\n      var wrap = this.renderContentArea();\n      wrap.appendChild(this.createEventTable(this.getRowCount()));\n      this.collapseRows(wrap);\n      workTd.appendChild(wrap);\n      tr.appendChild(workTd);\n\n      if (this.parent.virtualScrollModule) {\n        this.parent.virtualScrollModule.renderVirtualTrack(wrap);\n      }\n\n      this.element.querySelector('tbody').appendChild(tr);\n    }\n  }, {\n    key: \"getRowCount\",\n    value: function getRowCount() {\n      if (this.parent.activeViewOptions.group.resources.length > 0 && !this.parent.uiStateValues.isGroupAdaptive) {\n        return this.parent.resourceBase.renderedResources.length;\n      }\n\n      return 1;\n    }\n  }, {\n    key: \"getResourceTdData\",\n    value: function getResourceTdData(i, tdData) {\n      var resLevel = this.parent.resourceBase.renderedResources[i];\n      var resSHr = resLevel.resourceData[resLevel.resource.startHourField] || this.parent.workHours.start;\n      var resEHr = resLevel.resourceData[resLevel.resource.endHourField] || this.parent.workHours.end;\n      tdData.startHour = this.parent.getStartEndTime(resSHr);\n      tdData.endHour = this.parent.getStartEndTime(resEHr);\n      tdData.workDays = resLevel.resourceData[resLevel.resource.workDaysField] || this.parent.workDays;\n      tdData.className = resLevel.className;\n      tdData.groupIndex = resLevel.groupIndex;\n      tdData.groupOrder = resLevel.groupOrder;\n      return tdData;\n    }\n  }, {\n    key: \"renderContentTable\",\n    value: function renderContentTable(table) {\n      var tBody = table.querySelector('tbody');\n      append(this.getContentRows(), tBody);\n    }\n  }, {\n    key: \"getContentRows\",\n    value: function getContentRows() {\n      var rows = [];\n      var tr = createElement('tr', {\n        attrs: {\n          role: 'row'\n        }\n      });\n      var td = createElement('td', {\n        attrs: {\n          role: 'gridcell',\n          'aria-selected': 'false'\n        }\n      });\n      var trCount = this.getRowCount();\n\n      for (var i = 0; i < trCount; i++) {\n        var ntr = tr.cloneNode();\n\n        var _iterator149 = _createForOfIteratorHelper(this.colLevels[this.colLevels.length - 1]),\n            _step149;\n\n        try {\n          for (_iterator149.s(); !(_step149 = _iterator149.n()).done;) {\n            var tdData = _step149.value;\n\n            if (this.parent.activeViewOptions.group.resources.length > 0 && !this.parent.uiStateValues.isGroupAdaptive) {\n              tdData = this.getResourceTdData(i, tdData);\n            }\n\n            var ntd = this.createContentTd(tdData, tdData, td);\n            ntr.appendChild(ntd);\n          }\n        } catch (err) {\n          _iterator149.e(err);\n        } finally {\n          _iterator149.f();\n        }\n\n        rows.push(ntr);\n      }\n\n      return rows;\n    }\n  }, {\n    key: \"getContentTdClass\",\n    value: function getContentTdClass(r) {\n      return r.first || !this.parent.activeViewOptions.timeScale.enable ? [WORK_CELLS_CLASS] : [WORK_CELLS_CLASS, ALTERNATE_CELLS_CLASS];\n    }\n  }, {\n    key: \"renderEvents\",\n    value: function renderEvents() {\n      this.timelineAppointment = new TimelineEvent(this.parent, this.parent.activeViewOptions.timeScale.enable ? 'hour' : 'day');\n      this.timelineAppointment.renderAppointments();\n      this.parent.notify(eventsLoaded, {});\n    }\n  }, {\n    key: \"destroy\",\n    value: function destroy() {\n      if (!this.parent || this.parent && this.parent.isDestroyed) {\n        return;\n      }\n\n      if (this.timelineAppointment) {\n        this.timelineAppointment.destroy();\n        this.timelineAppointment = null;\n      }\n\n      _get(_getPrototypeOf(TimelineViews.prototype), \"destroy\", this).call(this);\n    }\n  }]);\n\n  return TimelineViews;\n}(VerticalView);\n/**\n * timeline month view\n */\n\n\nvar TimelineMonth = /*#__PURE__*/function (_Month2) {\n  _inherits(TimelineMonth, _Month2);\n\n  var _super28 = _createSuper(TimelineMonth);\n\n  function TimelineMonth(parent) {\n    var _this108;\n\n    _classCallCheck(this, TimelineMonth);\n\n    _this108 = _super28.call(this, parent);\n    _this108.viewClass = 'e-timeline-month-view';\n    _this108.isInverseTableSelect = true;\n    _this108.appointment = null;\n    return _this108;\n  }\n\n  _createClass(TimelineMonth, [{\n    key: \"getModuleName\",\n    value: function getModuleName() {\n      return 'timelineMonth';\n    }\n  }, {\n    key: \"onDataReady\",\n    value: function onDataReady() {\n      this.appointment = new TimelineEvent(this.parent, 'day');\n      this.appointment.renderAppointments();\n      this.parent.notify(eventsLoaded, {});\n    }\n  }, {\n    key: \"getLeftPanelElement\",\n    value: function getLeftPanelElement() {\n      return this.element.querySelector('.' + RESOURCE_COLUMN_WRAP_CLASS);\n    }\n  }, {\n    key: \"scrollTopPanel\",\n    value: function scrollTopPanel(target) {\n      _get(_getPrototypeOf(TimelineMonth.prototype), \"scrollTopPanel\", this).call(this, target);\n\n      this.scrollHeaderLabels(target);\n    }\n  }, {\n    key: \"setContentHeight\",\n    value: function setContentHeight(content, leftPanelElement, height) {\n      if (leftPanelElement) {\n        leftPanelElement.style.height = formatUnit(height - this.getScrollXIndent(content));\n      }\n\n      content.style.height = formatUnit(height);\n    }\n  }, {\n    key: \"getDateSlots\",\n    value: function getDateSlots(renderDates, workDays) {\n      var dateSlots = [];\n\n      var _iterator150 = _createForOfIteratorHelper(renderDates),\n          _step150;\n\n      try {\n        for (_iterator150.s(); !(_step150 = _iterator150.n()).done;) {\n          var col = _step150.value;\n          var classList$$1 = [HEADER_CELLS_CLASS];\n\n          if (this.isCurrentDate(col)) {\n            classList$$1.push(CURRENT_DAY_CLASS);\n          }\n\n          dateSlots.push({\n            date: col,\n            type: 'dateHeader',\n            className: classList$$1,\n            colSpan: 1,\n            workDays: workDays\n          });\n        }\n      } catch (err) {\n        _iterator150.e(err);\n      } finally {\n        _iterator150.f();\n      }\n\n      return dateSlots;\n    }\n  }, {\n    key: \"renderLeftIndent\",\n    value: function renderLeftIndent(tr) {\n      if (this.parent.activeViewOptions.group.resources.length > 0 && !this.parent.uiStateValues.isGroupAdaptive) {\n        this.parent.resourceBase.renderResourceHeaderIndent(tr);\n      }\n    }\n  }, {\n    key: \"renderContent\",\n    value: function renderContent() {\n      var contentTr = createElement('tr');\n\n      if (this.parent.activeViewOptions.group.resources.length > 0 && !this.parent.uiStateValues.isGroupAdaptive) {\n        var resTd = createElement('td');\n        resTd.appendChild(this.parent.resourceBase.createResourceColumn());\n        contentTr.appendChild(resTd);\n      }\n\n      var contentTd = createElement('td');\n      this.element.querySelector('tbody').appendChild(contentTr);\n      var wrap = createElement('div', {\n        className: CONTENT_WRAP_CLASS\n      });\n      wrap.appendChild(this.renderContentArea());\n      wrap.appendChild(this.createEventTable(this.getRowCount()));\n      this.collapseRows(wrap);\n      EventHandler.add(wrap, 'scroll', this.onContentScroll, this);\n      contentTd.appendChild(wrap);\n\n      if (this.parent.virtualScrollModule) {\n        this.parent.virtualScrollModule.renderVirtualTrack(wrap);\n      }\n\n      contentTr.appendChild(contentTd);\n    }\n  }, {\n    key: \"getRowCount\",\n    value: function getRowCount() {\n      if (this.parent.activeViewOptions.group.resources.length > 0 && !this.parent.uiStateValues.isGroupAdaptive) {\n        return this.parent.resourceBase.renderedResources.length;\n      }\n\n      return 1;\n    }\n  }, {\n    key: \"getContentSlots\",\n    value: function getContentSlots() {\n      var slotDatas = [];\n\n      for (var row = 0; row < this.getRowCount(); row++) {\n        var _iterator151 = _createForOfIteratorHelper(this.colLevels[this.colLevels.length - 1]),\n            _step151;\n\n        try {\n          for (_iterator151.s(); !(_step151 = _iterator151.n()).done;) {\n            var data = _step151.value;\n            data.className = [WORK_CELLS_CLASS];\n\n            if (this.parent.activeViewOptions.group.resources.length > 0 && !this.parent.uiStateValues.isGroupAdaptive) {\n              var resLevel = this.parent.resourceBase.renderedResources[row];\n              data.workDays = resLevel.resourceData[resLevel.resource.workDaysField] || this.parent.workDays;\n              data.className = data.className.concat(resLevel.className);\n              data.groupIndex = resLevel.groupIndex;\n              data.groupOrder = resLevel.groupOrder;\n            }\n\n            var slotData = {\n              date: new Date(+data.date),\n              colSpan: data.colSpan,\n              groupIndex: data.groupIndex,\n              workDays: data.workDays,\n              type: 'monthCells',\n              className: data.className\n            };\n\n            if (!slotDatas[row]) {\n              slotDatas[row] = [];\n            }\n\n            slotDatas[row].push(slotData);\n          }\n        } catch (err) {\n          _iterator151.e(err);\n        } finally {\n          _iterator151.f();\n        }\n      }\n\n      return slotDatas;\n    }\n  }, {\n    key: \"updateClassList\",\n    value: function updateClassList(data) {\n      if (!this.parent.isMinMaxDate(data.date)) {\n        data.className.push(DISABLE_DATES);\n      }\n    }\n  }, {\n    key: \"unWireEvents\",\n    value: function unWireEvents() {\n      EventHandler.remove(this.getContentAreaElement(), 'scroll', this.onContentScroll);\n    }\n  }, {\n    key: \"getMonthStart\",\n    value: function getMonthStart(currentDate) {\n      var monthStart = this.parent.calendarUtil.firstDateOfMonth(resetTime(currentDate));\n      return new Date(monthStart.getFullYear(), monthStart.getMonth(), monthStart.getDate());\n    }\n  }, {\n    key: \"getMonthEnd\",\n    value: function getMonthEnd(currentDate) {\n      var monthStart = this.parent.calendarUtil.firstDateOfMonth(resetTime(currentDate));\n      return this.parent.calendarUtil.lastDateOfMonth(addMonths(new Date(+monthStart), this.parent.activeViewOptions.interval - 1));\n    }\n  }, {\n    key: \"generateColumnLevels\",\n    value: function generateColumnLevels() {\n      var colLevels = [];\n      var level = this.getDateSlots(this.renderDates, this.parent.activeViewOptions.workDays);\n      colLevels.push(level);\n\n      if (this.parent.activeViewOptions.group.resources.length > 0) {\n        this.parent.resourceBase.generateResourceLevels(level, !this.parent.uiStateValues.isGroupAdaptive);\n      }\n\n      var hourSlots = [];\n\n      if (this.parent.activeViewOptions.headerRows.length > 0) {\n        var renderGn = new TimelineHeaderRow(this.parent, this.renderDates);\n        colLevels = renderGn.generateColumnLevels(level, hourSlots);\n      }\n\n      this.colLevels = colLevels;\n      return colLevels;\n    }\n  }, {\n    key: \"destroy\",\n    value: function destroy() {\n      if (!this.parent || this.parent && this.parent.isDestroyed) {\n        return;\n      }\n\n      if (this.element) {\n        var contentScrollableEle = this.element.querySelector('.' + CONTENT_WRAP_CLASS);\n\n        if (contentScrollableEle) {\n          EventHandler.remove(contentScrollableEle, 'scroll', this.onContentScroll);\n        }\n      }\n\n      if (this.appointment) {\n        this.appointment.destroy();\n        this.appointment = null;\n      }\n\n      _get(_getPrototypeOf(TimelineMonth.prototype), \"destroy\", this).call(this);\n    }\n  }]);\n\n  return TimelineMonth;\n}(Month);\n/* eslint-disable @typescript-eslint/no-explicit-any */\n\n/**\n * timeline year view\n */\n\n\nvar TimelineYear = /*#__PURE__*/function (_Year) {\n  _inherits(TimelineYear, _Year);\n\n  var _super29 = _createSuper(TimelineYear);\n\n  function TimelineYear(parent) {\n    var _this109;\n\n    _classCallCheck(this, TimelineYear);\n\n    _this109 = _super29.call(this, parent);\n    _this109.viewClass = 'e-timeline-year-view';\n    _this109.isInverseTableSelect = true;\n    return _this109;\n  }\n\n  _createClass(TimelineYear, [{\n    key: \"getModuleName\",\n    value: function getModuleName() {\n      return 'timelineYear';\n    }\n  }, {\n    key: \"renderHeader\",\n    value: function renderHeader(headerWrapper) {\n      var tr = createElement('tr');\n      headerWrapper.appendChild(tr);\n\n      if (this.parent.activeViewOptions.orientation === 'Vertical' && this.parent.activeViewOptions.group.resources.length > 0 && !this.parent.uiStateValues.isGroupAdaptive) {\n        this.parent.resourceBase.renderResourceHeaderIndent(tr);\n      } else {\n        var leftHeaderCells = createElement('td', {\n          className: LEFT_INDENT_CLASS\n        });\n        tr.appendChild(leftHeaderCells);\n        leftHeaderCells.appendChild(this.renderResourceHeader(LEFT_INDENT_WRAP_CLASS));\n      }\n\n      var td = createElement('td');\n      tr.appendChild(td);\n      var container = createElement('div', {\n        className: DATE_HEADER_CONTAINER_CLASS\n      });\n      td.appendChild(container);\n\n      if (this.parent.activeViewOptions.orientation === 'Horizontal' && this.parent.activeViewOptions.group.resources.length > 0 && !this.parent.uiStateValues.isGroupAdaptive) {\n        container.appendChild(this.renderResourceHeader(DATE_HEADER_WRAP_CLASS));\n        this.columnCount = this.colLevels.slice(-1)[0].length;\n      } else {\n        var wrapper = createElement('div', {\n          className: DATE_HEADER_WRAP_CLASS\n        });\n        container.appendChild(wrapper);\n        var table = this.createTableLayout();\n        wrapper.appendChild(table);\n        table.appendChild(this.createTableColGroup(this.columnCount));\n        var innerTr = createElement('tr');\n        table.querySelector('tbody').appendChild(innerTr);\n        var months = this.getMonths();\n        var dayHeaderDates = this.getMonthDates(new Date(this.parent.selectedDate.getFullYear(), months[0], 1));\n\n        for (var column = 0; column < this.columnCount; column++) {\n          var date = new Date(this.parent.selectedDate.getFullYear(), months[column], 1);\n          var innerTd = createElement('td', {\n            className: HEADER_CELLS_CLASS\n          });\n\n          if (this.parent.activeViewOptions.orientation === 'Horizontal') {\n            if (this.parent.dayHeaderTemplate) {\n              append(this.renderDayMonthHeaderTemplate(dayHeaderDates[column], column, 'dayHeaderTemplate'), innerTd);\n            } else {\n              innerTd.innerHTML = \"<span>\".concat(this.parent.getDayNames('abbreviated')[column % 7], \"</span>\");\n            }\n          } else {\n            if (this.parent.monthHeaderTemplate) {\n              append(this.renderDayMonthHeaderTemplate(date, months[column], 'mothHeaderTemplate'), innerTd);\n            } else {\n              innerTd.innerHTML = \"<span>\".concat(this.getMonthName(date), \"</span>\");\n            }\n\n            innerTd.setAttribute('data-date', date.getTime().toString());\n          }\n\n          innerTr.appendChild(innerTd);\n          this.parent.trigger(renderCell, {\n            elementType: 'headerCells',\n            element: innerTd\n          });\n        }\n      }\n    }\n  }, {\n    key: \"renderResourceHeader\",\n    value: function renderResourceHeader(className) {\n      var wrap = createElement('div', {\n        className: className\n      });\n      var tbl = this.createTableLayout();\n      wrap.appendChild(tbl);\n      var trEle = createElement('tr');\n\n      if (this.parent.activeViewOptions.group.resources.length > 0) {\n        this.colLevels = this.generateColumnLevels();\n      } else {\n        var colData = [{\n          className: [HEADER_CELLS_CLASS],\n          type: 'headerCell'\n        }];\n        this.colLevels = [colData];\n      }\n\n      var _iterator152 = _createForOfIteratorHelper(this.colLevels),\n          _step152;\n\n      try {\n        for (_iterator152.s(); !(_step152 = _iterator152.n()).done;) {\n          var col = _step152.value;\n          var ntr = trEle.cloneNode();\n          var count = className === DATE_HEADER_WRAP_CLASS ? col : [col[0]];\n\n          var _iterator153 = _createForOfIteratorHelper(count),\n              _step153;\n\n          try {\n            for (_iterator153.s(); !(_step153 = _iterator153.n()).done;) {\n              var c = _step153.value;\n              var tdEle = createElement('td');\n\n              if (c.className) {\n                addClass([tdEle], c.className);\n              }\n\n              if (className === DATE_HEADER_WRAP_CLASS) {\n                if (c.template) {\n                  append(c.template, tdEle);\n                }\n\n                if (c.colSpan) {\n                  tdEle.setAttribute('colspan', c.colSpan.toString());\n                }\n\n                if (c.groupIndex > -1) {\n                  tdEle.setAttribute('data-group-index', c.groupIndex.toString());\n                }\n\n                this.setResourceHeaderContent(tdEle, c);\n              }\n\n              if (className === LEFT_INDENT_WRAP_CLASS) {\n                this.parent.renderHeaderIndentTemplate(c, tdEle);\n              }\n\n              var args = {\n                elementType: c.type,\n                element: tdEle,\n                date: c.date,\n                groupIndex: c.groupIndex\n              };\n              this.parent.trigger(renderCell, args);\n              ntr.appendChild(tdEle);\n            }\n          } catch (err) {\n            _iterator153.e(err);\n          } finally {\n            _iterator153.f();\n          }\n\n          tbl.querySelector('tbody').appendChild(ntr);\n        }\n      } catch (err) {\n        _iterator152.e(err);\n      } finally {\n        _iterator152.f();\n      }\n\n      if (className === DATE_HEADER_WRAP_CLASS) {\n        tbl.appendChild(this.createTableColGroup(this.colLevels.slice(-1)[0].length));\n      }\n\n      return wrap;\n    }\n  }, {\n    key: \"renderContent\",\n    value: function renderContent(contentWrapper) {\n      var tr = createElement('tr');\n      contentWrapper.appendChild(tr);\n      var firstTd = createElement('td');\n      var lastTd = createElement('td');\n      var tdCollection = [];\n      var monthTBody;\n\n      if (this.parent.activeViewOptions.orientation === 'Vertical' && this.parent.activeViewOptions.group.resources.length > 0 && !this.parent.uiStateValues.isGroupAdaptive) {\n        tdCollection.push(firstTd);\n        firstTd.appendChild(this.parent.resourceBase.createResourceColumn());\n        this.rowCount = this.parent.resourceBase.lastResourceLevel.length;\n      } else {\n        tdCollection.push(firstTd);\n        var monthWrapper = createElement('div', {\n          className: MONTH_HEADER_WRAPPER\n        });\n        firstTd.appendChild(monthWrapper);\n        monthWrapper.appendChild(this.createTableLayout());\n        monthTBody = monthWrapper.querySelector('tbody');\n      }\n\n      tdCollection.push(lastTd);\n      append(tdCollection, tr);\n      var content = createElement('div', {\n        className: CONTENT_WRAP_CLASS\n      });\n      lastTd.appendChild(content);\n      var contentTable = this.createTableLayout(CONTENT_TABLE_CLASS);\n      content.appendChild(contentTable);\n      var eventWrapper = createElement('div', {\n        className: EVENT_TABLE_CLASS\n      });\n      content.appendChild(eventWrapper);\n      var contentTBody = contentTable.querySelector('tbody');\n\n      if (this.parent.activeViewOptions.group.resources.length > 0 && !this.parent.uiStateValues.isGroupAdaptive) {\n        if (this.parent.rowAutoHeight) {\n          var addClassTable = [contentTable];\n          var monthHeader = this.parent.element.querySelector('.' + MONTH_HEADER_WRAPPER + ' .' + SCHEDULE_TABLE_CLASS);\n\n          if (monthHeader) {\n            addClassTable.push(monthHeader);\n          }\n\n          addClass(addClassTable, AUTO_HEIGHT);\n        }\n\n        var colCount = this.parent.activeViewOptions.orientation === 'Horizontal' ? this.colLevels.slice(-1)[0].length : this.columnCount;\n        contentTable.appendChild(this.createTableColGroup(colCount));\n        this.renderResourceContent(eventWrapper, monthTBody, contentTBody);\n      } else {\n        contentTable.appendChild(this.createTableColGroup(this.columnCount));\n        this.renderDefaultContent(eventWrapper, monthTBody, contentTBody);\n      }\n    }\n  }, {\n    key: \"renderDefaultContent\",\n    value: function renderDefaultContent(wrapper, monthBody, contentBody) {\n      var months = this.getMonths();\n      var dayHeaderDates = this.getMonthDates(new Date(this.parent.selectedDate.getFullYear(), months[0], 1));\n\n      for (var month = 0; month < this.rowCount; month++) {\n        wrapper.appendChild(createElement('div', {\n          className: APPOINTMENT_CONTAINER_CLASS\n        }));\n        var monthDate = new Date(this.parent.selectedDate.getFullYear(), months[month], 1);\n        var monthStart = this.parent.calendarUtil.getMonthStartDate(new Date(monthDate.getTime()));\n        var monthEnd = this.parent.calendarUtil.getMonthEndDate(new Date(monthDate.getTime()));\n        var tr = createElement('tr', {\n          attrs: {\n            'role': 'row'\n          }\n        });\n        var monthTr = tr.cloneNode();\n        monthBody.appendChild(monthTr);\n        var contentTr = tr.cloneNode();\n        contentBody.appendChild(contentTr);\n        var monthTd = createElement('td', {\n          className: MONTH_HEADER_CLASS,\n          attrs: {\n            'role': 'gridcell'\n          }\n        });\n\n        if (this.parent.activeViewOptions.orientation === 'Horizontal') {\n          if (this.parent.monthHeaderTemplate) {\n            append(this.renderDayMonthHeaderTemplate(monthStart, month, 'monthHeaderTemplate'), monthTd);\n          } else {\n            monthTd.innerHTML = \"<span>\".concat(this.getMonthName(monthDate), \"</span>\");\n          }\n\n          monthTd.setAttribute('data-date', monthDate.getTime().toString());\n        } else {\n          if (this.parent.dayHeaderTemplate) {\n            append(this.renderDayMonthHeaderTemplate(dayHeaderDates[month], month, 'dayHeaderTemplate'), monthTd);\n          } else {\n            monthTd.innerHTML = \"<span>\".concat(this.parent.getDayNames('abbreviated')[month % 7], \"</span>\");\n          }\n        }\n\n        monthTr.appendChild(monthTd);\n        this.parent.trigger(renderCell, {\n          elementType: 'leftHeaderCells',\n          element: monthTd\n        });\n        var date = new Date(monthStart.getTime());\n\n        for (var column = 0; column < this.columnCount; column++) {\n          var isDateAvail = void 0;\n\n          if (this.parent.activeViewOptions.orientation === 'Vertical') {\n            monthDate = new Date(this.parent.selectedDate.getFullYear(), months[column], 1);\n            monthStart = this.parent.calendarUtil.getMonthStartDate(new Date(monthDate.getTime()));\n            monthEnd = this.parent.calendarUtil.getMonthEndDate(new Date(monthDate.getTime()));\n            var dayDate = month - monthStart.getDay() + 1;\n            date = new Date(this.parent.selectedDate.getFullYear(), months[column], dayDate);\n            isDateAvail = dayDate > 0 && date.getTime() < monthEnd.getTime();\n          } else {\n            isDateAvail = column >= monthStart.getDay() && date.getTime() < monthEnd.getTime();\n          }\n\n          var td = createElement('td', {\n            className: WORK_CELLS_CLASS,\n            attrs: {\n              'role': 'gridcell',\n              'aria-selected': 'false'\n            }\n          });\n          contentTr.appendChild(td);\n          var dateHeader = createElement('div', {\n            className: DATE_HEADER_CLASS + ' ' + NAVIGATE_CLASS,\n            innerHTML: isDateAvail ? this.parent.globalize.formatDate(date, {\n              skeleton: 'd',\n              calendar: this.parent.getCalendarMode()\n            }) : ''\n          });\n          var skeleton = 'full';\n          var announcementText = this.parent.globalize.formatDate(date, {\n            skeleton: skeleton,\n            calendar: this.parent.getCalendarMode()\n          });\n          dateHeader.setAttribute('aria-label', announcementText);\n\n          if (isDateAvail) {\n            var tds = [td];\n            var classList$$1 = [];\n\n            if (this.parent.activeViewOptions.workDays.indexOf(date.getDay()) > -1) {\n              classList$$1.push(WORKDAY_CLASS);\n            }\n\n            if (this.isCurrentDate(date)) {\n              classList$$1.push(CURRENT_DAY_CLASS);\n\n              if (this.parent.activeViewOptions.orientation === 'Horizontal') {\n                tds.push(this.element.querySelector('.' + HEADER_CELLS_CLASS + \":nth-child(\".concat(column + 1, \")\")));\n              } else {\n                tds.push(this.element.querySelectorAll('.' + MONTH_HEADER_CLASS).item(month));\n              }\n            }\n\n            if (classList$$1.length > 0) {\n              addClass(tds, classList$$1);\n            }\n          } else {\n            addClass([td], OTHERMONTH_CLASS);\n          }\n\n          td.appendChild(dateHeader);\n\n          if (isDateAvail) {\n            td.setAttribute('data-date', date.getTime().toString());\n            this.wireEvents(td, 'cell');\n          }\n\n          this.renderCellTemplate({\n            date: date,\n            type: 'workCells'\n          }, td);\n          this.parent.trigger(renderCell, {\n            elementType: 'workCells',\n            element: td,\n            date: date\n          });\n\n          if (isDateAvail) {\n            if (this.parent.activeViewOptions.orientation === 'Horizontal') {\n              date = addDays(new Date(date.getTime()), 1);\n            }\n          }\n        }\n      }\n    }\n  }, {\n    key: \"renderResourceContent\",\n    value: function renderResourceContent(wrapper, monthBody, contentBody) {\n      var months = this.getMonths();\n\n      for (var row = 0; row < this.rowCount; row++) {\n        wrapper.appendChild(createElement('div', {\n          className: APPOINTMENT_CONTAINER_CLASS\n        }));\n        var tr = createElement('tr', {\n          attrs: {\n            'role': 'row'\n          }\n        });\n        contentBody.appendChild(tr);\n        var resData = void 0;\n\n        if (this.parent.activeViewOptions.group.resources.length > 0 && !this.parent.uiStateValues.isGroupAdaptive) {\n          resData = this.parent.resourceBase.lastResourceLevel[row];\n        }\n\n        var monthDate = new Date(this.parent.selectedDate.getFullYear(), months[row], 1);\n        var date = this.parent.calendarUtil.getMonthStartDate(new Date(monthDate.getTime()));\n\n        if (this.parent.activeViewOptions.orientation === 'Horizontal') {\n          var monthTr = tr.cloneNode();\n          monthBody.appendChild(monthTr);\n          var monthTd = createElement('td', {\n            className: MONTH_HEADER_CLASS,\n            attrs: {\n              'role': 'gridcell',\n              'data-date': date.getTime().toString()\n            }\n          });\n\n          if (this.parent.monthHeaderTemplate) {\n            append(this.renderDayMonthHeaderTemplate(monthDate, row, 'monthHeaderTemplate'), monthTd);\n          } else {\n            monthTd.innerHTML = \"<span>\".concat(this.getMonthName(monthDate), \"</span>\");\n          }\n\n          monthTr.appendChild(monthTd);\n        }\n\n        for (var month = 0; month < this.columnCount; month++) {\n          var classList$$1 = [];\n          var groupIndex = row;\n\n          if (this.parent.activeViewOptions.orientation === 'Vertical') {\n            classList$$1 = classList$$1.concat(resData.className);\n\n            if (classList$$1.indexOf(RESOURCE_PARENT_CLASS) > -1) {\n              classList$$1.push(RESOURCE_GROUP_CELLS_CLASS);\n            } else {\n              classList$$1.push(WORKDAY_CLASS);\n            }\n\n            monthDate = new Date(this.parent.selectedDate.getFullYear(), months[month], 1);\n            date = this.parent.calendarUtil.getMonthStartDate(new Date(monthDate.getTime()));\n          } else {\n            groupIndex = this.colLevels.slice(-1)[0][month].groupIndex;\n            classList$$1.push(WORKDAY_CLASS);\n          }\n\n          var td = createElement('td', {\n            className: WORK_CELLS_CLASS,\n            attrs: {\n              'role': 'gridcell',\n              'aria-selected': 'false',\n              'data-date': date.getTime().toString()\n            }\n          });\n          addClass([td], classList$$1);\n          td.setAttribute('data-group-index', groupIndex.toString());\n          this.renderCellTemplate({\n            date: date,\n            type: 'resourceGroupCells',\n            groupIndex: groupIndex\n          }, td);\n          this.wireEvents(td, 'cell');\n          tr.appendChild(td);\n          this.parent.trigger(renderCell, {\n            elementType: 'resourceGroupCells',\n            element: td,\n            date: date\n          });\n        }\n      }\n\n      if (this.parent.activeViewOptions.orientation === 'Vertical') {\n        this.collapseRows(this.parent.element.querySelector('.' + CONTENT_WRAP_CLASS));\n      }\n    }\n  }, {\n    key: \"renderDayMonthHeaderTemplate\",\n    value: function renderDayMonthHeaderTemplate(date, column, type) {\n      var args = {\n        date: date,\n        type: type === 'dayHeaderTemplate' ? 'dayHeader' : 'monthHeader'\n      };\n      var dayId = \"schedule_\".concat(this.parent.activeViewOptions.dayHeaderTemplateName, \"dayHeaderTemplate\");\n      var monthId = \"schedule_\".concat(this.parent.activeViewOptions.dayHeaderTemplateName, \"monthHeaderTemplate\");\n\n      if (type === 'dayHeaderTemplate') {\n        args.day = this.parent.getDayNames('wide')[column % 7];\n        return [].slice.call(this.parent.getDayHeaderTemplate()(args, this.parent, 'dayHeaderTemplate', dayId, false));\n      } else {\n        return [].slice.call(this.parent.getMonthHeaderTemplate()(args, this.parent, 'monthHeaderTemplate', monthId, false));\n      }\n    }\n  }, {\n    key: \"renderCellTemplate\",\n    value: function renderCellTemplate(data, td) {\n      if (!this.parent.activeViewOptions.cellTemplate || td.classList.contains(OTHERMONTH_CLASS)) {\n        return;\n      }\n\n      var args = {\n        date: data.date,\n        type: data.type\n      };\n\n      if (data.groupIndex) {\n        args.groupIndex = data.groupIndex;\n      }\n\n      var scheduleId = this.parent.element.id + '_';\n      var viewName = this.parent.activeViewOptions.cellTemplateName;\n      var templateId = scheduleId + viewName + 'cellTemplate';\n      var cellTemplate = [].slice.call(this.parent.getCellTemplate()(args, this.parent, 'cellTemplate', templateId, false));\n      append(cellTemplate, td);\n    }\n  }, {\n    key: \"scrollToDate\",\n    value: function scrollToDate(scrollDate) {\n      if (this.parent.activeViewOptions.group.resources.length === 0) {\n        var date = +new Date(resetTime(scrollDate));\n        var element = this.element.querySelector('[data-date=\"' + date + '\"]');\n\n        if (element) {\n          this.getScrollableElement().scrollLeft = element.offsetLeft;\n          this.getScrollableElement().scrollTop = element.offsetTop;\n        }\n      }\n    }\n  }, {\n    key: \"getScrollableElement\",\n    value: function getScrollableElement() {\n      if (this.parent.isAdaptive && !this.isTimelineView()) {\n        return this.element.querySelector('.' + SCROLL_CONTAINER_CLASS);\n      } else {\n        return this.getContentAreaElement();\n      }\n    }\n  }]);\n\n  return TimelineYear;\n}(Year);\n/* eslint-disable @typescript-eslint/no-explicit-any */\n\n/**\n * ICalendar Export Module\n */\n\n\nvar ICalendarExport = /*#__PURE__*/function () {\n  function ICalendarExport(parent) {\n    _classCallCheck(this, ICalendarExport);\n\n    this.parent = parent;\n  }\n\n  _createClass(ICalendarExport, [{\n    key: \"initializeCalendarExport\",\n    value: function initializeCalendarExport(fileName, customData) {\n      var _this110 = this;\n\n      var eventsData = customData ? customData : extend([], this.parent.eventsData, null, true);\n      eventsData = this.parent.eventBase.sortByTime(eventsData);\n      var SEPARATOR = navigator.appVersion.indexOf('Win') !== -1 ? '\\r\\n' : '\\n';\n      var iCalendarEvents = [];\n      var filterCollection = [];\n      var timeZone = this.parent.timezone || this.parent.tzModule.getLocalTimezoneName();\n      var fields = this.parent.eventFields;\n      eventsData.forEach(function (eventObj) {\n        var uId = _this110.parent.eventBase.generateGuid();\n\n        var editedExDate = [];\n\n        if (eventObj[fields.recurrenceID]) {\n          var filter = _this110.filterEvents(filterCollection, fields.id, eventObj[fields.recurrenceID]);\n\n          uId = filter[0].UID;\n        }\n\n        if (!eventObj[fields.recurrenceID] && eventObj[fields.recurrenceRule] && eventObj[fields.recurrenceException]) {\n          var exDate = eventObj[fields.recurrenceException].split(',');\n\n          var editedObj = _this110.filterEvents(eventsData, fields.recurrenceID, eventObj[fields.id]);\n\n          editedObj.forEach(function (edited) {\n            editedExDate.push(getRecurrenceStringFromDate(edited[fields.startTime]));\n          });\n          var exceptionDateList = exDate.filter(function (value) {\n            return editedExDate.indexOf(value) === -1;\n          });\n          eventObj[fields.recurrenceException] = exceptionDateList.length > 0 ? exceptionDateList.join(',') + ',' : '';\n        }\n\n        var startZone = eventObj[fields.startTimezone] || timeZone;\n        var endZone = eventObj[fields.endTimezone] || timeZone;\n        var readonly = eventObj[fields.isReadonly] ? eventObj[fields.isReadonly] : false;\n        var calendarEvent = ['BEGIN:VEVENT', 'LOCATION:' + (eventObj[fields.location] || ''), 'SUMMARY:' + (eventObj[fields.subject] || ''), 'UID:' + uId, 'DESCRIPTION:' + (eventObj[fields.description] || ''), 'ISREADONLY:' + readonly, 'END:VEVENT'];\n\n        if (eventObj[fields.isAllDay]) {\n          calendarEvent.splice(4, 0, 'DTEND;VALUE=DATE:' + _this110.convertDateToString(eventObj[fields.endTime], true));\n          calendarEvent.splice(4, 0, 'DTSTART;VALUE=DATE:' + _this110.convertDateToString(eventObj[fields.startTime], true));\n        } else if (!eventObj[fields.isAllDay] && !eventObj[fields.recurrenceRule]) {\n          calendarEvent.splice(4, 0, 'DTEND:' + _this110.convertDateToString(eventObj[fields.endTime]));\n          calendarEvent.splice(4, 0, 'DTSTART:' + _this110.convertDateToString(eventObj[fields.startTime]));\n        } else {\n          calendarEvent.splice(4, 0, 'DTEND;TZID=\"' + endZone + '\":' + _this110.convertDateToString(eventObj[fields.endTime]));\n          calendarEvent.splice(4, 0, 'DTSTART;TZID=\"' + startZone + '\":' + _this110.convertDateToString(eventObj[fields.startTime]));\n        }\n\n        if (eventObj[fields.recurrenceRule]) {\n          calendarEvent.splice(4, 0, 'RRULE:' + eventObj[fields.recurrenceRule]);\n        }\n\n        if (eventObj[fields.recurrenceException]) {\n          var _exDate = eventObj[fields.recurrenceException].split(',');\n\n          for (var i = 0; i < _exDate.length - 1; i++) {\n            calendarEvent.splice(5, 0, 'EXDATE:' + _this110.convertDateToString(getDateFromRecurrenceDateString(_exDate[i]), eventObj[fields.isAllDay]));\n          }\n        }\n\n        if (eventObj[fields.recurrenceID]) {\n          calendarEvent.splice(4, 0, 'RECURRENCE-ID;TZID=\"' + startZone + '\":' + _this110.convertDateToString(eventObj[fields.startTime], eventObj[fields.isAllDay]));\n        }\n\n        var customFields = _this110.customFieldFilter(eventObj, fields);\n\n        if (customFields.length > 0) {\n          customFields.forEach(function (customField) {\n            return calendarEvent.splice(4, 0, customField + ':' + (eventObj[customField] || ''));\n          });\n        }\n\n        var app = extend({}, eventObj);\n        app.UID = uId;\n        filterCollection.push(app);\n        iCalendarEvents.push(calendarEvent.join(SEPARATOR));\n      });\n      var iCalendar = ['BEGIN:VCALENDAR', 'PRODID:-//Syncfusion Inc//Scheduler//EN', 'VERSION:2.0', 'CALSCALE:GREGORIAN', 'METHOD:PUBLISH', 'X-WR-CALNAME:' + (fileName || 'Calendar'), 'X-WR-TIMEZONE:' + timeZone].join(SEPARATOR);\n      var icsString = iCalendar + SEPARATOR + iCalendarEvents.join(SEPARATOR) + SEPARATOR + 'END:VCALENDAR';\n      this.download(icsString, fileName);\n    }\n  }, {\n    key: \"customFieldFilter\",\n    value: function customFieldFilter(eventObj, fields) {\n      var defaultFields = Object.keys(fields).map(function (key) {\n        return fields[key];\n      });\n      var eventFields = Object.keys(eventObj);\n      return eventFields.filter(function (value) {\n        return defaultFields.indexOf(value) === -1 && value !== 'Guid';\n      });\n    }\n  }, {\n    key: \"convertDateToString\",\n    value: function convertDateToString(eventDate, allDay) {\n      var year = ('0000' + eventDate.getFullYear().toString()).slice(-4);\n      var month = ('00' + (eventDate.getMonth() + 1).toString()).slice(-2);\n      var date = ('00' + eventDate.getDate().toString()).slice(-2);\n      var hours = ('00' + eventDate.getHours().toString()).slice(-2);\n      var minutes = ('00' + eventDate.getMinutes().toString()).slice(-2);\n      var seconds = ('00' + eventDate.getSeconds().toString()).slice(-2);\n      var timeString = allDay ? year + month + date : year + month + date + 'T' + hours + minutes + seconds;\n      return timeString;\n    }\n  }, {\n    key: \"download\",\n    value: function download(icsString, fileName) {\n      var buffer = new Blob([icsString], {\n        type: 'data:text/calendar;charset=utf8'\n      });\n      fileName = (fileName || 'Calendar') + '.ics';\n\n      if (navigator.msSaveBlob) {\n        navigator.msSaveBlob(buffer, fileName);\n      } else {\n        var downloadLink = document.createElementNS('http://www.w3.org/1999/xhtml', 'a');\n        downloadLink.download = fileName;\n        downloadLink.href = URL.createObjectURL(buffer);\n        var event = document.createEvent('MouseEvent');\n        event.initEvent('click', true, true);\n        downloadLink.dispatchEvent(event);\n        setTimeout(function () {\n          URL.revokeObjectURL(downloadLink.href);\n          downloadLink.href = undefined;\n        });\n      }\n    }\n  }, {\n    key: \"filterEvents\",\n    value: function filterEvents(data, field, value) {\n      return data.filter(function (e) {\n        return e[field] === value;\n      });\n    }\n  }, {\n    key: \"getModuleName\",\n    value: function getModuleName() {\n      return 'iCalendarExport';\n    }\n  }, {\n    key: \"destroy\",\n    value: function destroy() {\n      if (!this.parent || this.parent && this.parent.isDestroyed) {\n        return;\n      }\n\n      this.parent = null;\n    }\n  }]);\n\n  return ICalendarExport;\n}();\n/* eslint-disable @typescript-eslint/no-explicit-any */\n\n/**\n * ICalendar Import Module\n */\n\n\nvar ICalendarImport = /*#__PURE__*/function () {\n  function ICalendarImport(parent) {\n    _classCallCheck(this, ICalendarImport);\n\n    this.allDay = false;\n    this.parent = parent;\n  }\n\n  _createClass(ICalendarImport, [{\n    key: \"initializeCalendarImport\",\n    value: function initializeCalendarImport(fileContent) {\n      var _this111 = this;\n\n      if (fileContent && fileContent instanceof Blob) {\n        var fileReader = new FileReader();\n\n        fileReader.onload = function () {\n          var iCalString = fileReader.result;\n\n          _this111.iCalendarParser(iCalString);\n        };\n\n        fileReader.readAsText(fileContent, 'UTF-8');\n      } else if (fileContent && typeof fileContent === 'string') {\n        this.iCalendarParser(fileContent);\n      }\n    }\n  }, {\n    key: \"iCalendarParser\",\n    value: function iCalendarParser(iCalString) {\n      var _this112 = this;\n\n      var fields = this.parent.eventFields;\n      var events = [];\n      var uId = 'UID';\n      var calArray = iCalString.replace(new RegExp('\\\\r', 'g'), '').split('\\n');\n      var isEvent = false;\n      var curEvent; // eslint-disable-next-line prefer-const\n\n      var id = this.parent.eventBase.getEventMaxID();\n      var count = 0;\n      calArray.forEach(function (element) {\n        var index;\n        var type;\n        var value;\n\n        if (!isEvent && element === 'BEGIN:VEVENT') {\n          isEvent = true;\n          curEvent = {};\n        }\n\n        if (isEvent && element === 'END:VEVENT') {\n          isEvent = false;\n          events.push(curEvent);\n          curEvent = null;\n        }\n\n        if (isEvent) {\n          index = element.indexOf(':');\n          type = element.substr(0, index).replace(/^\\s\\s*/, '').replace(/\\s\\s*$/, '');\n          value = element.substr(index + 1, element.length - (index + 1)).replace(/^\\s\\s*/, '').replace(/\\s\\s*$/, '');\n\n          if (element.indexOf('SUMMARY') !== -1) {\n            type = 'SUMMARY';\n          }\n\n          if (element.indexOf('DTSTART') !== -1) {\n            curEvent[fields.startTime] = _this112.dateParsing(element);\n            curEvent[fields.isAllDay] = _this112.allDay;\n            _this112.allDay = false;\n          } else if (element.indexOf('DTEND') !== -1) {\n            curEvent[fields.endTime] = _this112.dateParsing(element);\n          } else if (element.indexOf('EXDATE') !== -1) {\n            value = getRecurrenceStringFromDate(_this112.dateParsing(element));\n            curEvent[fields.recurrenceException] = isNullOrUndefined(curEvent[fields.recurrenceException]) ? value : curEvent[fields.recurrenceException] + ',' + value;\n          } else if (element.indexOf('RECURRENCE-ID') !== -1) {\n            value = getRecurrenceStringFromDate(_this112.dateParsing(element));\n            curEvent[fields.recurrenceException] = value;\n            curEvent[fields.recurrenceID] = value;\n          } else {\n            switch (type) {\n              case 'BEGIN':\n                break;\n\n              case 'UID':\n                curEvent[uId] = value;\n                curEvent[fields.id] = typeof id === 'string' ? id + count.toString() : id + count;\n                count++;\n                break;\n\n              case 'SUMMARY':\n                curEvent[fields.subject] = value;\n                break;\n\n              case 'LOCATION':\n                curEvent[fields.location] = value;\n                break;\n\n              case 'DESCRIPTION':\n                curEvent[fields.description] = value;\n                break;\n\n              case 'ISREADONLY':\n                curEvent[fields.isReadonly] = value.indexOf('true') > -1;\n                break;\n\n              case 'RRULE':\n                curEvent[fields.recurrenceRule] = value;\n                break;\n\n              default:\n                if (_this112.parent.resourceCollection.length > 0) {\n                  var resData = _this112.parent.resourceCollection.filter(function (data) {\n                    return data.field === type;\n                  });\n\n                  curEvent[type] = resData.length > 0 && typeof resData[0].dataSource[0][resData[0].idField] == 'number' ? parseInt(value, 10) : value;\n                } else {\n                  curEvent[type] = value;\n                }\n\n            }\n          }\n        }\n      });\n      var app = extend([], events, null, true);\n      this.parent.addEvent(this.processOccurrence(app));\n    }\n  }, {\n    key: \"processOccurrence\",\n    value: function processOccurrence(app) {\n      var appoint = [];\n      var uId = 'UID';\n      var fields = this.parent.eventFields;\n      app.forEach(function (eventObj) {\n        var parentObj;\n        var id; // eslint-disable-next-line no-prototype-builtins\n\n        if (!eventObj.hasOwnProperty(fields.recurrenceID)) {\n          parentObj = eventObj;\n          id = eventObj[fields.id];\n        }\n\n        var data = app.filter(function (data) {\n          return data.UID === eventObj[uId];\n        });\n\n        if (data.length > 1 && isNullOrUndefined(eventObj[fields.recurrenceID])) {\n          for (var i = 0; i < data.length; i++) {\n            // eslint-disable-next-line no-prototype-builtins\n            if (data[i].hasOwnProperty(fields.recurrenceID)) {\n              var exdate = data[i][fields.recurrenceID];\n              data[i][fields.recurrenceID] = id;\n              data[i][fields.recurrenceException] = null;\n              parentObj[fields.recurrenceException] = isNullOrUndefined(parentObj[fields.recurrenceException]) ? exdate : parentObj[fields.recurrenceException] + ',' + exdate;\n              appoint.push(data[i]);\n            }\n          }\n\n          appoint.push(parentObj); // eslint-disable-next-line no-prototype-builtins\n        } else if (!eventObj.hasOwnProperty(fields.recurrenceID)) {\n          appoint.push(eventObj);\n        }\n      });\n      return appoint;\n    }\n  }, {\n    key: \"getDateString\",\n    value: function getDateString(value) {\n      value = value || ''; // eslint-disable-next-line no-useless-escape\n\n      return value.replace(/\\\\\\,/g, ',').replace(/\\\\\\;/g, ';').replace(/\\\\[nN]/g, '\\n').replace(/\\\\\\\\/g, '\\\\');\n    }\n  }, {\n    key: \"dateParsing\",\n    value: function dateParsing(element) {\n      var expression = /([^':;]+)((?:;(?:[^':;]+)(?:=(?:(?:'[^']*')|(?:[^':;]+))))*):(.*)/;\n      var split = element.match(expression).slice(1);\n      var value = split[split.length - 1];\n      var newDate = new Date(this.getDateString(value));\n\n      if (element && (element.indexOf('VALUE=DATE') > -1 || element.indexOf('RECURRENCE-ID;TZID') > -1)) {\n        var _data3 = /^(\\d{4})(\\d{2})(\\d{2})$/.exec(value);\n\n        if (_data3 !== null) {\n          newDate = new Date(parseInt(_data3[1], 10), parseInt(_data3[2], 10) - 1, parseInt(_data3[3], 10));\n        }\n\n        if (element.indexOf('DTSTART') > -1) {\n          this.allDay = true;\n        }\n      }\n\n      var data = /^(\\d{4})(\\d{2})(\\d{2})T(\\d{2})(\\d{2})(\\d{2})(Z)?$/.exec(value);\n\n      if (data !== null) {\n        if (data[7] === 'Z') {\n          newDate = new Date(Date.UTC(parseInt(data[1], 10), parseInt(data[2], 10) - 1, parseInt(data[3], 10), parseInt(data[4], 10), parseInt(data[5], 10), parseInt(data[6], 10)));\n        } else {\n          newDate = new Date(parseInt(data[1], 10), parseInt(data[2], 10) - 1, parseInt(data[3], 10), parseInt(data[4], 10), parseInt(data[5], 10), parseInt(data[6], 10));\n        }\n      }\n\n      return newDate;\n    }\n  }, {\n    key: \"getModuleName\",\n    value: function getModuleName() {\n      return 'iCalendarImport';\n    }\n  }, {\n    key: \"destroy\",\n    value: function destroy() {\n      if (!this.parent || this.parent && this.parent.isDestroyed) {\n        return;\n      }\n    }\n  }]);\n\n  return ICalendarImport;\n}();\n/* eslint-disable @typescript-eslint/no-explicit-any */\n\n/**\n * Excel Export Module\n */\n\n\nvar ExcelExport = /*#__PURE__*/function () {\n  function ExcelExport(parent) {\n    _classCallCheck(this, ExcelExport);\n\n    this.parent = parent;\n  }\n\n  _createClass(ExcelExport, [{\n    key: \"initializeExcelExport\",\n    value: function initializeExcelExport(excelExportOptions) {\n      var _this113 = this;\n\n      var exportFields = excelExportOptions.fields || Object.keys(this.parent.eventFields).map(function (field) {\n        return _this113.parent.eventFields[field];\n      });\n      var exportName = excelExportOptions.fileName || 'Schedule';\n      var exportType = excelExportOptions.exportType || 'xlsx';\n      var isIncludeOccurrences = excelExportOptions.includeOccurrences || false;\n      var eventCollection;\n\n      if (excelExportOptions.customData) {\n        eventCollection = !isIncludeOccurrences ? excelExportOptions.customData : this.parent.eventBase.getProcessedEvents(excelExportOptions.customData);\n      } else {\n        eventCollection = !isIncludeOccurrences ? this.parent.eventsData : this.parent.eventsProcessed;\n      }\n\n      this.processWorkbook(exportFields, exportName, exportType, eventCollection);\n    }\n  }, {\n    key: \"processWorkbook\",\n    value: function processWorkbook(fields, name, type, eventCollection) {\n      var _this114 = this;\n\n      var columns = [];\n      var rows = [];\n      var columnHeader = [];\n      fields.forEach(function (field, i) {\n        return columns.push({\n          index: i + 1,\n          width: field === 'Id' ? 20 : 150\n        });\n      });\n      var style = {\n        fontSize: 12,\n        borders: {\n          color: '#E0E0E0'\n        },\n        bold: true\n      };\n      fields.forEach(function (field, i) {\n        return columnHeader.push({\n          index: i + 1,\n          value: field,\n          style: style\n        });\n      });\n      rows.push({\n        index: 1,\n        cells: columnHeader\n      });\n      var i = 2;\n\n      var _iterator154 = _createForOfIteratorHelper(eventCollection),\n          _step154;\n\n      try {\n        var _loop17 = function _loop17() {\n          var event = _step154.value;\n          var columnData = [];\n          fields.forEach(function (field, n) {\n            var columnRule = {\n              index: n + 1,\n              value: event[field] || ''\n            };\n\n            if (field === _this114.parent.eventFields.startTime || field === _this114.parent.eventFields.endTime) {\n              var styleRule = {\n                fontSize: 12,\n                numberFormat: 'm/d/yyyy h:mm AM/PM'\n              };\n              columnRule = extend({}, columnRule, {\n                style: styleRule\n              }, true);\n            }\n\n            columnData.push(columnRule);\n          });\n          rows.push({\n            index: i,\n            cells: columnData\n          });\n          i++;\n        };\n\n        for (_iterator154.s(); !(_step154 = _iterator154.n()).done;) {\n          _loop17();\n        }\n      } catch (err) {\n        _iterator154.e(err);\n      } finally {\n        _iterator154.f();\n      }\n\n      var workSheet = [{\n        columns: columns,\n        rows: rows\n      }];\n      var book = new Workbook({\n        worksheets: workSheet\n      }, type, this.parent.locale);\n      book.save(name + '.' + type);\n    }\n  }, {\n    key: \"getModuleName\",\n    value: function getModuleName() {\n      return 'excelExport';\n    }\n  }, {\n    key: \"destroy\",\n    value: function destroy() {\n      this.parent = null;\n    }\n  }]);\n\n  return ExcelExport;\n}();\n/* eslint-disable @typescript-eslint/no-explicit-any */\n\n/**\n * Print Module\n */\n\n\nvar Print = /*#__PURE__*/function () {\n  function Print(parent) {\n    _classCallCheck(this, Print);\n\n    this.parent = parent;\n  }\n\n  _createClass(Print, [{\n    key: \"print\",\n    value: function print(printOptions) {\n      if (isNullOrUndefined(printOptions)) {\n        this.printScheduler();\n      } else {\n        this.printSchedulerWithModel(printOptions);\n      }\n    }\n  }, {\n    key: \"printScheduler\",\n    value: function printScheduler() {\n      var clone = this.parent.element.cloneNode(true);\n      clone.id = this.parent.element.id + '_print';\n      document.body.appendChild(clone);\n      var className = this.parent.currentView === 'MonthAgenda' ? '.e-appointment-wrap' : '.e-content-wrap';\n      var scrollableEle = this.parent.element.querySelector(className);\n      var links = [].slice.call(document.getElementsByTagName('head')[0].querySelectorAll('link, style'));\n      var reference = '';\n\n      var _iterator155 = _createForOfIteratorHelper(links),\n          _step155;\n\n      try {\n        for (_iterator155.s(); !(_step155 = _iterator155.n()).done;) {\n          var link = _step155.value;\n          reference += link.outerHTML;\n        }\n      } catch (err) {\n        _iterator155.e(err);\n      } finally {\n        _iterator155.f();\n      }\n\n      var div = createElement('div');\n      clone.style.width = this.parent.element.offsetWidth + 'px';\n      var elementWidth = Math.round(parseInt(clone.style.width, 10) / 100) * 100;\n      div.appendChild(clone);\n      var printWindow = window.open('', 'print', 'height=550,width=' + elementWidth + ',tabbar=no');\n      printWindow.document.write('<!DOCTYPE html><html><head>' + reference + '</head><body>' + div.innerHTML + '<script>(function() { window.ready = true; })();</script></body></html>');\n      printWindow.document.close();\n      printWindow.focus();\n      setTimeout(function () {\n        if (printWindow.ready && scrollableEle) {\n          // eslint-disable-next-line no-self-assign\n          scrollableEle.scrollLeft = scrollableEle.scrollLeft; // eslint-disable-next-line no-self-assign\n\n          scrollableEle.scrollTop = scrollableEle.scrollTop;\n          var headerTimeCellsScroll = printWindow.document.querySelector('.e-date-header-wrap');\n\n          if (headerTimeCellsScroll) {\n            headerTimeCellsScroll.scrollLeft = scrollableEle.scrollLeft;\n          }\n\n          var timeCellsScroll = printWindow.document.querySelector('.e-time-cells-wrap');\n\n          if (timeCellsScroll) {\n            timeCellsScroll.scrollTop = scrollableEle.scrollTop;\n          }\n\n          printWindow.print();\n          printWindow.close();\n        }\n      }, 500);\n    }\n  }, {\n    key: \"printSchedulerWithModel\",\n    value: function printSchedulerWithModel(printOptions) {\n      var element = createElement('div', {\n        id: this.parent.element.id + '_print',\n        className: 'e-print-schedule'\n      });\n      document.body.appendChild(element);\n      Schedule.Inject(Day, Week, WorkWeek, Month, Agenda, MonthAgenda, TimelineViews, TimelineMonth, Year, TimelineYear);\n      this.printInstance = new Schedule(this.getPrintScheduleModel(printOptions));\n      this.printInstance.isPrinting = true;\n      this.printInstance.appendTo(element);\n      this.printInstance.on(print$1, this.contentReady, this);\n      this.printWindow = window.open('', 'print', 'height=' + window.outerHeight + ',width=' + window.outerWidth + ',tabbar=no');\n      this.printWindow.moveTo(0, 0);\n      this.printWindow.resizeTo(screen.availWidth, screen.availHeight);\n    }\n  }, {\n    key: \"getPrintScheduleModel\",\n    value: function getPrintScheduleModel(printOptions) {\n      var printModel = {};\n      var scheduleProps = ['agendaDaysCount', 'calendarMode', 'cssClass', 'currentView', 'dateFormat', 'enableRtl', 'endHour', 'eventSettings', 'firstDayOfWeek', 'firstMonthOfYear', 'group', 'height', 'locale', 'maxDate', 'minDate', 'readonly', 'resources', 'rowAutoHeight', 'selectedDate', 'showHeaderBar', 'showTimeIndicator', 'showWeekNumber', 'showWeekend', 'startHour', 'timeFormat', 'timeScale', 'timezone', 'views', 'width', 'workDays', 'workHours'];\n      var eventSettings;\n      var group;\n\n      for (var _i21 = 0, _scheduleProps = scheduleProps; _i21 < _scheduleProps.length; _i21++) {\n        var key = _scheduleProps[_i21];\n\n        switch (key) {\n          case 'eventSettings':\n            eventSettings = Object.assign({}, this.parent.eventSettings.properties);\n            eventSettings.dataSource = this.parent.eventsData;\n            eventSettings.template = null;\n            printModel.eventSettings = eventSettings;\n            break;\n\n          case 'group':\n            group = isNullOrUndefined(printOptions.group) ? this.parent.group : printOptions.group;\n            group.headerTooltipTemplate = null;\n            printModel.group = group;\n            break;\n\n          default:\n            printModel[key] = isNullOrUndefined(printOptions[key]) ? this.parent[key] : printOptions[key];\n            break;\n        }\n      }\n\n      return printModel;\n    }\n  }, {\n    key: \"contentReady\",\n    value: function contentReady() {\n      var _this115 = this;\n\n      this.printWindow = print(this.printInstance.element, this.printWindow);\n\n      this.printWindow.onbeforeunload = function () {\n        _this115.printInstance.off(print$1, _this115.contentReady);\n\n        _this115.printInstance.element.remove();\n\n        _this115.printInstance.destroy();\n\n        _this115.printInstance = null;\n        _this115.printWindow = null;\n      };\n    }\n  }, {\n    key: \"getModuleName\",\n    value: function getModuleName() {\n      return 'print';\n    }\n  }, {\n    key: \"destroy\",\n    value: function destroy() {\n      this.parent = null;\n    }\n  }]);\n\n  return Print;\n}();\n/**\n * Exporting modules\n */\n\n/**\n * Schedule component exported items\n */\n\n/**\n * Recurrence-Editor component exported items\n */\n\n/**\n * Calendar util exported items\n */\n\n/**\n * Export Schedule components\n */\n\n\nexport { Schedule, _cellClick as cellClick, cellDoubleClick, moreEventsClick, select, hover, actionBegin, actionComplete, actionFailure, navigating, renderCell, _eventClick as eventClick, eventRendered, dataBinding, dataBound, popupOpen, popupClose, _dragStart as dragStart, _drag as drag, _dragStop as dragStop, _resizeStart as resizeStart, _resizing as resizing, _resizeStop as resizeStop, inlineClick, initialLoad, initialEnd, print$1 as print, dataReady, eventsLoaded, contentReady, scroll, virtualScroll, scrollUiUpdate, uiUpdate, documentClick, _cellMouseDown as cellMouseDown, WEEK_LENGTH, MS_PER_DAY, MS_PER_MINUTE, getElementHeightFromClass, getTranslateY, getWeekFirstDate, getWeekLastDate, firstDateOfMonth, lastDateOfMonth, getWeekNumber, getWeekMiddleDate, setTime, resetTime, getDateInMs, getDateCount, addDays, addMonths, addYears, getStartEndHours, getMaxDays, getDaysCount, getDateFromString, getScrollBarWidth, findIndexInData, getOuterHeight, removeChildren, isDaylightSavingTime, getUniversalTime, isMobile, isIPadDevice, capitalizeFirstWord, Resize, DragAndDrop, HeaderRenderer, ViewBase, Day, Week, WorkWeek, Month, Year, Agenda, MonthAgenda, TimelineViews, TimelineMonth, TimelineYear, Timezone, timezoneData, ICalendarExport, ICalendarImport, ExcelExport, Print, RecurrenceEditor, generateSummary, generate, getDateFromRecurrenceDateString, extractObjectFromRule, getCalendarUtil, getRecurrenceStringFromDate, Gregorian, Islamic };","map":{"version":3,"sources":["D:/angularStarter/11-24/syncfusion-mytemplate/template-v1/node_modules/@syncfusion/ej2-schedule/dist/es6/ej2-schedule.es2015.js"],"names":["Animation","Browser","ChildProperty","Collection","Complex","Component","Draggable","Event","EventHandler","HijriParser","Internationalization","KeyboardEvents","L10n","NotifyPropertyChanges","Property","SanitizeHtmlHelper","Touch","addClass","append","classList","cldrData","closest","compile","createElement","extend","formatUnit","getDefaultDateObject","getElement","getValue","isNullOrUndefined","prepend","print","remove","removeClass","setStyleAttribute","Dialog","Popup","Tooltip","createSpinner","hideSpinner","isCollide","showSpinner","Toolbar","TreeView","Calendar","DatePicker","DateTimePicker","DataManager","Deferred","Predicate","Query","Button","CheckBox","RadioButton","FormValidator","Input","NumericTextBox","DropDownList","MultiSelect","ListBase","Workbook","cellClick","cellDoubleClick","moreEventsClick","select","hover","actionBegin","actionComplete","actionFailure","navigating","renderCell","eventClick","eventRendered","dataBinding","dataBound","popupOpen","popupClose","dragStart","drag","dragStop","resizeStart","resizing","resizeStop","inlineClick","initialLoad","initialEnd","print$1","dataReady","eventsLoaded","contentReady","scroll","virtualScroll","scrollUiUpdate","uiUpdate","documentClick","cellMouseDown","WEEK_LENGTH","MS_PER_DAY","MS_PER_MINUTE","getElementHeightFromClass","container","elementClass","height","el","className","cloneNode","style","visibility","position","appendChild","getBoundingClientRect","getTranslateY","element","getComputedStyle","window","WebKitCSSMatrix","webkitTransform","m42","getWeekFirstDate","date","firstDayOfWeek","date1","Date","getTime","getDay","setDate","getDate","getWeekLastDate","weekFirst","weekLast","getFullYear","getMonth","firstDateOfMonth","lastDateOfMonth","getWeekNumber","valueOf","currentDate","dayOfYear","Math","ceil","getWeekMiddleDate","setTime","time","tzOffsetBefore","getTimezoneOffset","d","tzOffsetDiff","resetTime","getDateInMs","localOffset","dateOffset","timezoneOffset","getDateCount","startDate","endDate","addDays","noOfDays","addMonths","noOfMonths","day","setMonth","min","getMaxDays","addYears","noOfYears","setFullYear","getStartEndHours","startHour","endHour","setHours","getHours","setMinutes","getMinutes","setSeconds","getSeconds","date2","getDaysCount","strTime","endTime","round","getDateFromString","indexOf","parseInt","match","toString","replace","scrollWidth","getScrollBarWidth","divNode","value","cssText","document","body","ratio","devicePixelRatio","toFixed","floor","offsetWidth","clientWidth","removeChild","findIndexInData","data","field","event","resourceCollection","i","length","slice","res","Array","resData","join","includes","groupIDField","getOuterHeight","offsetHeight","marginTop","marginBottom","removeChildren","elementChildren","call","children","elementChild","contains","isDaylightSavingTime","jan","jul","max","getUniversalTime","year","month","hours","minutes","seconds","milliseconds","getMilliseconds","UTC","isMobile","navigator","userAgent","toLowerCase","isIPadDevice","capitalizeFirstWord","inputString","type","split","map","e","charAt","toLocaleUpperCase","substring","array","index","ROOT","RTL","DEVICE_CLASS","MULTI_DRAG","ICON","ENABLE_CLASS","DISABLE_CLASS","TABLE_CONTAINER_CLASS","SCHEDULE_TABLE_CLASS","ALLDAY_CELLS_CLASS","HEADER_POPUP_CLASS","HEADER_CALENDAR_CLASS","ALLDAY_ROW_CLASS","CONTENT_TABLE_CLASS","WORK_CELLS_CLASS","WORK_HOURS_CLASS","POPUP_OPEN","DATE_HEADER_WRAP_CLASS","DATE_HEADER_CONTAINER_CLASS","HEADER_CELLS_CLASS","WORKDAY_CLASS","OTHERMONTH_CLASS","CURRENT_DAY_CLASS","CURRENTDATE_CLASS","CURRENT_PANEL_CLASS","PREVIOUS_PANEL_CLASS","NEXT_PANEL_CLASS","PREVIOUS_DATE_CLASS","NEXT_DATE_CLASS","TRANSLATE_CLASS","LEFT_INDENT_CLASS","LEFT_INDENT_WRAP_CLASS","EVENT_TABLE_CLASS","RESOURCE_LEFT_TD_CLASS","RESOURCE_GROUP_CELLS_CLASS","RESOURCE_TEXT_CLASS","RESOURCE_COLUMN_WRAP_CLASS","RESOURCE_COLUMN_TABLE_CLASS","RESOURCE_CHILD_CLASS","RESOURCE_PARENT_CLASS","RESOURCE_EXPAND_CLASS","RESOURCE_COLLAPSE_CLASS","RESOURCE_TREE_ICON_CLASS","RESOURCE_CELLS_CLASS","TIME_CELLS_WRAP_CLASS","TIME_CELLS_CLASS","TIME_SLOT_CLASS","ALTERNATE_CELLS_CLASS","CURRENT_TIME_CLASS","CURRENT_TIMELINE_CLASS","PREVIOUS_TIMELINE_CLASS","HIDE_CHILDS_CLASS","SCROLL_CONTAINER_CLASS","TIMELINE_WRAPPER_CLASS","APPOINTMENT_WRAPPER_CLASS","DAY_WRAPPER_CLASS","TOOLBAR_CONTAINER","RESOURCE_TOOLBAR_CONTAINER","HEADER_TOOLBAR","RESOURCE_HEADER_TOOLBAR","SELECTED_CELL_CLASS","WEEK_NUMBER_WRAPPER_CLASS","WEEK_NUMBER_CLASS","APPOINTMENT_WRAP_CLASS","WRAPPER_CONTAINER_CLASS","APPOINTMENT_CONTAINER_CLASS","APPOINTMENT_CLASS","BLOCK_APPOINTMENT_CLASS","BLOCK_INDICATOR_CLASS","APPOINTMENT_BORDER","APPOINTMENT_DETAILS","SUBJECT_WRAP","RESOURCE_NAME","APPOINTMENT_TIME","TABLE_WRAP_CLASS","OUTER_TABLE_CLASS","CONTENT_WRAP_CLASS","VIRTUAL_TRACK_CLASS","AGENDA_CELLS_CLASS","AGENDA_CURRENT_DAY_CLASS","AGENDA_SELECTED_CELL","MONTH_HEADER_CLASS","AGENDA_HEADER_CLASS","AGENDA_RESOURCE_CLASS","AGENDA_DATE_CLASS","NAVIGATE_CLASS","DATE_HEADER_CLASS","AGENDA_DAY_BORDER_CLASS","DATE_BORDER_CLASS","AGENDA_DAY_PADDING_CLASS","DATE_TIME_CLASS","DATE_TIME_WRAPPER_CLASS","AGENDA_EMPTY_EVENT_CLASS","AGENDA_NO_EVENT_CLASS","APPOINTMENT_INDICATOR_CLASS","EVENT_INDICATOR_CLASS","EVENT_ICON_UP_CLASS","EVENT_ICON_DOWN_CLASS","EVENT_ICON_LEFT_CLASS","EVENT_ICON_RIGHT_CLASS","EVENT_ACTION_CLASS","NEW_EVENT_CLASS","CLONE_ELEMENT_CLASS","MONTH_CLONE_ELEMENT_CLASS","CLONE_TIME_INDICATOR_CLASS","DRAG_CLONE_CLASS","EVENT_RESIZE_CLASS","RESIZE_CLONE_CLASS","LEFT_RESIZE_HANDLER","RIGHT_RESIZE_HANDLER","TOP_RESIZE_HANDLER","BOTTOM_RESIZE_HANDLER","EVENT_RECURRENCE_ICON_CLASS","EVENT_RECURRENCE_EDIT_ICON_CLASS","HEADER_ROW_CLASS","ALLDAY_APPOINTMENT_WRAPPER_CLASS","ALLDAY_APPOINTMENT_CLASS","EVENT_COUNT_CLASS","ROW_COUNT_WRAPPER_CLASS","ALLDAY_APPOINTMENT_SECTION_CLASS","APPOINTMENT_ROW_EXPAND_CLASS","APPOINTMENT_ROW_COLLAPSE_CLASS","MORE_INDICATOR_CLASS","CELL_POPUP_CLASS","EVENT_POPUP_CLASS","MULTIPLE_EVENT_POPUP_CLASS","POPUP_HEADER_CLASS","POPUP_HEADER_ICON_WRAPPER","POPUP_CONTENT_CLASS","POPUP_FOOTER_CLASS","DATE_TIME_DETAILS_CLASS","RECURRENCE_SUMMARY_CLASS","QUICK_POPUP_EVENT_DETAILS_CLASS","EVENT_CREATE_CLASS","EDIT_EVENT_CLASS","DELETE_EVENT_CLASS","TEXT_ELLIPSIS","MORE_POPUP_WRAPPER_CLASS","MORE_EVENT_POPUP_CLASS","MORE_EVENT_HEADER_CLASS","MORE_EVENT_DATE_HEADER_CLASS","MORE_EVENT_HEADER_DAY_CLASS","MORE_EVENT_HEADER_DATE_CLASS","MORE_EVENT_CLOSE_CLASS","MORE_EVENT_CONTENT_CLASS","MORE_EVENT_WRAPPER_CLASS","QUICK_DIALOG_CLASS","QUICK_DIALOG_OCCURRENCE_CLASS","QUICK_DIALOG_SERIES_CLASS","QUICK_DIALOG_FOLLOWING_EVENTS_CLASS","FOLLOWING_EVENTS_DIALOG","QUICK_DIALOG_DELETE_CLASS","QUICK_DIALOG_CANCEL_CLASS","QUICK_DIALOG_ALERT_OK","QUICK_DIALOG_ALERT_CANCEL","QUICK_DIALOG_ALERT_FOLLOWING","QUICK_DIALOG_ALERT_BTN_CLASS","EVENT_WINDOW_DIALOG_CLASS","FORM_CONTAINER_CLASS","FORM_CLASS","EVENT_WINDOW_ALLDAY_TZ_DIV_CLASS","EVENT_WINDOW_ALL_DAY_CLASS","TIME_ZONE_CLASS","TIME_ZONE_ICON_CLASS","TIME_ZONE_DETAILS_CLASS","EVENT_WINDOW_REPEAT_DIV_CLASS","EVENT_WINDOW_REPEAT_CLASS","EVENT_WINDOW_TITLE_LOCATION_DIV_CLASS","SUBJECT_CLASS","LOCATION_CLASS","LOCATION_ICON_CLASS","LOCATION_DETAILS_CLASS","EVENT_WINDOW_START_END_DIV_CLASS","EVENT_WINDOW_START_CLASS","EVENT_WINDOW_END_CLASS","EVENT_WINDOW_RESOURCES_DIV_CLASS","DESCRIPTION_CLASS","DESCRIPTION_ICON_CLASS","DESCRIPTION_DETAILS_CLASS","EVENT_WINDOW_TIME_ZONE_DIV_CLASS","EVENT_WINDOW_START_TZ_CLASS","EVENT_WINDOW_END_TZ_CLASS","EVENT_WINDOW_BACK_ICON_CLASS","EVENT_WINDOW_SAVE_ICON_CLASS","EVENT_WINDOW_CANCEL_BUTTON_CLASS","EVENT_WINDOW_SAVE_BUTTON_CLASS","EVENT_WINDOW_DIALOG_PARENT_CLASS","EVENT_WINDOW_TITLE_TEXT_CLASS","EVENT_WINDOW_ICON_DISABLE_CLASS","EDIT_CLASS","EDIT_ICON_CLASS","DELETE_CLASS","DELETE_ICON_CLASS","CLOSE_CLASS","CLOSE_ICON_CLASS","ERROR_VALIDATION_CLASS","EVENT_TOOLTIP_ROOT_CLASS","ALLDAY_ROW_ANIMATE_CLASS","TIMESCALE_DISABLE","DISABLE_DATE","HIDDEN_CLASS","DISABLE_DATES","POPUP_WRAPPER_CLASS","POPUP_TABLE_CLASS","RESOURCE_MENU","RESOURCE_MENU_ICON","RESOURCE_LEVEL_TITLE","RESOURCE_TREE","RESOURCE_TREE_POPUP_OVERLAY","RESOURCE_TREE_POPUP","RESOURCE_CLASS","RESOURCE_ICON_CLASS","RESOURCE_DETAILS_CLASS","DATE_TIME_ICON_CLASS","VIRTUAL_SCROLL_CLASS","ICON_DISABLE_CLASS","AUTO_HEIGHT","IGNORE_WHITESPACE","EVENT_TEMPLATE","READ_ONLY","MONTH_HEADER_WRAPPER","INLINE_SUBJECT_CLASS","INLINE_APPOINTMENT_CLASS","SCROLL_HIDDEN","ALLDAY_APPOINTMENT_SCROLL","ALLDAY_APPOINTMENT_AUTO","HeaderRenderer","parent","l10n","localeObj","renderHeader","addEventListener","on","closeHeaderPopup","off","closestEle","target","closestPop","contentWrap","querySelector","isAdaptive","popupEle","popupObj","ej2_instances","hide","hideHeaderPopup","headerPopup","toolbarEle","insertBefore","firstElementChild","renderToolbar","items","getItems","trigger","requestType","args","toolbarObj","overflowMode","clicked","toolbarClickHandler","bind","enableRtl","locale","appendTo","prevNavEle","setAttribute","getConstant","nextNavEle","updateAddIcon","updateActiveView","dataBind","headerCalendar","minDate","maxDate","currentView","calendarView","getCalendarView","depth","start","refresh","selEle","querySelectorAll","viewIndex","text","innerHTML","refreshOverflow","addEle","eventSettings","allowAdding","dateString","globalize","formatDate","selectedDate","format","calendar","getCalendarMode","push","align","prefixIcon","tooltipText","overflow","cssClass","htmlAttributes","getDateRangeText","suffixIcon","enableAdaptiveUI","showAlwaysInPopup","views","item","getItemObject","viewName","displayName","option","view","orientationClass","isItemInsidePopup","orientation","headerPopupEle","headerCalendarEle","actionOnScroll","targetType","relateTo","getPopUpRelativeElement","X","Y","activeViewOptions","calendarMode","change","calendarChange","setCalendarTimezone","calendarDate","changeDate","timezone","tzModule","getLocalTimezoneName","originalEvent","strClass","isSameTime","renderHeaderPopup","show","changeView","undefined","calculateViewIndex","isSelectedDate","getCurrentTime","activeView","getNextPreviousDate","activeCellsData","startTime","interval","timeScale","slotCount","msInterval","currentTime","setMilliseconds","isAllDay","eventWindow","openEditor","cancel","toolbarPopUp","name","duration","classType","dateRangeEle","dates","getCurrentViewDates","firstDate","lastDate","lastMonthFirstDate","enableItems","setCalendarMinMaxDate","isDestroyed","destroy","removeEventListener","Scroll","width","setDimensions","onPropertyChanged","setWidth","setHeight","cssProperties","getCssProperties","module","getModuleName","notify","ScheduleTouch","touchObj","scrollHandler","swipe","swipeHandler","tapHold","tapHoldHandler","swipeSettings","swipeThresholdDistance","add","onTransitionEnd","touchLeftDirection","touchRightDirection","uiStateValues","action","timeStampStart","now","scrollDirection","scrollDiv","isScrollTriggered","preventDefault","stopPropagation","nextPanel","renderPanel","getPanel","x","distanceX","transform","getTranslateX","prevWidth","previousPanel","swipeDate","swipeDirection","renderDates","offsetDist","isDevice","swapPanels","transitionDuration","confirmSwipe","cancelSwipe","quickPopup","tapHoldEventPopup","clsName","nextPrevType","currentPanel","setProperties","headerModule","setCalendarDate","getRenderDates","renderLayout","direction","temp","previousDate","navArgs","setPanel","translateX","offsetLeft","updateDateRange","renderTemplates","crudModule","refreshDataManager","generateColumnLevels","m41","resetValues","KeyboardInteraction","selectedCells","keyConfigs","downArrow","upArrow","rightArrow","leftArrow","shiftDownArrow","shiftUpArrow","shiftRightArrow","shiftLeftArrow","ctrlLeftArrow","ctrlRightArrow","altOne","altTwo","altThree","altFour","altFive","altSix","altSeven","altEight","altNine","enter","escape","delete","home","pageUp","pageDown","tab","shiftTab","ctrlShiftUpArrow","ctrlShiftDownArrow","ctrlShiftLeftArrow","ctrlShiftRightArrow","tabIndex","keyboardModule","keyAction","keyActionHandler","eventName","processDown","shiftKey","processUp","processLeft","processRight","focus","processViewNavigation","processEnter","focusFirstCell","processTab","processDelete","processCtrlShiftNavigationArrows","processEscape","onCellMouseDown","initialTarget","getClosestCell","readonly","which","removeSelectedClass","getContentTable","onMouseSelection","onMoveUp","allDayRow","getAllDayRow","appointments","selectionEdges","boundaryValidation","pageY","pageX","bottom","top","left","right","yInBounds","scrollHeight","scrollTop","xInBounds","scrollLeft","selectCells","isPreventAction","queryStr","getSelectedElements","cellData","convertToEventData","showQuickPopup","selectArgs","isPopupShow","quickInfoOnSelectionEnd","cellArgs","click","resourceIcon","allowInline","inlineArgs","groupIndex","inlineModule","inlineCrudActions","getDateFromElement","getNavigateView","cellDetails","getCellDetails","end","isInverseTable","tableEle","cells","maxRow","rows","maxColumn","startIndex","endIndex","inverseCells","j","sCells","focusCell","eventBase","removeSelectedAppointmentClass","isTimelineView","cell","getWorkCellElements","isInverseTableSelect","isMultiple","targetCell","initialId","allowMultipleRow","removeInlineAppointmentElement","allowMultiRowSelection","parentElement","cellIndex","getCells","group","resources","getAttribute","resourceSelectedCells","allowMultiCellSelection","allDayCells","getAllDayCells","resourceAllDayCells","concat","addSelectedClass","isReverse","getAppointmentElements","nextAppEle","targetIndex","addSelectedAppointments","appointmentElements","getUniqueAppointmentElements","filteredElements","selectedSeriesEvents","eventsProcessed","filter","eventObject","eventFields","JSON","stringify","Guid","selectedElement","focusElements","getAppointmentElementsByGuid","startCell","endCell","guid","self","selectedObject","getEventByGuid","selectWorkCellByTime","key","viewCollections","selectedElements","selectedEventElements","getSelectedAppointments","moreEventWrapper","quickPopupWrapper","getQuickPopupElement","getWorkCellFromAppointmentElement","tableRows","getTableRows","curRowIndex","selectAppointment","parentNode","sectionRowIndex","rowIndex","columnIndex","maxIndex","isCancelLeftRightAction","selectedAppointments","processLeftRight","calculateNextPrevDate","curColIndex","maxColIndex","currentCell","nextPrevDate","queryString","popupElement","focusableElements","getFocusableElements","footerEle","offsetParent","firstEle","lastEle","activeElement","popupWrapper","processTabOnPopup","appSelector","appElements","focusAppointment","resourceBase","lastResourceLevel","virtualScrollModule","virtual","averageRowHeight","expandedResources","virtualScrolling","setScrollPosition","resCellSelector","resourceCell","preventScroll","selectAppointmentElementFromWorkCell","processTabOnResourceCells","activeEle","selectedEle","getSelectedEvents","activeEventData","allowDeleting","deleteClick","eventEle","renderedResources","onClosePopup","morePopup","tabElements","currentTabIndex","nextTabElement","resColWrap","resCells","forEach","workCell","offsetTop","Data","dataSource","query","initDataManager","dataManager","clone","addParams","toISOString","executeQuery","Gregorian","dt","days","dateObj","monthValue","beginDate","months","Islamic","hDate","getHijriDate","gDate","toGregorian","daysInMonth","getDaysInMonth","finalGDate","finalHDate","hijriDate","isLeapYear","updateDateObj","currentHijri","tempHijri","hDate1","Timezone","timezoneData","getTimezoneData","convertedDate","toLocaleString","timeZone","isNaN","error","fromOffset","toOffset","offset","fromLocalOffset","toLocalOffset","convert","Intl","DateTimeFormat","resolvedOptions","Value","Text","generateSummary","rule","localeObject","calendarType","ruleObject","extractObjectFromRule","summary","EVERY","cldrObj","cldrObj1","nameSpace1","nameSpace","freq","DAYS","WEEKS","ON","DAYINDEXOBJECT","MONTHS","getMonthSummary","YEARS","count","TIMES","until","tempDate","UNTIL","monthDay","pos","setPosition","WEEKPOS","generate","excludeDate","startDayOfWeek","maximumCount","MAXOCCURRENCE","viewDate","oldTimezone","newTimezone","cacheDate","calendarUtil","getCalendarUtil","modifiedDate","tempExcludeDate","tz","content","parsedDate","getDateFromRecurrenceDateString","recExceptionCount","tempViewDate","maxOccurrence","setFirstDayOfWeek","DAYINDEX","dailyType","weeklyType","monthlyType","yearlyType","recDateString","substr","excludeDateHandler","zeroIndex","getDateCount$1","expectedCount","state","expectedDays","compareDates","validateRules","weekState","wkstIndex","weekCollection","wkst","dayIndex","startDateDiff","weekstartDate","weekendDate","compareTempDate","insertDataCollection","getStartDateForWeek","ruleType","validateMonthlyRuleType","monthlyDayTypeProcessforMonthFreq","monthlyDayTypeProcess","monthlyDateTypeProcessforMonthFreq","monthlyDateTypeProcess","typeValue","checkYearlyType","processWeekNo","processYearDay","stDate","getYearLastDate","startDay","firstWeekSpan","weekNos","weekNo","insertDateCollection","insertDatasIntoExistingCollection","dateCollection","yearDay","getLeapYearDaysCount","getYearDaysCount","initializeRecRuleVariables","ruleData","monthCollection","mainDate","monthInit","currentMonthDate","getMonthStartDate","isSameYear","checkMonth","processDateCollectionForByMonthDay","setNextValidDate","setValidDate","isLastMonth","getMonthDaysCount","recRuleVariables","isByMonth","validateProperDate","monthData","getMonthCollection","isHavingNumber","HASNUMBER","test","expectedDaysArray","SPLITNUMBERANDSTRING","isSameMonth","filterDateCollectionByIndex","insertDateCollectionBasedonBySetPos","dayCycleData","processWeekDays","initialDate","datas","week","row","insertDateCollectionBasedonIndex","processDateCollectionforByDayWithInteger","compareMonth","newstr","getDayString","getRecurrenceCollection","recurrenceCollectionObject","expectedDaysArrays","arrPosition","getDateCollectionforBySetPosNull","recurrenceCollections","dayData","chDate","weekCount","firstOfMonth","lastOfMonth","numberOfDaysInMonth","firstWeekDay","used","sort","weekIndex","validRules","REMOVENUMBERINSTRING","checkDayIndex","sortedExpectedDays","expectedDaysNumberSplit","expectedDaysArr","rules","rulesList","splitData","Number","splice","dayCycle","checkDate","expectedDate","shift","checkYear","expectedyearDay","getYearDay","startDateCollection","diff","rotate","expectedMonth","getExpectedDays","SU","MO","TU","WE","TH","FR","SA","getRecurrenceStringFromDate","getUTCFullYear","roundDateValues","getUTCMonth","getUTCDate","getUTCHours","getUTCMinutes","getUTCSeconds","EventBase","slots","isDoubleTapped","events","timeZonePropChanged","fields","processed","generateID","id","updateEventDateTime","processTimezoneChange","isPrinting","processTimezone","level","recurrenceRule","recurrenceID","crudObj","isCrudAction","generateOccurrence","recurrenceEvent","occurrence","app","generateGuid","eventData","isBlock","filterEvents","blockData","eventObj","isDifferentDate","blockProcessed","eventCollection","eventsData","processData","processedData","startTimezone","endTimezone","startTz","endTz","eStart","eEnd","resourceData","getGroupIndexFromEvent","blockEvents","isDifferentTime","resourceTdData","fieldMapping","predicate","and","or","json","executeLocal","where","filterEventsByResource","sortByTime","filteredEvents","groupOrder","keys","Object","filteredCollection","every","appointmentsCollection","sortComparer","fieldMappings","a","b","d1","d2","object1","object2","d3","d4","d5","d6","large","eventStartTime","eventEndTime","eventLength","isSpanned","dateRender","orgStart","orgEnd","ranges","cStart","slot","byDate","showWeekend","slotDates","s","renderedDates","getRenderedDates","firstSlot","hasBreak","isLeft","isRight","cloneEventObject","dateInRange","availSlot","isAlreadySelected","elementSelector","eventSelect","elementSelect","selectAppointments","isAlreadyAdded","appointment","isFocused","dialogObject","visible","selectedCell","keyboardInteractionModule","nearestTime","isAllDayAppointment","targetArea","levelIndex","resource","levelName","idField","parentField","getIndexFromResourceId","isFullDay","spannedEventPlacement","appointmentBorderRemove","isPreventCrud","isReadOnly","isReadonly","eventTouchClick","eventDoubleClick","resizeModule","wireResizeEvent","dragAndDropModule","wireDragEvent","setTimeout","spanEvent","allowResizing","resizeEdge","resizeHandler","isTop","isBottom","ctrlKey","metaKey","getSelectedEventElements","selectEventArgs","eventClickArgs","quickPopupHide","currentAction","openRecurrenceAlert","c","r","random","v","resourceId","eventId","idType","getEventIDType","maxId","obj","isMaxCount","eventRule","exception","recurrenceException","maxCount","firstDay","generatedDates","occurrenceCollection","clonedObject","followingID","isParent","parentEvent","getFollowingEvent","collection","getEventCollections","followObj","follow","parentObj","childObj","followingCollection","followingEvent","getOccurrenceEvent","collections","fieldValue","parentApp","parentStart","childStart","isGuid","isFollowing","fieldKey","parentObject","recurrenceData","deletedOccurrences","exDateString","len","edited","exDate","childObject","alpha","alphaColor","color","g","getResourceColor","record","resIndex","eventSubject","subject","default","appointmentWrapper","attrs","templateElement","eventTemplate","scheduleId","eventTemplateName","templateId","getAppointmentTemplate","appointmentSubject","setWrapperAttributes","isBlockAlert","dataCol","filterBlockEvents","deleteFutureEditEvents","futureEvents","deleteFutureEditEventList","delId","followingId","deleteFutureEvent","startTimeQuery","getFilterEventsList","deleteRecurrenceEventList","delEditedEvents","delEventQuery","filteredDates","schedule","isHourRange","isSameRange","dateHeader","heightPropChanged","indentHeight","headerRows","tdEle","ele","expand","clearEvents","unWireEvents","VerticalEvent","renderedEvents","renderedAllDayEvents","overlapEvents","moreEvents","overlapList","allDayEvents","allDayLevel","getStartHour","getEndHour","animation","progress","animationUiUpdate","setDragArea","wrapperElements","isDragging","wrapper","sourceEvent","targetEvent","allDayElement","setAllDayRowHeight","expandCollapse","rowExpandCollapse","initializeValues","processBlockEvents","renderEvents","arr","isGroupAdaptive","cellHeight","parseFloat","appHeight","appointmentElement","appLeft","appointmentWrap","eventType","eventArgs","getResourceList","dateCount","setValues","renderBlockEvents","dayCount","spannedData","isSpannedEvent","isValidEvent","blockTop","blockHeight","getHeight","getTopValue","createBlockAppointmentElement","appendEvent","sortByDateTime","isRender","renderedDate","renderAllDayEvents","enableMaxHeight","getOverlapIndex","renderNormalEvents","resourceIndex","getCssClass","apply","recordSubject","getReadonlyAttribute","getAnnouncementString","appointmentDetails","elementId","appointmentStartTime","getTimeString","appointmentEndTime","timeStr","appointmentTime","appointmentLocation","location","iconClass","recurrenceIcon","renderSpannedIcon","applyResourceColor","renderResizeHandler","currentDay","countWrapper","childElementCount","innerCountWrap","moreIndicatorElement","countCell","moreCount","formatNumber","iconElement","iconLeft","iconRight","iconTop","iconBottom","startEndHours","inline","currentDates","splitEvent","allDayRowCell","cellTop","appWidth","topValue","isDateRange","isAlreadyRendered","allDayDifference","allDayIndex","Index","widthAdjustment","wIndex","eventWrapper","createInlineAppointmentElement","createAppointmentElement","createMoreIndicator","allDayRowHeight","addOrRemoveClass","wireAppointmentEvents","appIndex","getEventWidth","argsData","tempData","adjustOverlapElements","iconHeight","maxHeight","subjectElement","resizeHandlers","tempWidth","tempLeft","diffInMinutes","enable","eventsList","appointmentList","recordStart","recordEnd","filterList","val","appLevel","getSmallestMissingNumber","length1","length2","eleGuid","apps","getEventLeft","enableAllDayScroll","allDayExpandScroll","animate","moreEventCount","eventElement","styles","rowHeight","getEventHeight","EVENT_GAP","MonthEvent","monthHeaderHeight","moreIndicatorHeight","renderType","enableIndicator","rowAutoHeight","withIndicator","maxOrIndicator","ignoreWhitespace","appElement","wrap","conWrap","removeEventWrapper","removeHeightProperty","cellTd","eventHeight","renderResourceEvents","updateFocusedWorkCell","renderEventsHandler","workDays","updateBlockElements","isPreventScrollUpdate","scrollPosition","updateVirtualScrollHeight","enablePersistence","showWeekNumber","totalCells","weekNumberCells","blockList","workCells","clientHeight","cellDetail","cellWidth","getSlotDates","spannedEvents","sDate","getStartTime","getIndex","updateIndicatorIcon","blockSpannedList","isSameDate","isBlockIcon","blockEvent","isIcon","getEndTime","getIndexOfDate","getCellTd","getPosition","diffInDays","appRight","appTop","getRowTop","blockElement","renderEventElement","renderBlockIndicator","blockIndicator","cloneData","actualStartTime","actualEndTime","actualStartHour","actualEndHour","sourceRes","slotData","isCloneElement","newRecord","getEventData","eventLocation","innerElement","allDayString","timeString","appTime","appLocation","appendEventIcons","overlapCount","enableAppRender","inlineValue","firstChild","updateCellHeight","getFilteredEvents","appArea","renderedAppCount","getMoreIndicatorElement","renderElement","moreIndicatorClick","appointmentsList","dateTime","getOverlapEvents","moreArgs","isPopupOpen","clickArgs","moreEventClick","isAppointment","pop","setMaxEventHeight","wrapperEle","selector","headerHeight","EVENT_GAP$1","BLOCK_INDICATOR_WIDTH","BLOCK_INDICATOR_HEIGHT","TimelineEvent","eventContainers","tr","dayLength","slotsPerDay","trimStartTime","trimEndTime","getOverlapSortComparerEvents","source","getSortComparerIndex","elem","eleHeight","renderApp","getFirstChild","moreIndicator","appPos","renderTimelineMoreIndicator","k","isAlreadyAvail","startDateTime","slotStartTime","slotEndTime","getFilterEvents","monthHeader","td","getNextDay","getPreviousDay","isSameDay","getSameDayEventsWidth","getSpannedEventsWidth","endWidth","startWidth","spannedWidth","endDay","slotTd","daySlot","getAppointmentLeft","gIndex","indicatorPos","wrapIndex","InlineEdit","inlineEdit","moreWrapper","cellEdit","eventEdit","saveObj","generateEventData","getEventDaysCount","createVerticalViewInline","createMonthViewInline","createTimelineViewInline","inlineSubject","subEle","timeEle","innerText","subjectWrap","setSelectionRange","daysCount","verticalEvent","allDayElements","saveObject","monthEvent","monthCellSelector","monthModule","timelineView","abs","inlineElement","getEventMaxID","setDefaultValueToObject","setResourceValues","addEvent","eventTarget","eventDetails","getEventDetails","saveEvent","inlineData","inlineAppointmentElement","inlineDetails","inlineAppointment","node","FieldValidator","form","formObj","customPlacement","inputElement","errorPlacement","validationComplete","focusout","focusOut","relatedTarget","ignoreError","inputName","display","status","createTooltip","dlgContent","client","inputClient","div","arrow","elements","reset","EVENT_FIELD","QuickPopups","isMultipleEventSelect","fieldValidator","render","renderQuickPopup","renderMorePopup","renderQuickDialog","open","quickPopupOpen","close","quickPopupClose","hideAnimation","showAnimation","collision","viewPortElement","zIndex","moreEventPopup","morePopupOpen","morePopupClose","closeButton","renderButton","closeClick","navigationClick","buttonModel","isPrimary","dialogButtonClick","editFollowingEvents","followingSeriesButton","quickDialog","animationSettings","effect","buttons","closeOnEscape","beforeClose","beforeQuickDialogClose","isModal","showCloseIcon","dialogElement","okButton","cancelButton","iconName","isDisabled","clickEvent","buttonObj","disabled","iconCss","classList$$1","followingEventButton","validation","renderFormValidator","editDeleteOnly","editFollowingEventsOnly","editDeleteSeries","header","quickDialogClass","activeEvent","showQuickDialog","dialogCancel","enableRecurrenceValidation","popupType","eventProp","popupArgs","moreEventContentEle","moreEventWrapperEle","eventText","tempId","eventTitle","closeIcon","editAction","allowEditing","deleteAction","editIcon","editClick","deleteIcon","beforeQuickPopupOpen","tempObj","isBlockRange","showQuickInfo","isCellBlocked","isMinMaxDate","targetEle","newEventClone","isSameTarget","quickCellPopup","getPopupHeader","getPopupContent","getPopupFooter","createInput","properties","placeholder","moreButton","detailsClick","saveButton","saveClick","applyFormValidation","editButton","quickInfoTemplates","templateType","eventTooltip","updateTapHoldEventPopup","isSameEventClick","quickEventPopup","buttonClass","deleteButton","headerType","headerData","headerTemplate","isQuickTemplate","headerArgs","elementType","headerTemp","getQuickInfoTemplatesHeader","getFormattedString","templateWrapper","childNodes","contentTemplate","contentArgs","contentTemp","getQuickInfoTemplatesContent","resourceText","getResourceText","details","getRecurrenceSummary","getTimezone","description","footerType","footerData","footerTemplate","footer","footerArgs","footerTemp","getQuickInfoTemplatesFooter","resourceValue","textField","lastResource","isArray","resNames","lastResourceData","resourceDetails","startDateDetails","getDateFormat","endDateDetails","startTimeDetail","endTimeDetail","spanLength","dateElement","moreEventElements","createMoreEventList","tdDate","dialogEvent","subjectEle","destroyToolTip","openDeleteAlert","moreElement","cancelBtn","deleteEvent","getParentEvent","isIgnoreOccurrence","eventSave","titleContent","zoneDetails","recurrenceEditor","getRecurrenceEditorInstance","ruleSummary","getRuleSummary","toUpperCase","skeletonString","skeleton","cellsData","popupCloseArgs","focusElement","isEventPopup","getDataFromTarget","destroyPopupButtons","removeAttribute","innerHeight","offsetX","refreshPosition","collide","leftCollide","translateY","offsetY","applyEventColor","colorField","colorEle","borderLeftColor","backgroundColor","editElement","isCellPopup","popupData","formvalidator","validate","getObjectFromFormData","navigateEle","currentTarget","classNames","popupWrap","removeNewEventElement","tar","updateMoreEventContent","popupName","popup","buttonCollections","button","instance","destroyQuickDialog","destroyQuickPopup","destroyMorePopup","EventTooltip","tooltipObj","mouseTrail","showTipPointer","getTargets","beforeRender","onBeforeRender","onBeforeClose","targets","headerTooltipTemplate","enableTooltip","resCollection","getColumnLevels","contentContainer","tooltipTemplate","getHeaderTooltipTemplate","setContent","getEventTooltipTemplate","eventStart","eventEnd","tooltipSubject","tooltipLocation","startMonthDate","startMonthYearDate","endMonthYearDate","tooltipDetails","tooltipTime","resetTemplates","__decorate$1","__decorate","decorators","desc","arguments","getOwnPropertyDescriptor","Reflect","decorate","defineProperty","HEADER","INPUTWARAPPER","INPUTWARAPPERSIDE","REPEATELEMENT","REPEATINTERVAL","INTERVALCLASS","DAYWRAPPER","WEEKWRAPPER","WEEKPOSITION","YEAREXPANDERWRAPPER","YEAREXPANDERELEMENT","MONETHEXPANDERWRAPPER","MONETHEXPANDWRAPPER","MONTHEXPANDERELEMENT","MONTHEXPANDERCHECKBOXWRAPPER","FORMLEFT","FORMRIGHT","MONTHDAYWRAPPER","MONTHEXPANNDERELEM","MONTHPOS","MONTHWEEK","ENDON","MONTHEXPANDERLABEL","WEEKEXPANDERLABEL","ENDONLABEL","ENDONLEFT","MONTHDAYELEMENT","ENDONELEMENT","ENDONDATE","UNTILDATE","ENDONCOUNTWRAPPER","ENDONCOUNT","HIDEWRAPPER","RTLCLASS","PRIMARY","ACTIVE","RECURRENCETABLE","REPEATCONTENT","REPEATCONTENTWRAPPER","NONE","DAILY","WEEKLY","MONTHLY","YEARLY","NEVER","UNTIL$1","COUNT","TEXTFIELD","VALUEFIELD","LAST","REPEAT","REPEATEVERY","ON$1","END","RADIOLABEL","RULEUNTIL","RULEBYDAY","RULEBYMONTHDAY","RULEBYMONTH","RULEINTERVAL","RULECOUNT","RULESETPOS","RULEFREQ","RULEDAILY","RULEWEEKLY","RULEMONTHLY","RULEYEARLY","RULESUNDAY","RULEMONDAY","RULETUESDAY","RULEWEDNESDAY","RULETHURSDAY","RULEFRIDAY","RULESATURDAY","KEYSUNDAY","KEYMONDAY","KEYTUESDAY","KEYWEDNESDAY","KEYTHURSDAY","KEYFRIDAY","KEYSATURDAY","EQUAL","SEMICOLON","COMMA","FIRST","SECOND","THIRD","FOURTH","contentType","none","daily","weekly","monthly","yearly","valueData","neverClassList","weekClassList","monthClassList","yearClassList","dailyClassList","noEndClassList","endOnCountClassList","endOnDateClassList","RecurrenceEditor","options","defaultLocale","never","first","second","third","fourth","last","repeat","repeatEvery","onDay","weeks","years","summaryTimes","summaryOn","summaryUntil","summaryRepeat","summaryDay","summaryWeek","summaryMonth","summaryYear","monthWeek","monthPosition","monthExpander","yearExpander","repeatInterval","renderStatus","dayButtons","monthButtons","endOn","showFormElement","updateForm","freshOnEndForm","updateEndOnForm","selectMonthDay","updateUntilDate","onMonthDay","checked","renderComponent","setRecurrenceRule","repeatType","startState","selectedType","getRecurrenceRule","applyCustomClass","resetDayButton","rotateArray","untilDateObj","weekday","monthDate","monthWeekDays","monthWeekPos","getDayPosition","daySelection","endType","hideElement","getRepeatData","floatLabelType","frequencies","resetFormValues","triggerChangeEvent","getEndData","popupWidth","getPopupWidth","renderDropDownList","dropDownData","onWeekDay","getMonthPosData","getDayData","getMonthData","formelement","recurreneElement","dateFormat","getFormat","formatType","btns","btn","isToggle","label","recurrenceCount","setTemplate","renderDropdowns","renderDatePickers","dayButtonRender","radioButtonRender","numericTextboxRender","endData","positionCollection","getMonthEndDate","textValue","monthpos","monthposValue","nameSpaceString","fullDay","updateWeekButton","updateMonthUI","tempStr","setDefaultValue","untilDate","newUntilDate","getSelectedDaysData","getSelectedMonthData","getYearMonthRuleData","getIntervalData","getUntilData","getEndOnCount","endon","updateUI","destroyComponents","removeClasses","addOnPersist","initialize","rtlClass","renderComplete","newProp","oldProp","prop","prototype","EVENT_FIELD$1","REPEAT_CONTAINER_CLASS","REPEAT_BUTTON_ICON_CLASS","REPEAT_BUTTON_CLASS","REPEAT_DIALOG_CLASS","HIDE_STYLE_CLASS","EventWindow","eventWindowTime","renderEventWindow","dialogModel","getEventWindowContent","minHeight","beforeOpen","onBeforeOpen","eventDelete","dialogClose","preventEventSave","createRecurrenceEditor","editorTemplate","isEventData","cellClickAction","renderFormElements","onCellDetailsUpdate","onEventDetailsUpdate","allowKeyboardInteraction","code","isEnterKey","getSlotDuration","getInstance","deleteObj","callBackPromise","refreshDateTimePicker","startObj","endObj","resolve","isInteracted","eventCrudData","processCrudActions","resetForm","onsubmit","formElements","tempEle","getEditorTemplate","getDefaultEventWindowContent","parentDiv","createDivElement","titleLocationDiv","renderTextBox","editorTitles","startEndDateTimeDiv","renderDateTimePicker","onTimeChange","allDayTimezoneDiv","renderCheckBox","timezoneParentDiv","renderDropDown","repeatParentDiv","repeatDiv","repeatEditContainer","loadRecurrenceEditor","resourceParentDiv","renderResourceDetails","submit","title","renderRecurrenceEditor","updateMinMaxDateToEditor","fieldName","changeEvent","dateTimeDiv","getFieldName","dateTimeInput","createInputElement","dateTimePicker","timeFormat","getFieldLabel","step","startEndElement","updateRuleUntilDate","labelValue","resourceDiv","resourceInput","resourceTemplate","allowMultiple","listObj","onMultiselectResourceChange","itemTemplate","popupHeight","mode","dropDownList","onDropdownResourceChange","timezoneDiv","timezoneInput","allowFiltering","onTimezoneChange","timezoneDataSource","filterBarPlaceholder","noRecordsTemplate","filtering","updateData","byGroupID","getColumnName","resObject","createInstance","datasource","resourceModel","groupId","filterRes","filterDatasource","resObj","itemData","resValue","startTimezoneObj","endTimezoneObj","checkBoxDiv","checkBoxInput","checkBox","onChange","repeatStatus","textBoxDiv","textBoxInput","labelText","onAllDayChange","timezoneChangeStyle","onRepeatChange","repeatDialogObject","repeatSaveDialog","repeatCancelDialog","repeatOpenDialog","repeatRule","renderRepeatDialog","repeatStartDate","updateRepeatLabel","closeRepeatDialog","repeatTempRule","showDetails","disableButton","RecurrenceRule","getValidationRule","trimAllDay","getFormElements","keyNames","curElement","columnName","setValueToElement","setDefaultValueToElement","timezoneObj","attrName","isDropDowns","fieldSelector","classSelector","control","attrEle","allDayStatus","updateDateTime","getStartEndTime","workHours","timezoneValue","timezoneConvert","isDisable","saveIcon","untilObj","resetFormFields","resetFields","localTimezoneName","found","some","formElement","currentElement","alert","dataCollection","getEventDataFromEditor","processEventValidation","Repeat","alertType","openValidationError","recurrenceValidation","isShowAlert","openRecurrenceValidationAlert","getResourceData","isResourceEventExpand","allowGroupEdit","getEventIdFromForm","eveId","editedData","editOccurrenceValidation","resourceSaveEvent","getValueFromElement","alertMessage","recEditor","excludedEvents","seriesEvents","getSeriesEvents","getEditedOccurrences","getEventById","types","tempDiff","tempValue","recColl","recIndex","currentData","editData","recurColl","getOccurrencesByID","excludedDatas","getRecurrenceIndex","lastLevel","eventList","addValues","resCol","l","sanitize","dateValue","isIgnore","VirtualScroll","itemSize","bufferCount","renderedLength","isScrollHeightNull","setItemSize","resWrap","eventWrap","timeIndicator","renderVirtualTrackHeight","setTranslate","resourceWrap","setExpandedResources","lastResourceIndex","lastRenderIndex","conTable","resourceCount","getRenderedCount","lastCollIndex","renderedResCount","setTabIndex","refreshEvents","firstTDIndex","upScroll","downScroll","focusedEle","updateContent","actionObj","navigationWrapper","clearTimeout","timeValue","prevSetCollection","getBufferCollection","nextSetResIndex","lastIndex","nextSetCollection","isResourceCell","resourceRows","getContentRows","contentRows","eventRows","getEventRows","focusResCell","Render","isDataRefresh","initializeLayout","dayModule","weekModule","workWeekModule","yearModule","agendaModule","monthAgendaModule","timelineViewsModule","viewClass","timelineMonthModule","timelineYearModule","firstView","setCalendarView","Error","updateLabelText","enableCompactView","allowVirtualScrolling","updateHeader","setDayOfWeek","updateHeaderItems","getLabelText","__decorate$2","WorkHours","__decorate$3","TimeScale","__decorate$4","QuickInfoTemplates","__decorate$5","HeaderRows","Crud","dataModule","generateQuery","fromTable","getData","then","dataManagerSuccess","catch","dataManagerFailure","resultData","result","actionArgs","addedRecords","editParams","changedRecords","deletedRecords","crudData","tdData","offline","offlineArgs","promise","onlineArgs","isBlockEvent","addEvents","addArgs","saveChanges","getTable","getQuery","insert","crudArgs","refreshData","processSave","processOccurrences","processFollowSeries","processEntireSeries","updateEvents","saveArgs","update","deleteEvents","deleteArgs","occurrenceData","isDeletedRecords","occurrenceArgs","occurrenceEvents","childEvent","parentException","exceptionDate","excludeDateCheck","followData","updateFollowEvents","followArgs","followEvents","processRecurrenceRule","isFollowingEvent","seriesData","updateSeriesEvents","seriesArgs","eventCollections","deletedEvents","originalParent","deleteData","isDelete","isEdited","editedDate","editArgs","exceptionString","parentEle","exceptionDateList","followEvent","newRecurrenceRule","ruleException","getUpdatedRecurrenceRule","splitRule","updatedRule","ruleKey","ruleValue","WorkCellInteraction","onHover","navigateView","sameView","viewOptions","isWorkCell","selectCell","targetSelector","hoverTarget","hoverArgs","__decorate$8","FieldOptions","__decorate$7","Field","__decorate$6","EventSettings","__decorate$9","Group","__decorate$10","Resources","ResourceBase","leftPixel","resColTd","resColDiv","headerIndentTemplate","renderHeaderIndentTemplate","tBody","trCount","ClassName","expandedField","trCollection","slicedCollection","Count","resColl","resDiv","tbl","createTableLayout","generateTreeData","countCalculation","hideResourceRows","isExpanded","isVirtualScroll","resRows","rIndex","tabindex","ntd","iconDiv","setMargin","onTreeIconClick","setResourceHeaderContent","resourceHeaderTemplate","classCollection","ntr","marginLeft","marginRight","parentCollection","wholeCollection","y","totalCount","z","trElement","eventElements","updateVirtualContent","rowCollection","workCellCollection","headerRowCollection","pNode","clickedRes","clonedCollection","expanded","trElem","sIndex","virtualTrack","updateVirtualTrackHeight","resTable","contentTable","eventTable","resourceWrapper","renderResourceHeaderText","menuClick","popupOverlay","treeWrapper","resourceTree","treeViewObj","child","nodeTemplate","nodeClicked","resourceClick","expandAll","treePopup","isTimeLine","treeCollection","resTreeColl","treeHandler","treeLevel","levelId","treeArgs","resourceName","resourceChild","tree","resourceTreeLevel","headerCollection","resourceLevel","levelIcon","headerWrapper","treeNodes","triggerEvents","renderModule","isSetModel","promises","Promise","all","resourceObj","getResourceModel","refreshLayout","startHourField","endHourField","workDaysField","cssClassField","renderElements","requiredResources","colorIndex","resourceColorField","innerDates","resTreeGroup","lastColumnDates","prevResource","prevResourceData","prevOrder","resTree","dateCol","resWorkDays","resStartHour","resEndHour","getDateSlots","dateSlots","generateCustomHours","resCssClass","resourceLevelIndex","colSpan","generateHeaderLevels","dateSlot","headerDates","headerLevels","currentLevelChilds","currentLevelChild","nextLevelChilds","nextLevelChild","lastLevelResource","dateHeaderLevels","levels","dateColSpan","firstRowTd","datesColumn","headerDate","resGroup","resTd","unshift","colorFieldIndex","filterData","resourceDates","removeDuplicateDates","dateColl","groupEditIndex","addObj","removeObj","scrollElement","offsetTarget","resToolBarEle","Schedule","addClasses","allowMultiDrag","cls","validateDate","scrollModule","workCellAction","initializeDataModule","renderTableContainer","getActiveViewOptions","initializeResources","wireEvents","isReact","renderReactTemplates","templates","isAngular","clearTemplate","bindResourcesData","isLayoutOnly","initializeView","destroyHeaderModule","showHeaderBar","isTouch","scheduleTouchModule","destroyPopups","initializePopups","checkIndex","isModuleLoad","selectedView","prevIndex","isOptions","isSelected","fieldViewName","cellHeaderTemplateName","cellHeaderTemplate","dateHeaderTemplateName","dateHeaderTemplate","cellTemplateName","cellTemplate","dayHeaderTemplateName","dayHeaderTemplate","monthHeaderTemplateName","monthHeaderTemplate","resourceHeaderTemplateName","headerIndentTemplateName","currentIndex","getViewIndex","majorSlotTemplate","minorSlotTemplate","isYearView","scheduleOptions","template","firstMonthOfYear","monthsCount","internalTimeFormat","viewsData","setEditorTitles","setResourceCollection","initializeTemplates","cellHeaderTemplateFn","templateParser","dayHeaderTemplateFn","monthHeaderTemplateFn","cellTemplateFn","dateHeaderTemplateFn","majorSlotTemplateFn","minorSlotTemplateFn","appointmentTemplateFn","resourceHeaderTemplateFn","headerIndentTemplateFn","headerTooltipTemplateFn","eventTooltipTemplateFn","editorTemplateFn","quickInfoTemplatesHeaderFn","quickInfoTemplatesContentFn","quickInfoTemplatesFooterFn","culShortNames","muteOnChange","previousView","navigationArgs","animateLayout","isInitial","timingFunction","modules","setViewOptions","member","allowDragAndDrop","getDefaultLocale","setCldrTimeFormat","setCalendarMode","workWeek","agenda","weekAgenda","workWeekAgenda","monthAgenda","today","noEvents","emptyContainer","allDay","more","noTitle","deleteMultipleEvent","selectedItems","deleteSeries","edit","editSeries","editEvent","createEvent","addTitle","moreDetails","save","editContent","deleteContent","deleteMultipleContent","newEvent","recurrence","wrongPattern","seriesChangeAlert","createError","sameDayAlert","occurenceAlert","editRecurrence","repeats","startEndError","invalidDateError","blockAlert","ok","yes","no","series","previous","next","timelineDay","timelineWeek","timelineWorkWeek","timelineMonth","timelineYear","editFollowingEvent","deleteTitle","editTitle","beginFrom","endAt","expandAllDaySection","collapseAllDaySection","searchTimezone","noRecords","onScheduleResize","touchStartEvent","onDocumentClick","isPreventScroll","dateInMS","elementFromPoint","targetElement","cssProps","border","padding","rtlBorder","rtlPadding","eventClone","startEndTime","startEndDate","highlightCurrentTime","resetColWidth","trim","constantText","startDateText","endDateText","announcementString","autoScrollDistance","scrollEdges","viewBoundaries","pageYOffset","pageXOffset","weekNumber","weekRule","weekNumberDate","weekFirstDate","weekLastDate","weekMidDate","indentTemplate","getHeaderIndentTemplate","isRefresh","isResource","isDate","isView","isLayout","isDataManager","updateItems","refreshRecurrenceEditor","timezonePropertyChange","setRtlClass","extendedPropertyChange","propertyChangeAction","allDayRowScrollUpdate","onEventSettingsPropertyChanged","setDialogContent","onGroupSettingsPropertyChanged","refreshQuickDialog","getWorkHourCells","workHourCells","viewStartHour","viewEndHour","msMajorInterval","tempStartIndex","tempEndIndex","getDateTime","colIndex","tds","tdCol","firstTd","lastTd","endDateFromColSpan","getEndDateFromStartDate","isAllDayCell","resourceCol","groupData","resourceExpand","hour","scrollDate","scrollToDate","scrollToHour","groupName","resourceScroll","fileName","customData","iCalendarExportModule","initializeCalendarExport","fileContent","iCalendarImportModule","initializeCalendarImport","excelExportOptions","excelExportModule","initializeExcelExport","printOptions","printModule","includeOccurrences","getProcessedEvents","filterEventsByRange","eventID","getOccurrencesByRange","setRecurrenceEditor","getDeletedOccurrences","isRemoteRefresh","templateName","refreshHeader","refreshResourceHeader","selectResourceByIndex","addResource","removeResource","ActionBase","daysVariation","slotInterval","actionIndex","cloneElement","originalElement","excludeSelectors","navigationInterval","scrollInterval","scrollArgs","resizeEdges","multiData","getOriginalElement","indexCol","cloneIndex","isMultiSelect","eventsCollection","selectedData","isSameResource","intervalTime","viewElement","getResourceElements","leftOffset","rightOffset","viewDimension","changedTouches","contentElements","indexes","minIndex","groupElements","timeElement","wrapperClass","offsetValue","rightValue","leftValue","table","isMorePopup","cloneWrapper","outerHTML","cloneClassLists","dragElement","eventDragArea","dynamicEle","cloneEle","pages","getPageCoordinates","clientX","clientY","yIsScrollable","xIsScrollable","tdCollections","scrollBy","setInterval","autoScrollValidation","autoScroll","updateDraggingDateTime","updateResizingDirection","timeDelay","eventWrappers","parse","isResize","yearEvent","renderDynamicElement","Resize","resizeElement","createCloneElement","resizeTarget","resizeArgs","resizeEventArgs","actionClass","hRows","touchMoveEvent","touchEndEvent","resizeHelper","updateScrollPosition","monthResizing","resizeValidation","leftStyles","getLeftRightStyles","horizontalResizing","rightStyles","topStyles","getTopBottomStyles","verticalResizing","bottomStyles","removeCloneElement","resizeTime","isSameCell","getUpdatedEvent","yearEventsRendering","dynamicEventsRendering","updateOriginalElement","monthDiff","getMonthDiff","getEventCount","dynamicYearlyEventsRendering","monthStart","monthEnd","clearInterval","removeCloneElementClasses","getChangedData","saveChangedData","calculateIntervalTime","updateTimePosition","isDateHeader","isTimeViews","isTimelineMonth","isWithoutScale","headerName","isLastCell","cellOffsetWidth","resizeDate","spanMinutes","originalWidth","isTimeScaleViews","resizeEnd","clnHeight","clnTop","pageWidth","targetWidth","cloneWidth","getContentAreaDimension","isTimeScale","EVENT_GAP$2","YearEvent","yearViewEvents","removeCellHeight","timelineResourceEvents","timelineYearViewEvents","getMonths","cellHeader","wrapperCollection","isSpannedCollection","rowTd","dayStart","dayEnd","dayEvents","updateSpannedEvents","overlapIndex","availedHeight","moreIndicatorCount","isRendered","MoreIndicator","moreIndex","renderMoreIndicator","isRowAutoHeight","renderEvent","isLeftRightResize","renderResourceEvent","eventDatas","createEventElement","rowTr","locationEle","startTimeEle","endTimeEle","dateStart","dateEnd","appStart","appEnd","MINUTES_PER_DAY","DragAndDrop","widthUptoCursorPoint","heightUptoCursorPoint","cursorPointIndex","isHeaderRows","isTimelineDayProcess","widthPerMinute","heightPerMinute","minDiff","isStepDragging","isMorePopupOpened","isAllDayDrag","updatedData","swagData","isAllDayTarget","targetTd","isCursorAhead","abort","isDragScroll","enableTapHold","enableTailMode","cursorAt","dragArea","enableAutoScroll","helper","dragHelper","queryPositionInfo","dragPosition","setDragActionDefaultValues","cursor","cloneRight","contentWrapRight","pointerEvents","cloneBottom","eventGuid","dragArgs","getSelectedData","navigation","dragEventArgs","dragObj","intDestroy","timelineEventModule","splitEvents","appWrap","appEle","calculateMinutesDiff","updateNavigatingPosition","isAllowDrop","currentGroupIndex","crtDate","viewNavigation","morePopupEventDragging","calculateTimelineTime","calculateVerticalDate","calculateVerticalTime","outerWrapperCls","targetWrapper","elementHeight","getAllDayEventHeight","outWrapper","tarWrapper","navigationType","eventDuration","dragStart$$1","dragEnd","eventContainer","appendCloneElement","swapDragging","trCollections","getEventWrapper","updateAllDayEvents","dynamicWrappers","targetCellTime","startTimeDiff","updateMultipleData","getDayIndex","updateEventHeight","startReferenceDate","endReferenceDate","timeDifference","endTimeDiff","differInDays","datesCount","indexGroup","dynamicIndex","filterQuery","renderSpannedEvents","timeDiff","tagName","updateMultipleVerticalDate","getOffsetValue","getColumnIndex","cursorDrag","leftVal","cursorIndex","getCursorCurrentIndex","widthDiff","getWidthDiff","eventSrt","targetDate","dataIndex","calculateResourceGroupingPosition","viewEle","targetLeft","dateLength","scrollY","cursorElement","getCursorElement","dropSelectors","ViewBase","lastElementChild","createResourceColumn","getDayNames","role","tbody","lastRow","reduce","prev","colGroupEle","getDatesHeaderElement","headerTable","colWidth","applyLeft","headerCells","isRtl","tdLeft","hiddenLeft","headerBarHeight","getHeaderElement","resHeader","panel","colLevels","isWorkDay","agendaDaysCount","previousNextIconHandler","weekLength","viewStr","formatDateRange","formattedStr","longDateFormat","toLocaleLowerCase","tdElement","quickTemplate","getResourceHeaderTemplate","renderResourceHeader","renderResourceTree","colElements","getColElements","contentBody","col","resourceColumn","treeIcons","icon","scrollWrap","getContentAreaElement","getResourceRenderDates","VerticalView","baseCssClass","renderAppointments","scrollLeftPanel","scrollTopPanel","setPersistence","leftPanel","getLeftPanelElement","getHeaderBarHeight","timeCells","getScrollableElement","scrollerHeight","setColWidth","setContentHeight","scrollBarWidth","isDateHeaderScroll","scrollToWorkHour","retainScrollPosition","leftPanelElement","getScrollXIndent","highlight","firstWorkHourCell","getTopFromDateTime","columnLevels","generateResourceLevels","workStartHour","workEndHour","isCurrentDate","showTimeIndicator","isWorkHourRange","currentDateIndex","getCurrentTimeIndicatorIndex","changeCurrentTimePosition","currentTimeIndicatorTimer","clearCurrentTimeIndicatorTimer","updateCurrentTimeIndicatorTimer","removeCurrentTimeIndicatorElements","indicator","firstRow","topInPx","timeCellsWrap","timeTrs","curTimeWrap","currentTimeEle","getWorkCellHeight","cntEle","getDateHeaderTemplate","getTimelineDate","getDayName","getMajorSlotTemplate","getMinorSlotTemplate","getCellTemplate","clsList","renderContent","renderResourceMobileLayout","dateTd","renderDatesHeader","indentTd","renderLeftIndent","workTd","scrollContainer","renderTimeCells","renderContentArea","onAdaptiveScroll","onAdaptiveMove","timesTd","trEle","rowCount","nth","getWeekNumberContent","createTd","appointmentExpandCollapse","createAllDayRow","createColGroup","wireCellEvents","thead","createEventWrapper","addAttributes","getTdContent","wireMouseEvents","cellDblClick","handler","getTimeSlotRows","addAutoHeightClass","renderContentTable","onContentScroll","createContentTd","renderContentTableHeader","getContentTdClass","cellDate","isWorkHour","innerWrapper","msStartHour","msEndHour","timeOffset","majorTickDivider","middle","contentScrollableEle","Day","Week","getViewStartDate","getViewEndDate","WorkWeek","Month","dayNameFormat","monthDates","onScrollUIUpdate","onDataReady","onCellClick","headerCell","isCurrentMonth","getDayNameFormat","renderWeekNumberContent","contentArea","monthAgendaWrapper","renderAppointmentContainer","contentWrapper","contentWrapTable","createWeekNumberElement","createHeaderCell","dateTemplate","isMonthStart","slotDatas","prepareSlots","renderDate","includeResource","colDates","colDate","resourcesTd","isOtherMonth","trows","getContentSlots","updateClassList","renderDateHeaderElement","getCellHeaderTemplate","announcementText","lastWeekOfMonth","getMonthStart","getMonthEnd","monthNames","Year","yearEventModule","viewTypeClass","calendarTable","calendarTBody","getRowColumnCount","columnCount","cTr","cTd","calendarWrapper","currentMonth","calendarElement","renderCalendarHeader","renderCalendarContent","headerContent","getMonthName","getMonthDates","currentWeek","weekDates","span","parseDate","monthDaysCount","moreEventArgs","scrollTopSelector","scrollTopElement","leftPanelSelector","isYScroll","getStartDate","getEndDate","onScrollUiUpdate","contentScroll","AgendaBase","listData","aTd","listElement","createList","moduleName","listClass","itemClass","listElements","li","appWrapper","templateEle","createAppointment","appSubjectWrap","strDate","allDayStr","milliSeconds","eventString","displayStr","appDateTime","spanned","splitEventByDay","dateHeaderElement","dayNavigationClick","agendaDate","agendaLastDate","lastLevelInfo","tempLastLevelInfo","tempIndex","finalDate","agendaCollection","hideEmptyAgendaDays","resDataCollection","resDayCollection","rowSpan","topResources","tempGroupedData","totalRowSpan","u","createResourceTableRow","totalCollection","renderEmptyContent","tContent","tContentCollection","w","rowSpanCollection","createDateHeaderElement","createAgendaContentElement","getMobileDateElement","eTr","createTableRowElement","eTd","dTd","Agenda","agendaDates","virtualScrollTop","processAgendaEvents","renderInitialContent","wireEventActions","refreshDate","emptyTBody","contentChild","isObject","appointmentFiltering","updateHeaderText","calculateResourceTableElement","nTr","totalHeight","topElement","getElementFromScrollerPosition","filterDate","getPreviousNextDate","scrollToValue","filterElement","liCollection","liDetails","getStartDateFromEndDate","refreshEvent","agendaScrolling","onAgendaScrollUiUpdate","eventLoad","MonthAgenda","monthAgendaDate","wrapperContainer","appendAppContainer","setEventWrapperHeight","availHeight","clearElements","agendaBase","getAgendaBase","onEventRender","appContainer","appointmentIndicators","appointmentIndicator","navigateDate","TimelineHeaderRow","jsDate","colspan","dateParser","tdDatas","htmlCol","viewTemplate","hourSlots","lastLevelColspan","byYear","byMonth","byWeek","groupByYear","generateSlots","groupByMonth","groupByWeek","TimelineViews","timelineAppointment","scrollHeaderLabels","currDateTime","getLeftFromDateTime","generateTimeSlots","renderGn","timeSlotData","tempTimeSlots","headerWrap","diffInDates","getWorkCellWidth","renderResourceHeaderIndent","createEventTable","getRowCount","collapseRows","renderVirtualTrack","resLevel","resSHr","resEHr","getResourceTdData","TimelineMonth","contentTr","contentTd","TimelineYear","leftHeaderCells","createTableColGroup","innerTr","dayHeaderDates","column","innerTd","renderDayMonthHeaderTemplate","colData","tdCollection","monthTBody","monthWrapper","contentTBody","addClassTable","colCount","renderResourceContent","renderDefaultContent","monthBody","monthTr","monthTd","isDateAvail","dayDate","renderCellTemplate","dayId","monthId","getDayHeaderTemplate","getMonthHeaderTemplate","ICalendarExport","SEPARATOR","appVersion","iCalendarEvents","filterCollection","uId","editedExDate","UID","editedObj","startZone","endZone","calendarEvent","convertDateToString","customFields","customFieldFilter","customField","iCalendar","icsString","download","defaultFields","eventDate","buffer","Blob","msSaveBlob","downloadLink","createElementNS","href","URL","createObjectURL","initEvent","dispatchEvent","revokeObjectURL","ICalendarImport","fileReader","FileReader","onload","iCalString","iCalendarParser","readAsText","calArray","RegExp","isEvent","curEvent","dateParsing","processOccurrence","appoint","hasOwnProperty","exdate","expression","newDate","getDateString","exec","ExcelExport","exportFields","exportName","exportType","isIncludeOccurrences","processWorkbook","columns","columnHeader","fontSize","borders","bold","columnData","n","columnRule","styleRule","numberFormat","workSheet","book","worksheets","Print","printScheduler","printSchedulerWithModel","scrollableEle","links","getElementsByTagName","reference","link","elementWidth","printWindow","write","ready","headerTimeCellsScroll","timeCellsScroll","Inject","printInstance","getPrintScheduleModel","outerHeight","outerWidth","moveTo","resizeTo","screen","availWidth","printModel","scheduleProps","assign","onbeforeunload"],"mappings":"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","sourcesContent":["import { Animation, Browser, ChildProperty, Collection, Complex, Component, Draggable, Event, EventHandler, HijriParser, Internationalization, KeyboardEvents, L10n, NotifyPropertyChanges, Property, SanitizeHtmlHelper, Touch, addClass, append, classList, cldrData, closest, compile, createElement, extend, formatUnit, getDefaultDateObject, getElement, getValue, isNullOrUndefined, prepend, print, remove, removeClass, setStyleAttribute } from '@syncfusion/ej2-base';\nimport { Dialog, Popup, Tooltip, createSpinner, hideSpinner, isCollide, showSpinner } from '@syncfusion/ej2-popups';\nimport { Toolbar, TreeView } from '@syncfusion/ej2-navigations';\nimport { Calendar, DatePicker, DateTimePicker } from '@syncfusion/ej2-calendars';\nimport { DataManager, Deferred, Predicate, Query } from '@syncfusion/ej2-data';\nimport { Button, CheckBox, RadioButton } from '@syncfusion/ej2-buttons';\nimport { FormValidator, Input, NumericTextBox } from '@syncfusion/ej2-inputs';\nimport { DropDownList, MultiSelect } from '@syncfusion/ej2-dropdowns';\nimport { ListBase } from '@syncfusion/ej2-lists';\nimport { Workbook } from '@syncfusion/ej2-excel-export';\n\n/**\n * Constants\n */\n/** @private */\nconst cellClick = 'cellClick';\n/** @private */\nconst cellDoubleClick = 'cellDoubleClick';\n/** @private */\nconst moreEventsClick = 'moreEventsClick';\n/** @private */\nconst select = 'select';\n/** @private */\nconst hover = 'hover';\n/** @private */\nconst actionBegin = 'actionBegin';\n/** @private */\nconst actionComplete = 'actionComplete';\n/** @private */\nconst actionFailure = 'actionFailure';\n/** @private */\nconst navigating = 'navigating';\n/** @private */\nconst renderCell = 'renderCell';\n/** @private */\nconst eventClick = 'eventClick';\n/** @private */\nconst eventRendered = 'eventRendered';\n/** @private */\nconst dataBinding = 'dataBinding';\n/** @private */\nconst dataBound = 'dataBound';\n/** @private */\nconst popupOpen = 'popupOpen';\n/** @private */\nconst popupClose = 'popupClose';\n/** @private */\nconst dragStart = 'dragStart';\n/** @private */\nconst drag = 'drag';\n/** @private */\nconst dragStop = 'dragStop';\n/** @private */\nconst resizeStart = 'resizeStart';\n/** @private */\nconst resizing = 'resizing';\n/** @private */\nconst resizeStop = 'resizeStop';\n/** @private */\nconst inlineClick = 'inlineClick';\n/**\n * Specifies schedule internal events\n */\n/** @private */\nconst initialLoad = 'initial-load';\n/** @private */\nconst initialEnd = 'initial-end';\n/** @private */\nconst print$1 = 'print';\n/** @private */\nconst dataReady = 'data-ready';\n/** @private */\nconst eventsLoaded = 'events-loaded';\n/** @private */\nconst contentReady = 'content-ready';\n/** @private */\nconst scroll = 'scroll';\n/** @private */\nconst virtualScroll = 'virtual-scroll';\n/** @private */\nconst scrollUiUpdate = 'scroll-ui-update';\n/** @private */\nconst uiUpdate = 'ui-update';\n/** @private */\nconst documentClick = 'document-click';\n/** @private */\nconst cellMouseDown = 'cell-mouse-down';\n\n/* eslint-disable @typescript-eslint/no-explicit-any */\n/**\n * Schedule common utilities\n */\nconst WEEK_LENGTH = 7;\nconst MS_PER_DAY = 86400000;\nconst MS_PER_MINUTE = 60000;\n/**\n * Method to get height from element\n *\n * @param {Element} container Accepts the DOM element\n * @param {string} elementClass Accepts the element class\n * @returns {number} Returns the height of the element\n */\nfunction getElementHeightFromClass(container, elementClass) {\n    let height = 0;\n    const el = createElement('div', { className: elementClass }).cloneNode();\n    el.style.visibility = 'hidden';\n    el.style.position = 'absolute';\n    container.appendChild(el);\n    height = el.getBoundingClientRect().height;\n    remove(el);\n    return height;\n}\n/**\n * Method to get translateY value\n *\n * @param {HTMLElement | Element} element Accepts the DOM element\n * @returns {number} Returns the translateY value of given element\n */\nfunction getTranslateY(element) {\n    const style = getComputedStyle(element);\n    return window.WebKitCSSMatrix ?\n        new WebKitCSSMatrix(style.webkitTransform).m42 : 0;\n}\n/**\n * Method to get week first date\n *\n * @param {Date} date Accepts the date object\n * @param {number} firstDayOfWeek Accepts the first day of week number\n * @returns {Date} Returns the date object\n */\nfunction getWeekFirstDate(date, firstDayOfWeek) {\n    const date1 = new Date(date.getTime());\n    firstDayOfWeek = (firstDayOfWeek - date1.getDay() + 7 * (-1)) % 7;\n    return new Date(date1.setDate(date1.getDate() + firstDayOfWeek));\n}\n/**\n * Method to get week last date\n *\n * @param {Date} date Accepts the date object\n * @param {number} firstDayOfWeek Accepts the first day of week number\n * @returns {Date} Returns the date object\n */\nfunction getWeekLastDate(date, firstDayOfWeek) {\n    const weekFirst = getWeekFirstDate(date, firstDayOfWeek);\n    const weekLast = new Date(weekFirst.getFullYear(), weekFirst.getMonth(), weekFirst.getDate() + 6);\n    return new Date(weekLast.getTime());\n}\n/**\n * Method to get first date of month\n *\n * @param {Date} date Accepts the date object\n * @returns {Date} Returns the date object\n */\nfunction firstDateOfMonth(date) {\n    return new Date(date.getFullYear(), date.getMonth(), 1);\n}\n/**\n * Method to get last date of month\n *\n * @param {Date} date Accepts the date object\n * @returns {Date} Returns the date object\n */\nfunction lastDateOfMonth(date) {\n    return new Date(date.getFullYear(), date.getMonth() + 1, 0);\n}\n/**\n * Method to get week number\n *\n * @param {Date} date Accepts the date object\n * @returns {number} Returns the week number\n */\nfunction getWeekNumber(date) {\n    const date1 = new Date(date.getFullYear(), 0, 1).valueOf();\n    const currentDate = new Date(date.getFullYear(), date.getMonth(), date.getDate()).valueOf();\n    const dayOfYear = ((currentDate - date1 + MS_PER_DAY) / MS_PER_DAY);\n    return Math.ceil(dayOfYear / 7);\n}\n/**\n * Method to get week middle date\n *\n * @param {Date} weekFirst Accepts the week first date object\n * @param {Date} weekLast Accepts the week last date object\n * @returns {Date} Returns the date object\n */\nfunction getWeekMiddleDate(weekFirst, weekLast) {\n    return new Date(weekLast.valueOf() - ((weekLast.valueOf() - weekFirst.valueOf()) / 2));\n}\n/**\n * Method to set time to date object\n *\n * @param {Date} date Accepts the date object\n * @param {number} time Accepts the milliseconds\n * @returns {Date} Returns the date object\n */\nfunction setTime(date, time) {\n    const tzOffsetBefore = date.getTimezoneOffset();\n    const d = new Date(date.getTime() + time);\n    const tzOffsetDiff = d.getTimezoneOffset() - tzOffsetBefore;\n    date.setTime(d.getTime() + tzOffsetDiff * MS_PER_MINUTE);\n    return date;\n}\n/**\n * Method the reset hours in date object\n *\n * @param {Date} date Accepts the date object\n * @returns {Date} Returns the date object\n */\nfunction resetTime(date) {\n    return new Date(date.getFullYear(), date.getMonth(), date.getDate());\n}\n/**\n * Method to get milliseconds from date object\n *\n * @param {Date} date Accepts the date object\n * @returns {number} Returns the milliseconds from date object\n */\nfunction getDateInMs(date) {\n    const localOffset = new Date(date.getFullYear(), date.getMonth(), date.getDate(), 0, 0, 0).getTimezoneOffset();\n    const dateOffset = date.getTimezoneOffset();\n    const timezoneOffset = dateOffset - localOffset;\n    return ((date.getTime() - new Date(date.getFullYear(), date.getMonth(), date.getDate(), 0, 0, 0).getTime())\n        - (timezoneOffset * 60 * 1000));\n}\n/**\n * Method to get date count between two dates\n *\n * @param {Date} startDate Accepts the date object\n * @param {Date} endDate Accepts the date object\n * @returns {number} Returns the date count\n */\nfunction getDateCount(startDate, endDate) {\n    return Math.ceil((endDate.getTime() - startDate.getTime()) / MS_PER_DAY);\n}\n/**\n * Method to add no of days in date object\n *\n * @param {Date} date Accepts the date object\n * @param {number} noOfDays Accepts the number of days count\n * @returns {Date} Returns the date object\n */\nfunction addDays(date, noOfDays) {\n    date = new Date('' + date);\n    return new Date(date.setDate(date.getDate() + noOfDays));\n}\n/**\n * Method to add no of months in date object\n *\n * @param {Date} date Accepts the date object\n * @param {number} noOfMonths Accepts the number of month count\n * @returns {Date} Returns the date object\n */\nfunction addMonths(date, noOfMonths) {\n    date = new Date('' + date);\n    const day = date.getDate();\n    date.setDate(1);\n    date.setMonth(date.getMonth() + noOfMonths);\n    date.setDate(Math.min(day, getMaxDays(date)));\n    return date;\n}\n/**\n * Method to add no of years in date object\n *\n * @param {Date} date Accepts the date object\n * @param {number} noOfYears Accepts the number of month count\n * @returns {Date} Returns the date object\n */\nfunction addYears(date, noOfYears) {\n    date = new Date('' + date);\n    const day = date.getDate();\n    date.setDate(1);\n    date.setFullYear(date.getFullYear() + noOfYears);\n    date.setDate(Math.min(day, getMaxDays(date)));\n    return date;\n}\n/**\n * Method to get start and end hours\n *\n * @param {Date} date Accepts the date object\n * @param {Date} startHour Accepts the start hour date object\n * @param {Date} endHour Accepts the end hour date object\n * @returns {Object} Returns the start and end hour date objects\n */\nfunction getStartEndHours(date, startHour, endHour) {\n    const date1 = new Date(date.getTime());\n    date1.setHours(startHour.getHours());\n    date1.setMinutes(startHour.getMinutes());\n    date1.setSeconds(startHour.getSeconds());\n    let date2 = new Date(date.getTime());\n    if (endHour.getHours() === 0) {\n        date2 = addDays(date2, 1);\n    }\n    else {\n        date2.setHours(endHour.getHours());\n        date2.setMinutes(endHour.getMinutes());\n        date2.setSeconds(endHour.getSeconds());\n    }\n    return { startHour: date1, endHour: date2 };\n}\n/**\n * Method to get month last date\n *\n * @param {Date} date Accepts the date object\n * @returns {number} Returns the month last date\n */\nfunction getMaxDays(date) {\n    return lastDateOfMonth(date).getDate();\n}\n/**\n * Method to get days count between two dates\n *\n * @param {Date} startDate Accepts the date object\n * @param {Date} endDate Accepts the date object\n * @returns {number} Returns the days count\n */\nfunction getDaysCount(startDate, endDate) {\n    const strTime = resetTime(new Date(startDate));\n    const endTime = resetTime(new Date(endDate));\n    return Math.round((endTime.getTime() - strTime.getTime()) / MS_PER_DAY);\n}\n/**\n * Method to get date object from date string\n *\n * @param {string} date Accepts the date string\n * @returns {Date} Returns the date object\n */\nfunction getDateFromString(date) {\n    return date.indexOf('Date') !== -1 ? new Date(parseInt(date.match(/\\d+/g).toString(), 10)) :\n        date.indexOf('T') !== -1 ? new Date(date) : new Date(date.replace(/-/g, '/'));\n}\n/** @private */\nlet scrollWidth = null;\n/**\n * Method to get scrollbar width\n *\n * @returns {number} Returns the scrollbar width\n * @private\n */\nfunction getScrollBarWidth() {\n    if (scrollWidth !== null) {\n        return scrollWidth;\n    }\n    const divNode = createElement('div');\n    let value = 0;\n    divNode.style.cssText = 'width:100px;height: 100px;overflow: scroll;position: absolute;top: -9999px;';\n    document.body.appendChild(divNode);\n    const ratio = (devicePixelRatio) ? (devicePixelRatio.toFixed(2) === '1.10' || devicePixelRatio <= 1) ?\n        Math.ceil(devicePixelRatio % 1) : Math.floor(devicePixelRatio % 1) : 0;\n    value = (divNode.offsetWidth - divNode.clientWidth - ratio) | 0;\n    document.body.removeChild(divNode);\n    return scrollWidth = value;\n}\n/**\n * Method to find the index from data collection\n *\n * @param {Object} data Accepts the data as object\n * @param {string} field Accepts the field name\n * @param {string} value Accepts the value name\n * @param {Object} event Accepts the data as object\n * @param {Object[]} resourceCollection Accepts the data collections\n * @returns {number} Returns the index number\n */\n// eslint-disable-next-line max-len\nfunction findIndexInData(data, field, value, event, resourceCollection) {\n    for (let i = 0, length = data.length; i < length; i++) {\n        if (data[i][field] === value) {\n            if (event) {\n                const field = resourceCollection.slice(-2)[0].field;\n                const res = (event[field] instanceof Array ? event[field] : [event[field]]);\n                const resData = res.join(',');\n                if (resData.includes(data[i][resourceCollection.slice(-1)[0].groupIDField])) {\n                    return i;\n                }\n            }\n            else {\n                return i;\n            }\n        }\n    }\n    return -1;\n}\n/**\n * Method to get element outer height\n *\n * @param {HTMLElement} element Accepts the DOM element\n * @returns {number} Returns the outer height of the given element\n */\nfunction getOuterHeight(element) {\n    const style = getComputedStyle(element);\n    return element.offsetHeight + (parseInt(style.marginTop, 10) || 0) + (parseInt(style.marginBottom, 10) || 0);\n}\n/**\n * Method to remove child elements\n *\n * @param {HTMLElement | Element} element Accepts the DOM element\n * @returns {void}\n */\nfunction removeChildren(element) {\n    const elementChildren = [].slice.call(element.children);\n    for (const elementChild of elementChildren) {\n        if (!elementChild.classList.contains('blazor-template')) {\n            element.removeChild(elementChild);\n        }\n    }\n}\n/**\n * Method to check DST is present or not in date object\n *\n * @param {Date} date Accepts the date object\n * @returns {boolean} Returns the boolean value for either DST is present or not\n */\nfunction isDaylightSavingTime(date) {\n    const jan = new Date(date.getFullYear(), 0, 1);\n    const jul = new Date(date.getFullYear(), 6, 1);\n    return date.getTimezoneOffset() < Math.max(jan.getTimezoneOffset(), jul.getTimezoneOffset());\n}\n/**\n * Method to get UTC time value from date\n *\n * @param {Date} date Accepts the date\n * @returns {number} Returns the UTC time value\n */\nfunction getUniversalTime(date) {\n    const year = date.getFullYear();\n    const month = date.getMonth();\n    const day = date.getDate();\n    const hours = date.getHours();\n    const minutes = date.getMinutes();\n    const seconds = date.getSeconds();\n    const milliseconds = date.getMilliseconds();\n    return Date.UTC(year, month, day, hours, minutes, seconds, milliseconds);\n}\n/**\n * Method to check the device\n *\n * @returns {boolean} Returns the boolean value for either device is present or not.\n */\nfunction isMobile() {\n    return window.navigator.userAgent.toLowerCase().indexOf('mobi') > -1;\n}\n/**\n * Method to check the IPad device\n *\n * @returns {boolean} Returns the boolean value for either IPad device is present or not.\n */\nfunction isIPadDevice() {\n    return window.navigator.userAgent.toLowerCase().indexOf('ipad') > -1;\n}\n/**\n * Method to capitalize the first word in string\n *\n * @param {string} inputString Accepts the string value\n * @param {string} type Accepts the string type\n * @returns {string} Returns the output string\n */\nfunction capitalizeFirstWord(inputString, type) {\n    if (type === 'multiple') {\n        inputString = inputString.split(' ').map((e) => e.charAt(0).toLocaleUpperCase() + e.substring(1)).join(' ');\n    }\n    else if (type === 'single') {\n        if (inputString[0] >= '0' && inputString[0] <= '9') {\n            const array = inputString.match(/[a-zA-Z]/);\n            inputString = isNullOrUndefined(array) ? inputString :\n                inputString.slice(0, array.index) + inputString[array.index].toLocaleUpperCase() + inputString.slice(array.index + 1);\n        }\n        inputString = inputString[0].toLocaleUpperCase() + inputString.slice(1);\n    }\n    return inputString;\n}\n\n/**\n * CSS Constants\n */\n/** @private */\nconst ROOT = 'e-schedule';\n/** @private */\nconst RTL = 'e-rtl';\n/** @private */\nconst DEVICE_CLASS = 'e-device';\n/** @private */\nconst MULTI_DRAG = 'e-multi-drag';\n/** @private */\nconst ICON = 'e-icons';\n/** @private */\nconst ENABLE_CLASS = 'e-enable';\n/** @private */\nconst DISABLE_CLASS = 'e-disable';\n/** @private */\nconst TABLE_CONTAINER_CLASS = 'e-table-container';\n/** @private */\nconst SCHEDULE_TABLE_CLASS = 'e-schedule-table';\n/** @private */\nconst ALLDAY_CELLS_CLASS = 'e-all-day-cells';\n/** @private */\nconst HEADER_POPUP_CLASS = 'e-header-popup';\n/** @private */\nconst HEADER_CALENDAR_CLASS = 'e-header-calendar';\n/** @private */\nconst ALLDAY_ROW_CLASS = 'e-all-day-row';\n/** @private */\nconst CONTENT_TABLE_CLASS = 'e-content-table';\n/** @private */\nconst WORK_CELLS_CLASS = 'e-work-cells';\n/** @private */\nconst WORK_HOURS_CLASS = 'e-work-hours';\n/** @private */\nconst POPUP_OPEN = 'e-popup-open';\n/** @private */\n\n/** @private */\nconst DATE_HEADER_WRAP_CLASS = 'e-date-header-wrap';\n/** @private */\nconst DATE_HEADER_CONTAINER_CLASS = 'e-date-header-container';\n/** @private */\nconst HEADER_CELLS_CLASS = 'e-header-cells';\n/** @private */\nconst WORKDAY_CLASS = 'e-work-days';\n/** @private */\nconst OTHERMONTH_CLASS = 'e-other-month';\n/** @private */\nconst CURRENT_DAY_CLASS = 'e-current-day';\n/** @private */\nconst CURRENTDATE_CLASS = 'e-current-date';\n/** @private */\nconst CURRENT_PANEL_CLASS = 'e-current-panel';\n/** @private */\nconst PREVIOUS_PANEL_CLASS = 'e-previous-panel';\n/** @private */\nconst NEXT_PANEL_CLASS = 'e-next-panel';\n/** @private */\nconst PREVIOUS_DATE_CLASS = 'e-prev';\n/** @private */\nconst NEXT_DATE_CLASS = 'e-next';\n/** @private */\nconst TRANSLATE_CLASS = 'e-translate';\n/** @private */\nconst LEFT_INDENT_CLASS = 'e-left-indent';\n/** @private */\nconst LEFT_INDENT_WRAP_CLASS = 'e-left-indent-wrap';\n/** @private */\nconst EVENT_TABLE_CLASS = 'e-event-table';\n/** @private */\nconst RESOURCE_LEFT_TD_CLASS = 'e-resource-left-td';\n/** @private */\nconst RESOURCE_GROUP_CELLS_CLASS = 'e-resource-group-cells';\n/** @private */\nconst RESOURCE_TEXT_CLASS = 'e-resource-text';\n/** @private */\nconst RESOURCE_COLUMN_WRAP_CLASS = 'e-resource-column-wrap';\n/** @private */\nconst RESOURCE_COLUMN_TABLE_CLASS = 'e-resource-column-table';\n/** @private */\nconst RESOURCE_CHILD_CLASS = 'e-child-node';\n/** @private */\nconst RESOURCE_PARENT_CLASS = 'e-parent-node';\n/** @private */\nconst RESOURCE_EXPAND_CLASS = 'e-resource-expand';\n/** @private */\nconst RESOURCE_COLLAPSE_CLASS = 'e-resource-collapse';\n/** @private */\nconst RESOURCE_TREE_ICON_CLASS = 'e-resource-tree-icon';\n/** @private */\nconst RESOURCE_CELLS_CLASS = 'e-resource-cells';\n/** @private */\nconst TIME_CELLS_WRAP_CLASS = 'e-time-cells-wrap';\n/** @private */\nconst TIME_CELLS_CLASS = 'e-time-cells';\n/** @private */\nconst TIME_SLOT_CLASS = 'e-time-slots';\n/** @private */\nconst ALTERNATE_CELLS_CLASS = 'e-alternate-cells';\n/** @private */\nconst CURRENT_TIME_CLASS = 'e-current-time';\n/** @private */\nconst CURRENT_TIMELINE_CLASS = 'e-current-timeline';\n/** @private */\nconst PREVIOUS_TIMELINE_CLASS = 'e-previous-timeline';\n/** @private */\nconst HIDE_CHILDS_CLASS = 'e-hide-childs';\n/** @private */\nconst SCROLL_CONTAINER_CLASS = 'e-scroll-container';\n/** @private */\n\n/** @private */\nconst TIMELINE_WRAPPER_CLASS = 'e-timeline-wrapper';\n/** @private */\nconst APPOINTMENT_WRAPPER_CLASS = 'e-appointment-wrapper';\n/** @private */\nconst DAY_WRAPPER_CLASS = 'e-day-wrapper';\n/** @private */\nconst TOOLBAR_CONTAINER = 'e-schedule-toolbar-container';\n/** @private */\nconst RESOURCE_TOOLBAR_CONTAINER = 'e-schedule-resource-toolbar-container';\n/** @private */\nconst HEADER_TOOLBAR = 'e-schedule-toolbar';\n/** @private */\nconst RESOURCE_HEADER_TOOLBAR = 'e-schedule-resource-toolbar';\n/** @private */\nconst SELECTED_CELL_CLASS = 'e-selected-cell';\n/** @private */\nconst WEEK_NUMBER_WRAPPER_CLASS = 'e-week-number-wrapper';\n/** @private */\nconst WEEK_NUMBER_CLASS = 'e-week-number';\n/** @private */\nconst APPOINTMENT_WRAP_CLASS = 'e-appointment-wrap';\n/** @private */\nconst WRAPPER_CONTAINER_CLASS = 'e-wrapper-container';\n/** @private */\nconst APPOINTMENT_CONTAINER_CLASS = 'e-appointment-container';\n/** @private */\nconst APPOINTMENT_CLASS = 'e-appointment';\n/** @private */\nconst BLOCK_APPOINTMENT_CLASS = 'e-block-appointment';\n/** @private */\nconst BLOCK_INDICATOR_CLASS = 'e-block-indicator';\n/** @private */\nconst APPOINTMENT_BORDER = 'e-appointment-border';\n/** @private */\nconst APPOINTMENT_DETAILS = 'e-appointment-details';\n/** @private */\nconst SUBJECT_WRAP = 'e-subject-wrap';\n/** @private */\nconst RESOURCE_NAME = 'e-resource-name';\n/** @private */\nconst APPOINTMENT_TIME = 'e-time';\n/** @private */\nconst TABLE_WRAP_CLASS = 'e-table-wrap';\n/** @private */\nconst OUTER_TABLE_CLASS = 'e-outer-table';\n/** @private */\nconst CONTENT_WRAP_CLASS = 'e-content-wrap';\n/** @private */\nconst VIRTUAL_TRACK_CLASS = 'e-virtual-track';\n/** @private */\nconst AGENDA_CELLS_CLASS = 'e-agenda-cells';\n/** @private */\nconst AGENDA_CURRENT_DAY_CLASS = 'e-current-day';\n/** @private */\nconst AGENDA_SELECTED_CELL = 'e-active-appointment-agenda';\n/** @private */\nconst MONTH_HEADER_CLASS = 'e-month-header';\n/** @private */\nconst AGENDA_HEADER_CLASS = 'e-day-date-header';\n/** @private */\nconst AGENDA_RESOURCE_CLASS = 'e-resource-column';\n/** @private */\nconst AGENDA_DATE_CLASS = 'e-date-column';\n/** @private */\nconst NAVIGATE_CLASS = 'e-navigate';\n/** @private */\nconst DATE_HEADER_CLASS = 'e-date-header';\n/** @private */\nconst AGENDA_DAY_BORDER_CLASS = 'e-day-border';\n/** @private */\nconst DATE_BORDER_CLASS = 'e-date-border';\n/** @private */\nconst AGENDA_DAY_PADDING_CLASS = 'e-day-padding';\n/** @private */\nconst DATE_TIME_CLASS = 'e-date-time';\n/** @private */\nconst DATE_TIME_WRAPPER_CLASS = 'e-date-time-wrapper';\n/** @private */\nconst AGENDA_EMPTY_EVENT_CLASS = 'e-empty-event';\n/** @private */\nconst AGENDA_NO_EVENT_CLASS = 'e-no-event';\n/** @private */\nconst APPOINTMENT_INDICATOR_CLASS = 'e-appointment-indicator';\n/** @private */\nconst EVENT_INDICATOR_CLASS = 'e-indicator';\n/** @private */\nconst EVENT_ICON_UP_CLASS = 'e-up-icon';\n/** @private */\nconst EVENT_ICON_DOWN_CLASS = 'e-down-icon';\n/** @private */\nconst EVENT_ICON_LEFT_CLASS = 'e-left-icon';\n/** @private */\nconst EVENT_ICON_RIGHT_CLASS = 'e-right-icon';\n/** @private */\nconst EVENT_ACTION_CLASS = 'e-event-action';\n/** @private */\nconst NEW_EVENT_CLASS = 'e-new-event';\n/** @private */\nconst CLONE_ELEMENT_CLASS = 'e-schedule-event-clone';\n/** @private */\nconst MONTH_CLONE_ELEMENT_CLASS = 'e-month-event';\n/** @private */\nconst CLONE_TIME_INDICATOR_CLASS = 'e-clone-time-indicator';\n/** @private */\nconst DRAG_CLONE_CLASS = 'e-drag-clone';\n/** @private */\nconst EVENT_RESIZE_CLASS = 'e-event-resize';\n/** @private */\nconst RESIZE_CLONE_CLASS = 'e-resize-clone';\n/** @private */\nconst LEFT_RESIZE_HANDLER = 'e-left-handler';\n/** @private */\nconst RIGHT_RESIZE_HANDLER = 'e-right-handler';\n/** @private */\nconst TOP_RESIZE_HANDLER = 'e-top-handler';\n/** @private */\nconst BOTTOM_RESIZE_HANDLER = 'e-bottom-handler';\n/** @private */\nconst EVENT_RECURRENCE_ICON_CLASS = 'e-recurrence-icon';\n/** @private */\nconst EVENT_RECURRENCE_EDIT_ICON_CLASS = 'e-recurrence-edit-icon';\n/** @private */\nconst HEADER_ROW_CLASS = 'e-header-row';\n/** @private */\nconst ALLDAY_APPOINTMENT_WRAPPER_CLASS = 'e-all-day-appointment-wrapper';\n/** @private */\nconst ALLDAY_APPOINTMENT_CLASS = 'e-all-day-appointment';\n/** @private */\nconst EVENT_COUNT_CLASS = 'e-appointment-hide';\n/** @private */\nconst ROW_COUNT_WRAPPER_CLASS = 'e-row-count-wrapper';\n/** @private */\nconst ALLDAY_APPOINTMENT_SECTION_CLASS = 'e-all-day-appointment-section';\n/** @private */\nconst APPOINTMENT_ROW_EXPAND_CLASS = 'e-appointment-expand';\n/** @private */\nconst APPOINTMENT_ROW_COLLAPSE_CLASS = 'e-appointment-collapse';\n/** @private */\nconst MORE_INDICATOR_CLASS = 'e-more-indicator';\n/** @private */\nconst CELL_POPUP_CLASS = 'e-cell-popup';\n/** @private */\nconst EVENT_POPUP_CLASS = 'e-event-popup';\n/** @private */\nconst MULTIPLE_EVENT_POPUP_CLASS = 'e-multiple-event-popup';\n/** @private */\nconst POPUP_HEADER_CLASS = 'e-popup-header';\n/** @private */\nconst POPUP_HEADER_ICON_WRAPPER = 'e-header-icon-wrapper';\n/** @private */\nconst POPUP_CONTENT_CLASS = 'e-popup-content';\n/** @private */\nconst POPUP_FOOTER_CLASS = 'e-popup-footer';\n/** @private */\nconst DATE_TIME_DETAILS_CLASS = 'e-date-time-details';\n/** @private */\nconst RECURRENCE_SUMMARY_CLASS = 'e-recurrence-summary';\n/** @private */\nconst QUICK_POPUP_EVENT_DETAILS_CLASS = 'e-event-details';\n/** @private */\nconst EVENT_CREATE_CLASS = 'e-event-create';\n/** @private */\nconst EDIT_EVENT_CLASS = 'e-event-edit';\n/** @private */\nconst DELETE_EVENT_CLASS = 'e-event-delete';\n/** @private */\nconst TEXT_ELLIPSIS = 'e-text-ellipsis';\n/** @private */\nconst MORE_POPUP_WRAPPER_CLASS = 'e-more-popup-wrapper';\n/** @private */\nconst MORE_EVENT_POPUP_CLASS = 'e-more-event-popup';\n/** @private */\nconst MORE_EVENT_HEADER_CLASS = 'e-more-event-header';\n/** @private */\nconst MORE_EVENT_DATE_HEADER_CLASS = 'e-more-event-date-header';\n/** @private */\nconst MORE_EVENT_HEADER_DAY_CLASS = 'e-header-day';\n/** @private */\nconst MORE_EVENT_HEADER_DATE_CLASS = 'e-header-date';\n/** @private */\nconst MORE_EVENT_CLOSE_CLASS = 'e-more-event-close';\n/** @private */\nconst MORE_EVENT_CONTENT_CLASS = 'e-more-event-content';\n/** @private */\nconst MORE_EVENT_WRAPPER_CLASS = 'e-more-appointment-wrapper';\n/** @private */\nconst QUICK_DIALOG_CLASS = 'e-quick-dialog';\n/** @private */\nconst QUICK_DIALOG_OCCURRENCE_CLASS = 'e-quick-dialog-occurrence-event';\n/** @private */\nconst QUICK_DIALOG_SERIES_CLASS = 'e-quick-dialog-series-event';\n/** @private */\nconst QUICK_DIALOG_FOLLOWING_EVENTS_CLASS = 'e-quick-dialog-following-events';\n/** @private */\nconst FOLLOWING_EVENTS_DIALOG = 'e-following-events-dialog';\n/** @private */\nconst QUICK_DIALOG_DELETE_CLASS = 'e-quick-dialog-delete';\n/** @private */\nconst QUICK_DIALOG_CANCEL_CLASS = 'e-quick-dialog-cancel';\n/** @private */\nconst QUICK_DIALOG_ALERT_OK = 'e-quick-alertok';\n/** @private */\nconst QUICK_DIALOG_ALERT_CANCEL = 'e-quick-alertcancel';\n/** @private */\nconst QUICK_DIALOG_ALERT_FOLLOWING = 'e-quick-alertfollowing';\n/** @private */\nconst QUICK_DIALOG_ALERT_BTN_CLASS = 'e-quick-dialog-alert-btn';\n/** @private */\nconst EVENT_WINDOW_DIALOG_CLASS = 'e-schedule-dialog';\n/** @private */\nconst FORM_CONTAINER_CLASS = 'e-form-container';\n/** @private */\nconst FORM_CLASS = 'e-schedule-form';\n/** @private */\nconst EVENT_WINDOW_ALLDAY_TZ_DIV_CLASS = 'e-all-day-time-zone-row';\n/** @private */\nconst EVENT_WINDOW_ALL_DAY_CLASS = 'e-all-day';\n/** @private */\nconst TIME_ZONE_CLASS = 'e-time-zone';\n/** @private */\nconst TIME_ZONE_ICON_CLASS = 'e-time-zone-icon';\n/** @private */\nconst TIME_ZONE_DETAILS_CLASS = 'e-time-zone-details';\n/** @private */\nconst EVENT_WINDOW_REPEAT_DIV_CLASS = 'e-repeat-parent-row';\n/** @private */\nconst EVENT_WINDOW_REPEAT_CLASS = 'e-repeat';\n/** @private */\nconst EVENT_WINDOW_TITLE_LOCATION_DIV_CLASS = 'e-title-location-row';\n/** @private */\nconst SUBJECT_CLASS = 'e-subject';\n/** @private */\nconst LOCATION_CLASS = 'e-location';\n/** @private */\nconst LOCATION_ICON_CLASS = 'e-location-icon';\n/** @private */\nconst LOCATION_DETAILS_CLASS = 'e-location-details';\n/** @private */\nconst EVENT_WINDOW_START_END_DIV_CLASS = 'e-start-end-row';\n/** @private */\nconst EVENT_WINDOW_START_CLASS = 'e-start';\n/** @private */\nconst EVENT_WINDOW_END_CLASS = 'e-end';\n/** @private */\nconst EVENT_WINDOW_RESOURCES_DIV_CLASS = 'e-resources-row';\n/** @private */\nconst DESCRIPTION_CLASS = 'e-description';\n/** @private */\nconst DESCRIPTION_ICON_CLASS = 'e-description-icon';\n/** @private */\nconst DESCRIPTION_DETAILS_CLASS = 'e-description-details';\n/** @private */\nconst EVENT_WINDOW_TIME_ZONE_DIV_CLASS = 'e-time-zone-row';\n/** @private */\nconst EVENT_WINDOW_START_TZ_CLASS = 'e-start-time-zone';\n/** @private */\nconst EVENT_WINDOW_END_TZ_CLASS = 'e-end-time-zone';\n/** @private */\nconst EVENT_WINDOW_BACK_ICON_CLASS = 'e-back-icon';\n/** @private */\nconst EVENT_WINDOW_SAVE_ICON_CLASS = 'e-save-icon';\n/** @private */\nconst EVENT_WINDOW_CANCEL_BUTTON_CLASS = 'e-event-cancel';\n/** @private */\nconst EVENT_WINDOW_SAVE_BUTTON_CLASS = 'e-event-save';\n/** @private */\nconst EVENT_WINDOW_DIALOG_PARENT_CLASS = 'e-dialog-parent';\n/** @private */\nconst EVENT_WINDOW_TITLE_TEXT_CLASS = 'e-title-text';\n/** @private */\nconst EVENT_WINDOW_ICON_DISABLE_CLASS = 'e-icon-disable';\n/** @private */\nconst EDIT_CLASS = 'e-edit';\n/** @private */\nconst EDIT_ICON_CLASS = 'e-edit-icon';\n/** @private */\nconst DELETE_CLASS = 'e-delete';\n/** @private */\nconst DELETE_ICON_CLASS = 'e-delete-icon';\n/** @private */\nconst CLOSE_CLASS = 'e-close';\n/** @private */\nconst CLOSE_ICON_CLASS = 'e-close-icon';\n/** @private */\nconst ERROR_VALIDATION_CLASS = 'e-schedule-error';\n/** @private */\nconst EVENT_TOOLTIP_ROOT_CLASS = 'e-schedule-event-tooltip';\n/** @private */\nconst ALLDAY_ROW_ANIMATE_CLASS = 'e-animate';\n/** @private */\nconst TIMESCALE_DISABLE = 'e-timescale-disable';\n/** @private */\nconst DISABLE_DATE = 'e-disable-date';\n/** @private */\nconst HIDDEN_CLASS = 'e-hidden';\n/** @private */\nconst DISABLE_DATES = 'e-disable-dates';\n/** @private */\nconst POPUP_WRAPPER_CLASS = 'e-quick-popup-wrapper';\n/** @private */\nconst POPUP_TABLE_CLASS = 'e-popup-table';\n/** @private */\nconst RESOURCE_MENU = 'e-resource-menu';\n/** @private */\nconst RESOURCE_MENU_ICON = 'e-icon-menu';\n/** @private */\nconst RESOURCE_LEVEL_TITLE = 'e-resource-level-title';\n/** @private */\nconst RESOURCE_TREE = 'e-resource-tree';\n/** @private */\nconst RESOURCE_TREE_POPUP_OVERLAY = 'e-resource-tree-popup-overlay';\n/** @private */\nconst RESOURCE_TREE_POPUP = 'e-resource-tree-popup';\n/** @private */\nconst RESOURCE_CLASS = 'e-resource';\n/** @private */\nconst RESOURCE_ICON_CLASS = 'e-resource-icon';\n/** @private */\nconst RESOURCE_DETAILS_CLASS = 'e-resource-details';\n/** @private */\nconst DATE_TIME_ICON_CLASS = 'e-date-time-icon';\n/** @private */\nconst VIRTUAL_SCROLL_CLASS = 'e-virtual-scroll';\n/** @private */\nconst ICON_DISABLE_CLASS = 'e-icon-disable';\n/** @private */\nconst AUTO_HEIGHT = 'e-auto-height';\n/** @private */\nconst IGNORE_WHITESPACE = 'e-ignore-whitespace';\n/** @private */\nconst EVENT_TEMPLATE = 'e-template';\n/** @private */\nconst READ_ONLY = 'e-read-only';\n/** @private */\nconst MONTH_HEADER_WRAPPER = 'e-month-header-wrapper';\n/** @private */\nconst INLINE_SUBJECT_CLASS = 'e-inline-subject';\n/** @private */\nconst INLINE_APPOINTMENT_CLASS = 'e-inline-appointment';\n/** @hidden */\nconst SCROLL_HIDDEN = 'e-scroll-hidden';\n/** @private */\nconst ALLDAY_APPOINTMENT_SCROLL = 'e-all-day-scroll';\n/** @private */\nconst ALLDAY_APPOINTMENT_AUTO = 'e-all-day-auto';\n\n/* eslint-disable @typescript-eslint/no-explicit-any */\n/**\n * Header module\n */\nclass HeaderRenderer {\n    constructor(parent) {\n        this.parent = parent;\n        this.l10n = this.parent.localeObj;\n        this.renderHeader();\n        this.addEventListener();\n    }\n    addEventListener() {\n        this.parent.on(documentClick, this.closeHeaderPopup, this);\n    }\n    removeEventListener() {\n        this.parent.off(documentClick, this.closeHeaderPopup);\n    }\n    closeHeaderPopup(e) {\n        const closestEle = closest(e.event.target, '.e-date-range,.e-header-popup,.e-day,.e-selected');\n        const closestPop = closest(e.event.target, '.e-hor-nav,.e-toolbar-pop');\n        const contentWrap = this.parent.element.querySelector('.' + CONTENT_WRAP_CLASS);\n        if (this.parent.isAdaptive) {\n            if (!isNullOrUndefined(closestPop) && (closestPop.classList.contains('e-toolbar-pop') ||\n                closestPop.classList.contains('e-hor-nav')) && !(closestPop.classList.contains('e-hor-nav') &&\n                this.element.querySelector('.e-toolbar-pop').classList.contains(POPUP_OPEN))) {\n                addClass([contentWrap], SCROLL_HIDDEN);\n            }\n            else {\n                removeClass([contentWrap], SCROLL_HIDDEN);\n                const popupEle = this.element.querySelector('.e-toolbar-pop');\n                if (!isNullOrUndefined(popupEle)) {\n                    const popupObj = popupEle.ej2_instances[0];\n                    if (popupObj && !(!isNullOrUndefined(closestPop) && closestPop.classList.contains('e-hor-nav') &&\n                        popupEle.classList.contains(POPUP_OPEN))) {\n                        popupObj.hide();\n                    }\n                }\n            }\n        }\n        if (!isNullOrUndefined(closestEle)) {\n            return;\n        }\n        this.hideHeaderPopup();\n    }\n    hideHeaderPopup() {\n        if (this.headerPopup) {\n            this.headerPopup.hide();\n        }\n    }\n    renderHeader() {\n        this.element = createElement('div', { className: TOOLBAR_CONTAINER });\n        const toolbarEle = createElement('div', { className: HEADER_TOOLBAR });\n        this.element.appendChild(toolbarEle);\n        this.parent.element.insertBefore(this.element, this.parent.element.firstElementChild);\n        this.renderToolbar();\n    }\n    renderToolbar() {\n        const items = this.getItems();\n        this.parent.trigger(actionBegin, { requestType: 'toolbarItemRendering', items: items }, (args) => {\n            this.toolbarObj = new Toolbar({\n                items: args.items,\n                overflowMode: 'Popup',\n                clicked: this.toolbarClickHandler.bind(this),\n                enableRtl: this.parent.enableRtl,\n                locale: this.parent.locale\n            });\n            this.toolbarObj.appendTo(this.parent.element.querySelector('.' + HEADER_TOOLBAR));\n            const prevNavEle = this.toolbarObj.element.querySelector('.e-prev');\n            if (prevNavEle) {\n                prevNavEle.firstElementChild.setAttribute('title', this.l10n.getConstant('previous'));\n            }\n            const nextNavEle = this.toolbarObj.element.querySelector('.e-next');\n            if (nextNavEle) {\n                nextNavEle.firstElementChild.setAttribute('title', this.l10n.getConstant('next'));\n            }\n            this.updateAddIcon();\n            this.updateActiveView();\n            this.parent.trigger(actionComplete, { requestType: 'toolBarItemRendered', items: this.toolbarObj.items });\n        });\n    }\n    updateItems() {\n        if (this.toolbarObj) {\n            const items = this.getItems();\n            this.parent.trigger(actionBegin, { requestType: 'toolbarItemRendering', items: items }, (args) => {\n                this.toolbarObj.items = args.items;\n                this.toolbarObj.dataBind();\n                this.parent.trigger(actionComplete, { requestType: 'toolBarItemRendered', items: this.toolbarObj.items });\n            });\n        }\n    }\n    getPopUpRelativeElement() {\n        if (this.parent.isAdaptive) {\n            return this.toolbarObj.element;\n        }\n        return this.element.querySelector('.e-date-range');\n    }\n    setDayOfWeek(index) {\n        if (this.headerCalendar) {\n            this.headerCalendar.firstDayOfWeek = index;\n            this.headerCalendar.dataBind();\n        }\n    }\n    setCalendarDate(date) {\n        if (this.headerCalendar) {\n            this.headerCalendar.value = date;\n            this.headerCalendar.dataBind();\n        }\n    }\n    setCalendarMinMaxDate() {\n        if (this.headerCalendar) {\n            this.headerCalendar.min = this.parent.minDate;\n            this.headerCalendar.max = this.parent.maxDate;\n            this.headerCalendar.dataBind();\n        }\n    }\n    getCalendarView() {\n        if (['Month', 'MonthAgenda', 'TimelineMonth'].indexOf(this.parent.currentView) > -1) {\n            return 'Year';\n        }\n        else if (['Year', 'TimelineYear'].indexOf(this.parent.currentView) > -1) {\n            return 'Decade';\n        }\n        else {\n            return 'Month';\n        }\n    }\n    setCalendarView() {\n        if (this.headerCalendar) {\n            const calendarView = this.getCalendarView();\n            this.headerCalendar.depth = calendarView;\n            this.headerCalendar.start = calendarView;\n            this.headerCalendar.refresh();\n        }\n    }\n    updateActiveView() {\n        const selEle = [].slice.call(this.toolbarObj.element.querySelectorAll('.e-views'));\n        removeClass(selEle, ['e-active-view']);\n        if (selEle.length > 0 && selEle[this.parent.viewIndex]) {\n            addClass([selEle[this.parent.viewIndex]], ['e-active-view']);\n        }\n    }\n    updateDateRange(text) {\n        const selEle = this.toolbarObj.element.querySelector('.e-date-range');\n        if (selEle) {\n            selEle.setAttribute('aria-label', text);\n            selEle.querySelector('.e-tbar-btn-text').innerHTML = text;\n            this.refresh();\n        }\n    }\n    refresh() {\n        if (this.toolbarObj) {\n            this.toolbarObj.refreshOverflow();\n        }\n    }\n    updateAddIcon() {\n        const addEle = this.toolbarObj.element.querySelector('.e-add');\n        if (addEle) {\n            if (!this.parent.eventSettings.allowAdding) {\n                addClass([addEle], HIDDEN_CLASS);\n            }\n            else {\n                removeClass([addEle], HIDDEN_CLASS);\n            }\n        }\n    }\n    getDateRangeText() {\n        const dateString = this.parent.globalize.formatDate(this.parent.selectedDate, {\n            format: 'MMMM y', calendar: this.parent.getCalendarMode()\n        });\n        return capitalizeFirstWord(dateString, 'single');\n    }\n    getItems() {\n        const items = [];\n        items.push({\n            align: 'Left', prefixIcon: 'e-icon-prev', tooltipText: 'Previous', overflow: 'Show',\n            cssClass: 'e-prev', htmlAttributes: { 'aria-label': 'previous period', 'role': 'navigation' }\n        });\n        items.push({\n            align: 'Left', prefixIcon: 'e-icon-next', tooltipText: 'Next', overflow: 'Show',\n            cssClass: 'e-next', htmlAttributes: { 'aria-label': 'next period', 'role': 'navigation' }\n        });\n        items.push({\n            align: 'Left', text: this.getDateRangeText(), suffixIcon: 'e-icon-down-arrow', cssClass: 'e-date-range',\n            overflow: 'Show',\n            htmlAttributes: { 'aria-atomic': 'true', 'aria-live': 'assertive', 'aria-label': 'title', 'role': 'navigation' }\n        });\n        if (this.parent.isAdaptive || this.parent.enableAdaptiveUI) {\n            items.push({\n                align: 'Right', showAlwaysInPopup: (this.parent.isAdaptive || this.parent.enableAdaptiveUI), prefixIcon: 'e-icon-add',\n                text: this.l10n.getConstant('newEvent'), cssClass: 'e-add', overflow: 'Show'\n            });\n            items.push({\n                align: 'Right', showAlwaysInPopup: (this.parent.isAdaptive || this.parent.enableAdaptiveUI), prefixIcon: 'e-icon-today',\n                text: this.l10n.getConstant('today'), cssClass: 'e-today', overflow: 'Show'\n            });\n        }\n        else {\n            items.push({\n                align: 'Right', showAlwaysInPopup: (this.parent.isAdaptive || this.parent.enableAdaptiveUI), prefixIcon: 'e-icon-day',\n                text: this.l10n.getConstant('today'), cssClass: 'e-today', overflow: 'Show'\n            });\n            if (this.parent.views.length > 1) {\n                items.push({ align: 'Right', type: 'Separator', cssClass: 'e-schedule-seperator' });\n            }\n        }\n        if (this.parent.views.length > 1) {\n            for (const item of this.parent.views) {\n                items.push(this.getItemObject(item));\n            }\n        }\n        return items;\n    }\n    getItemObject(item) {\n        let viewName;\n        let displayName;\n        if (typeof (item) === 'string') {\n            viewName = item.toLowerCase();\n            displayName = null;\n        }\n        else {\n            viewName = item.option.toLowerCase();\n            displayName = item.displayName;\n        }\n        let view;\n        let orientationClass;\n        const isItemInsidePopup = this.parent.isAdaptive || this.parent.enableAdaptiveUI;\n        switch (viewName) {\n            case 'day':\n                view = {\n                    align: 'Right', showAlwaysInPopup: isItemInsidePopup, prefixIcon: 'e-icon-day',\n                    text: displayName || this.l10n.getConstant('day'), cssClass: 'e-views e-day'\n                };\n                break;\n            case 'week':\n                view = {\n                    align: 'Right', showAlwaysInPopup: isItemInsidePopup, prefixIcon: 'e-icon-week',\n                    text: displayName || this.l10n.getConstant('week'), cssClass: 'e-views e-week'\n                };\n                break;\n            case 'workweek':\n                view = {\n                    align: 'Right', showAlwaysInPopup: isItemInsidePopup, prefixIcon: 'e-icon-workweek',\n                    text: displayName || this.l10n.getConstant('workWeek'), cssClass: 'e-views e-work-week'\n                };\n                break;\n            case 'month':\n                view = {\n                    align: 'Right', showAlwaysInPopup: isItemInsidePopup, prefixIcon: 'e-icon-month',\n                    text: displayName || this.l10n.getConstant('month'), cssClass: 'e-views e-month'\n                };\n                break;\n            case 'year':\n                view = {\n                    align: 'Right', showAlwaysInPopup: isItemInsidePopup, prefixIcon: 'e-icon-year',\n                    text: displayName || this.l10n.getConstant('year'), cssClass: 'e-views e-year'\n                };\n                break;\n            case 'agenda':\n                view = {\n                    align: 'Right', showAlwaysInPopup: isItemInsidePopup, prefixIcon: 'e-icon-agenda',\n                    text: displayName || this.l10n.getConstant('agenda'), cssClass: 'e-views e-agenda'\n                };\n                break;\n            case 'monthagenda':\n                view = {\n                    align: 'Right', showAlwaysInPopup: isItemInsidePopup, prefixIcon: 'e-icon-month-agenda',\n                    text: displayName || this.l10n.getConstant('monthAgenda'), cssClass: 'e-views e-month-agenda'\n                };\n                break;\n            case 'timelineday':\n                view = {\n                    align: 'Right', showAlwaysInPopup: isItemInsidePopup, prefixIcon: 'e-icon-timeline-day',\n                    text: displayName || this.l10n.getConstant('timelineDay'), cssClass: 'e-views e-timeline-day'\n                };\n                break;\n            case 'timelineweek':\n                view = {\n                    align: 'Right', showAlwaysInPopup: isItemInsidePopup, prefixIcon: 'e-icon-timeline-week',\n                    text: displayName || this.l10n.getConstant('timelineWeek'), cssClass: 'e-views e-timeline-week'\n                };\n                break;\n            case 'timelineworkweek':\n                view = {\n                    align: 'Right', showAlwaysInPopup: isItemInsidePopup, prefixIcon: 'e-icon-timeline-workweek',\n                    text: displayName || this.l10n.getConstant('timelineWorkWeek'), cssClass: 'e-views e-timeline-work-week'\n                };\n                break;\n            case 'timelinemonth':\n                view = {\n                    align: 'Right', showAlwaysInPopup: isItemInsidePopup, prefixIcon: 'e-icon-timeline-month',\n                    text: displayName || this.l10n.getConstant('timelineMonth'), cssClass: 'e-views e-timeline-month'\n                };\n                break;\n            case 'timelineyear':\n                orientationClass = (item.orientation === 'Vertical') ? 'vertical' : 'horizontal';\n                view = {\n                    align: 'Right', showAlwaysInPopup: isItemInsidePopup, prefixIcon: 'e-icon-timeline-year-' + orientationClass,\n                    text: displayName || this.l10n.getConstant('timelineYear'), cssClass: 'e-views e-timeline-year'\n                };\n                break;\n        }\n        return view;\n    }\n    renderHeaderPopup() {\n        const headerPopupEle = createElement('div', { className: HEADER_POPUP_CLASS });\n        const headerCalendarEle = createElement('div', { className: HEADER_CALENDAR_CLASS });\n        headerPopupEle.appendChild(headerCalendarEle);\n        this.element.appendChild(headerPopupEle);\n        this.headerPopup = new Popup(headerPopupEle, {\n            actionOnScroll: 'hide',\n            targetType: 'relative',\n            relateTo: this.getPopUpRelativeElement(),\n            position: { X: 'left', Y: 'bottom' },\n            enableRtl: this.parent.enableRtl\n        });\n        const calendarView = this.getCalendarView();\n        this.headerCalendar = new Calendar({\n            value: this.parent.selectedDate,\n            min: this.parent.minDate,\n            max: this.parent.maxDate,\n            firstDayOfWeek: this.parent.activeViewOptions.firstDayOfWeek,\n            enableRtl: this.parent.enableRtl,\n            locale: this.parent.locale,\n            depth: calendarView,\n            start: calendarView,\n            calendarMode: this.parent.calendarMode,\n            change: this.calendarChange.bind(this)\n        });\n        this.setCalendarTimezone();\n        this.headerCalendar.appendTo(headerCalendarEle);\n        this.headerPopup.hide();\n    }\n    calendarChange(args) {\n        if (args.value.getTime() !== this.parent.selectedDate.getTime()) {\n            const calendarDate = resetTime(new Date(args.value));\n            this.parent.changeDate(calendarDate);\n        }\n        this.headerPopup.hide();\n    }\n    setCalendarTimezone() {\n        if (this.headerCalendar) {\n            this.headerCalendar.timezone = this.parent.timezone || this.parent.tzModule.getLocalTimezoneName();\n        }\n    }\n    calculateViewIndex(args) {\n        const target = closest(args.originalEvent.target, '.e-views');\n        const views = [].slice.call(this.element.querySelectorAll('.e-views'));\n        return views.indexOf(target);\n    }\n    toolbarClickHandler(args) {\n        if (!args.item) {\n            return;\n        }\n        const strClass = args.item.cssClass.replace('e-views ', '');\n        let data;\n        let isSameTime;\n        switch (strClass) {\n            case 'e-date-range':\n                if (!this.headerPopup) {\n                    this.renderHeaderPopup();\n                }\n                if (this.headerPopup.element.classList.contains(POPUP_OPEN)) {\n                    this.headerPopup.hide();\n                }\n                else {\n                    this.headerPopup.show();\n                }\n                break;\n            case 'e-day':\n                this.parent.changeView('Day', args.originalEvent, undefined, this.calculateViewIndex(args));\n                break;\n            case 'e-week':\n                this.parent.changeView('Week', args.originalEvent, undefined, this.calculateViewIndex(args));\n                break;\n            case 'e-work-week':\n                this.parent.changeView('WorkWeek', args.originalEvent, undefined, this.calculateViewIndex(args));\n                break;\n            case 'e-month':\n                this.parent.changeView('Month', args.originalEvent, undefined, this.calculateViewIndex(args));\n                break;\n            case 'e-year':\n                this.parent.changeView('Year', args.originalEvent, undefined, this.calculateViewIndex(args));\n                break;\n            case 'e-agenda':\n                this.parent.changeView('Agenda', args.originalEvent, undefined, this.calculateViewIndex(args));\n                break;\n            case 'e-month-agenda':\n                this.parent.changeView('MonthAgenda', args.originalEvent, undefined, this.calculateViewIndex(args));\n                break;\n            case 'e-timeline-day':\n                this.parent.changeView('TimelineDay', args.originalEvent, undefined, this.calculateViewIndex(args));\n                break;\n            case 'e-timeline-week':\n                this.parent.changeView('TimelineWeek', args.originalEvent, undefined, this.calculateViewIndex(args));\n                break;\n            case 'e-timeline-work-week':\n                this.parent.changeView('TimelineWorkWeek', args.originalEvent, undefined, this.calculateViewIndex(args));\n                break;\n            case 'e-timeline-month':\n                this.parent.changeView('TimelineMonth', args.originalEvent, undefined, this.calculateViewIndex(args));\n                break;\n            case 'e-timeline-year':\n                this.parent.changeView('TimelineYear', args.originalEvent, undefined, this.calculateViewIndex(args));\n                break;\n            case 'e-today':\n                if (this.parent.currentView === 'Agenda' || !this.parent.isSelectedDate(resetTime(this.parent.getCurrentTime()))) {\n                    this.parent.changeDate(resetTime(this.parent.getCurrentTime()), args.originalEvent);\n                }\n                break;\n            case 'e-prev':\n                this.parent.changeDate(this.parent.activeView.getNextPreviousDate('previous'), args.originalEvent);\n                break;\n            case 'e-next':\n                this.parent.changeDate(this.parent.activeView.getNextPreviousDate('next'), args.originalEvent);\n                break;\n            case 'e-add':\n                isSameTime = this.parent.activeCellsData.startTime.getTime() === this.parent.activeCellsData.endTime.getTime();\n                if (this.parent.activeCellsData && !isSameTime) {\n                    data = this.parent.activeCellsData;\n                }\n                else {\n                    const interval = this.parent.activeViewOptions.timeScale.interval;\n                    const slotCount = this.parent.activeViewOptions.timeScale.slotCount;\n                    const msInterval = (interval * MS_PER_MINUTE) / slotCount;\n                    const startTime = new Date(this.parent.selectedDate.getTime());\n                    const currentTime = this.parent.getCurrentTime();\n                    startTime.setHours(currentTime.getHours(), (Math.round(startTime.getMinutes() / msInterval) * msInterval), 0);\n                    const endTime = new Date(new Date(startTime.getTime()).setMilliseconds(startTime.getMilliseconds() + msInterval));\n                    data = { startTime: startTime, endTime: endTime, isAllDay: false };\n                }\n                this.parent.eventWindow.openEditor(extend(data, { cancel: false, event: args.originalEvent }), 'Add');\n                break;\n        }\n        if (isNullOrUndefined(this.toolbarObj)) {\n            return;\n        }\n        const toolbarPopUp = this.toolbarObj.element.querySelector('.e-toolbar-pop');\n        if (toolbarPopUp && args.item.type !== 'Input') {\n            toolbarPopUp.ej2_instances[0].hide({ name: 'SlideUp', duration: 100 });\n        }\n    }\n    getHeaderElement() {\n        return this.toolbarObj.element;\n    }\n    updateHeaderItems(classType) {\n        const prevNavEle = this.toolbarObj.element.querySelector('.e-prev');\n        const nextNavEle = this.toolbarObj.element.querySelector('.e-next');\n        const dateRangeEle = this.toolbarObj.element.querySelector('.e-date-range');\n        if (prevNavEle) {\n            if (classType === 'add') {\n                addClass([prevNavEle], HIDDEN_CLASS);\n            }\n            else {\n                removeClass([prevNavEle], HIDDEN_CLASS);\n            }\n        }\n        if (nextNavEle) {\n            if (classType === 'add') {\n                addClass([nextNavEle], HIDDEN_CLASS);\n            }\n            else {\n                removeClass([nextNavEle], HIDDEN_CLASS);\n            }\n        }\n        if (dateRangeEle) {\n            if (classType === 'add') {\n                addClass([dateRangeEle], TEXT_ELLIPSIS);\n            }\n            else {\n                removeClass([dateRangeEle], TEXT_ELLIPSIS);\n            }\n        }\n    }\n    previousNextIconHandler() {\n        const dates = (this.parent.currentView === 'Agenda' ?\n            [this.parent.getCurrentViewDates()[0]] : this.parent.getCurrentViewDates());\n        const prevNavEle = this.toolbarObj.element.querySelector('.' + PREVIOUS_DATE_CLASS);\n        const nextNavEle = this.toolbarObj.element.querySelector('.' + NEXT_DATE_CLASS);\n        let firstDate = new Date(dates[0].getTime());\n        let lastDate = new Date(dates[dates.length - 1].getTime());\n        if (this.parent.currentView === 'WorkWeek' || this.parent.currentView === 'TimelineWorkWeek') {\n            firstDate = getWeekFirstDate(resetTime(this.parent.selectedDate), this.parent.firstDayOfWeek);\n            lastDate = addDays(firstDate, 7 * this.parent.activeViewOptions.interval);\n        }\n        if (this.parent.currentView === 'Month') {\n            firstDate = firstDateOfMonth(this.parent.selectedDate);\n            const lastMonthFirstDate = addMonths(firstDate, this.parent.activeViewOptions.interval - 1);\n            lastDate = lastDateOfMonth(lastMonthFirstDate);\n        }\n        if (!isNullOrUndefined(prevNavEle)) {\n            this.toolbarObj.enableItems(prevNavEle, firstDate > this.parent.minDate);\n        }\n        if (!isNullOrUndefined(nextNavEle)) {\n            this.toolbarObj.enableItems(nextNavEle, lastDate < this.parent.maxDate);\n        }\n        this.setCalendarMinMaxDate();\n    }\n    getModuleName() {\n        return 'headerbar';\n    }\n    destroy() {\n        if (this.headerPopup && !this.headerPopup.isDestroyed) {\n            this.headerPopup.destroy();\n            this.headerPopup = null;\n        }\n        if (this.headerCalendar && !this.headerCalendar.isDestroyed) {\n            this.headerCalendar.destroy();\n            this.headerCalendar = null;\n        }\n        if (this.toolbarObj && !this.toolbarObj.isDestroyed) {\n            this.toolbarObj.destroy();\n            this.removeEventListener();\n            remove(this.element);\n            this.toolbarObj = null;\n        }\n        this.element = null;\n        this.parent = null;\n        this.l10n = null;\n    }\n}\n\n/**\n * `Scroll` module\n */\nclass Scroll {\n    /**\n     * Constructor for the scrolling.\n     *\n     * @param {Schedule} parent Accepts the Schedule instance\n     */\n    constructor(parent) {\n        this.parent = parent;\n        this.addEventListener();\n    }\n    /**\n     * For internal use only - Get the module name.\n     *\n     * @returns {string} Returns the module name.\n     * @private\n     */\n    getModuleName() {\n        return 'scroll';\n    }\n    /**\n     * Internal method to set the element width\n     *\n     * @returns {void}\n     * @private\n     */\n    setWidth() {\n        this.parent.element.style.width = formatUnit(this.parent.width);\n    }\n    /**\n     * Internal method to set the element height\n     *\n     * @returns {void}\n     * @private\n     */\n    setHeight() {\n        this.parent.element.style.height = formatUnit(this.parent.height);\n    }\n    /**\n     * Internal method to bind events\n     *\n     * @returns {void}\n     * @private\n     */\n    addEventListener() {\n        this.parent.on(contentReady, this.setDimensions, this);\n        this.parent.on(uiUpdate, this.onPropertyChanged, this);\n    }\n    /**\n     * Internal method to unbind events\n     *\n     * @returns {void}\n     * @private\n     */\n    removeEventListener() {\n        this.parent.off(contentReady, this.setDimensions);\n        this.parent.off(uiUpdate, this.onPropertyChanged);\n    }\n    /**\n     * Internal method to set the dimensions\n     *\n     * @returns {void}\n     * @private\n     */\n    setDimensions() {\n        this.setWidth();\n        this.setHeight();\n        const data = { cssProperties: this.parent.getCssProperties(), module: this.getModuleName() };\n        this.parent.notify(scrollUiUpdate, data);\n    }\n    /**\n     * Internal method to set the dimensions dynamically\n     *\n     * @returns {void}\n     * @private\n     */\n    onPropertyChanged() {\n        this.setDimensions();\n    }\n    /**\n     * Destroy the scroll module\n     *\n     * @returns {void}\n     * @private\n     */\n    destroy() {\n        this.removeEventListener();\n    }\n}\n\n/**\n * `touch` module is used to handle touch interactions.\n */\nclass ScheduleTouch {\n    constructor(parent) {\n        this.parent = parent;\n        this.element = this.parent.element.querySelector('.' + TABLE_CONTAINER_CLASS);\n        this.touchObj = new Touch(this.element, {\n            scroll: this.scrollHandler.bind(this),\n            swipe: this.swipeHandler.bind(this),\n            tapHold: this.tapHoldHandler.bind(this),\n            swipeSettings: { swipeThresholdDistance: 1 }\n        });\n        EventHandler.add(this.element, 'transitionend', this.onTransitionEnd, this);\n        this.touchLeftDirection = this.parent.enableRtl ? 'Right' : 'Left';\n        this.touchRightDirection = this.parent.enableRtl ? 'Left' : 'Right';\n    }\n    scrollHandler(e) {\n        if (this.parent.currentView === 'Agenda' || this.parent.uiStateValues.action ||\n            (e.originalEvent && (e.originalEvent.target.classList.contains(APPOINTMENT_CLASS) ||\n                closest(e.originalEvent.target, '.' + APPOINTMENT_CLASS)))) {\n            return;\n        }\n        if (!this.timeStampStart) {\n            this.timeStampStart = Date.now();\n        }\n        if (this.element.classList.contains(TRANSLATE_CLASS)) {\n            this.onTransitionEnd();\n        }\n        if (e.scrollDirection === 'Left' || e.scrollDirection === 'Right') {\n            const args = { requestType: 'dateNavigate', cancel: false, event: e.originalEvent };\n            this.parent.trigger(actionBegin, args);\n            if (args.cancel) {\n                return;\n            }\n            const scrollDiv = this.element.querySelector('.' + CONTENT_WRAP_CLASS);\n            if (scrollDiv && scrollDiv.scrollWidth > scrollDiv.clientWidth) {\n                return;\n            }\n            else {\n                this.isScrollTriggered = true;\n                e.originalEvent.preventDefault();\n                e.originalEvent.stopPropagation();\n            }\n        }\n        if (e.scrollDirection === this.touchLeftDirection) {\n            if (!this.nextPanel) {\n                this.renderPanel(NEXT_PANEL_CLASS, 'next');\n                this.nextPanel = {\n                    element: this.parent.activeView.getPanel(),\n                    selectedDate: new Date(this.parent.selectedDate.getTime())\n                };\n                this.setDimensions(this.nextPanel.element);\n            }\n            const x = this.parent.enableRtl ? e.distanceX : -e.distanceX;\n            this.element.style.transform = 'translatex(' + (this.getTranslateX(this.element) + x) + 'px)';\n        }\n        else if (e.scrollDirection === this.touchRightDirection) {\n            let prevWidth = 0;\n            if (!this.previousPanel) {\n                this.renderPanel(PREVIOUS_PANEL_CLASS, 'previous');\n                this.previousPanel = {\n                    element: this.parent.activeView.getPanel(),\n                    selectedDate: new Date(this.parent.selectedDate.getTime())\n                };\n                this.setDimensions(this.previousPanel.element);\n                prevWidth = this.previousPanel.element.offsetWidth;\n            }\n            const x = this.parent.enableRtl ? prevWidth - e.distanceX : -prevWidth + e.distanceX;\n            this.element.style.transform = 'translatex(' + (this.getTranslateX(this.element) + x) + 'px)';\n        }\n    }\n    swipeHandler(e) {\n        if (!this.isScrollTriggered || this.parent.uiStateValues.action) {\n            return;\n        }\n        this.isScrollTriggered = false;\n        const swipeDate = e.swipeDirection === 'Left' ?\n            this.parent.activeView.renderDates[0] : this.parent.activeView.renderDates.slice(-1)[0];\n        if ((e.swipeDirection === 'Left' && swipeDate < this.parent.maxDate) ||\n            (e.swipeDirection === 'Right' && swipeDate >= this.parent.minDate)) {\n            const time = Date.now() - this.timeStampStart;\n            const offsetDist = (e.distanceX * (Browser.isDevice ? 6 : 1.66));\n            if (offsetDist > time || (e.distanceX > (this.parent.element.offsetWidth / 2))) {\n                this.swapPanels(e.swipeDirection);\n                if (offsetDist > time && (e.distanceX > (this.parent.element.offsetWidth / 2))) {\n                    this.element.style.transitionDuration = ((offsetDist / time) / 10) + 's';\n                }\n                this.confirmSwipe(e.swipeDirection);\n            }\n            else {\n                this.cancelSwipe();\n            }\n            const args = { requestType: 'dateNavigate', cancel: false, event: e.originalEvent };\n            this.parent.trigger(actionComplete, args);\n        }\n        else {\n            this.cancelSwipe();\n        }\n        this.timeStampStart = null;\n    }\n    tapHoldHandler(e) {\n        const target = closest(e.originalEvent.target, '.' + APPOINTMENT_CLASS);\n        if (!isNullOrUndefined(target) && this.parent.isAdaptive) {\n            this.parent.quickPopup.tapHoldEventPopup(e.originalEvent);\n            return;\n        }\n    }\n    renderPanel(clsName, nextPrevType) {\n        if (!this.currentPanel) {\n            this.currentPanel = {\n                element: this.parent.activeView.getPanel(),\n                selectedDate: new Date(this.parent.selectedDate.getTime())\n            };\n            this.setDimensions(this.currentPanel.element);\n        }\n        else {\n            this.parent.setProperties({ selectedDate: this.currentPanel.selectedDate }, true);\n        }\n        this.parent.setProperties({ selectedDate: this.parent.activeView.getNextPreviousDate(nextPrevType) }, true);\n        if (this.parent.headerModule) {\n            this.parent.headerModule.setCalendarDate(this.parent.selectedDate);\n        }\n        this.parent.activeView.getRenderDates();\n        this.parent.activeView.renderLayout(clsName);\n    }\n    swapPanels(direction) {\n        if (direction === this.touchLeftDirection) {\n            const temp = this.nextPanel;\n            this.nextPanel = this.currentPanel;\n            this.currentPanel = temp;\n        }\n        else {\n            const temp = this.previousPanel;\n            this.previousPanel = this.currentPanel;\n            this.currentPanel = temp;\n        }\n    }\n    confirmSwipe(swipeDirection) {\n        const previousDate = swipeDirection === this.touchLeftDirection ?\n            this.nextPanel.selectedDate : this.previousPanel.selectedDate;\n        const args = {\n            action: 'date', cancel: false, previousDate: previousDate, currentDate: this.currentPanel.selectedDate\n        };\n        this.parent.trigger(navigating, args, (navArgs) => {\n            if (navArgs.cancel) {\n                this.swapPanels(swipeDirection);\n                this.cancelSwipe();\n            }\n            else {\n                this.parent.activeView.setPanel(this.currentPanel.element);\n                this.parent.setProperties({ selectedDate: this.currentPanel.selectedDate }, true);\n                let translateX;\n                if (this.parent.enableRtl) {\n                    translateX = swipeDirection === this.touchLeftDirection ?\n                        (this.previousPanel ? this.previousPanel.element.offsetLeft : this.currentPanel.element.offsetWidth) : 0;\n                }\n                else {\n                    translateX = swipeDirection === this.touchLeftDirection ? -this.currentPanel.element.offsetLeft : 0;\n                }\n                addClass([this.element], TRANSLATE_CLASS);\n                this.element.style.transform = 'translatex(' + translateX + 'px)';\n                if (this.parent.headerModule) {\n                    this.parent.headerModule.updateDateRange(this.parent.activeView.getDateRangeText());\n                }\n                this.parent.renderTemplates();\n                this.parent.crudModule.refreshDataManager();\n            }\n        });\n    }\n    cancelSwipe() {\n        this.parent.activeView.setPanel(this.currentPanel.element);\n        this.parent.setProperties({ selectedDate: this.currentPanel.selectedDate }, true);\n        this.parent.activeView.getRenderDates();\n        this.parent.activeView.generateColumnLevels();\n        addClass([this.element], TRANSLATE_CLASS);\n        const prevWidth = this.previousPanel ? this.previousPanel.element.offsetWidth : 0;\n        this.element.style.transform = 'translatex(' + (this.parent.enableRtl ? prevWidth : -this.currentPanel.element.offsetLeft) + 'px)';\n    }\n    onTransitionEnd() {\n        removeClass([this.element], TRANSLATE_CLASS);\n        this.element.style.transitionDuration = '';\n        this.element.style.transform = '';\n        if (this.previousPanel) {\n            remove(this.previousPanel.element);\n            this.previousPanel = null;\n            removeClass([this.currentPanel.element], PREVIOUS_PANEL_CLASS);\n            addClass([this.currentPanel.element], CURRENT_PANEL_CLASS);\n        }\n        if (this.nextPanel) {\n            remove(this.nextPanel.element);\n            this.nextPanel = null;\n            removeClass([this.currentPanel.element], NEXT_PANEL_CLASS);\n            addClass([this.currentPanel.element], CURRENT_PANEL_CLASS);\n        }\n        this.currentPanel = null;\n        this.parent.activeView.getPanel().style.width = '';\n    }\n    getTranslateX(element) {\n        const style = window.getComputedStyle(element);\n        return new WebKitCSSMatrix(style.webkitTransform).m41;\n    }\n    setDimensions(element) {\n        element.style.width = (this.parent.element.clientWidth) + 'px';\n    }\n    resetValues() {\n        this.currentPanel = null;\n        this.previousPanel = null;\n        this.nextPanel = null;\n        this.timeStampStart = null;\n        this.element.style.transform = '';\n        removeChildren(this.element);\n        removeClass([this.element], TRANSLATE_CLASS);\n    }\n    destroy() {\n        if (this.touchObj) {\n            this.touchObj.destroy();\n            this.touchObj = null;\n        }\n        EventHandler.remove(this.element, 'transitionend', this.onTransitionEnd);\n        this.resetValues();\n    }\n}\n\n/* eslint-disable @typescript-eslint/no-explicit-any */\n/**\n * Keyboard interaction\n */\nclass KeyboardInteraction {\n    constructor(parent) {\n        this.selectedCells = [];\n        this.keyConfigs = {\n            downArrow: 'downarrow',\n            upArrow: 'uparrow',\n            rightArrow: 'rightarrow',\n            leftArrow: 'leftarrow',\n            shiftDownArrow: 'shift+downarrow',\n            shiftUpArrow: 'shift+uparrow',\n            shiftRightArrow: 'shift+rightarrow',\n            shiftLeftArrow: 'shift+leftarrow',\n            ctrlLeftArrow: 'ctrl+leftarrow',\n            ctrlRightArrow: 'ctrl+rightarrow',\n            altOne: 'alt+1',\n            altTwo: 'alt+2',\n            altThree: 'alt+3',\n            altFour: 'alt+4',\n            altFive: 'alt+5',\n            altSix: 'alt+6',\n            altSeven: 'alt+7',\n            altEight: 'alt+8',\n            altNine: 'alt+9',\n            enter: 'enter',\n            escape: 'escape',\n            delete: 'delete',\n            home: 'home',\n            pageUp: 'pageup',\n            pageDown: 'pagedown',\n            tab: 'tab',\n            shiftTab: 'shift+tab',\n            ctrlShiftUpArrow: 'ctrl+shift+uparrow',\n            ctrlShiftDownArrow: 'ctrl+shift+downarrow',\n            ctrlShiftLeftArrow: 'ctrl+shift+leftarrow',\n            ctrlShiftRightArrow: 'ctrl+shift+rightarrow'\n        };\n        this.parent = parent;\n        this.parent.element.tabIndex = this.parent.element.tabIndex === -1 ? 0 : this.parent.element.tabIndex;\n        this.keyboardModule = new KeyboardEvents(this.parent.element, {\n            keyAction: this.keyActionHandler.bind(this),\n            keyConfigs: this.keyConfigs,\n            eventName: 'keydown'\n        });\n        this.addEventListener();\n    }\n    keyActionHandler(e) {\n        switch (e.action) {\n            case 'downArrow':\n            case 'shiftDownArrow':\n                this.processDown(e, e.shiftKey);\n                break;\n            case 'upArrow':\n            case 'shiftUpArrow':\n                this.processUp(e, e.shiftKey);\n                break;\n            case 'leftArrow':\n            case 'shiftLeftArrow':\n                this.processLeft(e, e.shiftKey);\n                break;\n            case 'rightArrow':\n            case 'shiftRightArrow':\n                this.processRight(e, e.shiftKey);\n                break;\n            case 'ctrlLeftArrow':\n                this.parent.changeDate(this.parent.activeView.getNextPreviousDate('previous'), e);\n                if (this.parent.headerModule) {\n                    this.parent.headerModule.element.querySelector('.e-prev button').focus();\n                }\n                break;\n            case 'ctrlRightArrow':\n                this.parent.changeDate(this.parent.activeView.getNextPreviousDate('next'), e);\n                if (this.parent.headerModule) {\n                    this.parent.headerModule.element.querySelector('.e-next button').focus();\n                }\n                break;\n            case 'altOne':\n            case 'altTwo':\n            case 'altThree':\n            case 'altFour':\n            case 'altFive':\n            case 'altSix':\n            case 'altSeven':\n            case 'altEight':\n            case 'altNine':\n                this.processViewNavigation(e);\n                break;\n            case 'enter':\n                this.processEnter(e);\n                break;\n            case 'home':\n                this.focusFirstCell();\n                break;\n            case 'tab':\n            case 'shiftTab':\n                this.processTab(e, e.shiftKey);\n                break;\n            case 'delete':\n                this.processDelete(e);\n                break;\n            case 'ctrlShiftUpArrow':\n            case 'ctrlShiftDownArrow':\n            case 'ctrlShiftLeftArrow':\n            case 'ctrlShiftRightArrow':\n                this.processCtrlShiftNavigationArrows(e);\n                break;\n            case 'escape':\n                this.processEscape(e);\n        }\n    }\n    addEventListener() {\n        this.parent.on(cellMouseDown, this.onCellMouseDown, this);\n    }\n    removeEventListener() {\n        this.parent.off(cellMouseDown, this.onCellMouseDown);\n    }\n    onCellMouseDown(e) {\n        if (e.event.shiftKey) {\n            return;\n        }\n        this.initialTarget = this.getClosestCell(e.event);\n        if (this.parent.activeViewOptions.readonly || this.parent.currentView === 'MonthAgenda' || !this.initialTarget) {\n            return;\n        }\n        if (e.event.target.classList.contains(WORK_CELLS_CLASS) && e.event.which !== 3) {\n            this.parent.removeSelectedClass();\n            EventHandler.add(this.parent.getContentTable(), 'mousemove', this.onMouseSelection, this);\n            EventHandler.add(this.parent.getContentTable(), 'mouseup', this.onMoveUp, this);\n        }\n        if (e.event.target.classList.contains(ALLDAY_CELLS_CLASS) && e.event.which !== 3) {\n            this.parent.removeSelectedClass();\n            const allDayRow = this.parent.getAllDayRow();\n            EventHandler.add(allDayRow, 'mousemove', this.onMouseSelection, this);\n            EventHandler.add(allDayRow, 'mouseup', this.onMoveUp, this);\n        }\n    }\n    onMouseSelection(e) {\n        const appointments = [].slice.call(this.parent.element.querySelectorAll('.' + APPOINTMENT_CLASS));\n        addClass(appointments, 'e-allow-select');\n        const selectionEdges = this.parent.boundaryValidation(e.pageY, e.pageX);\n        if (selectionEdges.bottom || selectionEdges.top || selectionEdges.left || selectionEdges.right) {\n            const parent = this.parent.element.querySelector('.' + CONTENT_WRAP_CLASS);\n            const yInBounds = parent.offsetHeight <= parent.scrollHeight && parent.scrollTop >= 0 &&\n                parent.scrollTop + parent.offsetHeight <= parent.scrollHeight;\n            const xInBounds = parent.offsetWidth <= parent.scrollWidth && parent.scrollLeft >= 0 &&\n                parent.scrollLeft + parent.offsetWidth <= parent.scrollWidth;\n            if (yInBounds && (selectionEdges.top || selectionEdges.bottom)) {\n                parent.scrollTop += selectionEdges.top ? -e.target.offsetHeight : e.target.offsetHeight;\n            }\n            if (xInBounds && (selectionEdges.left || selectionEdges.right)) {\n                parent.scrollLeft += selectionEdges.left ? -e.target.offsetWidth : e.target.offsetWidth;\n            }\n        }\n        const target = this.getClosestCell(e);\n        if (target) {\n            this.selectCells(true, target);\n        }\n    }\n    getClosestCell(e) {\n        return closest(e.target, '.' + WORK_CELLS_CLASS + ',.' + ALLDAY_CELLS_CLASS);\n    }\n    onMoveUp(e) {\n        const appointments = [].slice.call(this.parent.element.querySelectorAll('.' + APPOINTMENT_CLASS));\n        removeClass(appointments, 'e-allow-select');\n        if (e.target.classList.contains(WORK_CELLS_CLASS)) {\n            EventHandler.remove(this.parent.getContentTable(), 'mousemove', this.onMouseSelection);\n            EventHandler.remove(this.parent.getContentTable(), 'mouseup', this.onMoveUp);\n        }\n        if (e.target.classList.contains(ALLDAY_CELLS_CLASS)) {\n            const allDayRow = this.parent.getAllDayRow();\n            EventHandler.remove(allDayRow, 'mousemove', this.onMouseSelection);\n            EventHandler.remove(allDayRow, 'mouseup', this.onMoveUp);\n        }\n        if (this.isPreventAction(e)) {\n            return;\n        }\n        const queryStr = '.' + WORK_CELLS_CLASS + ',.' + ALLDAY_CELLS_CLASS + ',.' + HEADER_CELLS_CLASS;\n        const target = closest(e.target, queryStr);\n        this.parent.activeCellsData = this.getSelectedElements(target);\n        const cellData = {};\n        if (this.parent.eventWindow) {\n            this.parent.eventWindow.convertToEventData(this.parent.activeCellsData, cellData);\n        }\n        const selectedCells = this.parent.getSelectedElements();\n        const args = {\n            data: cellData, element: this.parent.activeCellsData.element, event: e,\n            requestType: 'cellSelect', showQuickPopup: false\n        };\n        this.parent.trigger(select, args, (selectArgs) => {\n            const isPopupShow = selectArgs.showQuickPopup || this.parent.quickInfoOnSelectionEnd;\n            if (isPopupShow && selectedCells.length > 1) {\n                const cellArgs = extend(this.parent.activeCellsData, { cancel: false, event: e, name: 'cellClick' });\n                this.parent.notify(cellClick, cellArgs);\n            }\n        });\n    }\n    processEnter(e) {\n        if ((this.parent.activeViewOptions.readonly && !e.target.classList.contains(APPOINTMENT_CLASS))\n            || this.isPreventAction(e)) {\n            return;\n        }\n        const target = e.target;\n        if (closest(target, '.' + POPUP_WRAPPER_CLASS)) {\n            if (target.classList.contains(QUICK_POPUP_EVENT_DETAILS_CLASS) ||\n                target.classList.contains(EVENT_CREATE_CLASS) ||\n                target.classList.contains(EDIT_EVENT_CLASS) ||\n                target.classList.contains(DELETE_EVENT_CLASS) ||\n                target.classList.contains(CLOSE_CLASS)) {\n                target.click();\n                e.preventDefault();\n            }\n            else if (target.classList.contains(SUBJECT_CLASS)) {\n                this.parent.element.querySelector('.' + EVENT_CREATE_CLASS).click();\n                e.preventDefault();\n            }\n            return;\n        }\n        if (target.classList.contains(RESOURCE_CELLS_CLASS) && target.classList.contains(RESOURCE_PARENT_CLASS)) {\n            const resourceIcon = target.querySelector('.' + RESOURCE_TREE_ICON_CLASS);\n            if (resourceIcon) {\n                resourceIcon.click();\n            }\n            return;\n        }\n        if (target.classList.contains(WORK_CELLS_CLASS) || target.classList.contains(ALLDAY_CELLS_CLASS)) {\n            this.parent.activeCellsData = this.getSelectedElements(target);\n            const args = extend(this.parent.activeCellsData, { cancel: false, event: e });\n            if (this.parent.allowInline) {\n                const inlineArgs = {\n                    element: args.element,\n                    groupIndex: args.groupIndex, type: 'Cell'\n                };\n                this.parent.notify(inlineClick, inlineArgs);\n            }\n            else {\n                this.parent.notify(cellClick, args);\n            }\n            return;\n        }\n        if (target.classList.contains(INLINE_SUBJECT_CLASS)) {\n            this.parent.inlineModule.inlineCrudActions(target);\n            return;\n        }\n        if (target.classList.contains(APPOINTMENT_CLASS) || target.classList.contains(MORE_EVENT_CLOSE_CLASS) ||\n            target.classList.contains(ALLDAY_APPOINTMENT_SECTION_CLASS) || target.classList.contains(MORE_INDICATOR_CLASS)) {\n            target.click();\n            return;\n        }\n        if (target.classList.contains(MORE_EVENT_HEADER_DATE_CLASS)) {\n            this.parent.setProperties({ selectedDate: this.parent.getDateFromElement(target) }, true);\n            this.parent.changeView(this.parent.getNavigateView(), e);\n            this.processEscape(e);\n            return;\n        }\n    }\n    getSelectedElements(target) {\n        let cellDetails;\n        if (this.selectedCells.length > 1 && target.classList.contains(SELECTED_CELL_CLASS)) {\n            const start = this.parent.getCellDetails(this.selectedCells[0]);\n            const end = this.parent.getCellDetails(this.selectedCells.slice(-1)[0]);\n            start.endTime = end.endTime;\n            start.element = target;\n            cellDetails = start;\n        }\n        else {\n            cellDetails = this.parent.getCellDetails(target);\n        }\n        return cellDetails;\n    }\n    getCells(isInverseTable, start, end) {\n        const tableEle = this.parent.getContentTable();\n        let cells = [].slice.call(tableEle.querySelectorAll('td'));\n        let maxRow = tableEle.rows.length;\n        let maxColumn = tableEle.rows[0].cells.length;\n        if (start && start.classList.contains(ALLDAY_CELLS_CLASS)) {\n            const allDayRow = this.parent.getAllDayRow();\n            cells = [].slice.call(allDayRow.cells);\n            maxRow = 1;\n            maxColumn = allDayRow.cells.length;\n        }\n        let startIndex = cells.indexOf(start);\n        let endIndex = cells.indexOf(end);\n        const inverseCells = [];\n        if (isInverseTable) {\n            for (let i = 0; i < maxColumn; i++) {\n                for (let j = 0; j < maxRow; j++) {\n                    inverseCells.push(cells[maxColumn * j + i]);\n                }\n            }\n            startIndex = inverseCells.indexOf(start);\n            endIndex = inverseCells.indexOf(end);\n        }\n        if (startIndex > endIndex) {\n            const temp = startIndex;\n            startIndex = endIndex;\n            endIndex = temp;\n        }\n        const sCells = isInverseTable ? inverseCells : cells;\n        return sCells.slice(startIndex, endIndex + 1);\n    }\n    focusFirstCell() {\n        if (this.parent.currentView === 'Agenda') {\n            const focusCell = this.parent.getContentTable().querySelector('.' + AGENDA_CELLS_CLASS);\n            focusCell.setAttribute('tabindex', '0');\n            focusCell.focus();\n            return;\n        }\n        this.parent.eventBase.removeSelectedAppointmentClass();\n        if (this.parent.activeView.isTimelineView()) {\n            const cell = this.parent.element.querySelector('.' + CONTENT_TABLE_CLASS +\n                ' tr:not(.' + HIDDEN_CLASS + ') .' + WORK_CELLS_CLASS + ':not(.' + RESOURCE_GROUP_CELLS_CLASS + ')');\n            this.selectCells(false, cell);\n        }\n        else {\n            this.selectCells(false, this.parent.getWorkCellElements()[0]);\n        }\n    }\n    isInverseTableSelect() {\n        return this.parent.activeView.isInverseTableSelect;\n    }\n    /**\n     * Internal method to select cells\n     *\n     * @param {boolean} isMultiple Accepts to select multiple cells or not\n     * @param {HTMLTableCellElement} targetCell Accepts the target cells\n     * @returns {void}\n     * @private\n     */\n    selectCells(isMultiple, targetCell) {\n        this.parent.removeSelectedClass();\n        let target = (targetCell instanceof Array) ? targetCell.slice(-1)[0] : targetCell;\n        if (isMultiple) {\n            let initialId;\n            const views = ['Day', 'Week', 'WorkWeek', 'Month', 'TimelineDay', 'TimelineWeek', 'TimelineWorkWeek', 'TimelineMonth'];\n            const args = { element: targetCell, requestType: 'mousemove', allowMultipleRow: true };\n            this.parent.inlineModule.removeInlineAppointmentElement();\n            this.parent.trigger(select, args, (selectArgs) => {\n                const allowMultipleRow = (!selectArgs.allowMultipleRow) || (!this.parent.allowMultiRowSelection);\n                if (allowMultipleRow && (views.indexOf(this.parent.currentView) > -1)) {\n                    target = target.parentElement.children[this.initialTarget.cellIndex];\n                }\n                let selectedCells = this.getCells(this.isInverseTableSelect(), this.initialTarget, target);\n                if (this.parent.activeViewOptions.group.resources.length > 0) {\n                    initialId = this.initialTarget.getAttribute('data-group-index');\n                    const resourceSelectedCells = [];\n                    for (const cell of selectedCells) {\n                        if (cell.getAttribute('data-group-index') === initialId) {\n                            resourceSelectedCells.push(cell);\n                        }\n                    }\n                    selectedCells = resourceSelectedCells;\n                }\n                if (!this.parent.allowMultiCellSelection) {\n                    selectedCells = [this.initialTarget];\n                }\n                this.selectedCells = selectedCells;\n                if (selectedCells.length > 2 && !target.classList.contains(ALLDAY_CELLS_CLASS)) {\n                    let allDayCells = this.getAllDayCells(selectedCells);\n                    if (this.parent.activeViewOptions.group.resources.length > 0) {\n                        const resourceAllDayCells = [];\n                        for (const cell of allDayCells) {\n                            if (cell.getAttribute('data-group-index') === initialId) {\n                                resourceAllDayCells.push(cell);\n                            }\n                        }\n                        allDayCells = resourceAllDayCells;\n                    }\n                    selectedCells = selectedCells.concat(allDayCells);\n                }\n                if ((target.getAttribute('data-group-index') !== initialId) && this.parent.activeViewOptions.group.resources.length > 0) {\n                    target = this.selectedCells[this.selectedCells.length - 1];\n                }\n                this.parent.addSelectedClass(selectedCells, target);\n            });\n        }\n        else {\n            this.initialTarget = target;\n            this.selectedCells = [target];\n            this.parent.addSelectedClass([target], target);\n        }\n    }\n    selectAppointment(isReverse, target) {\n        const appointments = this.getAppointmentElements();\n        if (appointments.length < 0) {\n            return;\n        }\n        this.parent.eventBase.removeSelectedAppointmentClass();\n        let nextAppEle;\n        if (target.classList.contains(APPOINTMENT_CLASS)) {\n            const targetIndex = appointments.indexOf(target);\n            nextAppEle = appointments[(isReverse ? targetIndex - 1 : targetIndex + 1)];\n        }\n        else {\n            nextAppEle = isReverse ? appointments[appointments.length - 1] : appointments[0];\n        }\n        if (nextAppEle) {\n            this.parent.eventBase.addSelectedAppointments([nextAppEle]);\n            nextAppEle.focus();\n            addClass([nextAppEle], AGENDA_SELECTED_CELL);\n        }\n    }\n    selectAppointmentElementFromWorkCell(isReverse, target) {\n        this.parent.eventBase.removeSelectedAppointmentClass();\n        this.parent.removeSelectedClass();\n        if (target.classList.contains(WORK_CELLS_CLASS) || target.classList.contains(ALLDAY_CELLS_CLASS)) {\n            const appointmentElements = this.getUniqueAppointmentElements();\n            const filteredElements = [];\n            const selectedDate = this.parent.getDateFromElement(target).getTime();\n            const selectedSeriesEvents = this.parent.eventsProcessed.filter((eventObject) => {\n                return (!isReverse ? (eventObject[this.parent.eventFields.startTime].getTime() >= selectedDate) :\n                    (eventObject[this.parent.eventFields.startTime].getTime() <= selectedDate));\n            });\n            selectedSeriesEvents.filter((event) => {\n                appointmentElements.filter((element) => {\n                    if (JSON.stringify(event.Guid) === JSON.stringify(element.getAttribute('data-guid'))) {\n                        filteredElements.push(element);\n                    }\n                });\n            });\n            if (filteredElements.length > 0) {\n                const selectedElement = isReverse ? filteredElements[filteredElements.length - 1] : filteredElements[0];\n                const focusElements = this.getAppointmentElementsByGuid(selectedElement.getAttribute('data-guid'));\n                this.parent.eventBase.addSelectedAppointments(focusElements);\n                (focusElements[focusElements.length - 1]).focus();\n            }\n        }\n    }\n    getAllDayCells(cells) {\n        const allDayRow = this.parent.getAllDayRow();\n        if (!allDayRow) {\n            return [];\n        }\n        const startCell = cells[0];\n        const endCell = cells[cells.length - 1];\n        const start = this.parent.getCellDetails(startCell);\n        const end = this.parent.getCellDetails(endCell);\n        if (end.endTime.getTime() - start.startTime.getTime() >= MS_PER_DAY) {\n            const allDayCells = [].slice.call(allDayRow.cells);\n            return allDayCells.slice(startCell.cellIndex, endCell.cellIndex + 1);\n        }\n        return [];\n    }\n    getAppointmentElements() {\n        return [].slice.call(this.parent.element.querySelectorAll('.' + APPOINTMENT_CLASS));\n    }\n    getAppointmentElementsByGuid(guid) {\n        return [].slice.call(this.parent.element.querySelectorAll('div[data-guid=\"' + guid + '\"]'));\n    }\n    getUniqueAppointmentElements() {\n        const appointments = this.getAppointmentElements();\n        const appointmentElements = [];\n        appointments.map((value) => value.getAttribute('data-guid')).filter((value, index, self) => {\n            if (self.indexOf(value) === index) {\n                appointmentElements.push(appointments[index]);\n            }\n        });\n        return appointmentElements;\n    }\n    getWorkCellFromAppointmentElement(target) {\n        const selectedObject = this.parent.eventBase.getEventByGuid(target.getAttribute('data-guid'));\n        return this.parent.eventBase.selectWorkCellByTime([selectedObject]);\n    }\n    processViewNavigation(e) {\n        const index = parseInt(e.key, 10) - 1;\n        if (index < this.parent.views.length) {\n            const view = this.parent.viewCollections[index].option;\n            this.parent.changeView(view, e, undefined, index);\n            if (this.parent.headerModule) {\n                this.parent.headerModule.element.querySelector('.e-active-view button').focus();\n            }\n        }\n    }\n    processUp(e, isMultiple) {\n        if ((isMultiple && (this.parent.activeView.isTimelineView() || this.parent.currentView === 'MonthAgenda'))) {\n            return;\n        }\n        let target = (e.target);\n        const selectedElements = this.parent.getSelectedElements();\n        const selectedEventElements = this.parent.eventBase.getSelectedAppointments();\n        const moreEventWrapper = this.parent.element.querySelector('.' + MORE_POPUP_WRAPPER_CLASS);\n        const quickPopupWrapper = this.getQuickPopupElement();\n        if (selectedElements.length > 0 && !e.target.classList.contains(WORK_CELLS_CLASS)) {\n            target = selectedElements[selectedElements.length - 1];\n        }\n        if (selectedEventElements.length > 0 && !moreEventWrapper.classList.contains(POPUP_OPEN) &&\n            !quickPopupWrapper.classList.contains(POPUP_OPEN) &&\n            ['Day', 'Week', 'WorkWeek', 'Month'].indexOf(this.parent.currentView) !== -1) {\n            target = this.getWorkCellFromAppointmentElement(selectedEventElements[selectedEventElements.length - 1]);\n            this.parent.eventBase.removeSelectedAppointmentClass();\n        }\n        if (!target) {\n            return;\n        }\n        if (target.classList.contains(WORK_CELLS_CLASS) && !this.parent.element.querySelector('.' + POPUP_OPEN)) {\n            const tableRows = this.parent.getTableRows();\n            const curRowIndex = tableRows.indexOf(target.parentElement);\n            if (curRowIndex > 0 && curRowIndex < tableRows.length) {\n                this.selectCells(isMultiple, (tableRows[curRowIndex - 1]).cells[target.cellIndex]);\n            }\n        }\n        else if (this.parent.currentView === 'Agenda' || this.parent.currentView === 'MonthAgenda') {\n            this.selectAppointment(true, target);\n        }\n    }\n    processDown(e, isMultiple) {\n        if (isMultiple && (this.parent.activeView.isTimelineView() || this.parent.currentView === 'MonthAgenda')) {\n            return;\n        }\n        let target = (e.target);\n        const selectedCells = this.parent.getSelectedElements();\n        const selectedElements = this.parent.eventBase.getSelectedAppointments();\n        const moreEventWrapper = this.parent.element.querySelector('.' + MORE_POPUP_WRAPPER_CLASS);\n        const quickPopupWrapper = this.getQuickPopupElement();\n        if (selectedCells.length > 0 && !e.target.classList.contains(WORK_CELLS_CLASS)) {\n            target = selectedCells[selectedCells.length - 1];\n        }\n        if (selectedElements.length > 0 && !moreEventWrapper.classList.contains(POPUP_OPEN) &&\n            !quickPopupWrapper.classList.contains(POPUP_OPEN) &&\n            ['Day', 'Week', 'WorkWeek', 'Month'].indexOf(this.parent.currentView) !== -1) {\n            target = this.getWorkCellFromAppointmentElement(selectedElements[selectedElements.length - 1]);\n            this.parent.eventBase.removeSelectedAppointmentClass();\n        }\n        const tableRows = this.parent.getTableRows();\n        if (!target) {\n            return;\n        }\n        if (target.classList.contains(WORK_CELLS_CLASS) && !this.parent.element.querySelector('.' + POPUP_OPEN)) {\n            const curRowIndex = tableRows.indexOf(target.parentElement);\n            if (curRowIndex >= 0 && curRowIndex < tableRows.length - 1) {\n                this.selectCells(isMultiple, (tableRows[curRowIndex + 1]).cells[target.cellIndex]);\n            }\n        }\n        else if (this.parent.currentView === 'Agenda' || this.parent.currentView === 'MonthAgenda') {\n            this.selectAppointment(false, target);\n        }\n    }\n    processLeftRight(target) {\n        const tableEle = this.parent.getContentTable();\n        const curRowIndex = target.parentNode.sectionRowIndex;\n        const key = {\n            element: tableEle,\n            rowIndex: curRowIndex,\n            columnIndex: target.cellIndex,\n            maxIndex: tableEle.rows[curRowIndex].cells.length\n        };\n        return key;\n    }\n    getQuickPopupElement() {\n        return (this.parent.isAdaptive ? document.body : this.parent.element).querySelector('.' + POPUP_WRAPPER_CLASS);\n    }\n    isCancelLeftRightAction(e, isMultiple) {\n        if (this.parent.currentView === 'Agenda' || (isMultiple && this.parent.currentView === 'MonthAgenda')) {\n            return true;\n        }\n        if (this.isPreventAction(e) && isMultiple) {\n            return true;\n        }\n        const moreEventWrapper = this.parent.element.querySelector('.' + MORE_POPUP_WRAPPER_CLASS);\n        const quickPopupWrapper = this.getQuickPopupElement();\n        if (moreEventWrapper.classList.contains(POPUP_OPEN) || quickPopupWrapper.classList.contains(POPUP_OPEN)) {\n            return true;\n        }\n        return false;\n    }\n    processRight(e, isMultiple) {\n        if (this.isCancelLeftRightAction(e, isMultiple)) {\n            return;\n        }\n        const selectedCells = this.parent.getSelectedElements();\n        let targetCell;\n        const selectedAppointments = this.parent.eventBase.getSelectedAppointments();\n        let target = (e.target);\n        if (selectedCells.length > 0 && !target.classList.contains(WORK_CELLS_CLASS) &&\n            !target.classList.contains(ALLDAY_CELLS_CLASS)) {\n            target = selectedCells[selectedCells.length - 1];\n        }\n        if (selectedAppointments.length > 0) {\n            target = this.getWorkCellFromAppointmentElement(selectedAppointments[selectedAppointments.length - 1]);\n            this.parent.eventBase.removeSelectedAppointmentClass();\n            if (!target) {\n                return;\n            }\n        }\n        if (target.classList.contains(WORK_CELLS_CLASS) &&\n            (e.target).classList.contains(WORK_CELLS_CLASS)) {\n            const key = this.processLeftRight(target);\n            if (key.columnIndex >= 0 && key.columnIndex < key.maxIndex - 1) {\n                targetCell = this.calculateNextPrevDate(target, key.element.rows[key.rowIndex].cells[target.cellIndex + 1], 'right');\n                if (!isNullOrUndefined(targetCell)) {\n                    this.selectCells(isMultiple, targetCell);\n                }\n            }\n            else if (key.columnIndex === key.maxIndex - 1) {\n                if (!this.isInverseTableSelect() && key.rowIndex < key.element.rows.length - 1) {\n                    targetCell = this.calculateNextPrevDate(target, key.element.rows[key.rowIndex + 1].cells[0], 'right');\n                    if (!isNullOrUndefined(targetCell)) {\n                        this.selectCells(isMultiple, targetCell);\n                    }\n                }\n                else if (!isMultiple) {\n                    const rowIndex = this.isInverseTableSelect() ? key.rowIndex : 0;\n                    this.parent.changeDate(this.parent.activeView.getNextPreviousDate('next'), e);\n                    const tableEle = this.parent.getContentTable();\n                    this.selectCells(false, tableEle.rows[rowIndex].cells[0]);\n                }\n            }\n        }\n        else if (target.classList.contains(ALLDAY_CELLS_CLASS)) {\n            const curColIndex = target.cellIndex;\n            const allDayRow = this.parent.getAllDayRow();\n            const maxColIndex = allDayRow.cells.length;\n            if (curColIndex >= 0 && curColIndex < maxColIndex - 1) {\n                this.selectCells(isMultiple, allDayRow.cells[curColIndex + 1]);\n            }\n            else if (curColIndex === maxColIndex - 1 && !isMultiple) {\n                this.parent.changeDate(this.parent.activeView.getNextPreviousDate('next'), e);\n                const allDayRow = this.parent.getAllDayRow();\n                this.selectCells(false, allDayRow.cells[0]);\n            }\n        }\n    }\n    processLeft(e, isMultiple) {\n        if (this.isCancelLeftRightAction(e, isMultiple)) {\n            return;\n        }\n        let target = (e.target);\n        const selectedCells = this.parent.getSelectedElements();\n        let targetCell;\n        if (selectedCells.length > 0 && !target.classList.contains(WORK_CELLS_CLASS) &&\n            !target.classList.contains(ALLDAY_CELLS_CLASS)) {\n            target = selectedCells[selectedCells.length - 1];\n        }\n        const selectedElements = this.parent.eventBase.getSelectedAppointments();\n        if (selectedElements.length > 0) {\n            target = this.getWorkCellFromAppointmentElement(selectedElements[selectedElements.length - 1]);\n            this.parent.eventBase.removeSelectedAppointmentClass();\n            if (!target) {\n                return;\n            }\n        }\n        if ((e.target).classList.contains(WORK_CELLS_CLASS) &&\n            target.classList.contains(WORK_CELLS_CLASS)) {\n            const key = this.processLeftRight(target);\n            if (key.columnIndex > 0 && key.columnIndex < key.maxIndex) {\n                targetCell = this.calculateNextPrevDate(target, key.element.rows[key.rowIndex].cells[target.cellIndex - 1], 'left');\n                if (!isNullOrUndefined(targetCell)) {\n                    this.selectCells(isMultiple, targetCell);\n                }\n            }\n            else if (key.columnIndex === 0) {\n                if (!this.isInverseTableSelect() && key.rowIndex > 0) {\n                    targetCell = this.calculateNextPrevDate(target, key.element.rows[key.rowIndex - 1].cells[key.maxIndex - 1], 'left');\n                    if (!isNullOrUndefined(targetCell)) {\n                        this.selectCells(isMultiple, targetCell);\n                    }\n                }\n                else if (!isMultiple) {\n                    this.parent.changeDate(this.parent.activeView.getNextPreviousDate('previous'), e);\n                    const tableEle = this.parent.getContentTable();\n                    const rowIndex = this.isInverseTableSelect() ? key.rowIndex : tableEle.rows.length - 1;\n                    this.selectCells(false, tableEle.rows[rowIndex].cells[key.maxIndex - 1]);\n                }\n            }\n        }\n        else if (target.classList.contains(ALLDAY_CELLS_CLASS)) {\n            const curColIndex = target.cellIndex;\n            const allDayRow = this.parent.getAllDayRow();\n            const maxColIndex = allDayRow.cells.length;\n            if (curColIndex > 0 && curColIndex < maxColIndex) {\n                this.selectCells(isMultiple, allDayRow.cells[curColIndex - 1]);\n            }\n            else if (curColIndex === 0 && !isMultiple) {\n                this.parent.changeDate(this.parent.activeView.getNextPreviousDate('previous'), e);\n                const allDayRow = this.parent.getAllDayRow();\n                this.selectCells(false, allDayRow.cells[maxColIndex - 1]);\n            }\n        }\n    }\n    calculateNextPrevDate(currentCell, target, type) {\n        const initialId = this.initialTarget.getAttribute('data-group-index');\n        if (this.parent.activeViewOptions.group.resources.length > 0 && this.parent.currentView === 'Month') {\n            if (currentCell && target && target.getAttribute('data-group-index') !== initialId) {\n                const currentDate = this.parent.getDateFromElement(currentCell);\n                const nextPrevDate = (type === 'right') ? new Date(currentDate.setDate(currentDate.getDate() + 1))\n                    : new Date(currentDate.setDate(currentDate.getDate() - 1));\n                target = [].slice.call(this.parent.element.querySelectorAll('td[data-date=\"'\n                    + nextPrevDate.getTime().toString() + '\"]' + '[data-group-index=\"' + initialId + '\"]'))[0];\n            }\n        }\n        return target;\n    }\n    getFocusableElements(container) {\n        const queryString = 'a[href]:not([tabindex=\"-1\"]),input:not([disabled]):not([tabindex=\"-1\"]),' +\n            'textarea:not([disabled]):not([tabindex=\"-1\"]),button:not([disabled]):not([tabindex=\"-1\"]),' +\n            'select:not([disabled]):not([tabindex=\"-1\"]),[tabindex]:not([tabindex=\"-1\"]),[contentEditable=true]:not([tabindex=\"-1\"])';\n        return [].slice.call(container.querySelectorAll(queryString));\n    }\n    processTabOnPopup(e, popupElement) {\n        let focusableElements = this.getFocusableElements(popupElement);\n        focusableElements = focusableElements.filter((element) => {\n            const footerEle = this.parent.element.querySelector('.' + POPUP_FOOTER_CLASS);\n            if (footerEle && footerEle.offsetParent) {\n                return !(element.classList.contains(EDIT_CLASS) || element.classList.contains(DELETE_CLASS));\n            }\n            else {\n                return !(element.classList.contains(EDIT_EVENT_CLASS) || element.classList.contains(DELETE_EVENT_CLASS));\n            }\n        });\n        const firstEle = focusableElements[0];\n        const lastEle = focusableElements[focusableElements.length - 1];\n        if (!isNullOrUndefined(lastEle) && document.activeElement === lastEle && !e.shiftKey) {\n            e.preventDefault();\n            firstEle.focus();\n        }\n        if (!isNullOrUndefined(firstEle) && document.activeElement === firstEle && e.shiftKey) {\n            e.preventDefault();\n            lastEle.focus();\n        }\n    }\n    processTab(e, isReverse) {\n        let target = e.target;\n        const popupWrapper = closest(target, '.' + POPUP_WRAPPER_CLASS + ',.' + MORE_POPUP_WRAPPER_CLASS);\n        if (popupWrapper && popupWrapper.classList.contains(POPUP_OPEN)) {\n            if (popupWrapper.classList.contains(MORE_POPUP_WRAPPER_CLASS)) {\n                this.parent.eventBase.removeSelectedAppointmentClass();\n            }\n            this.processTabOnPopup(e, popupWrapper);\n            return;\n        }\n        if (target.classList.contains(ROOT)) {\n            this.parent.eventBase.removeSelectedAppointmentClass();\n            return;\n        }\n        if (target.classList.contains(RESOURCE_CELLS_CLASS) && this.parent.activeView.isTimelineView()\n            && this.parent.activeViewOptions.group.resources.length > 0) {\n            const index = parseInt(target.getAttribute('data-group-index'), 10);\n            const appSelector = `.${APPOINTMENT_CLASS}[data-group-index=\"${isReverse ? index - 1 : index}\"]`;\n            const appElements = [].slice.call(this.parent.element.querySelectorAll(appSelector));\n            if (appElements.length > 0) {\n                this.parent.eventBase.removeSelectedAppointmentClass();\n                const focusAppointment = isReverse ? appElements.slice(-1)[0] : appElements[0];\n                this.parent.eventBase.addSelectedAppointments([focusAppointment]);\n                focusAppointment.focus();\n                e.preventDefault();\n            }\n            else if (index + 1 === this.parent.resourceBase.lastResourceLevel.length) {\n                this.parent.element.focus();\n                e.preventDefault();\n            }\n            else if (this.parent.virtualScrollModule) {\n                const virtual = this.parent.element.querySelector('.' + VIRTUAL_TRACK_CLASS);\n                const averageRowHeight = Math.round(virtual.offsetHeight / this.parent.resourceBase.expandedResources.length);\n                this.parent.element.querySelector('.e-content-wrap').scrollTop = ((isReverse ? index - 1 : index + 1) * averageRowHeight);\n                this.parent.virtualScrollModule.virtualScrolling();\n            }\n            else {\n                this.setScrollPosition(index);\n            }\n            return;\n        }\n        if (target.classList.contains(APPOINTMENT_CLASS)) {\n            let appElements = [].slice.call(this.parent.element.querySelectorAll('.' + APPOINTMENT_CLASS));\n            if (this.parent.activeView.isTimelineView() && this.parent.activeViewOptions.group.resources.length > 0) {\n                const index = parseInt(target.getAttribute('data-group-index'), 10);\n                appElements = [].slice.call(this.parent.element.querySelectorAll(`.${APPOINTMENT_CLASS}[data-group-index=\"${index}\"]`));\n                const resCellSelector = `.${RESOURCE_CELLS_CLASS}[data-group-index=\"${isReverse ? index : index + 1}\"]`;\n                const resourceCell = this.parent.element.querySelector(resCellSelector);\n                if (resourceCell && (isReverse && target.getAttribute('data-guid') === appElements[0].getAttribute('data-guid') ||\n                    !isReverse && target.getAttribute('data-guid') === appElements.slice(-1)[0].getAttribute('data-guid'))) {\n                    this.parent.eventBase.removeSelectedAppointmentClass();\n                    if (this.parent.virtualScrollModule) {\n                        resourceCell.focus({ preventScroll: true });\n                    }\n                    else {\n                        resourceCell.focus();\n                    }\n                    if (this.parent.activeView.isTimelineView() && this.parent.activeViewOptions.group.resources.length > 0 &&\n                        isNullOrUndefined(this.parent.virtualScrollModule)) {\n                        this.setScrollPosition(index);\n                    }\n                    e.preventDefault();\n                    return;\n                }\n            }\n            const selectedAppointments = this.parent.eventBase.getSelectedAppointments();\n            if (selectedAppointments.length > 0) {\n                target = selectedAppointments[selectedAppointments.length - 1];\n            }\n            this.parent.eventBase.removeSelectedAppointmentClass();\n            if (!isReverse && target.getAttribute('data-guid') === appElements[appElements.length - 1].getAttribute('data-guid') ||\n                isReverse && target.getAttribute('data-guid') === appElements[0].getAttribute('data-guid')) {\n                return;\n            }\n            if (this.parent.currentView === 'Agenda' || this.parent.currentView === 'MonthAgenda') {\n                this.selectAppointment(isReverse, target);\n                e.preventDefault();\n            }\n            return;\n        }\n        const selectedCells = this.parent.getSelectedElements();\n        if (selectedCells.length > 0 && !target.classList.contains(APPOINTMENT_CLASS)) {\n            target = selectedCells[selectedCells.length - 1];\n            this.selectAppointmentElementFromWorkCell(isReverse, target);\n            e.preventDefault();\n            return;\n        }\n        if (target && !target.classList.contains(RESOURCE_CELLS_CLASS) && this.parent.activeView.isTimelineView()\n            && this.parent.activeViewOptions.group.resources.length > 0) {\n            this.processTabOnResourceCells(target, isReverse);\n        }\n    }\n    // eslint-disable-next-line @typescript-eslint/no-unused-vars\n    processDelete(e) {\n        let activeEle = document.activeElement;\n        if (this.parent.currentView === 'MonthAgenda') {\n            const selectedEle = this.parent.eventBase.getSelectedEvents().element;\n            activeEle = ((selectedEle && isNullOrUndefined(selectedEle.length)) ? selectedEle : selectedEle[0]);\n        }\n        if (activeEle && activeEle.classList.contains(APPOINTMENT_CLASS)) {\n            addClass([activeEle], APPOINTMENT_BORDER);\n            this.parent.activeEventData = this.parent.eventBase.getSelectedEvents();\n            if (this.parent.activeViewOptions.readonly || activeEle.classList.contains(READ_ONLY) ||\n                !this.parent.eventSettings.allowDeleting) {\n                return;\n            }\n            this.parent.quickPopup.deleteClick(e);\n        }\n    }\n    processCtrlShiftNavigationArrows(e) {\n        if (this.parent.activeViewOptions.group.resources.length > 0 && document.activeElement.classList.contains(APPOINTMENT_CLASS)) {\n            const groupIndex = parseInt(document.activeElement.getAttribute('data-group-index'), 10);\n            let index = (e.action === 'ctrlShiftLeftArrow' || e.action === 'ctrlShiftUpArrow') ? groupIndex - 1 : groupIndex + 1;\n            index = index < 0 ? 0 : index > this.parent.resourceBase.lastResourceLevel.length ?\n                this.parent.resourceBase.lastResourceLevel.length : index;\n            let eventEle = [];\n            while (eventEle.length === 0 && index >= 0 && index <= this.parent.resourceBase.lastResourceLevel.length) {\n                eventEle = [].slice.call(this.parent.element.querySelectorAll(`.${APPOINTMENT_CLASS}[data-group-index=\"${index}\"]`));\n                index = (e.action === 'ctrlShiftLeftArrow' || e.action === 'ctrlShiftUpArrow') ? index - 1 : index + 1;\n            }\n            const nextAppEle = eventEle[0];\n            if (nextAppEle) {\n                this.parent.eventBase.removeSelectedAppointmentClass();\n                this.parent.eventBase.addSelectedAppointments([nextAppEle]);\n                nextAppEle.focus();\n            }\n        }\n        else if (this.parent.activeViewOptions.group.resources.length > 0 &&\n            !document.activeElement.classList.contains(APPOINTMENT_CLASS)) {\n            const index = this.parent.resourceBase.renderedResources[0].groupIndex;\n            const appSelector = `.${APPOINTMENT_CLASS}[data-group-index=\"${index}\"]`;\n            const appElements = [].slice.call(this.parent.element.querySelectorAll(appSelector));\n            if (appElements.length > 0) {\n                this.parent.eventBase.removeSelectedAppointmentClass();\n                const focusAppointment = appElements[0];\n                this.parent.eventBase.addSelectedAppointments([focusAppointment]);\n                focusAppointment.focus();\n                e.preventDefault();\n            }\n        }\n    }\n    processEscape(event) {\n        this.parent.quickPopup.onClosePopup(event);\n        this.parent.quickPopup.morePopup.hide();\n        if (this.parent.headerModule) {\n            this.parent.headerModule.hideHeaderPopup();\n        }\n        if (this.parent.inlineModule) {\n            this.parent.inlineModule.removeInlineAppointmentElement();\n        }\n    }\n    isPreventAction(e) {\n        const target = closest(e.target, '.' + RESOURCE_GROUP_CELLS_CLASS);\n        if (this.parent.activeView.isTimelineView() && !isNullOrUndefined(target)) {\n            return true;\n        }\n        return false;\n    }\n    processTabOnResourceCells(target, isReverse) {\n        const tabElements = [].slice.call(this.parent.element.querySelectorAll('[tabIndex=\"0\"]'));\n        const currentTabIndex = tabElements.indexOf(target);\n        const nextTabElement = !isReverse ? tabElements[currentTabIndex + 1] : tabElements[currentTabIndex - 1];\n        if (nextTabElement && nextTabElement.classList.contains(RESOURCE_CELLS_CLASS)) {\n            const groupIndex = parseInt(nextTabElement.getAttribute('data-group-index'), 10);\n            if (this.parent.virtualScrollModule) {\n                const resColWrap = this.parent.element.querySelector('.' + RESOURCE_COLUMN_WRAP_CLASS);\n                const resCells = [].slice.call(this.parent.element.querySelectorAll('.' + RESOURCE_CELLS_CLASS));\n                resCells.forEach((element) => {\n                    if (element.getBoundingClientRect().top < resColWrap.getBoundingClientRect().top) {\n                        element.setAttribute('tabindex', '-1');\n                    }\n                });\n            }\n            else {\n                this.setScrollPosition(groupIndex);\n            }\n        }\n    }\n    setScrollPosition(index) {\n        const workCell = this.parent.element.querySelector(`.${WORK_CELLS_CLASS}[data-group-index=\"${index}\"]`);\n        if (workCell) {\n            this.parent.element.querySelector('.' + CONTENT_WRAP_CLASS).scrollTop = workCell.offsetTop;\n        }\n    }\n    /**\n     * Get module name.\n     *\n     * @returns {string} Returns the module name.\n     */\n    getModuleName() {\n        return 'keyboard';\n    }\n    /**\n     * To destroy the keyboard module.\n     *\n     * @returns {void}\n     * @private\n     */\n    destroy() {\n        this.removeEventListener();\n        this.keyboardModule.destroy();\n    }\n}\n\n/* eslint-disable @typescript-eslint/no-explicit-any */\n/**\n * data module is used to generate query and data source.\n *\n * @private\n */\nclass Data {\n    /**\n     * Constructor for data module\n     *\n     * @param {Object | DataManager} dataSource Accepts the datasource as JSON objects or DataManager\n     * @param {Query} query Accepts the query to process the data\n     * @private\n     */\n    constructor(dataSource, query) {\n        this.initDataManager(dataSource, query);\n    }\n    /**\n     * The function used to initialize dataManager and query\n     *\n     * @param {Object | DataManager} dataSource Accepts the datasource as JSON objects or DataManager\n     * @param {Query} query Accepts the query to process the data\n     * @returns {void}\n     * @private\n     */\n    initDataManager(dataSource, query) {\n        this.dataManager = dataSource instanceof DataManager ? dataSource : new DataManager(dataSource);\n        this.query = query instanceof Query ? query : new Query();\n    }\n    /**\n     * The function used to generate updated Query from schedule model\n     *\n     * @param {Date} startDate Accepts the start date\n     * @param {Date} endDate Accepts the end date\n     * @returns {void}\n     * @private\n     */\n    generateQuery(startDate, endDate) {\n        const query = this.query.clone();\n        if (startDate) {\n            query.addParams('StartDate', startDate.toISOString());\n        }\n        if (endDate) {\n            query.addParams('EndDate', endDate.toISOString());\n        }\n        return query;\n    }\n    /**\n     * The function used to get dataSource by executing given Query\n     *\n     * @param  {Query} query - A Query that specifies to generate dataSource\n     * @returns {void}\n     * @private\n     */\n    getData(query) {\n        return this.dataManager.executeQuery(query);\n    }\n    /**\n     * To destroy the crud module.\n     *\n     * @returns {void}\n     * @private\n     */\n    destroy() {\n        this.dataManager = null;\n        this.query = null;\n    }\n}\n\n/* eslint-disable @typescript-eslint/no-explicit-any */\n/** @private */\nclass Gregorian {\n    firstDateOfMonth(date) {\n        return new Date(date.getFullYear(), date.getMonth());\n    }\n    lastDateOfMonth(dt) {\n        return new Date(dt.getFullYear(), dt.getMonth() + 1, 0);\n    }\n    isMonthStart(date) {\n        return (date.getDate() === 1);\n    }\n    getLeapYearDaysCount() {\n        return 366;\n    }\n    getYearDaysCount(date, interval) {\n        return ((date.getFullYear() + interval) % 4 === 0) ? 366 : 365;\n    }\n    getDate(date) {\n        return date.getDate();\n    }\n    getMonth(date) {\n        return (date.getMonth() + 1);\n    }\n    getFullYear(date) {\n        return date.getFullYear();\n    }\n    getYearLastDate(date, interval) {\n        return new Date(date.getFullYear() + interval, 0, 0);\n    }\n    getMonthDaysCount(date) {\n        return this.lastDateOfMonth(date).getDate();\n    }\n    getMonthStartDate(date) {\n        return new Date(date.getFullYear(), date.getMonth(), 1, date.getHours(), date.getMinutes());\n    }\n    getMonthEndDate(date) {\n        date.setDate(1);\n        return new Date(date.setMonth(date.getMonth() + 1));\n    }\n    getExpectedDays(date, days) {\n        return days;\n    }\n    setDate(dateObj, date) {\n        dateObj.setDate(date);\n    }\n    setValidDate(date, interval, startDate, monthValue, beginDate) {\n        if (!isNullOrUndefined(beginDate)) {\n            date.setMonth((beginDate ? monthValue : date.getMonth()) + interval);\n        }\n        else {\n            date.setMonth(date.getMonth() + interval, startDate);\n        }\n    }\n    setMonth(date, interval, startDate) {\n        date.setFullYear(date.getFullYear());\n        date.setMonth(interval - 1);\n        date.setDate(startDate);\n    }\n    addYears(date, interval) {\n        date.setFullYear(date.getFullYear() + interval);\n    }\n    isSameMonth(date1, date2) {\n        return (date1.getMonth() === date2.getMonth());\n    }\n    checkMonth(date, months) {\n        return (months.indexOf(date.getMonth() + 1) === -1);\n    }\n    compareMonth(date1, date2) {\n        return (date1.getMonth() > date2.getMonth());\n    }\n    isSameYear(date1, date2) {\n        return (date1.getFullYear() === date2.getFullYear());\n    }\n    isLastMonth(date) {\n        return (date.getMonth() === 11);\n    }\n    isLeapYear(year, interval) {\n        return ((year + interval) % 4 === 0);\n    }\n}\n/** @private */\nclass Islamic {\n    firstDateOfMonth(date) {\n        const hDate = this.getHijriDate(date);\n        const gDate = HijriParser.toGregorian(hDate.year, hDate.month, 1);\n        return gDate;\n    }\n    lastDateOfMonth(date) {\n        const hDate = this.getHijriDate(date);\n        const daysInMonth = this.getDaysInMonth(hDate.month, hDate.year);\n        const gDate = HijriParser.toGregorian(hDate.year, hDate.month, daysInMonth);\n        let finalGDate = new Date(gDate.getTime());\n        finalGDate = new Date(finalGDate.setDate(finalGDate.getDate() + 1));\n        let finalHDate = this.getHijriDate(finalGDate);\n        if (hDate.month === finalHDate.month) {\n            return finalGDate;\n        }\n        finalHDate = this.getHijriDate(gDate);\n        if (hDate.month === finalHDate.month) {\n            return gDate;\n        }\n        return new Date(gDate.setDate(gDate.getDate() - 1));\n    }\n    isMonthStart(date) {\n        const hijriDate = this.getHijriDate(date);\n        return (hijriDate.date === 1);\n    }\n    getLeapYearDaysCount() {\n        return 355;\n    }\n    getYearDaysCount(date, interval) {\n        const hDate = this.getHijriDate(date);\n        return this.isLeapYear(hDate.year, interval) ? 355 : 354;\n    }\n    getDate(date) {\n        const hijriDate = this.getHijriDate(date);\n        return hijriDate.date;\n    }\n    getMonth(date) {\n        const hDate = this.getHijriDate(date);\n        return hDate.month;\n    }\n    getFullYear(date) {\n        const hDate = this.getHijriDate(date);\n        return hDate.year;\n    }\n    getYearLastDate(date, interval) {\n        const hDate = this.getHijriDate(date);\n        const gDate = HijriParser.toGregorian(hDate.year + interval, 1, 0);\n        return gDate;\n    }\n    getMonthDaysCount(date) {\n        const maxDate = this.lastDateOfMonth(date);\n        const hijriDate = this.getHijriDate(maxDate);\n        return hijriDate.date;\n    }\n    getMonthStartDate(date) {\n        const firstDate = this.firstDateOfMonth(date);\n        return new Date(firstDate.getFullYear(), firstDate.getMonth(), firstDate.getDate(), date.getHours(), date.getMinutes());\n    }\n    getMonthEndDate(date) {\n        const lastDate = this.lastDateOfMonth(date);\n        lastDate.setDate(lastDate.getDate() + 1);\n        return new Date(lastDate.setMonth(lastDate.getMonth()));\n    }\n    getExpectedDays(date, days) {\n        const hDate = this.getHijriDate(date);\n        const day = [];\n        for (let i = 0; i < days.length; i++) {\n            const gDate = HijriParser.toGregorian(hDate.year, hDate.month, days[i]);\n            day.push(gDate.getDate());\n        }\n        return day;\n    }\n    setDate(dateObj, date) {\n        const hDate = this.getHijriDate(dateObj);\n        const gDate = HijriParser.toGregorian(hDate.year, hDate.month, date);\n        this.updateDateObj(dateObj, gDate);\n    }\n    setValidDate(date, interval, startDate, monthValue, beginDate) {\n        const firstDate = (!isNullOrUndefined(beginDate)) ? this.firstDateOfMonth(beginDate) : date;\n        const hDate = this.getHijriDate(firstDate);\n        const gDate = HijriParser.toGregorian(hDate.year, hDate.month + interval, startDate);\n        this.updateDateObj(date, gDate);\n    }\n    setMonth(date, interval, startDate) {\n        const hDate = this.getHijriDate(date);\n        const gDate = HijriParser.toGregorian(hDate.year, interval, startDate);\n        this.updateDateObj(date, gDate);\n    }\n    addYears(date, interval, monthValue) {\n        const hDate = this.getHijriDate(date);\n        const gDate = HijriParser.toGregorian(hDate.year + interval, monthValue, 1);\n        this.updateDateObj(date, gDate);\n    }\n    isSameMonth(date1, date2) {\n        const currentHijri = this.getHijriDate(date1);\n        const tempHijri = this.getHijriDate(date2);\n        return (currentHijri.month === tempHijri.month);\n    }\n    checkMonth(date, months) {\n        const hDate = this.getHijriDate(date);\n        return (months.indexOf(hDate.month) === -1);\n    }\n    compareMonth(date1, date2) {\n        const hDate = this.getHijriDate(date1);\n        const hDate1 = this.getHijriDate(date2);\n        return (hDate.month > hDate1.month);\n    }\n    isSameYear(date1, date2) {\n        const hDate = this.getHijriDate(date1);\n        const hDate1 = this.getHijriDate(date2);\n        return (hDate.year === hDate1.year);\n    }\n    isLastMonth(date) {\n        const hDate = this.getHijriDate(date);\n        return (hDate.month === 12);\n    }\n    updateDateObj(date, gDate) {\n        date.setFullYear(gDate.getFullYear(), gDate.getMonth(), gDate.getDate());\n    }\n    isLeapYear(year, interval) {\n        return (14 + 11 * (year + interval)) % 30 < 11;\n    }\n    getDaysInMonth(month, year) {\n        let length = 0;\n        length = 29 + ((month + 1) % 2);\n        if (month === 11 && this.isLeapYear(year, 0)) {\n            length++;\n        }\n        return length;\n    }\n    getHijriDate(date) {\n        return HijriParser.getHijriDate(date);\n    }\n}\n\n/**\n * Time zone\n */\nclass Timezone {\n    constructor() {\n        this.timezoneData = [];\n        this.timezoneData = this.getTimezoneData();\n    }\n    offset(date, timezone) {\n        const localOffset = date.getTimezoneOffset();\n        try {\n            const convertedDate = new Date(date.toLocaleString('en-US', { timeZone: timezone }));\n            if (!isNaN(convertedDate.getTime())) {\n                return ((date.getTime() - convertedDate.getTime()) / 60000) + localOffset;\n            }\n            return 0;\n        }\n        catch (error) {\n            return 0;\n        }\n    }\n    convert(date, fromOffset, toOffset) {\n        if (typeof fromOffset === 'string') {\n            fromOffset = this.offset(date, fromOffset);\n        }\n        if (typeof toOffset === 'string') {\n            toOffset = this.offset(date, toOffset);\n        }\n        const fromLocalOffset = date.getTimezoneOffset();\n        date = new Date(date.getTime() + (fromOffset - toOffset) * 60000);\n        const toLocalOffset = date.getTimezoneOffset();\n        return new Date(date.getTime() + (toLocalOffset - fromLocalOffset) * 60000);\n    }\n    add(date, timezone) {\n        return this.convert(date, date.getTimezoneOffset(), timezone);\n    }\n    remove(date, timezone) {\n        return this.convert(date, timezone, date.getTimezoneOffset());\n    }\n    removeLocalOffset(date) {\n        return new Date(date.getTime() - (date.getTimezoneOffset() * 60000));\n    }\n    getLocalTimezoneName() {\n        return window.Intl ? Intl.DateTimeFormat().resolvedOptions().timeZone || 'UTC' : 'UTC';\n    }\n    getTimezoneData() {\n        return timezoneData;\n    }\n}\nconst timezoneData = [\n    { Value: 'Pacific/Niue', Text: '(UTC-11:00) Niue' },\n    { Value: 'Pacific/Pago_Pago', Text: '(UTC-11:00) Pago Pago' },\n    { Value: 'Pacific/Honolulu', Text: '(UTC-10:00) Hawaii Time' },\n    { Value: 'Pacific/Rarotonga', Text: '(UTC-10:00) Rarotonga' },\n    { Value: 'Pacific/Tahiti', Text: '(UTC-10:00) Tahiti' },\n    { Value: 'Pacific/Marquesas', Text: '(UTC-09:30) Marquesas' },\n    { Value: 'America/Anchorage', Text: '(UTC-09:00) Alaska Time' },\n    { Value: 'Pacific/Gambier', Text: '(UTC-09:00) Gambier' },\n    { Value: 'America/Los_Angeles', Text: '(UTC-08:00) Pacific Time' },\n    { Value: 'America/Tijuana', Text: '(UTC-08:00) Pacific Time - Tijuana' },\n    { Value: 'America/Vancouver', Text: '(UTC-08:00) Pacific Time - Vancouver' },\n    { Value: 'America/Whitehorse', Text: '(UTC-08:00) Pacific Time - Whitehorse' },\n    { Value: 'Pacific/Pitcairn', Text: '(UTC-08:00) Pitcairn' },\n    { Value: 'America/Denver', Text: '(UTC-07:00) Mountain Time' },\n    { Value: 'America/Phoenix', Text: '(UTC-07:00) Mountain Time - Arizona' },\n    { Value: 'America/Mazatlan', Text: '(UTC-07:00) Mountain Time - Chihuahua, Mazatlan' },\n    { Value: 'America/Dawson_Creek', Text: '(UTC-07:00) Mountain Time - Dawson Creek' },\n    { Value: 'America/Edmonton', Text: '(UTC-07:00) Mountain Time - Edmonton' },\n    { Value: 'America/Hermosillo', Text: '(UTC-07:00) Mountain Time - Hermosillo' },\n    { Value: 'America/Yellowknife', Text: '(UTC-07:00) Mountain Time - Yellowknife' },\n    { Value: 'America/Belize', Text: '(UTC-06:00) Belize' },\n    { Value: 'America/Chicago', Text: '(UTC-06:00) Central Time' },\n    { Value: 'America/Mexico_City', Text: '(UTC-06:00) Central Time - Mexico City' },\n    { Value: 'America/Regina', Text: '(UTC-06:00) Central Time - Regina' },\n    { Value: 'America/Tegucigalpa', Text: '(UTC-06:00) Central Time - Tegucigalpa' },\n    { Value: 'America/Winnipeg', Text: '(UTC-06:00) Central Time - Winnipeg' },\n    { Value: 'America/Costa_Rica', Text: '(UTC-06:00) Costa Rica' },\n    { Value: 'America/El_Salvador', Text: '(UTC-06:00) El Salvador' },\n    { Value: 'Pacific/Galapagos', Text: '(UTC-06:00) Galapagos' },\n    { Value: 'America/Guatemala', Text: '(UTC-06:00) Guatemala' },\n    { Value: 'America/Managua', Text: '(UTC-06:00) Managua' },\n    { Value: 'America/Cancun', Text: '(UTC-05:00) America Cancun' },\n    { Value: 'America/Bogota', Text: '(UTC-05:00) Bogota' },\n    { Value: 'Pacific/Easter', Text: '(UTC-05:00) Easter Island' },\n    { Value: 'America/New_York', Text: '(UTC-05:00) Eastern Time' },\n    { Value: 'America/Iqaluit', Text: '(UTC-05:00) Eastern Time - Iqaluit' },\n    { Value: 'America/Toronto', Text: '(UTC-05:00) Eastern Time - Toronto' },\n    { Value: 'America/Guayaquil', Text: '(UTC-05:00) Guayaquil' },\n    { Value: 'America/Havana', Text: '(UTC-05:00) Havana' },\n    { Value: 'America/Jamaica', Text: '(UTC-05:00) Jamaica' },\n    { Value: 'America/Lima', Text: '(UTC-05:00) Lima' },\n    { Value: 'America/Nassau', Text: '(UTC-05:00) Nassau' },\n    { Value: 'America/Panama', Text: '(UTC-05:00) Panama' },\n    { Value: 'America/Port-au-Prince', Text: '(UTC-05:00) Port-au-Prince' },\n    { Value: 'America/Rio_Branco', Text: '(UTC-05:00) Rio Branco' },\n    { Value: 'America/Halifax', Text: '(UTC-04:00) Atlantic Time - Halifax' },\n    { Value: 'America/Barbados', Text: '(UTC-04:00) Barbados' },\n    { Value: 'Atlantic/Bermuda', Text: '(UTC-04:00) Bermuda' },\n    { Value: 'America/Boa_Vista', Text: '(UTC-04:00) Boa Vista' },\n    { Value: 'America/Caracas', Text: '(UTC-04:00) Caracas' },\n    { Value: 'America/Curacao', Text: '(UTC-04:00) Curacao' },\n    { Value: 'America/Grand_Turk', Text: '(UTC-04:00) Grand Turk' },\n    { Value: 'America/Guyana', Text: '(UTC-04:00) Guyana' },\n    { Value: 'America/La_Paz', Text: '(UTC-04:00) La Paz' },\n    { Value: 'America/Manaus', Text: '(UTC-04:00) Manaus' },\n    { Value: 'America/Martinique', Text: '(UTC-04:00) Martinique' },\n    { Value: 'America/Port_of_Spain', Text: '(UTC-04:00) Port of Spain' },\n    { Value: 'America/Porto_Velho', Text: '(UTC-04:00) Porto Velho' },\n    { Value: 'America/Puerto_Rico', Text: '(UTC-04:00) Puerto Rico' },\n    { Value: 'America/Santo_Domingo', Text: '(UTC-04:00) Santo Domingo' },\n    { Value: 'America/Thule', Text: '(UTC-04:00) Thule' },\n    { Value: 'America/St_Johns', Text: '(UTC-03:30) Newfoundland Time - St. Johns' },\n    { Value: 'America/Araguaina', Text: '(UTC-03:00) Araguaina' },\n    { Value: 'America/Asuncion', Text: '(UTC-03:00) Asuncion' },\n    { Value: 'America/Belem', Text: '(UTC-03:00) Belem' },\n    { Value: 'America/Argentina/Buenos_Aires', Text: '(UTC-03:00) Buenos Aires' },\n    { Value: 'America/Campo_Grande', Text: '(UTC-03:00) Campo Grande' },\n    { Value: 'America/Cayenne', Text: '(UTC-03:00) Cayenne' },\n    { Value: 'America/Cuiaba', Text: '(UTC-03:00) Cuiaba' },\n    { Value: 'America/Fortaleza', Text: '(UTC-03:00) Fortaleza' },\n    { Value: 'America/Godthab', Text: '(UTC-03:00) Godthab' },\n    { Value: 'America/Maceio', Text: '(UTC-03:00) Maceio' },\n    { Value: 'America/Miquelon', Text: '(UTC-03:00) Miquelon' },\n    { Value: 'America/Montevideo', Text: '(UTC-03:00) Montevideo' },\n    { Value: 'Antarctica/Palmer', Text: '(UTC-03:00) Palmer' },\n    { Value: 'America/Paramaribo', Text: '(UTC-03:00) Paramaribo' },\n    { Value: 'America/Punta_Arenas', Text: '(UTC-03:00) Punta Arenas' },\n    { Value: 'America/Recife', Text: '(UTC-03:00) Recife' },\n    { Value: 'Antarctica/Rothera', Text: '(UTC-03:00) Rothera' },\n    { Value: 'America/Bahia', Text: '(UTC-03:00) Salvador' },\n    { Value: 'America/Santiago', Text: '(UTC-03:00) Santiago' },\n    { Value: 'Atlantic/Stanley', Text: '(UTC-03:00) Stanley' },\n    { Value: 'America/Noronha', Text: '(UTC-02:00) Noronha' },\n    { Value: 'America/Sao_Paulo', Text: '(UTC-02:00) Sao Paulo' },\n    { Value: 'Atlantic/South_Georgia', Text: '(UTC-02:00) South Georgia' },\n    { Value: 'Atlantic/Azores', Text: '(UTC-01:00) Azores' },\n    { Value: 'Atlantic/Cape_Verde', Text: '(UTC-01:00) Cape Verde' },\n    { Value: 'America/Scoresbysund', Text: '(UTC-01:00) Scoresbysund' },\n    { Value: 'Africa/Abidjan', Text: '(UTC+00:00) Abidjan' },\n    { Value: 'Africa/Accra', Text: '(UTC+00:00) Accra' },\n    { Value: 'Africa/Bissau', Text: '(UTC+00:00) Bissau' },\n    { Value: 'Atlantic/Canary', Text: '(UTC+00:00) Canary Islands' },\n    { Value: 'Africa/Casablanca', Text: '(UTC+00:00) Casablanca' },\n    { Value: 'America/Danmarkshavn', Text: '(UTC+00:00) Danmarkshavn' },\n    { Value: 'Europe/Dublin', Text: '(UTC+00:00) Dublin' },\n    { Value: 'Africa/El_Aaiun', Text: '(UTC+00:00) El Aaiun' },\n    { Value: 'Atlantic/Faroe', Text: '(UTC+00:00) Faeroe' },\n    { Value: 'Etc/UTC', Text: '(UTC+00:00) UTC (no daylight saving)' },\n    { Value: 'Europe/Lisbon', Text: '(UTC+00:00) Lisbon' },\n    { Value: 'Europe/London', Text: '(UTC+00:00) London' },\n    { Value: 'Africa/Monrovia', Text: '(UTC+00:00) Monrovia' },\n    { Value: 'Atlantic/Reykjavik', Text: '(UTC+00:00) Reykjavik' },\n    { Value: 'UTC', Text: 'UTC' },\n    { Value: 'Africa/Algiers', Text: '(UTC+01:00) Algiers' },\n    { Value: 'Europe/Amsterdam', Text: '(UTC+01:00) Amsterdam' },\n    { Value: 'Europe/Andorra', Text: '(UTC+01:00) Andorra' },\n    { Value: 'Europe/Berlin', Text: '(UTC+01:00) Berlin' },\n    { Value: 'Europe/Brussels', Text: '(UTC+01:00) Brussels' },\n    { Value: 'Europe/Budapest', Text: '(UTC+01:00) Budapest' },\n    { Value: 'Europe/Belgrade', Text: '(UTC+01:00) Central European Time - Belgrade' },\n    { Value: 'Europe/Prague', Text: '(UTC+01:00) Central European Time - Prague' },\n    { Value: 'Africa/Ceuta', Text: '(UTC+01:00) Ceuta' },\n    { Value: 'Europe/Copenhagen', Text: '(UTC+01:00) Copenhagen' },\n    { Value: 'Europe/Gibraltar', Text: '(UTC+01:00) Gibraltar' },\n    { Value: 'Africa/Lagos', Text: '(UTC+01:00) Lagos' },\n    { Value: 'Europe/Luxembourg', Text: '(UTC+01:00) Luxembourg' },\n    { Value: 'Europe/Madrid', Text: '(UTC+01:00) Madrid' },\n    { Value: 'Europe/Malta', Text: '(UTC+01:00) Malta' },\n    { Value: 'Europe/Monaco', Text: '(UTC+01:00) Monaco' },\n    { Value: 'Africa/Ndjamena', Text: '(UTC+01:00) Ndjamena' },\n    { Value: 'Europe/Oslo', Text: '(UTC+01:00) Oslo' },\n    { Value: 'Europe/Paris', Text: '(UTC+01:00) Paris' },\n    { Value: 'Europe/Rome', Text: '(UTC+01:00) Rome' },\n    { Value: 'Europe/Stockholm', Text: '(UTC+01:00) Stockholm' },\n    { Value: 'Europe/Tirane', Text: '(UTC+01:00) Tirane' },\n    { Value: 'Africa/Tunis', Text: '(UTC+01:00) Tunis' },\n    { Value: 'Europe/Vienna', Text: '(UTC+01:00) Vienna' },\n    { Value: 'Europe/Warsaw', Text: '(UTC+01:00) Warsaw' },\n    { Value: 'Europe/Zurich', Text: '(UTC+01:00) Zurich' },\n    { Value: 'Asia/Amman', Text: '(UTC+02:00) Amman' },\n    { Value: 'Europe/Athens', Text: '(UTC+02:00) Athens' },\n    { Value: 'Asia/Beirut', Text: '(UTC+02:00) Beirut' },\n    { Value: 'Europe/Bucharest', Text: '(UTC+02:00) Bucharest' },\n    { Value: 'Africa/Cairo', Text: '(UTC+02:00) Cairo' },\n    { Value: 'Europe/Chisinau', Text: '(UTC+02:00) Chisinau' },\n    { Value: 'Asia/Damascus', Text: '(UTC+02:00) Damascus' },\n    { Value: 'Asia/Gaza', Text: '(UTC+02:00) Gaza' },\n    { Value: 'Europe/Helsinki', Text: '(UTC+02:00) Helsinki' },\n    { Value: 'Asia/Jerusalem', Text: '(UTC+02:00) Jerusalem' },\n    { Value: 'Africa/Johannesburg', Text: '(UTC+02:00) Johannesburg' },\n    { Value: 'Africa/Khartoum', Text: '(UTC+02:00) Khartoum' },\n    { Value: 'Europe/Kiev', Text: '(UTC+02:00) Kiev' },\n    { Value: 'Africa/Maputo', Text: '(UTC+02:00) Maputo' },\n    { Value: 'Europe/Kaliningrad', Text: '(UTC+02:00) Moscow-01 - Kaliningrad' },\n    { Value: 'Asia/Nicosia', Text: '(UTC+02:00) Nicosia' },\n    { Value: 'Europe/Riga', Text: '(UTC+02:00) Riga' },\n    { Value: 'Europe/Sofia', Text: '(UTC+02:00) Sofia' },\n    { Value: 'Europe/Tallinn', Text: '(UTC+02:00) Tallinn' },\n    { Value: 'Africa/Tripoli', Text: '(UTC+02:00) Tripoli' },\n    { Value: 'Europe/Vilnius', Text: '(UTC+02:00) Vilnius' },\n    { Value: 'Africa/Windhoek', Text: '(UTC+02:00) Windhoek' },\n    { Value: 'Asia/Baghdad', Text: '(UTC+03:00) Baghdad' },\n    { Value: 'Europe/Istanbul', Text: '(UTC+03:00) Istanbul' },\n    { Value: 'Europe/Minsk', Text: '(UTC+03:00) Minsk' },\n    { Value: 'Europe/Moscow', Text: '(UTC+03:00) Moscow+00 - Moscow' },\n    { Value: 'Africa/Nairobi', Text: '(UTC+03:00) Nairobi' },\n    { Value: 'Asia/Qatar', Text: '(UTC+03:00) Qatar' },\n    { Value: 'Asia/Riyadh', Text: '(UTC+03:00) Riyadh' },\n    { Value: 'Antarctica/Syowa', Text: '(UTC+03:00) Syowa' },\n    { Value: 'Asia/Tehran', Text: '(UTC+03:30) Tehran' },\n    { Value: 'Asia/Baku', Text: '(UTC+04:00) Baku' },\n    { Value: 'Asia/Dubai', Text: '(UTC+04:00) Dubai' },\n    { Value: 'Indian/Mahe', Text: '(UTC+04:00) Mahe' },\n    { Value: 'Indian/Mauritius', Text: '(UTC+04:00) Mauritius' },\n    { Value: 'Europe/Samara', Text: '(UTC+04:00) Moscow+01 - Samara' },\n    { Value: 'Indian/Reunion', Text: '(UTC+04:00) Reunion' },\n    { Value: 'Asia/Tbilisi', Text: '(UTC+04:00) Tbilisi' },\n    { Value: 'Asia/Yerevan', Text: '(UTC+04:00) Yerevan' },\n    { Value: 'Asia/Kabul', Text: '(UTC+04:30) Kabul' },\n    { Value: 'Asia/Aqtau', Text: '(UTC+05:00) Aqtau' },\n    { Value: 'Asia/Aqtobe', Text: '(UTC+05:00) Aqtobe' },\n    { Value: 'Asia/Ashgabat', Text: '(UTC+05:00) Ashgabat' },\n    { Value: 'Asia/Dushanbe', Text: '(UTC+05:00) Dushanbe' },\n    { Value: 'Asia/Karachi', Text: '(UTC+05:00) Karachi' },\n    { Value: 'Indian/Kerguelen', Text: '(UTC+05:00) Kerguelen' },\n    { Value: 'Indian/Maldives', Text: '(UTC+05:00) Maldives' },\n    { Value: 'Antarctica/Mawson', Text: '(UTC+05:00) Mawson' },\n    { Value: 'Asia/Yekaterinburg', Text: '(UTC+05:00) Moscow+02 - Yekaterinburg' },\n    { Value: 'Asia/Tashkent', Text: '(UTC+05:00) Tashkent' },\n    { Value: 'Asia/Colombo', Text: '(UTC+05:30) Colombo' },\n    { Value: 'Asia/Kolkata', Text: '(UTC+05:30) India Standard Time' },\n    { Value: 'Asia/Katmandu', Text: '(UTC+05:45) Katmandu' },\n    { Value: 'Asia/Almaty', Text: '(UTC+06:00) Almaty' },\n    { Value: 'Asia/Bishkek', Text: '(UTC+06:00) Bishkek' },\n    { Value: 'Indian/Chagos', Text: '(UTC+06:00) Chagos' },\n    { Value: 'Asia/Dhaka', Text: '(UTC+06:00) Dhaka' },\n    { Value: 'Asia/Omsk', Text: '(UTC+06:00) Moscow+03 - Omsk' },\n    { Value: 'Asia/Thimphu', Text: '(UTC+06:00) Thimphu' },\n    { Value: 'Antarctica/Vostok', Text: '(UTC+06:00) Vostok' },\n    { Value: 'Indian/Cocos', Text: '(UTC+06:30) Cocos' },\n    { Value: 'Asia/Yangon', Text: '(UTC+06:30) Rangoon' },\n    { Value: 'Asia/Bangkok', Text: '(UTC+07:00) Bangkok' },\n    { Value: 'Indian/Christmas', Text: '(UTC+07:00) Christmas' },\n    { Value: 'Antarctica/Davis', Text: '(UTC+07:00) Davis' },\n    { Value: 'Asia/Saigon', Text: '(UTC+07:00) Hanoi' },\n    { Value: 'Asia/Hovd', Text: '(UTC+07:00) Hovd' },\n    { Value: 'Asia/Jakarta', Text: '(UTC+07:00) Jakarta' },\n    { Value: 'Asia/Krasnoyarsk', Text: '(UTC+07:00) Moscow+04 - Krasnoyarsk' },\n    { Value: 'Asia/Brunei', Text: '(UTC+08:00) Brunei' },\n    { Value: 'Asia/Shanghai', Text: '(UTC+08:00) China Time - Beijing' },\n    { Value: 'Asia/Choibalsan', Text: '(UTC+08:00) Choibalsan' },\n    { Value: 'Asia/Hong_Kong', Text: '(UTC+08:00) Hong Kong' },\n    { Value: 'Asia/Kuala_Lumpur', Text: '(UTC+08:00) Kuala Lumpur' },\n    { Value: 'Asia/Macau', Text: '(UTC+08:00) Macau' },\n    { Value: 'Asia/Makassar', Text: '(UTC+08:00) Makassar' },\n    { Value: 'Asia/Manila', Text: '(UTC+08:00) Manila' },\n    { Value: 'Asia/Irkutsk', Text: '(UTC+08:00) Moscow+05 - Irkutsk' },\n    { Value: 'Asia/Singapore', Text: '(UTC+08:00) Singapore' },\n    { Value: 'Asia/Taipei', Text: '(UTC+08:00) Taipei' },\n    { Value: 'Asia/Ulaanbaatar', Text: '(UTC+08:00) Ulaanbaatar' },\n    { Value: 'Australia/Perth', Text: '(UTC+08:00) Western Time - Perth' },\n    { Value: 'Asia/Pyongyang', Text: '(UTC+08:30) Pyongyang' },\n    { Value: 'Asia/Dili', Text: '(UTC+09:00) Dili' },\n    { Value: 'Asia/Jayapura', Text: '(UTC+09:00) Jayapura' },\n    { Value: 'Asia/Yakutsk', Text: '(UTC+09:00) Moscow+06 - Yakutsk' },\n    { Value: 'Pacific/Palau', Text: '(UTC+09:00) Palau' },\n    { Value: 'Asia/Seoul', Text: '(UTC+09:00) Seoul' },\n    { Value: 'Asia/Tokyo', Text: '(UTC+09:00) Tokyo' },\n    { Value: 'Australia/Darwin', Text: '(UTC+09:30) Central Time - Darwin' },\n    { Value: 'Antarctica/DumontDUrville', Text: '(UTC+10:00) Dumont D\"Urville' },\n    { Value: 'Australia/Brisbane', Text: '(UTC+10:00) Eastern Time - Brisbane' },\n    { Value: 'Pacific/Guam', Text: '(UTC+10:00) Guam' },\n    { Value: 'Asia/Vladivostok', Text: '(UTC+10:00) Moscow+07 - Vladivostok' },\n    { Value: 'Pacific/Port_Moresby', Text: '(UTC+10:00) Port Moresby' },\n    { Value: 'Pacific / Chuuk', Text: '(UTC+10:00) Truk' },\n    { Value: 'Australia/Adelaide', Text: '(UTC+10:30) Central Time - Adelaide' },\n    { Value: 'Antarctica/Casey', Text: '(UTC+11:00) Casey' },\n    { Value: 'Australia/Hobart', Text: '(UTC+11:00) Eastern Time - Hobart' },\n    { Value: 'Australia/Sydney', Text: '(UTC+11:00) Eastern Time - Melbourne, Sydney' },\n    { Value: 'Pacific/Efate', Text: '(UTC+11:00) Efate' },\n    { Value: 'Pacific/Guadalcanal', Text: '(UTC+11:00) Guadalcanal' },\n    { Value: 'Pacific/Kosrae', Text: '(UTC+11:00) Kosrae' },\n    { Value: 'Asia/Magadan', Text: '(UTC+11:00) Moscow+08 - Magadan' },\n    { Value: 'Pacific / Norfolk', Text: '(UTC+11:00) Norfolk' },\n    { Value: 'Pacific/Noumea', Text: '(UTC+11:00) Noumea' },\n    { Value: 'Pacific/Pohnpei', Text: '(UTC+11:00) Ponape' },\n    { Value: 'Pacific/Funafuti', Text: '(UTC+12:00) Funafuti' },\n    { Value: 'Pacific/Kwajalein', Text: '(UTC+12:00) Kwajalein' },\n    { Value: 'Pacific/Majuro', Text: '(UTC+12:00) Majuro' },\n    { Value: 'Asia/Kamchatka', Text: '(UTC+12:00) Moscow+09 - Petropavlovsk - Kamchatskiy' },\n    { Value: 'Pacific / Nauru', Text: '(UTC+12:00) Nauru' },\n    { Value: 'Pacific/Tarawa', Text: '(UTC+12:00) Tarawa' },\n    { Value: 'Pacific/Wake', Text: '(UTC+12:00) Wake' },\n    { Value: 'Pacific/Wallis', Text: '(UTC+12:00) Wallis' },\n    { Value: 'Pacific/Auckland', Text: '(UTC+13:00) Auckland' },\n    { Value: 'Pacific/Enderbury', Text: '(UTC+13:00) Enderbury' },\n    { Value: 'Pacific/Fakaofo', Text: '(UTC+13:00) Fakaofo' },\n    { Value: 'Pacific/Fiji', Text: '(UTC+13:00) Fiji' },\n    { Value: 'Pacific/Tongatapu', Text: '(UTC+13:00) Tongatapu' },\n    { Value: 'Pacific/Apia', Text: '(UTC+14:00) Apia' },\n    { Value: 'Pacific/Kiritimati', Text: '(UTC+14:00) Kiritimati' }\n];\n\n/* eslint-disable max-len */\n/**\n * Date Generator from Recurrence Rule\n */\n/**\n * Generate Summary from Recurrence Rule\n *\n * @param {string} rule Accepts the Recurrence rule\n * @param {L10n} localeObject Accepts the locale object\n * @param {string} locale Accepts the locale name\n * @param {CalendarType} calendarType Accepts the calendar type\n * @returns {string} Returns the summary string from given recurrence rule\n */\nfunction generateSummary(rule, localeObject, locale, calendarType = 'Gregorian') {\n    const ruleObject = extractObjectFromRule(rule);\n    let summary = localeObject.getConstant(EVERY) + ' ';\n    let cldrObj;\n    let cldrObj1;\n    const calendarMode = calendarType.toLowerCase();\n    if (locale === 'en' || locale === 'en-US') {\n        const nameSpace1 = 'months.stand-alone.abbreviated';\n        const nameSpace = 'days.stand-alone.abbreviated';\n        cldrObj1 = (getValue(nameSpace1, getDefaultDateObject(calendarMode)));\n        cldrObj = (getValue(nameSpace, getDefaultDateObject(calendarMode)));\n    }\n    else {\n        const nameSpace1 = 'main.' + locale + '.dates.calendars.' + calendarMode + '.months.stand-alone.abbreviated';\n        const nameSpace = 'main.' + locale + '.dates.calendars.' + calendarMode + '.days.stand-alone.abbreviated';\n        cldrObj1 =\n            (getValue(nameSpace1, cldrData));\n        cldrObj =\n            (getValue(nameSpace, cldrData));\n    }\n    if (ruleObject.interval > 1) {\n        summary += ruleObject.interval + ' ';\n    }\n    switch (ruleObject.freq) {\n        case 'DAILY':\n            summary += localeObject.getConstant(DAYS);\n            break;\n        case 'WEEKLY':\n            summary += localeObject.getConstant(WEEKS) + ' ' + localeObject.getConstant(ON) + ' ';\n            ruleObject.day.forEach((day, index) => {\n                summary += capitalizeFirstWord(getValue(DAYINDEXOBJECT[day], cldrObj), 'single');\n                summary += (((ruleObject.day.length - 1) === index) ? '' : ', ');\n            });\n            break;\n        case 'MONTHLY':\n            summary += localeObject.getConstant(MONTHS) + ' ' + localeObject.getConstant(ON) + ' ';\n            summary += getMonthSummary(ruleObject, cldrObj, localeObject);\n            break;\n        case 'YEARLY':\n            summary += localeObject.getConstant(YEARS) + ' ' + localeObject.getConstant(ON) + ' ';\n            summary += capitalizeFirstWord(getValue((ruleObject.month[0]).toString(), cldrObj1), 'single') + ' ';\n            summary += getMonthSummary(ruleObject, cldrObj, localeObject);\n            break;\n    }\n    if (ruleObject.count) {\n        summary += ', ' + (ruleObject.count) + ' ' + localeObject.getConstant(TIMES);\n    }\n    else if (ruleObject.until) {\n        const tempDate = ruleObject.until;\n        summary += ', ' + localeObject.getConstant(UNTIL)\n            + ' ' + tempDate.getDate()\n            + ' ' + capitalizeFirstWord(getValue((tempDate.getMonth() + 1).toString(), cldrObj1), 'single')\n            + ' ' + tempDate.getFullYear();\n    }\n    return summary;\n}\n/**\n * Generates Month summary\n *\n * @param {RecRule} ruleObject Accepts the recurrence rule object\n * @param {string[]} cldrObj Accepts the collections of month name from calendar\n * @param {L10n} localeObj Accepts the locale object\n * @returns {string} Returns the month summary string from given recurrence rule object\n * @private\n */\nfunction getMonthSummary(ruleObject, cldrObj, localeObj) {\n    let summary = '';\n    if (ruleObject.monthDay.length) {\n        summary += ruleObject.monthDay[0];\n    }\n    else if (ruleObject.day) {\n        const pos = ruleObject.setPosition - 1;\n        summary += localeObj.getConstant(WEEKPOS[pos > -1 ? pos : (WEEKPOS.length - 1)])\n            + ' ' + capitalizeFirstWord(getValue(DAYINDEXOBJECT[ruleObject.day[0]], cldrObj), 'single');\n    }\n    return summary;\n}\n/**\n * Generates the date collections from the given recurrence rule\n *\n * @param {Date} startDate Accepts the rule start date\n * @param {string} rule Accepts the recurrence rule\n * @param {string} excludeDate Accepts the exception dates in string format\n * @param {number} startDayOfWeek Accepts the start day index of week\n * @param {number} maximumCount Accepts the maximum number count to generate date collections\n * @param {Date} viewDate Accepts the current date instead of start date\n * @param {CalendarType} calendarMode Accepts the calendar type\n * @param {string} oldTimezone Accepts the timezone name\n * @param {string} newTimezone Accepts the timezone name\n * @returns {number[]} Returns the collection of dates\n */\nfunction generate(startDate, rule, excludeDate, startDayOfWeek, maximumCount = MAXOCCURRENCE, viewDate = null, calendarMode = 'Gregorian', oldTimezone = null, newTimezone = null) {\n    const ruleObject = extractObjectFromRule(rule);\n    let cacheDate;\n    calendarUtil = getCalendarUtil(calendarMode);\n    const data = [];\n    const modifiedDate = new Date(startDate.getTime());\n    tempExcludeDate = [];\n    const tempDate = isNullOrUndefined(excludeDate) ? [] : excludeDate.split(',');\n    const tz = new Timezone();\n    tempDate.forEach((content) => {\n        let parsedDate = getDateFromRecurrenceDateString(content);\n        if (oldTimezone && newTimezone) {\n            parsedDate = tz.convert(new Date(parsedDate.getTime()), oldTimezone, newTimezone);\n        }\n        tempExcludeDate.push(new Date(parsedDate.getTime()).setHours(0, 0, 0, 0));\n    });\n    ruleObject.recExceptionCount = !isNullOrUndefined(ruleObject.count) ? tempExcludeDate.length : 0;\n    if (viewDate && viewDate > startDate && !ruleObject.count) {\n        tempViewDate = new Date(new Date(viewDate.getTime()).setHours(0, 0, 0));\n    }\n    else {\n        tempViewDate = null;\n    }\n    if (!ruleObject.until && tempViewDate) {\n        cacheDate = new Date(tempViewDate.getTime());\n        cacheDate.setDate(tempViewDate.getDate() + maximumCount * (ruleObject.interval));\n        ruleObject.until = cacheDate;\n    }\n    if (ruleObject.until && startDate > ruleObject.until) {\n        return data;\n    }\n    maxOccurrence = maximumCount;\n    setFirstDayOfWeek(DAYINDEX[startDayOfWeek]);\n    switch (ruleObject.freq) {\n        case 'DAILY':\n            dailyType(modifiedDate, ruleObject.until, data, ruleObject);\n            break;\n        case 'WEEKLY':\n            weeklyType(modifiedDate, ruleObject.until, data, ruleObject);\n            break;\n        case 'MONTHLY':\n            monthlyType(modifiedDate, ruleObject.until, data, ruleObject);\n            break;\n        case 'YEARLY':\n            yearlyType(modifiedDate, ruleObject.until, data, ruleObject);\n    }\n    return data;\n}\n/**\n * Generate date object from given date string\n *\n * @param {string} recDateString Accepts the exception date as string\n * @returns {Date} Returns the date from exception date string\n */\nfunction getDateFromRecurrenceDateString(recDateString) {\n    return new Date(recDateString.substr(0, 4) +\n        '-' + recDateString.substr(4, 2) +\n        '-' + recDateString.substr(6, 5) +\n        ':' + recDateString.substr(11, 2) +\n        ':' + recDateString.substr(13));\n}\n/**\n * Internal method to handle exclude date\n *\n * @param {number[]} data Accepts the exception date collections\n * @param {number} date Accepts the new exclude date\n * @returns {void}\n * @private\n */\nfunction excludeDateHandler(data, date) {\n    const zeroIndex = new Date(date).setHours(0, 0, 0, 0);\n    if (tempExcludeDate.indexOf(zeroIndex) === -1 && (!tempViewDate || zeroIndex >= tempViewDate.getTime())) {\n        data.push(date);\n    }\n}\n/**\n * Internal method for get date count\n *\n * @param {Date} startDate Accepts the date\n * @param {RecRule} ruleObject Accepts the recurrence rule object\n * @returns {number} Returns the number of date count\n * @private\n */\nfunction getDateCount$1(startDate, ruleObject) {\n    let count = maxOccurrence;\n    if (ruleObject.count) {\n        count = ruleObject.count;\n    }\n    else if (ruleObject.until) {\n        if (ruleObject.freq === 'DAILY' || ruleObject.freq === 'WEEKLY') {\n            count = Math.floor((ruleObject.until.getTime() - startDate.getTime()) / MS_PER_DAY) + 1;\n        }\n        else if (ruleObject.freq === 'MONTHLY' || ruleObject.freq === 'YEARLY') {\n            count = Math.floor(((ruleObject.until.getMonth() + 12 * ruleObject.until.getFullYear()) -\n                (startDate.getMonth() + 12 * startDate.getFullYear())) / ruleObject.interval) +\n                (ruleObject.day.length > 1 ? (Math.floor((ruleObject.until.getTime() - startDate.getTime()) / MS_PER_DAY) + 1) : 1);\n            if (ruleObject.freq === 'YEARLY') {\n                count = ruleObject.month.length > 1 ? (count * ruleObject.month.length) : count;\n            }\n        }\n    }\n    return count;\n}\n/**\n *  Internal method for daily type recurrence rule\n *\n * @param {Date} startDate Accepts the strat date\n * @param {Date} endDate Accepts the end date\n * @param {number[]} data Accepts the collection of dates\n * @param {RecRule} ruleObject Accepts the recurrence rule object\n * @returns {void}\n * @private\n */\nfunction dailyType(startDate, endDate, data, ruleObject) {\n    const tempDate = new Date(startDate.getTime());\n    const interval = ruleObject.interval;\n    const expectedCount = getDateCount$1(startDate, ruleObject);\n    let state;\n    const expectedDays = ruleObject.day;\n    while (compareDates(tempDate, endDate)) {\n        state = true;\n        state = validateRules(tempDate, ruleObject);\n        if (state && (expectedDays.indexOf(DAYINDEX[tempDate.getDay()]) > -1 || expectedDays.length === 0)) {\n            excludeDateHandler(data, tempDate.getTime());\n            if (expectedCount && (data.length + ruleObject.recExceptionCount) >= expectedCount) {\n                break;\n            }\n        }\n        tempDate.setDate(tempDate.getDate() + interval);\n    }\n}\n/**\n * Internal method for weekly type recurrence rule\n *\n * @param {Date} startDate Accepts the strat date\n * @param {Date} endDate Accepts the end date\n * @param {number[]} data Accepts the collection of dates\n * @param {RecRule} ruleObject Accepts the recurrence rule object\n * @returns {void}\n * @private\n */\nfunction weeklyType(startDate, endDate, data, ruleObject) {\n    let tempDate = new Date(startDate.getTime());\n    if (!ruleObject.day.length) {\n        ruleObject.day.push(DAYINDEX[startDate.getDay()]);\n    }\n    const interval = ruleObject.interval;\n    const expectedDays = ruleObject.day;\n    const expectedCount = getDateCount$1(startDate, ruleObject);\n    let weekState = true;\n    let wkstIndex;\n    let weekCollection = [];\n    if (expectedDays.length > 1) {\n        if (isNullOrUndefined(ruleObject.wkst) || ruleObject.wkst === '') {\n            ruleObject.wkst = dayIndex[0];\n        }\n        wkstIndex = DAYINDEX.indexOf(ruleObject.wkst);\n        while (compareDates(tempDate, endDate)) {\n            let startDateDiff = DAYINDEX.indexOf(DAYINDEX[tempDate.getDay()]) - wkstIndex;\n            startDateDiff = startDateDiff === -1 ? 6 : startDateDiff;\n            const weekstartDate = addDays(tempDate, -startDateDiff);\n            let weekendDate = addDays(weekstartDate, 6);\n            let compareTempDate = new Date(tempDate.getTime());\n            weekendDate = resetTime(weekendDate);\n            compareTempDate = resetTime(compareTempDate);\n            while (weekendDate >= compareTempDate) {\n                if (expectedDays.indexOf(DAYINDEX[tempDate.getDay()]) > -1) {\n                    weekCollection.push([tempDate.getTime()]);\n                }\n                if (expectedCount && (data.length + ruleObject.recExceptionCount) >= expectedCount) {\n                    break;\n                }\n                tempDate.setDate(tempDate.getDate() + 1);\n                compareTempDate = new Date(tempDate.getTime());\n                compareTempDate = resetTime(compareTempDate);\n            }\n            tempDate.setDate(tempDate.getDate() - 1);\n            if (expectedCount && (data.length + ruleObject.recExceptionCount) >= expectedCount) {\n                break;\n            }\n            tempDate.setDate((tempDate.getDate()) + 1 + ((interval - 1) * 7));\n            insertDataCollection(weekCollection, weekState, startDate, endDate, data, ruleObject);\n            weekCollection = [];\n        }\n    }\n    else {\n        tempDate = getStartDateForWeek(startDate, ruleObject.day);\n        while (compareDates(tempDate, endDate)) {\n            weekState = validateRules(tempDate, ruleObject);\n            if (weekState && (expectedDays.indexOf(DAYINDEX[tempDate.getDay()]) > -1)) {\n                excludeDateHandler(data, tempDate.getTime());\n            }\n            if (expectedCount && (data.length + ruleObject.recExceptionCount) >= expectedCount) {\n                break;\n            }\n            tempDate.setDate(tempDate.getDate() + (interval * 7));\n        }\n        insertDataCollection(weekCollection, weekState, startDate, endDate, data, ruleObject);\n        weekCollection = [];\n    }\n}\n/**\n *  Internal method for monthly type recurrence rule\n *\n * @param {Date} startDate Accepts the strat date\n * @param {Date} endDate Accepts the end date\n * @param {number[]} data Accepts the collection of dates\n * @param {RecRule} ruleObject Accepts the recurrence rule object\n * @returns {void}\n * @private\n */\nfunction monthlyType(startDate, endDate, data, ruleObject) {\n    // Set monthday value if BYDAY, BYMONTH and Month day property is not set based on start date\n    if (!ruleObject.month.length && !ruleObject.day.length && !ruleObject.monthDay.length) {\n        ruleObject.monthDay.push(startDate.getDate());\n        if (ruleObject.freq === 'YEARLY') {\n            ruleObject.month.push(startDate.getMonth() + 1);\n        }\n    }\n    else if (ruleObject.month.length > 0 && !ruleObject.day.length && !ruleObject.monthDay.length) {\n        ruleObject.monthDay.push(startDate.getDate());\n    }\n    const ruleType = validateMonthlyRuleType(ruleObject);\n    switch (ruleType) {\n        case 'day':\n            switch (ruleObject.freq) {\n                case 'MONTHLY':\n                    monthlyDayTypeProcessforMonthFreq(startDate, endDate, data, ruleObject);\n                    break;\n                case 'YEARLY':\n                    monthlyDayTypeProcess(startDate, endDate, data, ruleObject);\n                    break;\n            }\n            break;\n        case 'both':\n        case 'date':\n            switch (ruleObject.freq) {\n                case 'MONTHLY':\n                    monthlyDateTypeProcessforMonthFreq(startDate, endDate, data, ruleObject);\n                    break;\n                case 'YEARLY':\n                    monthlyDateTypeProcess(startDate, endDate, data, ruleObject);\n                    break;\n            }\n            break;\n    }\n}\n/**\n * Internal method for yearly type recurrence rule\n *\n * @param {Date} startDate Accepts the strat date\n * @param {Date} endDate Accepts the end date\n * @param {number[]} data Accepts the collection of dates\n * @param {RecRule} ruleObject Accepts the recurrence rule object\n * @returns {void}\n * @private\n */\nfunction yearlyType(startDate, endDate, data, ruleObject) {\n    const typeValue = checkYearlyType(ruleObject);\n    switch (typeValue) {\n        case 'MONTH':\n            monthlyType(startDate, endDate, data, ruleObject);\n            break;\n        case 'WEEKNO':\n            processWeekNo(startDate, endDate, data, ruleObject);\n            break;\n        case 'YEARDAY':\n            processYearDay(startDate, endDate, data, ruleObject);\n            break;\n    }\n}\n/**\n * Internal method for process week no\n *\n * @param {Date} startDate Accepts the strat date\n * @param {Date} endDate Accepts the end date\n * @param {number[]} data Accepts the collection of dates\n * @param {RecRule} ruleObject Accepts the recurrence rule object\n * @returns {void}\n * @private\n */\nfunction processWeekNo(startDate, endDate, data, ruleObject) {\n    let stDate = calendarUtil.getYearLastDate(startDate, 0);\n    let tempDate;\n    const expectedCount = getDateCount$1(startDate, ruleObject);\n    let state;\n    let startDay;\n    let firstWeekSpan;\n    const weekNos = ruleObject.weekNo;\n    let weekNo;\n    let maxDate;\n    let minDate;\n    let weekCollection = [];\n    const expectedDays = ruleObject.day;\n    while (compareDates(stDate, endDate)) {\n        startDay = dayIndex.indexOf(DAYINDEX[stDate.getDay()]);\n        firstWeekSpan = (6 - startDay) + 1;\n        for (let index = 0; index < weekNos.length; index++) {\n            weekNo = weekNos[index];\n            weekNo = (weekNo > 0) ? weekNo : 53 + weekNo + 1;\n            maxDate = (weekNo === 1) ? firstWeekSpan : firstWeekSpan + ((weekNo - 1) * 7);\n            minDate = (weekNo === 1) ? firstWeekSpan - 7 : firstWeekSpan + ((weekNo - 2) * 7);\n            while (minDate < maxDate) {\n                tempDate = new Date(stDate.getTime() + (MS_PER_DAY * minDate));\n                if (expectedDays.length === 0 || expectedDays.indexOf(DAYINDEX[tempDate.getDay()]) > -1) {\n                    if (isNullOrUndefined(ruleObject.setPosition)) {\n                        insertDateCollection(state, startDate, endDate, data, ruleObject, tempDate.getTime());\n                    }\n                    else {\n                        weekCollection.push([tempDate.getTime()]);\n                    }\n                }\n                minDate++;\n            }\n        }\n        if (!isNullOrUndefined(ruleObject.setPosition)) {\n            insertDatasIntoExistingCollection(weekCollection, state, startDate, endDate, data, ruleObject);\n        }\n        if (expectedCount && (data.length + ruleObject.recExceptionCount) >= expectedCount) {\n            return;\n        }\n        stDate = calendarUtil.getYearLastDate(tempDate, ruleObject.interval);\n        weekCollection = [];\n    }\n}\n/**\n * Internal method for process year day\n *\n * @param {Date} startDate Accepts the strat date\n * @param {Date} endDate Accepts the end date\n * @param {number[]} data Accepts the collection of dates\n * @param {RecRule} ruleObject Accepts the recurrence rule object\n * @returns {void}\n * @private\n */\nfunction processYearDay(startDate, endDate, data, ruleObject) {\n    let stDate = calendarUtil.getYearLastDate(startDate, 0);\n    let tempDate;\n    const expectedCount = getDateCount$1(startDate, ruleObject);\n    let state;\n    let dateCollection = [];\n    let date;\n    const expectedDays = ruleObject.day;\n    while (compareDates(stDate, endDate)) {\n        for (let index = 0; index < ruleObject.yearDay.length; index++) {\n            date = ruleObject.yearDay[index];\n            tempDate = new Date(stDate.getTime());\n            if ((date === calendarUtil.getLeapYearDaysCount() || date === -calendarUtil.getLeapYearDaysCount()) &&\n                (!calendarUtil.isLeapYear(calendarUtil.getFullYear(tempDate), 1))) {\n                tempDate.setDate(tempDate.getDate() + 1);\n                continue;\n            }\n            tempDate.setDate(tempDate.getDate() + ((date < 0) ?\n                calendarUtil.getYearDaysCount(tempDate, 1) + 1 + date : date));\n            if (expectedDays.length === 0 || expectedDays.indexOf(DAYINDEX[tempDate.getDay()]) > -1) {\n                if (ruleObject.setPosition == null) {\n                    insertDateCollection(state, startDate, endDate, data, ruleObject, tempDate.getTime());\n                }\n                else {\n                    dateCollection.push([tempDate.getTime()]);\n                }\n            }\n        }\n        if (!isNullOrUndefined(ruleObject.setPosition)) {\n            insertDatasIntoExistingCollection(dateCollection, state, startDate, endDate, data, ruleObject);\n        }\n        if (expectedCount && (data.length + ruleObject.recExceptionCount) >= expectedCount) {\n            return;\n        }\n        stDate = calendarUtil.getYearLastDate(tempDate, ruleObject.interval);\n        dateCollection = [];\n    }\n}\n/**\n * Internal method to check yearly type\n *\n * @param {RecRule} ruleObject Accepts the recurrence rule object\n * @returns {YearRuleType} Returns the Yearly rule type object\n * @private\n */\nfunction checkYearlyType(ruleObject) {\n    if (ruleObject.yearDay.length) {\n        return 'YEARDAY';\n    }\n    else if (ruleObject.weekNo.length) {\n        return 'WEEKNO';\n    }\n    return 'MONTH';\n}\n/**\n * Internal method to initialize recurrence rule variables\n *\n * @param {Date} startDate Accepts the start date\n * @param {RecRule} ruleObject Accepts the recurrence rule object\n * @returns {RuleData} Return the rule data object\n * @private\n */\nfunction initializeRecRuleVariables(startDate, ruleObject) {\n    const ruleData = {\n        monthCollection: [],\n        index: 0,\n        tempDate: new Date(startDate.getTime()),\n        mainDate: new Date(startDate.getTime()),\n        expectedCount: getDateCount$1(startDate, ruleObject),\n        monthInit: 0,\n        dateCollection: []\n    };\n    if (ruleObject.month.length) {\n        calendarUtil.setMonth(ruleData.tempDate, ruleObject.month[0], ruleData.tempDate.getDate());\n    }\n    return ruleData;\n}\n/**\n * Internal method for process monthly date type recurrence rule\n *\n * @param {Date} startDate Accepts the strat date\n * @param {Date} endDate Accepts the end date\n * @param {number[]} data Accepts the collection of dates\n * @param {RecRule} ruleObject Accepts the recurrence rule object\n * @returns {void}\n * @private\n */\nfunction monthlyDateTypeProcess(startDate, endDate, data, ruleObject) {\n    if (ruleObject.month.length) {\n        monthlyDateTypeProcessforMonthFreq(startDate, endDate, data, ruleObject);\n        return;\n    }\n    const ruleData = initializeRecRuleVariables(startDate, ruleObject);\n    let currentMonthDate;\n    ruleData.tempDate = ruleData.mainDate = calendarUtil.getMonthStartDate(ruleData.tempDate);\n    while (compareDates(ruleData.tempDate, endDate)) {\n        currentMonthDate = new Date(ruleData.tempDate.getTime());\n        while (calendarUtil.isSameYear(currentMonthDate, ruleData.tempDate) &&\n            (ruleData.expectedCount && (data.length + ruleObject.recExceptionCount) <= ruleData.expectedCount)) {\n            if (ruleObject.month.length === 0 || (ruleObject.month.length > 0\n                && !calendarUtil.checkMonth(ruleData.tempDate, ruleObject.month))) {\n                processDateCollectionForByMonthDay(ruleObject, ruleData, endDate, false);\n                ruleData.beginDate = new Date(ruleData.tempDate.getTime());\n                ruleData.monthInit = setNextValidDate(ruleData.tempDate, ruleObject, ruleData.monthInit, ruleData.beginDate);\n            }\n            else {\n                calendarUtil.setValidDate(ruleData.tempDate, 1, 1);\n                ruleData.tempDate = getStartDateForWeek(ruleData.tempDate, ruleObject.day);\n                break;\n            }\n        }\n        ruleData.tempDate.setFullYear(currentMonthDate.getFullYear(), currentMonthDate.getMonth(), currentMonthDate.getDate());\n        insertDataCollection(ruleData.dateCollection, ruleData.state, startDate, endDate, data, ruleObject);\n        if (calendarUtil.isLastMonth(ruleData.tempDate)) {\n            calendarUtil.setValidDate(ruleData.tempDate, 1, 1);\n            ruleData.tempDate = getStartDateForWeek(ruleData.tempDate, ruleObject.day);\n        }\n        if (ruleData.expectedCount && (data.length + ruleObject.recExceptionCount) >= ruleData.expectedCount) {\n            return;\n        }\n        ruleData.tempDate.setFullYear(ruleData.tempDate.getFullYear() + ruleObject.interval - 1);\n        ruleData.tempDate = getStartDateForWeek(ruleData.tempDate, ruleObject.day);\n        ruleData.monthInit = setNextValidDate(ruleData.tempDate, ruleObject, ruleData.monthInit, ruleData.beginDate);\n        ruleData.dateCollection = [];\n    }\n}\n/**\n * Internal method for process monthly date type with month frequency from recurrence rule\n *\n * @param {Date} startDate Accepts the strat date\n * @param {Date} endDate Accepts the end date\n * @param {number[]} data Accepts the collection of dates\n * @param {RecRule} ruleObject Accepts the recurrence rule object\n * @returns {void}\n * @private\n */\nfunction monthlyDateTypeProcessforMonthFreq(startDate, endDate, data, ruleObject) {\n    const ruleData = initializeRecRuleVariables(startDate, ruleObject);\n    ruleData.tempDate = ruleData.mainDate = calendarUtil.getMonthStartDate(ruleData.tempDate);\n    if (((ruleObject.freq === 'MONTHLY' && ruleObject.interval === 12) || (ruleObject.freq === 'YEARLY')) &&\n        calendarUtil.getMonthDaysCount(startDate) < ruleObject.monthDay[0]) {\n        return;\n    }\n    while (compareDates(ruleData.tempDate, endDate)) {\n        ruleData.beginDate = new Date(ruleData.tempDate.getTime());\n        processDateCollectionForByMonthDay(ruleObject, ruleData, endDate, true, startDate, data);\n        if (!isNullOrUndefined(ruleObject.setPosition)) {\n            insertDatasIntoExistingCollection(ruleData.dateCollection, ruleData.state, startDate, endDate, data, ruleObject);\n        }\n        if (ruleData.expectedCount && (data.length + ruleObject.recExceptionCount) >= ruleData.expectedCount) {\n            return;\n        }\n        ruleData.monthInit = setNextValidDate(ruleData.tempDate, ruleObject, ruleData.monthInit, ruleData.beginDate);\n        ruleData.dateCollection = [];\n    }\n}\n/**\n * To process date collection for Monthly & Yearly based on BYMONTH Day property\n *\n * @param {RecRule} ruleObject Accepts the recurrence rule object\n * @param {RuleData} recRuleVariables Accepts the rule data\n * @param {Date} endDate Accepts the end date\n * @param {boolean} isByMonth Accepts the boolean to validate either month or not\n * @param {Date} startDate Accepts the start date\n * @param {number[]} data Accepts the collection of dates\n * @returns {void}\n * @private\n */\nfunction processDateCollectionForByMonthDay(ruleObject, recRuleVariables, endDate, isByMonth, startDate, data) {\n    for (let index = 0; index < ruleObject.monthDay.length; index++) {\n        recRuleVariables.date = ruleObject.monthDay[index];\n        recRuleVariables.tempDate = calendarUtil.getMonthStartDate(recRuleVariables.tempDate);\n        const maxDate = calendarUtil.getMonthDaysCount(recRuleVariables.tempDate);\n        recRuleVariables.date = recRuleVariables.date > 0 ? recRuleVariables.date : (maxDate + recRuleVariables.date + 1);\n        if (validateProperDate(recRuleVariables.tempDate, recRuleVariables.date, recRuleVariables.mainDate)\n            && (recRuleVariables.date > 0)) {\n            calendarUtil.setDate(recRuleVariables.tempDate, recRuleVariables.date);\n            if (endDate && recRuleVariables.tempDate > endDate) {\n                return;\n            }\n            if (ruleObject.day.length === 0 || ruleObject.day.indexOf(DAYINDEX[recRuleVariables.tempDate.getDay()]) > -1) {\n                if (isByMonth && isNullOrUndefined(ruleObject.setPosition) && (recRuleVariables.expectedCount\n                    && (data.length + ruleObject.recExceptionCount) < recRuleVariables.expectedCount)) {\n                    insertDateCollection(recRuleVariables.state, startDate, endDate, data, ruleObject, recRuleVariables.tempDate.getTime());\n                }\n                else {\n                    recRuleVariables.dateCollection.push([recRuleVariables.tempDate.getTime()]);\n                }\n            }\n        }\n    }\n}\n/**\n * Internal method to set next valid date\n *\n * @param {Date} tempDate Accepts the date\n * @param {RecRule} ruleObject Accepts the recurrence rule object\n * @param {number} monthInit Accepts the initial month\n * @param {Date} beginDate Accepts the initial date\n * @param {number} interval Accepts the interval duration\n * @returns {number} Returnx the next valid date\n * @private\n */\nfunction setNextValidDate(tempDate, ruleObject, monthInit, beginDate = null, interval) {\n    let monthData = beginDate ? beginDate.getMonth() : 0;\n    const startDate = calendarUtil.getMonthStartDate(tempDate);\n    interval = isNullOrUndefined(interval) ? ruleObject.interval : interval;\n    tempDate.setFullYear(startDate.getFullYear());\n    tempDate.setMonth(startDate.getMonth());\n    tempDate.setDate(startDate.getDate());\n    if (ruleObject.month.length) {\n        monthInit++;\n        monthInit = monthInit % ruleObject.month.length;\n        calendarUtil.setMonth(tempDate, ruleObject.month[monthInit], 1);\n        if (monthInit === 0) {\n            calendarUtil.addYears(tempDate, interval, ruleObject.month[0]);\n        }\n    }\n    else {\n        if (beginDate && (beginDate.getFullYear() < tempDate.getFullYear())) {\n            monthData = tempDate.getMonth() - 1;\n        }\n        calendarUtil.setValidDate(tempDate, interval, 1, monthData, beginDate);\n    }\n    return monthInit;\n}\n/**\n * To get month collection when BYDAY property having more than one value in list.\n *\n * @param {Date} startDate Accepts the strat date\n * @param {Date} endDate Accepts the end date\n * @param {number[]} data Accepts the collection of dates\n * @param {RecRule} ruleObject Accepts the recurrence rule object\n * @returns {void}\n * @private\n */\nfunction getMonthCollection(startDate, endDate, data, ruleObject) {\n    const expectedDays = ruleObject.day;\n    let tempDate = new Date(startDate.getTime());\n    tempDate = calendarUtil.getMonthStartDate(tempDate);\n    let monthCollection = [];\n    let dateCollection = [];\n    let dates = [];\n    let index;\n    let state;\n    const expectedCount = getDateCount$1(startDate, ruleObject);\n    let monthInit = 0;\n    let beginDate;\n    if (ruleObject.month.length) {\n        calendarUtil.setMonth(tempDate, ruleObject.month[0], 1);\n    }\n    tempDate = getStartDateForWeek(tempDate, ruleObject.day);\n    while (compareDates(tempDate, endDate)\n        && (expectedCount && (data.length + ruleObject.recExceptionCount) < expectedCount)) {\n        const currentMonthDate = new Date(tempDate.getTime());\n        const isHavingNumber = expectedDays.map((item) => HASNUMBER.test(item));\n        if (isHavingNumber.indexOf(true) > -1) {\n            for (let j = 0; j <= expectedDays.length - 1; j++) {\n                const expectedDaysArray = expectedDays[j].match(SPLITNUMBERANDSTRING);\n                const position = parseInt(expectedDaysArray[0], 10);\n                tempDate = new Date(tempDate.getTime());\n                tempDate = calendarUtil.getMonthStartDate(tempDate);\n                tempDate = getStartDateForWeek(tempDate, expectedDays);\n                currentMonthDate.setFullYear(tempDate.getFullYear(), tempDate.getMonth(), tempDate.getDate());\n                while (calendarUtil.isSameYear(currentMonthDate, tempDate) && calendarUtil.isSameMonth(currentMonthDate, tempDate)) {\n                    if (expectedDaysArray[expectedDaysArray.length - 1] === DAYINDEX[currentMonthDate.getDay()]) {\n                        monthCollection.push([currentMonthDate.getTime()]);\n                    }\n                    currentMonthDate.setDate(currentMonthDate.getDate() + (1));\n                }\n                currentMonthDate.setDate(currentMonthDate.getDate() - (1));\n                if (expectedDaysArray[0].indexOf('-') > -1) {\n                    index = monthCollection.length - (-1 * position);\n                }\n                else {\n                    index = position - 1;\n                }\n                index = isNaN(index) ? 0 : index;\n                if (monthCollection.length > 0) {\n                    if (isNullOrUndefined(ruleObject.setPosition)) {\n                        insertDatasIntoExistingCollection(monthCollection, state, startDate, endDate, data, ruleObject, index);\n                    }\n                    else {\n                        dateCollection = [(filterDateCollectionByIndex(monthCollection, index, dates))];\n                    }\n                }\n                if (expectedCount && (data.length + ruleObject.recExceptionCount) >= expectedCount) {\n                    return;\n                }\n                monthCollection = [];\n            }\n            if (!isNullOrUndefined(ruleObject.setPosition)) {\n                insertDateCollectionBasedonBySetPos(dateCollection, state, startDate, endDate, data, ruleObject);\n                dates = [];\n            }\n            monthInit = setNextValidDate(tempDate, ruleObject, monthInit, beginDate);\n            tempDate = getStartDateForWeek(tempDate, ruleObject.day);\n            monthCollection = [];\n        }\n        else {\n            let weekCollection = [];\n            const dayCycleData = processWeekDays(expectedDays);\n            currentMonthDate.setFullYear(tempDate.getFullYear(), tempDate.getMonth(), tempDate.getDate());\n            const initialDate = new Date(tempDate.getTime());\n            beginDate = new Date(tempDate.getTime());\n            while (calendarUtil.isSameMonth(initialDate, tempDate)) {\n                weekCollection.push(tempDate.getTime());\n                if (expectedDays.indexOf(DAYINDEX[tempDate.getDay()]) > -1) {\n                    monthCollection.push(weekCollection);\n                    weekCollection = [];\n                }\n                tempDate.setDate(tempDate.getDate()\n                    + dayCycleData[DAYINDEX[tempDate.getDay()]]);\n            }\n            index = ((ruleObject.setPosition < 1) ? (monthCollection.length + ruleObject.setPosition) : ruleObject.setPosition - 1);\n            if (isNullOrUndefined(ruleObject.setPosition)) {\n                index = 0;\n                const datas = [];\n                for (let week = 0; week < monthCollection.length; week++) {\n                    for (let row = 0; row < monthCollection[week].length; row++) {\n                        datas.push(monthCollection[week][row]);\n                    }\n                }\n                monthCollection = [datas];\n            }\n            if (monthCollection.length > 0) {\n                insertDatasIntoExistingCollection(monthCollection, state, startDate, endDate, data, ruleObject, index);\n            }\n            if (expectedCount && (data.length + ruleObject.recExceptionCount) >= expectedCount) {\n                return;\n            }\n            monthInit = setNextValidDate(tempDate, ruleObject, monthInit, beginDate);\n            tempDate = getStartDateForWeek(tempDate, ruleObject.day);\n            monthCollection = [];\n        }\n    }\n}\n/**\n * To process monday day type for FREQ=MONTHLY\n *\n * @param {Date} startDate Accepts the strat date\n * @param {Date} endDate Accepts the end date\n * @param {number[]} data Accepts the collection of dates\n * @param {RecRule} ruleObject Accepts the recurrence rule object\n * @returns {void}\n * @private\n */\nfunction monthlyDayTypeProcessforMonthFreq(startDate, endDate, data, ruleObject) {\n    const expectedDays = ruleObject.day;\n    // When BYDAY property having more than 1 value.\n    if (expectedDays.length > 1) {\n        getMonthCollection(startDate, endDate, data, ruleObject);\n        return;\n    }\n    let tempDate = new Date(startDate.getTime());\n    const expectedCount = getDateCount$1(startDate, ruleObject);\n    let monthCollection = [];\n    let beginDate;\n    let monthInit = 0;\n    tempDate = calendarUtil.getMonthStartDate(tempDate);\n    if (ruleObject.month.length) {\n        calendarUtil.setMonth(tempDate, ruleObject.month[0], 1);\n    }\n    tempDate = getStartDateForWeek(tempDate, ruleObject.day);\n    while (compareDates(tempDate, endDate) && (expectedCount && (data.length + ruleObject.recExceptionCount) < expectedCount)) {\n        beginDate = new Date(tempDate.getTime());\n        const currentMonthDate = new Date(tempDate.getTime());\n        while (calendarUtil.isSameMonth(tempDate, currentMonthDate)) {\n            monthCollection.push([currentMonthDate.getTime()]);\n            currentMonthDate.setDate(currentMonthDate.getDate() + (7));\n        }\n        // To filter date collection based on BYDAY Index, then BYSETPOS and to insert datas into existing collection\n        insertDateCollectionBasedonIndex(monthCollection, startDate, endDate, data, ruleObject);\n        monthInit = setNextValidDate(tempDate, ruleObject, monthInit, beginDate);\n        tempDate = getStartDateForWeek(tempDate, ruleObject.day);\n        monthCollection = [];\n    }\n}\n/**\n * To process monday day type for FREQ=YEARLY\n *\n * @param {Date} startDate Accepts the strat date\n * @param {Date} endDate Accepts the end date\n * @param {number[]} data Accepts the collection of dates\n * @param {RecRule} ruleObject Accepts the recurrence rule object\n * @returns {void}\n * @private\n */\nfunction monthlyDayTypeProcess(startDate, endDate, data, ruleObject) {\n    const expectedDays = ruleObject.day;\n    const isHavingNumber = expectedDays.map((item) => HASNUMBER.test(item));\n    // If BYDAY property having more than 1 value in list\n    if (expectedDays.length > 1 && isHavingNumber.indexOf(true) > -1) {\n        processDateCollectionforByDayWithInteger(startDate, endDate, data, ruleObject);\n        return;\n    }\n    else if (ruleObject.month.length && expectedDays.length === 1 && isHavingNumber.indexOf(true) > -1) {\n        monthlyDayTypeProcessforMonthFreq(startDate, endDate, data, ruleObject);\n        return;\n    }\n    let tempDate = new Date(startDate.getTime());\n    let currentMonthDate;\n    const expectedCount = getDateCount$1(startDate, ruleObject);\n    const interval = ruleObject.interval;\n    let monthCollection = [];\n    if (ruleObject.month.length) {\n        calendarUtil.setMonth(tempDate, ruleObject.month[0], tempDate.getDate());\n    }\n    // Set the date as start date of the yeear if yearly freq having ByDay property alone\n    if (isNullOrUndefined(ruleObject.setPosition) && ruleObject.month.length === 0 && ruleObject.weekNo.length === 0) {\n        tempDate.setFullYear(startDate.getFullYear(), 0, 1);\n    }\n    tempDate = calendarUtil.getMonthStartDate(tempDate);\n    tempDate = getStartDateForWeek(tempDate, ruleObject.day);\n    while (compareDates(tempDate, endDate)) {\n        currentMonthDate = new Date(tempDate.getTime());\n        while (calendarUtil.isSameYear(currentMonthDate, tempDate) &&\n            (expectedCount && (data.length + ruleObject.recExceptionCount) <= expectedCount)) {\n            currentMonthDate = new Date(tempDate.getTime());\n            while (calendarUtil.isSameYear(currentMonthDate, tempDate)) {\n                if (ruleObject.month.length === 0 || (ruleObject.month.length > 0\n                    && !calendarUtil.checkMonth(tempDate, ruleObject.month))) {\n                    if (expectedDays.length > 1) {\n                        if (calendarUtil.compareMonth(currentMonthDate, tempDate)) {\n                            calendarUtil.setValidDate(tempDate, 1, 1);\n                            tempDate = getStartDateForWeek(tempDate, ruleObject.day);\n                            break;\n                        }\n                        if (expectedDays.indexOf(DAYINDEX[currentMonthDate.getDay()]) > -1) {\n                            monthCollection.push([currentMonthDate.getTime()]);\n                        }\n                        currentMonthDate.setDate(currentMonthDate.getDate() + (1));\n                    }\n                    else {\n                        // If BYDAY property having 1 value in list\n                        if (currentMonthDate.getFullYear() > tempDate.getFullYear()) {\n                            calendarUtil.setValidDate(tempDate, 1, 1);\n                            tempDate = getStartDateForWeek(tempDate, ruleObject.day);\n                            break;\n                        }\n                        const newstr = getDayString(expectedDays[0]);\n                        if (DAYINDEX[currentMonthDate.getDay()] === newstr\n                            && new Date(currentMonthDate.getFullYear(), currentMonthDate.getMonth(), 0)\n                                > new Date(startDate.getFullYear())) {\n                            monthCollection.push([currentMonthDate.getTime()]);\n                        }\n                        currentMonthDate.setDate(currentMonthDate.getDate() + (7));\n                    }\n                }\n                else {\n                    calendarUtil.setValidDate(tempDate, 1, 1);\n                    tempDate = getStartDateForWeek(tempDate, ruleObject.day);\n                    break;\n                }\n            }\n        }\n        tempDate.setFullYear(currentMonthDate.getFullYear(), currentMonthDate.getMonth(), currentMonthDate.getDate());\n        // To filter date collection based on BYDAY Index, then BYSETPOS and to insert datas into existing collection\n        insertDateCollectionBasedonIndex(monthCollection, startDate, endDate, data, ruleObject);\n        if (calendarUtil.isLastMonth(tempDate)) {\n            calendarUtil.setValidDate(tempDate, 1, 1);\n            tempDate = getStartDateForWeek(tempDate, ruleObject.day);\n        }\n        tempDate.setFullYear(tempDate.getFullYear() + interval - 1);\n        if (expectedCount && (data.length + ruleObject.recExceptionCount) >= expectedCount) {\n            return;\n        }\n        tempDate = getStartDateForWeek(tempDate, ruleObject.day);\n        monthCollection = [];\n    }\n}\n/**\n * To process the recurrence rule when BYDAY property having values with integer\n *\n * @param {Date} startDate Accepts the strat date\n * @param {Date} endDate Accepts the end date\n * @param {number[]} data Accepts the collection of dates\n * @param {RecRule} ruleObject Accepts the recurrence rule object\n * @returns {void}\n * @private\n */\nfunction processDateCollectionforByDayWithInteger(startDate, endDate, data, ruleObject) {\n    const expectedDays = ruleObject.day;\n    const expectedCount = getDateCount$1(startDate, ruleObject);\n    let tempDate = new Date(startDate.getTime());\n    const interval = ruleObject.interval;\n    let monthCollection = [];\n    let dateCollection = [];\n    let index;\n    let state;\n    let monthInit = 0;\n    let currentMonthDate;\n    let currentDate;\n    let beginDate;\n    tempDate = calendarUtil.getMonthStartDate(tempDate);\n    let datas = [];\n    if (ruleObject.month.length) {\n        calendarUtil.setMonth(tempDate, ruleObject.month[0], 1);\n    }\n    tempDate = getStartDateForWeek(tempDate, ruleObject.day);\n    while (compareDates(tempDate, endDate)) {\n        currentMonthDate = new Date(tempDate.getTime());\n        for (let i = 0; i <= ruleObject.month.length; i++) {\n            for (let j = 0; j <= expectedDays.length - 1; j++) {\n                tempDate = calendarUtil.getMonthStartDate(tempDate);\n                tempDate = getStartDateForWeek(tempDate, ruleObject.day);\n                monthCollection = [];\n                while (calendarUtil.isSameYear(currentMonthDate, tempDate) &&\n                    (expectedCount && (data.length + ruleObject.recExceptionCount) <= expectedCount)) {\n                    while (calendarUtil.isSameYear(currentMonthDate, tempDate)) {\n                        currentMonthDate = new Date(tempDate.getTime());\n                        if (ruleObject.month.length === 0 ||\n                            (ruleObject.month.length > 0 && ruleObject.month[i] === calendarUtil.getMonth(currentMonthDate))) {\n                            const expectedDaysArray = expectedDays[j].match(SPLITNUMBERANDSTRING);\n                            const position = parseInt(expectedDaysArray[0], 10);\n                            currentDate = new Date(tempDate.getTime());\n                            while (calendarUtil.isSameYear(currentDate, tempDate)\n                                && calendarUtil.isSameMonth(currentDate, tempDate)) {\n                                if (expectedDaysArray[expectedDaysArray.length - 1] === DAYINDEX[currentDate.getDay()]) {\n                                    monthCollection.push([currentDate.getTime()]);\n                                }\n                                currentDate.setDate(currentDate.getDate() + (1));\n                            }\n                            currentDate.setDate(currentDate.getDate() - (1));\n                            if (expectedDaysArray[0].indexOf('-') > -1) {\n                                index = monthCollection.length - (-1 * position);\n                            }\n                            else {\n                                index = position - 1;\n                            }\n                            index = isNaN(index) ? 0 : index;\n                        }\n                        monthInit = setNextValidDate(tempDate, ruleObject, monthInit, beginDate, 1);\n                        tempDate = getStartDateForWeek(tempDate, ruleObject.day);\n                    }\n                }\n                tempDate = j === 0 && currentDate ? new Date(currentDate.getTime()) : new Date(currentMonthDate.getTime());\n                if (monthCollection.length > 0) {\n                    if (isNullOrUndefined(ruleObject.setPosition)) {\n                        insertDatasIntoExistingCollection(monthCollection, state, startDate, endDate, data, ruleObject, index);\n                    }\n                    else {\n                        dateCollection = [(filterDateCollectionByIndex(monthCollection, index, datas))];\n                    }\n                }\n                if (expectedCount && (data.length + ruleObject.recExceptionCount) >= expectedCount) {\n                    return;\n                }\n            }\n        }\n        if (!isNullOrUndefined(ruleObject.setPosition)) {\n            insertDateCollectionBasedonBySetPos(dateCollection, state, startDate, endDate, data, ruleObject);\n            datas = [];\n        }\n        if (calendarUtil.isLastMonth(tempDate)) {\n            calendarUtil.setValidDate(tempDate, 1, 1);\n            tempDate.setFullYear(tempDate.getFullYear() + interval - 1);\n        }\n        else {\n            tempDate.setFullYear(tempDate.getFullYear() + interval);\n        }\n        tempDate = getStartDateForWeek(tempDate, ruleObject.day);\n        if (ruleObject.month.length) {\n            calendarUtil.setMonth(tempDate, ruleObject.month[0], tempDate.getDate());\n        }\n    }\n}\n/**\n * To get recurrence collection if BYSETPOS is null\n *\n * @param {number[]} monthCollection Accepts the month collection dates\n * @param {string[]} expectedDays Accepts the exception dates\n * @returns {RuleData} Returns the rule data object\n * @private\n */\nfunction getRecurrenceCollection(monthCollection, expectedDays) {\n    let index;\n    const recurrenceCollectionObject = { monthCollection: [], index: 0 };\n    if (expectedDays.length === 1) {\n        // To split numeric value from BYDAY property value\n        const expectedDaysArrays = expectedDays[0].match(SPLITNUMBERANDSTRING);\n        let arrPosition;\n        if (expectedDaysArrays.length > 1) {\n            arrPosition = parseInt(expectedDaysArrays[0], 10);\n            index = ((arrPosition < 1) ? (monthCollection.length + arrPosition) : arrPosition - 1);\n        }\n        else {\n            index = 0;\n            monthCollection = getDateCollectionforBySetPosNull(monthCollection);\n        }\n    }\n    else {\n        index = 0;\n        monthCollection = getDateCollectionforBySetPosNull(monthCollection);\n    }\n    recurrenceCollectionObject.monthCollection = monthCollection;\n    recurrenceCollectionObject.index = index;\n    return recurrenceCollectionObject;\n}\n/**\n * Internal method to process the data collections\n *\n * @param {number[]} dateCollection Accepts the date collections\n * @param {boolean} state Accepts the state\n * @param {Date} startDate Accepts the start date\n * @param {Date} endDate Accepts the end date\n * @param {number[]} data Accepts the collection of numbers\n * @param {RecRule} ruleObject Accepts the recurrence rule object\n * @returns {void}\n * @private\n */\nfunction insertDataCollection(dateCollection, state, startDate, endDate, data, ruleObject) {\n    let index = ((ruleObject.setPosition < 1) ?\n        (dateCollection.length + ruleObject.setPosition) : ruleObject.setPosition - 1);\n    if (isNullOrUndefined(ruleObject.setPosition)) {\n        index = 0;\n        dateCollection = getDateCollectionforBySetPosNull(dateCollection);\n    }\n    if (dateCollection.length > 0) {\n        insertDatasIntoExistingCollection(dateCollection, state, startDate, endDate, data, ruleObject, index);\n    }\n}\n/**\n * To process month collection if BYSETPOS is null\n *\n * @param {number[]} monthCollection Accepts the month date collections\n * @returns {number[]} Returns the month date collections\n * @private\n */\nfunction getDateCollectionforBySetPosNull(monthCollection) {\n    const datas = [];\n    for (let week = 0; week < monthCollection.length; week++) {\n        for (let row = 0; row < monthCollection[week].length; row++) {\n            datas.push(new Date(monthCollection[week][row]).getTime());\n        }\n    }\n    monthCollection = datas.length > 0 ? [datas] : [];\n    return monthCollection;\n}\n/**\n * To filter date collection based on BYDAY Index, then BYSETPOS and to insert datas into existing collection\n *\n * @param {number[]} monthCollection Accepts the month date collections\n * @param {Date} startDate Accepts the start date\n * @param {Date} endDate Accepts the end date\n * @param {number[]} data Accepts the date collections\n * @param {RecRule} ruleObject Accepts the recurrence rule object\n * @returns {void}\n * @private\n */\nfunction insertDateCollectionBasedonIndex(monthCollection, startDate, endDate, data, ruleObject) {\n    const expectedDays = ruleObject.day;\n    let state;\n    let datas = [];\n    let dateCollection = [];\n    const recurrenceCollections = getRecurrenceCollection(monthCollection, expectedDays);\n    monthCollection = recurrenceCollections.monthCollection;\n    const index = recurrenceCollections.index;\n    if (ruleObject.setPosition != null) {\n        dateCollection = [(filterDateCollectionByIndex(monthCollection, index, datas))];\n        insertDateCollectionBasedonBySetPos(dateCollection, state, startDate, endDate, data, ruleObject);\n    }\n    else {\n        if (monthCollection.length > 0) {\n            insertDatasIntoExistingCollection(monthCollection, state, startDate, endDate, data, ruleObject, index);\n        }\n    }\n    datas = [];\n}\n/**\n * To filter date collection when BYDAY property having values with number\n *\n * @param {number[]} monthCollection Accepts the date collections\n * @param {number} index Accepts the index of date collections\n * @param {number[]} datas Accepts the collection of dates\n * @returns {number[]} Returns the collection of dates\n * @private\n */\nfunction filterDateCollectionByIndex(monthCollection, index, datas) {\n    for (let week = 0; week < monthCollection[index].length; week++) {\n        datas.push(monthCollection[index][week]);\n    }\n    return datas;\n}\n/**\n * To insert processed date collection in final array element\n *\n * @param {boolean} state Accepts the state of the recurrence rule\n * @param {Date} startDate Accepts the start date\n * @param {Date} endDate Accepts the end date\n * @param {number[]} data Accepts the collection of date\n * @param {RecRule} ruleObject Accepts the recurrence rule object\n * @param {number} dayData Accepts the date index\n * @returns {void}\n * @private\n */\nfunction insertDateCollection(state, startDate, endDate, data, ruleObject, dayData) {\n    const expectedCount = getDateCount$1(startDate, ruleObject);\n    const chDate = new Date(dayData);\n    state = validateRules(chDate, ruleObject);\n    if ((chDate >= startDate) && compareDates(chDate, endDate) && state\n        && expectedCount && (data.length + ruleObject.recExceptionCount) < expectedCount) {\n        excludeDateHandler(data, dayData);\n    }\n}\n/**\n * Return the last week number of given month and year.\n *\n * @param {number} year Accepts the Year in number format\n * @param {number} startDayOfWeek Accepts the start date\n * @param {number[]} monthCollection Accepts the collection of dates\n * @param {number} week Accepts the week in number format\n * @param {RecRule} ruleObject Accepts the recurrence rule object\n * @returns {number} returns week number\n * @private\n */\nfunction weekCount(year, startDayOfWeek, monthCollection, week, ruleObject) {\n    const firstDayOfWeek = startDayOfWeek || 0;\n    const firstOfMonth = new Date(year, ruleObject.month[0] - 1, 1);\n    const lastOfMonth = new Date(year, ruleObject.month[0] - 1, 0);\n    const numberOfDaysInMonth = lastOfMonth.getDate();\n    const firstWeekDay = (firstOfMonth.getDay() - firstDayOfWeek + 7) % 7;\n    const used = firstWeekDay + numberOfDaysInMonth;\n    const count = Math.ceil(used / 7) - 1;\n    const dayData = monthCollection[week][count];\n    const chDate = new Date(dayData);\n    const state = validateRules(chDate, ruleObject);\n    return (state) ? count : count - 1;\n}\n/**\n * To process date collection based on Byset position after process the collection based on BYDAY property value index: EX:BYDAY=1SUm-1SU\n *\n * @param {number[]} monthCollection Accepts the collection of dates\n * @param {boolean} state Accepts the state of the recurrence rule\n * @param {Date} startDate Accepts the start date\n * @param {Date} endDate Accepts the end date\n * @param {number[]} data Accepts the collection of date\n * @param {RecRule} ruleObject Accepts the recurrence rule object\n * @returns {void}\n * @private\n */\nfunction insertDateCollectionBasedonBySetPos(monthCollection, state, startDate, endDate, data, ruleObject) {\n    if (monthCollection.length > 0) {\n        for (let week = 0; week < monthCollection.length; week++) {\n            monthCollection[week].sort();\n            const expectedDays = ruleObject.day;\n            const isHavingNumber = expectedDays.map((item) => HASNUMBER.test(item));\n            const weekIndex = (ruleObject.freq === 'YEARLY' && (ruleObject.validRules.indexOf('BYMONTH') > -1) &&\n                !(isHavingNumber.indexOf(true) > -1)) ?\n                weekCount(new Date(monthCollection[0][0]).getFullYear(), 0, monthCollection, week, ruleObject)\n                : (monthCollection[week].length + ruleObject.setPosition);\n            const index = ((ruleObject.setPosition < 1) ? weekIndex : ruleObject.setPosition - 1);\n            const dayData = monthCollection[week][index];\n            insertDateCollection(state, startDate, endDate, data, ruleObject, dayData);\n        }\n    }\n}\n/**\n * To insert datas into existing collection which is processed from previous loop.\n *\n * @param {number[]} monthCollection Accepts the collection of dates\n * @param {boolean} state Accepts the state of the recurrence rule\n * @param {Date} startDate Accepts the start date\n * @param {Date} endDate Accepts the end date\n * @param {number[]} data Accepts the collection of date\n * @param {RecRule} ruleObject Accepts the recurrence rule object\n * @param {number} index Accepts the index value\n * @returns {void}\n * @private\n */\nfunction insertDatasIntoExistingCollection(monthCollection, state, startDate, endDate, data, ruleObject, index) {\n    if (monthCollection.length > 0) {\n        index = !isNullOrUndefined(index) ? index :\n            ((ruleObject.setPosition < 1)\n                ? (monthCollection.length + ruleObject.setPosition) : ruleObject.setPosition - 1);\n        monthCollection[index].sort();\n        for (let week = 0; week < monthCollection[index].length; week++) {\n            const dayData = monthCollection[index][week];\n            insertDateCollection(state, startDate, endDate, data, ruleObject, dayData);\n        }\n    }\n}\n/**\n * Internal method to compare dates\n *\n * @param {Date} startDate Accepts the start date\n * @param {Date} endDate Accepts the end date\n * @returns {boolean} Returns the result of checking start and end dates\n * @private\n */\nfunction compareDates(startDate, endDate) {\n    return endDate ? (startDate <= endDate) : true;\n}\n/**\n * Internal method to get day string\n *\n * @param {string} expectedDays Accepts the exception date string\n * @returns {string} Returns the valid string\n * @private\n */\nfunction getDayString(expectedDays) {\n    // To get BYDAY value without numeric value\n    const newstr = expectedDays.replace(REMOVENUMBERINSTRING, '');\n    return newstr;\n}\n/**\n * Internal method to check day index\n *\n * @param {number} day Accepts the day index\n * @param {string[]} expectedDays Accepts the exception dates\n * @returns {boolean} Returns the index date\n * @private\n */\nfunction checkDayIndex(day, expectedDays) {\n    const sortedExpectedDays = [];\n    expectedDays.forEach((element) => {\n        const expectedDaysNumberSplit = element.match(SPLITNUMBERANDSTRING);\n        if (expectedDaysNumberSplit.length === 2) {\n            sortedExpectedDays.push(expectedDaysNumberSplit[1]);\n        }\n        else {\n            sortedExpectedDays.push(expectedDaysNumberSplit[0]);\n        }\n    });\n    return (sortedExpectedDays.indexOf(DAYINDEX[day]) === -1);\n}\n/**\n * Internal method to get start date of week\n *\n * @param {Date} startDate Accepts the start date\n * @param {string[]} expectedDays Accepts the exception dates\n * @returns {Date} Return the week start date\n * @private\n */\nfunction getStartDateForWeek(startDate, expectedDays) {\n    const tempDate = new Date(startDate.getTime());\n    let newstr;\n    if (expectedDays.length > 0) {\n        const expectedDaysArr = [];\n        for (let i = 0; i <= expectedDays.length - 1; i++) {\n            newstr = getDayString(expectedDays[i]);\n            expectedDaysArr.push(newstr);\n        }\n        if (expectedDaysArr.indexOf(DAYINDEX[tempDate.getDay()]) === -1) {\n            do {\n                tempDate.setDate(tempDate.getDate() + 1);\n            } while (expectedDaysArr.indexOf(DAYINDEX[tempDate.getDay()]) === -1);\n        }\n    }\n    return tempDate;\n}\n/**\n * Method to generate recurrence rule object from given rule\n *\n * @param {string} rules Accepts the recurrence rule\n * @returns {RecRule} Returns the recurrence rule object\n */\nfunction extractObjectFromRule(rules) {\n    const ruleObject = {\n        freq: null,\n        interval: 1,\n        count: null,\n        until: null,\n        day: [],\n        wkst: null,\n        month: [],\n        weekNo: [],\n        monthDay: [],\n        yearDay: [],\n        setPosition: null,\n        validRules: []\n    };\n    const rulesList = rules.split(';');\n    let splitData = [];\n    let temp;\n    rulesList.forEach((data) => {\n        splitData = data.split('=');\n        switch (splitData[0]) {\n            case 'UNTIL':\n                temp = splitData[1];\n                ruleObject.until = getDateFromRecurrenceDateString(temp);\n                break;\n            case 'BYDAY':\n                ruleObject.day = splitData[1].split(',');\n                ruleObject.validRules.push(splitData[0]);\n                break;\n            case 'BYMONTHDAY':\n                ruleObject.monthDay = splitData[1].split(',').map(Number);\n                ruleObject.validRules.push(splitData[0]);\n                break;\n            case 'BYMONTH':\n                ruleObject.month = splitData[1].split(',').map(Number);\n                ruleObject.validRules.push(splitData[0]);\n                break;\n            case 'BYYEARDAY':\n                ruleObject.yearDay = splitData[1].split(',').map(Number);\n                ruleObject.validRules.push(splitData[0]);\n                break;\n            case 'BYWEEKNO':\n                ruleObject.weekNo = splitData[1].split(',').map(Number);\n                ruleObject.validRules.push(splitData[0]);\n                break;\n            case 'INTERVAL':\n                ruleObject.interval = parseInt(splitData[1], 10);\n                break;\n            case 'COUNT':\n                ruleObject.count = parseInt(splitData[1], 10);\n                break;\n            case 'BYSETPOS':\n                ruleObject.setPosition = parseInt(splitData[1], 10) > 4 ? -1 : parseInt(splitData[1], 10);\n                break;\n            case 'FREQ':\n                ruleObject.freq = splitData[1];\n                break;\n            case 'WKST':\n                ruleObject.wkst = splitData[1];\n                break;\n        }\n    });\n    if ((ruleObject.freq === 'MONTHLY') && (ruleObject.monthDay.length === 0)) {\n        const index = ruleObject.validRules.indexOf('BYDAY');\n        ruleObject.validRules.splice(index, 1);\n    }\n    return ruleObject;\n}\n/**\n * Internal method to validate proper date\n *\n * @param {Date} tempDate Accepts the date value\n * @param {number} data Accepts the data value\n * @param {Date} startDate Accepts the start date\n * @returns {boolean} Returns the result of date validate\n * @private\n */\nfunction validateProperDate(tempDate, data, startDate) {\n    const maxDate = calendarUtil.getMonthDaysCount(tempDate);\n    return (data <= maxDate) && (tempDate >= startDate);\n}\n/**\n * Internal method to process week days\n *\n * @param {string[]} expectedDays Accepts the expection dates\n * @returns {Object} Returns the weekdays object\n * @private\n */\nfunction processWeekDays(expectedDays) {\n    const dayCycle = {};\n    expectedDays.forEach((element, index) => {\n        if (index === expectedDays.length - 1) {\n            const startIndex = dayIndex.indexOf(element);\n            let temp = startIndex;\n            while (temp % 7 !== dayIndex.indexOf(expectedDays[0])) {\n                temp++;\n            }\n            dayCycle[element] = temp - startIndex;\n        }\n        else {\n            dayCycle[element] = dayIndex.indexOf(expectedDays[(index + 1)]) - dayIndex.indexOf(element);\n        }\n    });\n    return dayCycle;\n}\n/**\n * Internal method to check date\n *\n * @param {Date} tempDate Accepts the date value\n * @param {number[]} expectedDate Accepts the exception dates\n * @returns {boolean} Returns the boolean value\n * @private\n */\nfunction checkDate(tempDate, expectedDate) {\n    const temp = expectedDate.slice(0);\n    let data;\n    const maxDate = calendarUtil.getMonthDaysCount(tempDate);\n    data = temp.shift();\n    while (data) {\n        if (data < 0) {\n            data = data + maxDate + 1;\n        }\n        if (data === tempDate.getDate()) {\n            return false;\n        }\n        data = temp.shift();\n    }\n    return true;\n}\n/**\n * Internal method to check the year value\n *\n * @param {Date} tempDate Accepts the date value\n * @param {number[]} expectedyearDay Accepts the exception dates in year\n * @returns {boolean} Returns the boolean value\n * @private\n */\nfunction checkYear(tempDate, expectedyearDay) {\n    const temp = expectedyearDay.slice(0);\n    let data;\n    const yearDay = getYearDay(tempDate);\n    data = temp.shift();\n    while (data) {\n        if (data < 0) {\n            data = data + calendarUtil.getYearDaysCount(tempDate, 0) + 1;\n        }\n        if (data === yearDay) {\n            return false;\n        }\n        data = temp.shift();\n    }\n    return true;\n}\n/**\n * Internal method to get the year day\n *\n * @param {Date} currentDate Accepts the date value\n * @returns {number} Returns the boolean value\n * @private\n */\nfunction getYearDay(currentDate) {\n    if (!startDateCollection[calendarUtil.getFullYear(currentDate)]) {\n        startDateCollection[calendarUtil.getFullYear(currentDate)] = calendarUtil.getYearLastDate(currentDate, 0);\n    }\n    const tempDate = startDateCollection[calendarUtil.getFullYear(currentDate)];\n    const diff = currentDate.getTime() - tempDate.getTime();\n    return Math.ceil(diff / MS_PER_DAY);\n}\n/**\n * Internal method to validate monthly rule type\n *\n * @param {RecRule} ruleObject Accepts the recurrence rule object\n * @returns {MonthlyType} Returns the monthly type object\n * @private\n */\nfunction validateMonthlyRuleType(ruleObject) {\n    if (ruleObject.monthDay.length && !ruleObject.day.length) {\n        return 'date';\n    }\n    else if (!ruleObject.monthDay.length && ruleObject.day.length) {\n        return 'day';\n    }\n    return 'both';\n}\n/**\n * Internal method to re-order the week days based on first day of week\n *\n * @param {string[]} days Accepts the week days value\n * @returns {void}\n * @private\n */\nfunction rotate(days) {\n    const data = days.shift();\n    days.push(data);\n}\n/**\n * Internal method to set first day of week\n *\n * @param {string} day Accepts the first day string\n * @returns {void}\n * @private\n */\nfunction setFirstDayOfWeek(day) {\n    while (dayIndex[0] !== day) {\n        rotate(dayIndex);\n    }\n}\n/**\n * Internal method to validate recurrence rule\n *\n * @param {Date} tempDate Accepts the date value\n * @param {RecRule} ruleObject Accepts the recurrence rule object\n * @returns {boolean} Returns the boolean value\n * @private\n */\nfunction validateRules(tempDate, ruleObject) {\n    let state = true;\n    const expectedDays = ruleObject.day;\n    const expectedMonth = ruleObject.month;\n    const expectedDate = calendarUtil.getExpectedDays(tempDate, ruleObject.monthDay);\n    const expectedyearDay = ruleObject.yearDay;\n    ruleObject.validRules.forEach((rule) => {\n        switch (rule) {\n            case 'BYDAY':\n                if (checkDayIndex(tempDate.getDay(), expectedDays)) {\n                    state = false;\n                }\n                break;\n            case 'BYMONTH':\n                if (calendarUtil.checkMonth(tempDate, expectedMonth)) {\n                    state = false;\n                }\n                break;\n            case 'BYMONTHDAY':\n                if (checkDate(tempDate, expectedDate)) {\n                    state = false;\n                }\n                break;\n            case 'BYYEARDAY':\n                if (checkYear(tempDate, expectedyearDay)) {\n                    state = false;\n                }\n                break;\n        }\n    });\n    return state;\n}\n/**\n * Internal method to get calendar util\n *\n * @param {CalendarType} calendarMode Accepts the calendar type object\n * @returns {CalendarUtil} Returns the calendar util object\n * @private\n */\nfunction getCalendarUtil(calendarMode) {\n    if (calendarMode === 'Islamic') {\n        return new Islamic();\n    }\n    return new Gregorian();\n}\nconst startDateCollection = {};\nlet tempExcludeDate;\nconst dayIndex = ['SU', 'MO', 'TU', 'WE', 'TH', 'FR', 'SA'];\nlet maxOccurrence;\nlet tempViewDate;\nlet calendarUtil;\nconst DAYINDEX = ['SU', 'MO', 'TU', 'WE', 'TH', 'FR', 'SA'];\nconst MAXOCCURRENCE = 43;\nconst WEEKPOS = ['first', 'second', 'third', 'fourth', 'last'];\nconst TIMES = 'summaryTimes';\nconst ON = 'summaryOn';\nconst EVERY = 'every';\nconst UNTIL = 'summaryUntil';\nconst DAYS = 'summaryDay';\nconst WEEKS = 'summaryWeek';\nconst MONTHS = 'summaryMonth';\nconst YEARS = 'summaryYear';\nconst DAYINDEXOBJECT = {\n    SU: 'sun',\n    MO: 'mon',\n    TU: 'tue',\n    WE: 'wed',\n    TH: 'thu',\n    FR: 'fri',\n    SA: 'sat'\n};\n// To check string has number\nconst HASNUMBER = /\\d/;\n// To find the numbers in string\nconst REMOVENUMBERINSTRING = /[^A-Z]+/;\n// To split number and string\nconst SPLITNUMBERANDSTRING = /[a-z]+|[^a-z]+/gi;\n/**\n * Method to generate string from date\n *\n * @param {Date} date Accepts the date value\n * @returns {string} Returns the string value\n */\nfunction getRecurrenceStringFromDate(date) {\n    return [date.getUTCFullYear(),\n        roundDateValues(date.getUTCMonth() + 1),\n        roundDateValues(date.getUTCDate()),\n        'T',\n        roundDateValues(date.getUTCHours()),\n        roundDateValues(date.getUTCMinutes()),\n        roundDateValues(date.getUTCSeconds()),\n        'Z'].join('');\n}\n/**\n * Internal method to round the date values\n *\n * @param {string | number} date Accepts the date value in either string or number format\n * @returns {string} Returns the date value in string format\n * @private\n */\nfunction roundDateValues(date) {\n    return ('0' + date).slice(-2);\n}\n\n/* eslint-disable @typescript-eslint/no-explicit-any */\n/* eslint-disable max-len */\n/**\n * EventBase for appointment rendering\n */\nclass EventBase {\n    /**\n     * Constructor for EventBase\n     *\n     * @param {Schedule} parent Accepts the schedule instance\n     */\n    constructor(parent) {\n        this.slots = [];\n        this.isDoubleTapped = false;\n        this.parent = parent;\n    }\n    processData(events, timeZonePropChanged, oldTimezone) {\n        const start = this.parent.activeView.startDate();\n        const end = this.parent.activeView.endDate();\n        const fields = this.parent.eventFields;\n        let processed = [];\n        let temp = 1;\n        let generateID = false;\n        const resourceCollection = this.parent.resourceBase ? this.parent.resourceBase.resourceCollection : [];\n        if (events.length > 0 && isNullOrUndefined(events[0][fields.id])) {\n            generateID = true;\n        }\n        for (let event of events) {\n            if (generateID) {\n                event[fields.id] = temp++;\n            }\n            event = this.updateEventDateTime(event);\n            if (timeZonePropChanged) {\n                this.processTimezoneChange(event, oldTimezone);\n            }\n            else if (!this.parent.isPrinting) {\n                event = this.processTimezone(event);\n            }\n            for (let level = 0; level < resourceCollection.length; level++) {\n                if (event[resourceCollection[level].field] === null || event[resourceCollection[level].field] === 0) {\n                    event[resourceCollection[level].field] = undefined;\n                }\n            }\n            if (!isNullOrUndefined(event[fields.recurrenceRule]) && event[fields.recurrenceRule] === '') {\n                event[fields.recurrenceRule] = null;\n            }\n            if (!isNullOrUndefined(event[fields.recurrenceRule]) && isNullOrUndefined(event[fields.recurrenceID]) &&\n                !(this.parent.crudModule && this.parent.crudModule.crudObj.isCrudAction)) {\n                processed = processed.concat(this.generateOccurrence(event, null, oldTimezone, true));\n            }\n            else {\n                if (this.parent.crudModule && this.parent.crudModule.crudObj.isCrudAction) {\n                    if (!isNullOrUndefined(event[fields.recurrenceRule]) && isNullOrUndefined(event[fields.recurrenceID])) {\n                        const recurrenceEvent = this.generateOccurrence(event, null, oldTimezone, true);\n                        for (const occurrence of recurrenceEvent) {\n                            const app = this.parent.eventsProcessed.filter((data) => data[fields.startTime].getTime() - occurrence[fields.startTime].getTime() === 0 &&\n                                data[fields.id] === occurrence[fields.id]);\n                            occurrence.Guid = (app.length > 0) ? app[0].Guid : this.generateGuid();\n                            processed.push(occurrence);\n                        }\n                    }\n                    else {\n                        const app = this.parent.eventsProcessed.filter((data) => data[this.parent.eventFields.id] === event[this.parent.eventFields.id]);\n                        event.Guid = (app.length > 0) ? app[0].Guid : this.generateGuid();\n                        processed.push(event);\n                    }\n                }\n                else {\n                    event.Guid = this.generateGuid();\n                    processed.push(event);\n                }\n            }\n        }\n        this.parent.eventsProcessed = [];\n        const eventData = processed.filter((data) => !data[this.parent.eventFields.isBlock]);\n        this.parent.eventsProcessed = this.filterEvents(start, end, eventData);\n        const blockData = processed.filter((data) => data[this.parent.eventFields.isBlock]);\n        for (const eventObj of blockData) {\n            if (eventObj[fields.isAllDay]) {\n                const isDifferentDate = resetTime(new Date(eventObj[fields.startTime].getTime())) <\n                    resetTime(new Date(eventObj[fields.endTime].getTime()));\n                if (!isDifferentDate) {\n                    eventObj[fields.startTime] = resetTime(eventObj[fields.startTime]);\n                    eventObj[fields.endTime] = addDays(resetTime(eventObj[fields.endTime]), 1);\n                }\n            }\n        }\n        this.parent.blockProcessed = blockData;\n        return eventData;\n    }\n    updateEventDateTime(eventData) {\n        if (typeof eventData[this.parent.eventFields.startTime] === 'string') {\n            eventData[this.parent.eventFields.startTime] = getDateFromString(eventData[this.parent.eventFields.startTime]);\n        }\n        if (typeof eventData[this.parent.eventFields.endTime] === 'string') {\n            eventData[this.parent.eventFields.endTime] = getDateFromString(eventData[this.parent.eventFields.endTime]);\n        }\n        return eventData;\n    }\n    getProcessedEvents(eventCollection = this.parent.eventsData) {\n        let processed = [];\n        for (const event of eventCollection) {\n            if (!isNullOrUndefined(event[this.parent.eventFields.recurrenceRule]) &&\n                isNullOrUndefined(event[this.parent.eventFields.recurrenceID])) {\n                processed = processed.concat(this.generateOccurrence(event));\n            }\n            else {\n                processed.push(event);\n            }\n        }\n        return processed;\n    }\n    timezonePropertyChange(oldTimezone) {\n        const data = this.parent.eventsData.concat(this.parent.blockData);\n        const processed = this.processData(data, true, oldTimezone);\n        this.parent.notify(dataReady, { processedData: processed });\n    }\n    timezoneConvert(eventData) {\n        const fields = this.parent.eventFields;\n        eventData[fields.startTimezone] = eventData[fields.startTimezone] || eventData[fields.endTimezone];\n        eventData[fields.endTimezone] = eventData[fields.endTimezone] || eventData[fields.startTimezone];\n        if (this.parent.timezone) {\n            const startTz = eventData[fields.startTimezone];\n            const endTz = eventData[fields.endTimezone];\n            eventData[fields.startTime] = this.parent.tzModule.convert(eventData[fields.startTime], this.parent.timezone, startTz);\n            eventData[fields.endTime] = this.parent.tzModule.convert(eventData[fields.endTime], this.parent.timezone, endTz);\n        }\n    }\n    processTimezoneChange(event, oldTimezone) {\n        const fields = this.parent.eventFields;\n        if (event[fields.isAllDay]) {\n            return;\n        }\n        if (oldTimezone && this.parent.timezone) {\n            event[fields.startTime] = this.parent.tzModule.convert(event[fields.startTime], oldTimezone, this.parent.timezone);\n            event[fields.endTime] = this.parent.tzModule.convert(event[fields.endTime], oldTimezone, this.parent.timezone);\n        }\n        else if (!oldTimezone && this.parent.timezone) {\n            event[fields.startTime] = this.parent.tzModule.add(event[fields.startTime], this.parent.timezone);\n            event[fields.endTime] = this.parent.tzModule.add(event[fields.endTime], this.parent.timezone);\n        }\n        else if (oldTimezone && !this.parent.timezone) {\n            event[fields.startTime] = this.parent.tzModule.remove(event[fields.startTime], oldTimezone);\n            event[fields.endTime] = this.parent.tzModule.remove(event[fields.endTime], oldTimezone);\n        }\n    }\n    processTimezone(event, isReverse = false) {\n        const fields = this.parent.eventFields;\n        if (event[fields.startTimezone] || event[fields.endTimezone]) {\n            const startTimezone = event[fields.startTimezone] || event[fields.endTimezone];\n            const endTimezone = event[fields.endTimezone] || event[fields.startTimezone];\n            if (isReverse) {\n                if (this.parent.timezone) {\n                    event[fields.startTime] = this.parent.tzModule.convert(event[fields.startTime], startTimezone, this.parent.timezone);\n                    event[fields.endTime] = this.parent.tzModule.convert(event[fields.endTime], endTimezone, this.parent.timezone);\n                    event[fields.startTime] = this.parent.tzModule.remove(event[fields.startTime], this.parent.timezone);\n                    event[fields.endTime] = this.parent.tzModule.remove(event[fields.endTime], this.parent.timezone);\n                }\n                else {\n                    event[fields.startTime] = this.parent.tzModule.remove(event[fields.startTime], startTimezone);\n                    event[fields.endTime] = this.parent.tzModule.remove(event[fields.endTime], endTimezone);\n                }\n            }\n            else {\n                event[fields.startTime] = this.parent.tzModule.add(event[fields.startTime], startTimezone);\n                event[fields.endTime] = this.parent.tzModule.add(event[fields.endTime], endTimezone);\n                if (this.parent.timezone) {\n                    event[fields.startTime] = this.parent.tzModule.convert(event[fields.startTime], startTimezone, this.parent.timezone);\n                    event[fields.endTime] = this.parent.tzModule.convert(event[fields.endTime], endTimezone, this.parent.timezone);\n                }\n            }\n        }\n        else if (this.parent.timezone) {\n            if (isReverse) {\n                event[fields.startTime] = this.parent.tzModule.remove(event[fields.startTime], this.parent.timezone);\n                event[fields.endTime] = this.parent.tzModule.remove(event[fields.endTime], this.parent.timezone);\n            }\n            else {\n                event[fields.startTime] = this.parent.tzModule.add(event[fields.startTime], this.parent.timezone);\n                event[fields.endTime] = this.parent.tzModule.add(event[fields.endTime], this.parent.timezone);\n            }\n        }\n        return event;\n    }\n    filterBlockEvents(eventObj) {\n        const fields = this.parent.eventFields;\n        const eStart = eventObj[fields.startTime];\n        const eEnd = eventObj[fields.endTime];\n        let resourceData;\n        if (this.parent.activeViewOptions.group.resources.length > 0) {\n            const data = this.getGroupIndexFromEvent(eventObj);\n            resourceData = this.parent.resourceBase.lastResourceLevel[data];\n        }\n        const blockEvents = extend([], this.parent.blockProcessed, null, true);\n        for (const eventObj of blockEvents) {\n            if (eventObj[fields.isAllDay]) {\n                const isDifferentTime = eventObj[fields.endTime].getTime() >\n                    resetTime(new Date(eventObj[fields.endTime].getTime())).getTime();\n                if (isDifferentTime) {\n                    eventObj[fields.startTime] = resetTime(eventObj[fields.startTime]);\n                    eventObj[fields.endTime] = addDays(resetTime(eventObj[fields.endTime]), 1);\n                }\n            }\n        }\n        return this.filterEvents(eStart, eEnd, blockEvents, resourceData);\n    }\n    filterEvents(startDate, endDate, appointments = this.parent.eventsProcessed, resourceTdData) {\n        const fieldMapping = this.parent.eventFields;\n        const predicate = new Predicate(fieldMapping.startTime, 'greaterthanorequal', startDate).\n            and(new Predicate(fieldMapping.endTime, 'greaterthanorequal', startDate)).\n            and(new Predicate(fieldMapping.startTime, 'lessthan', endDate)).\n            or(new Predicate(fieldMapping.startTime, 'lessthanorequal', startDate).\n            and(new Predicate(fieldMapping.endTime, 'greaterthan', startDate)));\n        let filter = new DataManager({ json: appointments }).executeLocal(new Query().where(predicate));\n        if (resourceTdData) {\n            filter = this.filterEventsByResource(resourceTdData, filter);\n        }\n        return this.sortByTime(filter);\n    }\n    filterEventsByRange(eventCollection, startDate, endDate) {\n        let filteredEvents = [];\n        if (startDate && endDate) {\n            filteredEvents = this.filterEvents(startDate, endDate, eventCollection);\n        }\n        else if (startDate && !endDate) {\n            filteredEvents = eventCollection.filter((e) => e[this.parent.eventFields.startTime] >= startDate);\n        }\n        else if (!startDate && endDate) {\n            filteredEvents = eventCollection.filter((e) => e[this.parent.eventFields.endTime] <= endDate);\n        }\n        else {\n            filteredEvents = eventCollection;\n        }\n        return this.sortByTime(filteredEvents);\n    }\n    filterEventsByResource(resourceTdData, appointments = this.parent.eventsProcessed) {\n        const predicate = {};\n        const resourceCollection = this.parent.resourceBase.resourceCollection;\n        for (let level = 0; level < resourceCollection.length; level++) {\n            predicate[resourceCollection[level].field] = resourceTdData.groupOrder[level];\n        }\n        const keys = Object.keys(predicate);\n        const filteredCollection = appointments.filter((eventObj) => keys.every((key) => {\n            if (eventObj[key] instanceof Array) {\n                return eventObj[key].indexOf(predicate[key]) > -1;\n            }\n            else {\n                return eventObj[key] === predicate[key];\n            }\n        }));\n        return filteredCollection;\n    }\n    sortByTime(appointmentsCollection) {\n        if (this.parent.eventSettings.sortComparer) {\n            appointmentsCollection = this.parent.eventSettings.sortComparer.call(this.parent, appointmentsCollection);\n        }\n        else {\n            const fieldMappings = this.parent.eventFields;\n            appointmentsCollection.sort((a, b) => {\n                const d1 = a[fieldMappings.startTime];\n                const d2 = b[fieldMappings.startTime];\n                return d1.getTime() - d2.getTime();\n            });\n        }\n        return appointmentsCollection;\n    }\n    sortByDateTime(appointments) {\n        if (this.parent.eventSettings.sortComparer) {\n            appointments = this.parent.eventSettings.sortComparer.call(this.parent, appointments);\n        }\n        else {\n            const fieldMapping = this.parent.eventFields;\n            appointments.sort((object1, object2) => {\n                const d3 = object1[fieldMapping.startTime];\n                const d4 = object2[fieldMapping.startTime];\n                const d5 = object1[fieldMapping.endTime];\n                const d6 = object2[fieldMapping.endTime];\n                const d1 = d5.getTime() - d3.getTime();\n                const d2 = d6.getTime() - d4.getTime();\n                return (d3.getTime() - d4.getTime() || d2 - d1);\n            });\n        }\n        return appointments;\n    }\n    getSmallestMissingNumber(array) {\n        const large = Math.max(...array);\n        for (let i = 0; i < large; i++) {\n            if (array.indexOf(i) === -1) {\n                return i;\n            }\n        }\n        return large + 1;\n    }\n    splitEventByDay(event) {\n        const eventFields = this.parent.eventFields;\n        const data = [];\n        const eventStartTime = event[eventFields.startTime];\n        const eventEndTime = event[eventFields.endTime];\n        const isDifferentDate = resetTime(new Date(eventStartTime.getTime())) <\n            resetTime(new Date(eventEndTime.getTime()));\n        if (isDifferentDate) {\n            let start = new Date(eventStartTime.getTime());\n            let end = addDays(resetTime(new Date(eventStartTime.getTime())), 1);\n            const endDate = (eventEndTime.getHours() === 0 && eventEndTime.getMinutes() === 0) ?\n                eventEndTime : addDays(eventEndTime, 1);\n            let index = 1;\n            const eventLength = getDaysCount(eventStartTime.getTime(), endDate.getTime());\n            while (end <= eventEndTime && start.getTime() !== end.getTime()) {\n                const app = extend({}, event);\n                app[eventFields.startTime] = start;\n                app[eventFields.endTime] = end;\n                app.data = { index: index, count: eventLength };\n                app.Guid = this.generateGuid();\n                app.isSpanned = true;\n                data.push(app);\n                start = end;\n                if ((resetTime(new Date(start.getTime())).getTime() === resetTime(new Date(eventEndTime.getTime())).getTime())\n                    && !(end.getTime() === eventEndTime.getTime())) {\n                    end = new Date(start.getTime());\n                    end = new Date(end.setHours(eventEndTime.getHours(), eventEndTime.getMinutes(), eventEndTime.getSeconds()));\n                }\n                else {\n                    end = addDays(resetTime(new Date(start.getTime())), 1);\n                }\n                index++;\n            }\n        }\n        else {\n            data.push(event);\n        }\n        return data;\n    }\n    splitEvent(event, dateRender) {\n        const fields = this.parent.eventFields;\n        let start = resetTime(event[fields.startTime]).getTime();\n        let end = resetTime(event[fields.endTime]).getTime();\n        if (getDateInMs(event[fields.endTime]) <= 0) {\n            const temp = addDays(resetTime(event[fields.endTime]), -1).getTime();\n            end = start > temp ? start : temp;\n        }\n        const orgStart = start;\n        const orgEnd = end;\n        const ranges = [];\n        if (start !== end) {\n            if (start < dateRender[0].getTime()) {\n                start = dateRender[0].getTime();\n            }\n            if (end > dateRender[dateRender.length - 1].getTime()) {\n                end = dateRender[dateRender.length - 1].getTime();\n            }\n            let cStart = start;\n            for (let level = 0; level < this.slots.length; level++) {\n                let slot = this.slots[level];\n                if (this.parent.currentView === 'WorkWeek' || this.parent.currentView === 'TimelineWorkWeek'\n                    || this.parent.activeViewOptions.group.byDate || this.parent.activeViewOptions.showWeekend) {\n                    const slotDates = [];\n                    for (const s of slot) {\n                        slotDates.push(new Date(s));\n                    }\n                    const renderedDates = this.getRenderedDates(slotDates);\n                    if (!isNullOrUndefined(renderedDates) && renderedDates.length > 0) {\n                        slot = [];\n                        for (const date of renderedDates) {\n                            slot.push(date.getTime());\n                        }\n                    }\n                }\n                if (typeof (slot) === 'number') {\n                    const temp = slot;\n                    slot = [];\n                    slot.push(temp);\n                }\n                const firstSlot = slot[0];\n                cStart = (cStart <= firstSlot && end >= firstSlot) ? firstSlot : cStart;\n                if (cStart > end || firstSlot > end) {\n                    break;\n                }\n                if (!this.parent.activeViewOptions.group.byDate && this.parent.activeViewOptions.showWeekend &&\n                    this.parent.currentView !== 'WorkWeek' && this.parent.currentView !== 'TimelineWorkWeek') {\n                    const startIndex = slot.indexOf(cStart);\n                    if (startIndex !== -1) {\n                        let endIndex = slot.indexOf(end);\n                        const hasBreak = endIndex !== -1;\n                        endIndex = hasBreak ? endIndex : slot.length - 1;\n                        const count = ((endIndex - startIndex) + 1);\n                        const isLeft = (slot[startIndex] !== orgStart);\n                        const isRight = (slot[endIndex] !== orgEnd);\n                        ranges.push(this.cloneEventObject(event, slot[startIndex], slot[endIndex], count, isLeft, isRight));\n                        if (hasBreak) {\n                            break;\n                        }\n                    }\n                }\n                else {\n                    if (this.dateInRange(cStart, slot[0], slot[slot.length - 1])) {\n                        const availSlot = [];\n                        for (let i = 0; i < slot.length; i++) {\n                            if (this.dateInRange(slot[i], orgStart, orgEnd)) {\n                                availSlot.push(slot[i]);\n                            }\n                        }\n                        if (availSlot.length > 0) {\n                            if (!this.parent.activeViewOptions.group.byDate) {\n                                const isLeft = (availSlot[0] !== orgStart);\n                                const isRight = (availSlot[availSlot.length - 1] !== orgEnd);\n                                ranges.push(this.cloneEventObject(event, availSlot[0], availSlot[availSlot.length - 1], availSlot.length, isLeft, isRight));\n                            }\n                            else {\n                                for (const slot of availSlot) {\n                                    ranges.push(this.cloneEventObject(event, slot, slot, 1, (slot !== orgStart), (slot !== orgEnd)));\n                                }\n                            }\n                        }\n                    }\n                }\n            }\n        }\n        else {\n            ranges.push(this.cloneEventObject(event, start, end, 1, false, false));\n        }\n        return ranges;\n    }\n    cloneEventObject(event, start, end, count, isLeft, isRight) {\n        const fields = this.parent.eventFields;\n        const e = extend({}, event, null, true);\n        const data = { count: count, isLeft: isLeft, isRight: isRight };\n        data[fields.startTime] = event[fields.startTime];\n        data[fields.endTime] = event[fields.endTime];\n        e.data = data;\n        e[fields.startTime] = new Date(start);\n        e[fields.endTime] = new Date(end);\n        return e;\n    }\n    dateInRange(date, start, end) {\n        return start <= date && date <= end;\n    }\n    getSelectedEventElements(target) {\n        this.removeSelectedAppointmentClass();\n        if (this.parent.selectedElements.length <= 0) {\n            this.parent.selectedElements.push(target);\n        }\n        else {\n            const isAlreadySelected = this.parent.selectedElements.filter((element) => element.getAttribute('data-guid') === target.getAttribute('data-guid'));\n            if (isAlreadySelected.length <= 0) {\n                const elementSelector = 'div[data-guid=\"' + target.getAttribute('data-guid') + '\"]';\n                const focusElements = [].slice.call(this.parent.element.querySelectorAll(elementSelector));\n                for (const element of focusElements) {\n                    this.parent.selectedElements.push(element);\n                }\n            }\n            else {\n                const selectedElements = this.parent.selectedElements.filter((element) => element.getAttribute('data-guid') !== target.getAttribute('data-guid'));\n                this.parent.selectedElements = selectedElements;\n            }\n        }\n        if (target && this.parent.selectedElements.length > 0) {\n            this.addSelectedAppointments(this.parent.selectedElements);\n        }\n        return this.parent.selectedElements;\n    }\n    getSelectedEvents() {\n        const eventSelect = [];\n        const elementSelect = [];\n        const selectAppointments = [].slice.call(this.parent.element.querySelectorAll('.' + APPOINTMENT_BORDER));\n        selectAppointments.filter((element) => {\n            const isAlreadyAdded = eventSelect.filter((event) => {\n                return event.Guid === element.getAttribute('data-guid');\n            });\n            if (isAlreadyAdded.length === 0) {\n                eventSelect.push(this.getEventByGuid(element.getAttribute('data-guid')));\n            }\n            elementSelect.push(element);\n        });\n        return {\n            event: eventSelect.length > 1 ? eventSelect : eventSelect[0],\n            element: elementSelect.length > 1 ? elementSelect : elementSelect[0]\n        };\n    }\n    removeSelectedAppointmentClass() {\n        const selectedAppointments = this.getSelectedAppointments();\n        for (const appointment of selectedAppointments) {\n            appointment.setAttribute('aria-selected', 'false');\n        }\n        removeClass(selectedAppointments, APPOINTMENT_BORDER);\n        if (this.parent.currentView === 'Agenda' || this.parent.currentView === 'MonthAgenda') {\n            removeClass(selectedAppointments, AGENDA_SELECTED_CELL);\n        }\n    }\n    addSelectedAppointments(cells) {\n        for (const cell of cells) {\n            cell.setAttribute('aria-selected', 'true');\n        }\n        if (this.parent.currentView !== 'MonthAgenda') {\n            this.parent.removeSelectedClass();\n        }\n        addClass(cells, APPOINTMENT_BORDER);\n    }\n    getSelectedAppointments() {\n        return [].slice.call(this.parent.element.querySelectorAll('.' + APPOINTMENT_BORDER + ',.' + APPOINTMENT_CLASS + ':focus'));\n    }\n    focusElement(isFocused) {\n        if (this.parent.eventWindow.dialogObject && this.parent.eventWindow.dialogObject.visible) {\n            return;\n        }\n        const activeEle = document.activeElement;\n        const selectedCell = this.parent.getSelectedElements();\n        if (selectedCell.length > 0 && ((activeEle && (this.parent.element.contains(activeEle) ||\n            selectedCell.indexOf(activeEle) !== -1)) || isFocused)) {\n            if (this.parent.keyboardInteractionModule) {\n                const target = ((!isNullOrUndefined(this.parent.activeCellsData) &&\n                    this.parent.activeCellsData.element) || selectedCell[selectedCell.length - 1]);\n                this.parent.keyboardInteractionModule.selectCells(target instanceof Array, target);\n            }\n            return;\n        }\n        const selectedAppointments = this.getSelectedAppointments();\n        if (selectedAppointments.length > 0) {\n            selectedAppointments[selectedAppointments.length - 1].focus();\n            return;\n        }\n    }\n    selectWorkCellByTime(eventsData) {\n        let target;\n        if (this.parent.currentView === 'Agenda' || this.parent.currentView === 'MonthAgenda') {\n            return target;\n        }\n        if (eventsData.length > 0) {\n            const selectedObject = eventsData[eventsData.length - 1];\n            const eventStartTime = selectedObject[this.parent.eventFields.startTime];\n            let nearestTime = new Date(+eventStartTime).setMinutes(0, 0, 0);\n            const isAllDay = this.isAllDayAppointment(selectedObject);\n            if (this.parent.currentView === 'Month' || isAllDay) {\n                nearestTime = new Date(+eventStartTime).setHours(0, 0, 0, 0);\n            }\n            let targetArea;\n            if (isAllDay && ['Day', 'Week', 'WorkWeek'].indexOf(this.parent.currentView) !== -1) {\n                targetArea = this.parent.getAllDayRow();\n            }\n            else {\n                targetArea = this.parent.getContentTable();\n            }\n            let queryString = '[data-date=\"' + new Date(nearestTime).getTime() + '\"]';\n            if (this.parent.activeViewOptions.group.resources.length > 0) {\n                queryString += '[data-group-index=\"' + this.getGroupIndexFromEvent(selectedObject) + '\"]';\n            }\n            target = targetArea.querySelector(queryString);\n            if (target) {\n                this.parent.activeCellsData = this.parent.getCellDetails(target);\n                if (this.parent.keyboardInteractionModule) {\n                    this.parent.keyboardInteractionModule.selectCells(false, target);\n                }\n                return target;\n            }\n        }\n        return target;\n    }\n    getGroupIndexFromEvent(eventData) {\n        let levelIndex;\n        let resource;\n        let levelName;\n        let idField;\n        for (let i = this.parent.resourceBase.resourceCollection.length - 1; i >= 0; i--) {\n            const resourceData = eventData[this.parent.resourceBase.resourceCollection[i].field];\n            if (!isNullOrUndefined(resourceData)) {\n                resource = this.parent.resourceBase.resourceCollection[i];\n                levelIndex = i;\n                levelName = resource.name;\n                idField = resource.field;\n                break;\n            }\n        }\n        if (isNullOrUndefined(levelName) && isNullOrUndefined(levelIndex)) {\n            levelName = this.parent.resourceCollection.slice(-1)[0].name;\n            levelIndex = this.parent.resourceCollection.length - 1;\n            idField = this.parent.resourceCollection.slice(-1)[0].field;\n            resource = this.parent.resourceCollection.filter((e, index) => {\n                if (e.name === levelName) {\n                    levelIndex = index;\n                    return e;\n                }\n                return null;\n            })[0];\n        }\n        const id = ((eventData[idField] instanceof Array) ?\n            eventData[idField][0] : eventData[idField]);\n        if (levelIndex > 0) {\n            const parentField = this.parent.resourceCollection[levelIndex - 1].field;\n            return this.parent.resourceBase.getIndexFromResourceId(id, levelName, resource, eventData, parentField);\n        }\n        else {\n            return this.parent.resourceBase.getIndexFromResourceId(id, levelName, resource);\n        }\n    }\n    isAllDayAppointment(event) {\n        const fieldMapping = this.parent.eventFields;\n        const isAllDay = event[fieldMapping.isAllDay];\n        const isFullDay = ((event[fieldMapping.endTime].getTime() - event[fieldMapping.startTime].getTime())\n            / MS_PER_DAY) >= 1;\n        return (isAllDay || (this.parent.eventSettings.spannedEventPlacement !== 'TimeSlot' && isFullDay)) ? true : false;\n    }\n    addEventListener() {\n        this.parent.on(documentClick, this.appointmentBorderRemove, this);\n    }\n    removeEventListener() {\n        this.parent.off(documentClick, this.appointmentBorderRemove);\n    }\n    appointmentBorderRemove(event) {\n        const element = event.event.target;\n        if (closest(element, '.' + APPOINTMENT_CLASS)) {\n            if (this.parent.currentView !== 'MonthAgenda') {\n                this.parent.removeSelectedClass();\n            }\n        }\n        else if (!closest(element, '.' + POPUP_OPEN)) {\n            this.removeSelectedAppointmentClass();\n        }\n    }\n    wireAppointmentEvents(element, event, isPreventCrud = false) {\n        const isReadOnly = (!isNullOrUndefined(event)) ? event[this.parent.eventFields.isReadonly] : false;\n        EventHandler.add(element, 'click', this.eventClick, this);\n        if (!this.parent.isAdaptive && !this.parent.activeViewOptions.readonly && !isReadOnly) {\n            EventHandler.add(element, 'touchstart', this.eventTouchClick, this);\n            EventHandler.add(element, 'dblclick', this.eventDoubleClick, this);\n        }\n        if (!this.parent.activeViewOptions.readonly && !isReadOnly && !isPreventCrud) {\n            if (this.parent.resizeModule) {\n                this.parent.resizeModule.wireResizeEvent(element);\n            }\n            if (this.parent.dragAndDropModule) {\n                this.parent.dragAndDropModule.wireDragEvent(element);\n            }\n        }\n    }\n    eventTouchClick(e) {\n        setTimeout(() => this.isDoubleTapped = false, 250);\n        e.preventDefault();\n        if (this.isDoubleTapped) {\n            this.eventDoubleClick(e);\n        }\n        else if (!this.isDoubleTapped) {\n            this.isDoubleTapped = true;\n            this.eventClick(e);\n        }\n    }\n    renderResizeHandler(element, spanEvent, isReadOnly) {\n        if (!this.parent.resizeModule || !this.parent.allowResizing || this.parent.activeViewOptions.readonly || isReadOnly) {\n            return;\n        }\n        for (const resizeEdge of Object.keys(spanEvent)) {\n            const resizeHandler = createElement('div', { className: EVENT_RESIZE_CLASS });\n            switch (resizeEdge) {\n                case 'isLeft':\n                    if (!spanEvent.isLeft) {\n                        resizeHandler.appendChild(createElement('div', { className: 'e-left-right-resize' }));\n                        addClass([resizeHandler], this.parent.enableRtl ? RIGHT_RESIZE_HANDLER : LEFT_RESIZE_HANDLER);\n                        prepend([resizeHandler], element);\n                    }\n                    break;\n                case 'isRight':\n                    if (!spanEvent.isRight) {\n                        resizeHandler.appendChild(createElement('div', { className: 'e-left-right-resize' }));\n                        addClass([resizeHandler], this.parent.enableRtl ? LEFT_RESIZE_HANDLER : RIGHT_RESIZE_HANDLER);\n                        append([resizeHandler], element);\n                    }\n                    break;\n                case 'isTop':\n                    if (!spanEvent.isTop) {\n                        resizeHandler.appendChild(createElement('div', { className: 'e-top-bottom-resize' }));\n                        addClass([resizeHandler], TOP_RESIZE_HANDLER);\n                        prepend([resizeHandler], element);\n                    }\n                    break;\n                case 'isBottom':\n                    if (!spanEvent.isBottom) {\n                        resizeHandler.appendChild(createElement('div', { className: 'e-top-bottom-resize' }));\n                        addClass([resizeHandler], BOTTOM_RESIZE_HANDLER);\n                        append([resizeHandler], element);\n                    }\n                    break;\n            }\n        }\n    }\n    eventClick(eventData) {\n        const target = eventData.target;\n        if (target.classList.contains(DRAG_CLONE_CLASS) || target.classList.contains(RESIZE_CLONE_CLASS)) {\n            return;\n        }\n        if ((eventData.ctrlKey || eventData.metaKey) && eventData.which === 1 && this.parent.keyboardInteractionModule) {\n            this.parent.quickPopup.quickPopup.hide();\n            this.parent.selectedElements = [].slice.call(this.parent.element.querySelectorAll('.' + APPOINTMENT_BORDER));\n            const target = closest(eventData.target, '.' + APPOINTMENT_CLASS);\n            this.getSelectedEventElements(target);\n            this.activeEventData(eventData, false);\n            const selectArgs = {\n                data: this.parent.activeEventData.event,\n                element: this.parent.activeEventData.element,\n                event: eventData, requestType: 'eventSelect'\n            };\n            this.parent.trigger(select, selectArgs);\n            const args = extend(this.parent.activeEventData, { cancel: false, originalEvent: eventData });\n            this.parent.trigger(eventClick, args);\n        }\n        else {\n            this.removeSelectedAppointmentClass();\n            this.activeEventData(eventData, true);\n            const selectEventArgs = {\n                data: this.parent.activeEventData.event,\n                element: this.parent.activeEventData.element,\n                event: eventData, requestType: 'eventSelect'\n            };\n            this.parent.trigger(select, selectEventArgs);\n            const args = extend(this.parent.activeEventData, { cancel: false, originalEvent: eventData });\n            this.parent.trigger(eventClick, args, (eventClickArgs) => {\n                if (eventClickArgs.cancel) {\n                    this.removeSelectedAppointmentClass();\n                    if (this.parent.quickPopup) {\n                        this.parent.quickPopup.quickPopupHide();\n                    }\n                }\n                else {\n                    if (this.parent.currentView === 'Agenda' || this.parent.currentView === 'MonthAgenda') {\n                        addClass([this.parent.activeEventData.element], AGENDA_SELECTED_CELL);\n                    }\n                    if (this.parent.allowInline) {\n                        const inlineArgs = {\n                            data: eventClickArgs.event,\n                            element: eventClickArgs.element,\n                            type: 'Event'\n                        };\n                        this.parent.notify(inlineClick, inlineArgs);\n                    }\n                    else {\n                        this.parent.notify(eventClick, eventClickArgs);\n                    }\n                }\n            });\n        }\n    }\n    eventDoubleClick(e) {\n        if (this.parent.quickPopup) {\n            this.parent.quickPopup.quickPopupHide(true);\n        }\n        if (e.type === 'touchstart') {\n            this.activeEventData(e, true);\n        }\n        this.removeSelectedAppointmentClass();\n        if (this.parent.activeEventData.element.classList.contains(INLINE_APPOINTMENT_CLASS) ||\n            this.parent.activeEventData.element.querySelector('.' + INLINE_SUBJECT_CLASS)) {\n            return;\n        }\n        if (!isNullOrUndefined(this.parent.activeEventData.event) &&\n            isNullOrUndefined(this.parent.activeEventData.event[this.parent.eventFields.recurrenceID])) {\n            this.parent.eventWindow.openEditor(this.parent.activeEventData.event, 'Save');\n        }\n        else {\n            this.parent.currentAction = 'EditOccurrence';\n            this.parent.quickPopup.openRecurrenceAlert();\n        }\n    }\n    getEventByGuid(guid) {\n        return this.parent.eventsProcessed.filter((data) => data.Guid === guid)[0];\n    }\n    getEventById(id) {\n        return this.parent.eventsData.filter((data) => data[this.parent.eventFields.id] === id)[0];\n    }\n    generateGuid() {\n        return 'xyxxxxyx-xxxy-yxxx-xyxx-xxyxxxxyyxxx'.replace(/[xy]/g, (c) => {\n            const r = Math.random() * 16 | 0;\n            const v = (c === 'x') ? r : (r & 0x3 | 0x8);\n            return v.toString(16);\n        });\n    }\n    getEventIDType() {\n        if (this.parent.eventsData.length !== 0) {\n            return typeof (this.parent.eventsData[0][this.parent.eventFields.id]);\n        }\n        if (this.parent.blockData.length !== 0) {\n            return typeof (this.parent.blockData[0][this.parent.eventFields.id]);\n        }\n        return 'string';\n    }\n    getEventMaxID(resourceId) {\n        if (this.parent.eventsData.length < 1 && this.parent.blockData.length < 1) {\n            return 1;\n        }\n        let eventId;\n        const idType = this.getEventIDType();\n        if (idType === 'string') {\n            eventId = this.generateGuid();\n        }\n        if (idType === 'number') {\n            const datas = this.parent.eventsData.concat(this.parent.blockData);\n            let maxId = Math.max(...datas.map((event) => event[this.parent.eventFields.id]));\n            maxId = isNullOrUndefined(resourceId) ? maxId : maxId + resourceId;\n            eventId = maxId + 1;\n        }\n        return eventId;\n    }\n    activeEventData(eventData, isMultiple) {\n        const target = closest(eventData.target, '.' + APPOINTMENT_CLASS);\n        const guid = target.getAttribute('data-guid');\n        if (isMultiple) {\n            this.addSelectedAppointments([].slice.call(this.parent.element.querySelectorAll('div[data-guid=\"' + guid + '\"]')));\n            target.focus();\n        }\n        let eventObject = this.getEventByGuid(guid);\n        if (eventObject && eventObject.isSpanned) {\n            eventObject = this.parent.eventsData.filter((obj) => obj[this.parent.eventFields.id] === eventObject[this.parent.eventFields.id])[0];\n        }\n        this.parent.activeEventData = { event: eventObject, element: target };\n    }\n    generateOccurrence(event, viewDate, oldTimezone, isMaxCount) {\n        const startDate = event[this.parent.eventFields.startTime];\n        const endDate = event[this.parent.eventFields.endTime];\n        const eventRule = event[this.parent.eventFields.recurrenceRule];\n        const duration = endDate.getTime() - startDate.getTime();\n        viewDate = new Date((viewDate || this.parent.activeView.startDate()).getTime() - duration);\n        const exception = event[this.parent.eventFields.recurrenceException];\n        let maxCount;\n        if (this.parent.currentView !== 'Agenda' && isMaxCount) {\n            maxCount = getDateCount(this.parent.activeView.startDate(), this.parent.activeView.endDate()) + 1;\n        }\n        const newTimezone = this.parent.timezone || this.parent.tzModule.getLocalTimezoneName();\n        const firstDay = this.parent.activeViewOptions.firstDayOfWeek;\n        const calendarMode = this.parent.calendarMode;\n        const dates = generate(startDate, eventRule, exception, firstDay, maxCount, viewDate, calendarMode, oldTimezone, newTimezone);\n        if (this.parent.currentView === 'Agenda' && eventRule.indexOf('COUNT') === -1 && eventRule.indexOf('UNTIL') === -1) {\n            if (isNullOrUndefined(event.generatedDates)) {\n                event.generatedDates = { start: new Date(dates[0]), end: new Date(dates[dates.length - 1]) };\n            }\n            else {\n                if (dates[0] < event.generatedDates.start.getTime()) {\n                    event.generatedDates.start = new Date(dates[0]);\n                }\n                if (dates[dates.length - 1] > event.generatedDates.end.getTime()) {\n                    event.generatedDates.end = new Date(dates[dates.length - 1]);\n                }\n            }\n        }\n        const occurrenceCollection = [];\n        for (const date of dates) {\n            const clonedObject = extend({}, event, null, true);\n            clonedObject[this.parent.eventFields.startTime] = new Date(date);\n            clonedObject[this.parent.eventFields.endTime] = new Date(new Date(date).setMilliseconds(duration));\n            clonedObject[this.parent.eventFields.recurrenceID] = clonedObject[this.parent.eventFields.id];\n            delete clonedObject[this.parent.eventFields.recurrenceException];\n            delete clonedObject[this.parent.eventFields.followingID];\n            clonedObject.Guid = this.generateGuid();\n            occurrenceCollection.push(clonedObject);\n        }\n        return occurrenceCollection;\n    }\n    getParentEvent(eventObj, isParent = false) {\n        let parentEvent;\n        do {\n            eventObj = this.getFollowingEvent(eventObj);\n            if (eventObj) {\n                parentEvent = extend({}, eventObj, null, true);\n            }\n        } while (eventObj && isParent);\n        if (isParent && parentEvent) {\n            const collection = this.getEventCollections(parentEvent);\n            let followObj = collection.follow.slice(-1)[0];\n            if (collection.occurrence.length > 0 && !parentEvent[this.parent.eventFields.recurrenceException]) {\n                followObj = collection.occurrence.slice(-1)[0];\n            }\n            if (followObj) {\n                parentEvent[this.parent.eventFields.recurrenceRule] = followObj[this.parent.eventFields.recurrenceRule];\n            }\n        }\n        return parentEvent;\n    }\n    getEventCollections(parentObj, childObj) {\n        const followingCollection = [];\n        let occurrenceCollection = [];\n        let followingEvent = parentObj;\n        do {\n            followingEvent = this.getFollowingEvent(followingEvent, true);\n            if (followingEvent) {\n                followingCollection.push(followingEvent);\n            }\n            occurrenceCollection = occurrenceCollection.concat(this.getOccurrenceEvent(followingEvent || parentObj));\n        } while (followingEvent);\n        let collections = {};\n        if (childObj) {\n            const fields = this.parent.eventFields;\n            collections = {\n                follow: followingCollection.filter((eventData) => eventData[fields.startTime] >= childObj[fields.startTime]),\n                occurrence: occurrenceCollection.filter((eventData) => eventData[fields.startTime] >= childObj[fields.startTime])\n            };\n        }\n        else {\n            collections = { follow: followingCollection, occurrence: occurrenceCollection };\n        }\n        return collections;\n    }\n    getFollowingEvent(parentObj, isReverse) {\n        const fields = this.parent.eventFields;\n        let fieldValue;\n        if (isReverse) {\n            fieldValue = parentObj[fields.id];\n        }\n        else {\n            fieldValue = (parentObj[fields.recurrenceID] || parentObj[fields.followingID]);\n        }\n        const parentApp = this.parent.eventsData.filter((data) => data[isReverse ? fields.followingID : fields.id] === fieldValue);\n        return parentApp.shift();\n    }\n    isFollowingEvent(parentObj, childObj) {\n        const parentStart = parentObj[this.parent.eventFields.startTime];\n        const childStart = childObj[this.parent.eventFields.startTime];\n        return parentStart.getHours() === childStart.getHours() && parentStart.getMinutes() === childStart.getMinutes() &&\n            parentStart.getSeconds() === childStart.getSeconds();\n    }\n    getOccurrenceEvent(eventObj, isGuid = false, isFollowing = false) {\n        const idField = isGuid ? 'Guid' : (isFollowing) ? this.parent.eventFields.followingID : this.parent.eventFields.recurrenceID;\n        const fieldKey = isGuid ? 'Guid' : this.parent.eventFields.id;\n        const dataSource = isGuid ? this.parent.eventsProcessed : this.parent.eventsData;\n        return dataSource.filter((data) => data[idField] === eventObj[fieldKey]);\n    }\n    getOccurrencesByID(id) {\n        const fields = this.parent.eventFields;\n        let occurrenceCollection = [];\n        const parentObject = this.parent.eventsData.filter((obj) => obj[fields.id] === id);\n        for (const event of parentObject) {\n            if (!isNullOrUndefined(event[fields.recurrenceRule])) {\n                occurrenceCollection = occurrenceCollection.concat(this.generateOccurrence(event));\n            }\n        }\n        return occurrenceCollection;\n    }\n    getOccurrencesByRange(startTime, endTime) {\n        const fields = this.parent.eventFields;\n        let occurrenceCollection = [];\n        for (const event of this.parent.eventsData) {\n            if (!isNullOrUndefined(event[fields.recurrenceRule])) {\n                occurrenceCollection = occurrenceCollection.concat(this.generateOccurrence(event));\n            }\n        }\n        const filter = occurrenceCollection.filter((obj) => obj[fields.startTime] >= startTime && obj[fields.endTime] <= endTime && !isNullOrUndefined(obj[fields.recurrenceID]));\n        return filter;\n    }\n    getDeletedOccurrences(recurrenceData) {\n        const fields = this.parent.eventFields;\n        let parentObject;\n        const deletedOccurrences = [];\n        if (typeof recurrenceData === 'string' || typeof recurrenceData === 'number') {\n            parentObject = this.parent.eventsData.filter((obj) => obj[fields.id] === recurrenceData)[0];\n        }\n        else {\n            parentObject = extend({}, recurrenceData, null, true);\n        }\n        if (parentObject[fields.recurrenceException]) {\n            const exDateString = parentObject[fields.recurrenceException].split(',');\n            for (let i = 0, len = exDateString.length; i < len; i++) {\n                const edited = this.parent.eventsData.filter((eventObj) => eventObj[fields.recurrenceID] === parentObject[fields.id] && eventObj[fields.recurrenceException] === exDateString[i]);\n                if (edited.length === 0) {\n                    const exDate = getDateFromRecurrenceDateString(exDateString[i]);\n                    const childObject = extend({}, recurrenceData, null, true);\n                    childObject[fields.recurrenceID] = parentObject[fields.id];\n                    delete childObject[fields.followingID];\n                    childObject[fields.recurrenceException] = exDateString[i];\n                    const startDate = new Date(exDate.getTime());\n                    const time = parentObject[fields.endTime].getTime() - parentObject[fields.startTime].getTime();\n                    const endDate = new Date(startDate.getTime());\n                    endDate.setMilliseconds(time);\n                    childObject[fields.startTime] = new Date(startDate.getTime());\n                    childObject[fields.endTime] = new Date(endDate.getTime());\n                    deletedOccurrences.push(childObject);\n                }\n            }\n        }\n        return deletedOccurrences;\n    }\n    applyResourceColor(element, data, type, index, alpha) {\n        if (!this.parent.resourceBase) {\n            return;\n        }\n        const alphaColor = (color, alpha) => {\n            color = color.replace('#', '');\n            const r = parseInt(color.substring(0, color.length / 3), 16);\n            const g = parseInt(color.substring(color.length / 3, 2 * color.length / 3), 16);\n            const b = parseInt(color.substring(2 * color.length / 3, 3 * color.length / 3), 16);\n            return `rgba(${r}, ${g}, ${b}, ${alpha})`;\n        };\n        // index refers groupOrder\n        const color = this.parent.resourceBase.getResourceColor(data, index);\n        if (color) {\n            element.style[type] = !isNullOrUndefined(alpha) ? alphaColor(color, alpha) : color;\n        }\n    }\n    createBlockAppointmentElement(record, resIndex) {\n        const eventSubject = (record[this.parent.eventFields.subject] || this.parent.eventSettings.fields.subject.default);\n        const appointmentWrapper = createElement('div', {\n            className: BLOCK_APPOINTMENT_CLASS,\n            attrs: {\n                'data-id': 'Appointment_' + record[this.parent.eventFields.id],\n                'aria-readonly': 'true', 'aria-selected': 'false'\n            }\n        });\n        let templateElement;\n        if (!isNullOrUndefined(this.parent.activeViewOptions.eventTemplate)) {\n            const scheduleId = this.parent.element.id + '_';\n            const viewName = this.parent.activeViewOptions.eventTemplateName;\n            const templateId = scheduleId + viewName + 'eventTemplate';\n            templateElement = this.parent.getAppointmentTemplate()(record, this.parent, 'eventTemplate', templateId, false);\n        }\n        else {\n            const appointmentSubject = createElement('div', {\n                className: SUBJECT_CLASS, innerHTML: eventSubject\n            });\n            templateElement = [appointmentSubject];\n        }\n        append(templateElement, appointmentWrapper);\n        this.setWrapperAttributes(appointmentWrapper, resIndex);\n        return appointmentWrapper;\n    }\n    setWrapperAttributes(appointmentWrapper, resIndex) {\n        if (!isNullOrUndefined(this.cssClass)) {\n            addClass([appointmentWrapper], this.cssClass);\n        }\n        if (this.parent.activeViewOptions.group.resources.length > 0) {\n            appointmentWrapper.setAttribute('data-group-index', resIndex.toString());\n        }\n    }\n    getReadonlyAttribute(event) {\n        return (event[this.parent.eventFields.isReadonly] || this.parent.readonly).toString();\n    }\n    isBlockRange(eventData) {\n        const eventCollection = (eventData instanceof Array) ? eventData : [eventData];\n        let isBlockAlert = false;\n        const fields = this.parent.eventFields;\n        for (const event of eventCollection) {\n            let dataCol = [];\n            if (!isNullOrUndefined(event[fields.recurrenceRule]) &&\n                (isNullOrUndefined(event[fields.recurrenceID]) || event[fields.id] === event[fields.recurrenceID])) {\n                dataCol = this.generateOccurrence(event);\n            }\n            else {\n                dataCol.push(event);\n            }\n            for (const data of dataCol) {\n                const filterBlockEvents = this.filterBlockEvents(data);\n                if (filterBlockEvents.length > 0) {\n                    isBlockAlert = true;\n                    break;\n                }\n            }\n        }\n        this.parent.uiStateValues.isBlock = isBlockAlert;\n        return isBlockAlert;\n    }\n    getFilterEventsList(dataSource, query) {\n        return new DataManager(dataSource).executeLocal(new Query().where(query));\n    }\n    getSeriesEvents(parentEvent, startTime) {\n        const fields = this.parent.eventFields;\n        startTime = isNullOrUndefined(startTime) ? parentEvent[fields.startTime] : startTime;\n        let deleteFutureEditEvents;\n        let futureEvents;\n        const deleteFutureEditEventList = [];\n        let delId = parentEvent[fields.id];\n        let followingId = parentEvent[fields.followingID];\n        let deleteFutureEvent;\n        const startTimeQuery = this.parent.currentAction === 'EditSeries' ? 'greaterthan' : 'greaterthanorequal';\n        do {\n            deleteFutureEvent = ((new Predicate(fields.followingID, 'equal', delId))).\n                and(new Predicate(fields.startTime, startTimeQuery, startTime));\n            futureEvents = this.getFilterEventsList(this.parent.eventsData, deleteFutureEvent);\n            deleteFutureEditEvents = futureEvents.slice(-1)[0];\n            if (!isNullOrUndefined(deleteFutureEditEvents) && deleteFutureEditEvents[fields.id] !== followingId) {\n                deleteFutureEditEventList.push(deleteFutureEditEvents);\n                delId = deleteFutureEditEvents[fields.id];\n                followingId = deleteFutureEditEvents[fields.followingID];\n            }\n            else {\n                followingId = null;\n            }\n        } while (futureEvents.length === 1 && !isNullOrUndefined(deleteFutureEditEvents[fields.followingID]));\n        return deleteFutureEditEventList;\n    }\n    getEditedOccurrences(deleteFutureEditEventList, startTime) {\n        const fields = this.parent.eventFields;\n        let deleteRecurrenceEventList = [];\n        let delEditedEvents;\n        for (const event of deleteFutureEditEventList) {\n            let delEventQuery = new Predicate(fields.recurrenceID, 'equal', event[fields.id]).\n                or(new Predicate(fields.recurrenceID, 'equal', event[fields.followingID]).\n                and(new Predicate(fields.recurrenceID, 'notequal', undefined)).\n                and(new Predicate(fields.recurrenceID, 'notequal', null)));\n            if (this.parent.currentAction === 'EditFollowingEvents' || this.parent.currentAction === 'DeleteFollowingEvents') {\n                delEventQuery = delEventQuery.and(new Predicate(fields.startTime, 'greaterthanorequal', startTime));\n            }\n            delEditedEvents = this.getFilterEventsList(this.parent.eventsData, delEventQuery);\n            deleteRecurrenceEventList = deleteRecurrenceEventList.concat(delEditedEvents);\n        }\n        return deleteRecurrenceEventList;\n    }\n    getRenderedDates(dateRender) {\n        let firstDate = 0;\n        let lastDate = dateRender.length;\n        let filteredDates;\n        if (dateRender[0] < this.parent.minDate && dateRender[dateRender.length - 1] > this.parent.maxDate) {\n            for (let i = 0; i < dateRender.length; i++) {\n                if (resetTime(dateRender[i]).getTime() === resetTime(new Date(this.parent.minDate)).getTime()) {\n                    firstDate = i;\n                }\n                if (resetTime(dateRender[i]).getTime() === resetTime(new Date(this.parent.maxDate)).getTime()) {\n                    lastDate = i;\n                }\n            }\n            filteredDates = dateRender.filter((date) => date >= dateRender[firstDate] && date <= dateRender[lastDate]);\n        }\n        return filteredDates;\n    }\n    isValidEvent(eventObj, start, end, schedule) {\n        const isHourRange = end.getTime() > schedule.startHour.getTime() && start.getTime() < schedule.endHour.getTime();\n        const isSameRange = schedule.startHour.getTime() <= start.getTime() &&\n            eventObj[this.parent.eventFields.startTime].getTime() >= schedule.startHour.getTime() &&\n            eventObj[this.parent.eventFields.endTime].getTime() < schedule.endHour.getTime() && start.getTime() === end.getTime();\n        return isHourRange || isSameRange;\n    }\n    allDayExpandScroll(dateHeader, heightPropChanged) {\n        let indentHeight = 0;\n        const headerRows = [].slice.call(this.parent.element.querySelectorAll('.' + HEADER_ROW_CLASS));\n        headerRows.forEach((element) => {\n            const tdEle = [].slice.call(element.children);\n            tdEle.forEach((ele) => { ele.style.top = indentHeight + 'px'; });\n            indentHeight += element.offsetHeight;\n        });\n        indentHeight = dateHeader.offsetHeight - indentHeight;\n        this.parent.element.querySelector('.' + ALLDAY_CELLS_CLASS).style.height = (indentHeight / 12) + 'em';\n        const content = this.parent.element.querySelector('.' + CONTENT_WRAP_CLASS);\n        if (this.parent.uiStateValues.expand && (content.offsetWidth - content.clientWidth > 0 || heightPropChanged)) {\n            addClass([dateHeader], ALLDAY_APPOINTMENT_SCROLL);\n        }\n        else {\n            removeClass([dateHeader], ALLDAY_APPOINTMENT_SCROLL);\n        }\n    }\n    unWireEvents() {\n        const appElements = [].slice.call(this.parent.element.querySelectorAll('.' + APPOINTMENT_CLASS));\n        for (const element of appElements) {\n            EventHandler.clearEvents(element);\n        }\n    }\n    destroy() {\n        this.unWireEvents();\n        this.parent = null;\n    }\n}\n\n/* eslint-disable @typescript-eslint/no-explicit-any */\n/**\n * Vertical view appointment rendering\n */\nclass VerticalEvent extends EventBase {\n    constructor(parent) {\n        super(parent);\n        this.dateRender = [];\n        this.renderedEvents = [];\n        this.renderedAllDayEvents = [];\n        this.overlapEvents = [];\n        this.moreEvents = [];\n        this.overlapList = [];\n        this.allDayEvents = [];\n        this.slotCount = this.parent.activeViewOptions.timeScale.slotCount;\n        this.interval = this.parent.activeViewOptions.timeScale.interval;\n        this.allDayLevel = 0;\n        this.startHour = this.parent.activeView.getStartHour();\n        this.endHour = this.parent.activeView.getEndHour();\n        this.element = this.parent.activeView.getPanel();\n        this.fields = this.parent.eventFields;\n        this.animation = new Animation({ progress: this.animationUiUpdate.bind(this) });\n        this.addEventListener();\n    }\n    renderAppointments() {\n        if (isNullOrUndefined(this.parent)) {\n            return;\n        }\n        if (this.parent.dragAndDropModule) {\n            this.parent.dragAndDropModule.setDragArea();\n        }\n        const wrapperElements = [].slice.call(this.parent.element.querySelectorAll('.' + BLOCK_APPOINTMENT_CLASS +\n            ',.' + APPOINTMENT_CLASS + ',.' + ROW_COUNT_WRAPPER_CLASS));\n        const isDragging = (this.parent.crudModule && this.parent.crudModule.crudObj.isCrudAction) ? true : false;\n        for (const wrapper of wrapperElements) {\n            if (isDragging && !(wrapper.classList.contains(ALLDAY_APPOINTMENT_CLASS) ||\n                wrapper.classList.contains(ROW_COUNT_WRAPPER_CLASS))) {\n                const groupIndex = parseInt(wrapper.getAttribute('data-group-index'), 10);\n                for (let j = 0, len = this.parent.crudModule.crudObj.sourceEvent.length; j < len; j++) {\n                    if (groupIndex === this.parent.crudModule.crudObj.sourceEvent[j].groupIndex ||\n                        groupIndex === this.parent.crudModule.crudObj.targetEvent[j].groupIndex) {\n                        remove(wrapper);\n                    }\n                }\n            }\n            else {\n                remove(wrapper);\n            }\n        }\n        if (!this.element.querySelector('.' + WORK_CELLS_CLASS)) {\n            return;\n        }\n        this.allDayElement = [].slice.call(this.element.querySelectorAll('.' + ALLDAY_CELLS_CLASS));\n        this.setAllDayRowHeight(0);\n        if (this.parent.eventsProcessed.length === 0 && this.parent.blockProcessed.length === 0) {\n            return;\n        }\n        const expandCollapse = this.element.querySelector('.' + ALLDAY_APPOINTMENT_SECTION_CLASS);\n        EventHandler.remove(expandCollapse, 'click', this.rowExpandCollapse);\n        EventHandler.add(expandCollapse, 'click', this.rowExpandCollapse, this);\n        this.renderedEvents = [];\n        this.renderedAllDayEvents = [];\n        this.initializeValues();\n        this.processBlockEvents();\n        this.renderEvents('normalEvents');\n        if (this.allDayEvents.length > 0) {\n            this.allDayEvents = this.allDayEvents.filter((item, index, arr) => index === arr.map((item) => item.Guid).indexOf(item.Guid));\n            removeClass(this.allDayElement, ALLDAY_ROW_ANIMATE_CLASS);\n            this.slots.push(this.parent.activeView.renderDates.map((date) => +date));\n            this.renderEvents('allDayEvents');\n        }\n        this.parent.notify(contentReady, {});\n        addClass(this.allDayElement, ALLDAY_ROW_ANIMATE_CLASS);\n        if (isDragging) {\n            this.parent.crudModule.crudObj.isCrudAction = false;\n        }\n        this.parent.renderTemplates();\n    }\n    initializeValues() {\n        this.resources = (this.parent.activeViewOptions.group.resources.length > 0) ? this.parent.uiStateValues.isGroupAdaptive ?\n            [this.parent.resourceBase.lastResourceLevel[this.parent.uiStateValues.groupIndex]] :\n            this.parent.resourceBase.lastResourceLevel : [];\n        this.cellHeight =\n            parseFloat(this.parent.element.querySelector('.e-content-wrap tbody tr').getBoundingClientRect().height.toFixed(2));\n        this.dateRender[0] = this.parent.activeView.renderDates;\n        if (this.parent.activeViewOptions.group.resources.length > 0) {\n            for (let i = 0, len = this.resources.length; i < len; i++) {\n                this.dateRender[i] = this.resources[i].renderDates;\n            }\n        }\n    }\n    getHeight(start, end) {\n        let appHeight = (getUniversalTime(end) - getUniversalTime(start)) /\n            MS_PER_MINUTE * (this.cellHeight * this.slotCount) / this.interval;\n        appHeight = (appHeight <= 0) ? this.cellHeight : appHeight;\n        return appHeight;\n    }\n    appendEvent(eventObj, appointmentElement, index, appLeft) {\n        const appointmentWrap = [].slice.call(this.element.querySelectorAll('.' + APPOINTMENT_WRAPPER_CLASS));\n        if (this.parent.enableRtl) {\n            setStyleAttribute(appointmentElement, { 'right': appLeft });\n        }\n        else {\n            setStyleAttribute(appointmentElement, { 'left': appLeft });\n        }\n        const eventType = appointmentElement.classList.contains(BLOCK_APPOINTMENT_CLASS) ? 'blockEvent' : 'event';\n        const args = {\n            data: extend({}, eventObj, null, true),\n            element: appointmentElement, cancel: false, type: eventType\n        };\n        this.parent.trigger(eventRendered, args, (eventArgs) => {\n            if (!eventArgs.cancel) {\n                appointmentWrap[index].appendChild(appointmentElement);\n            }\n        });\n    }\n    processBlockEvents() {\n        const resources = this.getResourceList();\n        let dateCount = 0;\n        for (const resource of resources) {\n            const renderDates = this.dateRender[resource];\n            for (let day = 0, length = renderDates.length; day < length; day++) {\n                const startDate = new Date(renderDates[day].getTime());\n                const endDate = addDays(renderDates[day], 1);\n                const filterEvents = this.filterEvents(startDate, endDate, this.parent.blockProcessed, this.resources[resource]);\n                for (const event of filterEvents) {\n                    if (this.parent.resourceBase) {\n                        this.setValues(event, resource);\n                    }\n                    this.renderBlockEvents(event, day, resource, dateCount);\n                    this.cssClass = null;\n                    this.groupOrder = null;\n                }\n                dateCount += 1;\n            }\n        }\n    }\n    renderBlockEvents(eventObj, dayIndex, resource, dayCount) {\n        const spannedData = this.isSpannedEvent(eventObj, dayIndex, resource);\n        const eStart = spannedData[this.fields.startTime];\n        const eEnd = spannedData[this.fields.endTime];\n        const currentDate = resetTime(new Date(this.dateRender[resource][dayIndex].getTime()));\n        const schedule = getStartEndHours(currentDate, this.startHour, this.endHour);\n        if (eStart <= eEnd && this.isValidEvent(eventObj, eStart, eEnd, schedule)) {\n            let blockTop;\n            let blockHeight;\n            if (spannedData[this.fields.isAllDay]) {\n                const contentWrap = this.parent.element.querySelector('.' + CONTENT_WRAP_CLASS + ' table');\n                blockHeight = formatUnit(contentWrap.offsetHeight);\n                blockTop = formatUnit(0);\n            }\n            else {\n                blockHeight = formatUnit(this.getHeight(eStart, eEnd));\n                blockTop = formatUnit(this.getTopValue(eStart, dayIndex, resource));\n            }\n            const appointmentElement = this.createBlockAppointmentElement(eventObj, resource);\n            setStyleAttribute(appointmentElement, { 'width': '100%', 'height': blockHeight, 'top': blockTop });\n            const index = this.parent.activeViewOptions.group.byDate ? (this.resources.length * dayIndex) + resource : dayCount;\n            this.appendEvent(eventObj, appointmentElement, index, '0px');\n        }\n    }\n    renderEvents(eventType) {\n        removeClass(this.allDayElement, ALLDAY_ROW_ANIMATE_CLASS);\n        const eventCollection = (eventType === 'allDayEvents') ? this.sortByDateTime(this.allDayEvents) : undefined;\n        const resources = this.getResourceList();\n        let dateCount = 0;\n        let isRender;\n        for (const resource of resources) {\n            isRender = true;\n            if (this.parent.crudModule && this.parent.crudModule.crudObj.isCrudAction && eventType !== 'allDayEvents'\n                && !this.parent.uiStateValues.isGroupAdaptive) {\n                if (this.parent.crudModule.crudObj.sourceEvent.filter((data) => data.groupIndex === resource).length === 0 &&\n                    this.parent.crudModule.crudObj.targetEvent.filter((data) => data.groupIndex === resource).length === 0) {\n                    isRender = false;\n                }\n            }\n            this.slots = [];\n            const renderDates = this.dateRender[resource];\n            const renderedDate = this.getRenderedDates(renderDates) || renderDates;\n            this.slots.push(renderDates.map((date) => { return +date; }));\n            for (let day = 0, length = renderDates.length; day < length &&\n                renderDates[day] <= renderedDate[renderedDate.length - 1]; day++) {\n                this.renderedEvents = [];\n                const startDate = new Date(renderDates[day].getTime());\n                const endDate = addDays(renderDates[day], 1);\n                const filterEvents = this.filterEvents(startDate, endDate, eventCollection, this.resources[resource]);\n                if (isRender) {\n                    for (const event of filterEvents) {\n                        if (this.parent.resourceBase) {\n                            this.setValues(event, resource);\n                        }\n                        if (eventType === 'allDayEvents') {\n                            this.renderAllDayEvents(event, day, resource, dateCount);\n                        }\n                        else {\n                            if (this.isAllDayAppointment(event)) {\n                                this.allDayEvents.push(extend({}, event, null, true));\n                            }\n                            else {\n                                if (this.parent.eventSettings.enableMaxHeight) {\n                                    if (this.getOverlapIndex(event, day, false, resource) > 0) {\n                                        continue;\n                                    }\n                                }\n                                this.renderNormalEvents(event, day, resource, dateCount);\n                            }\n                        }\n                        this.cssClass = null;\n                        this.groupOrder = null;\n                    }\n                }\n                else {\n                    for (const event of filterEvents) {\n                        if (this.isAllDayAppointment(event)) {\n                            this.allDayEvents.push(extend({}, event, null, true));\n                        }\n                    }\n                }\n                dateCount += 1;\n            }\n        }\n    }\n    setValues(event, resourceIndex) {\n        if (this.parent.activeViewOptions.group.resources.length > 0) {\n            this.cssClass = this.resources[resourceIndex].cssClass;\n            this.groupOrder = this.resources[resourceIndex].groupOrder;\n        }\n        else {\n            this.cssClass = this.parent.resourceBase.getCssClass(event);\n        }\n    }\n    getResourceList() {\n        // eslint-disable-next-line prefer-spread\n        const resources = Array.apply(null, {\n            length: (this.parent.activeViewOptions.group.resources.length > 0 && !this.parent.uiStateValues.isGroupAdaptive) ?\n                this.resources.length : 1\n        }).map((value, index) => { return index; });\n        return resources;\n    }\n    // eslint-disable-next-line max-len\n    createAppointmentElement(record, isAllDay, data, resource) {\n        const fieldMapping = this.parent.eventFields;\n        const recordSubject = (record[fieldMapping.subject] || this.parent.eventSettings.fields.subject.default\n            || this.parent.localeObj.getConstant('addTitle'));\n        const appointmentWrapper = createElement('div', {\n            className: APPOINTMENT_CLASS,\n            attrs: {\n                'data-id': 'Appointment_' + record[fieldMapping.id],\n                'data-guid': record.Guid,\n                'role': 'button',\n                'tabindex': '0',\n                'aria-readonly': this.parent.eventBase.getReadonlyAttribute(record),\n                'aria-selected': 'false',\n                'aria-grabbed': 'true',\n                'aria-label': this.parent.getAnnouncementString(record)\n            }\n        });\n        if (record[this.fields.isReadonly]) {\n            addClass([appointmentWrapper], 'e-read-only');\n        }\n        const appointmentDetails = createElement('div', { className: APPOINTMENT_DETAILS });\n        appointmentWrapper.appendChild(appointmentDetails);\n        if (this.parent.activeViewOptions.group.resources.length > 0) {\n            const resourceIndex = this.parent.uiStateValues.isGroupAdaptive ? this.parent.uiStateValues.groupIndex : resource;\n            appointmentWrapper.setAttribute('data-group-index', resourceIndex.toString());\n        }\n        let templateElement;\n        const eventData = data;\n        if (!isNullOrUndefined(this.parent.activeViewOptions.eventTemplate)) {\n            const elementId = this.parent.element.id + '_';\n            const viewName = this.parent.activeViewOptions.eventTemplateName;\n            const templateId = elementId + viewName + 'eventTemplate';\n            templateElement = this.parent.getAppointmentTemplate()(record, this.parent, 'eventTemplate', templateId, false);\n        }\n        else {\n            const appointmentSubject = createElement('div', { className: SUBJECT_CLASS, innerHTML: recordSubject });\n            if (isAllDay) {\n                if (record[fieldMapping.isAllDay]) {\n                    templateElement = [appointmentSubject];\n                }\n                else {\n                    templateElement = [];\n                    const appointmentStartTime = createElement('div', {\n                        className: APPOINTMENT_TIME + (this.parent.isAdaptive ? ' ' + DISABLE_CLASS : ''),\n                        innerHTML: this.parent.getTimeString(record[fieldMapping.startTime])\n                    });\n                    const appointmentEndTime = createElement('div', {\n                        className: APPOINTMENT_TIME + (this.parent.isAdaptive ? ' ' + DISABLE_CLASS : ''),\n                        innerHTML: this.parent.getTimeString(record[fieldMapping.endTime])\n                    });\n                    addClass([appointmentSubject], 'e-text-center');\n                    if (!eventData.isLeft) {\n                        templateElement.push(appointmentStartTime);\n                    }\n                    templateElement.push(appointmentSubject);\n                    if (!eventData.isRight) {\n                        templateElement.push(appointmentEndTime);\n                    }\n                }\n            }\n            else {\n                const timeStr = this.parent.getTimeString(record[fieldMapping.startTime]) + ' - ' +\n                    this.parent.getTimeString(record[fieldMapping.endTime]);\n                const appointmentTime = createElement('div', {\n                    className: APPOINTMENT_TIME + (this.parent.isAdaptive ? ' ' + DISABLE_CLASS : ''),\n                    innerHTML: timeStr\n                });\n                const appointmentLocation = createElement('div', {\n                    className: LOCATION_CLASS,\n                    innerHTML: (record[fieldMapping.location] || this.parent.eventSettings.fields.location.default || '')\n                });\n                templateElement = [appointmentSubject, appointmentTime, appointmentLocation];\n            }\n        }\n        append(templateElement, appointmentDetails);\n        if (!this.parent.isAdaptive &&\n            (!isNullOrUndefined(record[fieldMapping.recurrenceRule]) || !isNullOrUndefined(record[fieldMapping.recurrenceID]))) {\n            const iconClass = (record[fieldMapping.id] === record[fieldMapping.recurrenceID]) ?\n                EVENT_RECURRENCE_ICON_CLASS : EVENT_RECURRENCE_EDIT_ICON_CLASS;\n            const recurrenceIcon = createElement('div', { className: ICON + ' ' + iconClass });\n            if (isAllDay) {\n                appointmentDetails.appendChild(recurrenceIcon);\n            }\n            else {\n                appointmentWrapper.appendChild(recurrenceIcon);\n            }\n        }\n        this.renderSpannedIcon(isAllDay ? appointmentDetails : appointmentWrapper, eventData);\n        if (!isNullOrUndefined(this.cssClass)) {\n            addClass([appointmentWrapper], this.cssClass);\n        }\n        this.applyResourceColor(appointmentWrapper, record, 'backgroundColor', this.groupOrder);\n        this.renderResizeHandler(appointmentWrapper, eventData, record[this.fields.isReadonly]);\n        return appointmentWrapper;\n    }\n    createMoreIndicator(allDayRow, count, currentDay) {\n        const index = currentDay + count;\n        const countWrapper = allDayRow[index];\n        if (countWrapper.childElementCount <= 0) {\n            const innerCountWrap = createElement('div', {\n                className: ROW_COUNT_WRAPPER_CLASS,\n                id: ROW_COUNT_WRAPPER_CLASS + '-' + index.toString()\n            });\n            const moreIndicatorElement = createElement('div', {\n                className: MORE_INDICATOR_CLASS,\n                attrs: { 'tabindex': '0', 'role': 'list', 'data-index': index.toString(), 'data-count': '1' },\n                innerHTML: '+1&nbsp;' + (this.parent.isAdaptive ? '' : this.parent.localeObj.getConstant('more'))\n            });\n            innerCountWrap.appendChild(moreIndicatorElement);\n            countWrapper.appendChild(innerCountWrap);\n            EventHandler.add(moreIndicatorElement, 'click', this.rowExpandCollapse, this);\n        }\n        else {\n            const countCell = countWrapper.querySelector('.' + MORE_INDICATOR_CLASS);\n            const moreCount = parseInt(countCell.getAttribute('data-count'), 10) + 1;\n            countCell.setAttribute('data-count', moreCount.toString());\n            countCell.innerHTML = '+' + this.parent.globalize.formatNumber(moreCount) + '&nbsp;' + (this.parent.isAdaptive ? '' : this.parent.localeObj.getConstant('more'));\n        }\n    }\n    renderSpannedIcon(element, spanEvent) {\n        const iconElement = createElement('div', { className: EVENT_INDICATOR_CLASS + ' ' + ICON });\n        if (spanEvent.isLeft) {\n            const iconLeft = iconElement.cloneNode();\n            addClass([iconLeft], EVENT_ICON_LEFT_CLASS);\n            prepend([iconLeft], element);\n        }\n        if (spanEvent.isRight) {\n            const iconRight = iconElement.cloneNode();\n            addClass([iconRight], EVENT_ICON_RIGHT_CLASS);\n            append([iconRight], element);\n        }\n        if (spanEvent.isTop) {\n            const iconTop = iconElement.cloneNode();\n            addClass([iconTop], EVENT_ICON_UP_CLASS);\n            prepend([iconTop], element);\n        }\n        if (spanEvent.isBottom) {\n            const iconBottom = iconElement.cloneNode();\n            addClass([iconBottom], EVENT_ICON_DOWN_CLASS);\n            append([iconBottom], element);\n        }\n    }\n    isSpannedEvent(record, day, resource) {\n        let currentDate = resetTime(this.dateRender[resource][day]);\n        const renderedDate = this.getRenderedDates(this.dateRender[resource]) || [currentDate];\n        const currentDay = renderedDate.filter((date) => date.getDay() === day);\n        if (currentDay.length === 0) {\n            currentDate = resetTime(renderedDate[0]);\n        }\n        const fieldMapping = this.parent.eventFields;\n        const startEndHours = getStartEndHours(currentDate, this.startHour, this.endHour);\n        const event = extend({}, record, null, true);\n        event.isSpanned = { isBottom: false, isTop: false };\n        if (record[fieldMapping.startTime].getTime() < startEndHours.startHour.getTime()) {\n            event[fieldMapping.startTime] = startEndHours.startHour;\n            event.isSpanned.isTop = true;\n        }\n        if (record[fieldMapping.endTime].getTime() > startEndHours.endHour.getTime()) {\n            event[fieldMapping.endTime] = startEndHours.endHour;\n            event.isSpanned.isBottom = true;\n        }\n        return event;\n    }\n    renderAllDayEvents(eventObj, dayIndex, resource, dayCount, inline) {\n        let currentDates = this.getRenderedDates(this.dateRender[resource]) || this.dateRender[resource];\n        if (this.parent.activeViewOptions.group.byDate) {\n            this.slots[0] = [this.dateRender[resource][dayIndex].getTime()];\n            currentDates = [this.dateRender[resource][dayIndex]];\n        }\n        const record = this.splitEvent(eventObj, currentDates)[0];\n        const allDayRowCell = this.element.querySelector('.' + ALLDAY_CELLS_CLASS + ':first-child');\n        const cellTop = allDayRowCell.offsetTop;\n        const eStart = new Date(record[this.parent.eventFields.startTime].getTime());\n        const eEnd = new Date(record[this.parent.eventFields.endTime].getTime());\n        let appWidth = 0;\n        let topValue = 1;\n        const isDateRange = currentDates[0].getTime() <= eStart.getTime() &&\n            addDays(currentDates.slice(-1)[0], 1).getTime() >= eStart.getTime();\n        if (eStart <= eEnd && isDateRange) {\n            let isAlreadyRendered = [];\n            if (this.renderedAllDayEvents[resource]) {\n                isAlreadyRendered = this.renderedAllDayEvents[resource].filter((event) => event.Guid === eventObj.Guid);\n                if (this.parent.activeViewOptions.group.byDate) {\n                    isAlreadyRendered = isAlreadyRendered.filter((event) => event[this.parent.eventFields.startTime] >= currentDates[dayIndex] &&\n                        event[this.parent.eventFields.endTime] <= addDays(new Date(+currentDates[dayIndex]), 1));\n                }\n            }\n            if (isAlreadyRendered.length === 0) {\n                const allDayDifference = record.data.count;\n                const allDayIndex = this.getOverlapIndex(record, dayIndex, true, resource);\n                record.Index = allDayIndex;\n                this.allDayLevel = (this.allDayLevel < allDayIndex) ? allDayIndex : this.allDayLevel;\n                const widthAdjustment = record.data.isRight ? 0 :\n                    this.parent.currentView === 'Day' ? 4 : 7;\n                if (allDayDifference >= 0) {\n                    appWidth = (allDayDifference * 100) - widthAdjustment;\n                }\n                if (isNullOrUndefined(this.renderedAllDayEvents[resource])) {\n                    this.renderedAllDayEvents[resource] = [];\n                }\n                this.renderedAllDayEvents[resource].push(extend({}, record, null, true));\n                const allDayRow = [].slice.call(this.element.querySelector('.' + ALLDAY_ROW_CLASS).children);\n                const wIndex = this.parent.activeViewOptions.group.byDate ?\n                    (this.resources.length * dayIndex) + resource : dayCount;\n                const eventWrapper = this.element.querySelector('.' + ALLDAY_APPOINTMENT_WRAPPER_CLASS +\n                    ':nth-child(' + (wIndex + 1) + ')');\n                let appointmentElement;\n                if (inline) {\n                    appointmentElement = this.parent.inlineModule.createInlineAppointmentElement(eventObj);\n                }\n                else {\n                    appointmentElement = this.createAppointmentElement(eventObj, true, record.data, resource);\n                }\n                addClass([appointmentElement], ALLDAY_APPOINTMENT_CLASS);\n                const args = { data: eventObj, element: appointmentElement, cancel: false };\n                this.parent.trigger(eventRendered, args, (eventArgs) => {\n                    if (!eventArgs.cancel) {\n                        eventWrapper.appendChild(appointmentElement);\n                        const appHeight = appointmentElement.offsetHeight;\n                        topValue += (allDayIndex === 0 ? cellTop : (cellTop + (allDayIndex * appHeight))) + 1;\n                        setStyleAttribute(appointmentElement, { 'width': appWidth + '%', 'top': formatUnit(topValue) });\n                        if (allDayIndex > 1) {\n                            this.moreEvents.push(appointmentElement);\n                            for (let count = 0, length = allDayDifference; count < length; count++) {\n                                this.createMoreIndicator(allDayRow, count, wIndex);\n                            }\n                        }\n                        allDayRowCell.setAttribute('data-count', this.allDayLevel.toString());\n                        const allDayRowHeight = ((!this.parent.uiStateValues.expand && this.allDayLevel > 2) ?\n                            (3 * appHeight) : ((this.allDayLevel + 1) * appHeight)) + 4;\n                        this.setAllDayRowHeight(allDayRowHeight);\n                        this.addOrRemoveClass();\n                        this.wireAppointmentEvents(appointmentElement, eventObj);\n                    }\n                });\n            }\n        }\n    }\n    renderNormalEvents(eventObj, dayIndex, resource, dayCount, inline) {\n        const record = this.isSpannedEvent(eventObj, dayIndex, resource);\n        const eStart = record[this.fields.startTime];\n        const eEnd = record[this.fields.endTime];\n        let appWidth = '0%';\n        const appLeft = '0%';\n        let topValue = 0;\n        const currentDate = resetTime(new Date(this.dateRender[resource][dayIndex].getTime()));\n        const schedule = getStartEndHours(currentDate, this.startHour, this.endHour);\n        const isValidEvent = this.isValidEvent(eventObj, eStart, eEnd, schedule);\n        if (eStart <= eEnd && isValidEvent) {\n            const appHeight = this.getHeight(eStart, eEnd);\n            if (eStart.getTime() > schedule.startHour.getTime()) {\n                topValue = this.getTopValue(eStart, dayIndex, resource);\n            }\n            const appIndex = this.getOverlapIndex(record, dayIndex, false, resource);\n            record.Index = appIndex;\n            this.overlapList.push(record);\n            if (this.overlapList.length > 1) {\n                if (isNullOrUndefined(this.overlapEvents[appIndex])) {\n                    this.overlapEvents[appIndex] = [];\n                }\n                this.overlapEvents[appIndex].push(record);\n            }\n            else {\n                this.overlapEvents = [];\n                this.overlapEvents.push([record]);\n            }\n            appWidth = this.getEventWidth();\n            const argsData = {\n                index: appIndex, left: appLeft, width: appWidth,\n                day: dayIndex, dayIndex: dayCount, record: record, resource: resource\n            };\n            const tempData = this.adjustOverlapElements(argsData);\n            appWidth = (tempData.appWidth);\n            if (isNullOrUndefined(this.renderedEvents[resource])) {\n                this.renderedEvents[resource] = [];\n            }\n            this.renderedEvents[resource].push(extend({}, record, null, true));\n            let appointmentElement;\n            if (inline) {\n                appointmentElement = this.parent.inlineModule.createInlineAppointmentElement(eventObj);\n            }\n            else {\n                appointmentElement = this.createAppointmentElement(eventObj, false, record.isSpanned, resource);\n            }\n            setStyleAttribute(appointmentElement, {\n                'width': (this.parent.eventSettings.enableMaxHeight ? '100%' : tempData.appWidth),\n                'height': appHeight + 'px', 'top': topValue + 'px'\n            });\n            const iconHeight = appointmentElement.querySelectorAll('.' + EVENT_INDICATOR_CLASS).length * 15;\n            const maxHeight = appHeight - 40 - iconHeight;\n            const subjectElement = appointmentElement.querySelector('.' + SUBJECT_CLASS);\n            if (!this.parent.isAdaptive && subjectElement) {\n                subjectElement.style.maxHeight = formatUnit(maxHeight);\n            }\n            const index = this.parent.activeViewOptions.group.byDate ? (this.resources.length * dayIndex) + resource : dayCount;\n            this.appendEvent(eventObj, appointmentElement, index, tempData.appLeft);\n            this.wireAppointmentEvents(appointmentElement, eventObj);\n            if (appHeight < this.cellHeight) {\n                const resizeHandlers = [].slice.call(appointmentElement.querySelectorAll('.' + EVENT_RESIZE_CLASS));\n                resizeHandlers.forEach((resizeHandler) => {\n                    resizeHandler.style.height = Math.ceil(appHeight / resizeHandler.offsetHeight) + 'px';\n                });\n            }\n        }\n    }\n    getEventWidth() {\n        const width = this.parent.currentView === 'Day' ? 97 : 94;\n        const tempWidth = ((width - this.overlapEvents.length) / this.overlapEvents.length);\n        return (tempWidth < 0 ? 0 : tempWidth) + '%';\n    }\n    getEventLeft(appWidth, index) {\n        const tempLeft = (parseFloat(appWidth) + 1) * index;\n        return (tempLeft > 99 ? 99 : tempLeft) + '%';\n    }\n    getTopValue(date, day, resource) {\n        const startEndHours = getStartEndHours(resetTime(this.dateRender[resource][day]), this.startHour, this.endHour);\n        const startHour = startEndHours.startHour;\n        const diffInMinutes = ((date.getHours() - startHour.getHours()) * 60) + (date.getMinutes() - startHour.getMinutes());\n        return (this.parent.activeViewOptions.timeScale.enable) ? ((diffInMinutes * this.cellHeight * this.slotCount) / this.interval) : 0;\n    }\n    getOverlapIndex(record, day, isAllDay, resource) {\n        const fieldMapping = this.parent.eventFields;\n        let eventsList = [];\n        let appIndex = -1;\n        this.overlapEvents = [];\n        if (isAllDay) {\n            if (!isNullOrUndefined(this.renderedAllDayEvents[resource])) {\n                const date = resetTime(new Date(this.dateRender[resource][day].getTime()));\n                eventsList = this.renderedAllDayEvents[resource].filter((app) => resetTime(app[fieldMapping.startTime]).getTime() <= date.getTime() &&\n                    resetTime(app[fieldMapping.endTime]).getTime() >= date.getTime());\n                if (this.parent.activeViewOptions.group.resources.length > 0) {\n                    eventsList = this.filterEventsByResource(this.resources[resource], eventsList);\n                }\n            }\n        }\n        else {\n            const appointmentList = !isNullOrUndefined(this.renderedEvents[resource]) ?\n                this.renderedEvents[resource] : [];\n            let appointment = [];\n            const recordStart = record[fieldMapping.startTime];\n            const recordEnd = record[fieldMapping.endTime];\n            this.overlapList = appointmentList.filter((data) => (data[fieldMapping.endTime] > recordStart && data[fieldMapping.startTime] <= recordEnd) ||\n                (data[fieldMapping.startTime] >= recordEnd && data[fieldMapping.endTime] <= recordStart) ||\n                (data[fieldMapping.endTime].getTime() === data[fieldMapping.startTime].getTime() &&\n                    data[fieldMapping.startTime].getTime() === recordStart.getTime() && data[fieldMapping.endTime] < recordEnd));\n            if (this.parent.activeViewOptions.group.resources.length > 0) {\n                this.overlapList = this.filterEventsByResource(this.resources[resource], this.overlapList);\n            }\n            this.overlapList.forEach((obj) => {\n                let filterList = appointmentList.filter((data) => data[fieldMapping.endTime] > obj[fieldMapping.startTime] && data[fieldMapping.startTime] <= obj[fieldMapping.endTime]);\n                if (this.parent.activeViewOptions.group.resources.length > 0) {\n                    filterList = this.filterEventsByResource(this.resources[resource], filterList);\n                }\n                const collection = filterList.filter((val) => this.overlapList.indexOf(val) === -1);\n                if (collection.length > 0) {\n                    appointment = appointment.concat(collection);\n                }\n            });\n            for (let i = 0; i < appointment.length - 1; i++) {\n                for (let j = i + 1; j < appointment.length; j++) {\n                    if (appointment[i][fieldMapping.id] === appointment[j][fieldMapping.id]) {\n                        appointment.splice(j, 1);\n                        j--;\n                    }\n                }\n            }\n            this.overlapList = this.overlapList.concat(appointment);\n            eventsList = this.overlapList;\n            for (const event of eventsList) {\n                const record = event;\n                const index = record.Index;\n                if (isNullOrUndefined(this.overlapEvents[index])) {\n                    this.overlapEvents[index] = [event];\n                }\n                else {\n                    this.overlapEvents[index].push(event);\n                }\n            }\n        }\n        if (!isAllDay) {\n            eventsList = eventsList.filter((obj) => (obj[fieldMapping.startTime] === record[fieldMapping.startTime] &&\n                obj[fieldMapping.endTime] > record[fieldMapping.endTime] || obj[fieldMapping.endTime] > record[fieldMapping.startTime] &&\n                obj[fieldMapping.startTime] < record[fieldMapping.endTime] || obj[fieldMapping.endTime] === record[fieldMapping.startTime]\n                && obj[fieldMapping.startTime] === record[fieldMapping.endTime]) ||\n                ((obj[fieldMapping.startTime].getTime() === record[fieldMapping.startTime].getTime() &&\n                    obj[fieldMapping.endTime].getTime() === record[fieldMapping.endTime].getTime())\n                    || (obj[fieldMapping.startTime].getTime() === record[fieldMapping.startTime].getTime() &&\n                        obj[fieldMapping.endTime].getTime() < record[fieldMapping.endTime].getTime() ||\n                        obj[fieldMapping.endTime].getTime() > record[fieldMapping.endTime].getTime())));\n        }\n        if (eventsList.length > 0) {\n            const appLevel = eventsList.map((obj) => obj.Index);\n            appIndex = (appLevel.length > 0) ? this.getSmallestMissingNumber(appLevel) : 0;\n        }\n        return (appIndex === -1) ? 0 : appIndex;\n    }\n    adjustOverlapElements(args) {\n        const data = { appWidth: args.width, appLeft: args.left };\n        for (let i = 0, length1 = this.overlapEvents.length; i < length1; i++) {\n            if (!isNullOrUndefined(this.overlapEvents[i])) {\n                for (let j = 0, length2 = this.overlapEvents[i].length; j < length2; j++) {\n                    const dayCount = this.parent.activeViewOptions.group.byDate ?\n                        (this.resources.length * args.day) + args.resource : args.dayIndex;\n                    const element = this.element.querySelector('#e-appointment-wrapper-' + dayCount);\n                    if (element.childElementCount > 0) {\n                        const eleGuid = this.overlapEvents[i][j].Guid;\n                        if (element.querySelectorAll('div[data-guid=\"' + eleGuid + '\"]').length > 0 && eleGuid !== args.record.Guid) {\n                            const apps = element.querySelector('div[data-guid=\"' + eleGuid + '\"]');\n                            if (parseFloat(args.width) <= parseFloat(apps.style.width)) {\n                                if (this.parent.enableRtl) {\n                                    apps.style.right = this.getEventLeft(args.width, i);\n                                }\n                                else {\n                                    apps.style.left = this.getEventLeft(args.width, i);\n                                }\n                                apps.style.width = ((parseFloat(args.width))) + '%';\n                                data.appWidth = apps.style.width;\n                            }\n                            else {\n                                data.appWidth = apps.style.width;\n                            }\n                        }\n                        else {\n                            let appWidth = args.width;\n                            if (isNullOrUndefined(this.overlapEvents[i - 1])) {\n                                appWidth = this.getEventWidth();\n                            }\n                            data.appWidth = appWidth;\n                            data.appLeft = this.getEventLeft(appWidth, args.index);\n                        }\n                    }\n                }\n            }\n        }\n        return data;\n    }\n    setAllDayRowHeight(height) {\n        const dateHeader = this.parent.element.querySelector('.' + DATE_HEADER_WRAP_CLASS);\n        if (this.parent.height === 'auto' || !this.parent.enableAllDayScroll) {\n            addClass([dateHeader], ALLDAY_APPOINTMENT_AUTO);\n        }\n        const allDayRow = this.parent.element.querySelector('.' + ALLDAY_ROW_CLASS);\n        allDayRow.style.height = '';\n        if (this.parent.uiStateValues.expand && this.parent.height !== 'auto' && this.parent.enableAllDayScroll) {\n            allDayRow.style.height = (height / 12) + 'em';\n            this.parent.eventBase.allDayExpandScroll(dateHeader);\n        }\n        else {\n            dateHeader.scrollTop = 0;\n            for (const element of this.allDayElement) {\n                element.style.height = (height / 12) + 'em';\n            }\n            removeClass([dateHeader], ALLDAY_APPOINTMENT_SCROLL);\n        }\n        this.animation.animate(this.allDayElement[0]);\n    }\n    addOrRemoveClass() {\n        this.moreEvents.filter((element) => {\n            if (!this.parent.uiStateValues.expand && this.allDayLevel > 2) {\n                addClass([element], EVENT_COUNT_CLASS);\n                element.setAttribute('tabindex', '-1');\n            }\n            else {\n                removeClass([element], EVENT_COUNT_CLASS);\n                element.setAttribute('tabindex', '0');\n            }\n        });\n        const moreEventCount = this.element.querySelector('.' + ALLDAY_APPOINTMENT_SECTION_CLASS);\n        if (this.parent.uiStateValues.expand) {\n            removeClass([moreEventCount], APPOINTMENT_ROW_EXPAND_CLASS);\n            addClass([moreEventCount], APPOINTMENT_ROW_COLLAPSE_CLASS);\n        }\n        else {\n            removeClass([moreEventCount], APPOINTMENT_ROW_COLLAPSE_CLASS);\n            addClass([moreEventCount], APPOINTMENT_ROW_EXPAND_CLASS);\n        }\n        if (this.allDayLevel > 2) {\n            removeClass([moreEventCount], DISABLE_CLASS);\n        }\n        else {\n            addClass([moreEventCount], DISABLE_CLASS);\n        }\n        const countCell = [].slice.call(this.element.querySelectorAll('.' + ROW_COUNT_WRAPPER_CLASS));\n        countCell.forEach((element) => {\n            if (!this.parent.uiStateValues.expand && this.allDayLevel > 2) {\n                removeClass([element], DISABLE_CLASS);\n            }\n            else {\n                addClass([element], DISABLE_CLASS);\n            }\n        });\n    }\n    getEventHeight() {\n        const eventElement = createElement('div', { className: APPOINTMENT_CLASS, styles: 'visibility:hidden' });\n        const eventWrapper = this.element.querySelector('.' + ALLDAY_APPOINTMENT_WRAPPER_CLASS + ':first-child');\n        eventWrapper.appendChild(eventElement);\n        const height = eventElement.offsetHeight;\n        remove(eventElement);\n        return height;\n    }\n    rowExpandCollapse() {\n        const target = this.element.querySelector('.' + ALLDAY_APPOINTMENT_SECTION_CLASS);\n        this.parent.uiStateValues.expand = target.classList.contains(APPOINTMENT_ROW_EXPAND_CLASS);\n        let rowHeight;\n        if (this.parent.uiStateValues.expand) {\n            target.setAttribute('title', this.parent.localeObj.getConstant('collapseAllDaySection'));\n            target.setAttribute('aria-label', 'Collapse section');\n            rowHeight = ((this.allDayLevel + 1) * this.getEventHeight()) + 4;\n        }\n        else {\n            target.setAttribute('title', this.parent.localeObj.getConstant('expandAllDaySection'));\n            target.setAttribute('aria-label', 'Expand section');\n            rowHeight = (3 * this.getEventHeight()) + 4;\n        }\n        this.setAllDayRowHeight(rowHeight);\n        this.addOrRemoveClass();\n        this.animation.animate(target);\n    }\n    animationUiUpdate() {\n        this.parent.notify(contentReady, {});\n    }\n    destroy() {\n        if (!this.parent || this.parent && this.parent.isDestroyed) {\n            return;\n        }\n        this.removeEventListener();\n        this.allDayElement = null;\n        this.renderedAllDayEvents = null;\n        this.renderedEvents = null;\n        this.slotCount = null;\n        this.interval = null;\n        this.startHour = null;\n        this.endHour = null;\n        this.element = null;\n        this.fields = null;\n        this.animation = null;\n        super.destroy();\n    }\n}\n\n/* eslint-disable @typescript-eslint/no-explicit-any */\nconst EVENT_GAP = 0;\n/**\n * Month view events render\n */\nclass MonthEvent extends EventBase {\n    constructor(parent) {\n        super(parent);\n        this.renderedEvents = [];\n        this.monthHeaderHeight = 0;\n        this.moreIndicatorHeight = 19;\n        this.renderType = 'day';\n        this.element = this.parent.activeView.getPanel();\n        this.fields = this.parent.eventFields;\n        this.maxHeight = this.parent.eventSettings.enableMaxHeight && !this.parent.eventSettings.enableIndicator\n            && !this.parent.rowAutoHeight;\n        this.withIndicator = this.parent.eventSettings.enableMaxHeight && this.parent.eventSettings.enableIndicator\n            && !this.parent.rowAutoHeight;\n        this.maxOrIndicator = (this.maxHeight || this.withIndicator);\n        this.moreIndicatorHeight =\n            (this.parent.rowAutoHeight && this.parent.eventSettings.ignoreWhitespace) ? 0 : this.moreIndicatorHeight;\n        this.addEventListener();\n    }\n    removeEventWrapper(appElement) {\n        if (appElement.length > 0) {\n            appElement = (this.parent.currentView === 'Month') ? appElement : [appElement[0]];\n            for (const wrap of appElement) {\n                if (!wrap.classList.contains('e-more-indicator') && wrap.parentElement && wrap.parentElement.parentNode) {\n                    remove(wrap.parentElement);\n                }\n            }\n        }\n    }\n    renderAppointments() {\n        if (this.parent.dragAndDropModule) {\n            this.parent.dragAndDropModule.setDragArea();\n        }\n        const conWrap = this.parent.element.querySelector('.' + CONTENT_WRAP_CLASS);\n        if (this.parent.rowAutoHeight) {\n            this.parent.uiStateValues.top = conWrap.scrollTop;\n            this.parent.uiStateValues.left = conWrap.scrollLeft;\n        }\n        const appointmentWrapper = [].slice.call(this.element.querySelectorAll('.' + APPOINTMENT_WRAPPER_CLASS));\n        if (this.parent.crudModule && this.parent.crudModule.crudObj.isCrudAction) {\n            for (let i = 0, len = this.parent.crudModule.crudObj.sourceEvent.length; i < len; i++) {\n                const appElement = [].slice.call(this.element.querySelectorAll('.e-appointment-wrapper ' + '[data-group-index=\"' +\n                    this.parent.crudModule.crudObj.sourceEvent[i].groupIndex + '\"]'));\n                this.removeEventWrapper(appElement);\n                if (this.parent.crudModule.crudObj.targetEvent[i] && this.parent.crudModule.crudObj.sourceEvent[i].groupIndex !==\n                    this.parent.crudModule.crudObj.targetEvent[i].groupIndex) {\n                    const ele = [].slice.call(this.element.querySelectorAll('.e-appointment-wrapper ' + '[data-group-index=\"' +\n                        this.parent.crudModule.crudObj.targetEvent[i].groupIndex + '\"]'));\n                    this.removeEventWrapper(ele);\n                }\n            }\n        }\n        else {\n            for (const wrap of appointmentWrapper) {\n                remove(wrap);\n            }\n        }\n        this.removeHeightProperty(CONTENT_TABLE_CLASS);\n        if (!this.element.querySelector('.' + WORK_CELLS_CLASS)) {\n            return;\n        }\n        if (this.parent.currentView === 'Month') {\n            const wrapper = createElement('div', { className: APPOINTMENT_WRAPPER_CLASS });\n            const cellTd = this.parent.element.querySelector('.' + WORK_CELLS_CLASS);\n            cellTd.appendChild(wrapper);\n            this.monthHeaderHeight = wrapper.offsetTop - cellTd.offsetTop;\n            cellTd.removeChild(wrapper);\n        }\n        this.eventHeight = getElementHeightFromClass(this.element, APPOINTMENT_CLASS);\n        const scrollTop = conWrap.scrollTop;\n        if (this.parent.rowAutoHeight && this.parent.virtualScrollModule && !isNullOrUndefined(this.parent.currentAction)) {\n            conWrap.scrollTop = conWrap.scrollTop - 1;\n        }\n        if (this.parent.activeViewOptions.group.resources.length > 0) {\n            this.renderResourceEvents();\n            if (this.parent.virtualScrollModule) {\n                this.parent.virtualScrollModule.updateFocusedWorkCell();\n            }\n        }\n        else {\n            this.renderEventsHandler(this.parent.activeView.renderDates, this.parent.activeViewOptions.workDays);\n        }\n        if (this.parent.rowAutoHeight) {\n            this.updateBlockElements();\n            const data = {\n                cssProperties: this.parent.getCssProperties(),\n                module: this.parent.getModuleName(),\n                isPreventScrollUpdate: true,\n                scrollPosition: { left: this.parent.uiStateValues.left, top: this.parent.uiStateValues.top }\n            };\n            if (this.parent.virtualScrollModule) {\n                if (this.parent.currentAction) {\n                    conWrap.scrollTop = scrollTop;\n                    this.parent.currentAction = null;\n                }\n                else {\n                    this.parent.virtualScrollModule.updateVirtualScrollHeight();\n                }\n            }\n            if (!this.parent.enablePersistence) {\n                this.parent.notify(contentReady, {});\n            }\n            this.parent.notify(scrollUiUpdate, data);\n            if (this.parent.currentView === 'Month' && this.parent.showWeekNumber) {\n                const totalCells = [].slice.call(this.parent.element.querySelectorAll('.e-content-wrap table tr td:first-child'));\n                const weekNumberCells = [].slice.call(this.parent.element.querySelectorAll('.' + WEEK_NUMBER_CLASS));\n                weekNumberCells.forEach((cell, i) => {\n                    const height = totalCells[i].offsetHeight;\n                    setStyleAttribute(cell, { 'height': height + 'px' });\n                });\n                this.parent.element.querySelector('.' + WEEK_NUMBER_WRAPPER_CLASS).scrollTop =\n                    this.parent.element.querySelector('.' + CONTENT_WRAP_CLASS).scrollTop;\n            }\n        }\n        this.parent.renderTemplates();\n    }\n    renderEventsHandler(dateRender, workDays, resData) {\n        this.renderedEvents = [];\n        let eventsList;\n        let blockList;\n        let resIndex = 0;\n        if (resData) {\n            resIndex = resData.groupIndex;\n            this.cssClass = resData.cssClass;\n            this.groupOrder = resData.groupOrder;\n            eventsList = this.parent.eventBase.filterEventsByResource(resData, this.parent.eventsProcessed);\n            blockList = this.parent.eventBase.filterEventsByResource(resData, this.parent.blockProcessed);\n            this.workCells = [].slice.call(this.element.querySelectorAll('.' + WORK_CELLS_CLASS + '[data-group-index=\"' + resIndex + '\"]'));\n        }\n        else {\n            eventsList = this.parent.eventsProcessed;\n            blockList = this.parent.blockProcessed;\n            this.workCells = [].slice.call(this.element.querySelectorAll('.' + WORK_CELLS_CLASS));\n        }\n        this.sortByDateTime(eventsList);\n        this.sortByDateTime(blockList);\n        if (this.parent.currentView === 'Month' && this.parent.rowAutoHeight && this.parent.activeViewOptions.group.resources.length === 0) {\n            const totalCells = [].slice.call(this.parent.element.querySelectorAll('.e-content-wrap table tr td:first-child'));\n            const height = this.parent.height === 'auto' ? (this.parent.element.querySelector('.e-content-wrap').clientHeight +\n                this.parent.element.querySelector('.e-date-header-wrap').clientHeight) / totalCells.length\n                : this.parent.element.querySelector('.e-schedule-table').clientHeight / totalCells.length;\n            totalCells.forEach((cell) => {\n                setStyleAttribute(cell, { 'height': height + 'px' });\n            });\n        }\n        const cellDetail = this.workCells.slice(-1)[0].getBoundingClientRect();\n        this.cellWidth = cellDetail.width;\n        this.cellHeight = cellDetail.height;\n        this.dateRender = dateRender;\n        const filteredDates = this.getRenderedDates(dateRender);\n        this.getSlotDates(workDays);\n        this.processBlockEvents(blockList, resIndex, resData);\n        for (const event of eventsList) {\n            if (this.parent.resourceBase && !resData) {\n                this.cssClass = this.parent.resourceBase.getCssClass(event);\n            }\n            const spannedEvents = this.splitEvent(event, filteredDates || this.dateRender);\n            for (const event of spannedEvents) {\n                if (this.maxHeight) {\n                    const sDate = this.parent.currentView === 'Month' ? event[this.fields.startTime] :\n                        this.getStartTime(event, event.data);\n                    if (this.getIndex(sDate) > 0) {\n                        continue;\n                    }\n                }\n                this.updateIndicatorIcon(event);\n                this.renderEvents(event, resIndex, eventsList);\n            }\n        }\n        this.cssClass = null;\n        this.groupOrder = null;\n    }\n    processBlockEvents(blockEvents, resIndex, resData) {\n        for (const event of blockEvents) {\n            if (this.parent.resourceBase && !resData) {\n                this.cssClass = this.parent.resourceBase.getCssClass(event);\n            }\n            const blockSpannedList = [];\n            if (this.renderType === 'day' && !event[this.fields.isAllDay]) {\n                const temp = extend({}, event, null, true);\n                let isSameDate = this.isSameDate(temp[this.fields.startTime], temp[this.fields.endTime]);\n                temp.isBlockIcon = isSameDate;\n                if (!isSameDate && getDateInMs(temp[this.fields.startTime]) > 0) {\n                    const e = extend({}, event, null, true);\n                    e[this.fields.endTime] = addDays(resetTime(new Date(event[this.fields.startTime] + '')), 1);\n                    e.isBlockIcon = true;\n                    temp[this.fields.startTime] = e[this.fields.endTime];\n                    blockSpannedList.push(e);\n                }\n                isSameDate = this.isSameDate(temp[this.fields.startTime], temp[this.fields.endTime]);\n                if (!isSameDate && getDateInMs(temp[this.fields.endTime]) > 0) {\n                    const e = extend({}, event, null, true);\n                    e[this.fields.startTime] = resetTime(new Date(event[this.fields.endTime] + ''));\n                    e.isBlockIcon = true;\n                    blockSpannedList.push(e);\n                    temp[this.fields.endTime] = e[this.fields.startTime];\n                }\n                blockSpannedList.push(temp);\n            }\n            else {\n                blockSpannedList.push(event);\n            }\n            for (const blockEvent of blockSpannedList) {\n                const spannedEvents = this.splitEvent(blockEvent, this.dateRender);\n                for (const event of spannedEvents) {\n                    this.renderBlockEvents(event, resIndex, !!blockEvent.isBlockIcon);\n                }\n            }\n        }\n    }\n    isSameDate(start, end) {\n        return new Date(+start).setHours(0, 0, 0, 0) === new Date(+end).setHours(0, 0, 0, 0);\n    }\n    renderBlockEvents(event, resIndex, isIcon) {\n        const eventData = event.data;\n        const startTime = this.getStartTime(event, eventData);\n        const endTime = this.getEndTime(event, eventData);\n        const day = this.parent.getIndexOfDate(this.dateRender, resetTime(new Date(startTime.getTime())));\n        if (day < 0 || startTime > endTime) {\n            return;\n        }\n        const cellTd = this.getCellTd(day);\n        const position = this.getPosition(startTime, endTime, event[this.fields.isAllDay], day);\n        if (!isIcon) {\n            const diffInDays = eventData.count;\n            let appWidth = this.getEventWidth(startTime, endTime, event[this.fields.isAllDay], diffInDays);\n            appWidth = (appWidth <= 0) ? this.cellWidth : appWidth;\n            const appLeft = (this.parent.enableRtl) ? 0 : position;\n            const appRight = (this.parent.enableRtl) ? position : 0;\n            const appHeight = this.cellHeight - this.monthHeaderHeight;\n            const appTop = this.getRowTop(resIndex);\n            const blockElement = this.createBlockAppointmentElement(event, resIndex);\n            setStyleAttribute(blockElement, {\n                'width': appWidth + 'px', 'height': appHeight + 'px', 'left': appLeft + 'px',\n                'right': appRight + 'px', 'top': appTop + 'px'\n            });\n            this.renderEventElement(event, blockElement, cellTd);\n        }\n        else {\n            this.renderBlockIndicator(cellTd, position, resIndex);\n        }\n    }\n    // eslint-disable-next-line @typescript-eslint/no-unused-vars\n    renderBlockIndicator(cellTd, position, resIndex) {\n        const blockIndicator = createElement('div', { className: 'e-icons ' + BLOCK_INDICATOR_CLASS });\n        if (isNullOrUndefined(cellTd.querySelector('.' + BLOCK_INDICATOR_CLASS))) {\n            cellTd.appendChild(blockIndicator);\n        }\n    }\n    // eslint-disable-next-line @typescript-eslint/no-unused-vars\n    getStartTime(event, eventData) {\n        return event[this.fields.startTime];\n    }\n    // eslint-disable-next-line @typescript-eslint/no-unused-vars\n    getEndTime(event, eventData) {\n        return event[this.fields.endTime];\n    }\n    getCellTd(day) {\n        return this.workCells[day];\n    }\n    getEventWidth(startDate, endDate, isAllDay, count) {\n        return count * this.cellWidth - 1;\n    }\n    // eslint-disable-next-line @typescript-eslint/no-unused-vars\n    getPosition(startTime, endTime, isAllDay, day) {\n        return 0;\n    }\n    // eslint-disable-next-line @typescript-eslint/no-unused-vars\n    getRowTop(resIndex) {\n        return 0;\n    }\n    updateIndicatorIcon(event) {\n        if (this.parent.currentView.indexOf('Timeline') === -1 || this.parent.currentView === 'TimelineMonth'\n            || event[this.fields.isAllDay]) {\n            return;\n        }\n        const cloneData = event.data;\n        const start = this.parent.activeView.getStartHour();\n        const end = this.parent.activeView.getEndHour();\n        const startHour = getStartEndHours(event[this.fields.startTime], start, end);\n        const endHour = getStartEndHours(event[this.fields.endTime], start, end);\n        const actualStartTime = cloneData[this.fields.startTime];\n        const actualEndTime = cloneData[this.fields.endTime];\n        cloneData.isLeft = cloneData.isLeft || actualStartTime.getTime() < startHour.startHour.getTime();\n        cloneData.isRight = cloneData.isRight || actualEndTime.getTime() > endHour.endHour.getTime();\n        if (resetTime(actualStartTime).getTime() !== resetTime(actualEndTime).getTime()) {\n            const actualStartHour = startHour.startHour;\n            const actualEndHour = endHour.endHour;\n            const startTime = new Date(resetTime(actualStartTime));\n            startTime.setHours(actualEndHour.getHours(), actualEndHour.getMinutes(), actualEndHour.getSeconds());\n            cloneData.isLeft = cloneData.isLeft || actualStartTime.getTime() >= (actualStartHour.getDate() === startHour.endHour.getDate() ?\n                startTime.getTime() : addDays(startTime, 1).getTime());\n            if (actualEndTime.getTime() !== resetTime(actualEndTime).getTime()) {\n                const endTime = new Date(resetTime(actualEndTime));\n                cloneData.isRight = cloneData.isRight || actualEndTime.getTime() <=\n                    endTime.setHours(actualStartHour.getHours(), actualStartHour.getMinutes(), actualStartHour.getSeconds());\n            }\n        }\n    }\n    renderResourceEvents() {\n        const resources = this.parent.uiStateValues.isGroupAdaptive ?\n            [this.parent.resourceBase.lastResourceLevel[this.parent.uiStateValues.groupIndex]] :\n            this.parent.resourceBase.lastResourceLevel;\n        if (this.parent.crudModule && this.parent.crudModule.crudObj.isCrudAction) {\n            for (let i = 0, len = this.parent.crudModule.crudObj.sourceEvent.length; i < len; i++) {\n                const sourceRes = this.parent.crudModule.crudObj.sourceEvent[i];\n                this.renderEventsHandler(sourceRes.renderDates, sourceRes.workDays, sourceRes);\n                if (this.parent.crudModule.crudObj.sourceEvent[i].groupIndex !==\n                    this.parent.crudModule.crudObj.targetEvent[i].groupIndex) {\n                    const target = this.parent.crudModule.crudObj.targetEvent[i];\n                    this.renderEventsHandler(target.renderDates, target.workDays, target);\n                }\n            }\n            this.parent.crudModule.crudObj.isCrudAction = false;\n        }\n        else {\n            for (const slotData of resources) {\n                this.renderEventsHandler(slotData.renderDates, slotData.workDays, slotData);\n            }\n        }\n    }\n    getSlotDates(workDays) {\n        this.slots = [];\n        const dates = this.dateRender.map((date) => { return +date; });\n        const noOfDays = this.parent.activeViewOptions.showWeekend ? WEEK_LENGTH : workDays.length;\n        while (dates.length > 0) {\n            this.slots.push(dates.splice(0, noOfDays));\n        }\n    }\n    createAppointmentElement(record, resIndex, isCloneElement = false) {\n        const eventSubject = (record[this.fields.subject] || this.parent.eventSettings.fields.subject.default ||\n            this.parent.localeObj.getConstant('addTitle'));\n        const newRecord = extend({}, record, record.data, true);\n        const attrs = {\n            'data-id': 'Appointment_' + record[this.fields.id],\n            'role': 'button', 'tabindex': '0',\n            'aria-readonly': this.parent.eventBase.getReadonlyAttribute(record), 'aria-selected': 'false', 'aria-grabbed': 'true',\n            'aria-label': this.parent.getAnnouncementString(newRecord, eventSubject)\n        };\n        if (!isCloneElement) {\n            attrs['data-guid'] = record.Guid;\n        }\n        if (this.parent.activeViewOptions.group.resources.length > 0) {\n            attrs['data-group-index'] = resIndex.toString();\n        }\n        const appointmentWrapper = createElement('div', { className: APPOINTMENT_CLASS, attrs: attrs });\n        if (!isNullOrUndefined(this.cssClass)) {\n            addClass([appointmentWrapper], this.cssClass);\n        }\n        if (record[this.fields.isReadonly]) {\n            addClass([appointmentWrapper], 'e-read-only');\n        }\n        const appointmentDetails = createElement('div', { className: APPOINTMENT_DETAILS });\n        appointmentWrapper.appendChild(appointmentDetails);\n        let templateElement;\n        const eventData = record.data;\n        const eventObj = this.getEventData(record);\n        if (!isNullOrUndefined(this.parent.activeViewOptions.eventTemplate)) {\n            const scheduleId = this.parent.element.id + '_';\n            const viewName = this.parent.activeViewOptions.eventTemplateName;\n            const templateId = scheduleId + viewName + 'eventTemplate';\n            templateElement = this.parent.getAppointmentTemplate()(eventObj, this.parent, 'eventTemplate', templateId, false);\n        }\n        else {\n            const eventLocation = (record[this.fields.location] || this.parent.eventSettings.fields.location.default || '');\n            const appointmentSubject = createElement('div', {\n                className: SUBJECT_CLASS,\n                innerHTML: (eventSubject + (eventLocation ? ';&nbsp' + eventLocation : ''))\n            });\n            const appointmentStartTime = createElement('div', {\n                className: APPOINTMENT_TIME + (this.parent.isAdaptive ? ' ' + DISABLE_CLASS : ''),\n                innerHTML: this.parent.getTimeString(eventData[this.fields.startTime])\n            });\n            const appointmentEndTime = createElement('div', {\n                className: APPOINTMENT_TIME + (this.parent.isAdaptive ? ' ' + DISABLE_CLASS : ''),\n                innerHTML: this.parent.getTimeString(eventData[this.fields.endTime])\n            });\n            if (this.parent.currentView === 'Month') {\n                if (record[this.fields.isAllDay]) {\n                    templateElement = [appointmentSubject];\n                    addClass([appointmentSubject], 'e-text-center');\n                }\n                else if (eventData.count <= 1 && !eventData.isLeft && !eventData.isRight) {\n                    templateElement = [appointmentStartTime, appointmentSubject];\n                }\n                else {\n                    templateElement = [];\n                    addClass([appointmentSubject], 'e-text-center');\n                    if (!eventData.isLeft) {\n                        templateElement.push(appointmentStartTime);\n                    }\n                    templateElement.push(appointmentSubject);\n                    if (!eventData.isRight) {\n                        templateElement.push(appointmentEndTime);\n                    }\n                }\n            }\n            else {\n                let innerElement;\n                if (record[this.fields.isAllDay]) {\n                    const allDayString = createElement('div', {\n                        className: APPOINTMENT_TIME, innerHTML: this.parent.localeObj.getConstant('allDay')\n                    });\n                    innerElement = [appointmentSubject, allDayString];\n                }\n                else {\n                    const timeString = this.parent.getTimeString(eventData[this.fields.startTime])\n                        + ' - ' + this.parent.getTimeString(eventData[this.fields.endTime]);\n                    const appTime = createElement('div', {\n                        className: APPOINTMENT_TIME + (this.parent.isAdaptive ? ' ' + DISABLE_CLASS : ''), innerHTML: timeString\n                    });\n                    const appLocation = createElement('div', { className: LOCATION_CLASS, innerHTML: eventLocation });\n                    innerElement = [appointmentSubject, appTime, appLocation];\n                }\n                const wrap = createElement('div', { className: 'e-inner-wrap' });\n                append(innerElement, wrap);\n                templateElement = [wrap];\n            }\n        }\n        append(templateElement, appointmentDetails);\n        this.appendEventIcons(record, appointmentDetails);\n        this.renderResizeHandler(appointmentWrapper, record.data, record[this.fields.isReadonly]);\n        return appointmentWrapper;\n    }\n    appendEventIcons(record, appointmentDetails) {\n        const eventData = record.data;\n        if (!isNullOrUndefined(record[this.fields.recurrenceRule]) || !isNullOrUndefined(record[this.fields.recurrenceID])) {\n            const iconClass = (record[this.fields.id] === record[this.fields.recurrenceID]) ?\n                EVENT_RECURRENCE_ICON_CLASS : EVENT_RECURRENCE_EDIT_ICON_CLASS;\n            appointmentDetails.appendChild(createElement('div', {\n                className: ICON + ' ' + iconClass + (this.parent.isAdaptive ? ' ' + DISABLE_CLASS : '')\n            }));\n        }\n        if (eventData.isLeft) {\n            const iconLeft = createElement('div', {\n                className: EVENT_INDICATOR_CLASS + ' ' + ICON + ' ' + EVENT_ICON_LEFT_CLASS\n            });\n            prepend([iconLeft], appointmentDetails);\n        }\n        if (eventData.isRight) {\n            const iconRight = createElement('div', {\n                className: EVENT_INDICATOR_CLASS + ' ' + ICON + ' ' + EVENT_ICON_RIGHT_CLASS\n            });\n            append([iconRight], appointmentDetails);\n        }\n    }\n    // eslint-disable-next-line @typescript-eslint/no-unused-vars\n    renderEvents(event, resIndex, eventsList) {\n        const startTime = event[this.fields.startTime];\n        const endTime = event[this.fields.endTime];\n        const day = this.parent.getIndexOfDate(this.dateRender, resetTime(startTime));\n        if (day < 0) {\n            return;\n        }\n        if ((startTime.getTime() < this.parent.minDate.getTime()) || (endTime.getTime() > this.parent.maxDate.getTime())) {\n            return;\n        }\n        const overlapCount = this.getIndex(startTime);\n        event.Index = overlapCount;\n        let appHeight = this.eventHeight;\n        this.renderedEvents.push(extend({}, event, null, true));\n        const diffInDays = event.data.count;\n        if (startTime.getTime() <= endTime.getTime()) {\n            const appWidth = (diffInDays * this.cellWidth) - 5;\n            const cellTd = this.workCells[day];\n            const appTop = (overlapCount * (appHeight + EVENT_GAP));\n            const height = this.monthHeaderHeight + ((overlapCount + 1) * (appHeight + EVENT_GAP)) + this.moreIndicatorHeight;\n            const enableAppRender = this.maxOrIndicator ? overlapCount < 1 ? true : false : this.cellHeight > height;\n            if (this.parent.rowAutoHeight || enableAppRender) {\n                let appointmentElement;\n                if (this.inlineValue) {\n                    appointmentElement = this.parent.inlineModule.createInlineAppointmentElement();\n                }\n                else {\n                    appointmentElement = this.createAppointmentElement(event, resIndex);\n                }\n                this.applyResourceColor(appointmentElement, event, 'backgroundColor', this.groupOrder);\n                this.wireAppointmentEvents(appointmentElement, event);\n                setStyleAttribute(appointmentElement, { 'width': appWidth + 'px', 'top': appTop + 'px' });\n                this.renderEventElement(event, appointmentElement, cellTd);\n                if (this.parent.rowAutoHeight) {\n                    const firstChild = cellTd.parentElement.firstElementChild;\n                    this.updateCellHeight(firstChild, height);\n                }\n            }\n            else {\n                for (let i = 0; i < diffInDays; i++) {\n                    const cellTd = this.workCells[day + i];\n                    if (cellTd && isNullOrUndefined(cellTd.querySelector('.' + MORE_INDICATOR_CLASS))) {\n                        const startDate = new Date(this.dateRender[day + i].getTime());\n                        const endDate = addDays(this.dateRender[day + i], 1);\n                        const groupIndex = cellTd.getAttribute('data-group-index');\n                        const filterEvents = this.getFilteredEvents(startDate, endDate, groupIndex);\n                        const appArea = this.cellHeight - this.monthHeaderHeight - this.moreIndicatorHeight;\n                        appHeight = this.withIndicator ? appArea : appHeight;\n                        const renderedAppCount = Math.floor(appArea / (appHeight + EVENT_GAP));\n                        const count = (filterEvents.length - renderedAppCount) <= 0 ? 1 : (filterEvents.length - renderedAppCount);\n                        const moreIndicatorElement = this.getMoreIndicatorElement(count, startDate, endDate);\n                        if (!isNullOrUndefined(groupIndex)) {\n                            moreIndicatorElement.setAttribute('data-group-index', groupIndex);\n                        }\n                        moreIndicatorElement.style.top = appArea + 'px';\n                        moreIndicatorElement.style.width = this.cellWidth - 2 + 'px';\n                        this.renderElement(cellTd, moreIndicatorElement);\n                        EventHandler.add(moreIndicatorElement, 'click', this.moreIndicatorClick, this);\n                    }\n                }\n            }\n        }\n    }\n    updateCellHeight(cell, height) {\n        if ((height > cell.offsetHeight)) {\n            setStyleAttribute(cell, { 'height': height + 'px' });\n        }\n    }\n    updateBlockElements() {\n        const blockElement = [].slice.call(this.element.querySelectorAll('.' + BLOCK_APPOINTMENT_CLASS));\n        for (const element of blockElement) {\n            const target = closest(element, 'tr');\n            this.monthHeaderHeight = element.offsetParent.offsetTop - target.offsetTop;\n            element.style.height = ((target.offsetHeight - 1) - this.monthHeaderHeight) + 'px';\n            const firstChild = target.firstElementChild;\n            const width = Math.round(element.offsetWidth / firstChild.offsetWidth);\n            element.style.width = (firstChild.offsetWidth * width) + 'px';\n        }\n    }\n    // eslint-disable-next-line max-len\n    getFilteredEvents(startDate, endDate, groupIndex, eventsList) {\n        let filteredEvents;\n        if (isNullOrUndefined(groupIndex)) {\n            filteredEvents = this.filterEvents(startDate, endDate);\n        }\n        else {\n            const data = this.parent.resourceBase.lastResourceLevel[parseInt(groupIndex, 10)];\n            filteredEvents = this.filterEvents(startDate, endDate, isNullOrUndefined(eventsList) ? undefined : eventsList, data);\n        }\n        return filteredEvents;\n    }\n    getOverlapEvents(date, appointments) {\n        const appointmentsList = [];\n        for (const app of appointments) {\n            const dateTime = resetTime(date).getTime();\n            if ((resetTime(app[this.fields.startTime]).getTime() <= dateTime) &&\n                (resetTime(app[this.fields.endTime]).getTime() >= dateTime)) {\n                appointmentsList.push(app);\n            }\n        }\n        return appointmentsList;\n    }\n    getIndex(date) {\n        let appIndex = -1;\n        const appointments = this.renderedEvents;\n        if (appointments.length > 0) {\n            const appointmentsList = this.getOverlapEvents(date, appointments);\n            const appLevel = appointmentsList.map((obj) => obj.Index);\n            appIndex = (appLevel.length > 0) ? this.getSmallestMissingNumber(appLevel) : 0;\n        }\n        return (appIndex === -1) ? 0 : appIndex;\n    }\n    moreIndicatorClick(event) {\n        const target = closest(event.target, '.' + MORE_INDICATOR_CLASS);\n        const startDate = new Date(parseInt(target.getAttribute('data-start-date'), 10));\n        const endDate = new Date(parseInt(target.getAttribute('data-end-date'), 10));\n        const groupIndex = target.getAttribute('data-group-index');\n        const moreArgs = {\n            cancel: false, event: event, element: target, isPopupOpen: true,\n            startTime: startDate, endTime: endDate, viewName: this.parent.getNavigateView()\n        };\n        if (groupIndex) {\n            moreArgs.groupIndex = parseInt(groupIndex, 10);\n        }\n        this.parent.trigger(moreEventsClick, moreArgs, (clickArgs) => {\n            if (!clickArgs.cancel) {\n                if (clickArgs.isPopupOpen) {\n                    const filteredEvents = this.getFilteredEvents(startDate, endDate, groupIndex);\n                    const moreArgs = { date: startDate, event: filteredEvents, element: event.target };\n                    this.parent.quickPopup.moreEventClick(moreArgs, endDate, groupIndex);\n                }\n                else {\n                    this.parent.setProperties({ selectedDate: startDate }, true);\n                    this.parent.changeView(clickArgs.viewName, event);\n                }\n            }\n        });\n    }\n    renderEventElement(event, appointmentElement, cellTd) {\n        const eventType = appointmentElement.classList.contains(BLOCK_APPOINTMENT_CLASS) ? 'blockEvent' : 'event';\n        const isAppointment = appointmentElement.classList.contains(APPOINTMENT_CLASS);\n        const eventObj = this.getEventData(event);\n        const args = { data: eventObj, element: appointmentElement, cancel: false, type: eventType };\n        this.parent.trigger(eventRendered, args, (eventArgs) => {\n            if (eventArgs.cancel) {\n                this.renderedEvents.pop();\n            }\n            else {\n                this.renderElement(cellTd, appointmentElement, isAppointment);\n            }\n        });\n    }\n    getEventData(event) {\n        const eventObj = extend({}, event, null, true);\n        eventObj[this.fields.startTime] = event.data[this.fields.startTime];\n        eventObj[this.fields.endTime] = event.data[this.fields.endTime];\n        return eventObj;\n    }\n    renderElement(cellTd, element, isAppointment = false) {\n        if (this.maxOrIndicator && isAppointment) {\n            this.setMaxEventHeight(element, cellTd);\n        }\n        const wrapperEle = cellTd.querySelector('.' + APPOINTMENT_WRAPPER_CLASS);\n        if (wrapperEle) {\n            wrapperEle.appendChild(element);\n        }\n        else {\n            const wrapper = createElement('div', { className: APPOINTMENT_WRAPPER_CLASS });\n            wrapper.appendChild(element);\n            cellTd.appendChild(wrapper);\n        }\n    }\n    getMoreIndicatorElement(count, startDate, endDate) {\n        const moreIndicatorElement = createElement('div', {\n            className: MORE_INDICATOR_CLASS,\n            innerHTML: '+' + this.parent.globalize.formatNumber(count) + '&nbsp;' + (this.parent.isAdaptive ? '' : this.parent.localeObj.getConstant('more')),\n            attrs: {\n                'tabindex': '0',\n                'data-start-date': startDate.getTime().toString(),\n                'data-end-date': endDate.getTime().toString(),\n                'role': 'list'\n            }\n        });\n        return moreIndicatorElement;\n    }\n    removeHeightProperty(selector) {\n        const rows = [].slice.call(this.element.querySelectorAll('.' + selector + ' tbody tr'));\n        for (const row of rows) {\n            row.firstElementChild.style.height = '';\n        }\n    }\n    setMaxEventHeight(event, cell) {\n        const headerHeight = getOuterHeight(cell.querySelector('.' + DATE_HEADER_CLASS));\n        const height = (cell.offsetHeight - headerHeight) - (this.maxHeight ? 0 : this.moreIndicatorHeight);\n        setStyleAttribute(event, { 'height': height + 'px', 'align-items': 'center' });\n    }\n    destroy() {\n        this.element = null;\n        this.fields = null;\n        this.maxHeight = null;\n        this.withIndicator = null;\n        this.maxOrIndicator = null;\n        this.moreIndicatorHeight = null;\n        this.removeEventListener();\n        super.destroy();\n    }\n}\n\n/* eslint-disable max-len */\n/* eslint-disable @typescript-eslint/no-explicit-any */\nconst EVENT_GAP$1 = 2;\nconst BLOCK_INDICATOR_WIDTH = 22;\nconst BLOCK_INDICATOR_HEIGHT = 18;\n/**\n * Timeline view events render\n */\nclass TimelineEvent extends MonthEvent {\n    constructor(parent, type) {\n        super(parent);\n        this.startHour = this.parent.activeView.getStartHour();\n        this.endHour = this.parent.activeView.getEndHour();\n        this.slotCount = this.parent.activeViewOptions.timeScale.slotCount;\n        this.interval = this.parent.activeViewOptions.timeScale.interval;\n        this.day = 0;\n        this.rowIndex = 0;\n        this.renderType = type;\n        this.eventContainers = [].slice.call(this.element.querySelectorAll('.' + APPOINTMENT_CONTAINER_CLASS));\n        const tr = [].slice.call(this.element.querySelectorAll('.' + CONTENT_TABLE_CLASS + ' tbody tr'));\n        this.dayLength = tr.length === 0 ? 0 : tr[0].children.length;\n        this.content = this.parent.element.querySelector('.' + CONTENT_TABLE_CLASS);\n    }\n    getSlotDates() {\n        this.slots = [];\n        this.slots.push(this.parent.activeView.renderDates.map((date) => { return +date; }));\n        if (this.parent.activeViewOptions.headerRows.length > 0 &&\n            this.parent.activeViewOptions.headerRows.slice(-1)[0].option !== 'Hour') {\n            this.renderType = 'day';\n            this.cellWidth = this.content.offsetWidth / this.dateRender.length;\n            this.slotsPerDay = 1;\n        }\n        else {\n            this.slotsPerDay = (this.dayLength / this.dateRender.length);\n        }\n    }\n    getOverlapEvents(date, appointments) {\n        const appointmentsList = [];\n        if (this.renderType === 'day') {\n            for (const app of appointments) {\n                if ((resetTime(app[this.fields.startTime]).getTime() <= resetTime(new Date(date.getTime())).getTime()) &&\n                    (resetTime(app[this.fields.endTime]).getTime() >= resetTime(new Date(date.getTime())).getTime())) {\n                    appointmentsList.push(app);\n                }\n            }\n        }\n        else {\n            for (const app of appointments) {\n                const eventData = app.data;\n                if (eventData.trimStartTime.getTime() <= date.getTime() &&\n                    eventData.trimEndTime.getTime() > date.getTime()) {\n                    appointmentsList.push(app);\n                }\n            }\n        }\n        return appointmentsList;\n    }\n    getSortComparerIndex(startDate, endDate) {\n        let appIndex = -1;\n        const appointments = this.renderedEvents;\n        if (appointments.length > 0) {\n            const appointmentsList = this.getOverlapSortComparerEvents(startDate, endDate, appointments);\n            const appLevel = appointmentsList.map((obj) => obj.Index);\n            appIndex = (appLevel.length > 0) ? this.getSmallestMissingNumber(appLevel) : 0;\n        }\n        return (appIndex === -1) ? 0 : appIndex;\n    }\n    getOverlapSortComparerEvents(startDate, endDate, appointmentsCollection) {\n        const appointments = [];\n        for (const app of appointmentsCollection) {\n            if (this.renderType === 'day') {\n                if ((resetTime(app[this.fields.startTime]).getTime() <= resetTime(new Date(startDate.getTime())).getTime()) &&\n                    (resetTime(app[this.fields.endTime]).getTime() >= resetTime(new Date(startDate.getTime())).getTime())) {\n                    appointments.push(app);\n                }\n            }\n            else {\n                const eventData = app.data;\n                if (((eventData.trimStartTime.getTime() <= startDate.getTime()) && (startDate.getTime() < eventData.trimEndTime.getTime())) ||\n                    ((startDate.getTime() <= eventData.trimStartTime.getTime()) && (eventData.trimStartTime.getTime() < endDate.getTime()))) {\n                    appointments.push(app);\n                }\n            }\n        }\n        return appointments;\n    }\n    renderResourceEvents() {\n        this.removeHeightProperty(RESOURCE_COLUMN_TABLE_CLASS);\n        const resources = this.parent.uiStateValues.isGroupAdaptive ?\n            [this.parent.resourceBase.lastResourceLevel[this.parent.uiStateValues.groupIndex]] :\n            this.parent.resourceBase.renderedResources;\n        if (this.parent.crudModule && this.parent.crudModule.crudObj.isCrudAction) {\n            for (let i = 0, len = this.parent.crudModule.crudObj.sourceEvent.length; i < len; i++) {\n                const source = this.parent.crudModule.crudObj.sourceEvent[i];\n                this.rowIndex = source.groupIndex;\n                this.renderEventsHandler(this.parent.activeView.renderDates, this.parent.activeViewOptions.workDays, source);\n                if (this.parent.crudModule.crudObj.targetEvent[i] && this.parent.crudModule.crudObj.sourceEvent[i].groupIndex !==\n                    this.parent.crudModule.crudObj.targetEvent[i].groupIndex) {\n                    const target = this.parent.crudModule.crudObj.targetEvent[i];\n                    this.rowIndex = target.groupIndex;\n                    this.renderEventsHandler(this.parent.activeView.renderDates, this.parent.activeViewOptions.workDays, target);\n                }\n            }\n            this.parent.crudModule.crudObj.isCrudAction = false;\n        }\n        else {\n            for (let i = 0; i < resources.length; i++) {\n                this.rowIndex = i;\n                this.renderEventsHandler(this.parent.activeView.renderDates, this.parent.activeViewOptions.workDays, resources[i]);\n            }\n        }\n    }\n    renderEvents(event, resIndex, appointmentsList) {\n        let startTime = event[this.fields.startTime];\n        let endTime = event[this.fields.endTime];\n        if ((startTime.getTime() < this.parent.minDate.getTime()) || (endTime.getTime() > this.parent.maxDate.getTime())) {\n            return;\n        }\n        const eventData = event.data;\n        startTime = this.getStartTime(event, eventData);\n        endTime = this.getEndTime(event, eventData);\n        this.day = this.parent.getIndexOfDate(this.dateRender, resetTime(new Date(startTime.getTime())));\n        if (this.day < 0) {\n            return;\n        }\n        const cellTd = this.getCellTd();\n        const overlapCount = (isNullOrUndefined(this.parent.eventSettings.sortComparer)) ? this.getIndex(startTime) : this.getSortComparerIndex(startTime, endTime);\n        event.Index = overlapCount;\n        const elem = this.element.querySelector('.' + APPOINTMENT_CLASS);\n        const eleHeight = (elem) ? elem.getBoundingClientRect().height : 0;\n        const appHeight = (elem && eleHeight > 0) ? eleHeight : this.eventHeight;\n        const diffInDays = eventData.count;\n        const eventObj = extend({}, event, null, true);\n        eventObj[this.fields.startTime] = eventData[this.fields.startTime];\n        eventObj[this.fields.endTime] = eventData[this.fields.endTime];\n        const currentDate = resetTime(new Date(this.dateRender[this.day].getTime()));\n        const schedule = getStartEndHours(currentDate, this.startHour, this.endHour);\n        const isValidEvent = this.isValidEvent(eventObj, startTime, endTime, schedule);\n        if (startTime <= endTime && isValidEvent) {\n            let appWidth = this.getEventWidth(startTime, endTime, event[this.fields.isAllDay], diffInDays);\n            appWidth = this.renderType === 'day' ? appWidth - 2 : appWidth;\n            let appLeft = 0;\n            let appRight = 0;\n            const position = this.getPosition(startTime, endTime, event[this.fields.isAllDay], this.day);\n            appWidth = (appWidth <= 0) ? this.cellWidth : appWidth; // appWidth 0 when start and end time as same\n            this.renderedEvents.push(extend({}, event, null, true));\n            const top = this.getRowTop(resIndex);\n            const appTop = (top + (this.maxHeight ? 0 : EVENT_GAP$1)) + (overlapCount * (appHeight + EVENT_GAP$1));\n            appLeft = (this.parent.enableRtl) ? 0 : position;\n            appRight = (this.parent.enableRtl) ? position : 0;\n            const height = ((overlapCount + 1) * (appHeight + EVENT_GAP$1)) + this.moreIndicatorHeight;\n            const renderApp = this.maxOrIndicator ? overlapCount < 1 ? true : false : this.cellHeight > height;\n            if (this.parent.rowAutoHeight || renderApp) {\n                let appointmentElement;\n                if (isNullOrUndefined(this.inlineValue)) {\n                    appointmentElement = this.createAppointmentElement(event, resIndex);\n                }\n                else {\n                    appointmentElement = this.parent.inlineModule.createInlineAppointmentElement();\n                }\n                this.applyResourceColor(appointmentElement, event, 'backgroundColor', this.groupOrder);\n                setStyleAttribute(appointmentElement, {\n                    'width': appWidth + 'px', 'left': appLeft + 'px', 'right': appRight + 'px', 'top': appTop + 'px'\n                });\n                this.wireAppointmentEvents(appointmentElement, event);\n                this.renderEventElement(event, appointmentElement, cellTd);\n                if (this.parent.rowAutoHeight) {\n                    const firstChild = this.getFirstChild(resIndex);\n                    this.updateCellHeight(firstChild, height);\n                }\n                if (this.parent.activeViewOptions.option !== 'TimelineMonth' && this.parent.activeViewOptions.timeScale.enable\n                    && appWidth < this.cellWidth) {\n                    const resizeHandlers = [].slice.call(appointmentElement.querySelectorAll('.' + EVENT_RESIZE_CLASS));\n                    resizeHandlers.forEach((resizeHandler) => {\n                        resizeHandler.style.width = Math.ceil(appWidth / resizeHandler.getBoundingClientRect().width) + 'px';\n                    });\n                }\n            }\n            else {\n                for (let i = 0; i < diffInDays; i++) {\n                    const moreIndicator = cellTd.querySelector('.' + MORE_INDICATOR_CLASS);\n                    let appPos = (this.parent.enableRtl) ? appRight : appLeft;\n                    appPos = (Math.floor(appPos / this.cellWidth) * this.cellWidth);\n                    const interval = this.interval / this.slotCount;\n                    let startDate = (this.parent.activeViewOptions.option === 'TimelineMonth' || this.renderType === 'day' || i !== 0) ?\n                        new Date(this.dateRender[this.day + i].getTime()) : new Date(startTime);\n                    let endDate = addDays(this.dateRender[this.day + i], 1);\n                    if (this.parent.activeViewOptions.option === 'TimelineMonth' || this.renderType === 'day') {\n                        const position = this.getPosition(startDate, endDate, event[this.fields.isAllDay], (this.day + i));\n                        this.renderTimelineMoreIndicator(startTime, startDate, endDate, appHeight, interval, resIndex, appointmentsList, top, appLeft, appRight, cellTd, moreIndicator, appPos, position);\n                    }\n                    else {\n                        const slotCount = (getUniversalTime(endTime) - getUniversalTime(startTime)) / MS_PER_MINUTE *\n                            this.slotCount / this.interval;\n                        for (let k = 0; k < slotCount; k++) {\n                            startDate = (k === 0) ? new Date(startDate.getTime()) : new Date(startDate.getTime() + (60000 * interval));\n                            endDate = new Date(startDate.getTime() + (60000 * interval));\n                            if (endDate.getTime() > endTime.getTime()) {\n                                break;\n                            }\n                            const position = this.getPosition(startDate, endDate, false, (this.day + i));\n                            if (appPos > position) {\n                                break;\n                            }\n                            appPos = position;\n                            this.renderTimelineMoreIndicator(startTime, startDate, endDate, appHeight, interval, resIndex, appointmentsList, top, appLeft, appRight, cellTd, moreIndicator, appPos, position);\n                        }\n                    }\n                }\n            }\n        }\n        this.parent.renderTemplates();\n    }\n    renderTimelineMoreIndicator(startTime, startDate, endDate, appHeight, interval, resIndex, appointmentsList, top, appLeft, appRight, cellTd, moreIndicator, appPos, position) {\n        appLeft = (this.parent.enableRtl) ? appRight = position : position;\n        appPos = (this.parent.enableRtl) ? appRight : appLeft;\n        appPos = (Math.floor(appPos / this.cellWidth) * this.cellWidth);\n        if ((cellTd && isNullOrUndefined(moreIndicator)) ||\n            (!this.isAlreadyAvail(appPos, cellTd))) {\n            const startDateTime = (this.parent.activeViewOptions.option === 'TimelineMonth' || this.renderType === 'day') ? new Date(+startTime) : startDate;\n            const slotStartTime = (new Date(startDateTime.setMinutes(Math.floor(startDateTime.getMinutes() / interval) * interval)));\n            const slotEndTime = new Date(slotStartTime.getTime() + (60000 * interval));\n            let groupIndex;\n            if (this.parent.activeViewOptions.group.resources.length > 0 && !isNullOrUndefined(resIndex)) {\n                groupIndex = resIndex.toString();\n            }\n            const filterEvents = this.getFilterEvents(startDate, endDate, slotStartTime, slotEndTime, groupIndex, appointmentsList);\n            const appArea = this.cellHeight - this.moreIndicatorHeight;\n            appHeight = this.withIndicator ? appArea - EVENT_GAP$1 : appHeight;\n            const renderedAppCount = Math.floor(appArea / (appHeight + EVENT_GAP$1));\n            const count = (filterEvents.length - renderedAppCount) <= 0 ? 1 : (filterEvents.length - renderedAppCount);\n            let moreIndicatorElement;\n            if (this.renderType === 'day') {\n                moreIndicatorElement = this.getMoreIndicatorElement(count, startDate, endDate);\n            }\n            else {\n                moreIndicatorElement = this.getMoreIndicatorElement(count, slotStartTime, slotEndTime);\n            }\n            if (!isNullOrUndefined(groupIndex)) {\n                moreIndicatorElement.setAttribute('data-group-index', groupIndex);\n            }\n            moreIndicatorElement.style.top = top + appArea + 'px';\n            moreIndicatorElement.style.width = this.cellWidth + 'px';\n            moreIndicatorElement.style.left = (Math.floor(appLeft / this.cellWidth) * this.cellWidth) + 'px';\n            moreIndicatorElement.style.right = (Math.floor(appRight / this.cellWidth) * this.cellWidth) + 'px';\n            this.renderElement(cellTd, moreIndicatorElement);\n            EventHandler.add(moreIndicatorElement, 'click', this.moreIndicatorClick, this);\n        }\n    }\n    updateCellHeight(cell, height) {\n        if ((height > cell.getBoundingClientRect().height)) {\n            setStyleAttribute(cell, { 'height': height + 'px' });\n            if (this.parent.activeViewOptions.group.resources.length > 0) {\n                const resourceCell = this.parent.element.querySelector('.' + RESOURCE_COLUMN_TABLE_CLASS + ' ' + 'tbody td[data-group-index=\"' +\n                    cell.getAttribute('data-group-index') + '\"]');\n                if (resourceCell) {\n                    setStyleAttribute(resourceCell, { 'height': height + 'px' });\n                }\n            }\n            const monthHeader = this.parent.element.querySelector('.e-month-header-wrapper table tr:nth-child(' +\n                (cell.parentElement.rowIndex + 1) + ') td');\n            if (monthHeader) {\n                setStyleAttribute(monthHeader, { 'height': height + 'px' });\n            }\n        }\n    }\n    getFirstChild(index) {\n        const query = '.' + CONTENT_TABLE_CLASS + ' tbody td';\n        let groupIndex = '';\n        if (this.parent.activeViewOptions.group.resources.length > 0) {\n            groupIndex = '[data-group-index=\"' + index.toString() + '\"]';\n        }\n        const td = this.parent.element.querySelector(query + groupIndex);\n        return td;\n    }\n    updateBlockElements() {\n        const blockElement = [].slice.call(this.element.querySelectorAll('.' + BLOCK_APPOINTMENT_CLASS));\n        for (const element of blockElement) {\n            const resIndex = parseInt(element.getAttribute('data-group-index'), 10);\n            const firstChild = this.getFirstChild(resIndex);\n            element.style.height = firstChild.offsetHeight + 'px';\n            const width = Math.round(element.offsetWidth / firstChild.offsetWidth);\n            element.style.width = (firstChild.offsetWidth * width) + 'px';\n        }\n        const blockIndicator = [].slice.call(this.element.querySelectorAll('.' + BLOCK_INDICATOR_CLASS));\n        for (const element of blockIndicator) {\n            const resIndex = parseInt(element.getAttribute('data-group-index'), 10);\n            element.style.top = this.getRowTop(resIndex) +\n                this.getFirstChild(resIndex).offsetHeight - BLOCK_INDICATOR_HEIGHT + 'px';\n        }\n    }\n    getStartTime(event, eventData) {\n        let startTime = event[this.fields.startTime];\n        const schedule = getStartEndHours(startTime, this.startHour, this.endHour);\n        if (schedule.startHour.getTime() >= eventData[this.fields.startTime]) {\n            startTime = schedule.startHour;\n        }\n        else if (schedule.endHour.getTime() <= eventData[this.fields.startTime]) {\n            startTime = this.getNextDay(schedule.startHour, eventData);\n        }\n        else {\n            startTime = eventData[this.fields.startTime];\n        }\n        // To overcome the overflow\n        eventData.trimStartTime = (event[this.fields.isAllDay]) ? schedule.startHour : eventData[this.fields.startTime];\n        return startTime;\n    }\n    getNextDay(startTime, eventData) {\n        let startDate;\n        for (let i = 1; i <= this.dateRender.length; i++) {\n            startDate = addDays(startTime, i);\n            if (this.parent.getIndexOfDate(this.dateRender, resetTime(new Date(startTime.getTime()))) !== -1) {\n                eventData.count = eventData.count - 1;\n                return startDate;\n            }\n        }\n        return startDate;\n    }\n    getEndTime(event, eventData) {\n        let endTime = event[this.fields.endTime];\n        const schedule = getStartEndHours(endTime, this.startHour, this.endHour);\n        if (this.parent.currentView === 'TimelineMonth' || !this.parent.activeViewOptions.timeScale.enable ||\n            (this.parent.activeViewOptions.headerRows.length > 0 &&\n                this.parent.activeViewOptions.headerRows.slice(-1)[0].option !== 'Hour')) {\n            endTime = eventData[this.fields.endTime];\n        }\n        else {\n            endTime = eventData[this.fields.endTime];\n            if (schedule.endHour.getTime() <= eventData[this.fields.endTime]) {\n                endTime = schedule.endHour;\n            }\n            if (schedule.startHour.getTime() >= eventData[this.fields.endTime].getTime() && !event.isAllDay) {\n                endTime = this.getPreviousDay(schedule.startHour, schedule.endHour, eventData);\n            }\n        }\n        // To overcome the overflow\n        eventData.trimEndTime = (event[this.fields.isAllDay]) ? schedule.endHour : eventData[this.fields.endTime];\n        return endTime;\n    }\n    getPreviousDay(startTime, endTime, eventData) {\n        for (let i = 1; i <= this.dateRender.length; i++) {\n            let endDate = addDays(endTime, -i);\n            if (this.parent.getIndexOfDate(this.dateRender, resetTime(new Date(startTime.getTime()))) !== -1) {\n                endDate = resetTime(new Date(endDate.getTime()));\n                endDate.setHours(endTime.getHours(), endTime.getMinutes(), endTime.getSeconds());\n                const count = eventData.count;\n                const actualEndTime = eventData[this.fields.endTime];\n                eventData.count = actualEndTime.getHours() !== 0 || actualEndTime.getMinutes() !== 0 ? count - 1 : count;\n                return endDate;\n            }\n        }\n        return eventData[this.fields.endTime];\n    }\n    getEventWidth(startDate, endDate, isAllDay, count) {\n        if (this.renderType === 'day' || isAllDay) {\n            return (count * this.slotsPerDay) * this.cellWidth;\n        }\n        if (this.isSameDay(startDate, endDate)) {\n            return this.getSameDayEventsWidth(startDate, endDate);\n        }\n        else {\n            return this.getSpannedEventsWidth(startDate, endDate, count);\n        }\n    }\n    getSameDayEventsWidth(startDate, endDate) {\n        return ((getUniversalTime(endDate) - getUniversalTime(startDate)) /\n            MS_PER_MINUTE * (this.cellWidth * this.slotCount) / this.interval);\n    }\n    getSpannedEventsWidth(startDate, endDate, diffInDays) {\n        const width = (diffInDays * this.slotsPerDay) * this.cellWidth;\n        let endWidth;\n        const start = getStartEndHours(resetTime(new Date(startDate.getTime())), this.startHour, this.endHour);\n        const startWidth = this.getSameDayEventsWidth(start.startHour, startDate);\n        if (this.parent.getIndexOfDate(this.dateRender, resetTime(new Date(endDate.getTime()))) === -1) {\n            endWidth = 0;\n        }\n        else {\n            const end = getStartEndHours(resetTime(new Date(endDate.getTime())), this.startHour, this.endHour);\n            endWidth = this.getSameDayEventsWidth(endDate, end.endHour);\n            endWidth = ((this.slotsPerDay * this.cellWidth) === endWidth) ? 0 : endWidth;\n        }\n        const spannedWidth = startWidth + endWidth;\n        return (width > spannedWidth) ? width - spannedWidth : width - startWidth;\n    }\n    isSameDay(startTime, endTime) {\n        const startDay = this.parent.getIndexOfDate(this.dateRender, resetTime(new Date(startTime.getTime())));\n        const endDay = this.parent.getIndexOfDate(this.dateRender, resetTime(new Date(endTime.getTime())));\n        return (startDay === endDay);\n    }\n    getAppointmentLeft(schedule, startTime, day) {\n        const slotTd = (this.isSameDay(startTime, schedule.startHour)) ?\n            ((getUniversalTime(startTime) - getUniversalTime(schedule.startHour)) /\n                (MS_PER_MINUTE * this.interval)) * this.slotCount : 0;\n        if (day === 0) {\n            return slotTd;\n        }\n        else {\n            const daySlot = Math.round((((getUniversalTime(schedule.endHour) - getUniversalTime(schedule.startHour)) /\n                MS_PER_MINUTE) / this.interval) * this.slotCount);\n            return (daySlot * day) + slotTd;\n        }\n    }\n    getPosition(startTime, endTime, isAllDay, day) {\n        if (this.renderType === 'day' || isAllDay) {\n            return (day * this.slotsPerDay) * this.cellWidth;\n        }\n        const currentDate = resetTime(new Date(this.dateRender[day].getTime()));\n        const schedule = getStartEndHours(currentDate, this.startHour, this.endHour);\n        let cellIndex;\n        if (schedule.endHour.getTime() <= endTime.getTime() && schedule.startHour.getTime() >= startTime.getTime()) {\n            cellIndex = this.getAppointmentLeft(schedule, schedule.startHour, day);\n        }\n        else if (schedule.endHour.getTime() <= endTime.getTime()) {\n            cellIndex = this.getAppointmentLeft(schedule, startTime, day);\n        }\n        else if (schedule.startHour.getTime() >= startTime.getTime()) {\n            cellIndex = this.getAppointmentLeft(schedule, schedule.startHour, day);\n        }\n        else {\n            cellIndex = this.getAppointmentLeft(schedule, startTime, day);\n        }\n        return cellIndex * this.cellWidth;\n    }\n    getFilterEvents(startDate, endDate, startTime, endTime, gIndex, eventsList) {\n        if (this.renderType === 'day') {\n            return this.getFilteredEvents(startDate, endDate, gIndex, eventsList);\n        }\n        else {\n            return this.getFilteredEvents(startTime, endTime, gIndex, eventsList);\n        }\n    }\n    isAlreadyAvail(appPos, cellTd) {\n        const moreIndicator = [].slice.call(cellTd.querySelectorAll('.' + MORE_INDICATOR_CLASS));\n        for (let i = 0; i < moreIndicator.length; i++) {\n            let indicatorPos;\n            if (moreIndicator) {\n                indicatorPos = (this.parent.enableRtl) ? moreIndicator[i].style.right : moreIndicator[i].style.left;\n            }\n            if (parseInt(indicatorPos, 10) === Math.floor(appPos)) {\n                return true;\n            }\n        }\n        return false;\n    }\n    getRowTop(resIndex) {\n        if (this.parent.activeViewOptions.group.resources.length > 0 && !this.parent.uiStateValues.isGroupAdaptive) {\n            return this.parent.element.querySelector('.' + CONTENT_WRAP_CLASS +\n                ' ' + 'tbody td[data-group-index=\"' + resIndex.toString() + '\"]').offsetTop;\n        }\n        return 0;\n    }\n    getCellTd() {\n        const wrapIndex = this.parent.uiStateValues.isGroupAdaptive ? 0 : this.rowIndex;\n        return this.eventContainers[wrapIndex];\n    }\n    renderBlockIndicator(cellTd, position, resIndex) {\n        // No need to render block icon for Year, Month and Week header rows\n        if (this.parent.headerRows.length > 0 &&\n            (this.parent.headerRows[this.parent.headerRows.length - 1].option !== 'Hour' ||\n                this.parent.headerRows[this.parent.headerRows.length - 1].option !== 'Date')) {\n            return;\n        }\n        position = (Math.floor(position / this.cellWidth) * this.cellWidth) + this.cellWidth - BLOCK_INDICATOR_WIDTH;\n        if (!this.isAlreadyAvail(position, cellTd)) {\n            const blockIndicator = createElement('div', { className: 'e-icons ' + BLOCK_INDICATOR_CLASS });\n            if (this.parent.activeViewOptions.group.resources.length > 0) {\n                blockIndicator.setAttribute('data-group-index', resIndex.toString());\n            }\n            if (this.parent.enableRtl) {\n                blockIndicator.style.right = position + 'px';\n            }\n            else {\n                blockIndicator.style.left = position + 'px';\n            }\n            blockIndicator.style.top = this.getRowTop(resIndex) + this.cellHeight - BLOCK_INDICATOR_HEIGHT + 'px';\n            this.renderElement(cellTd, blockIndicator);\n        }\n    }\n    // eslint-disable-next-line @typescript-eslint/no-unused-vars\n    setMaxEventHeight(event, cell) {\n        setStyleAttribute(event, {\n            'height': (this.cellHeight - (this.maxHeight ? 0 : EVENT_GAP$1) - (this.maxHeight ? 0 : this.moreIndicatorHeight)) + 'px'\n        });\n    }\n    destroy() {\n        this.renderType = null;\n        this.eventContainers = null;\n        this.dayLength = null;\n        this.content = null;\n        super.destroy();\n        this.parent = null;\n    }\n}\n\n/* eslint-disable @typescript-eslint/no-explicit-any */\n/**\n * Inline Edit interactions\n */\nclass InlineEdit {\n    constructor(parent) {\n        this.parent = parent;\n        this.parent.on(inlineClick, this.inlineEdit, this);\n    }\n    inlineEdit(args) {\n        if (this.parent.quickPopup) {\n            this.parent.quickPopup.quickPopupHide();\n        }\n        const moreWrapper = this.parent.element.querySelector('.e-more-popup-wrapper ');\n        if (moreWrapper && moreWrapper.classList.contains(POPUP_OPEN)) {\n            this.parent.quickPopup.morePopup.hide();\n        }\n        if (args.type === 'Cell') {\n            this.removeInlineAppointmentElement();\n            this.cellEdit(args);\n        }\n        else {\n            if (this.parent.element.querySelector('.' + INLINE_SUBJECT_CLASS) !==\n                args.element.querySelector('.' + INLINE_SUBJECT_CLASS)) {\n                this.removeInlineAppointmentElement();\n            }\n            this.eventEdit(args);\n        }\n    }\n    cellEdit(args) {\n        const saveObj = this.generateEventData();\n        let cellIndex = args.element.cellIndex;\n        let count = this.getEventDaysCount(saveObj);\n        if (count > 1) {\n            count = Math.round(count);\n            count--;\n            cellIndex = cellIndex - count;\n        }\n        const start = resetTime(new Date('' + saveObj[this.parent.eventFields.startTime])).getTime();\n        const end = resetTime(new Date('' + saveObj[this.parent.eventFields.endTime])).getTime();\n        const resIndex = args.groupIndex || 0;\n        if (this.parent.currentView === 'Day' || this.parent.currentView === 'Week' || this.parent.currentView === 'WorkWeek') {\n            const dayIndex = saveObj[this.parent.eventFields.startTime].getDay();\n            this.createVerticalViewInline(saveObj, dayIndex, resIndex, cellIndex);\n        }\n        else if (this.parent.currentView === 'Month') {\n            this.createMonthViewInline(saveObj, resIndex, start, end);\n        }\n        else {\n            this.createTimelineViewInline(saveObj, start, end, resIndex);\n        }\n        const inlineSubject = this.parent.element.querySelector('.' + INLINE_SUBJECT_CLASS);\n        if (inlineSubject) {\n            inlineSubject.focus();\n        }\n    }\n    eventEdit(args) {\n        let inlineSubject = args.element.querySelector('.' + INLINE_SUBJECT_CLASS);\n        let subject;\n        if (inlineSubject) {\n            subject = inlineSubject.value;\n        }\n        else {\n            const subEle = args.element.querySelector('.' + SUBJECT_CLASS);\n            const timeEle = args.element.querySelector('.' + APPOINTMENT_TIME);\n            subject = subEle.innerText;\n            inlineSubject = createElement('input', { className: INLINE_SUBJECT_CLASS, attrs: { value: subject } });\n            addClass([subEle], DISABLE_CLASS);\n            if (closest(args.element, '.' + MORE_POPUP_WRAPPER_CLASS)) {\n                args.element.insertBefore(inlineSubject, subEle);\n            }\n            else if (['Agenda', 'MonthAgenda'].indexOf(this.parent.currentView) > -1) {\n                const subjectWrap = args.element.querySelector('.' + SUBJECT_WRAP);\n                subjectWrap.insertBefore(inlineSubject, subjectWrap.firstChild);\n            }\n            else {\n                const elementSelector = ['TimelineDay', 'TimelineWeek', 'TimelineWorkWeek', 'TimelineMonth'].indexOf(this.parent.currentView) > -1 ?\n                    '.e-inner-wrap' : '.e-appointment-details';\n                args.element.querySelector(elementSelector).insertBefore(inlineSubject, timeEle);\n            }\n        }\n        inlineSubject.focus();\n        inlineSubject.setSelectionRange(subject.length, subject.length);\n    }\n    createVerticalViewInline(saveObj, dayIndex, resIndex, daysCount) {\n        const count = this.getEventDaysCount(saveObj);\n        const verticalEvent = new VerticalEvent(this.parent);\n        verticalEvent.initializeValues();\n        const index = verticalEvent.dateRender[resIndex].map((date) => date.getDay()).indexOf(dayIndex);\n        if (count >= 1) {\n            verticalEvent.allDayElement = [].slice.call(this.parent.element.querySelectorAll('.' + ALLDAY_CELLS_CLASS));\n            verticalEvent.slots.push(...this.parent.activeView.renderDates.map((date) => +date));\n            const allDayElements = [].slice.call(this.parent.element.querySelectorAll('.' + ALLDAY_APPOINTMENT_CLASS));\n            let allDayLevel = 0;\n            if (allDayElements.length > 0) {\n                allDayLevel = Math.floor(this.parent.element.querySelector('.' + ALLDAY_ROW_CLASS).getBoundingClientRect().height /\n                    allDayElements[0].offsetHeight) - 1;\n            }\n            verticalEvent.allDayLevel = allDayLevel;\n            verticalEvent.renderAllDayEvents(saveObj, index, resIndex, daysCount, this.parent.allowInline);\n        }\n        else {\n            verticalEvent.renderNormalEvents(saveObj, index, resIndex, daysCount, this.parent.allowInline);\n        }\n    }\n    createMonthViewInline(saveObj, index, start, end) {\n        const count = this.getEventDaysCount(saveObj);\n        const saveObject = this.parent.eventBase.cloneEventObject(saveObj, start, end, count, false, false);\n        const monthEvent = new MonthEvent(this.parent);\n        monthEvent.dateRender = this.parent.activeView.renderDates;\n        monthEvent.inlineValue = this.parent.allowInline;\n        let renderDates = this.parent.activeView.renderDates;\n        let workDays = this.parent.activeViewOptions.workDays;\n        let monthCellSelector = '.' + WORK_CELLS_CLASS;\n        if (this.parent.activeViewOptions.group.resources.length > 0) {\n            monthCellSelector += '[data-group-index=\"' + index + '\"]';\n            const resourceData = this.parent.resourceBase.lastResourceLevel[index];\n            renderDates = resourceData.renderDates;\n            workDays = resourceData.workDays;\n        }\n        monthEvent.workCells = [].slice.call(this.parent.element.querySelectorAll(monthCellSelector));\n        monthEvent.cellWidth = monthEvent.workCells[0].offsetWidth;\n        monthEvent.cellHeight = monthEvent.workCells[0].offsetHeight;\n        monthEvent.eventHeight = getElementHeightFromClass(this.parent.monthModule.element, APPOINTMENT_CLASS);\n        monthEvent.getSlotDates(workDays);\n        const filteredDates = monthEvent.getRenderedDates(renderDates);\n        const spannedEvents = monthEvent.splitEvent(saveObject, filteredDates || renderDates);\n        for (const eventData of spannedEvents) {\n            monthEvent.renderEvents(eventData, index);\n        }\n        const inlineSubject = this.parent.element.querySelector('.' + INLINE_SUBJECT_CLASS);\n        inlineSubject.focus();\n    }\n    createTimelineViewInline(saveObj, start, end, resIndex) {\n        const count = this.getEventDaysCount(saveObj);\n        const saveObject = this.parent.eventBase.cloneEventObject(saveObj, start, end, count, false, false);\n        const timelineView = new TimelineEvent(this.parent, this.parent.activeViewOptions.timeScale.enable ? 'hour' : 'day');\n        timelineView.dateRender = this.parent.activeView.renderDates;\n        timelineView.eventContainers = [].slice.call(this.parent.element.querySelectorAll('.' + APPOINTMENT_CONTAINER_CLASS));\n        const workCell = this.parent.element.querySelector('.' + WORK_CELLS_CLASS);\n        timelineView.inlineValue = this.parent.allowInline;\n        timelineView.cellWidth = workCell.offsetWidth;\n        timelineView.cellHeight = workCell.offsetHeight;\n        const dayLength = this.parent.element.querySelectorAll('.' + CONTENT_TABLE_CLASS + ' tbody tr').length === 0 ?\n            0 : this.parent.element.querySelectorAll('.' + CONTENT_TABLE_CLASS + ' tbody tr')[0].children.length;\n        timelineView.slotsPerDay = dayLength / timelineView.dateRender.length;\n        timelineView.eventHeight = getElementHeightFromClass(timelineView.element, APPOINTMENT_CLASS);\n        timelineView.renderEvents(saveObject, resIndex);\n    }\n    getEventDaysCount(saveObj) {\n        const startDate = saveObj[this.parent.eventFields.startTime];\n        const endDate = saveObj[this.parent.eventFields.endTime];\n        const daysCount = Math.abs(endDate.getTime() - startDate.getTime()) / MS_PER_DAY;\n        return daysCount;\n    }\n    generateEventData(target) {\n        const inlineElement = this.parent.element.querySelector('.' + INLINE_SUBJECT_CLASS);\n        const subject = inlineElement ? inlineElement.value : target ? target.innerHTML : '';\n        const saveObj = {};\n        saveObj[this.parent.eventFields.id] = this.parent.eventBase.getEventMaxID();\n        saveObj[this.parent.eventFields.subject] = subject;\n        saveObj[this.parent.eventFields.startTime] = this.parent.activeCellsData.startTime;\n        saveObj[this.parent.eventFields.endTime] = this.parent.activeCellsData.endTime;\n        saveObj[this.parent.eventFields.isAllDay] = this.parent.activeCellsData.isAllDay;\n        this.parent.eventWindow.setDefaultValueToObject(saveObj);\n        if (this.parent.resourceBase) {\n            this.parent.resourceBase.setResourceValues(saveObj, this.parent.activeCellsData.groupIndex);\n        }\n        return saveObj;\n    }\n    documentClick() {\n        const target = this.parent.element.querySelector('.' + INLINE_SUBJECT_CLASS);\n        if (target && target.value !== '') {\n            this.inlineCrudActions(target);\n        }\n    }\n    inlineCrudActions(target) {\n        if (closest(target, '.' + INLINE_APPOINTMENT_CLASS)) {\n            const saveObj = this.generateEventData(target);\n            this.parent.addEvent(saveObj);\n        }\n        else {\n            const eventTarget = closest(target, '.' + APPOINTMENT_CLASS);\n            const eventDetails = this.parent.getEventDetails(eventTarget);\n            eventDetails[this.parent.eventFields.subject] = target.value;\n            let currentAction;\n            if (eventDetails[this.parent.eventFields.id] === eventDetails[this.parent.eventFields.recurrenceID]) {\n                currentAction = 'EditOccurrence';\n                eventDetails[this.parent.eventFields.id] = this.parent.eventBase.getEventMaxID();\n            }\n            this.parent.saveEvent(eventDetails, currentAction);\n        }\n        this.removeInlineAppointmentElement();\n    }\n    createInlineAppointmentElement(inlineData) {\n        const inlineAppointmentElement = createElement('div', {\n            className: APPOINTMENT_CLASS + ' ' + INLINE_APPOINTMENT_CLASS\n        });\n        const inlineDetails = createElement('div', { className: APPOINTMENT_DETAILS });\n        inlineAppointmentElement.appendChild(inlineDetails);\n        const inline = createElement('input', { className: INLINE_SUBJECT_CLASS });\n        inlineDetails.appendChild(inline);\n        if (inlineData) {\n            this.parent.eventBase.applyResourceColor(inlineAppointmentElement, inlineData, 'backgroundColor');\n        }\n        return inlineAppointmentElement;\n    }\n    removeInlineAppointmentElement() {\n        const inlineAppointment = [].slice.call(this.parent.element.querySelectorAll('.' + INLINE_APPOINTMENT_CLASS));\n        if (inlineAppointment.length > 0) {\n            inlineAppointment.forEach((node) => remove(node));\n        }\n        const inlineSubject = this.parent.element.querySelector('.' + INLINE_SUBJECT_CLASS);\n        if (inlineSubject) {\n            const appointmentSubject = closest(inlineSubject, '.' + APPOINTMENT_CLASS);\n            removeClass([appointmentSubject.querySelector('.' + SUBJECT_CLASS)], DISABLE_CLASS);\n            remove(inlineSubject);\n        }\n    }\n    destroy() {\n        this.parent.off(inlineClick, this.inlineEdit);\n    }\n}\n\n/* eslint-disable @typescript-eslint/no-explicit-any */\n/**\n * Appointment window field validation\n */\nclass FieldValidator {\n    renderFormValidator(form, rules, element, locale) {\n        this.element = element;\n        this.formObj = new FormValidator(form, {\n            locale: locale,\n            customPlacement: (inputElement, error) => {\n                this.errorPlacement(inputElement, error);\n            },\n            rules: rules,\n            validationComplete: (args) => {\n                this.validationComplete(args);\n            },\n            focusout: (args) => {\n                this.focusOut(args);\n            }\n        });\n    }\n    focusOut(args) {\n        const target = args.relatedTarget;\n        if (target && (target.classList.contains('e-dlg-closeicon-btn') || target.classList.contains('e-close')\n            || target.classList.contains(ALLDAY_CELLS_CLASS) || target.classList.contains(HEADER_CELLS_CLASS)\n            || target.classList.contains(QUICK_POPUP_EVENT_DETAILS_CLASS) || target.classList.contains(WORK_CELLS_CLASS)\n            || target.classList.contains(EVENT_WINDOW_CANCEL_BUTTON_CLASS))) {\n            this.ignoreError = true;\n        }\n        else {\n            this.ignoreError = false;\n        }\n    }\n    validationComplete(args) {\n        const elem = this.element.querySelector('#' + args.inputName + '_Error');\n        if (elem) {\n            elem.style.display = (args.status === 'failure') ? '' : 'none';\n        }\n    }\n    errorPlacement(inputElement, error) {\n        const id = error.getAttribute('for');\n        const elem = this.element.querySelector('#' + id + '_Error');\n        if (!elem && !this.ignoreError) {\n            this.createTooltip(inputElement, error, id, '');\n        }\n        if (!isNullOrUndefined(elem)) {\n            elem.querySelector('.e-error').innerHTML = error.innerHTML;\n        }\n    }\n    createTooltip(element, error, name, display) {\n        let dlgContent;\n        let client;\n        const inputClient = element.getBoundingClientRect();\n        if (this.element.classList.contains(POPUP_WRAPPER_CLASS)) {\n            dlgContent = this.element;\n            client = this.element.getBoundingClientRect();\n        }\n        else {\n            dlgContent = this.element.querySelector('.e-schedule-dialog .e-dlg-content');\n            client = dlgContent.getBoundingClientRect();\n        }\n        const div = createElement('div', {\n            className: 'e-tooltip-wrap e-popup ' + ERROR_VALIDATION_CLASS,\n            id: name + '_Error',\n            styles: 'display:' + display + ';top:' +\n                (inputClient.bottom - client.top + dlgContent.scrollTop + 9) + 'px;left:' +\n                (inputClient.left - client.left + dlgContent.scrollLeft + inputClient.width / 2) + 'px;'\n        });\n        const content = createElement('div', { className: 'e-tip-content' });\n        content.appendChild(error);\n        const arrow = createElement('div', { className: 'e-arrow-tip e-tip-top' });\n        arrow.appendChild(createElement('div', { className: 'e-arrow-tip-outer e-tip-top' }));\n        arrow.appendChild(createElement('div', { className: 'e-arrow-tip-inner e-tip-top' }));\n        div.appendChild(content);\n        div.appendChild(arrow);\n        dlgContent.appendChild(div);\n        div.style.left = (parseInt(div.style.left, 10) - div.offsetWidth / 2) + 'px';\n    }\n    destroyToolTip() {\n        if (this.element) {\n            const elements = [].slice.call(this.element.querySelectorAll('.' + ERROR_VALIDATION_CLASS));\n            for (const elem of elements) {\n                remove(elem);\n            }\n        }\n        if (this.formObj && this.formObj.element) {\n            this.formObj.reset();\n        }\n    }\n    destroy() {\n        if (this.formObj && this.formObj.element && !this.formObj.isDestroyed) {\n            this.formObj.destroy();\n        }\n        this.formObj = null;\n        this.element = null;\n    }\n}\n\n/* eslint-disable @typescript-eslint/no-explicit-any */\nconst EVENT_FIELD = 'e-field';\n/**\n * Quick Popups interactions\n */\nclass QuickPopups {\n    constructor(parent) {\n        this.isMultipleEventSelect = false;\n        this.isCrudAction = false;\n        this.parent = parent;\n        this.l10n = this.parent.localeObj;\n        this.fieldValidator = new FieldValidator();\n        this.render();\n        this.addEventListener();\n    }\n    render() {\n        this.renderQuickPopup();\n        this.renderMorePopup();\n        this.renderQuickDialog();\n    }\n    renderQuickPopup() {\n        const quickPopupWrapper = createElement('div', { className: POPUP_WRAPPER_CLASS + ' e-popup-close' });\n        if (this.parent.isAdaptive) {\n            document.body.appendChild(quickPopupWrapper);\n            addClass([quickPopupWrapper], DEVICE_CLASS);\n        }\n        else {\n            this.parent.element.appendChild(quickPopupWrapper);\n        }\n        this.quickPopup = new Popup(quickPopupWrapper, {\n            targetType: (this.parent.isAdaptive ? 'container' : 'relative'),\n            enableRtl: this.parent.enableRtl,\n            open: this.quickPopupOpen.bind(this),\n            close: this.quickPopupClose.bind(this),\n            hideAnimation: (this.parent.isAdaptive ? { name: 'ZoomOut' } : { name: 'FadeOut', duration: 150 }),\n            showAnimation: (this.parent.isAdaptive ? { name: 'ZoomIn' } : { name: 'FadeIn', duration: 150 }),\n            collision: (this.parent.isAdaptive ? { X: 'fit', Y: 'fit' } :\n                (this.parent.enableRtl ? { X: 'flip', Y: 'fit' } : { X: 'none', Y: 'fit' })),\n            position: (this.parent.isAdaptive || this.parent.enableRtl ? { X: 'left', Y: 'top' } : { X: 'right', Y: 'top' }),\n            viewPortElement: (this.parent.isAdaptive ? document.body : this.parent.element),\n            zIndex: (this.parent.isAdaptive ? 1004 : 3)\n        });\n    }\n    renderMorePopup() {\n        const moreEventPopup = `<div class=\"${MORE_EVENT_POPUP_CLASS}\"><div class=\"${MORE_EVENT_HEADER_CLASS}\">` +\n            `<div class=\"${MORE_EVENT_CLOSE_CLASS}\" title=\"${this.l10n.getConstant('close')}\" tabindex=\"0\"></div>` +\n            `<div class=\"${MORE_EVENT_DATE_HEADER_CLASS}\"><div class=\"${MORE_EVENT_HEADER_DAY_CLASS}\"></div>` +\n            `<div class=\"${MORE_EVENT_HEADER_DATE_CLASS} ${NAVIGATE_CLASS}\" tabindex=\"0\"></div></div></div></div>`;\n        const moreEventWrapper = createElement('div', {\n            className: MORE_POPUP_WRAPPER_CLASS + ' e-popup-close',\n            innerHTML: moreEventPopup\n        });\n        if (this.parent.isAdaptive) {\n            document.body.appendChild(moreEventWrapper);\n            addClass([moreEventWrapper], DEVICE_CLASS);\n        }\n        else {\n            this.parent.element.appendChild(moreEventWrapper);\n        }\n        this.morePopup = new Popup(moreEventWrapper, {\n            targetType: (this.parent.isAdaptive ? 'container' : 'relative'),\n            enableRtl: this.parent.enableRtl,\n            hideAnimation: { name: 'ZoomOut', duration: 300 },\n            showAnimation: { name: 'ZoomIn', duration: 300 },\n            open: this.morePopupOpen.bind(this),\n            close: this.morePopupClose.bind(this),\n            collision: (this.parent.isAdaptive ? { X: 'fit', Y: 'fit' } :\n                (this.parent.enableRtl ? { X: 'flip', Y: 'fit' } : { X: 'flip', Y: 'flip' })),\n            viewPortElement: (this.parent.isAdaptive ? document.body : this.parent.element),\n            zIndex: (this.parent.isAdaptive ? 1002 : 2)\n        });\n        const closeButton = this.morePopup.element.querySelector('.' + MORE_EVENT_CLOSE_CLASS);\n        this.renderButton('e-round', ICON + ' ' + CLOSE_ICON_CLASS, false, closeButton, this.closeClick);\n        EventHandler.add(this.morePopup.element.querySelector('.' + MORE_EVENT_HEADER_DATE_CLASS), 'click', this.navigationClick, this);\n    }\n    renderQuickDialog() {\n        const buttonModel = [\n            { buttonModel: { cssClass: 'e-quick-alertok e-flat', isPrimary: true }, click: this.dialogButtonClick.bind(this) },\n            { buttonModel: { cssClass: 'e-quick-alertcancel e-flat', isPrimary: false }, click: this.dialogButtonClick.bind(this) },\n            {\n                buttonModel: { cssClass: 'e-quick-dialog-cancel e-disable e-flat', isPrimary: false },\n                click: this.dialogButtonClick.bind(this)\n            }\n        ];\n        if (this.parent.eventSettings.editFollowingEvents) {\n            const followingSeriesButton = {\n                buttonModel: { cssClass: 'e-quick-alertfollowing e-flat', isPrimary: false }, click: this.dialogButtonClick.bind(this)\n            };\n            buttonModel.splice(1, 0, followingSeriesButton);\n        }\n        this.quickDialog = new Dialog({\n            animationSettings: { effect: 'Zoom' },\n            buttons: buttonModel,\n            cssClass: QUICK_DIALOG_CLASS,\n            closeOnEscape: true,\n            enableRtl: this.parent.enableRtl,\n            beforeClose: this.beforeQuickDialogClose.bind(this),\n            isModal: true,\n            position: { X: 'center', Y: 'center' },\n            showCloseIcon: true,\n            target: document.body,\n            visible: false,\n            width: 'auto'\n        });\n        const dialogElement = createElement('div', { id: this.parent.element.id + 'QuickDialog' });\n        this.parent.element.appendChild(dialogElement);\n        this.quickDialog.appendTo(dialogElement);\n        const okButton = this.quickDialog.element.querySelector('.' + QUICK_DIALOG_ALERT_OK);\n        if (okButton) {\n            okButton.setAttribute('aria-label', this.l10n.getConstant('occurrence'));\n            okButton.setAttribute('aria-label', okButton.innerHTML);\n        }\n        const cancelButton = this.quickDialog.element.querySelector('.' + QUICK_DIALOG_ALERT_CANCEL);\n        if (cancelButton) {\n            cancelButton.setAttribute('aria-label', this.l10n.getConstant('series'));\n            cancelButton.setAttribute('aria-label', cancelButton.innerHTML);\n        }\n        if (this.quickDialog.element.querySelector('.e-dlg-closeicon-btn')) {\n            this.quickDialog.element.querySelector('.e-dlg-closeicon-btn').setAttribute('title', this.l10n.getConstant('close'));\n        }\n    }\n    // eslint-disable-next-line max-len\n    renderButton(className, iconName, isDisabled, element, clickEvent) {\n        const buttonObj = new Button({\n            cssClass: className,\n            disabled: isDisabled,\n            enableRtl: this.parent.enableRtl,\n            iconCss: iconName\n        });\n        buttonObj.appendTo(element);\n        EventHandler.add(element, 'click', clickEvent, this);\n        removeClass([element], ICON);\n    }\n    quickDialogClass(action) {\n        const classList$$1 = [\n            QUICK_DIALOG_OCCURRENCE_CLASS, QUICK_DIALOG_SERIES_CLASS, QUICK_DIALOG_DELETE_CLASS,\n            QUICK_DIALOG_CANCEL_CLASS, QUICK_DIALOG_ALERT_BTN_CLASS, DISABLE_CLASS\n        ];\n        const okButton = this.quickDialog.element.querySelector('.' + QUICK_DIALOG_ALERT_OK);\n        const cancelButton = this.quickDialog.element.querySelector('.' + QUICK_DIALOG_ALERT_CANCEL);\n        const followingEventButton = this.quickDialog.element.querySelector('.' + QUICK_DIALOG_ALERT_FOLLOWING);\n        removeClass([okButton, cancelButton], classList$$1);\n        addClass([this.quickDialog.element.querySelector('.' + QUICK_DIALOG_CANCEL_CLASS)], DISABLE_CLASS);\n        if (this.parent.eventSettings.editFollowingEvents) {\n            addClass([followingEventButton], DISABLE_CLASS);\n            removeClass([this.quickDialog.element], FOLLOWING_EVENTS_DIALOG);\n        }\n        switch (action) {\n            case 'Recurrence':\n                addClass([okButton], QUICK_DIALOG_OCCURRENCE_CLASS);\n                addClass([cancelButton], QUICK_DIALOG_SERIES_CLASS);\n                if (this.parent.eventSettings.editFollowingEvents) {\n                    removeClass([followingEventButton], DISABLE_CLASS);\n                    addClass([this.quickDialog.element], FOLLOWING_EVENTS_DIALOG);\n                    addClass([followingEventButton], QUICK_DIALOG_FOLLOWING_EVENTS_CLASS);\n                }\n                break;\n            case 'Delete':\n                addClass([okButton], QUICK_DIALOG_DELETE_CLASS);\n                addClass([cancelButton], QUICK_DIALOG_CANCEL_CLASS);\n                break;\n            case 'Alert':\n                addClass([okButton], [QUICK_DIALOG_ALERT_OK, QUICK_DIALOG_ALERT_BTN_CLASS]);\n                addClass([cancelButton], [QUICK_DIALOG_ALERT_CANCEL, DISABLE_CLASS]);\n                break;\n        }\n    }\n    applyFormValidation() {\n        const form = this.quickPopup.element.querySelector('.' + FORM_CLASS);\n        const rules = {};\n        rules[this.parent.eventSettings.fields.subject.name] = this.parent.eventSettings.fields.subject.validation;\n        this.fieldValidator.renderFormValidator(form, rules, this.quickPopup.element, this.parent.locale);\n    }\n    openRecurrenceAlert() {\n        const editDeleteOnly = this.quickDialog.element.querySelector('.' + QUICK_DIALOG_ALERT_OK);\n        if (editDeleteOnly) {\n            editDeleteOnly.innerHTML = this.l10n.getConstant(this.parent.currentAction === 'Delete' ? 'deleteEvent' : 'editEvent');\n            editDeleteOnly.setAttribute('aria-label', editDeleteOnly.innerHTML);\n        }\n        const editFollowingEventsOnly = this.quickDialog.element.querySelector('.' + QUICK_DIALOG_ALERT_FOLLOWING);\n        if (editFollowingEventsOnly) {\n            editFollowingEventsOnly.innerHTML = this.l10n.getConstant('editFollowingEvent');\n            editFollowingEventsOnly.setAttribute('aria-label', editFollowingEventsOnly.innerHTML);\n        }\n        const editDeleteSeries = this.quickDialog.element.querySelector('.' + QUICK_DIALOG_ALERT_CANCEL);\n        if (editDeleteSeries) {\n            editDeleteSeries.innerHTML = this.l10n.getConstant(this.parent.currentAction === 'Delete' ? 'deleteSeries' : 'editSeries');\n            editDeleteSeries.setAttribute('aria-label', editDeleteSeries.innerHTML);\n        }\n        this.quickDialog.content = this.l10n.getConstant('editContent');\n        this.quickDialog.header = this.l10n.getConstant(this.parent.currentAction === 'Delete' ? 'deleteTitle' : 'editTitle');\n        this.quickDialogClass('Recurrence');\n        const activeEvent = this.parent.activeEventData.event;\n        if (this.parent.eventSettings.editFollowingEvents && this.parent.currentAction === 'EditOccurrence'\n            && !isNullOrUndefined(activeEvent[this.parent.eventFields.recurrenceID]) && activeEvent[this.parent.eventFields.recurrenceID]\n            !== activeEvent[this.parent.eventFields.id]) {\n            const followingEventButton = this.quickDialog.element.querySelector('.' + QUICK_DIALOG_ALERT_FOLLOWING);\n            addClass([followingEventButton], DISABLE_CLASS);\n        }\n        this.showQuickDialog('RecurrenceAlert');\n    }\n    openRecurrenceValidationAlert(type) {\n        this.quickDialogClass('Alert');\n        const okButton = this.quickDialog.element.querySelector('.' + QUICK_DIALOG_ALERT_OK);\n        okButton.innerHTML = this.l10n.getConstant('ok');\n        okButton.setAttribute('aria-label', okButton.innerHTML);\n        const cancelButton = this.quickDialog.element.querySelector('.' + QUICK_DIALOG_ALERT_CANCEL);\n        cancelButton.innerHTML = this.l10n.getConstant('cancel');\n        cancelButton.setAttribute('aria-label', cancelButton.innerHTML);\n        this.quickDialog.header = this.l10n.getConstant('alert');\n        let dialogCancel;\n        switch (type) {\n            case 'wrongPattern':\n                addClass([cancelButton], DISABLE_CLASS);\n                this.quickDialog.content = this.l10n.getConstant('wrongPattern');\n                break;\n            case 'createError':\n                addClass([cancelButton], DISABLE_CLASS);\n                this.quickDialog.content = this.l10n.getConstant('createError');\n                break;\n            case 'sameDayAlert':\n                addClass([cancelButton], DISABLE_CLASS);\n                this.quickDialog.content = this.l10n.getConstant('sameDayAlert');\n                break;\n            case 'seriesChangeAlert':\n                dialogCancel = this.quickDialog.element.querySelector('.' + QUICK_DIALOG_CANCEL_CLASS);\n                removeClass([cancelButton, dialogCancel], DISABLE_CLASS);\n                this.quickDialog.content = this.l10n.getConstant('seriesChangeAlert');\n                okButton.innerHTML = this.l10n.getConstant('yes');\n                cancelButton.innerHTML = this.l10n.getConstant('no');\n                dialogCancel.innerHTML = this.l10n.getConstant('cancel');\n                break;\n            case 'occurrenceAlert':\n                addClass([cancelButton], DISABLE_CLASS);\n                this.quickDialog.content = this.l10n.getConstant('occurenceAlert');\n                break;\n        }\n        if ((!this.parent.enableRecurrenceValidation && type === 'wrongPattern') || this.parent.enableRecurrenceValidation) {\n            this.showQuickDialog('RecurrenceValidationAlert');\n        }\n    }\n    openDeleteAlert() {\n        if (this.parent.activeViewOptions.readonly) {\n            return;\n        }\n        const okButton = this.quickDialog.element.querySelector('.' + QUICK_DIALOG_ALERT_OK);\n        if (okButton) {\n            okButton.innerHTML = this.l10n.getConstant('delete');\n            okButton.setAttribute('aria-label', okButton.innerHTML);\n        }\n        const cancelButton = this.quickDialog.element.querySelector('.' + QUICK_DIALOG_ALERT_CANCEL);\n        if (cancelButton) {\n            cancelButton.innerHTML = this.l10n.getConstant('cancel');\n            cancelButton.setAttribute('aria-label', cancelButton.innerHTML);\n        }\n        this.quickDialog.content = (this.parent.activeEventData.event.length > 1) ?\n            this.l10n.getConstant('deleteMultipleContent') : this.l10n.getConstant('deleteContent');\n        this.quickDialog.header = (this.parent.activeEventData.event.length > 1) ?\n            this.l10n.getConstant('deleteMultipleEvent') : this.l10n.getConstant('deleteEvent');\n        this.quickDialogClass('Delete');\n        this.showQuickDialog('DeleteAlert');\n    }\n    openValidationError(type, eventData) {\n        this.quickDialog.header = this.l10n.getConstant('alert');\n        this.quickDialog.content = this.l10n.getConstant(type);\n        const okButton = this.quickDialog.element.querySelector('.' + QUICK_DIALOG_ALERT_OK);\n        if (okButton) {\n            okButton.innerHTML = this.l10n.getConstant('ok');\n            okButton.setAttribute('aria-label', okButton.innerHTML);\n        }\n        const cancelButton = this.quickDialog.element.querySelector('.' + QUICK_DIALOG_ALERT_CANCEL);\n        if (cancelButton) {\n            cancelButton.innerHTML = this.l10n.getConstant('cancel');\n            okButton.setAttribute('aria-label', cancelButton.innerHTML);\n        }\n        this.quickDialogClass('Alert');\n        this.showQuickDialog('ValidationAlert', eventData);\n    }\n    showQuickDialog(popupType, eventData) {\n        this.quickDialog.dataBind();\n        const eventProp = {\n            type: popupType, cancel: false, element: this.quickDialog.element,\n            data: extend({}, (eventData || this.parent.activeEventData.event), null, true)\n        };\n        this.parent.trigger(popupOpen, eventProp, (popupArgs) => {\n            if (!popupArgs.cancel) {\n                this.quickDialog.show();\n            }\n        });\n    }\n    createMoreEventList(eventCollection, groupOrder, groupIndex) {\n        const fields = this.parent.eventFields;\n        const moreEventContentEle = createElement('div', { className: MORE_EVENT_CONTENT_CLASS });\n        let moreEventWrapperEle = createElement('div', { className: MORE_EVENT_WRAPPER_CLASS });\n        if (eventCollection.length === 0) {\n            moreEventWrapperEle = createElement('div', {\n                className: MORE_EVENT_CONTENT_CLASS,\n                innerHTML: this.l10n.getConstant('emptyContainer')\n            });\n        }\n        else {\n            for (const eventData of eventCollection) {\n                const eventText = (eventData[fields.subject] || this.parent.eventSettings.fields.subject.default\n                    || this.parent.localeObj.getConstant('addTitle'));\n                const appointmentElement = createElement('div', {\n                    className: APPOINTMENT_CLASS,\n                    attrs: {\n                        'data-id': '' + eventData[fields.id],\n                        'data-guid': eventData.Guid, 'role': 'button', 'tabindex': '0',\n                        'aria-readonly': this.parent.eventBase.getReadonlyAttribute(eventData),\n                        'aria-selected': 'false', 'aria-grabbed': 'true', 'aria-label': this.parent.getAnnouncementString(eventData)\n                    }\n                });\n                let templateElement;\n                if (!isNullOrUndefined(this.parent.activeViewOptions.eventTemplate)) {\n                    const tempId = this.parent.element.id + '_' + this.parent.activeViewOptions.eventTemplateName + 'eventTemplate';\n                    templateElement = this.parent.getAppointmentTemplate()(eventData, this.parent, 'eventTemplate', tempId, false);\n                    append(templateElement, appointmentElement);\n                }\n                else {\n                    appointmentElement.appendChild(createElement('div', { className: SUBJECT_CLASS, innerHTML: eventText }));\n                }\n                if (!isNullOrUndefined(groupIndex)) {\n                    appointmentElement.setAttribute('data-group-index', groupIndex);\n                }\n                if (!isNullOrUndefined(eventData[fields.recurrenceRule])) {\n                    const iconClass = (eventData[fields.id] === eventData[fields.recurrenceID]) ?\n                        EVENT_RECURRENCE_ICON_CLASS : EVENT_RECURRENCE_EDIT_ICON_CLASS;\n                    appointmentElement.appendChild(createElement('div', { className: ICON + ' ' + iconClass }));\n                }\n                const args = {\n                    data: extend({}, eventData, null, true),\n                    element: appointmentElement, cancel: false\n                };\n                this.parent.trigger(eventRendered, args, (eventArgs) => {\n                    if (!eventArgs.cancel) {\n                        moreEventWrapperEle.appendChild(appointmentElement);\n                        const isPreventCrud = this.parent.isAdaptive || this.parent.currentView === 'Year';\n                        this.parent.eventBase.wireAppointmentEvents(appointmentElement, eventData, isPreventCrud);\n                        this.parent.eventBase.applyResourceColor(appointmentElement, eventData, 'backgroundColor', groupOrder);\n                    }\n                });\n            }\n        }\n        moreEventContentEle.appendChild(moreEventWrapperEle);\n        return moreEventContentEle;\n    }\n    tapHoldEventPopup(e) {\n        const target = closest(e.target, '.' + APPOINTMENT_CLASS);\n        this.isMultipleEventSelect = false;\n        this.parent.selectedElements = [];\n        this.isMultipleEventSelect = true;\n        this.parent.eventBase.getSelectedEventElements(target);\n        this.parent.activeEventData = this.parent.eventBase.getSelectedEvents();\n        const guid = target.getAttribute('data-guid');\n        const eventObj = this.parent.eventBase.getEventByGuid(guid);\n        if (isNullOrUndefined(eventObj)) {\n            return;\n        }\n        const eventTitle = (eventObj[this.parent.eventFields.subject] || this.l10n.getConstant('noTitle'));\n        const eventTemplate = `<div class=\"${MULTIPLE_EVENT_POPUP_CLASS}\"><div class=\"${POPUP_HEADER_CLASS}\">` +\n            `<button class=\"${CLOSE_CLASS}\" title=\"${this.l10n.getConstant('close')}\"></button>` +\n            `<div class=\"${SUBJECT_CLASS}\">${eventTitle}</div>` +\n            `<button class=\"${EDIT_CLASS}\" title=\"${this.l10n.getConstant('edit')}\"></button>` +\n            `<button class=\"${DELETE_CLASS}\" title=\"${this.l10n.getConstant('delete')}\"></button></div></div>`;\n        this.quickPopup.element.innerHTML = eventTemplate;\n        const closeIcon = this.quickPopup.element.querySelector('.' + CLOSE_CLASS);\n        this.renderButton('e-flat e-round e-small', ICON + ' ' + CLOSE_ICON_CLASS, false, closeIcon, this.closeClick);\n        const readonly = this.parent.activeViewOptions.readonly || eventObj[this.parent.eventFields.isReadonly];\n        const editAction = !this.parent.eventSettings.allowEditing || readonly;\n        const deleteAction = !this.parent.eventSettings.allowDeleting || readonly;\n        const editIcon = this.quickPopup.element.querySelector('.' + EDIT_CLASS);\n        if (editIcon) {\n            this.renderButton('e-flat e-round e-small', ICON + ' ' + EDIT_ICON_CLASS, editAction, editIcon, this.editClick);\n        }\n        const deleteIcon = this.quickPopup.element.querySelector('.' + DELETE_CLASS);\n        if (deleteIcon) {\n            this.renderButton('e-flat e-round e-small', ICON + ' ' + DELETE_ICON_CLASS, deleteAction, deleteIcon, this.deleteClick);\n        }\n        this.beforeQuickPopupOpen(target);\n    }\n    isCellBlocked(args) {\n        const tempObj = {};\n        tempObj[this.parent.eventFields.startTime] = this.parent.activeCellsData.startTime;\n        tempObj[this.parent.eventFields.endTime] = this.parent.activeCellsData.endTime;\n        tempObj[this.parent.eventFields.isAllDay] = this.parent.activeCellsData.isAllDay;\n        if (this.parent.activeViewOptions.group.resources.length > 0) {\n            const targetCell = args.element instanceof Array ? args.element[0] : args.element;\n            const groupIndex = parseInt(targetCell.getAttribute('data-group-index'), 10);\n            this.parent.resourceBase.setResourceValues(tempObj, isNaN(groupIndex) ? null : groupIndex);\n        }\n        return this.parent.eventBase.isBlockRange(tempObj);\n    }\n    cellClick(args) {\n        const date = new Date(args.startTime.getTime());\n        if (!this.parent.showQuickInfo || !this.parent.eventSettings.allowAdding ||\n            this.parent.currentView === 'MonthAgenda' || this.isCellBlocked(args) ||\n            !this.parent.isMinMaxDate(new Date(date.setHours(0, 0, 0, 0)))) {\n            this.quickPopupHide();\n            return;\n        }\n        const targetEle = args.event.target;\n        if (this.parent.isAdaptive) {\n            this.quickPopupHide();\n            let newEventClone = this.parent.element.querySelector('.' + NEW_EVENT_CLASS);\n            if (isNullOrUndefined(newEventClone)) {\n                newEventClone = createElement('div', {\n                    className: NEW_EVENT_CLASS,\n                    innerHTML: `<div class=\"e-title\">+ ${this.l10n.getConstant('newEvent')}</div>`\n                });\n            }\n            const targetCell = closest(targetEle, '.' + WORK_CELLS_CLASS + ',.' + ALLDAY_CELLS_CLASS);\n            if (targetCell) {\n                targetCell.appendChild(newEventClone);\n            }\n            return;\n        }\n        const target = closest(targetEle, '.' + WORK_CELLS_CLASS + ',.' + ALLDAY_CELLS_CLASS + ',.' +\n            HEADER_CELLS_CLASS);\n        if (isNullOrUndefined(target) || targetEle.classList.contains(MORE_INDICATOR_CLASS)) {\n            return;\n        }\n        const isSameTarget = this.quickPopup.relateTo === target;\n        if (isSameTarget && this.quickPopup.element.classList.contains(POPUP_OPEN)) {\n            const subjectElement = this.quickPopup.element.querySelector('.' + SUBJECT_CLASS);\n            if (subjectElement) {\n                subjectElement.focus();\n            }\n            return;\n        }\n        const temp = {};\n        temp[this.parent.eventFields.startTime] = this.parent.activeCellsData.startTime;\n        temp[this.parent.eventFields.endTime] = this.parent.activeCellsData.endTime;\n        temp[this.parent.eventFields.isAllDay] = this.parent.activeCellsData.isAllDay;\n        const quickCellPopup = createElement('div', { className: CELL_POPUP_CLASS });\n        quickCellPopup.appendChild(this.getPopupHeader('Cell', temp));\n        quickCellPopup.appendChild(this.getPopupContent('Cell', args, temp));\n        quickCellPopup.appendChild(this.getPopupFooter('Cell', temp));\n        const subjectElement = quickCellPopup.querySelector('.' + SUBJECT_CLASS);\n        if (subjectElement) {\n            Input.createInput({ element: subjectElement, properties: { placeholder: this.l10n.getConstant('addTitle') } });\n        }\n        if (!isNullOrUndefined(this.parent.eventSettings.fields.subject.default)) {\n            subjectElement.value = this.parent.eventSettings.fields.subject.default;\n        }\n        const closeIcon = quickCellPopup.querySelector('.' + CLOSE_CLASS);\n        if (closeIcon) {\n            this.renderButton('e-flat e-round e-small', ICON + ' ' + CLOSE_ICON_CLASS, false, closeIcon, this.popupClose);\n        }\n        const moreButton = quickCellPopup.querySelector('.' + QUICK_POPUP_EVENT_DETAILS_CLASS);\n        if (moreButton) {\n            this.renderButton('e-flat', '', false, moreButton, this.detailsClick);\n        }\n        const saveButton = quickCellPopup.querySelector('.' + EVENT_CREATE_CLASS);\n        if (saveButton) {\n            this.renderButton('e-flat e-primary', '', this.parent.activeViewOptions.readonly, saveButton, this.saveClick);\n        }\n        this.quickPopup.content = quickCellPopup;\n        this.quickPopup.dataBind();\n        this.applyFormValidation();\n        if (this.morePopup) {\n            this.morePopup.hide();\n        }\n        this.quickPopup.relateTo = target;\n        this.beforeQuickPopupOpen(target);\n    }\n    isSameEventClick(events) {\n        const isSameTarget = this.quickPopup.relateTo === closest(events.element, '.' + APPOINTMENT_CLASS);\n        if (isSameTarget && this.quickPopup.element.classList.contains(POPUP_OPEN)) {\n            const editIcon = this.quickPopup.element.querySelector('.' + EDIT_CLASS);\n            if (editIcon) {\n                editIcon.focus();\n            }\n            if (!this.parent.isAdaptive) {\n                const editButton = this.quickPopup.element.querySelector('.' + EDIT_EVENT_CLASS);\n                if (editButton) {\n                    editButton.focus();\n                }\n            }\n            return true;\n        }\n        return false;\n    }\n    isQuickTemplate(type) {\n        return this.parent.quickInfoTemplates.templateType === 'Both' || this.parent.quickInfoTemplates.templateType === type;\n    }\n    eventClick(events) {\n        if (this.parent.eventTooltip) {\n            this.parent.eventTooltip.close();\n        }\n        if (!this.parent.showQuickInfo) {\n            return;\n        }\n        if (this.parent.isAdaptive && this.isMultipleEventSelect) {\n            this.updateTapHoldEventPopup(closest(events.element, '.' + APPOINTMENT_CLASS));\n        }\n        else {\n            const isSameTarget = this.isSameEventClick(events);\n            if (isSameTarget) {\n                return;\n            }\n            const eventData = events.event;\n            const quickEventPopup = createElement('div', { className: EVENT_POPUP_CLASS });\n            quickEventPopup.appendChild(this.getPopupHeader('Event', eventData));\n            quickEventPopup.appendChild(this.getPopupContent('Event', events, eventData));\n            quickEventPopup.appendChild(this.getPopupFooter('Event', eventData));\n            const readonly = this.parent.activeViewOptions.readonly || eventData[this.parent.eventFields.isReadonly];\n            const editAction = !this.parent.eventSettings.allowEditing || readonly;\n            const deleteAction = !this.parent.eventSettings.allowDeleting || readonly;\n            const editIcon = quickEventPopup.querySelector('.' + EDIT_CLASS);\n            const buttonClass = 'e-flat e-round e-small';\n            if (editIcon) {\n                this.renderButton(buttonClass, ICON + ' ' + EDIT_ICON_CLASS, editAction, editIcon, this.editClick);\n            }\n            const deleteIcon = quickEventPopup.querySelector('.' + DELETE_CLASS);\n            if (deleteIcon) {\n                this.renderButton(buttonClass, ICON + ' ' + DELETE_ICON_CLASS, deleteAction, deleteIcon, this.deleteClick);\n            }\n            const closeIcon = quickEventPopup.querySelector('.' + CLOSE_CLASS);\n            if (closeIcon) {\n                this.renderButton(buttonClass, ICON + ' ' + CLOSE_ICON_CLASS, false, closeIcon, this.popupClose);\n            }\n            const editButton = quickEventPopup.querySelector('.' + EDIT_EVENT_CLASS);\n            if (editButton) {\n                this.renderButton('e-flat e-primary', '', editAction, editButton, this.editClick);\n            }\n            const deleteButton = quickEventPopup.querySelector('.' + DELETE_EVENT_CLASS);\n            if (deleteButton) {\n                this.renderButton('e-flat', '', deleteAction, deleteButton, this.deleteClick);\n            }\n            this.quickPopup.content = quickEventPopup;\n            this.quickPopup.dataBind();\n            if (this.morePopup && !closest(events.element, '.' + MORE_EVENT_WRAPPER_CLASS)) {\n                this.morePopup.hide();\n            }\n            this.quickPopup.relateTo = this.parent.isAdaptive ? document.body :\n                closest(events.element, '.' + APPOINTMENT_CLASS);\n            this.beforeQuickPopupOpen(events.element);\n        }\n    }\n    getPopupHeader(headerType, headerData) {\n        const headerTemplate = createElement('div', { className: POPUP_HEADER_CLASS });\n        if (this.isQuickTemplate(headerType) && this.parent.quickInfoTemplates.header) {\n            const headerArgs = extend({}, headerData, { elementType: headerType.toLowerCase() }, true);\n            const templateId = this.parent.element.id;\n            const headerTemp = [].slice.call(this.parent.getQuickInfoTemplatesHeader()(headerArgs, this.parent, 'header', templateId + '_headerTemplate', false));\n            append([].slice.call(headerTemp), headerTemplate);\n        }\n        else {\n            let header;\n            let args;\n            switch (headerType) {\n                case 'Cell':\n                    header = `<div class=\"${POPUP_HEADER_ICON_WRAPPER}\"><button class=\"${CLOSE_CLASS}\" title=` +\n                        `\"${this.l10n.getConstant('close')}\"></button></div>`;\n                    break;\n                case 'Event':\n                    args = this.getFormattedString(headerData);\n                    header = `<div class=\"${POPUP_HEADER_ICON_WRAPPER}\">` +\n                        `<button class=\"${EDIT_CLASS + ' ' + ICON}\" title=\"${this.l10n.getConstant('edit')}\"></button>` +\n                        `<button class=\"${DELETE_CLASS + ' ' + ICON}\" title=\"${this.l10n.getConstant('delete')}\"></button>` +\n                        `<button class=\"${CLOSE_CLASS}\" title=\"${this.l10n.getConstant('close')}\"></button></div>` +\n                        `<div class=\"${SUBJECT_WRAP}\"><div class=\"${SUBJECT_CLASS} ${TEXT_ELLIPSIS}\" ` +\n                        `title=\"${args.eventSubject}\">${args.eventSubject}</div></div >`;\n                    break;\n            }\n            const templateWrapper = createElement('div', { innerHTML: header });\n            append([].slice.call(templateWrapper.childNodes), headerTemplate);\n        }\n        return headerTemplate;\n    }\n    getPopupContent(type, args, data) {\n        const contentTemplate = createElement('div', { className: POPUP_CONTENT_CLASS });\n        if (this.isQuickTemplate(type) && this.parent.quickInfoTemplates.content) {\n            const contentArgs = extend({}, data, { elementType: type.toLowerCase() }, true);\n            const templateId = this.parent.element.id;\n            const contentTemp = [].slice.call(this.parent.getQuickInfoTemplatesContent()(contentArgs, this.parent, 'content', templateId + '_contentTemplate', false));\n            append([].slice.call(contentTemp), contentTemplate);\n        }\n        else {\n            let content;\n            let cellDetails;\n            let argsData;\n            const resourceText = this.getResourceText(args, type.toLowerCase());\n            switch (type) {\n                case 'Cell':\n                    cellDetails = this.getFormattedString(data);\n                    content = `<table class=\"${POPUP_TABLE_CLASS}\"><tbody><tr><td><form class=\"${FORM_CLASS}\" onsubmit=` +\n                        `\"return false;\"><input class=\"${SUBJECT_CLASS} ${EVENT_FIELD}\" type=\"text\" name=` +\n                        `\"${this.parent.eventFields.subject}\" /></form></td></tr><tr><td><div class=\"${DATE_TIME_CLASS}\">` +\n                        `<div class=\"${DATE_TIME_ICON_CLASS} ${ICON}\"></div><div class=\"${DATE_TIME_DETAILS_CLASS} ` +\n                        `${TEXT_ELLIPSIS}\">${cellDetails.details}</div></div>` +\n                        `${this.parent.activeViewOptions.group.resources.length > 0 ? `<div class=\"${RESOURCE_CLASS}\">` +\n                            `<div class=\"${RESOURCE_ICON_CLASS} ${ICON} \"></div><div class=\"${RESOURCE_DETAILS_CLASS} ` +\n                            `${TEXT_ELLIPSIS}\">${resourceText}</div></div>` : ''}</td></tr></tbody></table>`;\n                    break;\n                case 'Event':\n                    argsData = this.getFormattedString(data);\n                    content = '<div class=\"' + DATE_TIME_CLASS + '\"><div class=\"' + DATE_TIME_ICON_CLASS + ' ' + ICON +\n                        '\"></div><div class=\"' + DATE_TIME_WRAPPER_CLASS + ' ' + TEXT_ELLIPSIS + '\"><div class=\"' +\n                        DATE_TIME_DETAILS_CLASS + ' ' + TEXT_ELLIPSIS + '\">' + argsData.details + '</div>';\n                    if (data[this.parent.eventFields.recurrenceRule]) {\n                        content += '<div class=\"' + RECURRENCE_SUMMARY_CLASS + ' ' + TEXT_ELLIPSIS + '\">' +\n                            this.getRecurrenceSummary(data) + '</div>';\n                    }\n                    content += '</div></div>';\n                    if (data[this.parent.eventFields.location]) {\n                        content += '<div class=\"' + LOCATION_CLASS + '\"><div class=\"' + LOCATION_ICON_CLASS + ' ' +\n                            ICON + '\"></div><div class=\"' + LOCATION_DETAILS_CLASS + ' ' + TEXT_ELLIPSIS + '\">' +\n                            data[this.parent.eventFields.location] + '</div></div>';\n                    }\n                    if (data[this.parent.eventFields.startTimezone] || data[this.parent.eventFields.endTimezone]) {\n                        content += '<div class=\"' + TIME_ZONE_CLASS + '\"><div class=\"' + TIME_ZONE_ICON_CLASS + ' ' + ICON +\n                            '\"></div><div class=\"' + TIME_ZONE_DETAILS_CLASS + ' ' + TEXT_ELLIPSIS + '\">' +\n                            this.getTimezone(data) + '</div></div>';\n                    }\n                    if (data[this.parent.eventFields.description]) {\n                        content += '<div class=\"' + DESCRIPTION_CLASS + '\"><div class=\"' + DESCRIPTION_ICON_CLASS + ' ' + ICON +\n                            '\"></div><div class=\"' + DESCRIPTION_DETAILS_CLASS + ' ' + TEXT_ELLIPSIS + '\">' +\n                            data[this.parent.eventFields.description] + '</div></div>';\n                    }\n                    if (this.parent.resourceCollection.length > 0) {\n                        content += '<div class=\"' + RESOURCE_CLASS + '\"><div class=\"' + RESOURCE_ICON_CLASS + ' ' + ICON +\n                            '\"></div><div class=\"' + RESOURCE_DETAILS_CLASS + ' ' + TEXT_ELLIPSIS + '\">' +\n                            resourceText + '</div></div>';\n                    }\n                    break;\n            }\n            const templateWrapper = createElement('div', { innerHTML: content });\n            append([].slice.call(templateWrapper.childNodes), contentTemplate);\n        }\n        return contentTemplate;\n    }\n    getPopupFooter(footerType, footerData) {\n        const footerTemplate = createElement('div', { className: POPUP_FOOTER_CLASS });\n        if (this.isQuickTemplate(footerType) && this.parent.quickInfoTemplates.footer) {\n            const footerArgs = extend({}, footerData, { elementType: footerType.toLowerCase() }, true);\n            const templateId = this.parent.element.id;\n            const footerTemp = [].slice.call(this.parent.getQuickInfoTemplatesFooter()(footerArgs, this.parent, 'footer', templateId + '_footerTemplate', false));\n            append([].slice.call(footerTemp), footerTemplate);\n        }\n        else {\n            let footer;\n            switch (footerType) {\n                case 'Cell':\n                    footer = `<button class=\"${QUICK_POPUP_EVENT_DETAILS_CLASS + ' ' + TEXT_ELLIPSIS}\" title=` +\n                        `\"${this.l10n.getConstant('moreDetails')}\">${this.l10n.getConstant('moreDetails')}</button>` +\n                        `<button class=\"${EVENT_CREATE_CLASS} ${TEXT_ELLIPSIS}\" title=\"${this.l10n.getConstant('save')}\">` +\n                        `${this.l10n.getConstant('save')}</button>`;\n                    break;\n                case 'Event':\n                    footer = `${this.parent.isAdaptive ? '' : `<button class=\"${EDIT_EVENT_CLASS} ` +\n                        `${TEXT_ELLIPSIS}\" title=\"${this.l10n.getConstant('edit')}\">${this.l10n.getConstant('edit')}</button>` +\n                        `<button class=\"${DELETE_EVENT_CLASS} ${TEXT_ELLIPSIS}\" title=\"${this.l10n.getConstant('delete')}\">` +\n                        `${this.l10n.getConstant('delete')}</button>`}`;\n                    break;\n            }\n            const templateWrapper = createElement('div', { innerHTML: footer });\n            append([].slice.call(templateWrapper.childNodes), footerTemplate);\n        }\n        return footerTemplate;\n    }\n    getResourceText(args, type) {\n        if (this.parent.resourceCollection.length === 0) {\n            return null;\n        }\n        let resourceValue = '';\n        if (this.parent.activeViewOptions.group.resources.length === 0) {\n            const resourceCollection = this.parent.resourceBase.resourceCollection.slice(-1)[0];\n            const resourceData = resourceCollection.dataSource;\n            if (type === 'event') {\n                const eventData = args.event;\n                for (const data of resourceData) {\n                    const resourceId = eventData[resourceCollection.field];\n                    if (resourceId instanceof Array) {\n                        if (resourceId.indexOf(data[resourceCollection.idField]) > -1) {\n                            const id = resourceId[resourceId.indexOf(data[resourceCollection.idField])];\n                            const resource = resourceData.filter((e) => e[resourceCollection.idField] === id)[0];\n                            resourceValue += (resourceValue === '') ? resource[resourceCollection.textField] :\n                                ', ' + resource[resourceCollection.textField];\n                        }\n                    }\n                    else if (data[resourceCollection.idField] === resourceId) {\n                        resourceValue = data[resourceCollection.textField].toString();\n                    }\n                }\n            }\n            else {\n                resourceValue = resourceData[0][resourceCollection.textField].toString();\n            }\n        }\n        else {\n            if (type === 'event') {\n                const eventData = args.event;\n                let resourceData;\n                let lastResource;\n                for (let i = this.parent.resourceBase.resourceCollection.length - 1; i >= 0; i--) {\n                    resourceData = eventData[this.parent.resourceBase.resourceCollection[i].field];\n                    if (!isNullOrUndefined(resourceData)) {\n                        lastResource = this.parent.resourceBase.resourceCollection[i];\n                        break;\n                    }\n                }\n                if (!Array.isArray(resourceData)) {\n                    resourceData = [resourceData];\n                }\n                const resNames = [];\n                const lastResourceData = lastResource.dataSource;\n                resourceData.forEach((value) => {\n                    let text;\n                    const i = findIndexInData(lastResourceData, lastResource.idField, value);\n                    if (i > -1) {\n                        text = lastResourceData[i][lastResource.textField];\n                    }\n                    if (text) {\n                        resNames.push(text);\n                    }\n                });\n                resourceValue = resNames.join(', ');\n            }\n            else {\n                const argsData = args;\n                const groupIndex = !isNullOrUndefined(argsData.groupIndex) ? argsData.groupIndex : 0;\n                const resourceDetails = this.parent.resourceBase.lastResourceLevel[groupIndex];\n                resourceValue = resourceDetails.resourceData[resourceDetails.resource.textField];\n            }\n        }\n        return resourceValue;\n    }\n    getFormattedString(eventData) {\n        const fields = this.parent.eventFields;\n        const eventSubject = (eventData[fields.subject] || this.l10n.getConstant('noTitle'));\n        const startDate = eventData[fields.startTime];\n        const endDate = eventData[fields.endTime];\n        const startDateDetails = this.getDateFormat(startDate, 'long');\n        const endDateDetails = (eventData[fields.isAllDay] && endDate.getHours() === 0 && endDate.getMinutes() === 0) ?\n            this.getDateFormat(addDays(new Date(endDate.getTime()), -1), 'long') :\n            this.getDateFormat(endDate, 'long');\n        const startTimeDetail = this.parent.getTimeString(startDate);\n        const endTimeDetail = this.parent.getTimeString(endDate);\n        let details = '';\n        const spanLength = endDate.getDate() !== startDate.getDate() &&\n            (endDate.getTime() - startDate.getTime()) / (60 * 60 * 1000) < 24 ? 1 : 0;\n        if (eventData[fields.isAllDay]) {\n            details = startDateDetails + ' (' + this.l10n.getConstant('allDay') + ')';\n            if (((endDate.getTime() - startDate.getTime()) / MS_PER_DAY) > 1) {\n                details += '&nbsp;-&nbsp;' + endDateDetails + ' (' + this.l10n.getConstant('allDay') + ')';\n            }\n        }\n        else if ((((endDate.getTime() - startDate.getTime()) / MS_PER_DAY) >= 1) || spanLength > 0) {\n            details = startDateDetails + ' (' + startTimeDetail + ')' + '&nbsp;-&nbsp;' + endDateDetails + ' (' + endTimeDetail + ')';\n        }\n        else {\n            details = startDateDetails + ' (' + (startTimeDetail + '&nbsp;-&nbsp;' + endTimeDetail) + ')';\n        }\n        return { eventSubject: eventSubject, details: details };\n    }\n    moreEventClick(data, endDate, groupIndex) {\n        this.quickPopupHide(true);\n        const moreEventContentEle = this.morePopup.element.querySelector('.' + MORE_EVENT_CONTENT_CLASS);\n        if (moreEventContentEle) {\n            remove(moreEventContentEle);\n        }\n        const selectedDate = ((data.date).getTime()).toString();\n        const target = closest(data.element, '.' + MORE_INDICATOR_CLASS + ',.' + WORK_CELLS_CLASS);\n        const day = this.parent.globalize.formatDate(data.date, { format: 'E', calendar: this.parent.getCalendarMode() });\n        this.morePopup.element.querySelector('.' + MORE_EVENT_HEADER_DAY_CLASS).innerHTML = capitalizeFirstWord(day, 'single');\n        const dateElement = this.morePopup.element.querySelector('.' + MORE_EVENT_HEADER_DATE_CLASS);\n        dateElement.innerHTML = this.getDateFormat(data.date, 'd');\n        dateElement.setAttribute('data-date', selectedDate);\n        dateElement.setAttribute('data-end-date', endDate.getTime().toString());\n        let groupOrder;\n        if (!isNullOrUndefined(groupIndex)) {\n            dateElement.setAttribute('data-group-index', groupIndex);\n            groupOrder = this.parent.resourceBase.lastResourceLevel[parseInt(groupIndex, 10)].groupOrder;\n        }\n        const moreEventElements = this.createMoreEventList(data.event, groupOrder, groupIndex);\n        this.morePopup.element.querySelector('.' + MORE_EVENT_POPUP_CLASS).appendChild(moreEventElements);\n        removeClass(this.morePopup.element.querySelector('.' + MORE_EVENT_DATE_HEADER_CLASS).childNodes, CURRENTDATE_CLASS);\n        if (resetTime(data.date).getTime() === resetTime(this.parent.getCurrentTime()).getTime()) {\n            addClass(this.morePopup.element.querySelector('.' + MORE_EVENT_DATE_HEADER_CLASS).childNodes, CURRENTDATE_CLASS);\n        }\n        if (!this.parent.isAdaptive) {\n            if (this.parent.currentView.indexOf('Timeline') !== -1) {\n                const gIndex = target.getAttribute('data-group-index');\n                const startDate = new Date(parseInt(target.getAttribute('data-start-date'), 10));\n                startDate.setHours(startDate.getHours(), startDate.getMinutes(), 0);\n                const tdDate = startDate.getTime().toString();\n                if (isNullOrUndefined(gIndex)) {\n                    this.morePopup.relateTo = this.parent.element.querySelector('.' + CONTENT_WRAP_CLASS +\n                        ' tbody tr td[data-date=\"' + tdDate + '\"]');\n                }\n                else {\n                    this.morePopup.relateTo = this.parent.element.querySelector('.' + CONTENT_WRAP_CLASS +\n                        ' tbody tr td[data-group-index=\"' + gIndex + '\"][data-date=\"' + tdDate + '\"]');\n                    if (isNullOrUndefined(this.morePopup.relateTo)) {\n                        const workCells = [].slice.call(this.parent.element.querySelectorAll('.' + CONTENT_WRAP_CLASS +\n                            ' tbody tr td[data-group-index=\"' + gIndex + '\"]'));\n                        for (let i = 0; i < workCells.length; i++) {\n                            const date = workCells[i].getAttribute('data-date');\n                            if (date < tdDate) {\n                                this.morePopup.relateTo = workCells[i];\n                            }\n                        }\n                    }\n                }\n            }\n            else {\n                this.morePopup.relateTo = closest(target, '.' + WORK_CELLS_CLASS);\n            }\n        }\n        this.parent.renderTemplates();\n        const eventProp = {\n            type: 'EventContainer', cancel: false,\n            element: this.morePopup.element, data: data\n        };\n        this.parent.trigger(popupOpen, eventProp, (popupArgs) => {\n            if (!popupArgs.cancel) {\n                this.morePopup.show();\n            }\n        });\n    }\n    saveClick(event) {\n        this.dialogEvent = event;\n        this.isCrudAction = true;\n        this.quickPopupHide();\n    }\n    detailsClick(event) {\n        const subjectEle = this.quickPopup.element.querySelector('.' + SUBJECT_CLASS);\n        if (subjectEle && subjectEle.value !== '') {\n            extend(this.parent.activeCellsData, { subject: subjectEle.value });\n        }\n        this.dialogEvent = event;\n        this.isCrudAction = false;\n        this.fieldValidator.destroyToolTip();\n        this.quickPopupHide();\n        this.parent.eventWindow.openEditor(this.parent.activeCellsData, 'Add');\n    }\n    editClick(event) {\n        this.dialogEvent = event;\n        this.quickPopupHide(true);\n        const data = this.parent.activeEventData.event;\n        this.parent.currentAction = 'EditSeries';\n        if (!isNullOrUndefined(data[this.parent.eventFields.recurrenceRule])) {\n            this.parent.currentAction = 'EditOccurrence';\n            this.openRecurrenceAlert();\n        }\n        else {\n            this.parent.eventWindow.openEditor(data, this.parent.currentAction);\n        }\n    }\n    deleteClick(event) {\n        this.dialogEvent = event;\n        this.quickPopupHide(true);\n        this.parent.currentAction = 'Delete';\n        if (this.parent.activeEventData.event[this.parent.eventFields.recurrenceRule]) {\n            this.openRecurrenceAlert();\n        }\n        else {\n            this.openDeleteAlert();\n        }\n    }\n    updateMoreEventContent() {\n        if (this.morePopup.element.classList.contains('e-popup-close')) {\n            return;\n        }\n        const moreEventContentEle = this.morePopup.element.querySelector('.' + MORE_EVENT_CONTENT_CLASS);\n        if (moreEventContentEle) {\n            remove(moreEventContentEle);\n        }\n        const dateElement = this.morePopup.element.querySelector('.' + MORE_EVENT_HEADER_DATE_CLASS);\n        const startDate = new Date(parseInt(dateElement.getAttribute('data-date'), 10));\n        const endDate = new Date(parseInt(dateElement.getAttribute('data-end-date'), 10));\n        const groupIndex = dateElement.getAttribute('data-group-index');\n        let data;\n        let groupOrder;\n        if (!isNullOrUndefined(groupIndex)) {\n            data = this.parent.resourceBase.lastResourceLevel[parseInt(groupIndex, 10)];\n            groupOrder = data.groupOrder;\n        }\n        const events = this.parent.eventBase.filterEvents(startDate, endDate, this.parent.eventsProcessed, data);\n        const moreElement = this.createMoreEventList(events, groupOrder, groupIndex);\n        this.morePopup.element.querySelector('.' + MORE_EVENT_POPUP_CLASS).appendChild(moreElement);\n    }\n    closeClick(event) {\n        this.dialogEvent = event;\n        this.quickPopupHide();\n        this.morePopup.hide();\n    }\n    dialogButtonClick(event) {\n        this.dialogEvent = event;\n        this.quickDialog.hide();\n        const target = event.target;\n        const cancelBtn = this.quickDialog.element.querySelector('.' + QUICK_DIALOG_ALERT_CANCEL);\n        const eventData = this.parent.activeEventData.event;\n        if (target.classList.contains(QUICK_DIALOG_OCCURRENCE_CLASS)) {\n            this.parent.currentAction = (this.parent.currentAction === 'Delete') ? 'DeleteOccurrence' : 'EditOccurrence';\n            switch (this.parent.currentAction) {\n                case 'EditOccurrence':\n                    this.parent.eventWindow.openEditor(eventData, this.parent.currentAction);\n                    break;\n                case 'DeleteOccurrence':\n                    this.parent.crudModule.deleteEvent(eventData, this.parent.currentAction);\n                    break;\n            }\n        }\n        else if (target.classList.contains(QUICK_DIALOG_FOLLOWING_EVENTS_CLASS)) {\n            this.parent.currentAction = (this.parent.currentAction === 'Delete') ? 'DeleteFollowingEvents' : 'EditFollowingEvents';\n            switch (this.parent.currentAction) {\n                case 'EditFollowingEvents':\n                    this.parent.eventWindow.openEditor(eventData, this.parent.currentAction);\n                    break;\n                case 'DeleteFollowingEvents':\n                    this.parent.crudModule.deleteEvent(eventData, this.parent.currentAction);\n                    break;\n            }\n        }\n        else if (target.classList.contains(QUICK_DIALOG_SERIES_CLASS)) {\n            this.parent.currentAction = (this.parent.currentAction === 'Delete') ? 'DeleteSeries' : 'EditSeries';\n            switch (this.parent.currentAction) {\n                case 'EditSeries':\n                    this.parent.eventWindow.openEditor(this.parent.eventBase.getParentEvent(eventData, true), this.parent.currentAction);\n                    break;\n                case 'DeleteSeries':\n                    this.parent.crudModule.deleteEvent(eventData, this.parent.currentAction);\n                    break;\n            }\n        }\n        else if (target.classList.contains(QUICK_DIALOG_DELETE_CLASS)) {\n            this.parent.crudModule.deleteEvent(eventData, this.parent.currentAction);\n        }\n        else if (!cancelBtn.classList.contains(DISABLE_CLASS) && (target.classList.contains(QUICK_DIALOG_ALERT_OK) ||\n            (target.classList.contains(QUICK_DIALOG_ALERT_CANCEL) && !cancelBtn.classList.contains(QUICK_DIALOG_CANCEL_CLASS)))) {\n            this.parent.uiStateValues.isIgnoreOccurrence = target.classList.contains(QUICK_DIALOG_ALERT_CANCEL);\n            this.parent.eventWindow.eventSave(event, this.l10n.getConstant('ok'));\n        }\n    }\n    updateTapHoldEventPopup(target) {\n        const selectedElements = this.parent.eventBase.getSelectedEventElements(target);\n        this.parent.activeEventData = this.parent.eventBase.getSelectedEvents();\n        if (selectedElements.length > 0) {\n            const eventObj = this.parent.eventBase.getEventByGuid(selectedElements[0].getAttribute('data-guid'));\n            const titleContent = (selectedElements.length === 1) ?\n                (eventObj[this.parent.eventFields.subject] || this.l10n.getConstant('noTitle')) :\n                '(' + selectedElements.length + ')' + '&nbsp;' + this.l10n.getConstant('selectedItems');\n            this.quickPopup.element.querySelector('.' + SUBJECT_CLASS).innerHTML = titleContent;\n            if (selectedElements.length > 1) {\n                addClass([this.quickPopup.element.querySelector('.' + EDIT_ICON_CLASS)], HIDDEN_CLASS);\n            }\n            else {\n                removeClass([this.quickPopup.element.querySelector('.' + EDIT_ICON_CLASS)], HIDDEN_CLASS);\n            }\n        }\n        else {\n            this.parent.selectedElements = [];\n            this.quickPopupHide();\n        }\n    }\n    getTimezone(event) {\n        let zoneDetails = '';\n        zoneDetails += event[this.parent.eventFields.startTimezone] || '';\n        zoneDetails += zoneDetails === '' ? '' : ' - ';\n        zoneDetails += event[this.parent.eventFields.endTimezone] || '';\n        return zoneDetails;\n    }\n    getRecurrenceSummary(event) {\n        const recurrenceEditor = this.parent.eventWindow.getRecurrenceEditorInstance();\n        if (recurrenceEditor) {\n            const ruleSummary = recurrenceEditor.getRuleSummary(event[this.parent.eventFields.recurrenceRule]);\n            return ruleSummary.charAt(0).toUpperCase() + ruleSummary.slice(1);\n        }\n        return '';\n    }\n    getDateFormat(date, skeletonString) {\n        return capitalizeFirstWord(this.parent.globalize.formatDate(date, { skeleton: skeletonString, calendar: this.parent.getCalendarMode() }), 'single');\n    }\n    getDataFromTarget(target) {\n        if (target.classList.contains(APPOINTMENT_CLASS)) {\n            return this.parent.activeEventData.event;\n        }\n        // Deprecated cells data in quick popups\n        const eventObj = {\n            startTime: this.parent.activeCellsData.startTime,\n            endTime: this.parent.activeCellsData.endTime,\n            isAllDay: this.parent.activeCellsData.isAllDay,\n            groupIndex: this.parent.activeCellsData.groupIndex\n        };\n        const cellsData = this.parent.activeCellsData;\n        this.parent.eventWindow.convertToEventData(cellsData, eventObj);\n        return eventObj;\n    }\n    beforeQuickDialogClose(e) {\n        const args = {\n            event: e.event || this.dialogEvent,\n            type: (isNullOrUndefined(this.parent.activeEventData.event)) ? 'ValidationAlert' :\n                !isNullOrUndefined(this.parent.activeEventData.event[this.parent.eventFields.recurrenceRule])\n                    ? 'RecurrenceAlert' : 'DeleteAlert', cancel: false, data: this.parent.activeEventData.event,\n            element: this.quickDialog.element\n        };\n        this.parent.trigger(popupClose, args, (popupCloseArgs) => {\n            if (!popupCloseArgs.cancel) {\n                this.parent.eventBase.focusElement(true);\n            }\n        });\n    }\n    beforeQuickPopupOpen(target) {\n        this.parent.renderTemplates();\n        const isEventPopup = this.quickPopup.element.querySelector('.' + EVENT_POPUP_CLASS);\n        const popupType = this.parent.isAdaptive ? isEventPopup ? 'ViewEventInfo' : 'EditEventInfo' : 'QuickInfo';\n        const eventProp = {\n            type: popupType, cancel: false, data: extend({}, this.getDataFromTarget(target), null, true),\n            target: target, element: this.quickPopup.element\n        };\n        this.parent.trigger(popupOpen, eventProp, (popupArgs) => {\n            if (popupArgs.cancel) {\n                this.quickPopupHide();\n                this.destroyPopupButtons('quickPopup');\n                if (popupArgs.element.classList.contains(POPUP_OPEN)) {\n                    this.quickPopupClose();\n                }\n                removeChildren(this.quickPopup.element);\n                this.isMultipleEventSelect = false;\n            }\n            else {\n                const display = this.quickPopup.element.style.display;\n                this.quickPopup.element.style.display = 'block';\n                if (this.parent.isAdaptive) {\n                    this.quickPopup.element.removeAttribute('style');\n                    this.quickPopup.element.style.display = 'block';\n                    this.quickPopup.element.style.height = formatUnit((popupType === 'EditEventInfo') ? 65 : window.innerHeight);\n                }\n                else {\n                    this.quickPopup.offsetX = 10;\n                    this.quickPopup.collision = { X: this.parent.enableRtl ? 'flip' : 'none', Y: 'fit' };\n                    this.quickPopup.position = { X: this.parent.enableRtl ? 'left' : 'right', Y: this.parent.enableRtl ? 'bottom' : 'top' };\n                    this.quickPopup.dataBind();\n                    this.quickPopup.refreshPosition(null, true);\n                    const collide = isCollide(this.quickPopup.element, this.parent.element);\n                    if (collide.indexOf(this.parent.enableRtl ? 'left' : 'right') > -1) {\n                        this.quickPopup.offsetX = -target.offsetWidth - 10 - this.quickPopup.element.offsetWidth;\n                        this.quickPopup.dataBind();\n                        const leftCollide = isCollide(this.quickPopup.element, this.parent.element);\n                        if (leftCollide.indexOf('left') > -1) {\n                            this.quickPopup.position = { X: 'center', Y: 'center' };\n                            this.quickPopup.collision = { X: 'fit', Y: 'fit' };\n                            this.quickPopup.offsetX = -(this.quickPopup.element.offsetWidth / 2);\n                            this.quickPopup.dataBind();\n                        }\n                    }\n                    if (this.parent.virtualScrollModule && (collide.indexOf('top') > -1 || collide.indexOf('bottom') > -1)) {\n                        const element = this.parent.element.querySelector('.' + CONTENT_WRAP_CLASS + ' table');\n                        const translateY = getTranslateY(element);\n                        this.quickPopup.offsetY = translateY;\n                        this.quickPopup.dataBind();\n                    }\n                }\n                if (isEventPopup) {\n                    this.applyEventColor();\n                }\n                this.quickPopup.element.style.display = display;\n                this.quickPopup.dataBind();\n                this.quickPopup.show();\n            }\n        });\n    }\n    applyEventColor() {\n        let colorField = '';\n        if (this.parent.currentView === 'Agenda' || this.parent.currentView === 'MonthAgenda') {\n            colorField = this.parent.enableRtl ? 'border-right-color' : 'border-left-color';\n        }\n        else {\n            colorField = 'background-color';\n        }\n        let color = this.parent.activeEventData.element.style[colorField];\n        if (color === '') {\n            return;\n        }\n        let colorEle = this.quickPopup.element.querySelector('.' + POPUP_HEADER_CLASS);\n        const footerEle = this.quickPopup.element.querySelector('.' + POPUP_FOOTER_CLASS);\n        if (footerEle && footerEle.offsetParent) {\n            colorEle = this.quickPopup.element.querySelector('.' + SUBJECT_CLASS);\n            if (colorEle) {\n                colorEle.style.borderLeftColor = color;\n                color = `rgba(${color.match(/\\d+/g).join()},0.3)`;\n            }\n        }\n        if (colorEle) {\n            colorEle.style.backgroundColor = color;\n        }\n    }\n    quickPopupOpen() {\n        if (this.parent.isAdaptive) {\n            this.quickPopup.element.style.top = '0px';\n            return;\n        }\n        if (this.quickPopup.element.querySelector('.' + CELL_POPUP_CLASS)) {\n            const subjectElement = this.quickPopup.element.querySelector('.' + SUBJECT_CLASS);\n            if (subjectElement) {\n                subjectElement.focus();\n            }\n        }\n        else {\n            const editElement = this.quickPopup.element.querySelector('.' + EDIT_EVENT_CLASS);\n            if (editElement) {\n                editElement.focus();\n            }\n            const editIcon = this.quickPopup.element.querySelector('.' + EDIT_CLASS);\n            if (editIcon) {\n                editIcon.focus();\n            }\n        }\n    }\n    quickPopupClose() {\n        this.parent.eventBase.focusElement();\n        this.quickPopup.relateTo = WORK_CELLS_CLASS;\n        this.fieldValidator.destroyToolTip();\n        if (this.quickPopup.element.querySelectorAll('.e-formvalidator').length) {\n            this.fieldValidator.destroy();\n        }\n        this.destroyPopupButtons('quickPopup');\n        removeChildren(this.quickPopup.element);\n    }\n    morePopupOpen() {\n        if (this.parent.isAdaptive) {\n            this.morePopup.element.style.top = '0px';\n            this.morePopup.element.style.left = '0px';\n            this.morePopup.element.style.height = formatUnit(window.innerHeight);\n            return;\n        }\n        this.morePopup.element.querySelector('.' + MORE_EVENT_HEADER_DATE_CLASS).focus();\n        this.morePopup.refreshPosition();\n    }\n    morePopupClose() {\n        const moreWrapper = this.parent.element.querySelector('.' + MORE_EVENT_WRAPPER_CLASS);\n        if (moreWrapper) {\n            remove(moreWrapper);\n        }\n    }\n    popupClose(event) {\n        this.dialogEvent = event;\n        this.isCrudAction = false;\n        this.quickPopupHide(true);\n    }\n    quickPopupHide(hideAnimation) {\n        if (!this.quickPopup.element.classList.contains(POPUP_OPEN)) {\n            return;\n        }\n        const isCellPopup = this.quickPopup.element.querySelector('.' + CELL_POPUP_CLASS);\n        let popupData;\n        if (isCellPopup) {\n            const formvalidator = this.quickPopup.element.querySelector('.e-formvalidator');\n            if (this.isCrudAction && formvalidator &&\n                !formvalidator.ej2_instances[0].validate()) {\n                return;\n            }\n            const fields = this.parent.eventFields;\n            const saveObj = this.parent.eventWindow.getObjectFromFormData(POPUP_WRAPPER_CLASS);\n            this.parent.eventWindow.setDefaultValueToObject(saveObj);\n            saveObj[fields.id] = this.parent.eventBase.getEventMaxID();\n            saveObj[fields.startTime] = this.parent.activeCellsData.startTime;\n            saveObj[fields.endTime] = this.parent.activeCellsData.endTime;\n            saveObj[fields.isAllDay] = this.parent.activeCellsData.isAllDay;\n            if (this.parent.resourceBase) {\n                this.parent.resourceBase.setResourceValues(saveObj);\n            }\n            popupData = saveObj;\n        }\n        else {\n            popupData = this.parent.activeEventData.event;\n        }\n        const isEventPopup = this.quickPopup.element.querySelector('.' + EVENT_POPUP_CLASS);\n        const args = {\n            event: this.dialogEvent,\n            type: this.parent.isAdaptive ? isEventPopup ? 'ViewEventInfo' : 'EditEventInfo' : 'QuickInfo',\n            cancel: false, data: popupData, element: this.quickPopup.element,\n            target: (isCellPopup ? this.parent.activeCellsData.element : this.parent.activeEventData.element)\n        };\n        this.parent.trigger(popupClose, args, (popupCloseArgs) => {\n            if (!popupCloseArgs.cancel) {\n                if (this.quickPopup.element.classList.contains('e-popup-open')) {\n                    if (isCellPopup && this.isCrudAction) {\n                        this.parent.currentAction = 'Add';\n                        this.parent.crudModule.addEvent(popupCloseArgs.data);\n                    }\n                    if (hideAnimation) {\n                        const animation = this.quickPopup.hideAnimation;\n                        this.quickPopup.hideAnimation = null;\n                        this.quickPopup.hide();\n                        this.quickPopup.hideAnimation = animation;\n                    }\n                    else {\n                        this.quickPopup.hide();\n                    }\n                    this.isMultipleEventSelect = false;\n                    this.isCrudAction = false;\n                }\n            }\n        });\n    }\n    navigationClick(e) {\n        const navigateEle = closest(e.target, '.' + NAVIGATE_CLASS);\n        if (!isNullOrUndefined(navigateEle)) {\n            const date = this.parent.getDateFromElement(e.currentTarget);\n            if (!isNullOrUndefined(date)) {\n                this.closeClick(e);\n                this.parent.setProperties({ selectedDate: date }, true);\n                this.parent.changeView(this.parent.getNavigateView(), e);\n            }\n        }\n    }\n    documentClick(e) {\n        const target = e.event.target;\n        const classNames = '.' + POPUP_WRAPPER_CLASS + ',.' + HEADER_CELLS_CLASS + ',.' + ALLDAY_CELLS_CLASS +\n            ',.' + WORK_CELLS_CLASS + ',.' + APPOINTMENT_CLASS + ',.e-popup';\n        const popupWrap = this.parent.element.querySelector('.' + POPUP_WRAPPER_CLASS);\n        if ((popupWrap && popupWrap.childElementCount > 0 && !closest(target, classNames)) || !closest(target, classNames)) {\n            this.quickPopupHide();\n            this.parent.removeNewEventElement();\n        }\n        const tar = this.parent.element.querySelector('.' + INLINE_SUBJECT_CLASS);\n        if (tar && tar !== target && this.parent.allowInline) {\n            this.parent.inlineModule.documentClick();\n        }\n        if (closest(target, '.' + APPOINTMENT_CLASS + ',.' + HEADER_CELLS_CLASS)) {\n            this.parent.removeNewEventElement();\n        }\n        if (!closest(target, '.' + MORE_POPUP_WRAPPER_CLASS) && (target.classList &&\n            !target.classList.contains(MORE_INDICATOR_CLASS))\n            && (!closest(target, '.' + POPUP_OPEN)) && !closest(target, '.' + WORK_CELLS_CLASS)) {\n            this.morePopup.hide();\n        }\n    }\n    onClosePopup(event) {\n        if (!isNullOrUndefined(event)) {\n            this.dialogEvent = event;\n        }\n        this.quickPopupHide();\n        this.parent.eventBase.focusElement();\n    }\n    addEventListener() {\n        this.parent.on(cellClick, this.cellClick, this);\n        this.parent.on(eventClick, this.eventClick, this);\n        this.parent.on(documentClick, this.documentClick, this);\n        this.parent.on(dataReady, this.updateMoreEventContent, this);\n    }\n    removeEventListener() {\n        this.parent.off(cellClick, this.cellClick);\n        this.parent.off(eventClick, this.eventClick);\n        this.parent.off(documentClick, this.documentClick);\n        this.parent.off(dataReady, this.updateMoreEventContent);\n    }\n    destroyPopupButtons(popupName) {\n        const popup = popupName === 'quickPopup' ? this.quickPopup : this.morePopup;\n        const buttonCollections = [].slice.call(popup.element.querySelectorAll('.e-control.e-btn'));\n        for (const button of buttonCollections) {\n            const instance = button.ej2_instances[0];\n            if (instance) {\n                instance.destroy();\n            }\n        }\n    }\n    refreshQuickDialog() {\n        this.destroyQuickDialog();\n        this.renderQuickDialog();\n    }\n    refreshQuickPopup() {\n        this.destroyQuickPopup();\n        this.renderQuickPopup();\n    }\n    refreshMorePopup() {\n        this.destroyMorePopup();\n        this.renderMorePopup();\n    }\n    destroyQuickDialog() {\n        if (this.quickDialog.element) {\n            this.quickDialog.destroy();\n            remove(this.quickDialog.element);\n            this.quickDialog = null;\n        }\n    }\n    destroyQuickPopup() {\n        if (this.quickPopup.element) {\n            this.destroyPopupButtons('quickPopup');\n            this.quickPopup.destroy();\n            remove(this.quickPopup.element);\n            this.quickPopup = null;\n        }\n    }\n    destroyMorePopup() {\n        if (this.morePopup.element) {\n            this.destroyPopupButtons('morePopup');\n            this.morePopup.destroy();\n            remove(this.morePopup.element);\n            this.morePopup = null;\n        }\n    }\n    destroy() {\n        if (this.quickPopup.element.querySelectorAll('.e-formvalidator').length) {\n            this.fieldValidator.destroy();\n        }\n        this.removeEventListener();\n        this.destroyQuickPopup();\n        this.destroyMorePopup();\n        this.destroyQuickDialog();\n        this.parent = null;\n        this.l10n = null;\n        this.isCrudAction = null;\n        this.fieldValidator = null;\n        this.isMultipleEventSelect = null;\n    }\n}\n\n/* eslint-disable @typescript-eslint/no-explicit-any */\n/**\n * Tooltip for Schedule\n */\nclass EventTooltip {\n    constructor(parent) {\n        this.parent = parent;\n        this.tooltipObj = new Tooltip({\n            animation: { close: { effect: 'FadeOut' } },\n            content: 'No title',\n            position: 'BottomRight',\n            offsetY: 10,\n            mouseTrail: this.parent.isAdaptive ? false : true,\n            showTipPointer: false,\n            cssClass: this.parent.cssClass + ' ' + EVENT_TOOLTIP_ROOT_CLASS,\n            target: this.getTargets(),\n            beforeRender: this.onBeforeRender.bind(this),\n            beforeClose: this.onBeforeClose.bind(this),\n            enableRtl: this.parent.enableRtl\n        });\n        this.tooltipObj.appendTo(this.parent.element);\n    }\n    getTargets() {\n        const targets = [];\n        if (this.parent.activeViewOptions.group.headerTooltipTemplate) {\n            targets.push('.' + RESOURCE_CELLS_CLASS);\n        }\n        if (this.parent.eventSettings.enableTooltip) {\n            targets.push('.' + APPOINTMENT_CLASS);\n        }\n        return targets.join(',');\n    }\n    onBeforeRender(args) {\n        if (!isNullOrUndefined(args.target.getAttribute('data-tooltip-id'))) {\n            return;\n        }\n        if (args.target.classList.contains(RESOURCE_CELLS_CLASS) && this.parent.activeViewOptions.group.resources.length > 0) {\n            let resCollection;\n            if (this.parent.activeView.isTimelineView()) {\n                const index = parseInt(args.target.getAttribute('data-group-index'), 10);\n                resCollection = this.parent.resourceBase.lastResourceLevel[index];\n            }\n            else {\n                const rowIndex = args.target.parentNode.sectionRowIndex;\n                const cellIndex = args.target.cellIndex;\n                resCollection = this.parent.activeView.getColumnLevels()[rowIndex][cellIndex];\n            }\n            const data = {\n                resource: resCollection.resource,\n                resourceData: resCollection.resourceData\n            };\n            const contentContainer = createElement('div');\n            const templateId = this.parent.element.id + '_headerTooltipTemplate';\n            const tooltipTemplate = [].slice.call(this.parent.getHeaderTooltipTemplate()(data, this.parent, 'headerTooltipTemplate', templateId, false));\n            append(tooltipTemplate, contentContainer);\n            this.setContent(contentContainer);\n            this.parent.renderTemplates();\n            return;\n        }\n        const record = this.parent.eventBase.getEventByGuid(args.target.getAttribute('data-guid'));\n        if (isNullOrUndefined(record)) {\n            return;\n        }\n        if (!isNullOrUndefined(this.parent.eventSettings.tooltipTemplate)) {\n            const contentContainer = createElement('div');\n            const templateId = this.parent.element.id + '_tooltipTemplate';\n            const tooltipTemplate = [].slice.call(this.parent.getEventTooltipTemplate()(record, this.parent, 'tooltipTemplate', templateId, false));\n            append(tooltipTemplate, contentContainer);\n            this.setContent(contentContainer);\n        }\n        else {\n            const globalize = this.parent.globalize;\n            const fields = this.parent.eventFields;\n            const eventStart = new Date('' + record[fields.startTime]);\n            let eventEnd = new Date('' + record[fields.endTime]);\n            eventEnd = (eventEnd.getHours() === 0 && eventEnd.getMinutes() === 0) ? new Date(eventEnd.setMilliseconds(-1000)) : eventEnd;\n            const startDate = resetTime(new Date('' + eventStart));\n            const endDate = resetTime(new Date('' + eventEnd));\n            const tooltipSubject = (record[fields.subject] || this.parent.eventSettings.fields.subject.default\n                || this.parent.localeObj.getConstant('addTitle'));\n            const tooltipLocation = !isNullOrUndefined(record[fields.location]) ? record[fields.location] : '';\n            let startMonthDate = '';\n            let startMonthYearDate = '';\n            let endMonthYearDate = '';\n            startMonthDate = globalize.formatDate(eventStart, {\n                type: 'date', skeleton: 'MMMd', calendar: this.parent.getCalendarMode()\n            });\n            startMonthYearDate = globalize.formatDate(eventStart, {\n                type: 'date', skeleton: 'medium', calendar: this.parent.getCalendarMode()\n            });\n            endMonthYearDate = globalize.formatDate(eventEnd, {\n                type: 'date', skeleton: 'medium', calendar: this.parent.getCalendarMode()\n            });\n            startMonthDate = capitalizeFirstWord(startMonthDate, 'single');\n            startMonthYearDate = capitalizeFirstWord(startMonthYearDate, 'single');\n            endMonthYearDate = capitalizeFirstWord(endMonthYearDate, 'single');\n            const skeleton = 'short';\n            const startTime = globalize.formatDate(eventStart, {\n                type: 'time', skeleton: skeleton, calendar: this.parent.getCalendarMode()\n            });\n            const endTime = globalize.formatDate(eventEnd, {\n                type: 'time', skeleton: skeleton, calendar: this.parent.getCalendarMode()\n            });\n            let tooltipDetails;\n            if (startDate.getTime() === endDate.getTime()) {\n                tooltipDetails =\n                    globalize.formatDate(eventStart, {\n                        type: 'date', skeleton: 'long', calendar: this.parent.getCalendarMode()\n                    });\n                tooltipDetails = capitalizeFirstWord(tooltipDetails, 'single');\n            }\n            else {\n                tooltipDetails = (startDate.getFullYear() === endDate.getFullYear()) ? (startMonthDate + ' - ' + endMonthYearDate) :\n                    (startMonthYearDate + ' - ' + endMonthYearDate);\n            }\n            const tooltipTime = (record[fields.isAllDay]) ? this.parent.localeObj.getConstant('allDay') :\n                (startTime + ' - ' + endTime);\n            const content = '<div><div class=\"e-subject\">' + tooltipSubject + '</div>' +\n                '<div class=\"e-location\">' + tooltipLocation + '</div>' +\n                '<div class=\"e-details\">' + tooltipDetails + '</div>' +\n                '<div class=\"e-all-day\">' + tooltipTime + '</div></div>';\n            this.setContent(content);\n        }\n        this.parent.renderTemplates();\n    }\n    onBeforeClose() {\n        this.parent.resetTemplates(['tooltipTemplate', 'headerTooltipTemplate']);\n    }\n    setContent(content) {\n        this.tooltipObj.setProperties({ content: content }, true);\n    }\n    close() {\n        this.tooltipObj.close();\n    }\n    destroy() {\n        this.tooltipObj.destroy();\n        addClass([this.parent.element], 'e-control');\n        this.tooltipObj = null;\n        this.parent = null;\n    }\n}\n\nvar __decorate$1 = (undefined && undefined.__decorate) || function (decorators, target, key, desc) {\n    var c = arguments.length, r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d;\n    if (typeof Reflect === \"object\" && typeof Reflect.decorate === \"function\") r = Reflect.decorate(decorators, target, key, desc);\n    else for (var i = decorators.length - 1; i >= 0; i--) if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;\n    return c > 3 && r && Object.defineProperty(target, key, r), r;\n};\nconst HEADER = 'e-editor';\nconst INPUTWARAPPER = 'e-input-wrapper';\nconst INPUTWARAPPERSIDE = 'e-input-wrapper-side';\nconst REPEATELEMENT = 'e-repeat-element';\nconst REPEATINTERVAL = 'e-repeat-interval';\nconst INTERVALCLASS = 'e-interval';\nconst DAYWRAPPER = 'e-days';\nconst WEEKWRAPPER = 'e-non-week';\nconst WEEKPOSITION = 'e-week-position';\nconst YEAREXPANDERWRAPPER = 'e-year-expander';\nconst YEAREXPANDERELEMENT = 'e-year-expander-element';\nconst MONETHEXPANDERWRAPPER = 'e-month-expander';\nconst MONETHEXPANDWRAPPER = 'e-month-expand-wrapper';\nconst MONTHEXPANDERELEMENT = 'e-month-expander-element';\nconst MONTHEXPANDERCHECKBOXWRAPPER = 'e-month-expander-checkbox-wrapper';\nconst FORMLEFT = 'e-form-left';\nconst FORMRIGHT = 'e-form-right';\nconst MONTHDAYWRAPPER = 'e-month-day';\nconst MONTHEXPANNDERELEM = 'e-month-expander-wrapper';\nconst MONTHPOS = 'e-month-pos';\nconst MONTHWEEK = 'e-month-week';\nconst ENDON = 'e-end-on';\nconst MONTHEXPANDERLABEL = 'e-month-expander-label';\nconst WEEKEXPANDERLABEL = 'e-week-expander-label';\nconst ENDONLABEL = 'e-end-on-label';\nconst ENDONLEFT = 'e-end-on-left';\nconst MONTHDAYELEMENT = 'e-monthday-element';\nconst ENDONELEMENT = 'e-end-on-element';\nconst ENDONDATE = 'e-end-on-date';\nconst UNTILDATE = 'e-until-date';\nconst ENDONCOUNTWRAPPER = 'e-end-on-count';\nconst ENDONCOUNT = 'e-recurrence-count';\nconst HIDEWRAPPER = 'e-hide-recurrence-element';\nconst RTLCLASS = 'e-rtl';\nconst PRIMARY = 'e-primary';\nconst ACTIVE = 'e-active';\nconst RECURRENCETABLE = 'e-recurrence-table';\nconst REPEATCONTENT = 'e-repeat-content';\nconst REPEATCONTENTWRAPPER = 'e-repeat-content-wrapper';\nconst NONE = 'none';\nconst DAILY = 'daily';\nconst WEEKLY = 'weekly';\nconst MONTHLY = 'monthly';\nconst YEARLY = 'yearly';\nconst NEVER = 'never';\nconst UNTIL$1 = 'until';\nconst COUNT = 'count';\nconst TEXTFIELD = 'text';\nconst VALUEFIELD = 'value';\nconst LAST = 'last';\nconst REPEAT = 'repeat';\nconst REPEATEVERY = 'repeatEvery';\nconst ON$1 = 'on';\nconst END = 'end';\nconst RADIOLABEL = 'onDay';\nconst RULEUNTIL = 'UNTIL';\nconst RULEBYDAY = 'BYDAY';\nconst RULEBYMONTHDAY = 'BYMONTHDAY';\nconst RULEBYMONTH = 'BYMONTH';\nconst RULEINTERVAL = 'INTERVAL';\nconst RULECOUNT = 'COUNT';\nconst RULESETPOS = 'BYSETPOS';\nconst RULEFREQ = 'FREQ';\nconst RULEDAILY = 'DAILY';\nconst RULEWEEKLY = 'WEEKLY';\nconst RULEMONTHLY = 'MONTHLY';\nconst RULEYEARLY = 'YEARLY';\nconst RULESUNDAY = 'SU';\nconst RULEMONDAY = 'MO';\nconst RULETUESDAY = 'TU';\nconst RULEWEDNESDAY = 'WE';\nconst RULETHURSDAY = 'TH';\nconst RULEFRIDAY = 'FR';\nconst RULESATURDAY = 'SA';\nconst KEYSUNDAY = 'sun';\nconst KEYMONDAY = 'mon';\nconst KEYTUESDAY = 'tue';\nconst KEYWEDNESDAY = 'wed';\nconst KEYTHURSDAY = 'thu';\nconst KEYFRIDAY = 'fri';\nconst KEYSATURDAY = 'sat';\nconst EQUAL = '=';\nconst SEMICOLON = ';';\nconst COMMA = ',';\nconst FIRST = 'first';\nconst SECOND = 'second';\nconst THIRD = 'third';\nconst FOURTH = 'fourth';\nconst contentType = {\n    none: '',\n    daily: 'days',\n    weekly: 'weeks',\n    monthly: 'months',\n    yearly: 'years'\n};\nconst valueData = {\n    'sun': RULESUNDAY,\n    'mon': RULEMONDAY,\n    'tue': RULETUESDAY,\n    'wed': RULEWEDNESDAY,\n    'thu': RULETHURSDAY,\n    'fri': RULEFRIDAY,\n    'sat': RULESATURDAY\n};\nconst neverClassList = [DAYWRAPPER, WEEKWRAPPER, ENDON, INTERVALCLASS, YEAREXPANDERWRAPPER, MONETHEXPANDERWRAPPER];\nconst weekClassList = [WEEKWRAPPER];\nconst monthClassList = [DAYWRAPPER, YEAREXPANDERWRAPPER];\nconst yearClassList = [DAYWRAPPER];\nconst dailyClassList = [DAYWRAPPER, WEEKWRAPPER, YEAREXPANDERWRAPPER, MONETHEXPANDERWRAPPER];\nconst noEndClassList = [ENDONDATE, ENDONCOUNTWRAPPER];\nconst endOnCountClassList = [ENDONDATE];\nconst endOnDateClassList = [ENDONCOUNTWRAPPER];\n/**\n * Represents the RecurrenceEditor component.\n * ```html\n * <div id=\"recurrence\"></div>\n * ```\n * ```typescript\n * <script>\n *   var recObj = new RecurrenceEditor();\n *   recObj.appendTo(\"#recurrence\");\n * </script>\n * ```\n */\nlet RecurrenceEditor = class RecurrenceEditor extends Component {\n    /**\n     * Constructor for creating the widget\n     *\n     * @param {RecurrenceEditorModel} options Accepts the recurrence editor model properties to initiate the rendering\n     * @param {string | HTMLElement} element Accepts the DOM element reference\n     */\n    constructor(options, element) {\n        super(options, element);\n        // eslint-disable-next-line @typescript-eslint/no-explicit-any\n        this.defaultLocale = {\n            none: 'None',\n            daily: 'Daily',\n            weekly: 'Weekly',\n            monthly: 'Monthly',\n            month: 'Month',\n            yearly: 'Yearly',\n            never: 'Never',\n            until: 'Until',\n            count: 'Count',\n            first: 'First',\n            second: 'Second',\n            third: 'Third',\n            fourth: 'Fourth',\n            last: 'Last',\n            repeat: 'Repeat',\n            repeatEvery: 'Repeat every',\n            on: 'Repeat On',\n            end: 'End',\n            onDay: 'Day',\n            days: 'Day(s)',\n            weeks: 'Week(s)',\n            months: 'Month(s)',\n            years: 'Year(s)',\n            every: 'every',\n            summaryTimes: 'time(s)',\n            summaryOn: 'on',\n            summaryUntil: 'until',\n            summaryRepeat: 'Repeats',\n            summaryDay: 'day(s)',\n            summaryWeek: 'week(s)',\n            summaryMonth: 'month(s)',\n            summaryYear: 'year(s)',\n            monthWeek: 'Month Week',\n            monthPosition: 'Month Position',\n            monthExpander: 'Month Expander',\n            yearExpander: 'Year Expander',\n            repeatInterval: 'Repeat Interval'\n        };\n        this.renderStatus = false;\n        this.dayButtons = [];\n        this.monthButtons = [];\n    }\n    startState(freq, endOn, startDate) {\n        this.showFormElement();\n        this.updateForm(freq);\n        this.freshOnEndForm();\n        this.updateEndOnForm(endOn);\n        this.selectMonthDay(startDate);\n        this.updateUntilDate(startDate);\n        this.onMonthDay.setProperties({ checked: true });\n    }\n    preRender() {\n        this.localeObj = new L10n(this.getModuleName(), this.defaultLocale, this.locale);\n        this.calendarUtil = getCalendarUtil(this.calendarMode);\n    }\n    applyCustomClass(cssClass) {\n        if (cssClass) {\n            addClass([this.element], cssClass.split(' '));\n        }\n    }\n    initialize() {\n        addClass([this.element], 'e-' + this.getModuleName());\n        this.renderComponent();\n        if (!isNullOrUndefined(this.value) && this.value !== '') {\n            this.setRecurrenceRule(this.value);\n        }\n        else {\n            if (!isNullOrUndefined(this.repeatType.value)) {\n                this.startState(this.repeatType.value.toString().toUpperCase(), NEVER, this.startDate);\n                this.updateForm(this.repeatType.value.toString());\n            }\n            if (this.selectedType > 0) {\n                this.setProperties({ value: this.getRecurrenceRule() }, false);\n            }\n        }\n        this.applyCustomClass(this.cssClass);\n    }\n    triggerChangeEvent() {\n        if (this.renderStatus) {\n            const value = this.getRecurrenceRule();\n            this.trigger('change', { value: value }, (args) => this.setProperties({ value: args.value }, false));\n        }\n    }\n    resetDayButton() {\n        const elements = [].slice.call(this.element.querySelectorAll('.' + DAYWRAPPER + ' button'));\n        elements.forEach((element) => removeClass([element], [ACTIVE, PRIMARY]));\n    }\n    daySelection(dayIndex) {\n        this.resetDayButton();\n        const days = [0, 1, 2, 3, 4, 5, 6];\n        this.rotateArray(days, this.firstDayOfWeek);\n        const element = this.element.querySelector('.' + DAYWRAPPER + ' button[data-index=\"' + days.indexOf(dayIndex) + '\"]');\n        if (element) {\n            addClass([element], [ACTIVE, PRIMARY]);\n        }\n    }\n    rtlClass(status) {\n        if (status) {\n            addClass([this.element], RTLCLASS);\n        }\n        else {\n            removeClass([this.element], RTLCLASS);\n        }\n    }\n    updateUntilDate(date) {\n        const tempDate = new Date(date.getTime());\n        tempDate.setDate(tempDate.getDate() + 60);\n        this.untilDateObj.setProperties({ value: tempDate });\n    }\n    selectMonthDay(date) {\n        const weekday = [KEYSUNDAY, KEYMONDAY, KEYTUESDAY, KEYWEDNESDAY, KEYTHURSDAY, KEYFRIDAY, KEYSATURDAY];\n        this.monthDate.setProperties({ value: this.calendarUtil.getDate(date) });\n        this.monthWeekDays.setProperties({ value: valueData[weekday[date.getDay()]] });\n        this.monthValue.setProperties({ value: '' + this.calendarUtil.getMonth(date) });\n        this.monthWeekPos.setProperties({ value: this.getDayPosition(date) });\n        this.daySelection(date.getDay());\n    }\n    updateForm(state) {\n        this.repeatType.setProperties({ value: state });\n        const end = this.element.querySelector('.' + ENDON);\n        if (state === DAILY) {\n            classList(end, [FORMLEFT], [FORMRIGHT]);\n        }\n        else {\n            classList(end, [FORMRIGHT], [FORMLEFT]);\n        }\n        switch (state) {\n            case NONE:\n                neverClassList.forEach((className) => addClass([this.element.querySelector('.' + className)], HIDEWRAPPER));\n                break;\n            case WEEKLY:\n                weekClassList.forEach((className) => addClass([this.element.querySelector('.' + className)], HIDEWRAPPER));\n                break;\n            case MONTHLY:\n                monthClassList.forEach((className) => addClass([this.element.querySelector('.' + className)], HIDEWRAPPER));\n                break;\n            case YEARLY:\n                yearClassList.forEach((className) => addClass([this.element.querySelector('.' + className)], HIDEWRAPPER));\n                break;\n            case DAILY:\n                dailyClassList.forEach((className) => addClass([this.element.querySelector('.' + className)], HIDEWRAPPER));\n                break;\n        }\n    }\n    updateEndOnForm(state) {\n        this.endType.setProperties({ value: state });\n        switch (state) {\n            case NEVER:\n                noEndClassList.forEach((className) => addClass([this.element.querySelector('.' + className)], HIDEWRAPPER));\n                break;\n            case UNTIL$1:\n                endOnDateClassList.forEach((className) => addClass([this.element.querySelector('.' + className)], HIDEWRAPPER));\n                break;\n            case COUNT:\n                endOnCountClassList.forEach((className) => addClass([this.element.querySelector('.' + className)], HIDEWRAPPER));\n                break;\n        }\n    }\n    freshOnEndForm() {\n        noEndClassList.forEach((className) => {\n            const element = this.element.querySelector('.' + className);\n            if (element) {\n                removeClass([element], HIDEWRAPPER);\n            }\n        });\n    }\n    showFormElement() {\n        neverClassList.forEach((className) => {\n            const hideElement = this.element.querySelector('.' + className);\n            if (hideElement) {\n                removeClass([hideElement], HIDEWRAPPER);\n            }\n        });\n    }\n    renderDropdowns() {\n        // eslint-disable-next-line @typescript-eslint/no-this-alias\n        const self = this;\n        this.repeatType = new DropDownList({\n            //set the data to dataSource property\n            dataSource: this.getRepeatData(),\n            floatLabelType: 'Always',\n            enableRtl: this.enableRtl,\n            index: this.selectedType,\n            fields: {\n                text: TEXTFIELD,\n                value: VALUEFIELD\n            },\n            placeholder: this.localeObj.getConstant(REPEAT),\n            htmlAttributes: { 'title': this.localeObj.getConstant(REPEAT) },\n            change: (args) => {\n                self.setProperties({ selectedType: this.frequencies.indexOf(args.value) }, false);\n                self.element.querySelector('.' + REPEATCONTENT).innerHTML =\n                    self.localeObj.getConstant(contentType[args.value]);\n                self.showFormElement();\n                self.updateForm(args.value);\n                self.resetFormValues();\n                self.triggerChangeEvent();\n            }\n        });\n        // set placeholder to DropDownList input element\n        this.repeatType.appendTo(this.element.querySelector('.' + REPEATELEMENT));\n        this.endType = new DropDownList({\n            dataSource: this.getEndData(),\n            popupWidth: this.getPopupWidth(),\n            enableRtl: this.enableRtl,\n            index: 1,\n            fields: {\n                text: TEXTFIELD,\n                value: VALUEFIELD\n            },\n            change: (args) => {\n                self.freshOnEndForm();\n                self.updateEndOnForm(args.value);\n                self.resetFormValues();\n                self.triggerChangeEvent();\n            }\n        });\n        this.endType.appendTo(this.element.querySelector('.' + ENDONELEMENT));\n        // eslint-disable-next-line @typescript-eslint/ban-types\n        const renderDropDownList = (dropDownData) => {\n            return new DropDownList({\n                dataSource: dropDownData,\n                popupWidth: this.getPopupWidth(),\n                enableRtl: this.enableRtl,\n                fields: {\n                    text: TEXTFIELD,\n                    value: VALUEFIELD\n                },\n                index: 1,\n                // eslint-disable-next-line @typescript-eslint/no-unused-vars\n                change: (args) => {\n                    self.onWeekDay.setProperties({ checked: true });\n                    self.resetFormValues();\n                    self.triggerChangeEvent();\n                }\n            });\n        };\n        this.monthWeekPos = renderDropDownList(this.getMonthPosData());\n        this.monthWeekPos.appendTo(this.element.querySelector('.' + MONTHPOS));\n        this.monthWeekDays = renderDropDownList(this.getDayData('wide'));\n        this.monthWeekDays.appendTo(this.element.querySelector('.' + MONTHWEEK));\n        this.monthValue = new DropDownList({\n            dataSource: this.getMonthData(),\n            fields: {\n                text: TEXTFIELD,\n                value: VALUEFIELD\n            },\n            enableRtl: this.enableRtl,\n            index: 7,\n            // eslint-disable-next-line @typescript-eslint/no-unused-vars\n            change: (args) => {\n                self.resetFormValues();\n                self.triggerChangeEvent();\n            }\n        });\n        this.monthValue.appendTo(this.element.querySelector('.' + YEAREXPANDERELEMENT));\n    }\n    setDefaultValue() {\n        const formelement = [].slice.call(this.element.querySelectorAll('.e-control .e-numerictextbox'));\n        for (const element of formelement) {\n            const instance = element.ej2_instances[0];\n            if (instance.element.classList.contains(REPEATINTERVAL)) {\n                instance.value = 1;\n                instance.dataBind();\n            }\n            else if (instance.element.classList.contains(ENDONCOUNT)) {\n                instance.value = 10;\n                instance.dataBind();\n            }\n        }\n    }\n    resetFormValues() {\n        const recurreneElement = [].slice.call(this.element.querySelectorAll('.e-control [type=\"text\"]'));\n        for (const element of recurreneElement) {\n            let instance;\n            if (element.classList.contains('e-datepicker')) {\n                instance = element.ej2_instances[0];\n                if (instance.value) {\n                    // eslint-disable-next-line no-self-assign\n                    instance.value = instance.value;\n                    instance.dataBind();\n                }\n                else {\n                    this.updateUntilDate(this.startDate);\n                }\n            }\n            else if (element.classList.contains('e-dropdownlist')) {\n                instance = element.ej2_instances[0];\n                instance.index = instance.index || 0;\n                instance.dataBind();\n            }\n            else if (element.classList.contains('e-numerictextbox')) {\n                instance = element.ej2_instances[0];\n                let value;\n                if (instance.element.classList.contains(REPEATINTERVAL)) {\n                    value = 1;\n                }\n                else if (instance.element.classList.contains(ENDONCOUNT)) {\n                    value = 10;\n                }\n                else {\n                    value = this.startDate.getDate();\n                }\n                instance.value = instance.value || value;\n                instance.dataBind();\n            }\n        }\n    }\n    getPopupWidth() {\n        return Browser.isDevice ? '100%' : 'auto';\n    }\n    renderDatePickers() {\n        // eslint-disable-next-line @typescript-eslint/no-this-alias\n        const self = this;\n        this.untilDateObj = new DatePicker({\n            firstDayOfWeek: this.firstDayOfWeek,\n            enableRtl: this.enableRtl,\n            locale: this.locale,\n            min: this.minDate,\n            max: this.maxDate,\n            format: (isNullOrUndefined(this.dateFormat) ? this.getFormat('dateFormats') : this.dateFormat),\n            change: (args) => {\n                if (args.value) {\n                    self.triggerChangeEvent();\n                }\n            }\n        });\n        this.untilDateObj.appendTo(this.element.querySelector('.' + UNTILDATE));\n    }\n    getFormat(formatType) {\n        let format;\n        if (this.locale === 'en' || this.locale === 'en-US') {\n            format = getValue(formatType + '.short', getDefaultDateObject(this.getCalendarMode()));\n        }\n        else {\n            format = getValue('main.' + '' + this.locale + '.dates.calendars.' + this.getCalendarMode() + '.' + formatType + '.short', cldrData);\n        }\n        return format;\n    }\n    dayButtonRender() {\n        const btns = [].slice.call(this.element.querySelectorAll('.' + DAYWRAPPER + ' button'));\n        // eslint-disable-next-line @typescript-eslint/no-this-alias\n        const self = this;\n        for (const btn of btns) {\n            const button = new Button({ isToggle: true, enableRtl: this.enableRtl }, btn);\n            this.dayButtons.push(button);\n            EventHandler.add(btn, 'click', (args) => {\n                const btns = [].slice.call(this.element.querySelectorAll('.' + DAYWRAPPER + ' button.' + PRIMARY));\n                const element = args.target;\n                if (!element.classList.contains(PRIMARY)) {\n                    addClass([element], PRIMARY);\n                    self.triggerChangeEvent();\n                }\n                else if (btns.length > 1) {\n                    removeClass([element], PRIMARY);\n                    self.triggerChangeEvent();\n                }\n            });\n        }\n    }\n    radioButtonRender() {\n        // eslint-disable-next-line @typescript-eslint/no-this-alias\n        const self = this;\n        this.onMonthDay = new RadioButton({\n            label: this.localeObj.getConstant(RADIOLABEL),\n            enableRtl: this.enableRtl,\n            name: 'monthType',\n            value: 'day',\n            change: () => {\n                self.resetFormValues();\n                self.triggerChangeEvent();\n            }\n        });\n        this.onMonthDay.appendTo(this.element.querySelector('.' + MONTHEXPANDERELEMENT));\n        this.monthButtons.push(this.onMonthDay);\n        this.onWeekDay = new RadioButton({\n            label: this.localeObj.getConstant('monthExpander'),\n            cssClass: 'e-month-type',\n            name: 'monthType',\n            enableRtl: this.enableRtl,\n            value: 'daypos',\n            change: () => {\n                self.resetFormValues();\n                self.triggerChangeEvent();\n            }\n        });\n        this.onWeekDay.appendTo(this.element.querySelector('.' + MONTHEXPANNDERELEM));\n        this.monthButtons.push(this.onWeekDay);\n    }\n    numericTextboxRender() {\n        // eslint-disable-next-line @typescript-eslint/no-this-alias\n        const self = this;\n        this.recurrenceCount = new NumericTextBox({\n            value: 10,\n            format: '#',\n            enableRtl: this.enableRtl,\n            min: 1,\n            max: 999,\n            change: () => {\n                self.triggerChangeEvent();\n            }\n        });\n        this.recurrenceCount.appendTo(this.element.querySelector('.' + ENDONCOUNT));\n        this.monthDate = new NumericTextBox({\n            value: 1,\n            format: '#',\n            enableRtl: this.enableRtl,\n            min: 1,\n            max: 31,\n            change: () => {\n                self.onMonthDay.setProperties({ checked: true });\n                self.triggerChangeEvent();\n            }\n        });\n        this.monthDate.appendTo(this.element.querySelector('.' + MONTHDAYWRAPPER));\n        this.repeatInterval = new NumericTextBox({\n            value: 1,\n            format: '#',\n            min: 1,\n            max: 999,\n            enableRtl: this.enableRtl,\n            floatLabelType: 'Always',\n            placeholder: this.localeObj.getConstant(REPEATEVERY),\n            change: () => {\n                self.triggerChangeEvent();\n            }\n        });\n        this.repeatInterval.appendTo(this.element.querySelector('.' + REPEATINTERVAL));\n    }\n    renderComponent() {\n        this.setTemplate();\n        this.renderDropdowns();\n        this.renderDatePickers();\n        this.dayButtonRender();\n        this.radioButtonRender();\n        this.numericTextboxRender();\n    }\n    rotateArray(data, count) {\n        let temp;\n        for (let index = 0; index < count; index++) {\n            temp = data.shift();\n            data.push(temp);\n        }\n    }\n    getEndData() {\n        const endData = [NEVER, UNTIL$1, COUNT];\n        // eslint-disable-next-line @typescript-eslint/no-this-alias\n        const self = this;\n        const dataSource = [];\n        endData.forEach((data) => {\n            dataSource.push({ text: self.localeObj.getConstant(data), value: data });\n        });\n        return dataSource;\n    }\n    getDayPosition(date) {\n        let temp = new Date(date.getTime());\n        let endDate = new Date(date.getTime());\n        const day = date.getDay();\n        const positionCollection = [];\n        temp = this.calendarUtil.getMonthStartDate(temp);\n        endDate = this.calendarUtil.getMonthEndDate(endDate);\n        while (temp < endDate) {\n            if (temp.getDay() === day) {\n                positionCollection.push(temp.getTime());\n            }\n            temp.setDate(temp.getDate() + 1);\n        }\n        if (positionCollection.indexOf(date.getTime()) === positionCollection.length - 1) {\n            return -1;\n        }\n        return (positionCollection.indexOf(date.getTime()) + 1);\n    }\n    getRepeatData() {\n        const data = [];\n        // eslint-disable-next-line @typescript-eslint/no-this-alias\n        const self = this;\n        this.frequencies.forEach((element) => {\n            const textValue = (element === NONE) ? NEVER : element;\n            data.push({ text: self.localeObj.getConstant(textValue), value: element });\n        });\n        return data;\n    }\n    getMonthPosData() {\n        const monthpos = [FIRST, SECOND, THIRD, FOURTH, LAST];\n        const monthposValue = {\n            first: 1,\n            second: 2,\n            third: 3,\n            fourth: 4,\n            last: -1\n        };\n        // eslint-disable-next-line @typescript-eslint/no-this-alias\n        const self = this;\n        const dataSource = [];\n        monthpos.forEach((data) => {\n            dataSource.push({ text: self.localeObj.getConstant(data), value: monthposValue[data] });\n        });\n        return dataSource;\n    }\n    getDayData(format) {\n        const weekday = [KEYSUNDAY, KEYMONDAY, KEYTUESDAY, KEYWEDNESDAY, KEYTHURSDAY, KEYFRIDAY, KEYSATURDAY];\n        const dayData = [];\n        let cldrObj;\n        this.rotateArray(weekday, this.firstDayOfWeek);\n        if (this.locale === 'en' || this.locale === 'en-US') {\n            const nameSpaceString = 'days.stand-alone.';\n            cldrObj = (getValue(nameSpaceString + format, getDefaultDateObject(this.getCalendarMode())));\n        }\n        else {\n            const nameSpaceString = 'main.' + '' + this.locale + '.dates.calendars.' + this.getCalendarMode() + '.days.stand-alone.' + format;\n            cldrObj = (getValue(nameSpaceString, cldrData));\n        }\n        for (const obj of weekday) {\n            const day = getValue(obj, cldrObj);\n            dayData.push({ text: format === 'narrow' ? day : capitalizeFirstWord(day, 'single'), value: valueData[obj] });\n        }\n        return dayData;\n    }\n    getMonthData() {\n        const monthData = [];\n        let cldrObj;\n        if (this.locale === 'en' || this.locale === 'en-US') {\n            const nameSpaceString = 'months.stand-alone.wide';\n            cldrObj = (getValue(nameSpaceString, getDefaultDateObject(this.getCalendarMode())));\n        }\n        else {\n            const nameSpaceString = 'main.' + '' + this.locale + '.dates.calendars.' + this.getCalendarMode() + '.months.stand-alone.wide';\n            cldrObj = (getValue(nameSpaceString, cldrData));\n        }\n        for (const obj of Object.keys(cldrObj)) {\n            monthData.push({\n                text: capitalizeFirstWord(getValue(obj, cldrObj), 'single'),\n                value: obj\n            });\n        }\n        return monthData;\n    }\n    setTemplate() {\n        const dayData = this.getDayData('narrow');\n        const fullDay = this.getDayData('wide');\n        this.element.innerHTML = '<div class=\"' + HEADER + '\">' +\n            '<div class=\"' + INPUTWARAPPER + ' ' + FORMLEFT + '\">' +\n            '<input type=\"text\" tabindex=\"0\" class=\"' + REPEATELEMENT +\n            '\"label=\"' + REPEATELEMENT.substr(2) + '\" />' +\n            '</div><div class=\"' + INPUTWARAPPER + ' ' +\n            INTERVALCLASS + ' ' + FORMRIGHT + '\"><table  class=\"' + RECURRENCETABLE + ' ' + REPEATCONTENTWRAPPER + '\"><tr>' +\n            '<td><input type=\"text\" tabindex=\"0\" class=\"' + REPEATINTERVAL +\n            '\"title=\"' + this.localeObj.getConstant('repeatEvery') + '\" /></td>' +\n            '<td><span class=\"' + REPEATCONTENT + '\"></span></td>' +\n            '</tr></table></div><div class=\"' + INPUTWARAPPERSIDE + ' ' + DAYWRAPPER + ' ' + FORMLEFT + '\">' +\n            '<div class=' + WEEKEXPANDERLABEL + '>' + this.localeObj.getConstant(ON$1) + '</div>' +\n            '<button type=\"button\" class=\"e-round\" data-index=\"0\" title=\"' + fullDay[0].text + '\">' + dayData[0].text + '</button>' +\n            '<button type=\"button\" class=\"e-round\" data-index=\"1\" title=\"' + fullDay[1].text + '\">' + dayData[1].text + '</button>' +\n            '<button type=\"button\" class=\"e-round\" data-index=\"2\" title=\"' + fullDay[2].text + '\">' + dayData[2].text + '</button>' +\n            '<button type=\"button\" class=\"e-round\" data-index=\"3\" title=\"' + fullDay[3].text + '\">' + dayData[3].text + '</button>' +\n            '<button type=\"button\" class=\"e-round\" data-index=\"4\" title=\"' + fullDay[4].text + '\">' + dayData[4].text + '</button>' +\n            '<button type=\"button\" class=\"e-round\" data-index=\"5\" title=\"' + fullDay[5].text + '\">' + dayData[5].text + '</button>' +\n            '<button type=\"button\" class=\"e-round\" data-index=\"6\" title=\"' + fullDay[6].text + '\">' + dayData[6].text + '</button></div>' +\n            '<div class=\"' + INPUTWARAPPERSIDE + ' ' + WEEKWRAPPER + ' ' + FORMLEFT + '\">' +\n            '<div class=' + MONTHEXPANDERLABEL + '>' + this.localeObj.getConstant(ON$1) + '</div>' +\n            '<div class=\"' + YEAREXPANDERWRAPPER + '\">' +\n            '<input class=\"' + YEAREXPANDERELEMENT + '\" type=\"text\" tabindex=\"0\" title=\"' +\n            this.localeObj.getConstant('yearExpander') + '\"/>' +\n            '</div>' +\n            '<div class=\"' + MONETHEXPANDERWRAPPER + '\">' +\n            '<table class=\"' + RECURRENCETABLE + ' ' + MONETHEXPANDWRAPPER + '\"><tr><td>' +\n            '<div class=\"' + INPUTWARAPPER + ' ' + MONTHEXPANDERCHECKBOXWRAPPER + '\">' +\n            '<input class=\"' + MONTHEXPANDERELEMENT + '\"title=\"' + this.localeObj.getConstant('monthExpander') + '\" type=\"radio\">' +\n            '</div></td>' +\n            '<td colspan=\"2\"><div class=\"' + INPUTWARAPPER + ' ' + MONTHDAYELEMENT + '\">' +\n            '<input type=\"text\" tabindex=\"0\" class=\"' + MONTHDAYWRAPPER + '\"title=\"' +\n            this.localeObj.getConstant('on') + '\" />' +\n            '</div></td></tr>' +\n            '<tr><td>' +\n            '<div class=\"' + INPUTWARAPPER + ' ' + MONTHEXPANDERCHECKBOXWRAPPER + '\" style=\"min-width: 30px;margin-bottom:18px;\">' +\n            '<input class=\"' + MONTHEXPANNDERELEM + '\"title=\"' + this.localeObj.getConstant('monthExpander') + '\" type=\"radio\">' +\n            '</div></td>' +\n            '<td><div class=\"' + INPUTWARAPPER + ' ' + WEEKPOSITION + '\" >' +\n            '<input type=\"text\" tabindex=\"0\" class=\"' + MONTHPOS + '\"title=\"' + this.localeObj.getConstant('monthPosition') + '\" />' +\n            '</div></td>' +\n            '<td><div class=\"' + INPUTWARAPPER + '\" style=\"min-width: 120px;\">' +\n            '<input type=\"text\" tabindex=\"0\" class=\"' + MONTHWEEK + '\"title=\"' + this.localeObj.getConstant('monthWeek') + '\" />' +\n            '</div></td></tr></table>' +\n            '</div></div>' +\n            '<div class=\"' + INPUTWARAPPERSIDE + ' ' + ENDON + ' ' + FORMRIGHT + '\">' +\n            '<div class=' + ENDONLABEL + '>' + this.localeObj.getConstant(END) + '</div>' +\n            '<div class=\"' + INPUTWARAPPER + ' ' + ENDONLEFT + '\">' +\n            '<input type=\"text\" tabindex=\"0\" class=\"' + ENDONELEMENT + '\"title=\"' + this.localeObj.getConstant(END) + '\" />' +\n            '</div>' +\n            '<div class=\"' + INPUTWARAPPER + ' ' + ENDONDATE + '\" >' +\n            '<input type=\"text\" tabindex=\"0\" class=\"' + UNTILDATE + '\"title=\"' + this.localeObj.getConstant(UNTIL$1) + '\" />' +\n            '</div>' +\n            '<div class=\"' + INPUTWARAPPER + ' ' + ENDONCOUNTWRAPPER + '\">' +\n            '<input type=\"text\" tabindex=\"0\" class=\"' + ENDONCOUNT + '\"title=\"' + this.localeObj.getConstant(COUNT) + '\" />' +\n            '</div></div>' +\n            '</div></div>';\n    }\n    getSelectedDaysData() {\n        let ruleData = RULEBYDAY + EQUAL;\n        const elements = [].slice.call(this.element.querySelectorAll('.' + DAYWRAPPER + ' button.' + PRIMARY));\n        const weekday = [RULESUNDAY, RULEMONDAY, RULETUESDAY, RULEWEDNESDAY, RULETHURSDAY, RULEFRIDAY, RULESATURDAY];\n        this.rotateArray(weekday, this.firstDayOfWeek);\n        for (let index = 0; index < elements.length; index++) {\n            ruleData += weekday[parseInt(elements[index].getAttribute('data-index'), 10)] + (index === (elements.length - 1) ? '' : COMMA);\n        }\n        return ruleData + SEMICOLON;\n    }\n    getSelectedMonthData() {\n        let ruleData;\n        if (this.onWeekDay.checked) {\n            ruleData = RULEBYDAY + EQUAL + this.monthWeekDays.value + SEMICOLON\n                + RULESETPOS + EQUAL + this.monthWeekPos.value + SEMICOLON;\n        }\n        else {\n            ruleData = RULEBYMONTHDAY + EQUAL + this.monthDate.value + SEMICOLON;\n        }\n        return ruleData;\n    }\n    getIntervalData() {\n        return RULEINTERVAL + EQUAL + this.repeatInterval.value + SEMICOLON;\n    }\n    getEndOnCount() {\n        return RULECOUNT + EQUAL + this.recurrenceCount.value + SEMICOLON;\n    }\n    getYearMonthRuleData() {\n        return RULEBYMONTH + EQUAL + this.monthValue.value + SEMICOLON;\n    }\n    updateWeekButton(keys) {\n        const weekday = [RULESUNDAY, RULEMONDAY, RULETUESDAY, RULEWEDNESDAY, RULETHURSDAY, RULEFRIDAY, RULESATURDAY];\n        this.rotateArray(weekday, this.firstDayOfWeek);\n        for (const obj of this.dayButtons) {\n            const index = parseInt(obj.element.getAttribute('data-index'), 10);\n            if (keys.indexOf(weekday[index]) !== -1) {\n                obj.setProperties({ isPrimary: true });\n            }\n            else {\n                obj.setProperties({ isPrimary: false });\n            }\n        }\n    }\n    updateMonthUI() {\n        if (this.ruleObject.monthDay.length) {\n            this.monthDate.setProperties({ value: this.ruleObject.monthDay[0] });\n            this.onMonthDay.setProperties({ checked: true });\n        }\n        else {\n            this.onWeekDay.setProperties({ checked: true });\n            this.monthWeekPos.setProperties({ value: this.ruleObject.setPosition });\n            for (const key of Object.keys(valueData)) {\n                if (valueData[key] === this.ruleObject.day[0]) {\n                    this.monthWeekDays.setProperties({ value: this.ruleObject.day[0] });\n                    break;\n                }\n            }\n        }\n    }\n    updateUI(repeat, state) {\n        this.repeatInterval.setProperties({ value: this.ruleObject.interval });\n        switch (state) {\n            case UNTIL$1:\n                this.untilDateObj.setProperties({ value: this.ruleObject.until });\n                break;\n            case COUNT:\n                this.recurrenceCount.setProperties({ value: this.ruleObject.count });\n                break;\n        }\n        switch (repeat) {\n            case WEEKLY:\n                this.updateWeekButton(this.ruleObject.day);\n                break;\n            case YEARLY:\n                this.monthValue.setProperties({ index: (this.ruleObject.month[0] - 1) });\n                this.updateMonthUI();\n                break;\n            case MONTHLY:\n                this.updateMonthUI();\n                break;\n        }\n    }\n    getUntilData() {\n        if (!this.untilDateObj.value) {\n            return '';\n        }\n        const tempStr = getRecurrenceStringFromDate(this.untilDateObj.value);\n        return RULEUNTIL + EQUAL + tempStr + SEMICOLON;\n    }\n    destroyComponents() {\n        if (!this.recurrenceCount.isDestroyed) {\n            this.recurrenceCount.destroy();\n        }\n        if (!this.monthDate.isDestroyed) {\n            this.monthDate.destroy();\n        }\n        if (!this.repeatInterval.isDestroyed) {\n            this.repeatInterval.destroy();\n        }\n        if (!this.untilDateObj.isDestroyed) {\n            this.untilDateObj.destroy();\n        }\n        if (!this.repeatType.isDestroyed) {\n            this.repeatType.destroy();\n        }\n        if (!this.endType.isDestroyed) {\n            this.endType.destroy();\n        }\n        if (!this.monthWeekPos.isDestroyed) {\n            this.monthWeekPos.destroy();\n        }\n        if (!this.monthWeekDays.isDestroyed) {\n            this.monthWeekDays.destroy();\n        }\n        if (!this.monthValue.isDestroyed) {\n            this.monthValue.destroy();\n        }\n        this.dayButtons.forEach((element) => {\n            if (!element.isDestroyed) {\n                element.destroy();\n            }\n        });\n        this.dayButtons = [];\n        this.monthButtons.forEach((element) => {\n            if (!element.isDestroyed) {\n                element.destroy();\n            }\n        });\n        this.monthButtons = [];\n    }\n    resetFields() {\n        this.startState(NONE, NEVER, this.startDate);\n        this.setDefaultValue();\n    }\n    updateRuleUntilDate(startDate) {\n        if (this.untilDateObj.value && startDate) {\n            const untilDate = this.untilDateObj.value;\n            const newUntilDate = new Date(untilDate.getFullYear(), untilDate.getMonth(), untilDate.getDate(), startDate.getHours(), startDate.getMinutes(), startDate.getMilliseconds());\n            this.untilDateObj.setProperties({ value: newUntilDate });\n        }\n    }\n    getCalendarMode() {\n        return this.calendarMode.toLowerCase();\n    }\n    getRuleSummary(rule = this.getRecurrenceRule()) {\n        return generateSummary(rule, this.localeObj, this.locale, this.calendarMode);\n    }\n    getRecurrenceDates(startDate, rule, excludeDate, maximumCount, viewDate) {\n        viewDate = isNullOrUndefined(viewDate) ? this.startDate : viewDate;\n        return generate(startDate, rule, excludeDate, this.firstDayOfWeek, maximumCount, viewDate, this.calendarMode);\n    }\n    getRecurrenceRule() {\n        let ruleData = RULEFREQ + EQUAL;\n        switch (this.repeatType.value) {\n            case DAILY:\n                ruleData += RULEDAILY + SEMICOLON;\n                break;\n            case WEEKLY:\n                ruleData += RULEWEEKLY + SEMICOLON + this.getSelectedDaysData();\n                break;\n            case MONTHLY:\n                ruleData += RULEMONTHLY + SEMICOLON + this.getSelectedMonthData();\n                break;\n            case YEARLY:\n                ruleData += RULEYEARLY + SEMICOLON + this.getSelectedMonthData() + this.getYearMonthRuleData();\n                break;\n            case NONE:\n                return '';\n        }\n        ruleData += this.getIntervalData();\n        switch (this.endType.value) {\n            case UNTIL$1:\n                ruleData += this.getUntilData();\n                break;\n            case COUNT:\n                ruleData += this.getEndOnCount();\n                break;\n        }\n        return ruleData;\n    }\n    setRecurrenceRule(rule, startDate = this.startDate) {\n        if (!rule) {\n            this.repeatType.setProperties({ value: NONE });\n            return;\n        }\n        this.renderStatus = false;\n        this.ruleObject = extractObjectFromRule(rule);\n        const endon = this.ruleObject.count ? COUNT : (this.ruleObject.until ? UNTIL$1 : NEVER);\n        switch (this.ruleObject.freq) {\n            case RULEDAILY:\n                this.startState(DAILY, endon, startDate);\n                this.updateUI(DAILY, endon);\n                break;\n            case RULEWEEKLY:\n                this.startState(WEEKLY, endon, startDate);\n                this.updateUI(WEEKLY, endon);\n                break;\n            case RULEMONTHLY:\n                this.startState(MONTHLY, endon, startDate);\n                this.updateUI(MONTHLY, endon);\n                break;\n            case RULEYEARLY:\n                this.startState(YEARLY, endon, startDate);\n                this.updateUI(YEARLY, endon);\n                break;\n        }\n        this.renderStatus = true;\n        this.triggerChangeEvent();\n    }\n    /**\n     * Destroys the widget.\n     *\n     * @returns {void}\n     */\n    destroy() {\n        this.destroyComponents();\n        super.destroy();\n        let removeClasses = ['e-' + this.getModuleName()];\n        if (this.cssClass) {\n            removeClasses = removeClasses.concat(this.cssClass.split(' '));\n        }\n        removeClass([this.element], removeClasses);\n        while (this.element.firstElementChild) {\n            this.element.removeChild(this.element.firstElementChild);\n        }\n    }\n    /**\n     * Get component name.\n     *\n     * @returns {string} Returns the module name\n     * @private\n     */\n    getModuleName() {\n        return 'recurrenceeditor';\n    }\n    /**\n     * Get the properties to be maintained in the persisted state.\n     *\n     * @returns {string} Returns the persisted state\n     */\n    getPersistData() {\n        return this.addOnPersist([]);\n    }\n    /**\n     * Initialize the control rendering\n     *\n     * @returns {void}\n     * @private\n     */\n    render() {\n        this.initialize();\n        this.rtlClass(this.enableRtl);\n        this.renderStatus = true;\n        this.renderComplete();\n    }\n    /**\n     * Called internally, if any of the property value changed.\n     *\n     * @param {RecurrenceEditorModel} newProp Accepts the changed properties new values\n     * @param {RecurrenceEditorModel} oldProp Accepts the changed properties old values\n     * @returns {void}\n     * @private\n     */\n    onPropertyChanged(newProp, oldProp) {\n        for (const prop of Object.keys(newProp)) {\n            switch (prop) {\n                case 'startDate':\n                    this.selectMonthDay(newProp.startDate);\n                    this.updateUntilDate(newProp.startDate);\n                    this.endType.setProperties({ index: 0 });\n                    break;\n                case 'enableRtl':\n                    this.rtlClass(newProp.enableRtl);\n                    break;\n                case 'cssClass':\n                    if (oldProp.cssClass) {\n                        removeClass([this.element], oldProp.cssClass.split(' '));\n                    }\n                    if (newProp.cssClass) {\n                        addClass([this.element], newProp.cssClass.split(' '));\n                    }\n                    break;\n                case 'selectedType':\n                    this.repeatType.setProperties({ index: this.selectedType });\n                    break;\n                case 'minDate':\n                    this.untilDateObj.setProperties({ minDate: this.minDate });\n                    break;\n                case 'maxDate':\n                    this.untilDateObj.setProperties({ maxDate: this.maxDate });\n                    break;\n                case 'value':\n                    if (this.getRecurrenceRule() !== this.value) {\n                        this.setRecurrenceRule(this.value);\n                    }\n                    break;\n                case 'calendarMode':\n                    this.calendarMode = newProp.calendarMode;\n                    this.calendarUtil = getCalendarUtil(newProp.calendarMode);\n                    break;\n                case 'locale':\n                case 'frequencies':\n                case 'firstDayOfWeek':\n                    this.refresh();\n                    break;\n                case 'dateFormat':\n                    this.untilDateObj.setProperties({ format: newProp.dateFormat });\n                    break;\n            }\n        }\n    }\n};\n__decorate$1([\n    Property(['none', 'daily', 'weekly', 'monthly', 'yearly'])\n], RecurrenceEditor.prototype, \"frequencies\", void 0);\n__decorate$1([\n    Property(0)\n], RecurrenceEditor.prototype, \"firstDayOfWeek\", void 0);\n__decorate$1([\n    Property(new Date())\n], RecurrenceEditor.prototype, \"startDate\", void 0);\n__decorate$1([\n    Property()\n], RecurrenceEditor.prototype, \"dateFormat\", void 0);\n__decorate$1([\n    Property('Gregorian')\n], RecurrenceEditor.prototype, \"calendarMode\", void 0);\n__decorate$1([\n    Property()\n], RecurrenceEditor.prototype, \"cssClass\", void 0);\n__decorate$1([\n    Property()\n], RecurrenceEditor.prototype, \"value\", void 0);\n__decorate$1([\n    Property(new Date(1900, 0, 1))\n], RecurrenceEditor.prototype, \"minDate\", void 0);\n__decorate$1([\n    Property(new Date(2099, 11, 31))\n], RecurrenceEditor.prototype, \"maxDate\", void 0);\n__decorate$1([\n    Property(0)\n], RecurrenceEditor.prototype, \"selectedType\", void 0);\n__decorate$1([\n    Event()\n], RecurrenceEditor.prototype, \"change\", void 0);\nRecurrenceEditor = __decorate$1([\n    NotifyPropertyChanges\n], RecurrenceEditor);\n\n/* eslint-disable @typescript-eslint/no-explicit-any */\nconst EVENT_FIELD$1 = 'e-field';\nconst REPEAT_CONTAINER_CLASS = 'e-recurrence-container';\nconst REPEAT_BUTTON_ICON_CLASS = 'e-recurrence-edit';\nconst REPEAT_BUTTON_CLASS = 'e-recurrence-edit-button';\nconst REPEAT_DIALOG_CLASS = 'e-recurrence-dialog';\nconst HIDE_STYLE_CLASS = 'e-hide';\n/**\n * Event editor window\n */\nclass EventWindow {\n    constructor(parent) {\n        this.parent = parent;\n        this.l10n = this.parent.localeObj;\n        this.fields = this.parent.eventFields;\n        this.eventWindowTime = { startTime: new Date(), endTime: new Date() };\n        this.renderEventWindow();\n    }\n    renderEventWindow() {\n        this.element = createElement('div', { id: this.parent.element.id + '_dialog_wrapper' });\n        this.parent.element.appendChild(this.element);\n        const dialogModel = {\n            animationSettings: { effect: 'Zoom' },\n            content: this.getEventWindowContent(),\n            cssClass: EVENT_WINDOW_DIALOG_CLASS,\n            enableRtl: this.parent.enableRtl,\n            height: this.parent.isAdaptive ? '100%' : 'auto',\n            minHeight: '300px',\n            isModal: true,\n            showCloseIcon: this.parent.isAdaptive ? false : true,\n            target: document.body,\n            visible: false,\n            width: '500px',\n            beforeOpen: this.onBeforeOpen.bind(this),\n            beforeClose: this.onBeforeClose.bind(this)\n        };\n        if (this.parent.isAdaptive) {\n            dialogModel.cssClass = EVENT_WINDOW_DIALOG_CLASS + ' ' + DEVICE_CLASS;\n            dialogModel.header = '<div class=\"e-title-header\"><div class=\"e-back-icon e-icons\"></div><div class=\"e-title-text\">' +\n                this.l10n.getConstant('newEvent') + '</div><div class=\"e-save-icon e-icons\"></div></div>';\n        }\n        else {\n            dialogModel.buttons = [{\n                    buttonModel: {\n                        content: this.l10n.getConstant('deleteButton'), cssClass: DELETE_EVENT_CLASS,\n                        disabled: !this.parent.eventSettings.allowDeleting || this.parent.readonly\n                    },\n                    click: this.eventDelete.bind(this)\n                }, {\n                    buttonModel: {\n                        content: this.l10n.getConstant('saveButton'), cssClass: 'e-primary ' + EVENT_WINDOW_SAVE_BUTTON_CLASS,\n                        isPrimary: true, disabled: !this.parent.eventSettings.allowAdding || this.parent.readonly\n                    },\n                    click: this.eventSave.bind(this)\n                }, {\n                    buttonModel: { cssClass: EVENT_WINDOW_CANCEL_BUTTON_CLASS, content: this.l10n.getConstant('cancelButton') },\n                    click: this.dialogClose.bind(this)\n                }];\n            dialogModel.header = '<div class=\"e-title-text\">' + this.l10n.getConstant('newEvent') + '</div>';\n        }\n        this.dialogObject = new Dialog(dialogModel, this.element);\n        if (this.dialogObject.element.querySelector('.e-dlg-closeicon-btn')) {\n            this.dialogObject.element.querySelector('.e-dlg-closeicon-btn').setAttribute('title', this.l10n.getConstant('close'));\n        }\n        addClass([this.element.parentElement], EVENT_WINDOW_DIALOG_CLASS + '-container');\n        if (this.parent.isAdaptive) {\n            EventHandler.add(this.element.querySelector('.' + EVENT_WINDOW_BACK_ICON_CLASS), 'click', this.dialogClose, this);\n            EventHandler.add(this.element.querySelector('.' + EVENT_WINDOW_SAVE_ICON_CLASS), 'click', this.eventSave, this);\n        }\n        EventHandler.add(this.dialogObject.element, 'keydown', this.preventEventSave, this);\n        this.applyFormValidation();\n    }\n    refresh() {\n        this.destroy(true);\n        this.renderEventWindow();\n    }\n    refreshRecurrenceEditor() {\n        if (this.recurrenceEditor) {\n            const recurrenceEditor = this.recurrenceEditor.element;\n            this.recurrenceEditor.destroy();\n            this.createRecurrenceEditor(recurrenceEditor);\n        }\n    }\n    setRecurrenceEditor(recurrenceEditor) {\n        if (this.parent.editorTemplate) {\n            this.recurrenceEditor = recurrenceEditor;\n        }\n    }\n    openEditor(data, type, isEventData, repeatType) {\n        this.parent.currentAction = type;\n        this.parent.removeNewEventElement();\n        if (this.parent.quickPopup) {\n            this.parent.quickPopup.quickPopupHide(true);\n        }\n        this.parent.inlineModule.removeInlineAppointmentElement();\n        if (type === 'Add') {\n            let eventObj = {};\n            this.cellClickAction = !isEventData;\n            this.parent.activeCellsData = data;\n            const event = data;\n            if (this.cellClickAction) {\n                this.convertToEventData(event, eventObj);\n            }\n            else {\n                this.parent.activeCellsData = {\n                    startTime: (event.startTime || event[this.fields.startTime]),\n                    endTime: (event.endTime || event[this.fields.endTime]),\n                    isAllDay: (event.isAllDay || event[this.fields.isAllDay]),\n                    element: event.element,\n                    groupIndex: event.groupIndex\n                };\n                eventObj = event;\n            }\n            data = eventObj;\n        }\n        if (!isNullOrUndefined(this.parent.editorTemplate)) {\n            this.renderFormElements(this.element.querySelector('.e-schedule-form'), data);\n        }\n        if (!this.parent.isAdaptive && isNullOrUndefined(this.parent.editorTemplate)) {\n            removeClass([this.dialogObject.element.querySelector('.e-recurrenceeditor')], DISABLE_CLASS);\n        }\n        if (this.recurrenceEditor) {\n            this.recurrenceEditor.firstDayOfWeek = this.parent.activeViewOptions.firstDayOfWeek;\n        }\n        switch (type) {\n            case 'Add':\n                this.onCellDetailsUpdate(data, repeatType);\n                break;\n            case 'Save':\n            case 'EditOccurrence':\n            case 'EditSeries':\n            case 'EditFollowingEvents':\n                if (type === 'EditOccurrence' && !this.parent.isAdaptive && isNullOrUndefined(this.parent.editorTemplate)) {\n                    addClass([this.dialogObject.element.querySelector('.e-recurrenceeditor')], DISABLE_CLASS);\n                }\n                this.cellClickAction = false;\n                this.onEventDetailsUpdate(data);\n                break;\n        }\n    }\n    setDialogContent() {\n        this.dialogObject.content = this.getEventWindowContent();\n        this.dialogObject.dataBind();\n    }\n    preventEventSave(e) {\n        if (this.parent && !this.parent.allowKeyboardInteraction && e.code === 'Enter') {\n            this.isEnterKey = true;\n        }\n    }\n    onBeforeOpen(args) {\n        const eventProp = {\n            type: 'Editor',\n            data: this.eventData,\n            cancel: false,\n            element: this.element,\n            target: (this.cellClickAction ? this.parent.activeCellsData.element : this.parent.activeEventData.element)\n        };\n        if (this.cellClickAction) {\n            eventProp.duration = this.getSlotDuration();\n        }\n        const saveObj = this.getInstance(EVENT_WINDOW_SAVE_BUTTON_CLASS);\n        if (saveObj) {\n            saveObj.disabled = !(this.cellClickAction ? this.parent.eventSettings.allowAdding : this.parent.eventSettings.allowEditing);\n            saveObj.dataBind();\n        }\n        const deleteObj = this.getInstance(DELETE_EVENT_CLASS);\n        if (deleteObj) {\n            deleteObj.disabled = !this.parent.eventSettings.allowDeleting;\n            deleteObj.dataBind();\n        }\n        const callBackPromise = new Deferred();\n        this.parent.trigger(popupOpen, eventProp, (popupArgs) => {\n            args.cancel = popupArgs.cancel;\n            this.duration = this.cellClickAction ? popupArgs.duration : null;\n            this.refreshDateTimePicker(this.duration);\n            if (this.cellClickAction && popupArgs.duration !== this.getSlotDuration() && isNullOrUndefined(this.parent.editorTemplate)) {\n                const startObj = this.getInstance(EVENT_WINDOW_START_CLASS);\n                const endObj = this.getInstance(EVENT_WINDOW_END_CLASS);\n                endObj.value = new Date(startObj.value.getTime() + (MS_PER_MINUTE * popupArgs.duration));\n                endObj.dataBind();\n            }\n            if (this.parent.editorTemplate && this.element.querySelector('.e-recurrenceeditor') && !this.recurrenceEditor) {\n                this.recurrenceEditor = this.getInstance('e-recurrenceeditor');\n            }\n            callBackPromise.resolve(args);\n        });\n        return callBackPromise;\n    }\n    onBeforeClose(args) {\n        if (args.isInteracted) {\n            this.isCrudAction = false;\n        }\n        const eventProp = {\n            type: 'Editor',\n            event: args.event || this.dialogEvent,\n            data: this.eventCrudData,\n            cancel: false,\n            element: this.element,\n            target: (this.cellClickAction ? this.parent.activeCellsData.element : this.parent.activeEventData.element)\n        };\n        const callBackPromise = new Deferred();\n        this.parent.trigger(popupClose, eventProp, (popupArgs) => {\n            args.cancel = popupArgs.cancel;\n            if (!popupArgs.cancel) {\n                if (this.isCrudAction) {\n                    args.cancel = this.processCrudActions(popupArgs.data);\n                    this.isCrudAction = args.cancel;\n                }\n                if (!this.isCrudAction) {\n                    this.resetForm();\n                    this.parent.eventBase.focusElement(true);\n                    this.eventCrudData = null;\n                }\n            }\n            callBackPromise.resolve(args);\n        });\n        return callBackPromise;\n    }\n    getEventWindowContent() {\n        const container = createElement('div', { className: FORM_CONTAINER_CLASS });\n        const form = createElement('form', {\n            id: this.parent.element.id + 'EditForm',\n            className: FORM_CLASS,\n            attrs: { onsubmit: 'return false;' }\n        });\n        this.renderFormElements(form);\n        container.appendChild(form);\n        return container;\n    }\n    renderFormElements(form, args) {\n        if (!isNullOrUndefined(this.parent.editorTemplate)) {\n            if (args) {\n                if (this.recurrenceEditor) {\n                    this.recurrenceEditor.destroy();\n                    this.recurrenceEditor = null;\n                }\n                this.destroyComponents();\n                const formElements = [].slice.call(form.children);\n                for (const element of formElements) {\n                    remove(element);\n                }\n            }\n            const templateId = this.parent.element.id + '_editorTemplate';\n            const tempEle = [].slice.call(this.parent.getEditorTemplate()(args || {}, this.parent, 'editorTemplate', templateId, false));\n            append(tempEle, form);\n            this.parent.renderTemplates();\n        }\n        else {\n            form.appendChild(this.getDefaultEventWindowContent());\n        }\n    }\n    getDefaultEventWindowContent() {\n        const parentDiv = this.createDivElement(EVENT_WINDOW_DIALOG_PARENT_CLASS);\n        const titleLocationDiv = this.createDivElement(EVENT_WINDOW_TITLE_LOCATION_DIV_CLASS);\n        parentDiv.appendChild(titleLocationDiv);\n        titleLocationDiv.appendChild(this.renderTextBox(SUBJECT_CLASS));\n        titleLocationDiv.querySelector('.' + SUBJECT_CLASS).setAttribute('title', this.parent.editorTitles.subject);\n        titleLocationDiv.appendChild(this.renderTextBox(LOCATION_CLASS));\n        titleLocationDiv.querySelector('.' + LOCATION_CLASS).setAttribute('title', this.parent.editorTitles.location);\n        const startEndDateTimeDiv = this.createDivElement(EVENT_WINDOW_START_END_DIV_CLASS);\n        parentDiv.appendChild(startEndDateTimeDiv);\n        startEndDateTimeDiv.appendChild(this.renderDateTimePicker(EVENT_WINDOW_START_CLASS, this.onTimeChange.bind(this)));\n        startEndDateTimeDiv.querySelector('.' + EVENT_WINDOW_START_CLASS).setAttribute('title', this.parent.editorTitles.startTime);\n        startEndDateTimeDiv.appendChild(this.renderDateTimePicker(EVENT_WINDOW_END_CLASS));\n        startEndDateTimeDiv.querySelector('.' + EVENT_WINDOW_END_CLASS).setAttribute('title', this.parent.editorTitles.endTime);\n        const allDayTimezoneDiv = this.createDivElement(EVENT_WINDOW_ALLDAY_TZ_DIV_CLASS);\n        parentDiv.appendChild(allDayTimezoneDiv);\n        allDayTimezoneDiv.appendChild(this.renderCheckBox(EVENT_WINDOW_ALL_DAY_CLASS));\n        allDayTimezoneDiv.appendChild(this.renderCheckBox(TIME_ZONE_CLASS));\n        const timezoneParentDiv = this.createDivElement(EVENT_WINDOW_TIME_ZONE_DIV_CLASS);\n        parentDiv.appendChild(timezoneParentDiv);\n        timezoneParentDiv.appendChild(this.renderDropDown(EVENT_WINDOW_START_TZ_CLASS));\n        timezoneParentDiv.appendChild(this.renderDropDown(EVENT_WINDOW_END_TZ_CLASS));\n        const repeatParentDiv = this.createDivElement(EVENT_WINDOW_REPEAT_DIV_CLASS);\n        parentDiv.appendChild(repeatParentDiv);\n        const repeatDiv = this.renderCheckBox(EVENT_WINDOW_REPEAT_CLASS);\n        const repeatEditContainer = createElement('span', { className: REPEAT_CONTAINER_CLASS });\n        const button = createElement('button', {\n            className: REPEAT_BUTTON_CLASS,\n            attrs: { type: 'button', 'title': this.l10n.getConstant('editRecurrence') }\n        });\n        this.buttonObj = new Button({ iconCss: REPEAT_BUTTON_ICON_CLASS + ' e-icons', cssClass: 'e-medium ' + this.parent.cssClass });\n        repeatEditContainer.appendChild(button);\n        this.buttonObj.appendTo(button);\n        repeatDiv.appendChild(repeatEditContainer);\n        repeatParentDiv.appendChild(repeatDiv);\n        if (this.parent.isAdaptive) {\n            EventHandler.add(button, 'click', this.loadRecurrenceEditor, this);\n        }\n        else {\n            this.createRecurrenceEditor(parentDiv);\n        }\n        if (this.parent.resourceCollection.length > 0) {\n            const resourceParentDiv = this.createDivElement(EVENT_WINDOW_RESOURCES_DIV_CLASS);\n            for (const resource of this.parent.resourceBase.resourceCollection) {\n                resourceParentDiv.appendChild(this.renderResourceDetails(resource));\n            }\n            parentDiv.appendChild(resourceParentDiv);\n        }\n        const description = this.createDivElement(DESCRIPTION_CLASS + '-row');\n        description.appendChild(this.renderTextBox(DESCRIPTION_CLASS));\n        description.querySelector('.' + DESCRIPTION_CLASS).setAttribute('title', this.parent.editorTitles.description);\n        parentDiv.appendChild(description);\n        const submit = createElement('button', { attrs: { type: 'hidden', title: 'submit', style: 'display:none' } });\n        parentDiv.appendChild(submit);\n        return parentDiv;\n    }\n    createRecurrenceEditor(parentDiv) {\n        const recurrenceEditor = this.createDivElement();\n        parentDiv.appendChild(recurrenceEditor);\n        this.recurrenceEditor = this.renderRecurrenceEditor();\n        this.recurrenceEditor.appendTo(recurrenceEditor);\n        this.updateMinMaxDateToEditor();\n    }\n    createDivElement(className) {\n        return createElement('div', { className: className });\n    }\n    createInputElement(className, fieldName, type) {\n        return createElement(type || 'input', {\n            className: className, attrs: {\n                type: 'text', name: fieldName, value: '', id: fieldName,\n                title: ((this.l10n.getConstant(fieldName.charAt(0).toLowerCase() + fieldName.slice(1))) === '') ?\n                    fieldName : this.l10n.getConstant(fieldName.charAt(0).toLowerCase() + fieldName.slice(1))\n            }\n        });\n    }\n    getSlotDuration() {\n        return this.parent.activeViewOptions.timeScale.interval / this.parent.activeViewOptions.timeScale.slotCount;\n    }\n    renderDateTimePicker(value, changeEvent) {\n        const dateTimeDiv = this.createDivElement(value + '-container');\n        const fieldName = this.getFieldName(value);\n        const dateTimeInput = this.createInputElement(value + ' ' + EVENT_FIELD$1, fieldName);\n        dateTimeDiv.appendChild(dateTimeInput);\n        const dateTimePicker = new DateTimePicker({\n            change: changeEvent,\n            firstDayOfWeek: this.parent.activeViewOptions.firstDayOfWeek,\n            calendarMode: this.parent.calendarMode,\n            min: this.parent.minDate,\n            max: new Date(new Date(+this.parent.maxDate).setHours(23, 59, 59)),\n            cssClass: this.parent.cssClass,\n            enableRtl: this.parent.enableRtl,\n            locale: this.parent.locale,\n            floatLabelType: 'Always',\n            timeFormat: this.parent.activeViewOptions.timeFormat,\n            format: (isNullOrUndefined(this.parent.dateFormat) ?\n                this.getFormat('dateFormats') : this.parent.dateFormat) + ' ' + this.parent.activeViewOptions.timeFormat,\n            placeholder: this.getFieldLabel(value),\n            step: this.getSlotDuration(),\n            width: '100%'\n        });\n        dateTimePicker.appendTo(dateTimeInput);\n        return dateTimeDiv;\n    }\n    refreshDateTimePicker(duration) {\n        const elementSelector = '.' + EVENT_WINDOW_START_CLASS + ',.' + EVENT_WINDOW_END_CLASS;\n        const startEndElement = [].slice.call(this.element.querySelectorAll(elementSelector));\n        for (const element of startEndElement) {\n            const instance = element.ej2_instances[0];\n            instance.firstDayOfWeek = this.parent.activeViewOptions.firstDayOfWeek;\n            instance.timeFormat = this.parent.activeViewOptions.timeFormat;\n            instance.step = duration || this.getSlotDuration();\n            instance.dataBind();\n        }\n    }\n    onTimeChange() {\n        const startObj = this.getInstance(EVENT_WINDOW_START_CLASS);\n        if (startObj.element.parentElement.classList.contains('e-input-focus')) {\n            const endObj = this.getInstance(EVENT_WINDOW_END_CLASS);\n            let duration = 0;\n            if (this.cellClickAction) {\n                duration = MS_PER_MINUTE * this.duration;\n                this.eventWindowTime.startTime = startObj.value;\n            }\n            else {\n                duration = this.eventData[this.fields.endTime].getTime() - this.eventData[this.fields.startTime].getTime();\n            }\n            const endDate = (isNullOrUndefined(startObj.value)) ? null : new Date(startObj.value.getTime() + duration);\n            if (this.cellClickAction) {\n                this.eventWindowTime.endTime = endDate;\n            }\n            endObj.value = endDate;\n            endObj.dataBind();\n        }\n        if (this.recurrenceEditor) {\n            this.recurrenceEditor.updateRuleUntilDate(this.eventWindowTime.startTime);\n        }\n    }\n    renderResourceDetails(resourceData) {\n        const fieldName = resourceData.field;\n        const value = 'e-' + fieldName;\n        const labelValue = resourceData.title;\n        const resourceDiv = this.createDivElement(value + '-container' + ' ' + 'e-resources');\n        const resourceInput = this.createInputElement(value + ' ' + EVENT_FIELD$1, fieldName);\n        resourceDiv.appendChild(resourceInput);\n        const resourceTemplate = '<div class=\"e-resource-template\"><div class=\"e-resource-color\" style=\"background-color:${' +\n            resourceData.colorField + '}\"></div><div class=\"e-resource-text\">${' + resourceData.textField + '}</div></div>';\n        if (resourceData.allowMultiple) {\n            const listObj = new MultiSelect({\n                cssClass: this.parent.cssClass || '',\n                dataSource: resourceData.dataSource,\n                change: this.onMultiselectResourceChange.bind(this),\n                itemTemplate: resourceTemplate,\n                fields: {\n                    text: resourceData.textField,\n                    value: resourceData.idField\n                },\n                htmlAttributes: { 'title': labelValue, 'name': fieldName },\n                floatLabelType: 'Always',\n                placeholder: labelValue,\n                popupHeight: '230px',\n                popupWidth: '447px',\n                mode: 'Box'\n            });\n            listObj.appendTo(resourceInput);\n        }\n        else {\n            const dropDownList = new DropDownList({\n                cssClass: this.parent.cssClass || '',\n                change: this.onDropdownResourceChange.bind(this),\n                dataSource: resourceData.dataSource,\n                enableRtl: this.parent.enableRtl,\n                fields: {\n                    text: resourceData.textField,\n                    value: resourceData.idField\n                },\n                htmlAttributes: { 'title': labelValue, 'name': fieldName },\n                floatLabelType: 'Always',\n                placeholder: labelValue,\n                popupHeight: '230px',\n                popupWidth: '447px',\n                itemTemplate: resourceTemplate\n            });\n            dropDownList.appendTo(resourceInput);\n        }\n        return resourceDiv;\n    }\n    renderDropDown(value) {\n        const fieldName = this.getFieldName(value);\n        const timezoneDiv = this.createDivElement(value + '-container');\n        const timezoneInput = this.createInputElement(value + ' ' + EVENT_FIELD$1, fieldName);\n        timezoneDiv.appendChild(timezoneInput);\n        const dropDownList = new DropDownList({\n            allowFiltering: true,\n            change: this.onTimezoneChange.bind(this),\n            cssClass: this.parent.cssClass || '',\n            dataSource: this.parent.timezoneDataSource,\n            enableRtl: this.parent.enableRtl,\n            fields: { text: 'Text', value: 'Value' },\n            filterBarPlaceholder: this.parent.localeObj.getConstant('searchTimezone'),\n            noRecordsTemplate: this.parent.localeObj.getConstant('noRecords'),\n            filtering: (e) => {\n                let query = new Query();\n                query = (e.text !== '') ? query.where('Text', 'contains', e.text, true) : query;\n                e.updateData(this.parent.timezoneDataSource, query);\n            },\n            htmlAttributes: { 'title': this.getFieldLabel(value), 'name': fieldName },\n            floatLabelType: 'Always',\n            placeholder: this.getFieldLabel(value),\n            popupHeight: '230px'\n        });\n        dropDownList.appendTo(timezoneInput);\n        return timezoneDiv;\n    }\n    onMultiselectResourceChange(args) {\n        if (!args.value || !this.parent.activeViewOptions.group.byGroupID || this.parent.resourceCollection.length <= 1) {\n            return;\n        }\n        const resourceCollection = this.parent.resourceBase.resourceCollection;\n        const fieldName = args.element.getAttribute('name') || this.getColumnName(args.element);\n        for (let i = 0; i < resourceCollection.length; i++) {\n            if (resourceCollection[i].field === fieldName && i < resourceCollection.length - 1) {\n                const resObject = this.createInstance(i);\n                let datasource = [];\n                for (let j = 0; j < args.value.length; j++) {\n                    const resourceModel = resourceCollection[i + 1];\n                    // eslint-disable-next-line max-len\n                    const filter = resourceModel.dataSource.filter((data) => data[resourceModel.groupIDField] === args.value[j])[0];\n                    const groupId = filter[resourceCollection[i + 1].groupIDField];\n                    const filterRes = this.filterDatasource(i, groupId);\n                    datasource = datasource.concat(filterRes);\n                }\n                resObject.dataSource = datasource;\n                resObject.dataBind();\n            }\n        }\n    }\n    createInstance(index) {\n        const resourceData = this.parent.resourceBase.resourceCollection[index + 1];\n        const resObject = this.element.querySelector('.e-' + resourceData.field).\n            ej2_instances[0];\n        return resObject;\n    }\n    onDropdownResourceChange(args) {\n        if (!args.value || this.parent.resourceCollection.length <= 1 || !this.parent.activeViewOptions.group.byGroupID) {\n            return;\n        }\n        const fieldName = args.element.getAttribute('name') || this.getColumnName(args.element);\n        const resourceCollection = this.parent.resourceBase.resourceCollection;\n        for (let i = 0; i < resourceCollection.length; i++) {\n            if ((i < resourceCollection.length - 1) && resourceCollection[i].field === fieldName) {\n                const resObj = this.createInstance(i);\n                const groupId = args.itemData[resourceCollection[i].idField];\n                resObj.dataSource = this.filterDatasource(i, groupId);\n                resObj.dataBind();\n                const resValue = resObj.dataSource[0][resourceCollection[i + 1].idField];\n                resObj.value = (resourceCollection[i + 1].allowMultiple) ? [resValue] : resValue;\n                resObj.dataBind();\n            }\n        }\n    }\n    filterDatasource(index, groupId) {\n        const resourceData = this.parent.resourceBase.resourceCollection[index + 1];\n        return resourceData.dataSource.filter((data) => data[resourceData.groupIDField] === groupId);\n    }\n    onTimezoneChange(args) {\n        const fieldName = args.element.getAttribute('name') || this.getColumnName(args.element);\n        if (fieldName === this.parent.eventFields.startTimezone) {\n            const startTimezoneObj = this.getInstance(EVENT_WINDOW_START_TZ_CLASS);\n            const endTimezoneObj = this.getInstance(EVENT_WINDOW_END_TZ_CLASS);\n            endTimezoneObj.value = startTimezoneObj.value;\n            endTimezoneObj.dataBind();\n        }\n    }\n    renderCheckBox(value) {\n        const checkBoxDiv = this.createDivElement(value + '-container');\n        const fieldName = this.getFieldName(value);\n        const checkBoxInput = this.createInputElement(value + ' ' + EVENT_FIELD$1, fieldName);\n        checkBoxDiv.appendChild(checkBoxInput);\n        const checkBox = new CheckBox({\n            change: this.onChange.bind(this),\n            cssClass: value + ' ' + this.parent.cssClass,\n            enableRtl: this.parent.enableRtl,\n            label: this.getFieldLabel(value)\n        });\n        checkBox.appendTo(checkBoxInput);\n        checkBoxInput.setAttribute('name', fieldName);\n        if (fieldName === 'Repeat') {\n            this.repeatStatus = checkBox;\n        }\n        return checkBoxDiv;\n    }\n    renderTextBox(value) {\n        const textBoxDiv = this.createDivElement(value + '-container');\n        const fieldName = this.getFieldName(value);\n        const elementType = (value === DESCRIPTION_CLASS) ? 'textarea' : 'input';\n        const textBoxInput = this.createInputElement(value + ' ' + EVENT_FIELD$1, fieldName, elementType);\n        textBoxDiv.appendChild(textBoxInput);\n        Input.createInput({\n            element: textBoxInput,\n            floatLabelType: 'Always',\n            properties: {\n                enableRtl: this.parent.enableRtl,\n                placeholder: this.getFieldLabel(value)\n            }\n        });\n        return textBoxDiv;\n    }\n    getFieldName(name) {\n        let fieldName = '';\n        switch (name) {\n            case SUBJECT_CLASS:\n                fieldName = this.fields.subject;\n                break;\n            case LOCATION_CLASS:\n                fieldName = this.fields.location;\n                break;\n            case EVENT_WINDOW_START_CLASS:\n                fieldName = this.fields.startTime;\n                break;\n            case EVENT_WINDOW_END_CLASS:\n                fieldName = this.fields.endTime;\n                break;\n            case DESCRIPTION_CLASS:\n                fieldName = this.fields.description;\n                break;\n            case EVENT_WINDOW_ALL_DAY_CLASS:\n                fieldName = this.fields.isAllDay;\n                break;\n            case EVENT_WINDOW_START_TZ_CLASS:\n                fieldName = this.fields.startTimezone;\n                break;\n            case EVENT_WINDOW_END_TZ_CLASS:\n                fieldName = this.fields.endTimezone;\n                break;\n            case TIME_ZONE_CLASS:\n                fieldName = 'Timezone';\n                break;\n            case EVENT_WINDOW_REPEAT_CLASS:\n                fieldName = 'Repeat';\n                break;\n        }\n        return fieldName;\n    }\n    getFieldLabel(fieldName) {\n        let labelText = '';\n        switch (fieldName) {\n            case SUBJECT_CLASS:\n                labelText = this.parent.editorTitles.subject;\n                break;\n            case LOCATION_CLASS:\n                labelText = this.parent.editorTitles.location;\n                break;\n            case DESCRIPTION_CLASS:\n                labelText = this.parent.editorTitles.description;\n                break;\n            case EVENT_WINDOW_START_CLASS:\n                labelText = this.parent.editorTitles.startTime;\n                break;\n            case EVENT_WINDOW_END_CLASS:\n                labelText = this.parent.editorTitles.endTime;\n                break;\n            case EVENT_WINDOW_START_TZ_CLASS:\n                labelText = this.parent.editorTitles.startTimezone;\n                break;\n            case EVENT_WINDOW_END_TZ_CLASS:\n                labelText = this.parent.editorTitles.endTimezone;\n                break;\n            case EVENT_WINDOW_REPEAT_CLASS:\n                labelText = this.parent.editorTitles.recurrenceRule;\n                break;\n            case EVENT_WINDOW_ALL_DAY_CLASS:\n                labelText = this.parent.editorTitles.isAllDay;\n                break;\n            case TIME_ZONE_CLASS:\n                labelText = this.l10n.getConstant('timezone');\n                break;\n        }\n        return labelText;\n    }\n    onChange(args) {\n        const target = (args.event.target);\n        if (target.classList.contains(EVENT_WINDOW_ALL_DAY_CLASS)) {\n            this.onAllDayChange(args.checked);\n        }\n        else if (target.classList.contains(TIME_ZONE_CLASS)) {\n            this.timezoneChangeStyle(args.checked);\n        }\n        else if (target.classList.contains(EVENT_WINDOW_REPEAT_CLASS)) {\n            this.onRepeatChange(args.checked);\n        }\n    }\n    renderRepeatDialog() {\n        const element = createElement('div');\n        this.repeatDialogObject = new Dialog({\n            header: this.l10n.getConstant('recurrence'),\n            visible: false,\n            content: '<div class=\"e-rec-editor\"></div>',\n            closeOnEscape: true,\n            width: '90%',\n            buttons: [{\n                    click: this.repeatSaveDialog.bind(this),\n                    buttonModel: { content: this.l10n.getConstant('save'), cssClass: 'e-save', isPrimary: true }\n                },\n                { click: this.repeatCancelDialog.bind(this), buttonModel: { cssClass: 'e-cancel', content: this.l10n.getConstant('cancel') } }],\n            target: this.element,\n            animationSettings: { effect: 'Zoom' },\n            enableRtl: this.parent.enableRtl,\n            isModal: true,\n            cssClass: REPEAT_DIALOG_CLASS,\n            open: this.repeatOpenDialog.bind(this)\n        });\n        this.element.appendChild(element);\n        this.repeatDialogObject.appendTo(element);\n        this.createRecurrenceEditor(this.repeatDialogObject.element.querySelector('.e-rec-editor'));\n    }\n    loadRecurrenceEditor() {\n        this.repeatDialogObject.show();\n        if (this.recurrenceEditor && this.repeatRule) {\n            this.recurrenceEditor.setRecurrenceRule(this.repeatRule);\n        }\n    }\n    onRepeatChange(state) {\n        if (state) {\n            if (!this.repeatDialogObject) {\n                this.renderRepeatDialog();\n            }\n            this.recurrenceEditor.setProperties({ startDate: this.repeatStartDate, selectedType: 0 });\n            this.loadRecurrenceEditor();\n        }\n        else {\n            if (this.repeatDialogObject) {\n                this.repeatDialogObject.hide();\n            }\n            this.repeatRule = '';\n            if (this.recurrenceEditor) {\n                this.recurrenceEditor.setRecurrenceRule(this.repeatRule);\n                this.updateRepeatLabel(this.repeatRule);\n            }\n            const element = this.element.querySelector('.' + REPEAT_CONTAINER_CLASS);\n            addClass([element], HIDE_STYLE_CLASS);\n        }\n    }\n    repeatSaveDialog() {\n        this.repeatRule = this.recurrenceEditor.getRecurrenceRule();\n        const element = this.element.querySelector('.' + REPEAT_CONTAINER_CLASS);\n        if (this.recurrenceEditor.getRecurrenceRule()) {\n            removeClass([element], HIDE_STYLE_CLASS);\n        }\n        else {\n            addClass([element], HIDE_STYLE_CLASS);\n            this.repeatStatus.setProperties({ checked: false });\n        }\n        this.updateRepeatLabel(this.repeatRule);\n        this.closeRepeatDialog();\n    }\n    closeRepeatDialog() {\n        this.repeatDialogObject.hide();\n    }\n    repeatCancelDialog() {\n        this.closeRepeatDialog();\n        if (this.recurrenceEditor) {\n            this.recurrenceEditor.setRecurrenceRule(this.repeatTempRule);\n        }\n        if (!this.repeatTempRule) {\n            this.repeatStatus.setProperties({ checked: false });\n        }\n    }\n    repeatOpenDialog() {\n        this.repeatTempRule = this.recurrenceEditor.getRecurrenceRule();\n    }\n    onCellDetailsUpdate(eventObj, repeatType) {\n        if (!this.parent.eventSettings.allowAdding) {\n            return;\n        }\n        this.element.querySelector('.' + FORM_CLASS).removeAttribute('data-id');\n        this.element.querySelector('.' + EVENT_WINDOW_TITLE_TEXT_CLASS).innerHTML = this.l10n.getConstant('newEvent');\n        eventObj.Timezone = false;\n        this.repeatStartDate = eventObj[this.fields.startTime];\n        this.repeatRule = '';\n        if (!isNullOrUndefined(this.parent.eventSettings.fields.subject.default)) {\n            eventObj[this.fields.subject] = this.parent.eventSettings.fields.subject.default;\n        }\n        if (!isNullOrUndefined(this.parent.eventSettings.fields.location.default)) {\n            eventObj[this.fields.location] = this.parent.eventSettings.fields.location.default;\n        }\n        if (!isNullOrUndefined(this.parent.eventSettings.fields.description.default)) {\n            eventObj[this.fields.description] = this.parent.eventSettings.fields.description.default;\n        }\n        this.showDetails(eventObj);\n        if (eventObj[this.fields.recurrenceRule] && this.recurrenceEditor) {\n            this.recurrenceEditor.setRecurrenceRule(eventObj[this.fields.recurrenceRule], eventObj[this.fields.startTime]);\n            this.repeatRule = eventObj[this.fields.recurrenceRule];\n        }\n        const deleteButton = this.element.querySelector('.' + DELETE_EVENT_CLASS);\n        if (deleteButton) {\n            addClass([deleteButton], DISABLE_CLASS);\n        }\n        if (this.recurrenceEditor) {\n            this.recurrenceEditor.setProperties({\n                startDate: eventObj[this.fields.startTime],\n                selectedType: !isNullOrUndefined(repeatType) ? repeatType : !isNullOrUndefined(eventObj[this.fields.recurrenceRule]) ?\n                    this.recurrenceEditor.selectedType : 0\n            });\n        }\n        if (this.parent.isAdaptive && isNullOrUndefined(this.parent.editorTemplate)) {\n            const element = this.element.querySelector('.' + REPEAT_CONTAINER_CLASS);\n            addClass([element], HIDE_STYLE_CLASS);\n            this.updateRepeatLabel(this.repeatRule);\n        }\n        else {\n            const saveButton = this.element.querySelector('.' + EVENT_WINDOW_SAVE_BUTTON_CLASS);\n            this.disableButton(saveButton, false);\n        }\n        this.dialogObject.show();\n    }\n    convertToEventData(cellsData, eventObj) {\n        if (cellsData.subject) {\n            eventObj[this.fields.subject] = cellsData.subject;\n        }\n        eventObj[this.fields.startTime] = cellsData.startTime;\n        eventObj[this.fields.endTime] = cellsData.endTime;\n        eventObj[this.fields.isAllDay] = cellsData.isAllDay;\n        if (cellsData.RecurrenceRule) {\n            eventObj[this.fields.recurrenceRule] = cellsData.RecurrenceRule;\n        }\n        if (this.parent.resourceCollection.length > 0 || this.parent.activeViewOptions.group.resources.length > 0) {\n            this.parent.resourceBase.setResourceValues(eventObj);\n        }\n    }\n    applyFormValidation() {\n        const getValidationRule = (rules) => (rules && Object.keys(rules).length > 0) ? rules : undefined;\n        const form = this.element.querySelector('.' + FORM_CLASS);\n        const rules = {};\n        rules[this.parent.eventSettings.fields.subject.name] = getValidationRule(this.parent.eventSettings.fields.subject.validation);\n        rules[this.parent.eventSettings.fields.location.name] = getValidationRule(this.parent.eventSettings.fields.location.validation);\n        rules[this.parent.eventSettings.fields.startTime.name] = getValidationRule(this.parent.eventSettings.fields.startTime.validation);\n        rules[this.parent.eventSettings.fields.endTime.name] = getValidationRule(this.parent.eventSettings.fields.endTime.validation);\n        rules[this.parent.eventSettings.fields.description.name] =\n            getValidationRule(this.parent.eventSettings.fields.description.validation);\n        this.fieldValidator = new FieldValidator();\n        this.fieldValidator.renderFormValidator(form, rules, this.element, this.parent.locale);\n    }\n    showDetails(eventData) {\n        const eventObj = extend({}, eventData, null, true);\n        if (eventObj[this.fields.endTime].getHours() === 0 && eventObj[this.fields.endTime].getMinutes() === 0) {\n            this.trimAllDay(eventObj);\n        }\n        this.eventData = eventObj;\n        const formElements = this.getFormElements(EVENT_WINDOW_DIALOG_CLASS);\n        const keyNames = Object.keys(eventObj);\n        for (const curElement of formElements) {\n            const columnName = curElement.name || this.getColumnName(curElement);\n            if (!isNullOrUndefined(columnName) && columnName !== '') {\n                if (keyNames.indexOf(columnName) !== -1) {\n                    this.setValueToElement(curElement, eventObj[columnName]);\n                }\n                else {\n                    this.setDefaultValueToElement(curElement);\n                }\n            }\n        }\n        if (isNullOrUndefined(this.parent.editorTemplate)) {\n            this.onAllDayChange(eventObj[this.fields.isAllDay]);\n            const timezoneObj = this.getInstance(TIME_ZONE_CLASS + '.' + EVENT_FIELD$1);\n            if (!(isNullOrUndefined(eventObj[this.fields.startTimezone]) && isNullOrUndefined(eventObj[this.fields.endTimezone]))) {\n                timezoneObj.checked = true;\n                timezoneObj.dataBind();\n            }\n            this.timezoneChangeStyle(timezoneObj.checked);\n            delete eventObj.Timezone;\n        }\n    }\n    getColumnName(element) {\n        let attrName = element.getAttribute('data-name') || '';\n        if (attrName === '') {\n            let isDropDowns = false;\n            let fieldSelector = '';\n            if (element.classList.contains('e-dropdownlist')) {\n                fieldSelector = 'e-ddl';\n                isDropDowns = true;\n            }\n            else if (element.classList.contains('e-multiselect')) {\n                fieldSelector = 'e-multiselect';\n                isDropDowns = true;\n            }\n            else if (element.classList.contains('e-datetimepicker')) {\n                fieldSelector = 'e-datetimepicker';\n            }\n            else if (element.classList.contains('e-datepicker')) {\n                fieldSelector = 'e-datepicker';\n            }\n            else if (element.classList.contains('e-checkbox')) {\n                fieldSelector = 'e-checkbox';\n            }\n            const classSelector = isDropDowns ? `.${fieldSelector}:not(.e-control)` : `.${fieldSelector}`;\n            const control = closest(element, classSelector) || element.querySelector(`.${fieldSelector}`);\n            if (control) {\n                const attrEle = control.querySelector('[name]');\n                if (attrEle) {\n                    attrName = attrEle.name;\n                }\n            }\n        }\n        return attrName;\n    }\n    onAllDayChange(allDayStatus) {\n        const startObj = this.getInstance(EVENT_WINDOW_START_CLASS);\n        const endObj = this.getInstance(EVENT_WINDOW_END_CLASS);\n        const timezoneDiv = this.element.querySelector('.e-time-zone-container');\n        let format;\n        if (allDayStatus) {\n            format = (isNullOrUndefined(this.parent.dateFormat)) ? this.getFormat('dateFormats') : this.parent.dateFormat;\n            addClass(this.element.querySelectorAll('.e-time-icon'), EVENT_WINDOW_ICON_DISABLE_CLASS);\n            addClass([timezoneDiv], DISABLE_CLASS);\n            if (this.element.querySelector('.' + EVENT_WINDOW_TIME_ZONE_DIV_CLASS)) {\n                removeClass([this.element.querySelector('.' + EVENT_WINDOW_TIME_ZONE_DIV_CLASS)], ENABLE_CLASS);\n            }\n            startObj.format = endObj.format = format;\n        }\n        else {\n            format = (isNullOrUndefined(this.parent.dateFormat)) ? this.getFormat('dateFormats') + ' ' +\n                this.parent.activeViewOptions.timeFormat : this.parent.dateFormat + ' ' + this.parent.activeViewOptions.timeFormat;\n            removeClass(this.element.querySelectorAll('.e-time-icon'), EVENT_WINDOW_ICON_DISABLE_CLASS);\n            removeClass([timezoneDiv], DISABLE_CLASS);\n            if (this.element.querySelector('.e-checkbox-wrapper .e-time-zone').checked) {\n                addClass([this.element.querySelector('.' + EVENT_WINDOW_TIME_ZONE_DIV_CLASS)], ENABLE_CLASS);\n            }\n            startObj.format = endObj.format = format;\n        }\n        if (this.cellClickAction) {\n            this.updateDateTime(allDayStatus, startObj, endObj);\n        }\n        startObj.dataBind();\n        endObj.dataBind();\n        if (!isNullOrUndefined(this.recurrenceEditor)) {\n            this.recurrenceEditor.updateRuleUntilDate(startObj.value);\n        }\n    }\n    updateDateTime(allDayStatus, startObj, endObj) {\n        let startDate;\n        let endDate;\n        if (allDayStatus) {\n            startDate = resetTime(new Date(this.eventWindowTime.startTime.getTime()));\n            if (this.parent.activeCellsData.isAllDay) {\n                const temp = addDays(new Date(this.eventWindowTime.endTime.getTime()), -1).getTime();\n                endDate = (+this.eventWindowTime.startTime > temp) ? this.eventWindowTime.endTime : new Date(temp);\n            }\n            else {\n                endDate = resetTime(new Date(this.eventWindowTime.endTime.getTime()));\n            }\n        }\n        else {\n            const start = this.parent.activeCellsData.startTime;\n            startDate = new Date(this.eventWindowTime.startTime.getTime());\n            startDate.setHours(start.getHours(), start.getMinutes(), start.getSeconds());\n            if (this.parent.activeCellsData.isAllDay) {\n                const startHour = this.parent.getStartEndTime(this.parent.workHours.start);\n                startDate.setHours(startHour.getHours(), startHour.getMinutes(), startHour.getSeconds());\n                endDate = new Date(startDate.getTime());\n                endDate.setMilliseconds(MS_PER_MINUTE * this.getSlotDuration());\n            }\n            else {\n                endDate = new Date(startDate.getTime());\n                endDate.setMilliseconds(this.parent.activeCellsData.endTime.getTime() - this.parent.activeCellsData.startTime.getTime());\n            }\n        }\n        this.eventWindowTime = { startTime: new Date(startDate.getTime()), endTime: new Date(endDate.getTime()) };\n        startObj.value = startDate;\n        endObj.value = endDate;\n        startObj.dataBind();\n        endObj.dataBind();\n    }\n    getFormat(formatType) {\n        let format;\n        if (this.parent.locale === 'en' || this.parent.locale === 'en-US') {\n            format = getValue(formatType + '.short', getDefaultDateObject(this.parent.getCalendarMode()));\n        }\n        else {\n            format = getValue(`main.${this.parent.locale}.dates.calendars.${this.parent.getCalendarMode()}.${formatType}.short`, cldrData);\n        }\n        return format;\n    }\n    onEventDetailsUpdate(eventObj) {\n        if (!this.parent.eventSettings.allowEditing) {\n            return;\n        }\n        if (!this.parent.isAdaptive) {\n            removeClass([this.element.querySelector('.' + DELETE_EVENT_CLASS)], DISABLE_CLASS);\n        }\n        this.element.querySelector('.' + EVENT_WINDOW_TITLE_TEXT_CLASS).innerHTML = this.l10n.getConstant('editEvent');\n        this.element.querySelector('.' + FORM_CLASS).setAttribute('data-id', eventObj[this.fields.id].toString());\n        if (isNullOrUndefined(this.parent.editorTemplate)) {\n            eventObj = extend({}, eventObj, null, true);\n            const timezoneObj = this.getInstance(TIME_ZONE_CLASS + '.' + EVENT_FIELD$1);\n            let timezoneValue;\n            if (eventObj[this.fields.startTimezone] || eventObj[this.fields.endTimezone]) {\n                timezoneValue = true;\n                this.parent.eventBase.timezoneConvert(eventObj);\n            }\n            else {\n                timezoneValue = false;\n            }\n            eventObj.Timezone = timezoneValue;\n            timezoneObj.checked = timezoneValue;\n            timezoneObj.dataBind();\n        }\n        this.showDetails(eventObj);\n        if (eventObj[this.fields.recurrenceRule] && this.recurrenceEditor) {\n            this.recurrenceEditor.setRecurrenceRule(eventObj[this.fields.recurrenceRule], eventObj[this.fields.startTime]);\n        }\n        else if (!this.parent.isAdaptive && this.recurrenceEditor) {\n            this.recurrenceEditor.setProperties({ startDate: eventObj[this.fields.startTime] });\n            this.recurrenceEditor.setRecurrenceRule('');\n        }\n        this.repeatStartDate = eventObj[this.fields.startTime];\n        this.repeatRule = '';\n        if (eventObj[this.fields.recurrenceRule]) {\n            if (this.recurrenceEditor) {\n                this.recurrenceEditor.setRecurrenceRule(eventObj[this.fields.recurrenceRule], eventObj[this.fields.startTime]);\n            }\n            this.repeatRule = eventObj[this.fields.recurrenceRule];\n        }\n        if (this.parent.isAdaptive && isNullOrUndefined(this.parent.editorTemplate)) {\n            const element = this.element.querySelector('.' + REPEAT_CONTAINER_CLASS);\n            if (eventObj[this.fields.recurrenceRule]) {\n                removeClass([element], HIDE_STYLE_CLASS);\n                this.repeatStatus.setProperties({ checked: true });\n            }\n            else {\n                addClass([element], HIDE_STYLE_CLASS);\n                this.repeatStatus.setProperties({ checked: false });\n            }\n            this.updateRepeatLabel(this.repeatRule);\n        }\n        const isDisable = (this.parent.readonly || eventObj[this.fields.isReadonly]);\n        if (!this.parent.isAdaptive) {\n            const saveButton = this.element.querySelector('.' + EVENT_WINDOW_SAVE_BUTTON_CLASS);\n            const deleteButton = this.element.querySelector('.' + DELETE_EVENT_CLASS);\n            this.disableButton(saveButton, isDisable);\n            this.disableButton(deleteButton, isDisable);\n        }\n        else {\n            const saveIcon = this.element.querySelector('.' + EVENT_WINDOW_SAVE_ICON_CLASS);\n            if (saveIcon) {\n                if (isDisable) {\n                    addClass([saveIcon], ICON_DISABLE_CLASS);\n                }\n                else {\n                    removeClass([saveIcon], ICON_DISABLE_CLASS);\n                }\n            }\n        }\n        this.dialogObject.show();\n    }\n    disableButton(element, value) {\n        if (element) {\n            element.ej2_instances[0].disabled = value;\n        }\n    }\n    renderRecurrenceEditor() {\n        return new RecurrenceEditor({\n            calendarMode: this.parent.calendarMode,\n            cssClass: this.parent.cssClass,\n            dateFormat: this.parent.dateFormat,\n            enableRtl: this.parent.enableRtl,\n            firstDayOfWeek: this.parent.activeViewOptions.firstDayOfWeek,\n            locale: this.parent.locale\n        });\n    }\n    updateMinMaxDateToEditor() {\n        const startDate = this.element.querySelector('.e-start');\n        const endDate = this.element.querySelector('.e-end');\n        if (startDate && endDate) {\n            const startObj = startDate.ej2_instances[0];\n            const endObj = endDate.ej2_instances[0];\n            startObj.min = this.parent.minDate;\n            startObj.max = this.parent.maxDate;\n            endObj.min = this.parent.minDate;\n            endObj.max = this.parent.maxDate;\n            startObj.dataBind();\n            endObj.dataBind();\n        }\n        if (this.recurrenceEditor) {\n            const untilDate = this.recurrenceEditor.element.querySelector('.e-until-date');\n            if (untilDate) {\n                const untilObj = untilDate.ej2_instances[0];\n                untilObj.min = this.parent.minDate;\n                untilObj.max = this.parent.maxDate;\n                untilObj.dataBind();\n            }\n        }\n    }\n    updateRepeatLabel(repeatRule) {\n        if (this.parent.isAdaptive && !this.repeatDialogObject) {\n            this.renderRepeatDialog();\n        }\n        const data = repeatRule ?\n            (this.l10n.getConstant('repeats') + ' ' + this.recurrenceEditor.getRuleSummary(repeatRule)) : this.l10n.getConstant('repeat');\n        this.repeatStatus.setProperties({ label: data });\n    }\n    dialogClose(event) {\n        if (this.isEnterKey) {\n            this.isEnterKey = false;\n            return;\n        }\n        this.dialogEvent = event;\n        this.isCrudAction = false;\n        this.parent.activeEventData = { event: undefined, element: undefined };\n        this.parent.currentAction = null;\n        this.dialogObject.hide();\n    }\n    resetForm() {\n        this.fieldValidator.destroyToolTip();\n        this.resetFormFields();\n        if (!this.parent.isAdaptive && this.recurrenceEditor && !this.recurrenceEditor.isDestroyed) {\n            this.recurrenceEditor.resetFields();\n        }\n    }\n    timezoneChangeStyle(value) {\n        const timezoneDiv = this.element.querySelector('.' + EVENT_WINDOW_TIME_ZONE_DIV_CLASS);\n        const localTimezoneName = this.parent.tzModule.getLocalTimezoneName();\n        if (value) {\n            addClass([timezoneDiv], ENABLE_CLASS);\n            const startTimezoneObj = this.getInstance(EVENT_WINDOW_START_TZ_CLASS);\n            const endTimezoneObj = this.getInstance(EVENT_WINDOW_END_TZ_CLASS);\n            const timezone = startTimezoneObj.dataSource;\n            if (!startTimezoneObj.value || !this.parent.timezone) {\n                const found = timezone.some((tz) => { return tz.Value === localTimezoneName; });\n                if (!found) {\n                    timezone.push({ Value: localTimezoneName, Text: localTimezoneName });\n                    startTimezoneObj.dataSource = timezone;\n                    endTimezoneObj.dataSource = timezone;\n                    startTimezoneObj.dataBind();\n                    endTimezoneObj.dataBind();\n                }\n            }\n            startTimezoneObj.value = startTimezoneObj.value || this.parent.timezone || localTimezoneName;\n            endTimezoneObj.value = endTimezoneObj.value || this.parent.timezone || localTimezoneName;\n            startTimezoneObj.dataBind();\n            endTimezoneObj.dataBind();\n        }\n        else {\n            removeClass([timezoneDiv], ENABLE_CLASS);\n        }\n    }\n    resetFormFields() {\n        const formElement = this.getFormElements(EVENT_WINDOW_DIALOG_CLASS);\n        for (const currentElement of formElement) {\n            const columnName = currentElement.name || this.getColumnName(currentElement);\n            if (!isNullOrUndefined(columnName) && columnName !== '') {\n                this.setDefaultValueToElement(currentElement);\n            }\n        }\n    }\n    eventSave(event, alert) {\n        if (this.isEnterKey) {\n            this.isEnterKey = false;\n            return;\n        }\n        const formElement = this.element.querySelector('.' + FORM_CLASS);\n        if (formElement && formElement.classList.contains('e-formvalidator') &&\n            !formElement.ej2_instances[0].validate()) {\n            return;\n        }\n        const dataCollection = this.getEventDataFromEditor();\n        if (this.processEventValidation(dataCollection.tempData, alert)) {\n            return;\n        }\n        this.eventCrudData = dataCollection.eventData;\n        this.dialogEvent = event;\n        this.isCrudAction = true;\n        this.dialogObject.hide();\n    }\n    getEventDataFromEditor() {\n        const eventObj = extend({}, this.getObjectFromFormData(EVENT_WINDOW_DIALOG_CLASS));\n        if (!eventObj.Timezone) {\n            eventObj[this.fields.startTimezone] = null;\n            eventObj[this.fields.endTimezone] = null;\n        }\n        delete eventObj.Timezone;\n        delete eventObj.Repeat;\n        this.setDefaultValueToObject(eventObj);\n        eventObj[this.fields.recurrenceRule] = this.recurrenceEditor ? this.recurrenceEditor.getRecurrenceRule() || null : undefined;\n        const tempObj = extend({}, eventObj, null, true);\n        if (eventObj[this.fields.isAllDay]) {\n            eventObj[this.fields.startTime] = (isNullOrUndefined(eventObj[this.fields.startTime])) ? null\n                : resetTime(new Date(eventObj[this.fields.startTime].getTime()));\n            eventObj[this.fields.endTime] = (isNullOrUndefined(eventObj[this.fields.endTime])) ? null\n                : addDays(resetTime(new Date(eventObj[this.fields.endTime].getTime())), 1);\n        }\n        return { eventData: eventObj, tempData: tempObj };\n    }\n    processEventValidation(eventObj, alert) {\n        let alertType;\n        if (isNullOrUndefined(this.parent.editorTemplate)) {\n            if (!eventObj[this.fields.startTime] || !eventObj[this.fields.endTime]) {\n                this.parent.quickPopup.openValidationError('invalidDateError');\n                return true;\n            }\n            if (eventObj[this.fields.startTime] > eventObj[this.fields.endTime]) {\n                this.parent.quickPopup.openValidationError('startEndError');\n                return true;\n            }\n        }\n        if (this.recurrenceEditor && this.recurrenceEditor.value && this.recurrenceEditor.value !== '') {\n            alertType = this.recurrenceValidation(eventObj[this.fields.startTime], eventObj[this.fields.endTime], alert);\n            let isShowAlert = true;\n            if (alertType === 'seriesChangeAlert' && this.parent.uiStateValues.isIgnoreOccurrence) {\n                isShowAlert = false;\n            }\n            if (!isNullOrUndefined(alertType) && isShowAlert\n                && ((!this.parent.enableRecurrenceValidation && alertType === 'wrongPattern') || this.parent.enableRecurrenceValidation)) {\n                this.parent.quickPopup.openRecurrenceValidationAlert(alertType);\n                return true;\n            }\n        }\n        return false;\n    }\n    processCrudActions(eventObj) {\n        this.parent.uiStateValues.isBlock = false;\n        const resourceData = this.getResourceData(eventObj);\n        const isResourceEventExpand = (this.parent.activeViewOptions.group.resources.length > 0 ||\n            this.parent.resourceCollection.length > 0) && !this.parent.activeViewOptions.group.allowGroupEdit\n            && !isNullOrUndefined(resourceData);\n        const eventId = this.getEventIdFromForm();\n        if (!isNullOrUndefined(eventId)) {\n            let eveId = this.parent.eventBase.getEventIDType() === 'string' ? eventId : parseInt(eventId, 10);\n            let editedData = this.parent.eventsData.filter((data) => data[this.fields.id] === eveId)[0];\n            if (isNullOrUndefined(editedData)) {\n                editedData = this.parent.blockData.filter((data) => data[this.fields.id] === eveId)[0];\n            }\n            eventObj = extend({}, editedData, eventObj);\n            if (eventObj[this.fields.isReadonly]) {\n                return false;\n            }\n            let currentAction;\n            if (!isNullOrUndefined(editedData[this.fields.recurrenceRule])) {\n                currentAction = this.parent.currentAction;\n                eventObj.Guid = this.parent.activeEventData.event.Guid;\n                if (this.parent.currentAction === 'EditOccurrence') {\n                    if (!eventObj[this.fields.recurrenceID]) {\n                        eventObj[this.fields.id] = this.parent.eventBase.getEventMaxID();\n                        eventObj.Guid = this.parent.activeEventData.event.Guid;\n                    }\n                    else {\n                        eveId = eventObj[this.fields.recurrenceID];\n                        currentAction = null;\n                    }\n                    if (this.parent.enableRecurrenceValidation && this.editOccurrenceValidation(eveId, eventObj)) {\n                        return true;\n                    }\n                }\n                if (this.parent.currentAction === 'EditSeries' || eventObj[this.fields.id] !== editedData[this.fields.id]) {\n                    eventObj[this.fields.recurrenceID] = editedData[this.fields.id];\n                }\n                else if (this.parent.currentAction === 'EditFollowingEvents') {\n                    eventObj[this.fields.id] = this.parent.eventBase.getEventMaxID();\n                    eventObj[this.fields.followingID] = editedData[this.fields.id];\n                }\n            }\n            if (isResourceEventExpand) {\n                this.resourceSaveEvent(eventObj, 'Save', currentAction);\n            }\n            else {\n                this.parent.saveEvent(eventObj, currentAction);\n            }\n        }\n        else {\n            this.parent.currentAction = 'Add';\n            if (isResourceEventExpand) {\n                this.resourceSaveEvent(eventObj, this.parent.currentAction);\n            }\n            else {\n                eventObj[this.fields.id] = this.parent.eventBase.getEventMaxID();\n                this.parent.addEvent(eventObj);\n            }\n        }\n        return this.parent.uiStateValues.isBlock;\n    }\n    getResourceData(eventObj) {\n        let resourceData = null;\n        if (!isNullOrUndefined(this.parent.resourceBase) && !isNullOrUndefined(this.parent.resourceBase.resourceCollection)\n            && this.parent.resourceBase.resourceCollection.length > 0) {\n            const lastResourceData = this.parent.resourceBase.resourceCollection.slice(-1)[0];\n            resourceData = eventObj[lastResourceData.field];\n        }\n        return resourceData;\n    }\n    getObjectFromFormData(className) {\n        const formElement = this.getFormElements(className);\n        const eventObj = {};\n        for (const currentElement of formElement) {\n            const columnName = currentElement.name || this.getColumnName(currentElement);\n            if (!isNullOrUndefined(columnName) && columnName !== '') {\n                eventObj[columnName] = this.getValueFromElement(currentElement);\n            }\n        }\n        return eventObj;\n    }\n    setDefaultValueToObject(eventObj) {\n        if (!isNullOrUndefined(eventObj[this.fields.subject])) {\n            eventObj[this.fields.subject] = eventObj[this.fields.subject] || this.parent.eventSettings.fields.subject.default\n                || this.l10n.getConstant('addTitle');\n        }\n        if (!isNullOrUndefined(eventObj[this.fields.location])) {\n            eventObj[this.fields.location] = eventObj[this.fields.location] || this.parent.eventSettings.fields.location.default;\n        }\n        if (!isNullOrUndefined(eventObj[this.fields.description])) {\n            eventObj[this.fields.description] = eventObj[this.fields.description] || this.parent.eventSettings.fields.description.default;\n        }\n    }\n    recurrenceValidation(startDate, endDate, alert) {\n        let alertMessage;\n        const recEditor = this.recurrenceEditor;\n        const interval = this.getInstance('e-repeat-interval.e-numerictextbox').value;\n        if (alert !== this.l10n.getConstant('ok')) {\n            const activeEvent = this.parent.activeEventData.event;\n            let excludedEvents = [];\n            if ((this.parent.currentAction === 'EditSeries' || this.parent.currentAction === 'EditFollowingEvents')\n                && !isNullOrUndefined(activeEvent)) {\n                const eventStartTime = activeEvent[this.parent.eventFields.startTime];\n                const seriesEvents = this.parent.eventBase.getSeriesEvents(this.eventData, eventStartTime);\n                if (seriesEvents.length > 0) {\n                    excludedEvents = this.parent.eventBase.getEditedOccurrences(seriesEvents, eventStartTime);\n                }\n                else {\n                    const event = this.parent.eventBase.getEventById(activeEvent[this.parent.eventFields.id]);\n                    excludedEvents = this.parent.eventBase.getEditedOccurrences([event], eventStartTime);\n                }\n                if (this.parent.currentAction === 'EditSeries'\n                    && !isNullOrUndefined(this.eventData[this.parent.eventFields.recurrenceException])) {\n                    excludedEvents.push(this.eventData);\n                }\n            }\n            if (excludedEvents.length > 0) {\n                alertMessage = 'seriesChangeAlert';\n            }\n            if (this.getInstance('e-end-on-left .e-ddl .e-dropdownlist').value === 'until' &&\n                this.getInstance('e-end-on-date .e-datepicker').value < startDate) {\n                alertMessage = 'wrongPattern';\n            }\n            if (isNullOrUndefined(alertMessage)) {\n                let types = recEditor.value.split(';')[1].split('=')[1].split(',');\n                const obj = { 'SU': 0, 'MO': 1, 'TU': 2, 'WE': 3, 'TH': 4, 'FR': 5, 'SA': 6 };\n                const temp = [];\n                const tempDiff = [];\n                let tempValue;\n                switch (recEditor.value.split(';')[0].split('=')[1]) {\n                    case 'DAILY':\n                        if ((((endDate.getTime() - startDate.getTime()) / (1000 * 3600)) > (interval * 24))) {\n                            alertMessage = 'createError';\n                        }\n                        break;\n                    case 'WEEKLY':\n                        types = recEditor.value.split(';')[1].split('=')[1].split(',');\n                        for (let index = 0; index < types.length * (interval + 1); index++) {\n                            temp[index] = (types.length > index) ? obj[types[index]] : temp[index - types.length] + (7 * interval);\n                        }\n                        tempValue = temp.sort((a, b) => a - b);\n                        for (let index = 1; index < tempValue.length; index++) {\n                            tempDiff.push(tempValue[index] - tempValue[index - 1]);\n                        }\n                        if ((((endDate.getTime() - startDate.getTime()) / (1000 * 3600)) >= Math.min(...tempDiff) * 24)\n                            || isNullOrUndefined(interval)) {\n                            alertMessage = 'createError';\n                        }\n                        break;\n                    case 'MONTHLY':\n                        if (endDate.getTime() >= new Date(+startDate).setMonth(startDate.getMonth() + interval)) {\n                            alertMessage = 'createError';\n                        }\n                        break;\n                    case 'YEARLY':\n                        if (endDate.getTime() >= new Date(+startDate).setFullYear(startDate.getFullYear() + interval)) {\n                            alertMessage = 'createError';\n                        }\n                        break;\n                }\n            }\n        }\n        else {\n            if (endDate.getTime() >= new Date(+startDate).setMonth(startDate.getMonth() + interval)) {\n                alertMessage = 'createError';\n            }\n            if (isNullOrUndefined(alertMessage)) {\n                this.parent.quickPopup.quickDialog.hide();\n            }\n        }\n        if (isNullOrUndefined(interval)) {\n            alertMessage = 'createError';\n        }\n        return alertMessage;\n    }\n    getRecurrenceIndex(recColl, event) {\n        let recIndex;\n        for (let index = 0; index < recColl.length; index++) {\n            if (event[this.fields.startTime].valueOf() === recColl[index][this.fields.startTime].valueOf()) {\n                recIndex = index;\n                break;\n            }\n        }\n        return recIndex;\n    }\n    trimAllDay(data) {\n        if (data[this.fields.isAllDay]) {\n            const temp = addDays(new Date(+data[this.fields.endTime]), -1).getTime();\n            data[this.fields.endTime] = (+data[this.fields.startTime] > temp) ? data[this.fields.endTime] : new Date(temp);\n        }\n    }\n    editOccurrenceValidation(eventId, currentData, editData) {\n        if (editData === void 0) {\n            editData = this.eventData;\n        }\n        const recurColl = this.parent.getOccurrencesByID(eventId);\n        const excludedDatas = this.parent.eventsData.filter((data) => data[this.fields.recurrenceID] === eventId);\n        excludedDatas.map((data) => recurColl.push(extend({}, data)));\n        currentData = extend({}, currentData);\n        this.trimAllDay(currentData);\n        for (const data of recurColl) {\n            this.trimAllDay(data);\n        }\n        this.parent.eventBase.sortByTime(recurColl);\n        const index = this.getRecurrenceIndex(recurColl, editData);\n        if (isNullOrUndefined(index)) {\n            return false;\n        }\n        if (index === 0) {\n            if (!isNullOrUndefined(recurColl[index + 1])) {\n                if (!(resetTime(new Date(+recurColl[index + 1][this.fields.startTime])).getTime() >\n                    resetTime(new Date(+currentData[this.fields.endTime])).getTime()) &&\n                    (resetTime(new Date(+recurColl[recurColl.length - 1][this.fields.endTime])).getTime() >=\n                        resetTime(new Date(+currentData[this.fields.startTime])).getTime())) {\n                    this.parent.quickPopup.openRecurrenceValidationAlert('sameDayAlert');\n                    return true;\n                }\n                else if (resetTime(new Date(+recurColl[recurColl.length - 1][this.fields.endTime])).getTime() <\n                    resetTime(new Date(+currentData[this.fields.startTime])).getTime()) {\n                    this.parent.quickPopup.openRecurrenceValidationAlert('occurrenceAlert');\n                    return true;\n                }\n            }\n            return false;\n        }\n        else {\n            if (index === recurColl.length - 1) {\n                if (!(resetTime(new Date(+recurColl[index - 1][this.fields.endTime])).getTime() <\n                    resetTime(new Date(+currentData[this.fields.startTime])).getTime()) &&\n                    (resetTime(new Date(+recurColl[(recurColl.length - 1) - index][this.fields.startTime])).getTime() <=\n                        resetTime(new Date(+currentData[this.fields.endTime])).getTime())) {\n                    this.parent.quickPopup.openRecurrenceValidationAlert('sameDayAlert');\n                    return true;\n                }\n                else if (resetTime(new Date(+recurColl[(recurColl.length - 1) - index][this.fields.endTime])).getTime() >\n                    resetTime(new Date(+currentData[this.fields.startTime])).getTime()) {\n                    this.parent.quickPopup.openRecurrenceValidationAlert('occurrenceAlert');\n                    return true;\n                }\n            }\n            else if (!(((resetTime(new Date(+recurColl[index - 1][this.fields.endTime])).getTime() <\n                resetTime(new Date(+currentData[this.fields.startTime])).getTime()) ||\n                (resetTime(new Date(+recurColl[0][this.fields.startTime])).getTime() >\n                    resetTime(new Date(+currentData[this.fields.startTime])).getTime())) &&\n                ((resetTime(new Date(+recurColl[index + 1][this.fields.startTime])).getTime() >\n                    resetTime(new Date(+currentData[this.fields.endTime])).getTime()) ||\n                    (resetTime(new Date(+recurColl[recurColl.length - 1][this.fields.endTime])).getTime() <\n                        resetTime(new Date(+currentData[this.fields.startTime])).getTime())))) {\n                this.parent.quickPopup.openRecurrenceValidationAlert('sameDayAlert');\n                return true;\n            }\n            else if ((resetTime(new Date(+recurColl[index + 1][this.fields.endTime])).getTime() <\n                resetTime(new Date(+currentData[this.fields.startTime])).getTime()) ||\n                (resetTime(new Date(+recurColl[index - 1][this.fields.startTime])).getTime() >\n                    resetTime(new Date(+currentData[this.fields.endTime])).getTime())) {\n                this.parent.quickPopup.openRecurrenceValidationAlert('occurrenceAlert');\n                return true;\n            }\n        }\n        return false;\n    }\n    resourceSaveEvent(eventObj, action, currentAction) {\n        const lastResourceData = this.parent.resourceBase.resourceCollection.slice(-1)[0];\n        let resourceData = eventObj[lastResourceData.field];\n        resourceData = (resourceData instanceof Array) ? resourceData : [resourceData];\n        const lastLevel = this.parent.resourceBase.lastResourceLevel;\n        const eventList = [];\n        for (let i = 0; i < resourceData.length; i++) {\n            const events = extend({}, eventObj, null, true);\n            events[this.fields.id] = this.parent.eventBase.getEventMaxID();\n            const temp = [];\n            const addValues = () => {\n                if (action === 'Save' && i === resourceData.length - 1) {\n                    if (temp.length > 0) {\n                        temp[0][this.fields.id] = eventObj[this.fields.id];\n                        for (let k = 1; k < temp.length; k++) {\n                            temp[k][this.fields.id] = this.parent.eventBase.getEventMaxID(i);\n                            eventList.push(temp[k]);\n                            this.parent.saveEvent(temp[0], currentAction);\n                        }\n                    }\n                    else {\n                        events[this.fields.id] = eventObj[this.fields.id];\n                        this.parent.saveEvent(events, currentAction);\n                    }\n                }\n                else {\n                    if (temp.length > 0) {\n                        for (let j = 0; j < temp.length; j++) {\n                            temp[j][this.fields.id] = this.parent.eventBase.getEventMaxID(j);\n                            eventList.push(temp[j]);\n                        }\n                    }\n                    else {\n                        events[this.fields.id] = this.parent.eventBase.getEventMaxID(i);\n                        eventList.push(events);\n                    }\n                }\n            };\n            if (this.parent.activeViewOptions.group.byGroupID && (!isNullOrUndefined(lastLevel))) {\n                const lastResource = lastResourceData.dataSource;\n                const resCol = this.parent.resourceCollection;\n                let index;\n                if (resCol.length > 1) {\n                    index = findIndexInData(lastResource, lastResourceData.idField, resourceData[i], events, resCol);\n                }\n                else {\n                    index = findIndexInData(lastResource, lastResourceData.idField, resourceData[i]);\n                }\n                if (index < 0) {\n                    return;\n                }\n                const groupId = lastResource[index][lastResourceData.groupIDField];\n                const filter = lastLevel.filter((obj) => obj.resourceData[lastResourceData.idField] === resourceData[i]).\n                    filter((obj) => obj.resourceData[lastResourceData.groupIDField] === groupId)[0];\n                const groupOrder = filter.groupOrder;\n                for (let index = 0; index < this.parent.resourceBase.resourceCollection.length; index++) {\n                    const field = this.parent.resourceBase.resourceCollection[index].field;\n                    events[field] = (groupOrder[index] instanceof Array) ? groupOrder[index][0] : groupOrder[index];\n                }\n                addValues();\n            }\n            else {\n                for (let index = 0; index < this.parent.resourceBase.resourceCollection.length - 1; index++) {\n                    const field = this.parent.resourceBase.resourceCollection[index].field;\n                    if (events[field] instanceof Array && events[field].length > 1) {\n                        for (let k = 0; k < events[field].length; k++) {\n                            const event = extend({}, events, null, true);\n                            event[field] = eventObj[field][k];\n                            event[lastResourceData.field] = resourceData[i];\n                            temp.push(event);\n                        }\n                    }\n                    else {\n                        if (temp.length === 0) {\n                            events[field] = (eventObj[field] instanceof Array) ?\n                                eventObj[field][0] : eventObj[field];\n                            events[lastResourceData.field] = resourceData[i];\n                        }\n                        else {\n                            for (let l = 0; l < temp.length; l++) {\n                                temp[l][field] = (eventObj[field] instanceof Array) ?\n                                    eventObj[field][0] : eventObj[field];\n                            }\n                        }\n                    }\n                }\n                events[lastResourceData.field] = resourceData[i];\n                addValues();\n            }\n        }\n        if (eventList.length > 0) {\n            for (const event of eventList) {\n                event[this.fields.recurrenceException] = null;\n                event[this.fields.recurrenceID] = null;\n            }\n            this.parent.addEvent(eventList);\n        }\n    }\n    getEventIdFromForm() {\n        return this.element.querySelector('.' + FORM_CLASS).getAttribute('data-id');\n    }\n    getFormElements(className) {\n        let elements = [];\n        if (className === EVENT_WINDOW_DIALOG_CLASS) {\n            elements = [].slice.call(this.element.querySelectorAll('.' + EVENT_FIELD$1));\n        }\n        else {\n            elements = [].slice.call(this.parent.element.querySelectorAll('.' + className + ' .' + EVENT_FIELD$1));\n        }\n        return elements;\n    }\n    getValueFromElement(element) {\n        let value;\n        if (element.classList.contains('e-datepicker')) {\n            value = element.ej2_instances[0].value;\n        }\n        else if (element.classList.contains('e-datetimepicker')) {\n            value = element.ej2_instances[0].value;\n        }\n        else if (element.classList.contains('e-dropdownlist')) {\n            value = element.ej2_instances[0].value;\n        }\n        else if (element.classList.contains('e-multiselect')) {\n            value = element.ej2_instances[0].value;\n        }\n        else if (element.classList.contains('e-checkbox')) {\n            value = element.ej2_instances[0].checked;\n        }\n        else {\n            if (element.type === 'checkbox') {\n                value = element.checked;\n            }\n            else {\n                value = SanitizeHtmlHelper.sanitize(element.value);\n            }\n        }\n        return value;\n    }\n    setValueToElement(element, value) {\n        if (element.classList.contains('e-datepicker')) {\n            const instance = element.ej2_instances[0];\n            instance.value = value;\n            instance.dataBind();\n        }\n        else if (element.classList.contains('e-datetimepicker')) {\n            const instance = element.ej2_instances[0];\n            if (instance.element.classList.contains(EVENT_WINDOW_START_CLASS)) {\n                this.eventWindowTime.startTime = new Date('' + value);\n            }\n            else {\n                this.eventWindowTime.endTime = new Date('' + value);\n            }\n            instance.value = value;\n            instance.dataBind();\n        }\n        else if (element.classList.contains('e-dropdownlist')) {\n            const instance = element.ej2_instances[0];\n            instance.value = value;\n            instance.dataBind();\n        }\n        else if (element.classList.contains('e-multiselect')) {\n            const instance = element.ej2_instances[0];\n            instance.value = [];\n            instance.value = ((value instanceof Array) ? value : [value]);\n            instance.dataBind();\n        }\n        else if (element.classList.contains('e-checkbox')) {\n            const instance = element.ej2_instances[0];\n            instance.checked = value;\n            instance.dataBind();\n        }\n        else {\n            if (element.type !== 'checkbox') {\n                element.value = value || '';\n            }\n            else {\n                element.checked = value;\n            }\n        }\n    }\n    setDefaultValueToElement(element) {\n        if (element.classList.contains('e-datepicker')) {\n            const instance = element.ej2_instances[0];\n            instance.value = this.parent.getCurrentTime();\n            instance.dataBind();\n        }\n        else if (element.classList.contains('e-datetimepicker')) {\n            const instance = element.ej2_instances[0];\n            const dateValue = this.parent.getCurrentTime();\n            this.eventWindowTime = { startTime: dateValue, endTime: dateValue };\n            instance.value = dateValue;\n            instance.dataBind();\n        }\n        else if (element.classList.contains('e-dropdownlist')) {\n            const instance = element.ej2_instances[0];\n            instance.value = null;\n            instance.dataBind();\n        }\n        else if (element.classList.contains('e-multiselect')) {\n            const instance = element.ej2_instances[0];\n            instance.value = [];\n            instance.dataBind();\n        }\n        else if (element.classList.contains('e-checkbox')) {\n            const instance = element.ej2_instances[0];\n            instance.checked = false;\n            instance.dataBind();\n        }\n        else {\n            if (element.type === 'checkbox') {\n                element.checked = false;\n            }\n            else {\n                element.value = '';\n            }\n        }\n    }\n    getInstance(className) {\n        const element = this.element.querySelector('.' + className);\n        return element ? element.ej2_instances[0] : null;\n    }\n    eventDelete(event) {\n        if (this.isEnterKey) {\n            this.isEnterKey = false;\n            return;\n        }\n        switch (this.parent.currentAction) {\n            case 'EditOccurrence':\n                if (!isNullOrUndefined(this.parent.activeEventData.event[this.parent.eventFields.recurrenceRule])) {\n                    this.parent.currentAction = 'DeleteOccurrence';\n                }\n                else {\n                    this.parent.currentAction = 'Delete';\n                }\n                break;\n            case 'EditSeries':\n                this.parent.currentAction = 'DeleteSeries';\n                break;\n            case 'Save':\n                this.parent.currentAction = 'Delete';\n                break;\n            case 'EditFollowingEvents':\n                if (!isNullOrUndefined(this.parent.activeEventData.event[this.parent.eventFields.recurrenceRule])) {\n                    this.parent.currentAction = 'DeleteFollowingEvents';\n                }\n                break;\n        }\n        this.dialogEvent = event;\n        this.isCrudAction = false;\n        this.dialogObject.hide();\n        this.parent.quickPopup.openDeleteAlert();\n    }\n    getRecurrenceEditorInstance() {\n        if (this.parent.isAdaptive && !this.repeatDialogObject) {\n            this.renderRepeatDialog();\n        }\n        return this.recurrenceEditor;\n    }\n    destroyComponents() {\n        const formElements = this.getFormElements(EVENT_WINDOW_DIALOG_CLASS);\n        for (const element of formElements) {\n            let instance;\n            if (element.classList.contains('e-datetimepicker')) {\n                instance = element.ej2_instances;\n            }\n            else if (element.classList.contains('e-datepicker')) {\n                instance = element.ej2_instances;\n            }\n            else if (element.classList.contains('e-checkbox')) {\n                instance = element.ej2_instances;\n            }\n            else if (element.classList.contains('e-dropdownlist')) {\n                instance = element.ej2_instances;\n            }\n            else if (element.classList.contains('e-multiselect')) {\n                instance = element.ej2_instances;\n            }\n            if (instance && instance[0]) {\n                instance[0].destroy();\n            }\n        }\n        if (this.buttonObj) {\n            this.buttonObj.destroy();\n        }\n    }\n    destroy(isIgnore) {\n        if (this.parent && !this.parent.isDestroyed) {\n            this.parent.resetTemplates(['editorTemplate']);\n        }\n        this.destroyComponents();\n        if (this.recurrenceEditor) {\n            this.recurrenceEditor.destroy();\n            this.recurrenceEditor = null;\n        }\n        if (this.fieldValidator) {\n            this.fieldValidator.destroy();\n            this.fieldValidator = null;\n        }\n        if (this.repeatDialogObject) {\n            this.repeatDialogObject.destroy();\n            this.repeatDialogObject = null;\n        }\n        if (this.dialogObject) {\n            if (this.dialogObject.element) {\n                EventHandler.remove(this.dialogObject.element, 'keydown', this.preventEventSave);\n            }\n            this.dialogObject.destroy();\n            this.dialogObject = null;\n        }\n        if (this.element) {\n            remove(this.element);\n            this.element = null;\n        }\n        if (!isIgnore) {\n            this.l10n = null;\n            this.parent = null;\n            this.fields = null;\n            this.buttonObj = null;\n            this.repeatStatus = null;\n            this.eventWindowTime = null;\n        }\n    }\n}\n\n/**\n * Virtual Scroll\n */\nclass VirtualScroll {\n    constructor(parent) {\n        this.translateY = 0;\n        this.itemSize = 60;\n        this.bufferCount = 3;\n        this.renderedLength = 0;\n        this.averageRowHeight = 0;\n        this.isScrollHeightNull = true;\n        this.parent = parent;\n        this.addEventListener();\n    }\n    addEventListener() {\n        if (!this.parent || this.parent && this.parent.isDestroyed) {\n            return;\n        }\n        this.parent.on(virtualScroll, this.virtualScrolling, this);\n    }\n    removeEventListener() {\n        if (!this.parent || this.parent && this.parent.isDestroyed) {\n            return;\n        }\n        this.parent.off(virtualScroll, this.virtualScrolling);\n    }\n    getRenderedCount() {\n        this.setItemSize();\n        return Math.ceil(this.parent.element.clientHeight / this.itemSize) + this.bufferCount;\n    }\n    setTranslateValue() {\n        const resWrap = this.parent.element.querySelector('.' + RESOURCE_COLUMN_WRAP_CLASS);\n        const conWrap = this.parent.element.querySelector('.' + CONTENT_WRAP_CLASS);\n        const eventWrap = this.parent.element.querySelector('.' + EVENT_TABLE_CLASS);\n        const timeIndicator = this.parent.element.querySelector('.' + CURRENT_TIMELINE_CLASS);\n        this.renderVirtualTrackHeight(conWrap, resWrap);\n        this.setTranslate(resWrap, conWrap, eventWrap, timeIndicator);\n    }\n    renderVirtualTrackHeight(contentWrap, resourceWrap) {\n        this.parent.resourceBase.setExpandedResources();\n        if (this.isScrollHeightNull) {\n            const wrap = createElement('div', { className: VIRTUAL_TRACK_CLASS });\n            const resWrap = [].slice.call((resourceWrap).querySelectorAll('table td'));\n            const startIndex = parseInt(resWrap[0].getAttribute('data-group-index'), 10);\n            const endIndex = parseInt(resWrap[resWrap.length - 1].getAttribute('data-group-index'), 10);\n            this.parent.resourceBase.renderedResources = this.parent.resourceBase.expandedResources.filter((resource) => (resource.groupIndex >= startIndex && resource.groupIndex <= endIndex));\n            this.setItemSize();\n            wrap.style.height = (this.parent.resourceBase.expandedResources.length * this.itemSize) + 'px';\n            this.isScrollHeightNull = false;\n            const virtual = this.parent.element.querySelector('.' + VIRTUAL_TRACK_CLASS);\n            if (!isNullOrUndefined(virtual)) {\n                remove(virtual);\n            }\n            contentWrap.appendChild(wrap);\n        }\n    }\n    renderVirtualTrack(contentWrap) {\n        const wrap = createElement('div', { className: VIRTUAL_TRACK_CLASS });\n        wrap.style.height = (this.parent.resourceBase.expandedResources.length * this.itemSize) + 'px';\n        contentWrap.appendChild(wrap);\n    }\n    updateVirtualScrollHeight() {\n        const virtual = this.parent.element.querySelector('.' + VIRTUAL_TRACK_CLASS);\n        const lastResourceIndex = this.parent.resourceBase.expandedResources[this.parent.resourceBase.expandedResources.length - 1].groupIndex;\n        const lastRenderIndex = this.parent.resourceBase.renderedResources[this.parent.resourceBase.renderedResources.length - 1].groupIndex;\n        if (lastRenderIndex !== lastResourceIndex) {\n            const conTable = this.parent.element.querySelector('.' + CONTENT_TABLE_CLASS);\n            this.renderedLength = conTable.querySelector('tbody').children.length;\n            virtual.style.height = (conTable.offsetHeight + (this.parent.resourceBase.expandedResources.length - (this.renderedLength)) *\n                conTable.offsetHeight / this.renderedLength) + 'px';\n        }\n        else {\n            virtual.style.height = '';\n        }\n        this.averageRowHeight = virtual.offsetHeight / this.parent.resourceBase.expandedResources.length;\n    }\n    updateVirtualTrackHeight(wrap) {\n        const resourceCount = this.parent.resourceBase.renderedResources.length;\n        if (resourceCount !== this.getRenderedCount()) {\n            wrap.style.height = this.parent.element.querySelector('.e-content-wrap').clientHeight + 'px';\n            const resWrap = this.parent.element.querySelector('.' + RESOURCE_COLUMN_WRAP_CLASS);\n            const conWrap = this.parent.element.querySelector('.' + CONTENT_WRAP_CLASS);\n            const eventWrap = this.parent.element.querySelector('.' + EVENT_TABLE_CLASS);\n            this.translateY = 0;\n            this.setTranslate(resWrap, conWrap, eventWrap);\n        }\n        else {\n            const lastRenderIndex = this.parent.resourceBase.renderedResources[resourceCount - 1].groupIndex;\n            const lastCollIndex = this.parent.resourceBase.expandedResources[this.parent.resourceBase.expandedResources.length - 1].groupIndex;\n            let renderedResCount = resourceCount + (lastCollIndex - lastRenderIndex);\n            renderedResCount = (renderedResCount > this.parent.resourceBase.expandedResources.length) ?\n                this.parent.resourceBase.expandedResources.length : renderedResCount;\n            wrap.style.height = (renderedResCount * this.itemSize) + 'px';\n        }\n    }\n    setItemSize() {\n        this.itemSize = getElementHeightFromClass(this.parent.activeView.element, WORK_CELLS_CLASS) || this.itemSize;\n    }\n    renderEvents() {\n        this.setTabIndex();\n        this.parent.refreshEvents(false);\n        this.parent.notify(contentReady, {});\n        this.parent.hideSpinner();\n    }\n    virtualScrolling() {\n        if (this.parent.quickPopup) {\n            this.parent.quickPopup.quickPopupHide();\n            this.parent.quickPopup.morePopup.hide();\n        }\n        const resWrap = this.parent.element.querySelector('.' + RESOURCE_COLUMN_WRAP_CLASS);\n        const conWrap = this.parent.element.querySelector('.' + CONTENT_WRAP_CLASS);\n        const eventWrap = this.parent.element.querySelector('.' + EVENT_TABLE_CLASS);\n        const timeIndicator = this.parent.element.querySelector('.' + CURRENT_TIMELINE_CLASS);\n        const conTable = this.parent.element.querySelector('.' + CONTENT_TABLE_CLASS);\n        this.renderedLength = resWrap.querySelector('tbody').children.length;\n        const firstTDIndex = parseInt(resWrap.querySelector('tbody td').getAttribute('data-group-index'), 10);\n        const scrollHeight = this.parent.rowAutoHeight ?\n            (conTable.offsetHeight - conWrap.offsetHeight) : this.bufferCount * this.itemSize;\n        addClass([conWrap], 'e-transition');\n        let resCollection = [];\n        if ((conWrap.scrollTop) - this.translateY < 0) {\n            resCollection = this.upScroll(conWrap, firstTDIndex);\n        }\n        else if (conWrap.scrollTop - this.translateY > scrollHeight) {\n            resCollection = this.downScroll(conWrap, firstTDIndex);\n        }\n        if (!isNullOrUndefined(resCollection) && resCollection.length > 0) {\n            this.parent.showSpinner();\n            const selectedEle = this.parent.getSelectedElements();\n            this.focusedEle = selectedEle[selectedEle.length - 1] || this.focusedEle;\n            this.updateContent(resWrap, conWrap, eventWrap, resCollection);\n            this.setTranslate(resWrap, conWrap, eventWrap, timeIndicator);\n            if (this.parent.dragAndDropModule && this.parent.dragAndDropModule.actionObj.action === 'drag') {\n                this.parent.dragAndDropModule.navigationWrapper();\n            }\n            window.clearTimeout(this.timeValue);\n            this.timeValue = window.setTimeout(() => { this.renderEvents(); }, 250);\n        }\n    }\n    upScroll(conWrap, firstTDIndex) {\n        let index = 0;\n        index = (~~(conWrap.scrollTop / this.itemSize) + Math.ceil(conWrap.clientHeight / this.itemSize)) - this.renderedLength;\n        if (this.parent.rowAutoHeight) {\n            index = (index > firstTDIndex) ? firstTDIndex - this.bufferCount : index;\n        }\n        index = (index > 0) ? index : 0;\n        const prevSetCollection = this.getBufferCollection(index, index + this.renderedLength);\n        this.parent.resourceBase.renderedResources = prevSetCollection;\n        if (firstTDIndex === 0) {\n            this.translateY = conWrap.scrollTop;\n        }\n        else {\n            let height = (this.parent.rowAutoHeight) ? this.averageRowHeight : this.itemSize;\n            height = (height > 0) ? height : this.itemSize;\n            this.translateY = (conWrap.scrollTop - (this.bufferCount * height) > 0) ?\n                conWrap.scrollTop - (this.bufferCount * height) : 0;\n        }\n        return prevSetCollection;\n    }\n    downScroll(conWrap, firstTDIndex) {\n        const lastResource = this.parent.resourceBase.\n            renderedResources[this.parent.resourceBase.renderedResources.length - 1].groupIndex;\n        const lastResourceIndex = this.parent.resourceBase.expandedResources[this.parent.resourceBase.expandedResources.length - 1].groupIndex;\n        if (lastResource === lastResourceIndex) {\n            return null;\n        }\n        let nextSetResIndex = 0;\n        nextSetResIndex = ~~(conWrap.scrollTop / this.itemSize);\n        if (this.parent.rowAutoHeight) {\n            nextSetResIndex = ~~((conWrap.scrollTop - this.translateY) / this.averageRowHeight) + firstTDIndex;\n            nextSetResIndex = (nextSetResIndex > firstTDIndex + this.bufferCount) ? nextSetResIndex : firstTDIndex + this.bufferCount;\n        }\n        let lastIndex = nextSetResIndex + this.renderedLength;\n        lastIndex = (lastIndex > this.parent.resourceBase.expandedResources.length) ?\n            nextSetResIndex + (this.parent.resourceBase.expandedResources.length - nextSetResIndex) : lastIndex;\n        const nextSetCollection = this.getBufferCollection(lastIndex - this.renderedLength, lastIndex);\n        this.translateY = conWrap.scrollTop;\n        return nextSetCollection;\n    }\n    updateContent(resWrap, conWrap, eventWrap, resCollection) {\n        const renderedLength = resWrap.querySelector('tbody').children.length;\n        if (document.activeElement && document.activeElement.classList.contains(RESOURCE_CELLS_CLASS)) {\n            this.isResourceCell = true;\n            this.parent.element.focus();\n        }\n        for (let i = 0; i < renderedLength; i++) {\n            remove(resWrap.querySelector('tbody tr'));\n            remove(conWrap.querySelector('tbody tr'));\n            remove(eventWrap.querySelector('div'));\n        }\n        this.parent.resourceBase.renderedResources = resCollection;\n        const resourceRows = this.parent.resourceBase.getContentRows(resCollection, true);\n        const contentRows = this.parent.activeView.getContentRows();\n        const eventRows = this.parent.activeView.getEventRows(resCollection.length);\n        append(resourceRows, resWrap.querySelector('tbody'));\n        append(contentRows, conWrap.querySelector('tbody'));\n        append(eventRows, eventWrap);\n    }\n    getBufferCollection(startIndex, endIndex) {\n        return this.parent.resourceBase.expandedResources.slice(startIndex, endIndex);\n    }\n    setTranslate(resWrap, conWrap, eventWrap, timeIndicator) {\n        setStyleAttribute(resWrap.querySelector('table'), { transform: `translateY(${this.translateY}px)` });\n        setStyleAttribute(conWrap.querySelector('table'), { transform: `translateY(${this.translateY}px)` });\n        setStyleAttribute(eventWrap, { transform: `translateY(${this.translateY}px)` });\n        if (!isNullOrUndefined(timeIndicator)) {\n            setStyleAttribute(timeIndicator, { transform: `translateY(${this.translateY}px)` });\n        }\n    }\n    updateFocusedWorkCell() {\n        if (this.focusedEle) {\n            const date = parseInt(this.focusedEle.getAttribute('data-date'), 10);\n            const groupIndex = parseInt(this.focusedEle.getAttribute('data-group-index'), 10);\n            const ele = this.parent.element.querySelector(`.${WORK_CELLS_CLASS}[data-date=\"${date}\"][data-group-index=\"${groupIndex}\"]`);\n            if (ele) {\n                this.parent.addSelectedClass([ele], ele, true);\n            }\n            this.focusedEle = null;\n        }\n    }\n    setTabIndex() {\n        const resColWrap = this.parent.element.querySelector('.' + RESOURCE_COLUMN_WRAP_CLASS);\n        const resCells = [].slice.call(this.parent.element.querySelectorAll('.' + RESOURCE_CELLS_CLASS));\n        if (resCells && resColWrap) {\n            resCells.forEach((element) => {\n                if (element.getBoundingClientRect().top >= resColWrap.getBoundingClientRect().top) {\n                    element.setAttribute('tabindex', '0');\n                }\n            });\n        }\n        const focusResCell = this.parent.element.querySelector(`.${RESOURCE_CELLS_CLASS}[tabindex=\"${0}\"]`);\n        if (this.isResourceCell && focusResCell) {\n            focusResCell.focus();\n            this.isResourceCell = false;\n        }\n    }\n    destroy() {\n        this.removeEventListener();\n    }\n}\n\n/**\n * Schedule DOM rendering\n */\nclass Render {\n    constructor(parent) {\n        this.parent = parent;\n    }\n    render(viewName, isDataRefresh = true) {\n        this.initializeLayout(viewName);\n        if (this.parent.activeView && isDataRefresh) {\n            this.parent.crudModule.refreshDataManager();\n        }\n    }\n    initializeLayout(viewName) {\n        if (this.parent.activeView) {\n            this.parent.resetTemplates();\n            this.parent.activeView.removeEventListener();\n            this.parent.activeView.destroy();\n        }\n        switch (viewName) {\n            case 'Day':\n                this.parent.activeView = this.parent.dayModule;\n                break;\n            case 'Week':\n                this.parent.activeView = this.parent.weekModule;\n                break;\n            case 'WorkWeek':\n                this.parent.activeView = this.parent.workWeekModule;\n                break;\n            case 'Month':\n                this.parent.activeView = this.parent.monthModule;\n                break;\n            case 'Year':\n                this.parent.activeView = this.parent.yearModule;\n                break;\n            case 'Agenda':\n                this.parent.activeView = this.parent.agendaModule;\n                break;\n            case 'MonthAgenda':\n                this.parent.activeView = this.parent.monthAgendaModule;\n                break;\n            case 'TimelineDay':\n                this.parent.activeView = this.parent.timelineViewsModule;\n                this.parent.activeView.viewClass = 'e-timeline-day-view';\n                break;\n            case 'TimelineWorkWeek':\n                this.parent.activeView = this.parent.timelineViewsModule;\n                this.parent.activeView.viewClass = 'e-timeline-work-week-view';\n                break;\n            case 'TimelineWeek':\n                this.parent.activeView = this.parent.timelineViewsModule;\n                this.parent.activeView.viewClass = 'e-timeline-week-view';\n                break;\n            case 'TimelineMonth':\n                this.parent.activeView = this.parent.timelineMonthModule;\n                break;\n            case 'TimelineYear':\n                this.parent.activeView = this.parent.timelineYearModule;\n                break;\n        }\n        if (isNullOrUndefined(this.parent.activeView)) {\n            const firstView = this.parent.viewCollections[0].option;\n            if (firstView) {\n                this.parent.setProperties({ currentView: firstView }, true);\n                if (this.parent.headerModule) {\n                    this.parent.headerModule.updateActiveView();\n                    this.parent.headerModule.setCalendarView();\n                }\n                return this.initializeLayout(firstView);\n            }\n            throw Error('Inject required modules');\n        }\n        this.parent.activeView.viewIndex = this.parent.viewIndex;\n        this.updateLabelText(viewName);\n        this.parent.activeView.addEventListener();\n        this.parent.activeView.getRenderDates();\n        this.parent.uiStateValues.isGroupAdaptive = this.parent.activeViewOptions.group.resources.length > 0 &&\n            (this.parent.enableAdaptiveUI && !this.parent.isAdaptive ||\n                this.parent.isAdaptive && this.parent.activeViewOptions.group.enableCompactView);\n        if (this.parent.virtualScrollModule) {\n            this.parent.virtualScrollModule.destroy();\n            this.parent.virtualScrollModule = null;\n        }\n        if (this.parent.currentView.indexOf('Timeline') !== -1 && this.parent.currentView.indexOf('Year') === -1\n            && this.parent.activeViewOptions.allowVirtualScrolling\n            && this.parent.activeViewOptions.group.resources.length > 0 && !this.parent.uiStateValues.isGroupAdaptive) {\n            this.parent.virtualScrollModule = new VirtualScroll(this.parent);\n            this.parent.uiStateValues.top = 0;\n        }\n        this.updateHeader();\n        this.parent.activeView.renderLayout(CURRENT_PANEL_CLASS);\n        this.parent.renderTemplates();\n        if (this.parent.eventTooltip) {\n            this.parent.eventTooltip.destroy();\n            this.parent.eventTooltip = null;\n        }\n        if (this.parent.eventSettings.enableTooltip || (this.parent.activeViewOptions.group.resources.length > 0\n            && this.parent.activeViewOptions.group.headerTooltipTemplate)) {\n            this.parent.eventTooltip = new EventTooltip(this.parent);\n        }\n    }\n    updateHeader() {\n        if (this.parent.headerModule) {\n            this.parent.headerModule.setDayOfWeek(this.parent.activeViewOptions.firstDayOfWeek);\n            if (this.parent.activeViewOptions.readonly) {\n                addClass([this.parent.element], READ_ONLY);\n            }\n            else if (this.parent.element.classList.contains(READ_ONLY)) {\n                removeClass([this.parent.element], READ_ONLY);\n            }\n            this.parent.headerModule.updateDateRange(this.parent.activeView.getDateRangeText());\n            this.parent.headerModule.updateHeaderItems('remove');\n        }\n    }\n    updateLabelText(view) {\n        const content = this.parent.activeView.getLabelText(view);\n        this.parent.element.setAttribute('role', 'main');\n        this.parent.element.setAttribute('aria-label', content);\n    }\n}\n\nvar __decorate$2 = (undefined && undefined.__decorate) || function (decorators, target, key, desc) {\n    var c = arguments.length, r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d;\n    if (typeof Reflect === \"object\" && typeof Reflect.decorate === \"function\") r = Reflect.decorate(decorators, target, key, desc);\n    else for (var i = decorators.length - 1; i >= 0; i--) if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;\n    return c > 3 && r && Object.defineProperty(target, key, r), r;\n};\n/**\n * A class that represents the configuration of working hours related options of scheduler.\n */\nclass WorkHours extends ChildProperty {\n}\n__decorate$2([\n    Property(true)\n], WorkHours.prototype, \"highlight\", void 0);\n__decorate$2([\n    Property('09:00')\n], WorkHours.prototype, \"start\", void 0);\n__decorate$2([\n    Property('18:00')\n], WorkHours.prototype, \"end\", void 0);\n\nvar __decorate$3 = (undefined && undefined.__decorate) || function (decorators, target, key, desc) {\n    var c = arguments.length, r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d;\n    if (typeof Reflect === \"object\" && typeof Reflect.decorate === \"function\") r = Reflect.decorate(decorators, target, key, desc);\n    else for (var i = decorators.length - 1; i >= 0; i--) if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;\n    return c > 3 && r && Object.defineProperty(target, key, r), r;\n};\n/**\n * A class that represents the configuration of options related to timescale on scheduler.\n */\nclass TimeScale extends ChildProperty {\n}\n__decorate$3([\n    Property(true)\n], TimeScale.prototype, \"enable\", void 0);\n__decorate$3([\n    Property(60)\n], TimeScale.prototype, \"interval\", void 0);\n__decorate$3([\n    Property(2)\n], TimeScale.prototype, \"slotCount\", void 0);\n__decorate$3([\n    Property()\n], TimeScale.prototype, \"minorSlotTemplate\", void 0);\n__decorate$3([\n    Property()\n], TimeScale.prototype, \"majorSlotTemplate\", void 0);\n\nvar __decorate$4 = (undefined && undefined.__decorate) || function (decorators, target, key, desc) {\n    var c = arguments.length, r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d;\n    if (typeof Reflect === \"object\" && typeof Reflect.decorate === \"function\") r = Reflect.decorate(decorators, target, key, desc);\n    else for (var i = decorators.length - 1; i >= 0; i--) if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;\n    return c > 3 && r && Object.defineProperty(target, key, r), r;\n};\n/**\n * A class that defines the template options available to customize the quick popup of scheduler.\n */\nclass QuickInfoTemplates extends ChildProperty {\n}\n__decorate$4([\n    Property('Both')\n], QuickInfoTemplates.prototype, \"templateType\", void 0);\n__decorate$4([\n    Property()\n], QuickInfoTemplates.prototype, \"header\", void 0);\n__decorate$4([\n    Property()\n], QuickInfoTemplates.prototype, \"content\", void 0);\n__decorate$4([\n    Property()\n], QuickInfoTemplates.prototype, \"footer\", void 0);\n\nvar __decorate$5 = (undefined && undefined.__decorate) || function (decorators, target, key, desc) {\n    var c = arguments.length, r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d;\n    if (typeof Reflect === \"object\" && typeof Reflect.decorate === \"function\") r = Reflect.decorate(decorators, target, key, desc);\n    else for (var i = decorators.length - 1; i >= 0; i--) if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;\n    return c > 3 && r && Object.defineProperty(target, key, r), r;\n};\n/**\n * A class that represents the header rows related configurations on timeline views.\n */\nclass HeaderRows extends ChildProperty {\n}\n__decorate$5([\n    Property()\n], HeaderRows.prototype, \"option\", void 0);\n__decorate$5([\n    Property()\n], HeaderRows.prototype, \"template\", void 0);\n\n/* eslint-disable @typescript-eslint/no-explicit-any */\n/* eslint-disable max-len */\n/**\n * Schedule CRUD operations\n */\nclass Crud {\n    constructor(parent) {\n        this.parent = parent;\n        this.crudObj = { sourceEvent: null, targetEvent: null, isCrudAction: false };\n    }\n    getQuery() {\n        const start = this.parent.activeView.startDate();\n        const end = this.parent.activeView.endDate();\n        return this.parent.dataModule.generateQuery(start, end);\n    }\n    getTable() {\n        if (this.parent.eventSettings.query) {\n            const query = this.parent.eventSettings.query.clone();\n            return query.fromTable;\n        }\n        return null;\n    }\n    refreshDataManager() {\n        if (!this.parent.activeView) {\n            return;\n        }\n        const start = this.parent.activeView.startDate();\n        const end = this.parent.activeView.endDate();\n        const dataManager = this.parent.dataModule.getData(this.parent.dataModule.generateQuery(start, end));\n        dataManager.then((e) => this.dataManagerSuccess(e)).catch((e) => this.dataManagerFailure(e));\n    }\n    dataManagerSuccess(e) {\n        if (!this.parent || this.parent && this.parent.isDestroyed) {\n            return;\n        }\n        this.parent.trigger(dataBinding, e, (args) => {\n            const resultData = extend([], args.result, null, true);\n            this.parent.eventsData = resultData.filter((data) => !data[this.parent.eventFields.isBlock]);\n            this.parent.blockData = resultData.filter((data) => data[this.parent.eventFields.isBlock]);\n            this.parent.refreshEvents(false);\n            if (this.parent.dragAndDropModule && this.parent.dragAndDropModule.actionObj.action === 'drag') {\n                this.parent.dragAndDropModule.navigationWrapper();\n            }\n            this.parent.trigger(dataBound, null, () => {\n                this.parent.hideSpinner();\n                if (this.parent.isPrinting) {\n                    this.parent.notify(print$1, {});\n                }\n            });\n        });\n    }\n    dataManagerFailure(e) {\n        if (!this.parent || this.parent && this.parent.isDestroyed) {\n            return;\n        }\n        this.parent.trigger(actionFailure, { error: e }, () => this.parent.hideSpinner());\n    }\n    refreshData(args) {\n        const actionArgs = {\n            requestType: args.requestType, cancel: false, data: args.data,\n            addedRecords: args.editParams.addedRecords, changedRecords: args.editParams.changedRecords,\n            deletedRecords: args.editParams.deletedRecords\n        };\n        if (this.parent.dragAndDropModule && this.parent.dragAndDropModule.actionObj && this.parent.dragAndDropModule.actionObj.element) {\n            this.parent.dragAndDropModule.actionObj.element.style.display = 'none';\n        }\n        if (this.parent.resizeModule && this.parent.resizeModule.actionObj && this.parent.resizeModule.actionObj.element) {\n            this.parent.resizeModule.actionObj.element.style.display = 'none';\n        }\n        if (this.parent.activeViewOptions.group.resources.length > 0 && !this.parent.activeViewOptions.group.allowGroupEdit\n            && !this.parent.rowAutoHeight && !this.parent.virtualScrollModule && this.parent.activeViewOptions.group.byGroupID) {\n            if (args.requestType === 'eventCreated' || args.requestType === 'eventRemoved') {\n                this.crudObj.isCrudAction = true;\n                this.crudObj.sourceEvent = [];\n                const crudData = args.data instanceof Array ? (args.data.length === 0 &&\n                    args.requestType === 'eventRemoved' ? args.editParams.deletedRecords : args.data) :\n                    ((typeof args.data === 'string' || typeof args.data === 'number') && args.requestType === 'eventRemoved') ?\n                        args.editParams.deletedRecords : [args.data];\n                for (const data of crudData) {\n                    this.crudObj.isCrudAction = !(args.requestType === 'eventRemoved' && !isNullOrUndefined(data.parent));\n                    const groupIndex = this.parent.eventBase.getGroupIndexFromEvent(data);\n                    if (groupIndex > -1 && this.parent.crudModule.crudObj.sourceEvent.filter((tdData) => tdData.groupIndex === groupIndex).length === 0\n                        && this.crudObj.isCrudAction) {\n                        this.crudObj.sourceEvent.push(this.parent.resourceBase.lastResourceLevel[groupIndex]);\n                    }\n                }\n                this.crudObj.targetEvent = this.crudObj.sourceEvent;\n            }\n        }\n        if (this.parent.dataModule.dataManager.dataSource.offline) {\n            this.parent.trigger(actionComplete, actionArgs, (offlineArgs) => {\n                if (!offlineArgs.cancel) {\n                    this.refreshDataManager();\n                }\n            });\n        }\n        else {\n            args.promise.then(() => {\n                if (!this.parent || this.parent && this.parent.isDestroyed) {\n                    return;\n                }\n                this.parent.trigger(actionComplete, actionArgs, (onlineArgs) => {\n                    if (!onlineArgs.cancel) {\n                        this.refreshDataManager();\n                    }\n                });\n            }).catch((e) => {\n                if (!this.parent || this.parent && this.parent.isDestroyed) {\n                    return;\n                }\n                this.parent.trigger(actionFailure, { error: e });\n            });\n        }\n    }\n    addEvent(eventData) {\n        if (this.parent.eventSettings.allowAdding && !this.parent.activeViewOptions.readonly) {\n            if (!this.isBlockEvent(eventData) && this.parent.eventBase.isBlockRange(eventData)) {\n                this.parent.quickPopup.openValidationError('blockAlert', eventData);\n                return;\n            }\n            const addEvents = (eventData instanceof Array) ? eventData : [eventData];\n            const args = {\n                requestType: 'eventCreate', cancel: false, data: addEvents,\n                addedRecords: addEvents, changedRecords: [], deletedRecords: []\n            };\n            this.parent.trigger(actionBegin, args, (addArgs) => {\n                if (!addArgs.cancel) {\n                    const fields = this.parent.eventFields;\n                    const editParams = { addedRecords: [], changedRecords: [], deletedRecords: [] };\n                    let promise;\n                    if (addArgs.addedRecords instanceof Array) {\n                        for (let event of addArgs.addedRecords) {\n                            event = this.parent.eventBase.updateEventDateTime(event);\n                            const eventData = extend({}, this.parent.eventBase.processTimezone(event, true), null, true);\n                            editParams.addedRecords.push(eventData);\n                        }\n                        promise = this.parent.dataModule.dataManager.saveChanges(editParams, fields.id, this.getTable(), this.getQuery());\n                    }\n                    else {\n                        const event = this.parent.eventBase.processTimezone(addArgs.addedRecords, true);\n                        editParams.addedRecords.push(event);\n                        promise = this.parent.dataModule.dataManager.insert(event, this.getTable(), this.getQuery());\n                    }\n                    const crudArgs = {\n                        requestType: 'eventCreated', cancel: false, data: addArgs.addedRecords, promise: promise, editParams: editParams\n                    };\n                    this.refreshData(crudArgs);\n                }\n            });\n        }\n    }\n    saveEvent(eventData, action) {\n        if (this.parent.eventSettings.allowEditing && !this.parent.activeViewOptions.readonly) {\n            if (this.parent.currentAction !== 'EditFollowingEvents' && !this.isBlockEvent(eventData)\n                && this.parent.eventBase.isBlockRange(eventData)) {\n                this.parent.quickPopup.openValidationError('blockAlert', eventData);\n                return;\n            }\n            this.parent.currentAction = action;\n            if (action) {\n                switch (action) {\n                    case 'Save':\n                        this.processSave(eventData);\n                        break;\n                    case 'EditOccurrence':\n                        this.processOccurrences(eventData, action);\n                        break;\n                    case 'EditFollowingEvents':\n                        this.processFollowSeries(eventData, action);\n                        break;\n                    case 'EditSeries':\n                        this.processEntireSeries(eventData, action);\n                        break;\n                }\n            }\n            else {\n                const updateEvents = (eventData instanceof Array) ? eventData : [eventData];\n                const args = {\n                    requestType: 'eventChange', cancel: false, data: eventData,\n                    addedRecords: [], changedRecords: updateEvents, deletedRecords: []\n                };\n                this.parent.trigger(actionBegin, args, (saveArgs) => {\n                    if (!saveArgs.cancel) {\n                        let promise;\n                        const fields = this.parent.eventFields;\n                        const editParams = { addedRecords: [], changedRecords: [], deletedRecords: [] };\n                        if (saveArgs.changedRecords instanceof Array) {\n                            for (let event of saveArgs.changedRecords) {\n                                event = this.parent.eventBase.updateEventDateTime(event);\n                                const eventData = extend({}, this.parent.eventBase.processTimezone(event, true), null, true);\n                                editParams.changedRecords.push(eventData);\n                            }\n                            promise = this.parent.dataModule.dataManager.saveChanges(editParams, fields.id, this.getTable(), this.getQuery());\n                        }\n                        else {\n                            const event = this.parent.eventBase.processTimezone(saveArgs.changedRecords, true);\n                            editParams.changedRecords.push(event);\n                            promise = this.parent.dataModule.dataManager.update(fields.id, event, this.getTable(), this.getQuery());\n                        }\n                        const crudArgs = {\n                            requestType: 'eventChanged', cancel: false,\n                            data: saveArgs.changedRecords, promise: promise, editParams: editParams\n                        };\n                        this.refreshData(crudArgs);\n                    }\n                });\n            }\n        }\n    }\n    deleteEvent(eventData, action) {\n        if (this.parent.eventSettings.allowDeleting && !this.parent.activeViewOptions.readonly) {\n            this.parent.currentAction = action;\n            let deleteEvents = [];\n            if (typeof eventData === 'string' || typeof eventData === 'number') {\n                deleteEvents = this.parent.eventsData.filter((eventObj) => eventObj[this.parent.eventFields.id] === eventData);\n            }\n            else {\n                deleteEvents = (eventData instanceof Array ? eventData : [eventData]);\n            }\n            if (action) {\n                switch (action) {\n                    case 'Delete':\n                        this.processDelete(deleteEvents);\n                        break;\n                    case 'DeleteOccurrence':\n                        this.processOccurrences(deleteEvents, action);\n                        break;\n                    case 'DeleteFollowingEvents':\n                        this.processFollowSeries(deleteEvents, action);\n                        break;\n                    case 'DeleteSeries':\n                        this.processEntireSeries(deleteEvents, action);\n                        break;\n                }\n            }\n            else {\n                const args = {\n                    requestType: 'eventRemove', cancel: false, data: eventData,\n                    addedRecords: [], changedRecords: [], deletedRecords: deleteEvents\n                };\n                this.parent.trigger(actionBegin, args, (deleteArgs) => {\n                    if (!deleteArgs.cancel) {\n                        let promise;\n                        const fields = this.parent.eventFields;\n                        const editParams = { addedRecords: [], changedRecords: [], deletedRecords: [] };\n                        if (deleteArgs.deletedRecords.length > 1) {\n                            editParams.deletedRecords = editParams.deletedRecords.concat(deleteArgs.deletedRecords);\n                            promise = this.parent.dataModule.dataManager.saveChanges(editParams, fields.id, this.getTable(), this.getQuery());\n                        }\n                        else {\n                            editParams.deletedRecords.push(deleteArgs.deletedRecords[0]);\n                            promise = this.parent.dataModule.dataManager.remove(fields.id, deleteArgs.deletedRecords[0], this.getTable(), this.getQuery());\n                        }\n                        this.parent.eventBase.selectWorkCellByTime(deleteArgs.deletedRecords);\n                        const crudArgs = {\n                            requestType: 'eventRemoved', cancel: false,\n                            data: deleteArgs.deletedRecords, promise: promise, editParams: editParams\n                        };\n                        this.refreshData(crudArgs);\n                    }\n                });\n            }\n        }\n    }\n    processOccurrences(eventData, action) {\n        let occurrenceData = [];\n        let isDeletedRecords = false;\n        if (eventData instanceof Array) {\n            for (const event of eventData) {\n                occurrenceData.push({ occurrence: event, parent: this.getParentEvent(event) });\n            }\n        }\n        else {\n            occurrenceData = { occurrence: eventData, parent: this.getParentEvent(eventData) };\n        }\n        const updateEvents = (eventData instanceof Array) ? eventData : [eventData];\n        const args = {\n            requestType: action === 'EditOccurrence' ? 'eventChange' : 'eventRemove', cancel: false,\n            addedRecords: [], changedRecords: updateEvents, deletedRecords: []\n        };\n        args.data = occurrenceData;\n        this.parent.trigger(actionBegin, args, (occurrenceArgs) => {\n            if (!occurrenceArgs.cancel) {\n                const fields = this.parent.eventFields;\n                const editParams = { addedRecords: [], changedRecords: [], deletedRecords: [] };\n                const occurrenceEvents = (occurrenceData instanceof Array ? occurrenceData : [occurrenceData]);\n                for (let a = 0, count = occurrenceArgs.changedRecords.length; a < count; a++) {\n                    const childEvent = occurrenceArgs.changedRecords[a];\n                    const parentEvent = occurrenceEvents[a].parent;\n                    const parentException = parentEvent[fields.recurrenceException];\n                    let editedData;\n                    let exceptionDate;\n                    switch (action) {\n                        case 'EditOccurrence':\n                            editedData = this.parent.eventsProcessed.filter((event) => event.Guid === childEvent.Guid)[0];\n                            exceptionDate = this.excludeDateCheck(editedData[fields.startTime], parentException);\n                            if (exceptionDate !== parentEvent[fields.recurrenceException]) {\n                                parentEvent[fields.recurrenceException] = exceptionDate;\n                                childEvent[fields.recurrenceException] = getRecurrenceStringFromDate(editedData[fields.startTime]);\n                                childEvent[fields.recurrenceID] = parentEvent[fields.id];\n                                childEvent[fields.followingID] = null;\n                                editParams.changedRecords.push(this.parent.eventBase.processTimezone(parentEvent, true));\n                                editParams.addedRecords.push(this.parent.eventBase.processTimezone(childEvent, true));\n                            }\n                            else {\n                                editParams.changedRecords.push(this.parent.eventBase.processTimezone(childEvent, true));\n                            }\n                            break;\n                        case 'DeleteOccurrence':\n                            if (!childEvent[fields.recurrenceException]) {\n                                parentEvent[fields.recurrenceException] =\n                                    this.excludeDateCheck(childEvent[fields.startTime], parentException);\n                                editParams.changedRecords.push(this.parent.eventBase.processTimezone(parentEvent, true));\n                            }\n                            if (childEvent[fields.id] !== parentEvent[fields.id]) {\n                                editParams.deletedRecords.push(childEvent);\n                                isDeletedRecords = true;\n                            }\n                            break;\n                    }\n                }\n                const promise = this.parent.dataModule.dataManager.saveChanges(editParams, fields.id, this.getTable(), this.getQuery());\n                this.parent.eventBase.selectWorkCellByTime(occurrenceArgs.changedRecords);\n                const crudArgs = {\n                    requestType: action === 'EditOccurrence' ? 'eventChanged' : 'eventRemoved',\n                    cancel: false, data: isDeletedRecords ? occurrenceArgs.deletedRecords : occurrenceArgs.changedRecords,\n                    promise: promise, editParams: editParams\n                };\n                this.refreshData(crudArgs);\n            }\n        });\n    }\n    processFollowSeries(eventData, action) {\n        let followData = [];\n        if (eventData instanceof Array) {\n            for (const event of eventData) {\n                followData.push({ occurrence: event, parent: this.getParentEvent(event) });\n            }\n        }\n        else {\n            followData = { occurrence: eventData, parent: this.getParentEvent(eventData) };\n        }\n        const updateFollowEvents = (eventData instanceof Array) ? eventData : [eventData];\n        const args = {\n            requestType: action === 'EditFollowingEvents' ? 'eventChange' : 'eventRemove', cancel: false,\n            addedRecords: [], changedRecords: updateFollowEvents, deletedRecords: []\n        };\n        args.data = followData;\n        this.parent.trigger(actionBegin, args, (followArgs) => {\n            if (!followArgs.cancel) {\n                const fields = this.parent.eventFields;\n                const editParams = { addedRecords: [], changedRecords: [], deletedRecords: [] };\n                const followEvents = followData instanceof Array ? followData : [followData];\n                for (let a = 0, count = followArgs.changedRecords.length; a < count; a++) {\n                    const childEvent = followArgs.changedRecords[a];\n                    const parentEvent = followEvents[a].parent;\n                    const followData = this.parent.eventBase.getEventCollections(parentEvent, childEvent);\n                    let isSpanned;\n                    switch (action) {\n                        case 'EditFollowingEvents':\n                            this.processRecurrenceRule(parentEvent, childEvent);\n                            isSpanned = !this.parent.eventBase.isFollowingEvent(parentEvent, childEvent);\n                            childEvent[fields.followingID] = isSpanned ? null : parentEvent[fields.id];\n                            childEvent[fields.recurrenceID] = null;\n                            editParams.addedRecords.push(this.parent.eventBase.processTimezone(childEvent, true));\n                            editParams.changedRecords.push(this.parent.eventBase.processTimezone(parentEvent, true));\n                            if (!this.parent.uiStateValues.isIgnoreOccurrence) {\n                                childEvent[fields.recurrenceException] = null;\n                                if (followData.occurrence.length > 0) {\n                                    const rule = followData.occurrence.slice(-1)[0][fields.recurrenceRule];\n                                    if (rule.indexOf('COUNT') === -1) {\n                                        childEvent[fields.recurrenceRule] = rule;\n                                    }\n                                }\n                                if (followData.follow.length > 0) {\n                                    childEvent[fields.recurrenceRule] = followData.follow.slice(-1)[0][fields.recurrenceRule];\n                                    editParams.deletedRecords = editParams.deletedRecords.concat(followData.follow);\n                                }\n                                if (isSpanned) {\n                                    followData.occurrence = followData.occurrence.filter((eventObj) => eventObj[fields.recurrenceID] === childEvent[fields.id]);\n                                }\n                                editParams.deletedRecords = editParams.deletedRecords.concat(followData.occurrence);\n                            }\n                            break;\n                        case 'DeleteFollowingEvents':\n                            this.processRecurrenceRule(parentEvent, childEvent[fields.startTime]);\n                            editParams.changedRecords.push(this.parent.eventBase.processTimezone(parentEvent, true));\n                            editParams.deletedRecords = editParams.deletedRecords.concat(followData.occurrence).concat(followData.follow);\n                            break;\n                    }\n                }\n                const promise = this.parent.dataModule.dataManager.saveChanges(editParams, fields.id, this.getTable(), this.getQuery());\n                this.parent.eventBase.selectWorkCellByTime(followArgs.changedRecords);\n                const crudArgs = {\n                    requestType: action === 'EditFollowingEvents' ? 'eventChanged' : 'eventRemoved',\n                    cancel: false, data: followArgs.changedRecords, promise: promise, editParams: editParams\n                };\n                this.refreshData(crudArgs);\n            }\n        });\n    }\n    processEntireSeries(eventData, action) {\n        let seriesData = [];\n        let isDeletedRecords = false;\n        if (eventData instanceof Array) {\n            for (const event of eventData) {\n                seriesData.push(this.getParentEvent(event, true));\n            }\n        }\n        else {\n            seriesData = this.getParentEvent(eventData, true);\n        }\n        const updateSeriesEvents = (eventData instanceof Array) ? eventData : [eventData];\n        const args = {\n            requestType: action === 'EditSeries' ? 'eventChange' : 'eventRemove', cancel: false,\n            addedRecords: [], changedRecords: updateSeriesEvents, deletedRecords: []\n        };\n        args.data = seriesData;\n        this.parent.trigger(actionBegin, args, (seriesArgs) => {\n            if (!seriesArgs.cancel) {\n                const fields = this.parent.eventFields;\n                const editParams = { addedRecords: [], changedRecords: [], deletedRecords: [] };\n                const seriesEvents = seriesData instanceof Array ? seriesData : [seriesData];\n                for (let a = 0, count = seriesArgs.changedRecords.length; a < count; a++) {\n                    const childEvent = seriesArgs.changedRecords[a];\n                    const parentEvent = seriesEvents[a];\n                    const eventCollections = this.parent.eventBase.getEventCollections(parentEvent);\n                    const deletedEvents = eventCollections.follow.concat(eventCollections.occurrence);\n                    switch (action) {\n                        case 'EditSeries':\n                            if ((childEvent[fields.startTime] > parentEvent[fields.startTime]) && childEvent[fields.recurrenceRule]) {\n                                this.processRecurrenceRule(parentEvent, childEvent);\n                            }\n                            childEvent[fields.id] = parentEvent[fields.id];\n                            childEvent[fields.recurrenceID] = null;\n                            childEvent[fields.followingID] = null;\n                            if (this.parent.uiStateValues.isIgnoreOccurrence && childEvent[fields.recurrenceException]) {\n                                const originalParent = this.parent.eventsData.filter((eventObj) => eventObj[fields.id] === childEvent[fields.id]);\n                                if (originalParent.length > 0) {\n                                    childEvent[fields.recurrenceRule] = originalParent[0][fields.recurrenceRule];\n                                }\n                            }\n                            else {\n                                childEvent[fields.recurrenceException] = null;\n                                editParams.deletedRecords = editParams.deletedRecords.concat(deletedEvents);\n                            }\n                            editParams.changedRecords.push(this.parent.eventBase.processTimezone(childEvent, true));\n                            this.parent.uiStateValues.isIgnoreOccurrence = false;\n                            break;\n                        case 'DeleteSeries':\n                            editParams.deletedRecords = editParams.deletedRecords.concat(deletedEvents.concat(parentEvent));\n                            isDeletedRecords = true;\n                            break;\n                    }\n                }\n                const promise = this.parent.dataModule.dataManager.saveChanges(editParams, fields.id, this.getTable(), this.getQuery());\n                this.parent.eventBase.selectWorkCellByTime(seriesArgs.changedRecords);\n                const crudArgs = {\n                    requestType: action === 'EditSeries' ? 'eventChanged' : 'eventRemoved',\n                    cancel: false, data: isDeletedRecords ? seriesArgs.deletedRecords : seriesArgs.changedRecords,\n                    promise: promise, editParams: editParams\n                };\n                this.refreshData(crudArgs);\n            }\n        });\n    }\n    processDelete(eventData) {\n        const deleteData = [];\n        for (const eventObj of eventData) {\n            if (eventObj[this.parent.eventFields.recurrenceRule]) {\n                deleteData.push({ occurrence: eventObj, parent: this.getParentEvent(eventObj) });\n            }\n            else {\n                deleteData.push(eventObj);\n            }\n        }\n        const args = {\n            requestType: 'eventRemove', cancel: false,\n            addedRecords: [], changedRecords: [], deletedRecords: eventData\n        };\n        args.data = deleteData;\n        this.parent.trigger(actionBegin, args, (deleteArgs) => {\n            if (!deleteArgs.cancel) {\n                const fields = this.parent.eventFields;\n                const editParams = { addedRecords: [], changedRecords: [], deletedRecords: [] };\n                for (let a = 0, count = deleteArgs.deletedRecords.length; a < count; a++) {\n                    let isDelete = isNullOrUndefined(deleteArgs.deletedRecords[a][this.parent.eventFields.recurrenceRule]);\n                    if (!isDelete) {\n                        const parentEvent = deleteData[a].parent;\n                        const isEdited = editParams.changedRecords.filter((obj) => obj[fields.id] === parentEvent[fields.id]);\n                        const editedDate = deleteArgs.deletedRecords[a][fields.startTime];\n                        if (isEdited.length > 0) {\n                            const editedData = isEdited[0];\n                            editedData[fields.recurrenceException] =\n                                this.excludeDateCheck(editedDate, editedData[fields.recurrenceException]);\n                        }\n                        else {\n                            parentEvent[fields.recurrenceException] =\n                                this.excludeDateCheck(editedDate, parentEvent[fields.recurrenceException]);\n                        }\n                        if (isEdited.length === 0) {\n                            editParams.changedRecords.push(this.parent.eventBase.processTimezone(parentEvent, true));\n                        }\n                        isDelete = deleteArgs.deletedRecords[a][fields.id] !== parentEvent[fields.id];\n                    }\n                    if (isDelete) {\n                        editParams.deletedRecords.push(deleteArgs.deletedRecords[a]);\n                    }\n                }\n                const promise = this.parent.dataModule.dataManager.saveChanges(editParams, fields.id, this.getTable(), this.getQuery());\n                const crudArgs = {\n                    requestType: 'eventRemoved', cancel: false, data: deleteArgs.deletedRecords, promise: promise, editParams: editParams\n                };\n                this.refreshData(crudArgs);\n            }\n        });\n    }\n    processSave(data) {\n        const eventData = (data instanceof Array) ? data : [data];\n        const editData = [];\n        for (const eventObj of eventData) {\n            if (eventObj[this.parent.eventFields.recurrenceRule]) {\n                editData.push({ occurrence: eventObj, parent: this.getParentEvent(eventObj) });\n            }\n            else {\n                editData.push(eventObj);\n            }\n        }\n        const args = { requestType: 'eventChange', cancel: false, addedRecords: [], changedRecords: eventData, deletedRecords: [] };\n        args.data = editData;\n        this.parent.trigger(actionBegin, args, (editArgs) => {\n            if (!editArgs.cancel) {\n                const fields = this.parent.eventFields;\n                const editParams = { addedRecords: [], changedRecords: [], deletedRecords: [] };\n                for (const record of editArgs.changedRecords) {\n                    if (!isNullOrUndefined(record[fields.recurrenceRule]) && isNullOrUndefined(record[fields.recurrenceException])) {\n                        const exceptionString = getRecurrenceStringFromDate(record[fields.startTime]);\n                        const parentEle = this.getParentEvent(record);\n                        parentEle[fields.recurrenceException] = isNullOrUndefined(parentEle[fields.recurrenceException]) ?\n                            exceptionString : parentEle[fields.recurrenceException].concat(',' + exceptionString);\n                        record[fields.id] = this.parent.getEventMaxID();\n                        record[fields.recurrenceException] = exceptionString;\n                        editParams.addedRecords.push(this.parent.eventBase.processTimezone(record, true));\n                        editParams.changedRecords.push(this.parent.eventBase.processTimezone(parentEle, true));\n                    }\n                    else {\n                        editParams.changedRecords.push(this.parent.eventBase.processTimezone(record, true));\n                    }\n                }\n                const promise = this.parent.dataModule.dataManager.saveChanges(editParams, fields.id, this.getTable(), this.getQuery());\n                const crudArgs = { requestType: 'eventChanged', cancel: false, data: editArgs.changedRecords, promise: promise, editParams: editParams };\n                this.refreshData(crudArgs);\n            }\n        });\n    }\n    getParentEvent(event, isParent = false) {\n        const parentEvent = this.parent.eventBase.getParentEvent(event, isParent) || event;\n        if (parentEvent[this.parent.eventFields.startTimezone] || parentEvent[this.parent.eventFields.endTimezone]) {\n            this.parent.eventBase.timezoneConvert(parentEvent);\n        }\n        return parentEvent;\n    }\n    excludeDateCheck(eventStartTime, exceptionDateList) {\n        const exDate = getRecurrenceStringFromDate(eventStartTime);\n        if (!isNullOrUndefined(exceptionDateList)) {\n            if (exceptionDateList.indexOf(exDate) === -1) {\n                exceptionDateList = !(isNullOrUndefined(exceptionDateList)) ? exceptionDateList + ',' + exDate : exDate;\n            }\n        }\n        else {\n            exceptionDateList = exDate;\n        }\n        return exceptionDateList;\n    }\n    processRecurrenceRule(parentEvent, followEvent) {\n        const fields = this.parent.eventFields;\n        const recurrenceRule = parentEvent[fields.recurrenceRule];\n        let endDate;\n        if (followEvent instanceof Date) {\n            endDate = new Date(+followEvent);\n        }\n        else {\n            endDate = new Date(+followEvent[fields.startTime]);\n            const newRecurrenceRule = followEvent[fields.recurrenceRule];\n            const startDate = parentEvent[fields.startTime];\n            const ruleException = (this.parent.currentAction === 'DeleteFollowingEvents') ? followEvent[fields.recurrenceException] : null;\n            const dateCollection = generate(startDate, newRecurrenceRule, ruleException, this.parent.activeViewOptions.firstDayOfWeek);\n            const untilDate = new Date(dateCollection.slice(-1)[0]);\n            untilDate.setHours(endDate.getHours(), endDate.getMinutes(), endDate.getSeconds());\n            endDate.setHours(startDate.getHours(), startDate.getMinutes(), startDate.getSeconds());\n            followEvent[fields.recurrenceRule] = this.getUpdatedRecurrenceRule(newRecurrenceRule, new Date(+untilDate), false);\n        }\n        parentEvent[fields.recurrenceRule] = this.getUpdatedRecurrenceRule(recurrenceRule, addDays(new Date(endDate.getTime()), -1), true);\n    }\n    getUpdatedRecurrenceRule(recurrenceRule, untilDate, isParent) {\n        const splitRule = recurrenceRule.split(';');\n        let updatedRule = '';\n        for (let rule of splitRule) {\n            if (rule !== '') {\n                const ruleKey = rule.split('=')[0];\n                let ruleValue = rule.split('=')[1];\n                if (ruleKey === 'COUNT' || ruleKey === 'UNTIL') {\n                    ruleValue = getRecurrenceStringFromDate(untilDate);\n                    rule = rule.replace(rule, 'UNTIL=' + ruleValue);\n                }\n                updatedRule += rule + ';';\n            }\n        }\n        if (isParent && updatedRule.indexOf('UNTIL') === -1) {\n            updatedRule += 'UNTIL=' + getRecurrenceStringFromDate(untilDate);\n        }\n        return updatedRule;\n    }\n    isBlockEvent(eventData) {\n        const eventCollection = (eventData instanceof Array) ? eventData : [eventData];\n        let value = false;\n        for (const event of eventCollection) {\n            value = event[this.parent.eventFields.isBlock] || false;\n        }\n        return value;\n    }\n    /**\n     * To destroy the crud module.\n     *\n     * @returns {void}\n     * @private\n     */\n    destroy() {\n        this.crudObj = null;\n        this.parent = null;\n    }\n}\n\n/* eslint-disable @typescript-eslint/no-explicit-any */\n/**\n * Work cell interactions\n */\nclass WorkCellInteraction {\n    constructor(parent) {\n        this.parent = parent;\n        EventHandler.add(this.parent.element, 'mouseover', this.onHover, this);\n    }\n    cellMouseDown(e) {\n        if (this.isPreventAction(e)) {\n            return;\n        }\n        this.parent.notify(cellMouseDown, { event: e });\n    }\n    cellClick(e) {\n        if (this.isPreventAction(e)) {\n            return;\n        }\n        const queryStr = '.' + WORK_CELLS_CLASS + ',.' + ALLDAY_CELLS_CLASS + ',.' + HEADER_CELLS_CLASS;\n        const target = closest(e.target, queryStr);\n        if (isNullOrUndefined(target)) {\n            return;\n        }\n        if (!isNullOrUndefined(closest(e.target, '.' + NEW_EVENT_CLASS))) {\n            this.parent.eventWindow.openEditor(this.parent.activeCellsData, 'Add');\n            return;\n        }\n        const navigateEle = closest(e.target, '.' + NAVIGATE_CLASS);\n        const navigateView = this.parent.getNavigateView();\n        const sameView = this.parent.currentView === navigateView;\n        if (isNullOrUndefined(navigateEle) || sameView ||\n            isNullOrUndefined(this.parent.viewOptions[navigateView.charAt(0).toLowerCase() + navigateView.slice(1)])) {\n            if (this.parent.activeViewOptions.readonly && this.parent.currentView !== 'MonthAgenda') {\n                if (this.parent.quickPopup) {\n                    this.parent.quickPopup.quickPopupHide();\n                }\n                return;\n            }\n            if (this.parent.isAdaptive && (e.target.classList.contains(MORE_INDICATOR_CLASS) ||\n                closest(e.target, '.' + MORE_INDICATOR_CLASS))) {\n                return;\n            }\n            const isWorkCell = target.classList.contains(WORK_CELLS_CLASS) ||\n                target.classList.contains(ALLDAY_CELLS_CLASS);\n            if (isWorkCell && e.shiftKey && e.which === 1 && this.parent.keyboardInteractionModule) {\n                this.parent.keyboardInteractionModule.onMouseSelection(e);\n                return;\n            }\n            this.parent.activeCellsData = this.parent.getCellDetails(target);\n            const args = extend(this.parent.activeCellsData, { cancel: false, event: e, name: 'cellClick' });\n            this.parent.trigger(cellClick, args, (clickArgs) => {\n                if (!clickArgs.cancel) {\n                    if (isWorkCell) {\n                        this.parent.selectCell(target);\n                    }\n                    if (this.parent.allowInline) {\n                        const inlineArgs = {\n                            element: clickArgs.element,\n                            groupIndex: clickArgs.groupIndex, type: 'Cell'\n                        };\n                        this.parent.notify(inlineClick, inlineArgs);\n                    }\n                    else {\n                        this.parent.notify(cellClick, clickArgs);\n                    }\n                }\n                else {\n                    if (this.parent.quickPopup) {\n                        this.parent.quickPopup.quickPopupHide();\n                    }\n                }\n            });\n        }\n        else {\n            const date = this.parent.getDateFromElement(target);\n            if (!isNullOrUndefined(date) && !this.parent.isAdaptive && this.parent.isMinMaxDate(date)) {\n                this.parent.setProperties({ selectedDate: date }, true);\n                this.parent.changeView(this.parent.getNavigateView(), e);\n            }\n        }\n    }\n    cellDblClick(e) {\n        const queryStr = '.' + WORK_CELLS_CLASS + ',.' + ALLDAY_CELLS_CLASS + ',.' + HEADER_CELLS_CLASS;\n        const target = closest(e.target, queryStr);\n        if (this.parent.activeViewOptions.readonly || this.isPreventAction(e) || isNullOrUndefined(target)) {\n            return;\n        }\n        const args = extend(this.parent.activeCellsData, { cancel: false, event: e, name: 'cellDoubleClick' });\n        this.parent.trigger(cellDoubleClick, args, (clickArgs) => {\n            const date = new Date(clickArgs.startTime.getTime());\n            if (!this.parent.isMinMaxDate(new Date(date.setHours(0, 0, 0, 0)))) {\n                return;\n            }\n            if (!clickArgs.cancel) {\n                this.parent.eventWindow.openEditor(this.parent.activeCellsData, 'Add');\n            }\n        });\n    }\n    onHover(e) {\n        const targetSelector = '.' + WORK_CELLS_CLASS + ',.' + TIME_SLOT_CLASS + ',.' + ALLDAY_CELLS_CLASS + ',.' +\n            HEADER_CELLS_CLASS + ',.' + RESOURCE_CELLS_CLASS + ',.' + APPOINTMENT_CLASS + ',.' + WEEK_NUMBER_CLASS +\n            ',.' + MONTH_HEADER_CLASS;\n        const hoverTarget = closest(e.target, targetSelector);\n        if (hoverTarget) {\n            const hoverArgs = { element: hoverTarget, event: e };\n            this.parent.trigger(hover, hoverArgs);\n        }\n    }\n    isPreventAction(e) {\n        if (closest(e.target, '.' + NAVIGATE_CLASS)) {\n            return false;\n        }\n        if (closest(e.target, '.' + APPOINTMENT_WRAPPER_CLASS) &&\n            !closest(e.target, '.' + MORE_INDICATOR_CLASS)) {\n            return true;\n        }\n        let target = closest(e.target, '.' + APPOINTMENT_CLASS + ',.' + RESOURCE_GROUP_CELLS_CLASS);\n        if (!isNullOrUndefined(target)) {\n            return true;\n        }\n        target = closest(e.target, '.' + HEADER_CELLS_CLASS);\n        if (this.parent.activeView.isTimelineView() && !isNullOrUndefined(target)) {\n            return true;\n        }\n        return false;\n    }\n    destroy() {\n        EventHandler.remove(this.parent.element, 'mouseover', this.onHover);\n    }\n}\n\nvar __decorate$8 = (undefined && undefined.__decorate) || function (decorators, target, key, desc) {\n    var c = arguments.length, r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d;\n    if (typeof Reflect === \"object\" && typeof Reflect.decorate === \"function\") r = Reflect.decorate(decorators, target, key, desc);\n    else for (var i = decorators.length - 1; i >= 0; i--) if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;\n    return c > 3 && r && Object.defineProperty(target, key, r), r;\n};\n/* eslint-disable @typescript-eslint/no-explicit-any */\n/**\n * Configuration that applies on each appointment field options of scheduler.\n */\nclass FieldOptions extends ChildProperty {\n}\n__decorate$8([\n    Property()\n], FieldOptions.prototype, \"name\", void 0);\n__decorate$8([\n    Property()\n], FieldOptions.prototype, \"default\", void 0);\n__decorate$8([\n    Property()\n], FieldOptions.prototype, \"title\", void 0);\n__decorate$8([\n    Property({})\n], FieldOptions.prototype, \"validation\", void 0);\n\nvar __decorate$7 = (undefined && undefined.__decorate) || function (decorators, target, key, desc) {\n    var c = arguments.length, r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d;\n    if (typeof Reflect === \"object\" && typeof Reflect.decorate === \"function\") r = Reflect.decorate(decorators, target, key, desc);\n    else for (var i = decorators.length - 1; i >= 0; i--) if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;\n    return c > 3 && r && Object.defineProperty(target, key, r), r;\n};\n/**\n * A Class that holds the collection of event fields that requires to be mapped with the dataSource\n * fields along with its available configuration settings. Each field in it accepts both string and Object\n *  data type. When each of the field is assigned with simple `string` value, it is assumed that the dataSource field\n *  name is mapped with it. If the `object` type is defined on each fields, then the validation related settings and mapping of\n *  those fields with dataSource can be given altogether within it.\n */\nclass Field extends ChildProperty {\n}\n__decorate$7([\n    Property('Id')\n], Field.prototype, \"id\", void 0);\n__decorate$7([\n    Property('IsBlock')\n], Field.prototype, \"isBlock\", void 0);\n__decorate$7([\n    Complex({ name: 'Subject' }, FieldOptions)\n], Field.prototype, \"subject\", void 0);\n__decorate$7([\n    Complex({ name: 'StartTime' }, FieldOptions)\n], Field.prototype, \"startTime\", void 0);\n__decorate$7([\n    Complex({ name: 'EndTime' }, FieldOptions)\n], Field.prototype, \"endTime\", void 0);\n__decorate$7([\n    Complex({ name: 'StartTimezone' }, FieldOptions)\n], Field.prototype, \"startTimezone\", void 0);\n__decorate$7([\n    Complex({ name: 'EndTimezone' }, FieldOptions)\n], Field.prototype, \"endTimezone\", void 0);\n__decorate$7([\n    Complex({ name: 'Location' }, FieldOptions)\n], Field.prototype, \"location\", void 0);\n__decorate$7([\n    Complex({ name: 'Description' }, FieldOptions)\n], Field.prototype, \"description\", void 0);\n__decorate$7([\n    Complex({ name: 'IsAllDay' }, FieldOptions)\n], Field.prototype, \"isAllDay\", void 0);\n__decorate$7([\n    Complex({ name: 'RecurrenceID' }, FieldOptions)\n], Field.prototype, \"recurrenceID\", void 0);\n__decorate$7([\n    Complex({ name: 'RecurrenceRule' }, FieldOptions)\n], Field.prototype, \"recurrenceRule\", void 0);\n__decorate$7([\n    Complex({ name: 'RecurrenceException' }, FieldOptions)\n], Field.prototype, \"recurrenceException\", void 0);\n__decorate$7([\n    Property('IsReadonly')\n], Field.prototype, \"isReadonly\", void 0);\n__decorate$7([\n    Property('FollowingID')\n], Field.prototype, \"followingID\", void 0);\n\nvar __decorate$6 = (undefined && undefined.__decorate) || function (decorators, target, key, desc) {\n    var c = arguments.length, r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d;\n    if (typeof Reflect === \"object\" && typeof Reflect.decorate === \"function\") r = Reflect.decorate(decorators, target, key, desc);\n    else for (var i = decorators.length - 1; i >= 0; i--) if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;\n    return c > 3 && r && Object.defineProperty(target, key, r), r;\n};\n/* eslint-disable @typescript-eslint/no-explicit-any */\n/**\n * Holds the configuration of event related options and dataSource binding to Schedule.\n */\nclass EventSettings extends ChildProperty {\n}\n__decorate$6([\n    Property()\n], EventSettings.prototype, \"template\", void 0);\n__decorate$6([\n    Property([])\n], EventSettings.prototype, \"dataSource\", void 0);\n__decorate$6([\n    Property()\n], EventSettings.prototype, \"query\", void 0);\n__decorate$6([\n    Complex({}, Field)\n], EventSettings.prototype, \"fields\", void 0);\n__decorate$6([\n    Property(false)\n], EventSettings.prototype, \"enableTooltip\", void 0);\n__decorate$6([\n    Property()\n], EventSettings.prototype, \"tooltipTemplate\", void 0);\n__decorate$6([\n    Property('AllDayRow')\n], EventSettings.prototype, \"spannedEventPlacement\", void 0);\n__decorate$6([\n    Property()\n], EventSettings.prototype, \"resourceColorField\", void 0);\n__decorate$6([\n    Property(false)\n], EventSettings.prototype, \"editFollowingEvents\", void 0);\n__decorate$6([\n    Property(true)\n], EventSettings.prototype, \"allowAdding\", void 0);\n__decorate$6([\n    Property(true)\n], EventSettings.prototype, \"allowEditing\", void 0);\n__decorate$6([\n    Property(true)\n], EventSettings.prototype, \"allowDeleting\", void 0);\n__decorate$6([\n    Property(false)\n], EventSettings.prototype, \"enableMaxHeight\", void 0);\n__decorate$6([\n    Property(false)\n], EventSettings.prototype, \"enableIndicator\", void 0);\n__decorate$6([\n    Property(false)\n], EventSettings.prototype, \"ignoreWhitespace\", void 0);\n__decorate$6([\n    Property()\n], EventSettings.prototype, \"sortComparer\", void 0);\n\nvar __decorate$9 = (undefined && undefined.__decorate) || function (decorators, target, key, desc) {\n    var c = arguments.length, r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d;\n    if (typeof Reflect === \"object\" && typeof Reflect.decorate === \"function\") r = Reflect.decorate(decorators, target, key, desc);\n    else for (var i = decorators.length - 1; i >= 0; i--) if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;\n    return c > 3 && r && Object.defineProperty(target, key, r), r;\n};\n/**\n * A class that holds the resource grouping related configurations on Schedule.\n */\nclass Group extends ChildProperty {\n}\n__decorate$9([\n    Property(false)\n], Group.prototype, \"byDate\", void 0);\n__decorate$9([\n    Property(true)\n], Group.prototype, \"byGroupID\", void 0);\n__decorate$9([\n    Property(false)\n], Group.prototype, \"allowGroupEdit\", void 0);\n__decorate$9([\n    Property([])\n], Group.prototype, \"resources\", void 0);\n__decorate$9([\n    Property(true)\n], Group.prototype, \"enableCompactView\", void 0);\n__decorate$9([\n    Property()\n], Group.prototype, \"headerTooltipTemplate\", void 0);\n\nvar __decorate$10 = (undefined && undefined.__decorate) || function (decorators, target, key, desc) {\n    var c = arguments.length, r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d;\n    if (typeof Reflect === \"object\" && typeof Reflect.decorate === \"function\") r = Reflect.decorate(decorators, target, key, desc);\n    else for (var i = decorators.length - 1; i >= 0; i--) if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;\n    return c > 3 && r && Object.defineProperty(target, key, r), r;\n};\n/* eslint-disable @typescript-eslint/no-explicit-any */\n/**\n * A class that represents the resource related configurations and its data binding options.\n */\nclass Resources extends ChildProperty {\n}\n__decorate$10([\n    Property()\n], Resources.prototype, \"field\", void 0);\n__decorate$10([\n    Property()\n], Resources.prototype, \"title\", void 0);\n__decorate$10([\n    Property()\n], Resources.prototype, \"name\", void 0);\n__decorate$10([\n    Property(false)\n], Resources.prototype, \"allowMultiple\", void 0);\n__decorate$10([\n    Property([])\n], Resources.prototype, \"dataSource\", void 0);\n__decorate$10([\n    Property()\n], Resources.prototype, \"query\", void 0);\n__decorate$10([\n    Property('Id')\n], Resources.prototype, \"idField\", void 0);\n__decorate$10([\n    Property('Text')\n], Resources.prototype, \"textField\", void 0);\n__decorate$10([\n    Property('Expanded')\n], Resources.prototype, \"expandedField\", void 0);\n__decorate$10([\n    Property('GroupID')\n], Resources.prototype, \"groupIDField\", void 0);\n__decorate$10([\n    Property('Color')\n], Resources.prototype, \"colorField\", void 0);\n__decorate$10([\n    Property('StartHour')\n], Resources.prototype, \"startHourField\", void 0);\n__decorate$10([\n    Property('EndHour')\n], Resources.prototype, \"endHourField\", void 0);\n__decorate$10([\n    Property('WorkDays')\n], Resources.prototype, \"workDaysField\", void 0);\n__decorate$10([\n    Property('CssClass')\n], Resources.prototype, \"cssClassField\", void 0);\n\n/* eslint-disable @typescript-eslint/no-explicit-any */\n/* eslint-disable max-len */\nclass ResourceBase {\n    constructor(parent) {\n        this.resourceCollection = [];\n        this.leftPixel = 25;\n        this.parent = parent;\n    }\n    renderResourceHeaderIndent(tr) {\n        const resColTd = createElement('td', { className: RESOURCE_LEFT_TD_CLASS });\n        const resColDiv = createElement('div', { className: RESOURCE_TEXT_CLASS });\n        if (this.parent.activeViewOptions.headerIndentTemplate) {\n            const data = { className: [resColTd.className], type: 'emptyCells' };\n            this.parent.renderHeaderIndentTemplate(data, resColTd);\n        }\n        else {\n            resColTd.appendChild(resColDiv);\n        }\n        const args = { elementType: 'emptyCells', element: resColTd };\n        this.parent.trigger(renderCell, args);\n        tr.appendChild(resColTd);\n    }\n    hideResourceRows(tBody) {\n        if (this.resourceCollection.length <= 1 || this.parent.virtualScrollModule) {\n            return;\n        }\n        const trCount = this.lastResourceLevel.length;\n        for (let i = 0; i < trCount; i++) {\n            const resData = this.lastResourceLevel[i].resourceData;\n            const res = this.lastResourceLevel[i].resource;\n            if (resData.ClassName === RESOURCE_PARENT_CLASS && !resData[res.expandedField] &&\n                !isNullOrUndefined(resData[res.expandedField])) {\n                const trCollection = [].slice.call(tBody.children);\n                const slicedCollection = trCollection.slice(i + 1, i + (parseInt(resData.Count, 10) + 1));\n                addClass(slicedCollection, HIDDEN_CLASS);\n            }\n        }\n    }\n    createResourceColumn() {\n        const resColl = this.resourceCollection;\n        const resDiv = createElement('div', { className: RESOURCE_COLUMN_WRAP_CLASS });\n        const tbl = this.parent.activeView.createTableLayout(RESOURCE_COLUMN_TABLE_CLASS);\n        if (!this.parent.uiStateValues.isGroupAdaptive && this.parent.rowAutoHeight && this.parent.activeView.isTimelineView()\n            && this.parent.activeViewOptions.group.resources.length > 0) {\n            addClass([tbl], AUTO_HEIGHT);\n        }\n        const tBody = tbl.querySelector('tbody');\n        let resData = this.generateTreeData(true);\n        this.countCalculation(resColl.slice(0, -2), resColl.slice(0, -1));\n        this.renderedResources = this.lastResourceLevel;\n        if (this.parent.virtualScrollModule) {\n            const resourceCount = this.parent.virtualScrollModule.getRenderedCount();\n            this.setExpandedResources();\n            resData = this.expandedResources.slice(0, resourceCount);\n            this.renderedResources = resData;\n        }\n        append(this.getContentRows(resData), tBody);\n        this.hideResourceRows(tBody);\n        tbl.appendChild(tBody);\n        resDiv.appendChild(tbl);\n        return resDiv;\n    }\n    setRenderedResources() {\n        const resColl = this.resourceCollection;\n        // eslint-disable-next-line @typescript-eslint/no-unused-vars\n        const temp = this.generateTreeData(true);\n        this.countCalculation(resColl.slice(0, -2), resColl.slice(0, -1));\n        this.renderedResources = this.lastResourceLevel;\n    }\n    setExpandedResources() {\n        const resources = [];\n        for (let i = 0; i < this.lastResourceLevel.length; i++) {\n            const resource = this.lastResourceLevel[i].resourceData;\n            const count = resource.Count;\n            resources.push(this.lastResourceLevel[i]);\n            const isExpanded = resource[this.lastResourceLevel[i].resource.expandedField];\n            if (!isNullOrUndefined(isExpanded) && !isExpanded && count > 0) {\n                i = i + count;\n            }\n        }\n        this.expandedResources = resources;\n    }\n    getContentRows(resData, isVirtualScroll) {\n        const resRows = [];\n        let left;\n        let rIndex;\n        const resColl = this.resourceCollection;\n        const tr = createElement('tr');\n        const td = createElement('td', { attrs: { tabindex: isVirtualScroll ? '-1' : '0' } });\n        for (let i = 0; i < resData.length; i++) {\n            const ntd = td.cloneNode();\n            rIndex = findIndexInData(resColl, 'name', resData[i].resource.name);\n            if (rIndex === resColl.length - 1) {\n                extend(resData[i].resourceData, { ClassName: RESOURCE_CHILD_CLASS });\n                this.renderedResources[i].className = [RESOURCE_CHILD_CLASS];\n            }\n            else {\n                extend(resData[i].resourceData, { ClassName: RESOURCE_PARENT_CLASS });\n                this.renderedResources[i].className = [RESOURCE_PARENT_CLASS];\n            }\n            left = (rIndex * this.leftPixel) + 'px';\n            if (resData[i].resourceData.ClassName === RESOURCE_PARENT_CLASS\n                && !isNullOrUndefined(resData[i].resourceData.Count) && (resData[i].resourceData.Count > 0)) {\n                let iconClass;\n                if (resData[i].resourceData[resColl[rIndex].expandedField] ||\n                    isNullOrUndefined(resData[i].resourceData[resColl[rIndex].expandedField])) {\n                    iconClass = RESOURCE_COLLAPSE_CLASS;\n                }\n                else {\n                    iconClass = RESOURCE_EXPAND_CLASS;\n                }\n                const iconDiv = createElement('div');\n                addClass([iconDiv], [RESOURCE_TREE_ICON_CLASS, iconClass]);\n                this.setMargin(iconDiv, left);\n                ntd.appendChild(iconDiv);\n                if (this.resourceCollection.length > 1) {\n                    EventHandler.add(iconDiv, 'click', this.onTreeIconClick, this);\n                }\n            }\n            this.parent.activeView.setResourceHeaderContent(ntd, resData[i], RESOURCE_TEXT_CLASS);\n            ntd.setAttribute('data-group-index', resData[i].groupIndex.toString());\n            ntd.setAttribute('aria-label', resData[i].resourceData[resData[i].resource.textField] + ' resource');\n            if (!this.parent.activeViewOptions.resourceHeaderTemplate) {\n                this.setMargin(ntd.querySelector('.' + RESOURCE_TEXT_CLASS), left);\n            }\n            const classCollection = [RESOURCE_CELLS_CLASS, resData[i].resourceData.ClassName];\n            addClass([ntd], classCollection);\n            const args = { elementType: 'resourceHeader', element: ntd, groupIndex: resData[i].groupIndex };\n            this.parent.trigger(renderCell, args);\n            const ntr = tr.cloneNode();\n            ntr.appendChild(ntd);\n            resRows.push(ntr);\n        }\n        return resRows;\n    }\n    setMargin(element, value) {\n        if (!this.parent.enableRtl) {\n            element.style.marginLeft = value;\n        }\n        else {\n            element.style.marginRight = value;\n        }\n    }\n    countCalculation(parentCollection, wholeCollection) {\n        let collection;\n        for (let y = 0; y < parentCollection.length; y++) {\n            const data = parentCollection[parentCollection.length - (y + 1)].dataSource;\n            for (let x = 0; x < data.length; x++) {\n                let totalCount = 0;\n                if (this.parent.activeViewOptions.group.byGroupID) {\n                    const query = new Query().where(wholeCollection[wholeCollection.length - 1].groupIDField, 'equal', data[x][parentCollection[parentCollection.length - (y + 1)].idField]);\n                    collection = new DataManager(wholeCollection[wholeCollection.length - 1].dataSource).executeLocal(query);\n                }\n                else {\n                    collection = wholeCollection[wholeCollection.length - 1].dataSource;\n                }\n                for (let z = 0; z < collection.length; z++) {\n                    totalCount = totalCount + parseInt(collection[z].Count, 10);\n                }\n                totalCount = totalCount + parseInt(data[x].Count, 10);\n                extend(data[x], { Count: totalCount });\n            }\n            wholeCollection = wholeCollection.slice(0, -1);\n        }\n    }\n    onTreeIconClick(e) {\n        if (this.parent.eventTooltip) {\n            this.parent.eventTooltip.close();\n        }\n        const target = e.target;\n        let hide;\n        const trElement = closest(target, '.' + RESOURCE_PARENT_CLASS)\n            .parentElement;\n        const index = parseInt(trElement.children[0].getAttribute('data-group-index'), 10);\n        let args = {\n            cancel: false, event: e, groupIndex: index,\n            requestType: !target.classList.contains(RESOURCE_COLLAPSE_CLASS) ? 'resourceExpand' : 'resourceCollapse'\n        };\n        this.parent.trigger(actionBegin, args, (actionArgs) => {\n            if (!actionArgs.cancel) {\n                if (target.classList.contains(RESOURCE_COLLAPSE_CLASS)) {\n                    classList(target, [RESOURCE_EXPAND_CLASS], [RESOURCE_COLLAPSE_CLASS]);\n                    hide = true;\n                }\n                else {\n                    classList(target, [RESOURCE_COLLAPSE_CLASS], [RESOURCE_EXPAND_CLASS]);\n                    hide = false;\n                }\n                const eventElements = [].slice.call(this.parent.element.querySelectorAll('.' + APPOINTMENT_CLASS));\n                for (const element of eventElements) {\n                    remove(element);\n                }\n                if (this.parent.virtualScrollModule) {\n                    this.updateVirtualContent(index, hide, e, target);\n                }\n                else {\n                    this.updateContent(index, hide);\n                }\n                const data = { cssProperties: this.parent.getCssProperties(), module: 'scroll' };\n                this.parent.notify(scrollUiUpdate, data);\n                args = {\n                    cancel: false, event: e, groupIndex: index,\n                    requestType: target.classList.contains(RESOURCE_COLLAPSE_CLASS) ? 'resourceExpanded' : 'resourceCollapsed'\n                };\n                this.parent.refreshEvents(false);\n                this.parent.trigger(actionComplete, args);\n            }\n        });\n    }\n    updateContent(index, hide) {\n        const rowCollection = [];\n        const workCellCollection = [];\n        const headerRowCollection = [];\n        let pNode;\n        const clickedRes = this.lastResourceLevel[index].resourceData;\n        const resRows = [].slice.call(this.parent.element.querySelectorAll('.' + RESOURCE_COLUMN_WRAP_CLASS + ' ' + 'tr'));\n        const contentRows = [].slice.call(this.parent.element.querySelectorAll('.' + CONTENT_WRAP_CLASS + ' ' + 'tbody tr'));\n        const eventRows = [].slice.call(this.parent.element.querySelectorAll('.' + CONTENT_WRAP_CLASS + ' .' + APPOINTMENT_CONTAINER_CLASS));\n        for (let j = 0; j < clickedRes.Count; j++) {\n            rowCollection.push(resRows[index + j + 1]);\n            workCellCollection.push(contentRows[index + j + 1]);\n            headerRowCollection.push(eventRows[index + j + 1]);\n        }\n        const clonedCollection = this.lastResourceLevel;\n        for (let i = 0; i < rowCollection.length; i++) {\n            let expanded = true;\n            pNode = rowCollection[i].children[0].classList.contains(RESOURCE_PARENT_CLASS);\n            clonedCollection[index].resourceData[clonedCollection[index].resource.expandedField] = !hide;\n            if (hide) {\n                if (pNode) {\n                    const trElem = rowCollection[i].querySelector('.' + RESOURCE_TREE_ICON_CLASS);\n                    if (trElem) {\n                        classList(trElem, [RESOURCE_EXPAND_CLASS], [RESOURCE_COLLAPSE_CLASS]);\n                    }\n                }\n                if (!rowCollection[i].classList.contains(HIDDEN_CLASS)) {\n                    addClass([rowCollection[i], workCellCollection[i], headerRowCollection[i]], HIDDEN_CLASS);\n                }\n            }\n            else {\n                if (pNode) {\n                    const rowIndex = rowCollection[i].rowIndex;\n                    if (!clonedCollection[rowIndex].resourceData[clonedCollection[rowIndex].resource.expandedField]\n                        && !isNullOrUndefined(clonedCollection[rowIndex].resourceData[clonedCollection[rowIndex].resource.expandedField])) {\n                        rowCollection.splice(i + 1, (parseInt(clonedCollection[rowIndex].resourceData.Count, 10)));\n                        workCellCollection.splice(i + 1, (parseInt(clonedCollection[rowIndex].resourceData.Count, 10)));\n                        headerRowCollection.splice(i + 1, (parseInt(clonedCollection[rowIndex].resourceData.Count, 10)));\n                        expanded = false;\n                    }\n                    if (expanded) {\n                        const trElem = rowCollection[i].querySelector('.' + RESOURCE_TREE_ICON_CLASS);\n                        if (trElem) {\n                            classList(trElem, [RESOURCE_COLLAPSE_CLASS], [RESOURCE_EXPAND_CLASS]);\n                        }\n                    }\n                }\n                if (rowCollection[i].classList.contains(HIDDEN_CLASS)) {\n                    removeClass([rowCollection[i], workCellCollection[i], headerRowCollection[i]], HIDDEN_CLASS);\n                }\n            }\n        }\n    }\n    // eslint-disable-next-line @typescript-eslint/no-unused-vars\n    updateVirtualContent(index, expand, e, target) {\n        this.lastResourceLevel[index].resourceData[this.lastResourceLevel[index].resource.expandedField] = !expand;\n        this.setExpandedResources();\n        const resourceCount = this.parent.virtualScrollModule.getRenderedCount();\n        const startIndex = this.expandedResources.indexOf(this.renderedResources[0]);\n        this.renderedResources = this.expandedResources.slice(startIndex, startIndex + resourceCount);\n        if (this.renderedResources.length < resourceCount) {\n            let sIndex = this.expandedResources.length - resourceCount;\n            sIndex = (sIndex > 0) ? sIndex : 0;\n            this.renderedResources = this.expandedResources.slice(sIndex, this.expandedResources.length);\n        }\n        const virtualTrack = this.parent.element.querySelector('.' + VIRTUAL_TRACK_CLASS);\n        this.parent.virtualScrollModule.updateVirtualTrackHeight(virtualTrack);\n        const resTable = this.parent.element.querySelector('.' + RESOURCE_COLUMN_WRAP_CLASS + ' ' + 'table');\n        const contentTable = this.parent.element.querySelector('.' + CONTENT_WRAP_CLASS + ' ' + 'table');\n        const eventTable = this.parent.element.querySelector('.' + EVENT_TABLE_CLASS);\n        this.parent.virtualScrollModule.updateContent(resTable, contentTable, eventTable, this.renderedResources);\n        const timeIndicator = this.parent.element.querySelector('.' + CURRENT_TIMELINE_CLASS);\n        if (!isNullOrUndefined(timeIndicator)) {\n            timeIndicator.style.height =\n                this.parent.element.querySelector('.' + CONTENT_TABLE_CLASS).offsetHeight + 'px';\n        }\n    }\n    renderResourceHeader() {\n        const resourceWrapper = createElement('div', { className: RESOURCE_TOOLBAR_CONTAINER });\n        resourceWrapper.innerHTML = '<div class=\"' + RESOURCE_HEADER_TOOLBAR + '\"><div class=\"' + RESOURCE_MENU + '\">' +\n            '<div class=\"e-icons ' + RESOURCE_MENU_ICON + '\"></div></div><div class=\"' + RESOURCE_LEVEL_TITLE + '\"></div></div>';\n        if (this.parent.currentView === 'MonthAgenda') {\n            const target = this.parent.activeView.getPanel().querySelector('.' + CONTENT_WRAP_CLASS);\n            target.insertBefore(resourceWrapper, target.querySelector('.' + WRAPPER_CONTAINER_CLASS));\n        }\n        else {\n            this.parent.element.insertBefore(resourceWrapper, this.parent.element.querySelector('.' + TABLE_CONTAINER_CLASS));\n        }\n        this.renderResourceHeaderText();\n        EventHandler.add(resourceWrapper.querySelector('.' + RESOURCE_MENU_ICON), 'click', this.menuClick, this);\n    }\n    renderResourceTree() {\n        this.popupOverlay = createElement('div', { className: RESOURCE_TREE_POPUP_OVERLAY });\n        const treeWrapper = createElement('div', { className: RESOURCE_TREE_POPUP + ' e-popup-close' });\n        if (this.parent.currentView === 'MonthAgenda') {\n            const target = this.parent.activeView.getPanel().querySelector('.' + WRAPPER_CONTAINER_CLASS);\n            target.insertBefore(treeWrapper, target.children[0]);\n            target.appendChild(this.popupOverlay);\n        }\n        else {\n            this.parent.element.querySelector('.' + TABLE_CONTAINER_CLASS).appendChild(treeWrapper);\n            this.parent.element.querySelector('.' + TABLE_CONTAINER_CLASS).appendChild(this.popupOverlay);\n        }\n        const resourceTree = createElement('div', { className: RESOURCE_TREE });\n        treeWrapper.appendChild(resourceTree);\n        this.treeViewObj = new TreeView({\n            cssClass: this.parent.cssClass,\n            enableRtl: this.parent.enableRtl,\n            fields: {\n                dataSource: [].slice.call(this.generateTreeData()),\n                id: 'resourceId',\n                text: 'resourceName',\n                child: 'resourceChild'\n            },\n            nodeTemplate: this.parent.resourceHeaderTemplate,\n            nodeClicked: this.resourceClick.bind(this)\n        });\n        this.treeViewObj.appendTo(resourceTree);\n        this.treeViewObj.expandAll();\n        this.treePopup = new Popup(treeWrapper, {\n            targetType: 'relative',\n            actionOnScroll: 'none',\n            content: this.treeViewObj.element,\n            enableRtl: this.parent.enableRtl,\n            hideAnimation: { name: 'SlideLeftOut', duration: 500 },\n            showAnimation: { name: 'SlideLeftIn', duration: 500 },\n            viewPortElement: this.parent.element.querySelector('.' + (this.parent.currentView === 'MonthAgenda' ?\n                WRAPPER_CONTAINER_CLASS : TABLE_CONTAINER_CLASS))\n        });\n        this.parent.on(documentClick, this.documentClick, this);\n    }\n    generateTreeData(isTimeLine) {\n        const treeCollection = [];\n        const resTreeColl = [];\n        let groupIndex = 0;\n        for (let i = 0, len = this.resourceTreeLevel.length; i < len; i++) {\n            const treeHandler = (treeLevel, index, levelId) => {\n                const resource = this.resourceCollection[index];\n                let treeArgs;\n                let resObj;\n                if (!isTimeLine) {\n                    treeArgs = {\n                        resourceId: levelId,\n                        resourceName: treeLevel.resourceData[resource.textField],\n                        resource: treeLevel.resource,\n                        resourceData: treeLevel.resourceData\n                    };\n                }\n                else {\n                    resObj = {\n                        type: 'resourceHeader', resource: treeLevel.resource,\n                        resourceData: treeLevel.resourceData, groupIndex: groupIndex,\n                        groupOrder: treeLevel.groupOrder\n                    };\n                    resTreeColl.push(resObj);\n                    groupIndex++;\n                }\n                if (treeLevel.child.length > 0 && !isTimeLine) {\n                    treeArgs.resourceChild = [];\n                }\n                let count = 1;\n                for (const tree of treeLevel.child) {\n                    if (!isTimeLine) {\n                        treeArgs.resourceChild.push(treeHandler(tree, index + 1, levelId + '-' + count));\n                    }\n                    else {\n                        treeHandler(tree, index + 1, levelId + '-' + count);\n                    }\n                    count += 1;\n                }\n                if (isTimeLine) {\n                    extend(resObj.resourceData, { Count: count - 1 });\n                }\n                return treeArgs;\n            };\n            if (!isTimeLine) {\n                treeCollection.push(treeHandler(this.resourceTreeLevel[i], 0, (i + 1).toString()));\n            }\n            else {\n                treeHandler(this.resourceTreeLevel[i], 0, (i + 1).toString());\n            }\n        }\n        if (isTimeLine) {\n            this.lastResourceLevel = resTreeColl;\n            return resTreeColl;\n        }\n        else {\n            return treeCollection;\n        }\n    }\n    renderResourceHeaderText() {\n        const resource = this.lastResourceLevel[this.parent.uiStateValues.groupIndex];\n        const headerCollection = [];\n        for (let i = 0, len = resource.groupOrder.length; i < len; i++) {\n            const resourceLevel = this.resourceCollection[i];\n            const resourceText = resourceLevel.dataSource.filter((resData) => resData[resourceLevel.idField] === resource.groupOrder[i]);\n            const resourceName = createElement('div', {\n                className: RESOURCE_NAME,\n                innerHTML: resourceText[0][resourceLevel.textField]\n            });\n            headerCollection.push(resourceName);\n            const levelIcon = createElement('div', { className: 'e-icons e-icon-next' });\n            headerCollection.push(levelIcon);\n        }\n        headerCollection.pop();\n        const target = (this.parent.currentView === 'MonthAgenda') ? this.parent.activeView.getPanel() : this.parent.element;\n        const headerWrapper = target.querySelector('.' + RESOURCE_LEVEL_TITLE);\n        removeChildren(headerWrapper);\n        for (const header of headerCollection) {\n            headerWrapper.appendChild(header);\n        }\n        if (this.lastResourceLevel.length === 1) {\n            addClass([this.parent.element.querySelector('.' + RESOURCE_MENU)], DISABLE_CLASS);\n        }\n    }\n    // eslint-disable-next-line @typescript-eslint/no-unused-vars\n    menuClick(event) {\n        if (this.parent.element.querySelector('.' + RESOURCE_TREE_POPUP).classList.contains(POPUP_OPEN)) {\n            this.treePopup.hide();\n            removeClass([this.popupOverlay], ENABLE_CLASS);\n        }\n        else {\n            const treeNodes = [].slice.call(this.treeViewObj.element.querySelectorAll('.e-list-item:not(.e-has-child)'));\n            removeClass(treeNodes, 'e-active');\n            addClass([treeNodes[this.parent.uiStateValues.groupIndex]], 'e-active');\n            this.treePopup.show();\n            addClass([this.popupOverlay], ENABLE_CLASS);\n        }\n    }\n    selectResourceByIndex(groupIndex) {\n        if (this.lastResourceLevel && groupIndex > -1 && groupIndex < this.lastResourceLevel.length) {\n            this.triggerEvents(groupIndex);\n        }\n    }\n    resourceClick(event) {\n        if (!event.node.classList.contains('e-has-child')) {\n            this.treePopup.hide();\n            removeClass([this.popupOverlay], ENABLE_CLASS);\n            const treeNodes = [].slice.call(this.treeViewObj.element.querySelectorAll('.e-list-item:not(.e-has-child)'));\n            const groupIndex = treeNodes.indexOf(event.node);\n            this.triggerEvents(groupIndex, event);\n            event.event.preventDefault();\n        }\n    }\n    triggerEvents(groupIndex, event) {\n        let args = { cancel: false, event: (event) ? event.event : null, groupIndex: groupIndex, requestType: 'resourceChange' };\n        this.parent.trigger(actionBegin, args, (actionArgs) => {\n            if (!actionArgs.cancel) {\n                this.parent.uiStateValues.groupIndex = actionArgs.groupIndex;\n                this.parent.renderModule.render(this.parent.currentView);\n                args = {\n                    cancel: false, event: (event) ? event.event : null, groupIndex: this.parent.uiStateValues.groupIndex, requestType: 'resourceChanged'\n                };\n                this.parent.trigger(actionComplete, args);\n            }\n        });\n    }\n    documentClick(args) {\n        if (closest(args.event.target, '.' + RESOURCE_TREE_POPUP)) {\n            return;\n        }\n        const treeWrapper = this.parent.element.querySelector('.' + RESOURCE_TREE_POPUP);\n        if (treeWrapper && treeWrapper.classList.contains(POPUP_OPEN)) {\n            this.treePopup.hide();\n            removeClass([this.popupOverlay], ENABLE_CLASS);\n        }\n    }\n    bindResourcesData(isSetModel) {\n        this.parent.showSpinner();\n        const promises = [];\n        for (const resource of this.parent.resources) {\n            const dataModule = new Data(resource.dataSource, resource.query);\n            promises.push(dataModule.getData(dataModule.generateQuery()));\n        }\n        Promise.all(promises).then((e) => this.dataManagerSuccess(e, isSetModel))\n            .catch((e) => this.parent.crudModule.dataManagerFailure(e));\n    }\n    dataManagerSuccess(e, isSetModel) {\n        if (!this.parent || this.parent && this.parent.isDestroyed) {\n            return;\n        }\n        this.parent.resourceCollection = [];\n        for (let i = 0, length = e.length; i < length; i++) {\n            const resource = this.parent.resources[i];\n            const resourceObj = this.getResourceModel(resource, e[i].result);\n            this.parent.resourceCollection.push(resourceObj);\n        }\n        this.refreshLayout(isSetModel);\n    }\n    getResourceModel(resource, resourceData) {\n        const resourceObj = {\n            field: resource.field,\n            title: resource.title,\n            name: resource.name,\n            allowMultiple: resource.allowMultiple,\n            dataSource: resourceData || resource.dataSource,\n            idField: resource.idField,\n            textField: resource.textField,\n            groupIDField: resource.groupIDField,\n            colorField: resource.colorField,\n            startHourField: resource.startHourField,\n            endHourField: resource.endHourField,\n            workDaysField: resource.workDaysField,\n            expandedField: resource.expandedField,\n            cssClassField: resource.cssClassField\n        };\n        return resourceObj;\n    }\n    refreshLayout(isSetModel) {\n        if (isNullOrUndefined(this.parent.uiStateValues.groupIndex) || !(this.parent.enablePersistence)) {\n            this.parent.uiStateValues.groupIndex = 0;\n        }\n        this.parent.renderElements(isSetModel);\n    }\n    setResourceCollection() {\n        let requiredResources = [];\n        this.resourceCollection = [];\n        this.colorIndex = null;\n        if (this.parent.activeViewOptions.group.resources.length > 0) {\n            for (const resource of this.parent.activeViewOptions.group.resources) {\n                const index = findIndexInData(this.parent.resourceCollection, 'name', resource);\n                if (index >= 0) {\n                    requiredResources.push(this.parent.resourceCollection[index]);\n                }\n            }\n        }\n        else if (this.parent.resourceCollection.length > 0) {\n            requiredResources = this.parent.resourceCollection;\n        }\n        let index = 0;\n        for (const resource of requiredResources) {\n            const resources = this.getResourceModel(resource);\n            if (resource.name === this.parent.eventSettings.resourceColorField) {\n                this.colorIndex = index;\n            }\n            index++;\n            this.resourceCollection.push(resources);\n        }\n        if (isNullOrUndefined(this.colorIndex)) {\n            this.colorIndex = this.resourceCollection.length - 1;\n        }\n    }\n    generateResourceLevels(innerDates, isTimeLine) {\n        const resources = this.resourceCollection;\n        const resTreeGroup = [];\n        let lastColumnDates = [];\n        const group = (resources, index, prevResource, prevResourceData, prevOrder) => {\n            const resTree = [];\n            const resource = resources[0];\n            if (resource) {\n                let data;\n                if (prevResourceData && this.parent.activeViewOptions.group.byGroupID) {\n                    const id = prevResourceData[prevResource.idField];\n                    data = resource.dataSource.filter((e) => e[resource.groupIDField] === id);\n                }\n                else {\n                    data = resource.dataSource;\n                }\n                for (let i = 0; i < data.length; i++) {\n                    let groupOrder = [];\n                    if (prevOrder && prevOrder.length > 0) {\n                        groupOrder = groupOrder.concat(prevOrder);\n                    }\n                    groupOrder.push(data[i][resource.idField]);\n                    const items = group(resources.slice(1), index + 1, resource, data[i], groupOrder);\n                    // Here validate child item empty top level resource only\n                    if (index === 0 && items.length === 0 && this.resourceCollection.length > 1) {\n                        continue;\n                    }\n                    let dateCol = [];\n                    let renderDates = this.parent.activeView.renderDates;\n                    let resWorkDays;\n                    if (!this.parent.activeViewOptions.group.byDate && index + 1 === this.resourceCollection.length) {\n                        const workDays = data[i][resource.workDaysField];\n                        const resStartHour = data[i][resource.startHourField];\n                        const resEndHour = data[i][resource.endHourField];\n                        if (workDays && workDays.length > 0) {\n                            renderDates = this.parent.activeView.getRenderDates(workDays);\n                            resWorkDays = workDays;\n                            dateCol = this.parent.activeView.getDateSlots(renderDates, workDays);\n                        }\n                        else {\n                            resWorkDays = this.parent.activeViewOptions.workDays;\n                            dateCol = innerDates;\n                        }\n                        const dateSlots = this.generateCustomHours(dateCol, resStartHour, resEndHour, groupOrder);\n                        lastColumnDates = lastColumnDates.concat(dateSlots);\n                    }\n                    const resCssClass = data[i][resource.cssClassField];\n                    const slotData = {\n                        type: 'resourceHeader', className: ['e-resource-cells'],\n                        resourceLevelIndex: index, groupOrder: groupOrder,\n                        resource: resource, resourceData: data[i],\n                        colSpan: this.parent.activeViewOptions.group.byDate ? 1 : dateCol.length,\n                        renderDates: renderDates, workDays: resWorkDays, cssClass: resCssClass,\n                        child: items\n                    };\n                    resTree.push(slotData);\n                }\n                if (!resTreeGroup[index]) {\n                    resTreeGroup[index] = [];\n                }\n                if (resTree.length > 0) {\n                    resTreeGroup[index].push(resTree);\n                }\n                return resTree;\n            }\n            return [];\n        };\n        this.resourceTreeLevel = group(resources, 0);\n        return (isTimeLine) ? [] : this.generateHeaderLevels(resTreeGroup, lastColumnDates, innerDates);\n    }\n    generateCustomHours(renderDates, startHour, endHour, groupOrder) {\n        const dateSlots = extend([], renderDates, null, true);\n        for (const dateSlot of dateSlots) {\n            if (startHour) {\n                dateSlot.startHour = this.parent.getStartEndTime(startHour);\n            }\n            if (endHour) {\n                dateSlot.endHour = this.parent.getStartEndTime(endHour);\n            }\n            if (groupOrder) {\n                dateSlot.groupOrder = groupOrder;\n            }\n        }\n        return dateSlots;\n    }\n    generateHeaderLevels(resTreeGroup, lastColumnDates, headerDates) {\n        const headerLevels = [];\n        for (let i = resTreeGroup.length - 1; i >= 0; i--) {\n            let temp = 0;\n            for (const currentLevelChilds of resTreeGroup[i]) {\n                for (const currentLevelChild of currentLevelChilds) {\n                    if (resTreeGroup[i + 1] && resTreeGroup[i + 1].length > 0) {\n                        const nextLevelChilds = resTreeGroup[i + 1][temp];\n                        if (!nextLevelChilds) {\n                            continue;\n                        }\n                        let colSpan = 0;\n                        for (const nextLevelChild of nextLevelChilds) {\n                            if (!this.parent.activeViewOptions.group.byGroupID || (this.parent.activeViewOptions.group.byGroupID &&\n                                nextLevelChild.resourceData[nextLevelChild.resource.groupIDField] ===\n                                    currentLevelChild.resourceData[currentLevelChild.resource.idField])) {\n                                colSpan += nextLevelChild.colSpan;\n                            }\n                        }\n                        currentLevelChild.colSpan = colSpan;\n                    }\n                    currentLevelChild.groupIndex = temp;\n                    temp++;\n                    headerLevels[currentLevelChild.resourceLevelIndex] = headerLevels[currentLevelChild.resourceLevelIndex] || [];\n                    headerLevels[currentLevelChild.resourceLevelIndex].push(currentLevelChild);\n                }\n            }\n        }\n        this.lastResourceLevel = headerLevels.slice(-1)[0] || [];\n        if (!this.parent.activeViewOptions.group.byDate) {\n            let index = 0;\n            for (const lastLevelResource of this.lastResourceLevel) {\n                for (let i = 0; i < lastLevelResource.colSpan; i++) {\n                    lastColumnDates[index].groupIndex = lastLevelResource.groupIndex;\n                    index++;\n                }\n            }\n            headerLevels.push(lastColumnDates);\n            return headerLevels;\n        }\n        const dateHeaderLevels = [];\n        const levels = extend([], headerLevels, null, true);\n        let dateColSpan = 0;\n        for (const firstRowTd of levels[0]) {\n            dateColSpan += firstRowTd.colSpan;\n        }\n        const datesColumn = [];\n        for (const headerDate of headerDates) {\n            headerDate.colSpan = dateColSpan;\n            datesColumn.push(headerDate);\n            const resGroup = extend([], levels, null, true);\n            for (let k = 0, length = resGroup.length; k < length; k++) {\n                if (k === resGroup.length - 1) {\n                    for (const resTd of resGroup[k]) {\n                        resTd.date = headerDate.date;\n                        resTd.workDays = headerDate.workDays;\n                        resTd.startHour = this.parent.getStartEndTime(resTd.resourceData[resTd.resource.startHourField]) ||\n                            headerDate.startHour;\n                        resTd.endHour = this.parent.getStartEndTime(resTd.resourceData[resTd.resource.endHourField]) ||\n                            headerDate.endHour;\n                    }\n                }\n                if (!dateHeaderLevels[k]) {\n                    dateHeaderLevels[k] = [];\n                }\n                dateHeaderLevels[k] = dateHeaderLevels[k].concat(resGroup[k]);\n            }\n        }\n        dateHeaderLevels.unshift(datesColumn);\n        return dateHeaderLevels;\n    }\n    setResourceValues(eventObj, groupIndex) {\n        const setValues = (index, field, value) => {\n            if (this.resourceCollection[index].allowMultiple && this.parent.activeViewOptions.group.allowGroupEdit) {\n                eventObj[field] = [value];\n            }\n            else {\n                eventObj[field] = value;\n            }\n        };\n        if (groupIndex === void 0) {\n            groupIndex = this.parent.uiStateValues.isGroupAdaptive ? this.parent.uiStateValues.groupIndex :\n                this.parent.activeCellsData.groupIndex;\n        }\n        if (this.parent.activeViewOptions.group.resources.length > 0 && !isNullOrUndefined(groupIndex)) {\n            const groupOrder = this.lastResourceLevel[groupIndex].groupOrder;\n            for (let index = 0; index < this.resourceCollection.length; index++) {\n                setValues(index, this.resourceCollection[index].field, groupOrder[index]);\n            }\n        }\n        else if (this.parent.resourceCollection.length > 0) {\n            for (let index = 0; index < this.resourceCollection.length; index++) {\n                const data = this.resourceCollection[index].dataSource[0];\n                if (data) {\n                    setValues(index, this.resourceCollection[index].field, data[this.resourceCollection[index].idField]);\n                }\n            }\n        }\n    }\n    getResourceColor(eventObj, groupOrder) {\n        const colorFieldIndex = (!isNullOrUndefined(groupOrder) &&\n            this.colorIndex > groupOrder.length - 1) ? groupOrder.length - 1 : this.colorIndex;\n        const resource = this.resourceCollection[colorFieldIndex];\n        if (isNullOrUndefined(groupOrder) && this.parent.activeViewOptions.group.allowGroupEdit && resource.allowMultiple) {\n            return undefined;\n        }\n        const id = isNullOrUndefined(groupOrder) ? eventObj[resource.field] : groupOrder[colorFieldIndex];\n        const data = this.filterData(resource.dataSource, resource.idField, id);\n        if (data.length > 0) {\n            return data[0][resource.colorField];\n        }\n        return undefined;\n    }\n    getCssClass(eventObj) {\n        const resource = this.resourceCollection.slice(-1)[0];\n        if (this.parent.activeViewOptions.group.allowGroupEdit && resource.allowMultiple) {\n            return undefined;\n        }\n        const data = this.filterData(resource.dataSource, resource.idField, eventObj[resource.field]);\n        if (data.length > 0) {\n            return data[0][resource.cssClassField];\n        }\n        return undefined;\n    }\n    getResourceRenderDates() {\n        // eslint-disable-next-line prefer-spread\n        const resourceDates = [].concat.apply([], this.lastResourceLevel.map((e) => e.renderDates));\n        const removeDuplicateDates = (dateColl) => dateColl.filter((date, index, dates) => dates.map((dateObj) => dateObj.getTime()).indexOf(date.getTime()) === index);\n        const renderDates = removeDuplicateDates(resourceDates);\n        renderDates.sort((a, b) => a.getTime() - b.getTime());\n        return renderDates;\n    }\n    filterData(dataSource, field, value) {\n        return dataSource.filter((data) => data[field] === value);\n    }\n    getResourceData(eventObj, index, groupEditIndex) {\n        if (this.parent.activeViewOptions.group.allowGroupEdit) {\n            const resourceObj = {};\n            for (const groupIndex of groupEditIndex) {\n                const resourceLevel = this.lastResourceLevel[groupIndex].groupOrder;\n                for (let level = 0, length = resourceLevel.length; level < length; level++) {\n                    const fieldName = this.resourceCollection[level].field;\n                    if (isNullOrUndefined(resourceObj[fieldName])) {\n                        resourceObj[fieldName] = [];\n                    }\n                    resourceObj[fieldName].push(resourceLevel[level]);\n                }\n            }\n            eventObj = extend(eventObj, resourceObj);\n        }\n        else {\n            for (let level = 0, length = this.resourceCollection.length; level < length; level++) {\n                if (this.lastResourceLevel[index]) {\n                    eventObj[this.resourceCollection[level].field] = this.lastResourceLevel[index].groupOrder[level];\n                }\n            }\n        }\n    }\n    addResource(resources, name, index) {\n        const resourceCollection = (resources instanceof Array) ? resources : [resources];\n        for (const resource of this.parent.resourceCollection) {\n            if (resource.name === name) {\n                resourceCollection.forEach((addObj, i) => new DataManager({ json: resource.dataSource }).insert(addObj, null, null, index + i));\n                break;\n            }\n        }\n        this.refreshLayout(true);\n    }\n    removeResource(resourceId, name) {\n        const resourceCollection = (resourceId instanceof Array) ? resourceId : [resourceId];\n        for (const resource of this.parent.resourceCollection) {\n            if (resource.name === name) {\n                resourceCollection.forEach((removeObj) => new DataManager({ json: resource.dataSource }).remove(resource.idField, removeObj));\n                break;\n            }\n        }\n        this.refreshLayout(true);\n    }\n    getIndexFromResourceId(id, name, resourceData, event, parentField) {\n        name = name || this.parent.resourceCollection.slice(-1)[0].name;\n        if (isNullOrUndefined(resourceData)) {\n            resourceData = this.resourceCollection.filter((e) => e.name === name)[0];\n            if (isNullOrUndefined(resourceData)) {\n                return null;\n            }\n        }\n        const resource = resourceData.dataSource.filter((e) => {\n            if (event && e[resourceData.idField] === id) {\n                if (e[resourceData.groupIDField] === event[parentField]) {\n                    return e[resourceData.idField] === id;\n                }\n                return null;\n            }\n            else {\n                return e[resourceData.idField] === id;\n            }\n        })[0];\n        return (this.lastResourceLevel.map((e) => e.resourceData).indexOf(resource));\n    }\n    resourceExpand(id, name, hide) {\n        const resource = this.parent.resourceCollection.filter((e) => {\n            if (e.name === name) {\n                return e;\n            }\n            return null;\n        })[0];\n        let index = 0;\n        const resourceData = resource.dataSource.filter((e) => e[resource.idField] === id)[0];\n        if (!this.parent.activeViewOptions.group.byGroupID) {\n            index = this.getIndexFromResourceId(id, name, resource);\n        }\n        else {\n            index = this.lastResourceLevel.map((e) => e.resourceData).indexOf(resourceData);\n        }\n        const target = this.parent.element.querySelector('.' + RESOURCE_COLUMN_WRAP_CLASS + ' ' + `[data-group-index=\"${index}\"]` +\n            ' ' + '.' + RESOURCE_TREE_ICON_CLASS);\n        if (target) {\n            if (target.classList.contains(RESOURCE_EXPAND_CLASS) && !hide) {\n                target.click();\n            }\n            else if (target.classList.contains(RESOURCE_COLLAPSE_CLASS) && hide) {\n                target.click();\n            }\n        }\n    }\n    resourceScroll(id, name) {\n        if (this.parent.isAdaptive || ['Agenda', 'MonthAgenda'].indexOf(this.parent.currentView) > -1) {\n            return;\n        }\n        const levelName = name || this.parent.resourceCollection.slice(-1)[0].name;\n        let levelIndex = this.parent.resourceCollection.length - 1;\n        const resource = this.parent.resourceCollection.filter((e, index) => {\n            if (e.name === levelName) {\n                levelIndex = index;\n                return e;\n            }\n            return null;\n        })[0];\n        const scrollElement = this.parent.element.querySelector('.' + CONTENT_WRAP_CLASS);\n        let index = 0;\n        if (this.parent.activeView.isTimelineView()) {\n            if (!this.parent.activeViewOptions.group.byGroupID) {\n                index = this.getIndexFromResourceId(id, levelName, resource);\n            }\n            else {\n                const resourceData = resource.dataSource.filter((e) => e[resource.idField] === id)[0];\n                index = this.lastResourceLevel.map((e) => e.resourceData).indexOf(resourceData);\n            }\n            if (this.parent.virtualScrollModule) {\n                const virtual = this.parent.element.querySelector('.' + VIRTUAL_TRACK_CLASS);\n                const averageRowHeight = Math.round(virtual.offsetHeight / this.expandedResources.length);\n                if (this.parent.rowAutoHeight) {\n                    scrollElement.scrollTop = 0;\n                    this.parent.virtualScrollModule.virtualScrolling();\n                }\n                scrollElement.scrollTop = (index * averageRowHeight) - (((this.parent.virtualScrollModule.bufferCount - 1) * averageRowHeight));\n                this.parent.virtualScrollModule.virtualScrolling();\n                if (this.parent.rowAutoHeight) {\n                    const td = this.parent.element.querySelector(`.${WORK_CELLS_CLASS}[data-group-index=\"${index}\"]`);\n                    if (td && !td.parentElement.classList.contains(HIDDEN_CLASS)) {\n                        scrollElement.scrollTop =\n                            (scrollElement.scrollTop < td.offsetTop) ? td.offsetTop : scrollElement.scrollTop + td.offsetTop;\n                    }\n                }\n                else {\n                    scrollElement.scrollTop = (index * averageRowHeight);\n                }\n            }\n            else {\n                const td = this.parent.element.querySelector(`.${WORK_CELLS_CLASS}[data-group-index=\"${index}\"]`);\n                if (td && !td.parentElement.classList.contains(HIDDEN_CLASS)) {\n                    scrollElement.scrollTop = td.offsetTop;\n                }\n            }\n        }\n        else {\n            if (!this.parent.activeViewOptions.group.byGroupID) {\n                index = this.getIndexFromResourceId(id, levelName, resource);\n            }\n            else {\n                if (levelName === this.parent.resourceCollection.slice(-1)[0].name) {\n                    index = this.lastResourceLevel.map((e) => e.resourceData[resource.idField]).indexOf(id);\n                }\n                else {\n                    index = resource.dataSource.map((e) => e[resource.idField]).indexOf(id);\n                }\n            }\n            const offsetTarget = this.parent.element.querySelector(`.${HEADER_ROW_CLASS}:nth-child(${levelIndex + 1})`);\n            const offset = [].slice.call(offsetTarget.children).map((node) => node.offsetLeft);\n            scrollElement.scrollLeft = offset[index];\n        }\n    }\n    destroy() {\n        this.parent.off(documentClick, this.documentClick);\n        if (this.treeViewObj) {\n            this.treeViewObj.destroy();\n            this.treeViewObj = null;\n        }\n        if (this.treePopup) {\n            this.treePopup.destroy();\n            this.treePopup = null;\n            remove(this.parent.element.querySelector('.' + RESOURCE_TREE_POPUP));\n            remove(this.parent.element.querySelector('.' + RESOURCE_TREE_POPUP_OVERLAY));\n        }\n        const resToolBarEle = this.parent.element.querySelector('.' + RESOURCE_TOOLBAR_CONTAINER);\n        if (resToolBarEle) {\n            remove(resToolBarEle);\n        }\n    }\n}\n\nvar __decorate = (undefined && undefined.__decorate) || function (decorators, target, key, desc) {\n    var c = arguments.length, r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d;\n    if (typeof Reflect === \"object\" && typeof Reflect.decorate === \"function\") r = Reflect.decorate(decorators, target, key, desc);\n    else for (var i = decorators.length - 1; i >= 0; i--) if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;\n    return c > 3 && r && Object.defineProperty(target, key, r), r;\n};\n/* eslint-disable @typescript-eslint/no-explicit-any */\n/**\n * Represents the Schedule component that displays a list of events scheduled against specific date and timings,\n * thus helping us to plan and manage it properly.\n * ```html\n * <div id=\"schedule\"></div>\n * ```\n * ```typescript\n * <script>\n *   var scheduleObj = new Schedule();\n *   scheduleObj.appendTo(\"#schedule\");\n * </script>\n * ```\n */\nlet Schedule = class Schedule extends Component {\n    /**\n     * Constructor for creating the Schedule widget\n     *\n     * @param {ScheduleModel} options Accepts the schedule model properties to initiate the rendering\n     * @param {string | HTMLElement} element Accepts the DOM element reference\n     */\n    constructor(options, element) {\n        super(options, element);\n    }\n    /**\n     * Core method that initializes the control rendering.\n     *\n     * @returns {void}\n     * @private\n     */\n    render() {\n        const addClasses = [];\n        const removeClasses = [];\n        addClasses.push(ROOT);\n        if (this.enableRtl) {\n            addClasses.push(RTL);\n        }\n        else {\n            removeClasses.push(RTL);\n        }\n        if (this.isAdaptive) {\n            addClasses.push(DEVICE_CLASS);\n        }\n        else {\n            removeClasses.push(DEVICE_CLASS);\n        }\n        if (this.allowMultiDrag) {\n            addClasses.push(MULTI_DRAG);\n        }\n        else {\n            removeClasses.push(MULTI_DRAG);\n        }\n        if (this.cssClass) {\n            const cssClass = this.cssClass.split(' ');\n            for (const cls of cssClass) {\n                addClasses.push(cls);\n            }\n        }\n        classList(this.element, addClasses, removeClasses);\n        this.validateDate();\n        createSpinner({ target: this.element });\n        this.scrollModule = new Scroll(this);\n        this.scrollModule.setWidth();\n        this.scrollModule.setHeight();\n        this.renderModule = new Render(this);\n        this.eventBase = new EventBase(this);\n        this.workCellAction = new WorkCellInteraction(this);\n        if (this.allowKeyboardInteraction) {\n            this.keyboardInteractionModule = new KeyboardInteraction(this);\n        }\n        this.inlineModule = new InlineEdit(this);\n        this.initializeDataModule();\n        this.renderTableContainer();\n        this.activeViewOptions = this.getActiveViewOptions();\n        this.initializeResources();\n        this.wireEvents();\n    }\n    renderTableContainer() {\n        if (!this.element.querySelector('.' + TABLE_CONTAINER_CLASS)) {\n            this.element.appendChild(this.createElement('div', { className: TABLE_CONTAINER_CLASS }));\n        }\n    }\n    /**\n     * Method to render react templates\n     *\n     * @returns {void}\n     * @private\n     */\n    renderTemplates() {\n        if (this.isReact) {\n            this.renderReactTemplates();\n        }\n    }\n    /**\n     * Method to reset react templates\n     *\n     * @param {string[]} templates Accepts the template ID\n     * @returns {void}\n     * @private\n     */\n    resetTemplates(templates) {\n        if (this.isAngular || this.isReact) {\n            this.clearTemplate(templates);\n        }\n    }\n    initializeResources(isSetModel = false) {\n        if (this.resources.length > 0) {\n            this.resourceBase = new ResourceBase(this);\n            this.resourceBase.bindResourcesData(isSetModel);\n        }\n        else {\n            this.resourceBase = null;\n            this.resourceCollection = [];\n            this.renderElements(isSetModel);\n        }\n    }\n    /**\n     * Method to render the layout elements\n     *\n     * @param {boolean} isLayoutOnly Accepts the boolean value to render layout or not\n     * @returns {void}\n     * @private\n     */\n    renderElements(isLayoutOnly) {\n        if (isLayoutOnly) {\n            this.initializeView(this.currentView);\n            this.eventWindow.refresh();\n            return;\n        }\n        this.destroyHeaderModule();\n        if (this.showHeaderBar) {\n            this.headerModule = new HeaderRenderer(this);\n        }\n        this.renderTableContainer();\n        if (Browser.isDevice || Browser.isTouch) {\n            this.scheduleTouchModule = new ScheduleTouch(this);\n        }\n        this.initializeView(this.currentView);\n        this.destroyPopups();\n        if (!this.isPrinting) {\n            this.initializePopups();\n        }\n    }\n    validateDate(selectedDate = this.selectedDate) {\n        // persist the selected date value\n        let date = selectedDate instanceof Date ? new Date(selectedDate.getTime()) : new Date(selectedDate);\n        const minDate = this.minDate instanceof Date ? new Date(this.minDate.getTime()) : new Date(this.minDate);\n        const maxDate = this.maxDate instanceof Date ? new Date(this.maxDate.getTime()) : new Date(this.maxDate);\n        if (minDate <= maxDate) {\n            if (date < minDate) {\n                date = minDate;\n            }\n            if (date > maxDate) {\n                date = maxDate;\n            }\n            this.setProperties({ selectedDate: new Date('' + date), minDate: new Date('' + minDate), maxDate: new Date('' + maxDate) }, true);\n            if (this.eventWindow) {\n                this.eventWindow.updateMinMaxDateToEditor();\n            }\n        }\n        else {\n            throw Error('minDate should be equal or less than maxDate');\n        }\n    }\n    getViewIndex(viewName) {\n        for (let item = 0; item < this.viewCollections.length; item++) {\n            const checkIndex = this.viewCollections[item].option;\n            if (checkIndex === viewName) {\n                return item;\n            }\n        }\n        return -1;\n    }\n    setViewOptions(isModuleLoad = false) {\n        this.viewOptions = {};\n        this.viewCollections = [];\n        let viewName;\n        let selectedView;\n        const prevIndex = this.viewIndex;\n        let count = 0;\n        this.viewIndex = -1;\n        for (const view of this.views) {\n            const isOptions = (typeof view === 'string') ? false : true;\n            if (typeof view === 'string') {\n                viewName = view;\n                if (this.currentView === viewName) {\n                    selectedView = viewName;\n                    this.viewIndex = count;\n                }\n            }\n            else {\n                viewName = view.option;\n                if (view.isSelected) {\n                    selectedView = viewName;\n                    this.viewIndex = count;\n                }\n            }\n            const obj = extend({ option: viewName }, isOptions ? view : {});\n            const fieldViewName = viewName.charAt(0).toLowerCase() + viewName.slice(1);\n            obj.cellHeaderTemplateName = obj.cellHeaderTemplate ? obj.option : '';\n            obj.dateHeaderTemplateName = obj.dateHeaderTemplate ? obj.option : '';\n            obj.cellTemplateName = obj.cellTemplate ? obj.option : '';\n            obj.dayHeaderTemplateName = obj.dayHeaderTemplate ? obj.option : '';\n            obj.monthHeaderTemplateName = obj.monthHeaderTemplate ? obj.option : '';\n            obj.resourceHeaderTemplateName = obj.resourceHeaderTemplate ? obj.option : '';\n            obj.headerIndentTemplateName = obj.headerIndentTemplate ? obj.option : '';\n            obj.eventTemplateName = obj.eventTemplate ? obj.option : '';\n            if (!isNullOrUndefined(obj.firstDayOfWeek) && obj.firstDayOfWeek === 0) {\n                delete obj.firstDayOfWeek;\n            }\n            if (!isNullOrUndefined(obj.interval) && obj.interval === 1) {\n                delete obj.interval;\n            }\n            this.viewCollections.push(obj);\n            if (isNullOrUndefined(this.viewOptions[fieldViewName])) {\n                this.viewOptions[fieldViewName] = [obj];\n            }\n            else {\n                this.viewOptions[fieldViewName].push(obj);\n            }\n            count++;\n        }\n        if (!isModuleLoad && selectedView) {\n            this.setProperties({ currentView: selectedView }, true);\n        }\n        if (this.viewIndex === -1) {\n            const currentIndex = this.getViewIndex(this.currentView);\n            this.viewIndex = ((typeof this.views[0] !== 'string') && (!isNullOrUndefined(prevIndex) && prevIndex !== -1)) ? prevIndex :\n                (currentIndex === -1) ? 0 : currentIndex;\n        }\n    }\n    getActiveViewOptions() {\n        const timeScale = {\n            enable: this.timeScale.enable,\n            interval: this.timeScale.interval,\n            slotCount: this.timeScale.slotCount,\n            majorSlotTemplate: this.timeScale.majorSlotTemplate,\n            minorSlotTemplate: this.timeScale.minorSlotTemplate\n        };\n        const isYearView = this.viewCollections[this.viewIndex].option.indexOf('Year') > -1;\n        const group = {\n            byDate: isYearView ? false : this.group.byDate,\n            byGroupID: this.group.byGroupID,\n            allowGroupEdit: this.group.allowGroupEdit,\n            resources: this.group.resources,\n            headerTooltipTemplate: this.group.headerTooltipTemplate,\n            enableCompactView: this.group.enableCompactView\n        };\n        const workDays = this.viewCollections[this.viewIndex].workDays ? [] : this.workDays;\n        const scheduleOptions = {\n            dateFormat: this.dateFormat,\n            endHour: this.endHour,\n            isSelected: false,\n            option: null,\n            readonly: this.readonly,\n            startHour: this.startHour,\n            allowVirtualScrolling: false,\n            cellHeaderTemplate: this.cellHeaderTemplate,\n            dayHeaderTemplate: this.dayHeaderTemplate,\n            monthHeaderTemplate: this.monthHeaderTemplate,\n            cellTemplate: this.cellTemplate,\n            eventTemplate: this.eventSettings.template,\n            dateHeaderTemplate: this.dateHeaderTemplate,\n            resourceHeaderTemplate: this.resourceHeaderTemplate,\n            headerIndentTemplate: this.headerIndentTemplate,\n            firstMonthOfYear: this.firstMonthOfYear,\n            firstDayOfWeek: this.firstDayOfWeek,\n            workDays: workDays,\n            monthsCount: this.monthsCount,\n            showWeekend: this.showWeekend,\n            showWeekNumber: this.showWeekNumber,\n            displayName: null,\n            interval: 1,\n            timeScale: timeScale,\n            timeFormat: this.internalTimeFormat,\n            group: group,\n            headerRows: this.headerRows,\n            orientation: 'Horizontal'\n        };\n        const viewOptions = this.viewCollections[this.viewIndex];\n        const viewsData = extend(scheduleOptions, viewOptions, undefined, true);\n        if (this.firstDayOfWeek !== 0 && viewOptions.firstDayOfWeek && this.firstDayOfWeek !== viewOptions.firstDayOfWeek) {\n            viewsData.firstDayOfWeek = this.firstDayOfWeek;\n        }\n        return viewsData;\n    }\n    initializeDataModule() {\n        this.eventFields = {\n            id: this.eventSettings.fields.id,\n            isBlock: this.eventSettings.fields.isBlock,\n            subject: this.eventSettings.fields.subject.name,\n            startTime: this.eventSettings.fields.startTime.name,\n            endTime: this.eventSettings.fields.endTime.name,\n            startTimezone: this.eventSettings.fields.startTimezone.name,\n            endTimezone: this.eventSettings.fields.endTimezone.name,\n            location: this.eventSettings.fields.location.name,\n            description: this.eventSettings.fields.description.name,\n            isAllDay: this.eventSettings.fields.isAllDay.name,\n            recurrenceID: this.eventSettings.fields.recurrenceID.name,\n            recurrenceRule: this.eventSettings.fields.recurrenceRule.name,\n            recurrenceException: this.eventSettings.fields.recurrenceException.name,\n            isReadonly: this.eventSettings.fields.isReadonly,\n            followingID: this.eventSettings.fields.followingID\n        };\n        this.setEditorTitles();\n        this.dataModule = new Data(this.eventSettings.dataSource, this.eventSettings.query);\n        this.crudModule = new Crud(this);\n    }\n    setEditorTitles() {\n        this.editorTitles = {\n            subject: this.eventSettings.fields.subject.title || this.localeObj.getConstant('title'),\n            startTime: this.eventSettings.fields.startTime.title || this.localeObj.getConstant('start'),\n            endTime: this.eventSettings.fields.endTime.title || this.localeObj.getConstant('end'),\n            isAllDay: this.eventSettings.fields.isAllDay.title || this.localeObj.getConstant('allDay'),\n            startTimezone: this.eventSettings.fields.startTimezone.title || this.localeObj.getConstant('startTimezone'),\n            endTimezone: this.eventSettings.fields.endTimezone.title || this.localeObj.getConstant('endTimezone'),\n            location: this.eventSettings.fields.location.title || this.localeObj.getConstant('location'),\n            description: this.eventSettings.fields.description.title || this.localeObj.getConstant('description'),\n            recurrenceRule: this.eventSettings.fields.recurrenceRule.title || this.localeObj.getConstant('repeat')\n        };\n    }\n    initializeView(viewName) {\n        this.showSpinner();\n        this.activeViewOptions = this.getActiveViewOptions();\n        if (this.resourceBase) {\n            this.resourceBase.setResourceCollection();\n        }\n        this.initializeTemplates();\n        this.renderModule.render(viewName);\n    }\n    initializeTemplates() {\n        this.cellHeaderTemplateFn = this.templateParser(this.activeViewOptions.cellHeaderTemplate);\n        this.dayHeaderTemplateFn = this.templateParser(this.activeViewOptions.dayHeaderTemplate);\n        this.monthHeaderTemplateFn = this.templateParser(this.activeViewOptions.monthHeaderTemplate);\n        this.cellTemplateFn = this.templateParser(this.activeViewOptions.cellTemplate);\n        this.dateHeaderTemplateFn = this.templateParser(this.activeViewOptions.dateHeaderTemplate);\n        this.majorSlotTemplateFn = this.templateParser(this.activeViewOptions.timeScale.majorSlotTemplate);\n        this.minorSlotTemplateFn = this.templateParser(this.activeViewOptions.timeScale.minorSlotTemplate);\n        this.appointmentTemplateFn = this.templateParser(this.activeViewOptions.eventTemplate);\n        this.resourceHeaderTemplateFn = this.templateParser(this.activeViewOptions.resourceHeaderTemplate);\n        this.headerIndentTemplateFn = this.templateParser(this.activeViewOptions.headerIndentTemplate);\n        this.headerTooltipTemplateFn = this.templateParser(this.activeViewOptions.group.headerTooltipTemplate);\n        this.eventTooltipTemplateFn = this.templateParser(this.eventSettings.tooltipTemplate);\n        this.editorTemplateFn = this.templateParser(this.editorTemplate);\n        this.quickInfoTemplatesHeaderFn = this.templateParser(this.quickInfoTemplates.header);\n        this.quickInfoTemplatesContentFn = this.templateParser(this.quickInfoTemplates.content);\n        this.quickInfoTemplatesFooterFn = this.templateParser(this.quickInfoTemplates.footer);\n    }\n    initializePopups() {\n        this.eventWindow = new EventWindow(this);\n        this.quickPopup = new QuickPopups(this);\n    }\n    /**\n     * Method to get day names\n     *\n     * @param {string} type Accepts the day name\n     * @returns {string[]} Returns the collection of day names\n     * @private\n     */\n    getDayNames(type) {\n        const culShortNames = [];\n        let cldrObj;\n        let nameSpace = '';\n        if (this.locale === 'en' || this.locale === 'en-US') {\n            nameSpace = 'days.stand-alone.';\n            cldrObj = (getValue(nameSpace + type, getDefaultDateObject(this.getCalendarMode())));\n        }\n        else {\n            nameSpace = 'main.' + '' + this.locale + '.dates.calendars.' + this.getCalendarMode() + '.days.format.' + type;\n            cldrObj = (getValue(nameSpace, cldrData));\n        }\n        for (const obj of Object.keys(cldrObj)) {\n            culShortNames.push(getValue(obj, cldrObj));\n        }\n        return culShortNames;\n    }\n    setCldrTimeFormat() {\n        if (!isNullOrUndefined(this.timeFormat)) {\n            this.internalTimeFormat = this.timeFormat;\n            return;\n        }\n        if (this.locale === 'en' || this.locale === 'en-US') {\n            this.internalTimeFormat = (getValue('timeFormats.short', getDefaultDateObject(this.getCalendarMode())));\n        }\n        else {\n            this.internalTimeFormat = (getValue('main.' + '' + this.locale + '.dates.calendars.' + this.getCalendarMode() + '.timeFormats.short', cldrData));\n        }\n    }\n    /**\n     * Method to get calendar mode\n     *\n     * @returns {string} Returns the calendar mode\n     * @private\n     */\n    getCalendarMode() {\n        return this.calendarMode.toLowerCase();\n    }\n    /**\n     * Method to get time in string\n     *\n     * @param {Date} date Accepts the date object\n     * @returns {string} Returns the time in string\n     * @private\n     */\n    getTimeString(date) {\n        const time = this.globalize.formatDate(date, {\n            format: this.activeViewOptions.timeFormat,\n            type: 'time', calendar: this.getCalendarMode()\n        });\n        return time.toLocaleUpperCase();\n    }\n    /**\n     * Method to get  date object\n     *\n     * @param {Date} date Accepts the date object\n     * @returns {Date} Returns the date object\n     * @private\n     */\n    getDateTime(date) {\n        return date instanceof Date ? new Date(date.getTime()) : new Date(date);\n    }\n    setCalendarMode() {\n        if (this.calendarMode === 'Islamic') {\n            this.calendarUtil = new Islamic();\n        }\n        else {\n            this.calendarUtil = new Gregorian();\n        }\n    }\n    /**\n     * Method to change the current view\n     *\n     * @param {View} view Accepts the view name\n     * @param {Event} event Accepts the event object\n     * @param {boolean} muteOnChange Accepts the value to enable or disable mute on change\n     * @param {number} index Accepts the index value\n     * @returns {void}\n     * @private\n     */\n    changeView(view, event, muteOnChange, index) {\n        if (isNullOrUndefined(index)) {\n            index = this.getViewIndex(view);\n        }\n        if (!muteOnChange && index === this.viewIndex && this.currentView === view || index < 0) {\n            return;\n        }\n        this.viewIndex = index;\n        let args = { requestType: 'viewNavigate', cancel: false, event: event };\n        this.trigger(actionBegin, args, (actionArgs) => {\n            if (!actionArgs.cancel) {\n                const navArgs = {\n                    action: 'view', cancel: false, currentDate: this.selectedDate, previousView: this.currentView, currentView: view, viewIndex: this.viewIndex\n                };\n                this.trigger(navigating, navArgs, (navigationArgs) => {\n                    if (!navigationArgs.cancel) {\n                        this.viewIndex = navigationArgs.viewIndex;\n                        this.setProperties({ currentView: view }, true);\n                        if (this.headerModule) {\n                            this.headerModule.updateActiveView();\n                            this.headerModule.setCalendarDate(this.selectedDate);\n                            this.headerModule.setCalendarView();\n                        }\n                        this.initializeView(this.currentView);\n                        this.animateLayout();\n                        args = { requestType: 'viewNavigate', cancel: false, event: event };\n                        this.trigger(actionComplete, args);\n                    }\n                });\n            }\n        });\n    }\n    /**\n     * Method to change the view date\n     *\n     * @param {Date} selectedDate Accepts the selected date\n     * @param {Event} event Accepts the event object\n     * @returns {void}\n     * @private\n     */\n    changeDate(selectedDate, event) {\n        let args = { requestType: 'dateNavigate', cancel: false, event: event };\n        this.trigger(actionBegin, args, (actionArgs) => {\n            if (!actionArgs.cancel) {\n                const navArgs = {\n                    action: 'date', cancel: false, previousDate: this.selectedDate, currentDate: selectedDate\n                };\n                this.trigger(navigating, navArgs, (navigationArgs) => {\n                    if (!navigationArgs.cancel) {\n                        this.uiStateValues.isInitial = this.activeView.isTimelineView() ? true : this.uiStateValues.isInitial;\n                        this.validateDate(navigationArgs.currentDate);\n                        if (this.headerModule) {\n                            this.headerModule.setCalendarDate(navigationArgs.currentDate);\n                        }\n                        this.initializeView(this.currentView);\n                        this.animateLayout();\n                        args = { requestType: 'dateNavigate', cancel: false, event: event };\n                        this.trigger(actionComplete, args);\n                    }\n                });\n            }\n        });\n    }\n    /**\n     * Method to validate min and max date\n     *\n     * @param {Date} date Accepts the date object\n     * @returns {boolean} Returns the boolean result to validate the min and max date\n     * @private\n     */\n    isMinMaxDate(date = this.selectedDate) {\n        return ((date.getTime() >= this.minDate.getTime()) && (date.getTime() <= this.maxDate.getTime()));\n    }\n    /**\n     * Method to validate the selected date\n     *\n     * @param {Date} date Accepts the date object\n     * @returns {boolean} Returns the boolean value for given date is selected date or not\n     * @private\n     */\n    isSelectedDate(date) {\n        return date.setHours(0, 0, 0, 0) === new Date('' + this.selectedDate).setHours(0, 0, 0, 0);\n    }\n    /**\n     * Method to get the current time\n     *\n     * @param {Date} date Accepts the date object\n     * @returns {Date} Returns the date object after performing the timezone conversion\n     * @private\n     */\n    getCurrentTime(date = new Date()) {\n        if (this.timezone) {\n            return this.tzModule.convert(date, this.tzModule.getLocalTimezoneName(), this.timezone);\n        }\n        return date;\n    }\n    /** Method to get navigate view\n     *\n     * @returns {View} Return the navigate view name\n     * @private\n     */\n    getNavigateView() {\n        if (this.activeView.isTimelineView()) {\n            return this.currentView === 'TimelineMonth' || this.currentView === 'TimelineYear' ? 'TimelineDay' : 'Agenda';\n        }\n        return 'Day';\n    }\n    animateLayout() {\n        if (!this.activeView.element) {\n            return;\n        }\n        new Animation({ duration: 600, name: 'FadeIn', timingFunction: 'easeIn' }).animate(this.activeView.element);\n    }\n    /**\n     * To provide the array of modules needed for control rendering\n     *\n     * @returns {ModuleDeclaration[]} Returns the declared modules\n     * @private\n     */\n    requiredModules() {\n        const modules = [];\n        this.setViewOptions(true);\n        for (let view of Object.keys(this.viewOptions)) {\n            view = (view === 'timelineDay' || view === 'timelineWeek' || view === 'timelineWorkWeek') ? 'timelineViews' : view;\n            modules.push({ member: view, args: [this] });\n        }\n        if (this.allowDragAndDrop) {\n            modules.push({ member: 'dragAndDrop', args: [this] });\n        }\n        if (this.allowResizing) {\n            modules.push({ member: 'resize', args: [this] });\n        }\n        modules.push({ member: 'excelExport', args: [this] });\n        modules.push({ member: 'iCalendarExport', args: [this] });\n        modules.push({ member: 'iCalendarImport', args: [this] });\n        modules.push({ member: 'print', args: [this] });\n        return modules;\n    }\n    /**\n     * Initializes the values of private members.\n     *\n     * @returns {void}\n     * @private\n     */\n    preRender() {\n        this.isAdaptive = Browser.isDevice || isIPadDevice();\n        this.globalize = new Internationalization(this.locale);\n        this.tzModule = new Timezone();\n        if (this && isNullOrUndefined(this.uiStateValues) || !(this.enablePersistence)) {\n            this.uiStateValues = {\n                expand: false, isInitial: true, left: 0, top: 0, isGroupAdaptive: false,\n                isIgnoreOccurrence: false, groupIndex: 0, action: false, isBlock: false\n            };\n        }\n        this.activeCellsData = { startTime: this.getCurrentTime(), endTime: this.getCurrentTime(), isAllDay: false };\n        this.activeEventData = { event: undefined, element: undefined };\n        this.getDefaultLocale();\n        this.localeObj = new L10n(this.getModuleName(), this.defaultLocale, this.locale);\n        this.setCldrTimeFormat();\n        this.setCalendarMode();\n        this.eventsData = [];\n        this.eventsProcessed = [];\n        this.blockData = [];\n        this.blockProcessed = [];\n        this.resourceCollection = [];\n        this.currentAction = null;\n        this.selectedElements = [];\n        this.setViewOptions();\n    }\n    getDefaultLocale() {\n        this.defaultLocale = {\n            day: 'Day',\n            week: 'Week',\n            workWeek: 'Work Week',\n            month: 'Month',\n            year: 'Year',\n            agenda: 'Agenda',\n            weekAgenda: 'Week Agenda',\n            workWeekAgenda: 'Work Week Agenda',\n            monthAgenda: 'Month Agenda',\n            today: 'Today',\n            noEvents: 'No events',\n            emptyContainer: 'There are no events scheduled on this day.',\n            allDay: 'All day',\n            start: 'Start',\n            end: 'End',\n            more: 'more',\n            close: 'Close',\n            cancel: 'Cancel',\n            noTitle: '(No Title)',\n            delete: 'Delete',\n            deleteEvent: 'Delete Event',\n            deleteMultipleEvent: 'Delete Multiple Events',\n            selectedItems: 'Items selected',\n            deleteSeries: 'Entire Series',\n            edit: 'Edit',\n            editSeries: 'Entire Series',\n            editEvent: 'Edit Event',\n            createEvent: 'Create',\n            subject: 'Subject',\n            addTitle: 'Add title',\n            moreDetails: 'More Details',\n            save: 'Save',\n            editContent: 'How would you like to change the appointment in the series?',\n            deleteContent: 'Are you sure you want to delete this event?',\n            deleteMultipleContent: 'Are you sure you want to delete the selected events?',\n            newEvent: 'New Event',\n            title: 'Title',\n            location: 'Location',\n            description: 'Description',\n            timezone: 'Timezone',\n            startTimezone: 'Start Timezone',\n            endTimezone: 'End Timezone',\n            repeat: 'Repeat',\n            saveButton: 'Save',\n            cancelButton: 'Cancel',\n            deleteButton: 'Delete',\n            recurrence: 'Recurrence',\n            wrongPattern: 'The recurrence pattern is not valid.',\n            seriesChangeAlert: 'Do you want to cancel the changes made to specific ' +\n                'instances of this series and match it to the whole series again?',\n            createError: 'The duration of the event must be shorter than how frequently it occurs. ' +\n                'Shorten the duration, or change the recurrence pattern in the recurrence event editor.',\n            sameDayAlert: 'Two occurrences of the same event cannot occur on the same day.',\n            occurenceAlert: 'Cannot reschedule an occurrence of the recurring appointment if it skips over ' +\n                'a later occurrence of the same appointment.',\n            editRecurrence: 'Edit Recurrence',\n            repeats: 'Repeats',\n            alert: 'Alert',\n            startEndError: 'The selected end date occurs before the start date.',\n            invalidDateError: 'The entered date value is invalid.',\n            blockAlert: 'Events cannot be scheduled within the blocked time range.',\n            ok: 'Ok',\n            yes: 'Yes',\n            no: 'No',\n            occurrence: 'Occurrence',\n            series: 'Series',\n            previous: 'Previous',\n            next: 'Next',\n            timelineDay: 'Timeline Day',\n            timelineWeek: 'Timeline Week',\n            timelineWorkWeek: 'Timeline Work Week',\n            timelineMonth: 'Timeline Month',\n            timelineYear: 'Timeline Year',\n            editFollowingEvent: 'Following Events',\n            deleteTitle: 'Delete Event',\n            editTitle: 'Edit Event',\n            beginFrom: 'Begin From',\n            endAt: 'Ends At',\n            expandAllDaySection: 'Expand-all-day-section',\n            collapseAllDaySection: 'Collapse-all-day-section',\n            searchTimezone: 'Search Timezone',\n            noRecords: 'No records found'\n        };\n    }\n    wireEvents() {\n        EventHandler.add(window, 'resize', this.onScheduleResize, this);\n        EventHandler.add(window, 'orientationchange', this.onScheduleResize, this);\n        EventHandler.add(document, Browser.touchStartEvent, this.onDocumentClick, this);\n    }\n    /**\n     * Method to remove selected class\n     *\n     * @returns {void}\n     * @private\n     */\n    removeSelectedClass() {\n        const selectedCells = this.getSelectedElements();\n        for (const cell of selectedCells) {\n            cell.setAttribute('aria-selected', 'false');\n            cell.removeAttribute('tabindex');\n        }\n        removeClass(selectedCells, SELECTED_CELL_CLASS);\n    }\n    /**\n     * Method to add selected class\n     *\n     * @param {HTMLTableCellElement[]} cells Accepts the collection of elements\n     * @param {HTMLTableCellElement} focusCell Accepts the focus element\n     * @param {boolean} isPreventScroll Accepts the boolean value to prevent scroll\n     * @returns {void}\n     * @private\n     */\n    addSelectedClass(cells, focusCell, isPreventScroll) {\n        for (const cell of cells) {\n            cell.setAttribute('aria-selected', 'true');\n        }\n        addClass(cells, SELECTED_CELL_CLASS);\n        if (focusCell) {\n            focusCell.setAttribute('tabindex', '0');\n            focusCell.focus({ preventScroll: isPreventScroll || false });\n        }\n    }\n    /**\n     * Method to select cell\n     *\n     * @param {HTMLElement | HTMLTableCellElement} element Accepts the select element\n     * @returns {void}\n     * @private\n     */\n    selectCell(element) {\n        this.removeSelectedClass();\n        this.addSelectedClass([element], element);\n    }\n    /**\n     * Method to get all day row element\n     *\n     * @returns {Element} Returns the all day row element\n     * @private\n     */\n    getAllDayRow() {\n        return this.element.querySelector('.' + ALLDAY_ROW_CLASS);\n    }\n    /**\n     * Method to get content table element\n     *\n     * @returns {HTMLElement} Returns the content table element\n     * @private\n     */\n    getContentTable() {\n        return this.activeView.element.querySelector('.' + CONTENT_TABLE_CLASS + ' tbody');\n    }\n    /**\n     * Method to get all content table rows\n     *\n     * @returns {HTMLElement[]} Returns the content table rows\n     * @private\n     */\n    getTableRows() {\n        return [].slice.call(this.element.querySelectorAll('.' + CONTENT_TABLE_CLASS + ' tbody tr:not(.' + HIDDEN_CLASS + ')'));\n    }\n    /**\n     * Method to get work cell elements\n     *\n     * @returns {Element[]} Returns the all work cell elements\n     * @private\n     */\n    getWorkCellElements() {\n        return [].slice.call(this.element.querySelectorAll('.' + WORK_CELLS_CLASS));\n    }\n    /**\n     * Method to get the index from date collection\n     *\n     * @param {Date[]} collection Accepts the collections of date\n     * @param {Date} date Accepts the date object\n     * @returns {number} Returns the index compared date with date collections\n     * @private\n     */\n    getIndexOfDate(collection, date) {\n        return collection.map(Number).indexOf(+date);\n    }\n    /**\n     * Method to find all day cell\n     *\n     * @param {Element} td Accepts the DOM Element\n     * @returns {boolean} Returns the boolean value\n     * @private\n     */\n    isAllDayCell(td) {\n        if (['Month', 'TimelineMonth', 'TimelineYear', 'MonthAgenda'].indexOf(this.currentView) > -1 ||\n            td.classList.contains(ALLDAY_CELLS_CLASS) ||\n            td.classList.contains(HEADER_CELLS_CLASS) || !this.activeViewOptions.timeScale.enable) {\n            return true;\n        }\n        if (this.activeView.isTimelineView() && this.activeViewOptions.headerRows.length > 0 &&\n            this.activeViewOptions.headerRows.slice(-1)[0].option !== 'Hour') {\n            return true;\n        }\n        return false;\n    }\n    /**\n     * Method to get date from element\n     *\n     * @param {Element} td Accepts the DOM element\n     * @returns {Date} Returns the date object\n     * @private\n     */\n    getDateFromElement(td) {\n        let dateString;\n        if (!isNullOrUndefined(td)) {\n            dateString = td.getAttribute('data-date');\n        }\n        if (!isNullOrUndefined(dateString)) {\n            const dateInMS = parseInt(dateString, 10);\n            const date = new Date(dateInMS);\n            return date;\n        }\n        return undefined;\n    }\n    /**\n     * Method to get target element from given selector\n     *\n     * @param {string} selector Accepts the element selector\n     * @param {number} left Accepts the pageX value\n     * @param {number} top Accepts the pageY value\n     * @returns {Element[]} Returns the collection of elements based on the given selector\n     * @private\n     */\n    getTargetElement(selector, left, top) {\n        const element = document.elementFromPoint(left, top);\n        let targetElement;\n        if (element) {\n            targetElement = element.closest(selector);\n        }\n        return (targetElement) ? [targetElement] : null;\n    }\n    /**\n     * Method to process cell header template\n     *\n     * @returns {CallbackFunction} Returns the callback function\n     * @private\n     */\n    getCellHeaderTemplate() {\n        return this.cellHeaderTemplateFn;\n    }\n    /**\n     * Method to process cell header template in year view.\n     *\n     * @returns {CallbackFunction} Returns the callback function\n     * @private\n     */\n    getDayHeaderTemplate() {\n        return this.dayHeaderTemplateFn;\n    }\n    /**\n     * Method to process cell header template in year view.\n     *\n     * @returns {CallbackFunction} Returns the callback function\n     * @private\n     */\n    getMonthHeaderTemplate() {\n        return this.monthHeaderTemplateFn;\n    }\n    /**\n     * Method to process cell template\n     *\n     * @returns {CallbackFunction} Returns the callback function\n     * @private\n     */\n    getCellTemplate() {\n        return this.cellTemplateFn;\n    }\n    /**\n     * Method to process date header template\n     *\n     * @returns {CallbackFunction} Returns the callback function\n     * @private\n     */\n    getDateHeaderTemplate() {\n        return this.dateHeaderTemplateFn;\n    }\n    /**\n     * Method to process major slot template\n     *\n     * @returns {CallbackFunction} Returns the callback function\n     * @private\n     */\n    getMajorSlotTemplate() {\n        return this.majorSlotTemplateFn;\n    }\n    /**\n     * Method to process minor slot template\n     *\n     * @returns {CallbackFunction} Returns the callback function\n     * @private\n     */\n    getMinorSlotTemplate() {\n        return this.minorSlotTemplateFn;\n    }\n    /**\n     * Method to process appointment template\n     *\n     * @returns {CallbackFunction} Returns the callback function\n     * @private\n     */\n    getAppointmentTemplate() {\n        return this.appointmentTemplateFn;\n    }\n    /**\n     * Method to process appointment tooltip template\n     *\n     * @returns {CallbackFunction} Returns the callback function\n     * @private\n     */\n    getEventTooltipTemplate() {\n        return this.eventTooltipTemplateFn;\n    }\n    /**\n     * Method to process header tooltip template\n     *\n     * @returns {CallbackFunction} Returns the callback function\n     * @private\n     */\n    getHeaderTooltipTemplate() {\n        return this.headerTooltipTemplateFn;\n    }\n    /**\n     * Method to process editor template\n     *\n     * @returns {CallbackFunction} Returns the callback function\n     * @private\n     */\n    getEditorTemplate() {\n        return this.editorTemplateFn;\n    }\n    /**\n     * Method to process quick info header template\n     *\n     * @returns {CallbackFunction} Returns the callback function\n     * @private\n     */\n    getQuickInfoTemplatesHeader() {\n        return this.quickInfoTemplatesHeaderFn;\n    }\n    /**\n     * Method to process quick info content template\n     *\n     * @returns {CallbackFunction} Returns the callback function\n     * @private\n     */\n    getQuickInfoTemplatesContent() {\n        return this.quickInfoTemplatesContentFn;\n    }\n    /**\n     * Method to process quick info footer template\n     *\n     * @returns {CallbackFunction} Returns the callback function\n     * @private\n     */\n    getQuickInfoTemplatesFooter() {\n        return this.quickInfoTemplatesFooterFn;\n    }\n    /**\n     * Method to process resource header template\n     *\n     * @returns {CallbackFunction} Returns the callback function\n     * @private\n     */\n    getResourceHeaderTemplate() {\n        return this.resourceHeaderTemplateFn;\n    }\n    /**\n     * Method to process indent template\n     *\n     * @returns {CallbackFunction} Returns the callback function\n     * @private\n     */\n    getHeaderIndentTemplate() {\n        return this.headerIndentTemplateFn;\n    }\n    /**\n     * Method to get dynamic CSS properties\n     *\n     * @returns {ScrollCss} Returns the CSS properties dynamically\n     * @private\n     */\n    getCssProperties() {\n        const cssProps = {\n            border: this.enableRtl ? 'borderLeftWidth' : 'borderRightWidth',\n            padding: this.enableRtl ? 'paddingLeft' : 'paddingRight',\n            rtlBorder: this.enableRtl ? 'borderRightWidth' : 'borderLeftWidth',\n            rtlPadding: this.enableRtl ? 'paddingRight' : 'paddingLeft'\n        };\n        return cssProps;\n    }\n    /**\n     * Method to remove new event element in adaptive mode\n     *\n     * @returns {void}\n     * @private\n     */\n    removeNewEventElement() {\n        const eventClone = this.element.querySelector('.' + NEW_EVENT_CLASS);\n        if (!isNullOrUndefined(eventClone)) {\n            remove(eventClone);\n        }\n    }\n    /**\n     * Method to get start end time from string\n     *\n     * @param {string} startEndTime Accepts the start end time string value\n     * @returns {Date} Returns the date object\n     * @private\n     */\n    getStartEndTime(startEndTime) {\n        if (!isNullOrUndefined(startEndTime) && startEndTime !== '') {\n            const startEndDate = resetTime(this.getCurrentTime());\n            const timeString = startEndTime.split(':');\n            if (timeString.length === 2) {\n                startEndDate.setHours(parseInt(timeString[0], 10), parseInt(timeString[1], 10), 0);\n            }\n            return startEndDate;\n        }\n        return null;\n    }\n    onDocumentClick(args) {\n        this.notify(documentClick, { event: args });\n    }\n    onScheduleResize() {\n        if (isNullOrUndefined(this.activeView) || ((this.isAdaptive || isMobile()) && document.activeElement\n            && document.activeElement.classList.contains(SUBJECT_CLASS))) {\n            return;\n        }\n        if (this.activeViewOptions.timeScale.enable && this.activeView) {\n            this.activeView.highlightCurrentTime();\n        }\n        if (this.quickPopup) {\n            this.quickPopup.onClosePopup();\n        }\n        if (this.currentView === 'Month' || ((this.currentView !== 'Agenda' && this.currentView !== 'MonthAgenda')\n            && !this.activeViewOptions.timeScale.enable) || this.activeView.isTimelineView()) {\n            this.activeView.resetColWidth();\n            this.notify(scrollUiUpdate, { cssProperties: this.getCssProperties(), isPreventScrollUpdate: true });\n            this.refreshEvents(false);\n        }\n        else {\n            this.notify(contentReady, {});\n        }\n    }\n    /**\n     * Method to process the templates\n     *\n     * @param {string} template Accepts the template in string\n     * @returns {CallbackFunction} Returns the callback function\n     * @private\n     */\n    templateParser(template) {\n        if (template) {\n            try {\n                if (document.querySelectorAll(template).length) {\n                    return compile(document.querySelector(template).innerHTML.trim());\n                }\n            }\n            catch (error) {\n                return compile(template);\n            }\n        }\n        return undefined;\n    }\n    /**\n     * Method to generate the announcement string\n     *\n     * @param {Object} event Accepts the event object\n     * @param {string} subject Accepts the subject text\n     * @returns {string} Returns the announcement string\n     * @private\n     */\n    getAnnouncementString(event, subject) {\n        let resourceName;\n        if (this.quickPopup && this.activeViewOptions.group.resources.length > 0) {\n            const constantText = '\"s event - ';\n            resourceName = this.quickPopup.getResourceText({ event: event }, 'event') + constantText;\n        }\n        const recordSubject = (subject || (event[this.eventFields.subject] || this.eventSettings.fields.subject.default));\n        const skeleton = 'full';\n        const startDateText = this.globalize.formatDate(event[this.eventFields.startTime], {\n            type: 'dateTime', skeleton: skeleton, calendar: this.getCalendarMode()\n        });\n        const endDateText = this.globalize.formatDate(event[this.eventFields.endTime], {\n            type: 'dateTime', skeleton: skeleton, calendar: this.getCalendarMode()\n        });\n        let announcementString = recordSubject + ' ' + this.localeObj.getConstant('beginFrom') + ' '\n            + startDateText + ' ' + this.localeObj.getConstant('endAt') + ' ' + endDateText;\n        if (resourceName) {\n            announcementString = resourceName + ' ' + announcementString;\n        }\n        return announcementString;\n    }\n    /**\n     * Method to process the element boundary validation\n     *\n     * @param {number} pageY Accepts the pageY value\n     * @param {number} pageX Accepts the pageX value\n     * @returns {ResizeEdges} Returns the boundary validation object\n     * @private\n     */\n    boundaryValidation(pageY, pageX) {\n        const autoScrollDistance = 30;\n        const scrollEdges = { left: false, right: false, top: false, bottom: false };\n        const viewBoundaries = this.element.querySelector('.' + CONTENT_WRAP_CLASS).getBoundingClientRect();\n        if ((pageY < viewBoundaries.top + autoScrollDistance + window.pageYOffset) &&\n            (pageY > viewBoundaries.top + window.pageYOffset)) {\n            scrollEdges.top = true;\n        }\n        if ((pageY > (viewBoundaries.bottom - autoScrollDistance) + window.pageYOffset) &&\n            (pageY < viewBoundaries.bottom + window.pageYOffset)) {\n            scrollEdges.bottom = true;\n        }\n        if ((pageX < viewBoundaries.left + autoScrollDistance + window.pageXOffset) &&\n            (pageX > viewBoundaries.left + window.pageXOffset)) {\n            scrollEdges.left = true;\n        }\n        if ((pageX > (viewBoundaries.right - autoScrollDistance) + window.pageXOffset) &&\n            (pageX < viewBoundaries.right + window.pageXOffset)) {\n            scrollEdges.right = true;\n        }\n        return scrollEdges;\n    }\n    /**\n     * Method to get the week number.\n     *\n     * @param {Date[]} dates Accepts the date collections\n     * @returns {number} Returns the week number\n     * @private\n     */\n    getWeekNumberContent(dates) {\n        let weekNumber;\n        if (this.weekRule === 'FirstDay') {\n            const weekNumberDate = getWeekLastDate(dates.slice(-1)[0], this.firstDayOfWeek);\n            weekNumber = this.globalize.formatNumber(getWeekNumber(weekNumberDate));\n        }\n        else if (this.weekRule === 'FirstFourDayWeek') {\n            const weekFirstDate = getWeekFirstDate(dates.slice(-1)[0], this.firstDayOfWeek);\n            const weekLastDate = getWeekLastDate(dates.slice(-1)[0], this.firstDayOfWeek);\n            const weekMidDate = getWeekMiddleDate(weekFirstDate, weekLastDate);\n            weekNumber = this.globalize.formatNumber(getWeekNumber(weekMidDate));\n        }\n        else if (this.weekRule === 'FirstFullWeek') {\n            const weekFirstDate = getWeekFirstDate(dates.slice(-1)[0], this.firstDayOfWeek);\n            weekNumber = this.globalize.formatNumber(getWeekNumber(weekFirstDate));\n        }\n        return weekNumber;\n    }\n    /**\n     * Method to render the header indent template.\n     *\n     * @param {TdData} data Accepts the td data\n     * @param {Element} td Accepts the td element\n     * @returns {void}\n     * @private\n     */\n    renderHeaderIndentTemplate(data, td) {\n        if (this.activeViewOptions.headerIndentTemplate) {\n            const scheduleId = this.element.id + '_';\n            const viewName = this.activeViewOptions.headerIndentTemplateName;\n            const templateId = scheduleId + viewName + 'headerIndentTemplate';\n            const indentTemplate = [].slice.call(this.getHeaderIndentTemplate()(data, this, 'headerIndentTemplate', templateId, false));\n            append(indentTemplate, td);\n        }\n    }\n    unWireEvents() {\n        EventHandler.remove(window, 'resize', this.onScheduleResize);\n        EventHandler.remove(window, 'orientationchange', this.onScheduleResize);\n        EventHandler.remove(document, Browser.touchStartEvent, this.onDocumentClick);\n    }\n    /**\n     * Core method to return the component name.\n     *\n     * @returns {string} Returns the module name\n     * @private\n     */\n    getModuleName() {\n        return 'schedule';\n    }\n    /**\n     * Returns the properties to be maintained in the persisted state.\n     *\n     * @returns {string} Returns the persistance data\n     * @private\n     */\n    getPersistData() {\n        return this.addOnPersist(['currentView', 'selectedDate', 'scrollTop', 'scrollLeft']);\n    }\n    /**\n     * Called internally, if any of the property value changed.\n     *\n     * @returns {void}\n     * @private\n     */\n    onPropertyChanged(newProp, oldProp) {\n        if (this.isReact && isNullOrUndefined(this.activeView)) {\n            return;\n        }\n        const state = {\n            isRefresh: false, isResource: false, isDate: false, isView: false, isLayout: false, isDataManager: false\n        };\n        for (const prop of Object.keys(newProp)) {\n            switch (prop) {\n                case 'views':\n                    this.setViewOptions();\n                    if (this.headerModule) {\n                        this.headerModule.updateItems();\n                    }\n                    state.isView = true;\n                    break;\n                case 'currentView':\n                    state.isView = true;\n                    break;\n                case 'minDate':\n                case 'maxDate':\n                case 'selectedDate':\n                    state.isDate = true;\n                    break;\n                case 'dateFormat':\n                    this.activeViewOptions = this.getActiveViewOptions();\n                    if (this.headerModule) {\n                        this.headerModule.updateDateRange(this.activeView.getDateRangeText());\n                    }\n                    break;\n                case 'showHeaderBar':\n                    this.destroyHeaderModule();\n                    if (newProp.showHeaderBar) {\n                        this.headerModule = new HeaderRenderer(this);\n                        this.headerModule.updateDateRange(this.activeView.getDateRangeText());\n                    }\n                    this.notify(scrollUiUpdate, { cssProperties: this.getCssProperties() });\n                    if (this.activeView.isTimelineView()) {\n                        this.refreshEvents(false);\n                    }\n                    break;\n                case 'showWeekend':\n                case 'workDays':\n                case 'startHour':\n                case 'endHour':\n                case 'workHours':\n                case 'readonly':\n                case 'headerRows':\n                case 'showWeekNumber':\n                case 'rowAutoHeight':\n                    state.isLayout = true;\n                    break;\n                case 'locale':\n                case 'calendarMode':\n                    this.globalize = new Internationalization(this.locale);\n                    this.localeObj = new L10n(this.getModuleName(), this.defaultLocale, this.locale);\n                    this.setCldrTimeFormat();\n                    this.setCalendarMode();\n                    state.isRefresh = true;\n                    break;\n                case 'firstDayOfWeek':\n                    this.activeViewOptions.firstDayOfWeek = newProp.firstDayOfWeek;\n                    if (this.eventWindow) {\n                        this.eventWindow.refreshRecurrenceEditor();\n                    }\n                    state.isLayout = true;\n                    break;\n                case 'showTimeIndicator':\n                    if (this.activeViewOptions.timeScale.enable && this.activeView) {\n                        this.activeView.highlightCurrentTime();\n                    }\n                    break;\n                case 'cellHeaderTemplate':\n                    this.activeViewOptions.cellHeaderTemplate = newProp.cellHeaderTemplate;\n                    this.cellHeaderTemplateFn = this.templateParser(this.activeViewOptions.cellHeaderTemplate);\n                    state.isLayout = true;\n                    break;\n                case 'cellTemplate':\n                    this.activeViewOptions.cellTemplate = newProp.cellTemplate;\n                    this.cellTemplateFn = this.templateParser(this.activeViewOptions.cellTemplate);\n                    state.isLayout = true;\n                    break;\n                case 'dateHeaderTemplate':\n                    this.activeViewOptions.dateHeaderTemplate = newProp.dateHeaderTemplate;\n                    this.dateHeaderTemplateFn = this.templateParser(this.activeViewOptions.dateHeaderTemplate);\n                    state.isLayout = true;\n                    break;\n                case 'dayHeaderTemplate':\n                    this.activeViewOptions.dayHeaderTemplate = newProp.dayHeaderTemplate;\n                    this.dayHeaderTemplateFn = this.templateParser(this.activeViewOptions.dayHeaderTemplate);\n                    state.isLayout = true;\n                    break;\n                case 'monthHeaderTemplate':\n                    this.activeViewOptions.monthHeaderTemplate = newProp.monthHeaderTemplate;\n                    this.monthHeaderTemplateFn = this.templateParser(this.activeViewOptions.monthHeaderTemplate);\n                    state.isLayout = true;\n                    break;\n                case 'resourceHeaderTemplate':\n                    this.activeViewOptions.resourceHeaderTemplate = newProp.resourceHeaderTemplate;\n                    this.resourceHeaderTemplateFn = this.templateParser(this.activeViewOptions.resourceHeaderTemplate);\n                    state.isLayout = true;\n                    break;\n                case 'timezone':\n                    this.eventBase.timezonePropertyChange(oldProp.timezone);\n                    this.headerModule.setCalendarTimezone();\n                    break;\n                case 'enableRtl':\n                    this.setRtlClass();\n                    state.isRefresh = true;\n                    break;\n                default:\n                    this.extendedPropertyChange(prop, newProp, oldProp, state);\n                    break;\n            }\n        }\n        this.propertyChangeAction(state);\n    }\n    propertyChangeAction(state) {\n        if (state.isRefresh) {\n            this.refresh();\n        }\n        else if (state.isResource) {\n            this.initializeResources(true);\n        }\n        else if (state.isView) {\n            this.changeView(this.currentView, null, true);\n        }\n        else if (state.isDate) {\n            this.changeDate(this.selectedDate);\n        }\n        else if (state.isLayout) {\n            this.initializeView(this.currentView);\n        }\n        else if (state.isDataManager && this.crudModule) {\n            if (this.dragAndDropModule) {\n                this.dragAndDropModule.actionObj.action = '';\n                removeClass([this.element], EVENT_ACTION_CLASS);\n            }\n            this.crudModule.refreshDataManager();\n        }\n    }\n    allDayRowScrollUpdate() {\n        const dateHeader = this.element.querySelector('.' + DATE_HEADER_WRAP_CLASS);\n        const allDayRow = this.element.querySelector('.' + ALLDAY_ROW_CLASS);\n        if (this.height === 'auto' || !this.enableAllDayScroll) {\n            addClass([dateHeader], ALLDAY_APPOINTMENT_AUTO);\n            if (dateHeader.classList.contains(ALLDAY_APPOINTMENT_SCROLL)) {\n                removeClass([dateHeader], ALLDAY_APPOINTMENT_SCROLL);\n            }\n            if (this.uiStateValues.expand) {\n                const allDayCells = [].slice.call(this.element.querySelectorAll('.' + ALLDAY_CELLS_CLASS));\n                allDayCells[0].style.height = (allDayRow.style.height) ? allDayRow.style.height : allDayCells[1].style.height;\n            }\n        }\n        else {\n            if (dateHeader.classList.contains(ALLDAY_APPOINTMENT_AUTO)) {\n                removeClass([dateHeader], ALLDAY_APPOINTMENT_AUTO);\n            }\n            this.eventBase.allDayExpandScroll(dateHeader, true);\n        }\n        if (!this.uiStateValues.expand) {\n            allDayRow.style.height = '';\n        }\n    }\n    extendedPropertyChange(prop, newProp, oldProp, state) {\n        switch (prop) {\n            case 'width':\n            case 'height':\n            case 'enableAllDayScroll':\n                if (['Day', 'Week', 'WorkWeek'].indexOf(this.currentView) > -1) {\n                    this.allDayRowScrollUpdate();\n                }\n                this.notify(uiUpdate, { module: 'scroll', properties: { width: newProp.width, height: newProp.height } });\n                break;\n            case 'cssClass':\n                if (oldProp.cssClass) {\n                    removeClass([this.element], oldProp.cssClass.split(' '));\n                }\n                if (newProp.cssClass) {\n                    addClass([this.element], newProp.cssClass.split(' '));\n                }\n                break;\n            case 'hideEmptyAgendaDays':\n            case 'agendaDaysCount':\n                this.activeViewOptions = this.getActiveViewOptions();\n                state.isView = true;\n                break;\n            case 'eventSettings':\n                this.onEventSettingsPropertyChanged(newProp.eventSettings, oldProp.eventSettings, state);\n                break;\n            case 'allowKeyboardInteraction':\n                if (this.keyboardInteractionModule) {\n                    this.keyboardInteractionModule.destroy();\n                    this.keyboardInteractionModule = null;\n                }\n                if (newProp.allowKeyboardInteraction) {\n                    this.keyboardInteractionModule = new KeyboardInteraction(this);\n                }\n                break;\n            case 'timezoneDataSource':\n                if (this.eventWindow) {\n                    this.eventWindow.refresh();\n                }\n                break;\n            case 'editorTemplate':\n                if (!isNullOrUndefined(this.editorTemplate)) {\n                    this.editorTemplateFn = this.templateParser(this.editorTemplate);\n                }\n                if (this.eventWindow) {\n                    this.eventWindow.setDialogContent();\n                }\n                break;\n            case 'quickInfoTemplates':\n                if (this.quickInfoTemplates.header) {\n                    this.quickInfoTemplatesHeaderFn = this.templateParser(this.quickInfoTemplates.header);\n                }\n                if (this.quickInfoTemplates.content) {\n                    this.quickInfoTemplatesContentFn = this.templateParser(this.quickInfoTemplates.content);\n                }\n                if (this.quickInfoTemplates.footer) {\n                    this.quickInfoTemplatesFooterFn = this.templateParser(this.quickInfoTemplates.footer);\n                }\n                break;\n            case 'group':\n                this.onGroupSettingsPropertyChanged(newProp.group, oldProp.group, state);\n                break;\n            case 'resources':\n                state.isResource = true;\n                break;\n            case 'timeScale':\n                this.activeViewOptions.timeScale.interval = newProp.timeScale.interval || this.activeViewOptions.timeScale.interval;\n                this.activeViewOptions.timeScale.slotCount = newProp.timeScale.slotCount || this.activeViewOptions.timeScale.slotCount;\n                if (this.eventWindow) {\n                    this.eventWindow.refreshDateTimePicker();\n                }\n                state.isLayout = true;\n                break;\n            case 'allowDragAndDrop':\n            case 'allowResizing':\n            case 'eventDragArea':\n                this.refreshEvents(false);\n                break;\n            case 'weekRule':\n                state.isLayout = true;\n                break;\n            case 'firstMonthOfYear':\n                this.activeViewOptions.firstMonthOfYear = newProp.firstMonthOfYear;\n                this.viewIndex = this.activeView.viewIndex;\n                state.isLayout = true;\n                break;\n            case 'monthsCount':\n                this.activeViewOptions.monthsCount = newProp.monthsCount;\n                this.viewIndex = this.activeView.viewIndex;\n                state.isLayout = true;\n                break;\n            case 'timeFormat':\n                this.internalTimeFormat = newProp.timeFormat || this.activeViewOptions.timeFormat;\n                if (this.eventWindow) {\n                    this.eventWindow.refreshDateTimePicker();\n                }\n                state.isLayout = true;\n                break;\n            case 'enableAdaptiveUI':\n                if (this.showHeaderBar && this.headerModule) {\n                    this.destroyHeaderModule();\n                    this.headerModule = new HeaderRenderer(this);\n                    this.headerModule.updateDateRange(this.activeView.getDateRangeText());\n                }\n                state.isLayout = true;\n                break;\n            case 'headerIndentTemplate':\n                this.activeViewOptions.headerIndentTemplate = newProp.headerIndentTemplate;\n                this.headerIndentTemplateFn = this.templateParser(this.activeViewOptions.headerIndentTemplate);\n                state.isLayout = true;\n                break;\n        }\n    }\n    setRtlClass() {\n        if (this.enableRtl) {\n            addClass([this.element], 'e-rtl');\n        }\n        else {\n            removeClass([this.element], 'e-rtl');\n        }\n    }\n    onGroupSettingsPropertyChanged(newProp, oldProp, state) {\n        for (const prop of Object.keys(newProp)) {\n            if (prop === 'headerTooltipTemplate') {\n                this.headerTooltipTemplateFn = this.templateParser(newProp[prop]);\n            }\n            else {\n                state.isLayout = true;\n                if (this.eventWindow) {\n                    this.eventWindow.refresh();\n                }\n            }\n        }\n    }\n    onEventSettingsPropertyChanged(newProp, oldProp, state) {\n        for (const prop of Object.keys(newProp)) {\n            switch (prop) {\n                case 'dataSource':\n                case 'query':\n                case 'fields':\n                    this.initializeDataModule();\n                    state.isDataManager = true;\n                    break;\n                case 'template':\n                    this.activeViewOptions.eventTemplate = newProp.template;\n                    this.appointmentTemplateFn = this.templateParser(this.activeViewOptions.eventTemplate);\n                    state.isDataManager = true;\n                    break;\n                case 'enableTooltip':\n                    if (this.eventTooltip) {\n                        this.eventTooltip.destroy();\n                        this.eventTooltip = null;\n                    }\n                    if (newProp.enableTooltip) {\n                        this.eventTooltip = new EventTooltip(this);\n                    }\n                    break;\n                case 'tooltipTemplate':\n                    this.eventTooltipTemplateFn = this.templateParser(this.eventSettings.tooltipTemplate);\n                    break;\n                case 'resourceColorField':\n                    if (this.resourceBase) {\n                        this.resourceBase.setResourceCollection();\n                    }\n                    state.isDataManager = true;\n                    break;\n                case 'editFollowingEvents':\n                    if (this.quickPopup) {\n                        this.quickPopup.refreshQuickDialog();\n                    }\n                    break;\n                case 'allowAdding':\n                case 'allowEditing':\n                case 'allowDeleting':\n                    if (this.showHeaderBar && this.headerModule) {\n                        this.headerModule.updateAddIcon();\n                    }\n                    if (this.eventWindow) {\n                        this.eventWindow.refresh();\n                    }\n                    break;\n                case 'spannedEventPlacement':\n                case 'enableMaxHeight':\n                case 'enableIndicator':\n                    this.refreshEvents(false);\n                    break;\n                case 'ignoreWhitespace':\n                    state.isLayout = true;\n                    break;\n            }\n        }\n    }\n    destroyHeaderModule() {\n        if (this.headerModule) {\n            this.headerModule.destroy();\n            this.headerModule = null;\n        }\n    }\n    destroyPopups() {\n        if (this.quickPopup) {\n            this.quickPopup.destroy();\n            this.quickPopup = null;\n        }\n        if (this.eventWindow) {\n            this.eventWindow.destroy();\n            this.eventWindow = null;\n        }\n    }\n    /**\n     * Allows to show the spinner on schedule at the required scenarios.\n     *\n     * @function showSpinner\n     * @returns {void}\n     */\n    showSpinner() {\n        showSpinner(this.element);\n    }\n    /**\n     * When the spinner is shown manually using `showSpinner` method, it can be hidden using this `hideSpinner` method.\n     *\n     * @function hideSpinner\n     * @returns {void}\n     */\n    hideSpinner() {\n        hideSpinner(this.element);\n    }\n    /**\n     * Sets different working hours on the required working days by accepting the required start and end time as well as the date collection\n     *  as its parameters.\n     *\n     * @function setWorkHours\n     * @param {Date} dates Collection of dates on which the given start and end hour range needs to be applied.\n     * @param {string} start Defines the work start hour.\n     * @param {string} end Defines the work end hour.\n     * @param {number} groupIndex Defines the resource index from last level.\n     * @returns {void}\n     */\n    setWorkHours(dates, start, end, groupIndex) {\n        let cells = [];\n        cells = this.getWorkHourCells(dates, start, end, groupIndex);\n        addClass(cells, WORK_HOURS_CLASS);\n    }\n    /**\n     * Removes or resets different working hours on the required working days by accepting the required start and end time as well as the\n     * date collection as its parameters.\n     * if no parameters has been passed to this function, it will remove all the work hours.\n     *\n     * @param {Date} dates Collection of dates on which the given start and end hour range need to be applied.\n     * @param {string} start Defines the work start hour.\n     * @param {string} end Defines the work end hour.\n     * @param {number} groupIndex Defines the resource index from last level.\n     * @returns {void}\n     */\n    resetWorkHours(dates = this.activeView.renderDates, start, end, groupIndex) {\n        if (dates && start && end) {\n            const cells = this.getWorkHourCells(dates, start, end, groupIndex);\n            removeClass(cells, WORK_HOURS_CLASS);\n        }\n        else {\n            const workHourCells = [].slice.call(this.element.querySelectorAll('.' + WORK_HOURS_CLASS));\n            removeClass(workHourCells, WORK_HOURS_CLASS);\n        }\n    }\n    getWorkHourCells(dates, start, end, groupIndex) {\n        if (['Agenda', 'MonthAgenda', 'Month', 'TimelineMonth'].indexOf(this.currentView) > -1) {\n            return [];\n        }\n        let startHour = this.getStartEndTime(start);\n        let endHour = this.getStartEndTime(end);\n        const tableEle = this.getContentTable();\n        if (isNullOrUndefined(startHour) || isNullOrUndefined(endHour) || !tableEle) {\n            return [];\n        }\n        startHour.setMilliseconds(0);\n        endHour.setMilliseconds(0);\n        const viewStartHour = this.activeView.getStartHour();\n        if (startHour < viewStartHour) {\n            startHour = viewStartHour;\n        }\n        const viewEndHour = this.activeView.getEndHour();\n        if (endHour > viewEndHour) {\n            endHour = viewEndHour;\n        }\n        const msMajorInterval = this.activeViewOptions.timeScale.interval * MS_PER_MINUTE;\n        const msInterval = msMajorInterval / this.activeViewOptions.timeScale.slotCount;\n        let startIndex = Math.round((startHour.getTime() - viewStartHour.getTime()) / msInterval);\n        let endIndex = Math.ceil((endHour.getTime() - viewStartHour.getTime()) / msInterval);\n        const tempStartIndex = startIndex;\n        const tempEndIndex = endIndex;\n        const cells = [];\n        for (let date of dates) {\n            date = this.getDateTime(date);\n            resetTime(date);\n            let renderDates = this.activeView.renderDates;\n            if (!isNullOrUndefined(groupIndex) && this.resourceBase && !this.activeView.isTimelineView()) {\n                renderDates = this.resourceBase.lastResourceLevel[groupIndex].renderDates;\n            }\n            const colIndex = this.getIndexOfDate(renderDates, date);\n            if (colIndex >= 0) {\n                if (this.activeView.isTimelineView()) {\n                    const slotsPerDay = Math.round((viewEndHour.getTime() - viewStartHour.getTime()) / msInterval);\n                    startIndex = tempStartIndex + (colIndex * slotsPerDay);\n                    endIndex = tempEndIndex + (colIndex * slotsPerDay);\n                }\n                for (let i = startIndex; i < endIndex; i++) {\n                    if (this.activeView.isTimelineView()) {\n                        const rowIndex = (!isNullOrUndefined(groupIndex)) ? groupIndex : 0;\n                        cells.push(tableEle.rows[rowIndex].cells[i]);\n                    }\n                    else {\n                        if (!isNullOrUndefined(groupIndex)) {\n                            const selector = '.' + WORK_CELLS_CLASS + '[data-group-index=\"' + groupIndex + '\"]';\n                            const tds = [].slice.call(tableEle.rows[i].querySelectorAll(selector));\n                            cells.push(tds[colIndex]);\n                        }\n                        else {\n                            cells.push(tableEle.rows[i].cells[colIndex]);\n                        }\n                    }\n                }\n            }\n        }\n        return cells;\n    }\n    /**\n     * Retrieves the start and end time information of the specific cell element.\n     *\n     * @function getCellDetails\n     * @param {Element | Element[]} tdCol Accepts the single or collection of elements.\n     * @returns {CellClickEventArgs} Object An object holding the startTime, endTime and all-day information along with the target HTML element will be returned.\n     */\n    getCellDetails(tdCol) {\n        const td = (tdCol instanceof Array) ? tdCol : [tdCol];\n        const firstTd = getElement(td[0]);\n        const lastTd = getElement(td.slice(-1)[0]);\n        const startTime = this.getDateFromElement(firstTd);\n        let endTime = this.getDateFromElement(lastTd);\n        if (isNullOrUndefined(startTime) || isNullOrUndefined(endTime)) {\n            return undefined;\n        }\n        const endDateFromColSpan = this.activeView.isTimelineView() && !isNullOrUndefined(lastTd.getAttribute('colSpan')) &&\n            this.headerRows.length > 0;\n        const duration = endDateFromColSpan ? parseInt(lastTd.getAttribute('colSpan'), 10) : 1;\n        if (!this.activeViewOptions.timeScale.enable || endDateFromColSpan || lastTd.classList.contains(ALLDAY_CELLS_CLASS) ||\n            lastTd.classList.contains(HEADER_CELLS_CLASS)) {\n            endTime = addDays(new Date(endTime.getTime()), duration);\n        }\n        else {\n            endTime = this.activeView.getEndDateFromStartDate(endTime);\n        }\n        const data = {\n            startTime: startTime,\n            endTime: endTime,\n            isAllDay: this.isAllDayCell(firstTd),\n            element: tdCol\n        };\n        const groupIndex = firstTd.getAttribute('data-group-index');\n        if (!isNullOrUndefined(groupIndex)) {\n            data.groupIndex = parseInt(groupIndex, 10);\n        }\n        return data;\n    }\n    /**\n     * Retrieves the selected cell elements.\n     *\n     * @function getSelectedElements\n     * @returns {Element[]} The elements of currently selected cells will be returned.\n     */\n    getSelectedElements() {\n        return [].slice.call(this.element.querySelectorAll('.' + SELECTED_CELL_CLASS));\n    }\n    /**\n     * To get the resource collection\n     *\n     * @function getResourceCollections\n     * @returns {ResourcesModel[]} Returns the resource collections\n     */\n    getResourceCollections() {\n        return this.resourceCollection;\n    }\n    /**\n     * To set the resource collection\n     *\n     * @function setResourceCollections\n     * @param {ResourcesModel[]} resourceCol Accepts the resource collections in ResourcesModel type\n     * @returns {void}\n     */\n    setResourceCollections(resourceCol) {\n        this.setProperties({ resources: resourceCol }, false);\n    }\n    /**\n     * Current View could be change based on the provided parameters.\n     *\n     * @function changeCurrentView\n     * @param {View} viewName Accept the view in the viewCollections.\n     * @param {number} viewIndex Accept the viewIndex in the viewCollections.\n     * @returns {void}\n     */\n    changeCurrentView(viewName, viewIndex) {\n        let index = this.getViewIndex(viewName);\n        const view = viewName.charAt(0).toLowerCase() + viewName.slice(1);\n        const viewOptions = this.viewOptions[view];\n        if (viewOptions) {\n            index = this.viewCollections.indexOf(viewOptions[viewIndex || 0]);\n        }\n        if (index === -1 || index === this.viewIndex) {\n            return;\n        }\n        this.changeView(viewName, null, null, index);\n    }\n    /**\n     * Return the current view Index.\n     *\n     * @function getCurrentViewIndex\n     * @returns {number} Returns the view index\n     */\n    getCurrentViewIndex() {\n        return this.viewIndex;\n    }\n    /**\n     * Retrieves the resource details based on the provided resource index.\n     *\n     * @param {number} index index of the resources at the last level.\n     * @returns {ResourceDetails} Object An object holding the details of resource and resourceData.\n     */\n    getResourcesByIndex(index) {\n        if (this.resourceBase && this.resourceBase.lastResourceLevel) {\n            if (index < 0 || index >= this.resourceBase.lastResourceLevel.length) {\n                return undefined;\n            }\n            const data = this.resourceBase.lastResourceLevel[index];\n            const groupData = {};\n            this.resourceBase.setResourceValues(groupData, index);\n            return { resource: data.resource, resourceData: data.resourceData, groupData: groupData };\n        }\n        return undefined;\n    }\n    /**\n     * This method allows to expand the resource that available on the scheduler.\n     *\n     * @function expandResource\n     * @param {string | number} resourceId Accepts the resource id in either string or number type\n     * @param {string} name Accepts the name of the resource collection\n     * @returns {void}\n     */\n    expandResource(resourceId, name) {\n        if (this.activeView.isTimelineView() && this.resourceBase && this.resourceCollection.length > 1) {\n            this.resourceBase.resourceExpand(resourceId, name, false);\n        }\n    }\n    /**\n     * This method allows to collapse the resource that available on the scheduler.\n     *\n     * @function collapseResource\n     * @param {string | number} resourceId Accepts the resource id in either string or number type\n     * @param {string} name Accepts the name of the resource collection\n     * @returns {void}\n     */\n    collapseResource(resourceId, name) {\n        if (this.activeView.isTimelineView() && this.resourceBase && this.resourceCollection.length > 1) {\n            this.resourceBase.resourceExpand(resourceId, name, true);\n        }\n    }\n    /**\n     * Scrolls the Schedule content area to the specified time.\n     *\n     * @function scrollTo\n     * @param {string} hour Accepts the time value in the skeleton format of 'Hm'.\n     * @param {Date} scrollDate Accepts the date object value.\n     * @returns {void}\n     */\n    scrollTo(hour, scrollDate) {\n        if (this.activeView.scrollToDate && isNullOrUndefined(hour) && scrollDate) {\n            this.activeView.scrollToDate(scrollDate);\n        }\n        else if (this.activeView.scrollToHour) {\n            this.activeView.scrollToHour(hour, scrollDate);\n        }\n    }\n    /**\n     * This method allows scroll to the position of the any resources that available on the scheduler.\n     * This method is applicable for without Agenda and Month agenda views of the schedule.\n     *\n     * @function scrollToResource\n     * @param {string | number} resourceId Accepts the resource id in either string or number type\n     * @param {string} groupName Accepts the name of the resource collection\n     * @returns {void}\n     */\n    scrollToResource(resourceId, groupName) {\n        if (this.resourceBase && this.resourceBase.lastResourceLevel) {\n            this.resourceBase.resourceScroll(resourceId, groupName);\n        }\n    }\n    /**\n     * Exports the Scheduler events to a calendar (.ics) file. By default, the calendar is exported with a file name `Calendar.ics`.\n     * To change this file name on export, pass the custom string value as `fileName` to get the file downloaded with this provided name.\n     *\n     * @function exportToICalendar\n     * @param {string} fileName Accepts the string value.\n     * @param {Object[]} customData Accepts the collection of objects.\n     * @returns {void}\n     */\n    exportToICalendar(fileName, customData) {\n        if (this.iCalendarExportModule) {\n            this.iCalendarExportModule.initializeCalendarExport(fileName, customData);\n        }\n        else {\n            throw Error('Inject ICalendarExport module');\n        }\n    }\n    /**\n     * Imports the events from an .ics file downloaded from any of the calendars like Google or Outlook into the Scheduler.\n     * This method accepts the blob object or string format of an .ics file to be imported as a mandatory argument.\n     *\n     * @function importICalendar\n     * @param {Blob | string} fileContent Accepts the file object or string format of an .ics file.\n     * @returns {void}\n     */\n    importICalendar(fileContent) {\n        if (this.iCalendarImportModule) {\n            this.iCalendarImportModule.initializeCalendarImport(fileContent);\n        }\n        else {\n            throw Error('Inject ICalendarImport module');\n        }\n    }\n    /**\n     * Adds the newly created event into the Schedule dataSource.\n     *\n     * @function addEvent\n     * @param {Object | Object[]} data Single or collection of event objects to be added into Schedule.\n     * @returns {void}\n     */\n    addEvent(data) {\n        this.crudModule.addEvent(data);\n    }\n    /**\n     * Allows the Scheduler events data to be exported as an Excel file either in .xlsx or .csv file formats.\n     * By default, the whole event collection bound to the Scheduler gets exported as an Excel file.\n     * To export only the specific events of Scheduler, you need to pass the custom data collection as\n     * a parameter to this `exportToExcel` method. This method accepts the export options as arguments such as fileName,\n     * exportType, fields, customData, and includeOccurrences. The `fileName` denotes the name to be given for the exported\n     * file and the `exportType` allows you to set the format of an Excel file to be exported either as .xlsx or .csv.\n     * The custom or specific field collection of event dataSource to be exported can be provided through `fields` option\n     * and the custom data collection can be exported by passing them through the `customData` option. There also exists\n     * option to export each individual instances of the recurring events to an Excel file, by setting true or false to the\n     * `includeOccurrences` option, denoting either to include or exclude the occurrences as separate instances on an exported Excel file.\n     *\n     * @function exportToExcel\n     * @param {ExportOptions} excelExportOptions The export options to be set before start with exporting the Scheduler events to an Excel file.\n     * @returns {void}\n     */\n    exportToExcel(excelExportOptions) {\n        if (this.excelExportModule) {\n            this.excelExportModule.initializeExcelExport(excelExportOptions || {});\n        }\n        else {\n            throw Error('Inject ExcelExport module');\n        }\n    }\n    /**\n     * Method allows to print the scheduler.\n     *\n     * @function print\n     * @param {ScheduleModel} printOptions The export options to be set before start with exporting\n     * the Scheduler events to the print window.\n     * @returns {void}\n     */\n    print(printOptions) {\n        if (this.printModule) {\n            this.printModule.print(printOptions);\n        }\n        else {\n            throw Error('Inject Print module');\n        }\n    }\n    /**\n     * Updates the changes made in the event object by passing it as an parameter into the dataSource.\n     *\n     * @function saveEvent\n     * @param {Object | Object[]} data Single or collection of event objects to be saved into Schedule.\n     * @param {CurrentAction} currentAction Denotes the action that takes place either for editing occurrence or series.\n     *  The valid current action names are `EditOccurrence` or `EditSeries`.\n     * @returns {void}\n     */\n    saveEvent(data, currentAction) {\n        this.crudModule.saveEvent(data, currentAction);\n    }\n    /**\n     * Deletes the events based on the provided ID or event collection in the argument list.\n     *\n     * @function deleteEvent\n     * @param {string | number | Object | Object[]} id Accepts the ID as string or number type or single or collection of the event object which needs to be removed from the Schedule.\n     * @param {CurrentAction} currentAction Denotes the delete action that takes place either on occurrence or series events.\n     *  The valid current action names are `Delete`, `DeleteOccurrence` or `DeleteSeries`.\n     * @returns {void}\n     */\n    deleteEvent(id, currentAction) {\n        this.crudModule.deleteEvent(id, currentAction);\n    }\n    /**\n     * Retrieves the entire collection of events bound to the Schedule.\n     *\n     * @function getEvents\n     * @param {Date} startDate Accepts the start date.\n     * @param {Date} endDate Accepts te end date.\n     * @param {boolean} includeOccurrences Accepts the boolean value to process the occurrence from recurrence series.\n     * @returns {Object[]} Returns the collection of event objects from the Schedule.\n     */\n    getEvents(startDate, endDate, includeOccurrences) {\n        let eventCollections = [];\n        if (includeOccurrences) {\n            eventCollections = this.eventBase.getProcessedEvents();\n        }\n        else {\n            eventCollections = this.eventsData;\n        }\n        if (startDate) {\n            startDate = this.getDateTime(startDate);\n        }\n        if (endDate) {\n            endDate = this.getDateTime(endDate);\n        }\n        eventCollections = this.eventBase.filterEventsByRange(eventCollections, startDate, endDate);\n        return eventCollections;\n    }\n    /**\n     * Retrieves the entire collection of block events bound to the Schedule.\n     *\n     * @function getBlockEvents\n     * @param {Date} startDate Accepts the start date.\n     * @param {Date} endDate Accepts te end date.\n     * @param {boolean} includeOccurrences Accepts the boolean value to process the occurrence from recurrence series.\n     * @returns {Object[]} Returns the collection of block event objects from the Schedule.\n     */\n    getBlockEvents(startDate, endDate, includeOccurrences) {\n        let eventCollections = [];\n        if (includeOccurrences) {\n            eventCollections = this.eventBase.getProcessedEvents(this.blockData);\n        }\n        else {\n            eventCollections = this.blockData;\n        }\n        if (startDate) {\n            startDate = this.getDateTime(startDate);\n        }\n        if (endDate) {\n            endDate = this.getDateTime(endDate);\n        }\n        eventCollections = this.eventBase.filterEventsByRange(eventCollections, startDate, endDate);\n        return eventCollections;\n    }\n    /**\n     * Retrieves the occurrences of a single recurrence event based on the provided parent ID.\n     *\n     * @function getOccurrencesByID\n     * @param {number} eventID ID of the parent recurrence data from which the occurrences are fetched.\n     * @returns {Object[]} Returns the collection of occurrence event objects.\n     */\n    getOccurrencesByID(eventID) {\n        return this.eventBase.getOccurrencesByID(eventID);\n    }\n    /**\n     * Retrieves all the occurrences that lies between the specific start and end time range.\n     *\n     * @function getOccurrencesByRange\n     * @param {Date} startTime Denotes the start time range.\n     * @param {Date} endTime Denotes the end time range.\n     * @returns {Object[]} Returns the collection of occurrence event objects that lies between the provided start and end time.\n     */\n    getOccurrencesByRange(startTime, endTime) {\n        startTime = this.getDateTime(startTime);\n        endTime = this.getDateTime(endTime);\n        return this.eventBase.getOccurrencesByRange(startTime, endTime);\n    }\n    /**\n     * Retrieves the dates that lies on active view of Schedule.\n     *\n     * @function getCurrentViewDates\n     * @returns {Date[]} Returns the collection of dates.\n     */\n    getCurrentViewDates() {\n        return this.activeView ? this.activeView.renderDates : [];\n    }\n    /**\n     * Set the recurrence editor instance from custom editor template.\n     *\n     * @function setRecurrenceEditor\n     * @param {RecurrenceEditor} recurrenceEditor instance has passed to fetch the instance in event window.\n     * @returns {void}\n     */\n    setRecurrenceEditor(recurrenceEditor) {\n        this.eventWindow.setRecurrenceEditor(recurrenceEditor);\n    }\n    /**\n     * Get the maximum id of an event.\n     *\n     * @function getEventMaxID\n     * @returns {number | string} Returns the maximum ID from scheduler data collections.\n     */\n    getEventMaxID() {\n        return this.eventBase.getEventMaxID();\n    }\n    /**\n     * Get deleted occurrences from given recurrence series.\n     *\n     * @function getDeletedOccurrences\n     * @param {string | number | Object} recurrenceData Accepts the parent ID of the event object or parent event object\n     * @returns {Object[]} Returns the collection of deleted occurrence events.\n     */\n    getDeletedOccurrences(recurrenceData) {\n        return this.eventBase.getDeletedOccurrences(recurrenceData);\n    }\n    /**\n     * Retrieves the events that lies on the current date range of the active view of Schedule.\n     *\n     * @function getCurrentViewEvents\n     * @returns {Object[]} Returns the collection of events.\n     */\n    getCurrentViewEvents() {\n        return this.eventsProcessed;\n    }\n    /**\n     * Refreshes the event dataSource. This method may be useful when the events alone in the schedule needs to be re-rendered.\n     *\n     * @function refreshEvents\n     * @param {boolean} isRemoteRefresh Accepts the boolean to refresh data from remote or local\n     * @returns {void}\n     */\n    refreshEvents(isRemoteRefresh = true) {\n        if (this.dragAndDropModule) {\n            this.dragAndDropModule.actionObj.action = '';\n            removeClass([this.element], EVENT_ACTION_CLASS);\n        }\n        if (isRemoteRefresh) {\n            this.crudModule.refreshDataManager();\n        }\n        else {\n            const eventsData = this.eventsData || [];\n            const blockData = this.blockData || [];\n            const data = eventsData.concat(blockData);\n            this.notify(dataReady, { processedData: this.eventBase ? this.eventBase.processData(data) : [] });\n        }\n    }\n    /**\n     * Method to refresh the given Schedule templates\n     *\n     * @param {string} templateName Accepts the template name\n     * @returns {void}\n     */\n    refreshTemplates(templateName) {\n        if (templateName) {\n            this.resetTemplates([templateName]);\n        }\n        else {\n            this.resetTemplates();\n        }\n        switch (templateName) {\n            case 'eventTemplate':\n                this.appointmentTemplateFn = this.templateParser(this.activeViewOptions.eventTemplate);\n                this.refreshEvents(false);\n                break;\n            case 'dateHeaderTemplate':\n                this.dateHeaderTemplateFn = this.templateParser(this.activeViewOptions.dateHeaderTemplate);\n                this.activeView.refreshHeader();\n                break;\n            case 'resourceHeaderTemplate':\n                this.resourceHeaderTemplateFn = this.templateParser(this.activeViewOptions.resourceHeaderTemplate);\n                if (this.activeView.isTimelineView()) {\n                    this.activeView.refreshResourceHeader();\n                }\n                else {\n                    this.activeView.refreshHeader();\n                }\n                break;\n            case 'quickInfoTemplates':\n                if (this.quickPopup) {\n                    this.quickPopup.destroy();\n                    this.quickPopup = null;\n                }\n                this.quickPopup = new QuickPopups(this);\n                this.quickInfoTemplatesHeaderFn = this.templateParser(this.quickInfoTemplates.header);\n                this.quickInfoTemplatesContentFn = this.templateParser(this.quickInfoTemplates.content);\n                this.quickInfoTemplatesFooterFn = this.templateParser(this.quickInfoTemplates.footer);\n                break;\n            case 'editorTemplate':\n                if (this.eventWindow) {\n                    this.eventWindow.destroy();\n                    this.eventWindow = null;\n                }\n                this.eventWindow = new EventWindow(this);\n                this.editorTemplateFn = this.templateParser(this.editorTemplate);\n                break;\n            case 'tooltipTemplate':\n            case 'headerTooltipTemplate':\n                if (this.eventTooltip) {\n                    this.eventTooltip.destroy();\n                    this.eventTooltip = null;\n                }\n                this.eventTooltip = new EventTooltip(this);\n                this.eventTooltipTemplateFn = this.templateParser(this.eventSettings.tooltipTemplate);\n                this.headerTooltipTemplateFn = this.templateParser(this.activeViewOptions.group.headerTooltipTemplate);\n                break;\n            default:\n                this.initializeView(this.currentView);\n                break;\n        }\n    }\n    /**\n     * Refreshes the Schedule layout without re-render.\n     *\n     * @function refreshLayout\n     * @returns {void}\n     */\n    refreshLayout() {\n        this.onScheduleResize();\n        if (this.headerModule) {\n            this.headerModule.refresh();\n        }\n        if (this.eventWindow) {\n            this.eventWindow.refresh();\n        }\n    }\n    /**\n     * To retrieve the appointment object from element.\n     *\n     * @function getEventDetails\n     * @param {Element} element Denotes the event UI element on the Schedule.\n     * @returns {Object} Returns the event details.\n     */\n    getEventDetails(element) {\n        element = getElement(element);\n        const guid = element.getAttribute('data-guid');\n        if (guid) {\n            return this.eventBase.getEventByGuid(guid);\n        }\n        return {};\n    }\n    /**\n     * To check whether the given time range slots are available for event creation or already occupied by other events.\n     *\n     * @function isSlotAvailable\n     * @param {Date | Object} startTime Denotes the start time of the slot.\n     * @param {Date} endTime Denotes the end time of the slot.\n     * @param {number} groupIndex Defines the resource index from last level.\n     * @returns {boolean} Returns true, if the slot that lies in the provided time range does not contain any other events.\n     */\n    isSlotAvailable(startTime, endTime, groupIndex) {\n        let eventStart;\n        let eventEnd;\n        let eventObj = this.activeEventData.event;\n        if (startTime instanceof Date || typeof (startTime) === 'string') {\n            eventStart = startTime;\n            eventEnd = endTime;\n        }\n        else {\n            eventObj = startTime;\n            eventStart = startTime[this.eventFields.startTime];\n            eventEnd = startTime[this.eventFields.endTime];\n            if (this.resourceBase) {\n                groupIndex = this.eventBase.getGroupIndexFromEvent(startTime);\n            }\n        }\n        if (isNullOrUndefined(eventStart) || isNullOrUndefined(eventEnd)) {\n            return true;\n        }\n        eventStart = this.getDateTime(eventStart);\n        eventEnd = this.getDateTime(eventEnd);\n        let eventCollection = this.eventBase.filterEvents(eventStart, eventEnd);\n        if (!isNullOrUndefined(groupIndex) && this.resourceBase && this.resourceBase.lastResourceLevel.length > 0) {\n            eventCollection = this.eventBase.filterEventsByResource(this.resourceBase.lastResourceLevel[groupIndex], eventCollection);\n        }\n        if (eventObj) {\n            if (eventObj.Guid) {\n                eventCollection = eventCollection.filter((event) => event.Guid !== eventObj.Guid);\n            }\n            else {\n                eventCollection = eventCollection.filter((event) => event[this.eventFields.id] !== eventObj[this.eventFields.id]);\n            }\n        }\n        return (eventCollection.length > 0) ? false : true;\n    }\n    /**\n     * To manually open the event editor on specific time or on certain events.\n     *\n     * @function openEditor\n     * @param {Object} data It can be either cell data or event data.\n     * @param {CurrentAction} action Defines the action for which the editor needs to be opened such as either for new event creation or\n     *  for editing of existing events. The applicable action names that can be used here are `Add`, `Save`, `EditOccurrence`\n     *  and `EditSeries`.\n     * @param {boolean} isEventData It allows to decide whether the editor needs to be opened with the clicked cell details or with the\n     *  passed event details.\n     * @param {number} repeatType It opens the editor with the recurrence options based on the provided repeat type.\n     * @returns {void}\n     */\n    openEditor(data, action, isEventData, repeatType) {\n        if (action === 'Add' && !isEventData) {\n            data.startTime = this.getDateTime(data.startTime);\n            data.endTime = this.getDateTime(data.endTime);\n            if (!isNullOrUndefined(data.element)) {\n                data.element = getElement(data.element);\n            }\n        }\n        else {\n            data[this.eventFields.startTime] = this.getDateTime(data[this.eventFields.startTime]);\n            data[this.eventFields.endTime] = this.getDateTime(data[this.eventFields.endTime]);\n        }\n        this.currentAction = action;\n        if (action !== 'Add') {\n            this.activeEventData.event = data;\n        }\n        this.eventWindow.openEditor(data, action, isEventData, repeatType);\n    }\n    /**\n     * To manually close the event editor window\n     *\n     * @function closeEditor\n     * @returns {void}\n     */\n    closeEditor() {\n        if (this.eventWindow) {\n            this.eventWindow.dialogClose();\n        }\n    }\n    /**\n     * To manually close the quick info popup\n     *\n     * @function closeQuickInfoPopup\n     * @returns {void}\n     */\n    closeQuickInfoPopup() {\n        if (this.quickPopup) {\n            this.quickPopup.quickPopupHide(true);\n        }\n    }\n    /**\n     * Select the resource based on group index in mobile mode.\n     *\n     * @param {number} groupIndex Defines the resource index based on last level.\n     * @returns {void}\n     */\n    selectResourceByIndex(groupIndex) {\n        if (this.resourceBase && this.uiStateValues.isGroupAdaptive) {\n            this.resourceBase.selectResourceByIndex(groupIndex);\n        }\n    }\n    /**\n     * Select the resources to the based on id.\n     *\n     * @param {string | number} id id of the resource defined in resources collection.\n     * @param {string} name Name of the resource defined in resources collection.\n     * @returns {number} Returns the group index\n     */\n    getIndexFromResourceId(id, name) {\n        if (this.resourceBase) {\n            return this.resourceBase.getIndexFromResourceId(id, name);\n        }\n        return null;\n    }\n    /**\n     * Adds the resources to the specified index.\n     *\n     * @param {Object | Object[]} resources Accepts the resource data in single or collection of data.\n     * @param {string} name Name of the resource defined in resources collection.\n     * @param {number} index Index or position where the resource should be added.\n     * @returns {void}\n     */\n    addResource(resources, name, index) {\n        this.resourceBase.addResource(resources, name, index);\n    }\n    /**\n     * Removes the specified resource.\n     *\n     * @param {string | string[] | number | number[]} resourceId Specifies the resource id to be removed.\n     * @param {string} name Specifies the resource name from which the id should be referred.\n     * @returns {void}\n     */\n    removeResource(resourceId, name) {\n        this.resourceBase.removeResource(resourceId, name);\n    }\n    /**\n     * Destroys the Schedule component.\n     *\n     * @function destroy\n     * @returns {void}\n     */\n    destroy() {\n        if (this.eventTooltip) {\n            this.eventTooltip.destroy();\n            this.eventTooltip = null;\n        }\n        this.destroyPopups();\n        this.unWireEvents();\n        this.destroyHeaderModule();\n        if (this.eventTooltip) {\n            this.eventTooltip.destroy();\n            this.eventTooltip = null;\n        }\n        if (this.eventBase) {\n            this.eventBase.destroy();\n            this.eventBase = null;\n        }\n        if (this.workCellAction) {\n            this.workCellAction.destroy();\n            this.workCellAction = null;\n        }\n        if (this.inlineModule) {\n            this.inlineModule.destroy();\n            this.inlineModule = null;\n        }\n        if (this.keyboardInteractionModule) {\n            this.keyboardInteractionModule.destroy();\n            this.keyboardInteractionModule = null;\n        }\n        if (this.scrollModule) {\n            this.scrollModule.destroy();\n            this.scrollModule = null;\n        }\n        if (this.printModule) {\n            this.printModule.destroy();\n        }\n        if (this.activeView) {\n            this.resetTemplates();\n            this.activeView.removeEventListener();\n            this.activeView.destroy();\n            this.activeView = null;\n        }\n        if (this.scheduleTouchModule) {\n            this.scheduleTouchModule.destroy();\n            this.scheduleTouchModule = null;\n        }\n        if (this.crudModule) {\n            this.crudModule.destroy();\n            this.crudModule = null;\n        }\n        if (this.dataModule) {\n            this.dataModule.destroy();\n            this.dataModule = null;\n        }\n        super.destroy();\n        const modules = [\n            'dayModule', 'weekModule', 'workWeekModule', 'monthModule', 'monthAgendaModule', 'yearModule', 'agendaModule',\n            'timelineViewsModule', 'timelineMonthModule', 'timelineYearModule', 'resizeModule', 'dragAndDropModule',\n            'excelExportModule', 'printModule', 'iCalendarExportModule', 'iCalendarImportModule', 'tzModule', 'eventsData',\n            'eventsProcessed', 'blockData', 'blockProcessed', 'uiStateValues', 'viewCollections', 'viewOptions', 'defaultLocale',\n            'localeObj', 'selectedElements', 'resourceCollection', 'editorTitles', 'eventFields', 'activeViewOptions',\n            'activeEventData', 'activeCellsData', 'renderModule'\n        ];\n        for (const module of modules) {\n            this[module] = null;\n        }\n        removeChildren(this.element);\n        let removeClasses = [ROOT, RTL, DEVICE_CLASS, MULTI_DRAG];\n        if (this.cssClass) {\n            removeClasses = removeClasses.concat(this.cssClass.split(' '));\n        }\n        removeClass([this.element], removeClasses);\n    }\n};\n__decorate([\n    Property('auto')\n], Schedule.prototype, \"width\", void 0);\n__decorate([\n    Property('auto')\n], Schedule.prototype, \"height\", void 0);\n__decorate([\n    Property(true)\n], Schedule.prototype, \"showHeaderBar\", void 0);\n__decorate([\n    Property(true)\n], Schedule.prototype, \"showTimeIndicator\", void 0);\n__decorate([\n    Property('Week')\n], Schedule.prototype, \"currentView\", void 0);\n__decorate([\n    Property(['Day', 'Week', 'WorkWeek', 'Month', 'Agenda'])\n], Schedule.prototype, \"views\", void 0);\n__decorate([\n    Property(new Date())\n], Schedule.prototype, \"selectedDate\", void 0);\n__decorate([\n    Property(new Date(1900, 0, 1))\n], Schedule.prototype, \"minDate\", void 0);\n__decorate([\n    Property(new Date(2099, 11, 31))\n], Schedule.prototype, \"maxDate\", void 0);\n__decorate([\n    Property()\n], Schedule.prototype, \"dateFormat\", void 0);\n__decorate([\n    Property('Gregorian')\n], Schedule.prototype, \"calendarMode\", void 0);\n__decorate([\n    Property(true)\n], Schedule.prototype, \"showWeekend\", void 0);\n__decorate([\n    Property(0)\n], Schedule.prototype, \"firstDayOfWeek\", void 0);\n__decorate([\n    Property('FirstDay')\n], Schedule.prototype, \"weekRule\", void 0);\n__decorate([\n    Property([1, 2, 3, 4, 5])\n], Schedule.prototype, \"workDays\", void 0);\n__decorate([\n    Property(12)\n], Schedule.prototype, \"monthsCount\", void 0);\n__decorate([\n    Property('00:00')\n], Schedule.prototype, \"startHour\", void 0);\n__decorate([\n    Property('24:00')\n], Schedule.prototype, \"endHour\", void 0);\n__decorate([\n    Property(null)\n], Schedule.prototype, \"timeFormat\", void 0);\n__decorate([\n    Property(false)\n], Schedule.prototype, \"enableAllDayScroll\", void 0);\n__decorate([\n    Property(false)\n], Schedule.prototype, \"enableAdaptiveUI\", void 0);\n__decorate([\n    Property(true)\n], Schedule.prototype, \"allowResizing\", void 0);\n__decorate([\n    Complex({}, WorkHours)\n], Schedule.prototype, \"workHours\", void 0);\n__decorate([\n    Complex({}, TimeScale)\n], Schedule.prototype, \"timeScale\", void 0);\n__decorate([\n    Property(true)\n], Schedule.prototype, \"allowKeyboardInteraction\", void 0);\n__decorate([\n    Property(true)\n], Schedule.prototype, \"allowDragAndDrop\", void 0);\n__decorate([\n    Property()\n], Schedule.prototype, \"dateHeaderTemplate\", void 0);\n__decorate([\n    Property()\n], Schedule.prototype, \"cellHeaderTemplate\", void 0);\n__decorate([\n    Property()\n], Schedule.prototype, \"dayHeaderTemplate\", void 0);\n__decorate([\n    Property()\n], Schedule.prototype, \"monthHeaderTemplate\", void 0);\n__decorate([\n    Property()\n], Schedule.prototype, \"cellTemplate\", void 0);\n__decorate([\n    Property(false)\n], Schedule.prototype, \"readonly\", void 0);\n__decorate([\n    Property(true)\n], Schedule.prototype, \"showQuickInfo\", void 0);\n__decorate([\n    Property(false)\n], Schedule.prototype, \"allowInline\", void 0);\n__decorate([\n    Property(true)\n], Schedule.prototype, \"allowMultiCellSelection\", void 0);\n__decorate([\n    Property(true)\n], Schedule.prototype, \"allowMultiRowSelection\", void 0);\n__decorate([\n    Property(false)\n], Schedule.prototype, \"quickInfoOnSelectionEnd\", void 0);\n__decorate([\n    Property(false)\n], Schedule.prototype, \"showWeekNumber\", void 0);\n__decorate([\n    Property(false)\n], Schedule.prototype, \"rowAutoHeight\", void 0);\n__decorate([\n    Property(false)\n], Schedule.prototype, \"allowMultiDrag\", void 0);\n__decorate([\n    Property(0)\n], Schedule.prototype, \"firstMonthOfYear\", void 0);\n__decorate([\n    Property()\n], Schedule.prototype, \"editorTemplate\", void 0);\n__decorate([\n    Complex({}, QuickInfoTemplates)\n], Schedule.prototype, \"quickInfoTemplates\", void 0);\n__decorate([\n    Property(7)\n], Schedule.prototype, \"agendaDaysCount\", void 0);\n__decorate([\n    Property(true)\n], Schedule.prototype, \"hideEmptyAgendaDays\", void 0);\n__decorate([\n    Property(true)\n], Schedule.prototype, \"enableRecurrenceValidation\", void 0);\n__decorate([\n    Property()\n], Schedule.prototype, \"timezone\", void 0);\n__decorate([\n    Complex({}, EventSettings)\n], Schedule.prototype, \"eventSettings\", void 0);\n__decorate([\n    Property(timezoneData)\n], Schedule.prototype, \"timezoneDataSource\", void 0);\n__decorate([\n    Property()\n], Schedule.prototype, \"resourceHeaderTemplate\", void 0);\n__decorate([\n    Property()\n], Schedule.prototype, \"headerIndentTemplate\", void 0);\n__decorate([\n    Complex({}, Group)\n], Schedule.prototype, \"group\", void 0);\n__decorate([\n    Collection([], Resources)\n], Schedule.prototype, \"resources\", void 0);\n__decorate([\n    Collection([], HeaderRows)\n], Schedule.prototype, \"headerRows\", void 0);\n__decorate([\n    Property()\n], Schedule.prototype, \"cssClass\", void 0);\n__decorate([\n    Property()\n], Schedule.prototype, \"eventDragArea\", void 0);\n__decorate([\n    Event()\n], Schedule.prototype, \"created\", void 0);\n__decorate([\n    Event()\n], Schedule.prototype, \"destroyed\", void 0);\n__decorate([\n    Event()\n], Schedule.prototype, \"cellClick\", void 0);\n__decorate([\n    Event()\n], Schedule.prototype, \"cellDoubleClick\", void 0);\n__decorate([\n    Event()\n], Schedule.prototype, \"moreEventsClick\", void 0);\n__decorate([\n    Event()\n], Schedule.prototype, \"hover\", void 0);\n__decorate([\n    Event()\n], Schedule.prototype, \"select\", void 0);\n__decorate([\n    Event()\n], Schedule.prototype, \"actionBegin\", void 0);\n__decorate([\n    Event()\n], Schedule.prototype, \"actionComplete\", void 0);\n__decorate([\n    Event()\n], Schedule.prototype, \"actionFailure\", void 0);\n__decorate([\n    Event()\n], Schedule.prototype, \"navigating\", void 0);\n__decorate([\n    Event()\n], Schedule.prototype, \"renderCell\", void 0);\n__decorate([\n    Event()\n], Schedule.prototype, \"eventClick\", void 0);\n__decorate([\n    Event()\n], Schedule.prototype, \"eventRendered\", void 0);\n__decorate([\n    Event()\n], Schedule.prototype, \"dataBinding\", void 0);\n__decorate([\n    Event()\n], Schedule.prototype, \"popupOpen\", void 0);\n__decorate([\n    Event()\n], Schedule.prototype, \"popupClose\", void 0);\n__decorate([\n    Event()\n], Schedule.prototype, \"dragStart\", void 0);\n__decorate([\n    Event()\n], Schedule.prototype, \"drag\", void 0);\n__decorate([\n    Event()\n], Schedule.prototype, \"dragStop\", void 0);\n__decorate([\n    Event()\n], Schedule.prototype, \"resizeStart\", void 0);\n__decorate([\n    Event()\n], Schedule.prototype, \"resizing\", void 0);\n__decorate([\n    Event()\n], Schedule.prototype, \"resizeStop\", void 0);\n__decorate([\n    Event()\n], Schedule.prototype, \"dataBound\", void 0);\nSchedule = __decorate([\n    NotifyPropertyChanges\n], Schedule);\n\n/* eslint-disable @typescript-eslint/no-explicit-any */\n/**\n * Base class for the common drag and resize related actions\n */\nclass ActionBase {\n    constructor(parent) {\n        this.daysVariation = 0;\n        this.parent = parent;\n        this.actionObj = {\n            X: 0, Y: 0, groupIndex: 0, cellWidth: 0, cellHeight: 0, slotInterval: 0, interval: 0, actionIndex: 0,\n            cloneElement: [], originalElement: [], action: null, isAllDay: null, excludeSelectors: null,\n            index: 0, navigationInterval: null, scrollInterval: null\n        };\n        this.scrollArgs = { element: null, width: 0, height: 0 };\n        this.resizeEdges = { left: false, right: false, top: false, bottom: false };\n        this.scrollEdges = { left: false, right: false, top: false, bottom: false };\n    }\n    getChangedData(multiData) {\n        const eventObj = extend({}, this.actionObj.event, null, true);\n        eventObj[this.parent.eventFields.startTime] = this.actionObj.start;\n        eventObj[this.parent.eventFields.endTime] = this.actionObj.end;\n        if (!isNullOrUndefined(this.actionObj.isAllDay)) {\n            eventObj[this.parent.eventFields.isAllDay] = this.actionObj.isAllDay;\n        }\n        if (this.parent.activeViewOptions.group.resources.length > 0) {\n            const originalElement = this.getOriginalElement(this.actionObj.element);\n            if (originalElement) {\n                let indexCol = originalElement.map((element) => parseInt(element.getAttribute('data-group-index'), 10));\n                if (indexCol.indexOf(this.actionObj.groupIndex) === -1 || (!isNullOrUndefined(multiData) && multiData.length > 0)) {\n                    const cloneIndex = parseInt(this.actionObj.clone.getAttribute('data-group-index'), 10);\n                    indexCol = indexCol.filter((index) => index !== cloneIndex);\n                    indexCol.push(this.actionObj.groupIndex);\n                    if (multiData && multiData.length > 0) {\n                        multiData.forEach((data) => {\n                            this.parent.resourceBase.getResourceData(data, this.actionObj.groupIndex, indexCol);\n                        });\n                    }\n                    else {\n                        this.parent.resourceBase.getResourceData(eventObj, this.actionObj.groupIndex, indexCol);\n                    }\n                }\n            }\n        }\n        return eventObj;\n    }\n    saveChangedData(eventArgs, isMultiSelect = false) {\n        this.parent.activeEventData.event = this.actionObj.event;\n        this.parent.currentAction = 'Save';\n        let currentAction;\n        let eventsCollection = [eventArgs.data];\n        if (isMultiSelect) {\n            eventsCollection = eventArgs.selectedData;\n        }\n        for (const eventObj of eventsCollection) {\n            const isSameResource = (this.parent.activeViewOptions.group.resources.length > 0) ?\n                parseInt(this.actionObj.element.getAttribute('data-group-index'), 10) === this.actionObj.groupIndex : true;\n            if (+eventObj[this.parent.eventFields.startTime] === +this.actionObj.event[this.parent.eventFields.startTime] &&\n                +eventObj[this.parent.eventFields.endTime] === +this.actionObj.event[this.parent.eventFields.endTime] && isSameResource) {\n                return;\n            }\n            if (eventObj[this.parent.eventFields.recurrenceRule]) {\n                const eveId = (eventObj[this.parent.eventFields.recurrenceID] || eventObj[this.parent.eventFields.id]);\n                if (eventObj[this.parent.eventFields.id] === eventObj[this.parent.eventFields.recurrenceID]) {\n                    eventObj[this.parent.eventFields.id] = this.parent.eventBase.getEventMaxID();\n                    currentAction = 'EditOccurrence';\n                }\n                if (this.parent.enableRecurrenceValidation\n                    && this.parent.eventWindow.editOccurrenceValidation(eveId, eventObj, this.actionObj.event)) {\n                    return;\n                }\n            }\n            else {\n                currentAction = null;\n            }\n            if (eventObj[this.parent.eventFields.startTimezone] || eventObj[this.parent.eventFields.endTimezone]) {\n                this.parent.eventBase.timezoneConvert(eventObj);\n            }\n            this.parent.crudModule.saveEvent(eventObj, currentAction);\n        }\n    }\n    calculateIntervalTime(date) {\n        const intervalTime = new Date(+date);\n        intervalTime.setMinutes(Math.floor(intervalTime.getMinutes() / this.actionObj.interval) * this.actionObj.interval);\n        return intervalTime;\n    }\n    getContentAreaDimension() {\n        const viewElement = this.parent.element.querySelector('.' + CONTENT_WRAP_CLASS);\n        let trElement = [].slice.call(viewElement.querySelector('tr').children);\n        if (!this.parent.activeView.isTimelineView() && this.parent.activeViewOptions.group.resources.length > 0 &&\n            !this.parent.isAdaptive && !this.parent.enableAdaptiveUI) {\n            trElement = this.getResourceElements(trElement);\n        }\n        const leftOffset = trElement[0].getBoundingClientRect();\n        const rightOffset = trElement.slice(-1)[0].getBoundingClientRect();\n        const viewDimension = {\n            bottom: viewElement.scrollHeight - 5,\n            left: this.parent.enableRtl ? rightOffset.left : leftOffset.left,\n            right: this.parent.enableRtl ? leftOffset.right : rightOffset.right,\n            top: 0,\n            leftOffset: this.parent.enableRtl ? rightOffset.right : leftOffset.right,\n            rightOffset: this.parent.enableRtl ? leftOffset.left : rightOffset.left\n        };\n        return viewDimension;\n    }\n    getPageCoordinates(e) {\n        const eventArgs = e.event;\n        return eventArgs && eventArgs.changedTouches ? eventArgs.changedTouches[0] : e.changedTouches ? e.changedTouches[0] :\n            eventArgs || e;\n    }\n    getIndex(index) {\n        const contentElements = [].slice.call(this.parent.getContentTable().querySelector('tr').children);\n        const indexes = { minIndex: 0, maxIndex: contentElements.length - 1 };\n        if (this.actionObj.action === 'resize' && this.parent.activeViewOptions.group.resources.length > 0 &&\n            !this.parent.uiStateValues.isGroupAdaptive && !this.parent.activeView.isTimelineView()) {\n            const groupElements = this.getResourceElements(contentElements);\n            indexes.minIndex = groupElements[0].cellIndex;\n            indexes.maxIndex = groupElements.slice(-1)[0].cellIndex;\n        }\n        if (index < indexes.minIndex) {\n            index = indexes.minIndex;\n        }\n        if (index > indexes.maxIndex) {\n            index = indexes.maxIndex;\n        }\n        return index;\n    }\n    updateTimePosition(date, multiData) {\n        let index = 0;\n        for (const cloneElement of this.actionObj.cloneElement) {\n            const timeElement = cloneElement.querySelector('.' + APPOINTMENT_TIME);\n            if (timeElement) {\n                let startTime = this.actionObj.start;\n                let endTime = this.actionObj.end;\n                if (multiData && multiData.length > 0) {\n                    startTime = multiData[index][this.parent.eventFields.startTime];\n                    endTime = multiData[index][this.parent.eventFields.endTime];\n                }\n                timeElement.innerHTML = this.parent.getTimeString(startTime) + ' - ' +\n                    this.parent.getTimeString(endTime);\n            }\n            index++;\n        }\n        if (!this.parent.activeViewOptions.timeScale.enable || !this.parent.isAdaptive || this.parent.currentView === 'Month' ||\n            this.parent.currentView === 'TimelineMonth') {\n            return;\n        }\n        let timeIndicator = this.parent.element.querySelector('.' + CLONE_TIME_INDICATOR_CLASS);\n        if (!timeIndicator) {\n            timeIndicator = createElement('div', { className: CLONE_TIME_INDICATOR_CLASS });\n            const wrapperClass = this.parent.activeView.isTimelineView() ? DATE_HEADER_WRAP_CLASS : TIME_CELLS_WRAP_CLASS;\n            this.parent.element.querySelector('.' + wrapperClass).appendChild(timeIndicator);\n        }\n        timeIndicator.innerHTML = this.parent.getTimeString(date);\n        let offsetValue = 0;\n        if (this.parent.activeView.isTimelineView()) {\n            if (this.parent.enableRtl) {\n                const rightValue = parseInt(this.actionObj.clone.style.right, 10);\n                offsetValue = this.actionObj.action === 'drag' || this.resizeEdges.left ?\n                    rightValue + this.actionObj.clone.offsetWidth : rightValue;\n                timeIndicator.style.right = formatUnit(offsetValue);\n            }\n            else {\n                const leftValue = parseInt(this.actionObj.clone.style.left, 10);\n                offsetValue = this.actionObj.action === 'drag' || this.resizeEdges.left ?\n                    leftValue : leftValue + this.actionObj.clone.offsetWidth;\n                timeIndicator.style.left = formatUnit(offsetValue);\n            }\n        }\n        else {\n            offsetValue = this.actionObj.action === 'drag' || this.resizeEdges.top ? this.actionObj.clone.offsetTop :\n                this.actionObj.clone.offsetTop + this.actionObj.clone.offsetHeight;\n            timeIndicator.style.top = formatUnit(offsetValue);\n        }\n    }\n    getResourceElements(table) {\n        return table.filter((element) => parseInt(element.getAttribute('data-group-index'), 10) === this.actionObj.groupIndex);\n    }\n    getOriginalElement(element) {\n        let originalElement;\n        const guid = element.getAttribute('data-guid');\n        const isMorePopup = element.offsetParent && element.offsetParent.classList.contains(MORE_EVENT_POPUP_CLASS);\n        if (isMorePopup || this.parent.activeView.isTimelineView()) {\n            originalElement = [].slice.call(this.parent.element.querySelectorAll('[data-guid=\"' + guid + '\"]'));\n        }\n        else {\n            const tr = closest(element, 'tr');\n            if (tr) {\n                originalElement = [].slice.call(tr.querySelectorAll('[data-guid=\"' + guid + '\"]'));\n            }\n        }\n        return originalElement;\n    }\n    createCloneElement(element) {\n        const cloneWrapper = createElement('div', { innerHTML: element.outerHTML });\n        const cloneElement = cloneWrapper.children[0];\n        const cloneClassLists = [CLONE_ELEMENT_CLASS];\n        cloneClassLists.push((this.actionObj.action === 'drag') ? DRAG_CLONE_CLASS : RESIZE_CLONE_CLASS);\n        if (this.parent.currentView === 'Month' || this.parent.currentView === 'TimelineMonth') {\n            cloneClassLists.push(MONTH_CLONE_ELEMENT_CLASS);\n        }\n        addClass([cloneElement], cloneClassLists);\n        addClass([element], EVENT_ACTION_CLASS);\n        if (!isNullOrUndefined(element.parentElement)) {\n            element.parentElement.appendChild(cloneElement);\n        }\n        cloneElement.style.width = formatUnit(cloneElement.offsetWidth - 2);\n        const dragElement = document.querySelector(this.parent.eventDragArea);\n        if (this.parent.eventDragArea && this.actionObj.action === 'drag' && dragElement) {\n            dragElement.appendChild(cloneElement);\n        }\n        setStyleAttribute(cloneElement, { border: '0px' });\n        return cloneElement;\n    }\n    removeCloneElementClasses() {\n        let elements = this.actionObj.originalElement;\n        if (this.parent.currentView === 'Month' || this.parent.currentView === 'TimelineYear' ||\n            this.parent.currentView === 'Day' || this.parent.currentView === 'Week' || this.parent.currentView === 'WorkWeek') {\n            elements = [].slice.call(this.parent.element.querySelectorAll('.' + EVENT_ACTION_CLASS));\n        }\n        removeClass(elements, EVENT_ACTION_CLASS);\n    }\n    removeCloneElement() {\n        this.actionObj.originalElement = [];\n        const dynamicEle = [].slice.call(this.parent.element.querySelectorAll('.e-dynamic-clone'));\n        for (const cloneEle of dynamicEle) {\n            remove(cloneEle);\n        }\n        for (const cloneElement of this.actionObj.cloneElement) {\n            if (!isNullOrUndefined(cloneElement.parentNode)) {\n                remove(cloneElement);\n            }\n        }\n        this.actionObj.cloneElement = [];\n        const timeIndicator = this.parent.element.querySelector('.' + CLONE_TIME_INDICATOR_CLASS);\n        if (timeIndicator) {\n            remove(timeIndicator);\n        }\n    }\n    getCursorElement(e) {\n        const pages = this.getPageCoordinates(e);\n        return document.elementFromPoint(pages.clientX, pages.clientY);\n    }\n    autoScroll() {\n        const parent = this.parent.element.querySelector('.' + CONTENT_WRAP_CLASS);\n        const yIsScrollable = parent.offsetHeight <= parent.scrollHeight;\n        const xIsScrollable = parent.offsetWidth <= parent.scrollWidth;\n        const yInBounds = yIsScrollable && parent.scrollTop >= 0 && parent.scrollTop + parent.offsetHeight <= parent.scrollHeight;\n        let xInBounds = xIsScrollable && parent.scrollLeft >= 0 && parent.scrollLeft + parent.offsetWidth <= parent.scrollWidth;\n        if (this.actionObj.action === 'resize' && this.scrollEdges.right && (parent.scrollLeft + parent.offsetWidth) > parent.scrollWidth) {\n            const tdCollections = ([].slice.call(this.parent.getContentTable().querySelector('tr').children)).length - 1;\n            const cellIndex = Math.ceil((this.actionObj.clone.offsetLeft + (this.actionObj.clone.offsetWidth)) /\n                this.actionObj.cellWidth);\n            xInBounds = cellIndex === tdCollections;\n        }\n        if (yInBounds && (this.scrollEdges.top || this.scrollEdges.bottom)) {\n            parent.scrollTop += this.scrollEdges.top ? -this.actionObj.scroll.scrollBy : this.actionObj.scroll.scrollBy;\n            if (this.actionObj.action === 'resize') {\n                if (parent.scrollHeight !== parent.offsetHeight + parent.scrollTop && parent.scrollTop > 0) {\n                    this.actionObj.Y += this.scrollEdges.top ? this.actionObj.scroll.scrollBy : -this.actionObj.scroll.scrollBy;\n                }\n            }\n        }\n        if (xInBounds && (this.scrollEdges.left || this.scrollEdges.right)) {\n            parent.scrollLeft += this.scrollEdges.left ? -this.actionObj.scroll.scrollBy : this.actionObj.scroll.scrollBy;\n            if (this.actionObj.action === 'resize') {\n                if (parent.scrollWidth !== parent.offsetWidth + parent.scrollLeft && parent.scrollLeft > 0) {\n                    this.actionObj.X += this.scrollEdges.left ? this.actionObj.scroll.scrollBy : -this.actionObj.scroll.scrollBy;\n                }\n            }\n        }\n    }\n    autoScrollValidation() {\n        if (!this.actionObj.scroll.enable) {\n            return false;\n        }\n        const res = this.parent.boundaryValidation(this.actionObj.pageY, this.actionObj.pageX);\n        this.scrollEdges = res;\n        return res.bottom || res.top || res.left || res.right;\n    }\n    actionClass(type) {\n        if (type === 'addClass') {\n            addClass([this.parent.element], EVENT_ACTION_CLASS);\n        }\n        else {\n            removeClass([this.parent.element], EVENT_ACTION_CLASS);\n        }\n    }\n    updateScrollPosition(e) {\n        if (this.actionObj.scroll.enable && isNullOrUndefined(this.actionObj.scrollInterval)) {\n            this.actionObj.scrollInterval = window.setInterval(() => {\n                if (this.autoScrollValidation() && !this.actionObj.clone.classList.contains(ALLDAY_APPOINTMENT_CLASS)) {\n                    if (this.parent.activeView.isTimelineView() && this.parent.activeViewOptions.group.resources.length > 0\n                        && this.actionObj.groupIndex < 0) {\n                        return;\n                    }\n                    this.autoScroll();\n                    if (this.actionObj.action === 'drag') {\n                        this.parent.dragAndDropModule.updateDraggingDateTime(e);\n                    }\n                    else {\n                        this.parent.resizeModule.updateResizingDirection(e);\n                    }\n                }\n            }, this.actionObj.scroll.timeDelay);\n        }\n    }\n    updateOriginalElement(cloneElement) {\n        let query = '[data-id=\"' + cloneElement.getAttribute('data-id') + '\"]';\n        if (this.parent.activeViewOptions.group.resources.length > 0) {\n            query = query.concat('[data-group-index = \"' + cloneElement.getAttribute('data-group-index') + '\"]');\n        }\n        const elements = [].slice.call(this.parent.element.querySelectorAll(query));\n        addClass(elements, EVENT_ACTION_CLASS);\n        const eventWrappers = [].slice.call(this.parent.element.querySelectorAll('.' + CLONE_ELEMENT_CLASS));\n        removeClass(eventWrappers, EVENT_ACTION_CLASS);\n    }\n    getUpdatedEvent(startTime, endTime, eventObj) {\n        const event = JSON.parse(JSON.stringify(eventObj));\n        event[this.parent.eventFields.startTime] = startTime;\n        event[this.parent.eventFields.endTime] = endTime;\n        return event;\n    }\n    dynamicYearlyEventsRendering(event, isResize = false) {\n        let appWidth = this.actionObj.cellWidth - 7;\n        if (isResize && (this.resizeEdges.left || this.resizeEdges.right)) {\n            appWidth = this.actionObj.cellWidth * event.count;\n        }\n        if (!isResize && (this.parent.activeViewOptions.orientation === 'Horizontal' && this.parent.activeViewOptions.group.resources.length === 0)) {\n            const eventObj = this.yearEvent.isSpannedEvent(event, event[this.parent.eventFields.startTime]);\n            if (eventObj[this.parent.eventFields.startTime].getTime() ===\n                eventObj[this.parent.eventFields.endTime].getTime()) {\n                eventObj.isSpanned.count = 1;\n            }\n            appWidth = eventObj.isSpanned.count * this.actionObj.cellWidth;\n        }\n        const appointmentElement = this.createAppointmentElement(this.actionObj.groupIndex, event[this.parent.eventFields.subject]);\n        appointmentElement.setAttribute('drag', 'true');\n        addClass([appointmentElement], CLONE_ELEMENT_CLASS);\n        setStyleAttribute(appointmentElement, {\n            'width': appWidth + 'px', 'border': '0px', 'pointer-events': 'none',\n            'position': 'absolute', 'overflow': 'hidden', 'padding': '3px'\n        });\n        if (this.actionObj.clone.style.backgroundColor !== '') {\n            setStyleAttribute(appointmentElement, { 'backgroundColor': this.actionObj.clone.style.backgroundColor });\n        }\n        const date = resetTime(event[this.parent.eventFields.startTime]).getTime();\n        let query = '.' + WORK_CELLS_CLASS + '[data-date=\"' + date + '\"]';\n        if (this.parent.activeViewOptions.group.resources.length > 0 && !this.parent.uiStateValues.isGroupAdaptive) {\n            query = '.' + WORK_CELLS_CLASS + '[data-date=\"' + date + '\"][data-group-index=\"' + this.actionObj.groupIndex + '\"]';\n        }\n        const cellTd = this.parent.element.querySelector(query);\n        if (isNullOrUndefined(cellTd)) {\n            return;\n        }\n        if (isResize) {\n            const dateHeader = cellTd.querySelector('.' + DATE_HEADER_CLASS);\n            let appHeight = this.actionObj.cellHeight * event.count -\n                (dateHeader ? dateHeader.offsetHeight : 0) - 7;\n            if (this.resizeEdges.right || this.resizeEdges.left) {\n                appHeight = parseInt(this.actionObj.clone.style.height, 10);\n            }\n            setStyleAttribute(appointmentElement, { 'height': appHeight + 'px' });\n        }\n        this.renderDynamicElement(cellTd, appointmentElement, true);\n        this.actionObj.cloneElement.push(appointmentElement);\n    }\n    // eslint-disable-next-line @typescript-eslint/no-unused-vars\n    renderDynamicElement(cellTd, element, isAppointment = false) {\n        if (cellTd.querySelector('.' + APPOINTMENT_WRAPPER_CLASS)) {\n            cellTd.querySelector('.' + APPOINTMENT_WRAPPER_CLASS).appendChild(element);\n        }\n        else {\n            const wrapper = createElement('div', { className: APPOINTMENT_WRAPPER_CLASS });\n            wrapper.appendChild(element);\n            cellTd.appendChild(wrapper);\n        }\n    }\n    createAppointmentElement(resIndex, innerText) {\n        const appointmentWrapper = createElement('div', {\n            className: APPOINTMENT_CLASS,\n            innerHTML: innerText\n        });\n        if (this.parent.activeViewOptions.group.resources.length > 0) {\n            appointmentWrapper.setAttribute('data-group-index', resIndex.toString());\n        }\n        return appointmentWrapper;\n    }\n    dynamicEventsRendering(event) {\n        let dateRender = this.parent.activeView.renderDates;\n        let workCells = [].slice.call(this.parent.element.querySelectorAll('.' + WORK_CELLS_CLASS));\n        let workDays = this.parent.activeViewOptions.workDays;\n        let groupOrder;\n        if (this.parent.activeViewOptions.group.resources.length > 0) {\n            const resources = this.parent.resourceBase.lastResourceLevel.\n                filter((res) => res.groupIndex === this.actionObj.groupIndex);\n            dateRender = resources[0].renderDates;\n            const elementSelector = `.${WORK_CELLS_CLASS}[data-group-index=\"${this.actionObj.groupIndex}\"]`;\n            workCells = [].slice.call(this.parent.element.querySelectorAll(elementSelector));\n            workDays = resources[0].workDays;\n            groupOrder = resources[0].groupOrder;\n        }\n        this.monthEvent.dateRender = dateRender;\n        this.monthEvent.getSlotDates(workDays);\n        if (this.resizeEdges.left || this.resizeEdges.right) {\n            const eventWrappers = [].slice.call(this.parent.element.querySelectorAll('.' + CLONE_ELEMENT_CLASS));\n            for (const wrapper of eventWrappers) {\n                remove(wrapper);\n            }\n        }\n        const spannedEvents = this.monthEvent.splitEvent(event, dateRender);\n        for (const event of spannedEvents) {\n            const day = this.parent.getIndexOfDate(dateRender, resetTime(event[this.monthEvent.fields.startTime]));\n            const diffInDays = event.data.count;\n            const appWidth = (diffInDays * this.actionObj.cellWidth) - 7;\n            const appointmentElement = this.monthEvent.createAppointmentElement(event, this.actionObj.groupIndex, true);\n            appointmentElement.setAttribute('drag', 'true');\n            addClass([appointmentElement], CLONE_ELEMENT_CLASS);\n            this.monthEvent.applyResourceColor(appointmentElement, event, 'backgroundColor', groupOrder);\n            setStyleAttribute(appointmentElement, { 'width': appWidth + 'px', 'border': '0px', 'pointer-events': 'none' });\n            const cellTd = workCells[day];\n            if (cellTd && isNullOrUndefined(this.parent.eventDragArea)) {\n                this.monthEvent.renderElement(cellTd, appointmentElement, true);\n                this.actionObj.cloneElement.push(appointmentElement);\n            }\n        }\n    }\n    destroy() {\n        if (!this.parent || this.parent && this.parent.isDestroyed) {\n            return;\n        }\n        this.actionObj = {};\n        this.scrollArgs = {};\n        this.resizeEdges = { left: false, right: false, top: false, bottom: false };\n        this.scrollEdges = { left: false, right: false, top: false, bottom: false };\n    }\n}\n\n/* eslint-disable @typescript-eslint/no-explicit-any */\n/**\n * Schedule events resize actions\n */\nclass Resize extends ActionBase {\n    wireResizeEvent(element) {\n        const resizeElement = [].slice.call(element.querySelectorAll('.' + EVENT_RESIZE_CLASS));\n        for (const element of resizeElement) {\n            EventHandler.add(element, Browser.touchStartEvent, this.resizeStart, this);\n        }\n    }\n    resizeHelper() {\n        if (this.parent.activeViewOptions.group.resources.length > 0 && this.parent.activeViewOptions.group.allowGroupEdit) {\n            for (let i = 0, len = this.actionObj.originalElement.length; i < len; i++) {\n                const cloneElement = this.createCloneElement(this.actionObj.originalElement[i]);\n                this.actionObj.cloneElement[i] = cloneElement;\n                if (this.actionObj.element === this.actionObj.originalElement[i]) {\n                    this.actionObj.clone = cloneElement;\n                }\n            }\n        }\n        else {\n            if (this.actionObj.element) {\n                this.actionObj.clone = this.createCloneElement(this.actionObj.element);\n            }\n            this.actionObj.cloneElement = [this.actionObj.clone];\n            this.actionObj.originalElement = [this.actionObj.element];\n        }\n    }\n    resizeStart(e) {\n        this.actionObj.action = 'resize';\n        this.actionObj.slotInterval = this.parent.activeViewOptions.timeScale.interval / this.parent.activeViewOptions.timeScale.slotCount;\n        this.actionObj.interval = this.actionObj.slotInterval;\n        const resizeTarget = closest(e.target, '.' + EVENT_RESIZE_CLASS);\n        this.actionObj.element = closest(resizeTarget, '.' + APPOINTMENT_CLASS);\n        this.actionObj.event = this.parent.eventBase.getEventByGuid(this.actionObj.element.getAttribute('data-guid'));\n        const eventObj = extend({}, this.actionObj.event, null, true);\n        const resizeArgs = {\n            cancel: false,\n            data: eventObj,\n            element: this.actionObj.element,\n            event: e,\n            interval: this.actionObj.interval,\n            scroll: { enable: true, scrollBy: 30, timeDelay: 100 }\n        };\n        this.parent.trigger(resizeStart, resizeArgs, (resizeEventArgs) => {\n            if (resizeEventArgs.cancel) {\n                return;\n            }\n            this.actionClass('addClass');\n            this.parent.uiStateValues.action = true;\n            this.resizeEdges = {\n                left: resizeTarget.classList.contains(LEFT_RESIZE_HANDLER),\n                right: resizeTarget.classList.contains(RIGHT_RESIZE_HANDLER),\n                top: resizeTarget.classList.contains(TOP_RESIZE_HANDLER),\n                bottom: resizeTarget.classList.contains(BOTTOM_RESIZE_HANDLER)\n            };\n            this.actionObj.groupIndex = this.parent.uiStateValues.isGroupAdaptive ? this.parent.uiStateValues.groupIndex : 0;\n            const workCell = this.parent.element.querySelector('.' + WORK_CELLS_CLASS);\n            this.actionObj.cellWidth = workCell.offsetWidth;\n            this.actionObj.cellHeight = workCell.offsetHeight;\n            const hRows = this.parent.activeViewOptions.headerRows.map((row) => row.option);\n            if (this.parent.activeView.isTimelineView() && hRows.length > 0 && ['Date', 'Hour'].indexOf(hRows.slice(-1)[0]) < 0) {\n                const tr = this.parent.getContentTable().querySelector('tr');\n                let noOfDays = 0;\n                const tdCollections = [].slice.call(tr.children);\n                for (const td of tdCollections) {\n                    noOfDays += parseInt(td.getAttribute('colspan'), 10);\n                }\n                this.actionObj.cellWidth = tr.offsetWidth / noOfDays;\n                this.actionObj.cellHeight = tr.offsetHeight;\n            }\n            const pages = this.getPageCoordinates(e);\n            this.actionObj.X = pages.pageX;\n            this.actionObj.Y = pages.pageY;\n            this.actionObj.groupIndex = parseInt(this.actionObj.element.getAttribute('data-group-index') || '0', 10);\n            this.actionObj.interval = resizeEventArgs.interval;\n            this.actionObj.scroll = resizeEventArgs.scroll;\n            this.actionObj.start = new Date(eventObj[this.parent.eventFields.startTime].getTime());\n            this.actionObj.end = new Date(eventObj[this.parent.eventFields.endTime].getTime());\n            this.actionObj.originalElement = this.getOriginalElement(this.actionObj.element);\n            if (this.parent.currentView === 'Month') {\n                this.daysVariation = -1;\n                this.monthEvent = new MonthEvent(this.parent);\n            }\n            const viewElement = this.parent.element.querySelector('.' + CONTENT_WRAP_CLASS);\n            this.scrollArgs = { element: viewElement, width: viewElement.scrollWidth, height: viewElement.scrollHeight };\n            EventHandler.add(document, Browser.touchMoveEvent, this.resizing, this);\n            EventHandler.add(document, Browser.touchEndEvent, this.resizeStop, this);\n        });\n    }\n    resizing(e) {\n        if (this.parent.quickPopup) {\n            this.parent.quickPopup.quickPopupHide();\n        }\n        if (this.parent.element.querySelectorAll('.' + RESIZE_CLONE_CLASS).length === 0) {\n            this.resizeHelper();\n        }\n        if ((!isNullOrUndefined(e.target)) && e.target.classList.contains(DISABLE_DATES)) {\n            return;\n        }\n        const pages = this.getPageCoordinates(e);\n        this.actionObj.pageX = pages.pageX;\n        this.actionObj.pageY = pages.pageY;\n        this.updateScrollPosition(e);\n        this.updateResizingDirection(e);\n        const eventObj = extend({}, this.actionObj.event, null, true);\n        const resizeArgs = {\n            cancel: false,\n            data: eventObj,\n            element: this.actionObj.element,\n            event: e,\n            startTime: this.actionObj.start,\n            endTime: this.actionObj.end\n        };\n        if (this.parent.group.resources.length > 0) {\n            resizeArgs.groupIndex = this.actionObj.groupIndex;\n        }\n        this.parent.trigger(resizing, resizeArgs);\n    }\n    updateResizingDirection(e) {\n        if (this.parent.currentView === 'Month' || this.parent.currentView === 'TimelineYear') {\n            this.monthResizing();\n            return;\n        }\n        const resizeValidation = this.resizeValidation(e);\n        if (this.resizeEdges.left) {\n            if (resizeValidation) {\n                const leftStyles = this.getLeftRightStyles(e, true);\n                if (parseInt(leftStyles.width, 10) < 1) {\n                    return;\n                }\n                for (const cloneElement of this.actionObj.cloneElement) {\n                    setStyleAttribute(cloneElement, leftStyles);\n                    addClass([cloneElement], LEFT_RESIZE_HANDLER);\n                }\n            }\n            this.horizontalResizing(!this.parent.enableRtl);\n        }\n        if (this.resizeEdges.right) {\n            if (resizeValidation) {\n                const rightStyles = this.getLeftRightStyles(e, false);\n                if (parseInt(rightStyles.width, 10) < 1) {\n                    return;\n                }\n                for (const cloneElement of this.actionObj.cloneElement) {\n                    setStyleAttribute(cloneElement, rightStyles);\n                    addClass([cloneElement], RIGHT_RESIZE_HANDLER);\n                }\n            }\n            this.horizontalResizing(this.parent.enableRtl);\n        }\n        if (this.resizeEdges.top) {\n            if (resizeValidation) {\n                const topStyles = this.getTopBottomStyles(e, true);\n                if (parseInt(topStyles.height, 10) < 1) {\n                    return;\n                }\n                for (const cloneElement of this.actionObj.cloneElement) {\n                    setStyleAttribute(cloneElement, topStyles);\n                    addClass([cloneElement], TOP_RESIZE_HANDLER);\n                }\n            }\n            this.verticalResizing(true);\n        }\n        if (this.resizeEdges.bottom) {\n            if (resizeValidation) {\n                const bottomStyles = this.getTopBottomStyles(e, false);\n                if (parseInt(bottomStyles.height, 10) < 1) {\n                    return;\n                }\n                for (const cloneElement of this.actionObj.cloneElement) {\n                    setStyleAttribute(cloneElement, bottomStyles);\n                    addClass([cloneElement], BOTTOM_RESIZE_HANDLER);\n                }\n            }\n            this.verticalResizing(false);\n        }\n    }\n    monthResizing() {\n        this.removeCloneElement();\n        if (isNullOrUndefined(this.actionObj.pageX) || isNullOrUndefined(this.actionObj.pageY)) {\n            return;\n        }\n        const td = document.elementFromPoint(this.actionObj.pageX, this.actionObj.pageY);\n        if (isNullOrUndefined(td)) {\n            return;\n        }\n        const resizeTime = this.parent.getDateFromElement(td);\n        const isSameCell = this.parent.activeViewOptions.group.resources.length > 0 ?\n            parseInt(td.getAttribute('data-group-index'), 10) === this.actionObj.groupIndex : true;\n        let startTime = new Date(this.actionObj.event[this.parent.eventFields.startTime].getTime());\n        let endTime = new Date(this.actionObj.event[this.parent.eventFields.endTime].getTime());\n        if ((!this.parent.enableRtl && this.resizeEdges.left) || (this.parent.enableRtl && this.resizeEdges.right)\n            || this.resizeEdges.top) {\n            startTime = resizeTime;\n        }\n        else if ((!this.parent.enableRtl && this.resizeEdges.right) || (this.parent.enableRtl && this.resizeEdges.left)\n            || this.resizeEdges.bottom) {\n            endTime = addDays(resizeTime, 1);\n        }\n        if (isSameCell && startTime < endTime) {\n            this.actionObj.start = startTime;\n            this.actionObj.end = endTime;\n            const event = this.getUpdatedEvent(this.actionObj.start, this.actionObj.end, this.actionObj.event);\n            if (this.parent.currentView === 'TimelineYear') {\n                this.yearEventsRendering(event);\n            }\n            else {\n                this.dynamicEventsRendering(event);\n            }\n            this.updateOriginalElement(this.actionObj.clone);\n        }\n    }\n    yearEventsRendering(event) {\n        const eventWrappers = [].slice.call(this.parent.element.querySelectorAll('.' + CLONE_ELEMENT_CLASS));\n        for (const wrapper of eventWrappers) {\n            remove(wrapper);\n        }\n        let endDate = new Date(event[this.parent.eventFields.endTime]);\n        let monthDiff = 0;\n        if (this.parent.activeViewOptions.group.resources.length === 0) {\n            monthDiff = this.getMonthDiff(event[this.parent.eventFields.startTime], addDays(endDate, -1));\n        }\n        for (let i = 0; i <= monthDiff; i++) {\n            let eventObj;\n            if (this.parent.activeViewOptions.group.resources.length === 0) {\n                eventObj = this.getEventCount(event, this.actionObj.start.getMonth() + i);\n            }\n            else {\n                eventObj = extend({}, event, null, true);\n                endDate = this.resizeEdges.left || this.resizeEdges.right ? addDays(endDate, -1) : endDate;\n                eventObj.count = this.getMonthDiff(event[this.parent.eventFields.startTime], endDate) + 1;\n            }\n            this.dynamicYearlyEventsRendering(eventObj, true);\n        }\n    }\n    getMonthDiff(startDate, endDate) {\n        let months;\n        months = (endDate.getFullYear() - startDate.getFullYear()) * 12;\n        months -= startDate.getMonth();\n        months += endDate.getMonth();\n        return months <= 0 ? 0 : months;\n    }\n    getEventCount(eventObj, month) {\n        const eventData = extend({}, eventObj, null, true);\n        const eventStart = eventData[this.parent.eventFields.startTime];\n        const eventEnd = eventData[this.parent.eventFields.endTime];\n        const monthStart = new Date(this.parent.selectedDate.getFullYear(), month, 1);\n        const monthEnd = addDays(new Date(this.parent.selectedDate.getFullYear(), month + 1, 0), 1);\n        let count = 1;\n        if (eventStart.getTime() < monthStart.getTime()) {\n            eventData[this.parent.eventFields.startTime] = monthStart;\n        }\n        if (eventEnd.getTime() > monthEnd.getTime()) {\n            eventData[this.parent.eventFields.endTime] = monthEnd;\n        }\n        if (this.parent.activeViewOptions.group.resources.length === 0) {\n            count = Math.ceil((eventData[this.parent.eventFields.endTime].getTime() -\n                eventData[this.parent.eventFields.startTime].getTime()) / MS_PER_DAY);\n        }\n        eventData.count = count;\n        return eventData;\n    }\n    resizeStop(e) {\n        EventHandler.remove(document, Browser.touchMoveEvent, this.resizing);\n        EventHandler.remove(document, Browser.touchEndEvent, this.resizeStop);\n        clearInterval(this.actionObj.scrollInterval);\n        this.actionObj.scrollInterval = null;\n        this.removeCloneElementClasses();\n        this.removeCloneElement();\n        this.actionClass('removeClass');\n        this.parent.uiStateValues.action = false;\n        const resizeArgs = { cancel: false, data: this.getChangedData(), element: this.actionObj.element, event: e };\n        this.parent.trigger(resizeStop, resizeArgs, (resizeEventArgs) => {\n            if (resizeEventArgs.cancel) {\n                return;\n            }\n            if (this.parent.activeViewOptions.group.resources.length > 0 && !this.parent.rowAutoHeight\n                && !this.parent.activeViewOptions.group.allowGroupEdit && !this.parent.virtualScrollModule\n                && this.parent.activeViewOptions.group.byGroupID) {\n                this.parent.crudModule.crudObj.sourceEvent =\n                    [this.parent.resourceBase.lastResourceLevel[parseInt(resizeEventArgs.element.getAttribute('data-group-index'), 10)]];\n                this.parent.crudModule.crudObj.targetEvent = this.parent.crudModule.crudObj.sourceEvent;\n                this.parent.crudModule.crudObj.isCrudAction = true;\n            }\n            this.saveChangedData(resizeEventArgs);\n        });\n    }\n    verticalResizing(isTop) {\n        let offsetValue = this.actionObj.clone.offsetTop;\n        if (!isTop) {\n            offsetValue += this.actionObj.clone.offsetHeight;\n        }\n        const minutes = (offsetValue / this.actionObj.cellHeight) * this.actionObj.slotInterval;\n        const element = this.actionObj.clone.offsetParent;\n        if (isNullOrUndefined(element)) {\n            return;\n        }\n        const resizeTime = resetTime(this.parent.getDateFromElement(element));\n        resizeTime.setHours(this.parent.activeView.getStartHour().getHours());\n        resizeTime.setMinutes(minutes + this.parent.activeView.getStartHour().getMinutes());\n        if (isTop) {\n            this.actionObj.start = this.calculateIntervalTime(resizeTime);\n        }\n        else {\n            this.actionObj.end = this.calculateIntervalTime(resizeTime);\n        }\n        this.updateTimePosition(resizeTime);\n    }\n    horizontalResizing(isLeft) {\n        const eventStart = new Date(this.actionObj.event[this.parent.eventFields.startTime].getTime());\n        const eventEnd = new Date(this.actionObj.event[this.parent.eventFields.endTime].getTime());\n        let resizeTime;\n        let isDateHeader = false;\n        const isTimeViews = ['TimelineDay', 'TimelineWeek', 'TimelineWorkWeek'].indexOf(this.parent.currentView) > -1;\n        const isTimelineMonth = this.parent.currentView === 'TimelineMonth';\n        const isWithoutScale = isTimelineMonth || isTimeViews && !this.parent.activeViewOptions.timeScale.enable;\n        if (this.parent.activeView.isTimelineView()) {\n            const tr = this.parent.getContentTable().querySelector('tr');\n            let headerName = this.parent.currentView;\n            if (this.parent.activeViewOptions.headerRows.length > 0) {\n                const rows = this.parent.activeViewOptions.headerRows.map((row) => row.option);\n                headerName = rows.slice(-1)[0];\n                if (isTimelineMonth && headerName === 'Hour') {\n                    headerName = rows.slice(-2)[0] || 'Month';\n                }\n            }\n            resizeTime = isLeft ? eventStart : eventEnd;\n            let cellIndex = 0;\n            const tdCollections = [].slice.call(tr.children);\n            let isLastCell = false;\n            if (['Year', 'Month', 'Week', 'Date'].indexOf(headerName) !== -1) {\n                let noOfDays = 0;\n                for (const td of tdCollections) {\n                    noOfDays += parseInt(td.getAttribute('colspan'), 10);\n                }\n                let offsetValue = this.parent.enableRtl ? parseInt(this.actionObj.clone.style.right, 10) :\n                    parseInt(this.actionObj.clone.style.left, 10);\n                if (!isLeft) {\n                    offsetValue += (this.actionObj.clone.offsetWidth - this.actionObj.cellWidth);\n                }\n                cellIndex = Math.floor(offsetValue / Math.floor(tr.offsetWidth / noOfDays));\n                isDateHeader = isTimeViews && headerName === 'Date';\n                cellIndex = isLeft ? cellIndex : (isTimelineMonth || isDateHeader) ? cellIndex + 1 : cellIndex;\n                isLastCell = cellIndex === tdCollections.length;\n                cellIndex = (cellIndex < 0) ? 0 : (cellIndex >= noOfDays) ? noOfDays - 1 : cellIndex;\n            }\n            else {\n                const cellWidth = this.actionObj.cellWidth;\n                cellIndex = isLeft ? Math.floor(this.actionObj.clone.offsetLeft / this.actionObj.cellWidth) :\n                    Math.ceil((this.actionObj.clone.offsetLeft + (this.actionObj.clone.offsetWidth - cellWidth)) /\n                        this.actionObj.cellWidth);\n                if (this.parent.enableRtl) {\n                    let cellOffsetWidth = 0;\n                    if (headerName === 'TimelineMonth' || (!this.parent.activeViewOptions.timeScale.enable &&\n                        !isTimelineMonth)) {\n                        cellOffsetWidth = this.actionObj.cellWidth;\n                    }\n                    const offsetWidth = (Math.floor(parseInt(this.actionObj.clone.style.right, 10) / this.actionObj.cellWidth) *\n                        this.actionObj.cellWidth) + (isLeft ? 0 : this.actionObj.clone.offsetWidth - cellOffsetWidth);\n                    cellIndex = Math.floor(offsetWidth / this.actionObj.cellWidth);\n                }\n                isLastCell = cellIndex === tdCollections.length;\n                cellIndex = this.getIndex(cellIndex);\n            }\n            let resizeDate;\n            if (['Year', 'Month', 'Week', 'Date'].indexOf(headerName) !== -1) {\n                resizeDate = new Date(this.parent.activeView.renderDates[cellIndex].getTime());\n            }\n            else {\n                resizeDate = this.parent.getDateFromElement(tr.children[cellIndex]);\n            }\n            if (['TimelineMonth', 'Year', 'Month', 'Week', 'Date'].indexOf(headerName) !== -1 ||\n                !this.parent.activeViewOptions.timeScale.enable) {\n                resizeTime = new Date(resizeDate.setHours(resizeTime.getHours(), resizeTime.getMinutes(), resizeTime.getSeconds()));\n            }\n            else {\n                let offsetValue = this.parent.enableRtl ? parseFloat(this.actionObj.clone.style.right) :\n                    parseFloat(this.actionObj.clone.style.left);\n                if (!isLeft) {\n                    offsetValue += this.actionObj.clone.offsetWidth;\n                }\n                let spanMinutes = Math.ceil((this.actionObj.slotInterval / this.actionObj.cellWidth) *\n                    (offsetValue - Math.floor(offsetValue / this.actionObj.cellWidth) * this.actionObj.cellWidth));\n                spanMinutes = (isLastCell || (!isLeft && spanMinutes === 0)) ? this.actionObj.slotInterval : spanMinutes;\n                resizeTime = new Date(resizeDate.getTime());\n                resizeTime.setMinutes(resizeTime.getMinutes() + spanMinutes);\n                this.updateTimePosition(resizeTime);\n            }\n        }\n        else {\n            const cloneIndex = closest(this.actionObj.clone, 'td').cellIndex;\n            const originalWidth = Math.ceil((isLeft ? this.actionObj.element.offsetWidth : 0) / this.actionObj.cellWidth) *\n                this.actionObj.cellWidth;\n            const noOfDays = Math.ceil((this.actionObj.clone.offsetWidth - originalWidth) / this.actionObj.cellWidth);\n            const tr = closest(this.actionObj.clone, 'tr');\n            let dayIndex = isLeft ? cloneIndex - noOfDays : cloneIndex + noOfDays - 1;\n            dayIndex = this.getIndex(dayIndex);\n            resizeTime = this.parent.getDateFromElement(tr.children[dayIndex]);\n            if (isLeft) {\n                resizeTime.setHours(eventStart.getHours(), eventStart.getMinutes(), eventStart.getSeconds());\n            }\n            else {\n                resizeTime.setHours(eventEnd.getHours(), eventEnd.getMinutes(), eventEnd.getSeconds());\n            }\n        }\n        if (isLeft) {\n            if ((eventEnd.getTime() - resizeTime.getTime()) <= 0) {\n                resizeTime = isWithoutScale ? resetTime(eventEnd) : eventStart;\n            }\n            this.actionObj.start = this.parent.activeViewOptions.timeScale.enable ? this.calculateIntervalTime(resizeTime) : resizeTime;\n        }\n        else {\n            const isTimeScaleViews = isTimeViews && this.parent.activeViewOptions.timeScale.enable;\n            let resizeEnd = ((!isTimeScaleViews || isDateHeader) && resizeTime.getHours() === 0 && resizeTime.getMinutes() === 0) ?\n                addDays(resizeTime, 1) : resizeTime;\n            if (isWithoutScale && (resizeEnd.getTime() - eventStart.getTime()) <= 0) {\n                resizeEnd = addDays(resetTime(eventStart), 1);\n            }\n            this.actionObj.end = this.parent.activeViewOptions.timeScale.enable && this.parent.currentView !== 'Month' ?\n                this.calculateIntervalTime(resizeEnd) : resizeEnd;\n        }\n    }\n    getTopBottomStyles(e, isTop) {\n        const viewElement = this.parent.element.querySelector('.' + CONTENT_WRAP_CLASS);\n        const slotInterval = (this.actionObj.cellHeight / this.actionObj.slotInterval) * this.actionObj.interval;\n        let clnHeight = isTop ? this.actionObj.element.offsetHeight + (this.actionObj.Y - this.actionObj.pageY) :\n            this.actionObj.element.offsetHeight + (this.actionObj.pageY - this.actionObj.Y);\n        let clnTop = isTop ? this.actionObj.element.offsetTop -\n            (this.actionObj.Y - this.actionObj.pageY) : this.actionObj.clone.offsetTop;\n        clnHeight = (clnTop < 0) ? this.actionObj.clone.offsetHeight :\n            (this.actionObj.clone.offsetTop + this.actionObj.clone.offsetHeight) > this.scrollArgs.height ?\n                this.actionObj.clone.offsetHeight : clnHeight;\n        clnTop = (clnTop < 0) ? 0 : clnTop;\n        clnTop = isTop ? Math.floor(clnTop / slotInterval) * slotInterval : clnTop;\n        clnHeight = clnTop + clnHeight >= viewElement.scrollHeight ? viewElement.scrollHeight - clnTop :\n            Math.ceil(clnHeight / slotInterval) * slotInterval;\n        const styles = {\n            height: formatUnit(clnHeight < this.actionObj.cellHeight ? Math.floor(clnHeight / slotInterval) * slotInterval : clnHeight),\n            top: formatUnit((clnHeight < this.actionObj.cellHeight && isTop) ? Math.ceil(clnTop / slotInterval) * slotInterval : clnTop),\n            left: '0px', right: '0px', width: '100%'\n        };\n        return styles;\n    }\n    getLeftRightStyles(e, isLeft) {\n        const styles = {};\n        const isTimelineView = this.parent.activeView.isTimelineView();\n        const isTimeViews = ['TimelineDay', 'TimelineWeek', 'TimelineWorkWeek'].indexOf(this.parent.currentView) > -1 &&\n            this.parent.activeViewOptions.timeScale.enable;\n        const slotInterval = (this.actionObj.cellWidth / this.actionObj.slotInterval) * this.actionObj.interval;\n        const pageWidth = isLeft ? (this.actionObj.X - this.actionObj.pageX) : (this.actionObj.pageX - this.actionObj.X);\n        const targetWidth = isTimelineView ?\n            (this.actionObj.element.offsetWidth / this.actionObj.cellWidth) * this.actionObj.cellWidth :\n            this.parent.currentView === 'Month' ? this.actionObj.element.offsetWidth :\n                Math.ceil(this.actionObj.element.offsetWidth / this.actionObj.cellWidth) * this.actionObj.cellWidth;\n        let offsetWidth = targetWidth + (Math.ceil(pageWidth / this.actionObj.cellWidth) * this.actionObj.cellWidth);\n        if (isTimeViews) {\n            offsetWidth = targetWidth + (isLeft ? (Math.ceil(pageWidth / slotInterval) * slotInterval) :\n                (Math.floor(pageWidth / slotInterval) * slotInterval));\n            this.actionObj.event[this.parent.eventFields.isAllDay] = false;\n        }\n        let width = !isLeft && ((offsetWidth + this.actionObj.clone.offsetLeft > this.scrollArgs.width)) ?\n            this.actionObj.clone.offsetWidth : (offsetWidth < this.actionObj.cellWidth) ? offsetWidth : offsetWidth;\n        if (this.parent.enableRtl) {\n            let rightValue = isTimelineView ? parseInt(this.actionObj.element.style.right, 10) :\n                -(offsetWidth - this.actionObj.cellWidth);\n            rightValue = isTimelineView ? rightValue : isLeft ? 0 : rightValue > 0 ? 0 : rightValue;\n            if (isTimelineView && !isLeft) {\n                rightValue = Math.ceil((this.actionObj.element.offsetLeft + (this.actionObj.element.offsetWidth +\n                    (this.actionObj.pageX - this.actionObj.X))) / slotInterval) * slotInterval;\n                rightValue = rightValue < 0 ? Math.abs(rightValue) : -rightValue;\n            }\n            rightValue = rightValue >= this.scrollArgs.width ? this.scrollArgs.width - this.actionObj.cellWidth : rightValue;\n            styles.right = formatUnit(rightValue);\n            width = width + rightValue > this.scrollArgs.width ? this.actionObj.clone.offsetWidth : width;\n        }\n        else {\n            let offsetLeft = isLeft ? this.actionObj.element.offsetLeft - (this.actionObj.X - this.actionObj.pageX) :\n                this.parent.enableRtl ? this.actionObj.element.offsetLeft : 0;\n            if (isTimelineView) {\n                offsetLeft = isLeft ? offsetLeft : parseInt(this.actionObj.clone.style.left, 10);\n                if (this.parent.enableRtl) {\n                    offsetLeft = !isLeft ? (this.actionObj.pageX < this.actionObj.X - this.actionObj.clone.offsetWidth) ?\n                        parseInt(this.actionObj.clone.style.right, 10) : offsetLeft : offsetLeft;\n                }\n                else {\n                    offsetLeft = isLeft ? (this.actionObj.pageX > this.actionObj.X + this.actionObj.clone.offsetWidth &&\n                        this.actionObj.clone.offsetWidth === this.actionObj.cellWidth) ?\n                        parseInt(this.actionObj.clone.style.left, 10) : offsetLeft : offsetLeft;\n                }\n            }\n            const leftValue = offsetLeft;\n            offsetLeft = isTimelineView ? isTimeViews ? isLeft ? Math.floor(offsetLeft / slotInterval) * slotInterval : offsetLeft :\n                Math.floor(offsetLeft / this.actionObj.cellWidth) * this.actionObj.cellWidth :\n                Math.ceil(Math.abs(offsetLeft) / this.actionObj.cellWidth) * this.actionObj.cellWidth;\n            if (offsetLeft < 0) {\n                offsetLeft = 0;\n                width = this.actionObj.clone.offsetWidth;\n            }\n            const cloneWidth = Math.ceil(this.actionObj.clone.offsetWidth / this.actionObj.cellWidth) * this.actionObj.cellWidth;\n            if (isLeft) {\n                styles.left = formatUnit(isTimelineView ? offsetLeft : isLeft ? leftValue < 0 ? -offsetLeft :\n                    (Math.ceil((targetWidth - cloneWidth) / this.actionObj.cellWidth) * this.actionObj.cellWidth) : offsetLeft);\n            }\n        }\n        styles.width = formatUnit(width);\n        return styles;\n    }\n    resizeValidation(e) {\n        const pages = this.getPageCoordinates(e);\n        const viewDimension = this.getContentAreaDimension();\n        const isTimeScale = this.parent.activeView.isTimelineView() && this.parent.activeViewOptions.timeScale.enable;\n        let cellWidth = this.actionObj.cellWidth;\n        let resizeValidation = false;\n        if (this.resizeEdges.left) {\n            if (pages.pageX < viewDimension.leftOffset && pages.pageX >= viewDimension.left && isTimeScale) {\n                cellWidth = 0;\n            }\n            resizeValidation = (pages.pageX - cellWidth) >= viewDimension.left;\n        }\n        if (this.resizeEdges.right) {\n            if (pages.pageX > viewDimension.rightOffset && pages.pageX <= viewDimension.right && isTimeScale) {\n                cellWidth = 0;\n            }\n            resizeValidation = (pages.pageX + cellWidth) <= viewDimension.right;\n        }\n        if (this.resizeEdges.top) {\n            resizeValidation = this.actionObj.clone.offsetTop >= viewDimension.top;\n        }\n        if (this.resizeEdges.bottom) {\n            resizeValidation = (this.actionObj.clone.offsetTop + this.actionObj.clone.offsetHeight) <= this.scrollArgs.height;\n        }\n        return resizeValidation;\n    }\n    /**\n     * Get module name\n     *\n     * @returns {string} Returns the module name..\n     */\n    getModuleName() {\n        return 'resize';\n    }\n}\n\n/* eslint-disable @typescript-eslint/no-explicit-any */\nconst EVENT_GAP$2 = 2;\n/**\n * Year view events render\n */\nclass YearEvent extends TimelineEvent {\n    constructor(parent) {\n        super(parent, 'day');\n        this.isResource = false;\n    }\n    renderAppointments() {\n        if (this.parent.dragAndDropModule) {\n            this.parent.dragAndDropModule.setDragArea();\n        }\n        this.fields = this.parent.eventFields;\n        const elementSelector = (this.parent.currentView === 'Year') ? '.' + APPOINTMENT_CLASS :\n            '.' + APPOINTMENT_WRAPPER_CLASS + ',.' + MORE_INDICATOR_CLASS;\n        const eventWrappers = [].slice.call(this.parent.element.querySelectorAll(elementSelector));\n        for (const wrapper of eventWrappers) {\n            remove(wrapper);\n        }\n        this.renderedEvents = [];\n        if (this.parent.currentView === 'Year') {\n            this.yearViewEvents();\n        }\n        else {\n            this.removeCellHeight();\n            if (this.parent.activeViewOptions.group.resources.length > 0 && !this.parent.uiStateValues.isGroupAdaptive) {\n                this.isResource = true;\n                this.timelineResourceEvents();\n            }\n            else {\n                this.timelineYearViewEvents();\n            }\n        }\n        this.parent.renderTemplates();\n        this.parent.notify(contentReady, {});\n    }\n    yearViewEvents() {\n        const months = this.getMonths();\n        for (const month of months) {\n            const queryString = `.e-month-calendar:nth-child(${months.indexOf(month) + 1}) td.e-work-cells`;\n            const workCells = [].slice.call(this.parent.element.querySelectorAll(queryString));\n            const monthDate = new Date(this.parent.selectedDate.getFullYear(), month, 1);\n            const monthStart = this.parent.calendarUtil.getMonthStartDate(new Date(monthDate.getTime()));\n            const monthEnd = this.parent.calendarUtil.getMonthEndDate(new Date(monthDate.getTime()));\n            let startDate = getWeekFirstDate(monthStart, this.parent.firstDayOfWeek);\n            const endDate = addDays(getWeekLastDate(monthEnd, this.parent.firstDayOfWeek), 1);\n            for (let index = 0; startDate.getTime() < endDate.getTime(); index++) {\n                const start = resetTime(new Date(startDate.getTime()));\n                const end = addDays(new Date(start.getTime()), 1);\n                const filterEvents = this.parent.eventBase.filterEvents(start, end);\n                if (filterEvents.length > 0) {\n                    const workCell = workCells[index];\n                    if (workCell) {\n                        workCell.appendChild(createElement('div', { className: APPOINTMENT_CLASS }));\n                    }\n                }\n                startDate = addDays(new Date(startDate.getTime()), 1);\n            }\n        }\n    }\n    timelineYearViewEvents() {\n        const workCell = this.parent.element.querySelector('.' + WORK_CELLS_CLASS);\n        this.cellWidth = workCell.offsetWidth;\n        this.cellHeader = getOuterHeight(workCell.querySelector('.' + DATE_HEADER_CLASS));\n        const eventTable = this.parent.element.querySelector('.' + EVENT_TABLE_CLASS);\n        this.eventHeight = getElementHeightFromClass(eventTable, APPOINTMENT_CLASS);\n        const wrapperCollection = [].slice.call(this.parent.element.querySelectorAll('.' + APPOINTMENT_CONTAINER_CLASS));\n        const months = this.getMonths();\n        for (let row = 0; row < months.length; row++) {\n            const wrapper = wrapperCollection[row];\n            let td = row + 1;\n            const eventWrapper = createElement('div', { className: APPOINTMENT_WRAPPER_CLASS });\n            wrapper.appendChild(eventWrapper);\n            let monthStart = new Date(this.parent.selectedDate.getFullYear(), months[row], 1);\n            const monthEnd = new Date(monthStart.getFullYear(), monthStart.getMonth() + 1, 0);\n            let dayIndex = monthStart.getDay();\n            const isSpannedCollection = [];\n            if (this.parent.activeViewOptions.orientation === 'Horizontal') {\n                this.renderedEvents = [];\n            }\n            while (monthStart.getTime() <= monthEnd.getTime()) {\n                let leftValue;\n                let rightValue;\n                if (this.parent.activeViewOptions.orientation === 'Vertical') {\n                    const wrapper = wrapperCollection[dayIndex];\n                    td = dayIndex + 1;\n                    let eventWrapper = wrapper.querySelector('.' + APPOINTMENT_WRAPPER_CLASS);\n                    if (!eventWrapper) {\n                        eventWrapper = createElement('div', { className: APPOINTMENT_WRAPPER_CLASS });\n                        wrapper.appendChild(eventWrapper);\n                    }\n                    if (this.parent.enableRtl) {\n                        rightValue = row * this.cellWidth;\n                    }\n                    else {\n                        leftValue = row * this.cellWidth;\n                    }\n                }\n                else {\n                    if (this.parent.enableRtl) {\n                        rightValue = ((dayIndex + monthStart.getDate()) - 1) * this.cellWidth;\n                    }\n                    else {\n                        leftValue = ((dayIndex + monthStart.getDate()) - 1) * this.cellWidth;\n                    }\n                }\n                const rowTd = this.parent.element.querySelector(`.e-content-wrap tr:nth-child(${td}) td`);\n                this.cellHeight = rowTd.offsetHeight;\n                const dayStart = resetTime(new Date(monthStart.getTime()));\n                const dayEnd = addDays(new Date(dayStart.getTime()), 1);\n                let resource;\n                if (this.parent.uiStateValues.isGroupAdaptive) {\n                    resource = this.parent.resourceBase.lastResourceLevel[this.parent.uiStateValues.groupIndex];\n                }\n                let dayEvents = this.parent.eventBase.filterEvents(dayStart, dayEnd, undefined, resource);\n                dayEvents = this.parent.eventBase.sortByDateTime(dayEvents);\n                for (let index = 0, count = dayEvents.length; index < count; index++) {\n                    const eventData = extend({}, dayEvents[index], null, true);\n                    this.updateSpannedEvents(eventData, dayStart, dayEnd);\n                    const overlapIndex = this.getIndex(dayStart);\n                    eventData.Index = overlapIndex;\n                    const availedHeight = this.cellHeader + (this.eventHeight * (overlapIndex + 1)) + EVENT_GAP$2 +\n                        this.moreIndicatorHeight;\n                    const appArea = this.cellHeight - this.cellHeader - this.moreIndicatorHeight;\n                    const renderedAppCount = Math.floor(appArea / (this.eventHeight + EVENT_GAP$2));\n                    const moreIndicatorCount = (count - renderedAppCount) <= 0 ? 1 : (count - renderedAppCount);\n                    if (this.parent.activeViewOptions.orientation === 'Horizontal') {\n                        const isRendered = this.renderedEvents.filter((eventObj) => eventObj.Guid === eventData.Guid);\n                        const isSpanned = isSpannedCollection.filter((eventObj) => eventObj.Guid === eventData.Guid);\n                        if (isRendered.length > 0 && isRendered[0].MoreIndicator || isSpanned.length > 0 && isSpanned[0].MoreIndicator) {\n                            const moreIndex = this.parent.activeViewOptions.orientation === 'Horizontal' ? row : dayIndex;\n                            this.renderMoreIndicator(eventWrapper, moreIndicatorCount, dayStart, moreIndex, leftValue, rightValue);\n                            continue;\n                        }\n                        else if (isRendered.length > 0 || isSpanned.length > 0) {\n                            continue;\n                        }\n                    }\n                    const isRowAutoHeight = this.parent.rowAutoHeight && this.parent.activeViewOptions.orientation === 'Horizontal';\n                    if (isRowAutoHeight || this.cellHeight > availedHeight) {\n                        this.renderEvent(eventWrapper, eventData, row, leftValue, rightValue, monthStart, dayIndex);\n                        this.updateCellHeight(rowTd, availedHeight);\n                        isSpannedCollection.push(eventData);\n                    }\n                    else {\n                        const moreIndex = this.parent.activeViewOptions.orientation === 'Horizontal' ? row : dayIndex;\n                        this.renderMoreIndicator(eventWrapper, moreIndicatorCount, dayStart, moreIndex, leftValue, rightValue);\n                        if (this.parent.activeViewOptions.orientation === 'Horizontal') {\n                            eventData.MoreIndicator = true;\n                            this.renderedEvents.push(eventData);\n                            isSpannedCollection.push(eventData);\n                        }\n                    }\n                }\n                monthStart = addDays(new Date(monthStart.getTime()), 1);\n                if (this.parent.activeViewOptions.orientation === 'Vertical') {\n                    dayIndex++;\n                    this.renderedEvents = [];\n                }\n            }\n        }\n    }\n    updateSpannedEvents(eventObj, dayStart, dayEnd) {\n        const isLeftRightResize = (this.isResource && this.parent.activeViewOptions.orientation === 'Vertical') ||\n            (!this.isResource && this.parent.activeViewOptions.orientation === 'Horizontal');\n        const data = { isLeft: true, isRight: true, isBottom: true, isTop: true };\n        if (dayStart.getTime() <= eventObj[this.fields.startTime].getTime()) {\n            if (isLeftRightResize) {\n                data.isLeft = false;\n            }\n            else {\n                data.isTop = false;\n            }\n        }\n        if ((dayEnd.getTime() >= eventObj[this.fields.endTime].getTime()) || (isLeftRightResize && !this.isResource &&\n            addDays(dayEnd, -1).getMonth() === eventObj[this.fields.endTime].getMonth())) {\n            if (isLeftRightResize) {\n                data.isRight = false;\n            }\n            else {\n                data.isBottom = false;\n            }\n        }\n        eventObj.data = data;\n    }\n    timelineResourceEvents() {\n        const workCell = this.parent.element.querySelector('.' + WORK_CELLS_CLASS);\n        this.cellWidth = workCell.offsetWidth;\n        this.cellHeader = 0;\n        const eventTable = this.parent.element.querySelector('.' + EVENT_TABLE_CLASS);\n        this.eventHeight = getElementHeightFromClass(eventTable, APPOINTMENT_CLASS);\n        const wrapperCollection = [].slice.call(this.parent.element.querySelectorAll('.' + APPOINTMENT_CONTAINER_CLASS));\n        const resources = this.parent.uiStateValues.isGroupAdaptive ?\n            [this.parent.resourceBase.lastResourceLevel[this.parent.uiStateValues.groupIndex]] : this.parent.resourceBase.lastResourceLevel;\n        const months = this.getMonths();\n        if (this.parent.activeViewOptions.orientation === 'Horizontal') {\n            for (let month = 0; month < months.length; month++) {\n                const monthStart = new Date(this.parent.selectedDate.getFullYear(), months[month], 1);\n                for (let i = 0, len = resources.length; i < len; i++) {\n                    this.renderedEvents = [];\n                    this.renderResourceEvent(wrapperCollection[month], resources[i], month, i, monthStart);\n                }\n            }\n        }\n        else {\n            for (let i = 0, len = resources.length; i < len; i++) {\n                this.renderedEvents = [];\n                for (let month = 0; month < months.length; month++) {\n                    const monthStart = new Date(this.parent.selectedDate.getFullYear(), months[month], 1);\n                    this.renderResourceEvent(wrapperCollection[i], resources[i], month, i, monthStart);\n                }\n            }\n        }\n    }\n    renderResourceEvent(wrapper, resource, month, index, monthStart) {\n        const eventWrapper = createElement('div', { className: APPOINTMENT_WRAPPER_CLASS });\n        wrapper.appendChild(eventWrapper);\n        const monthEnd = addDays(lastDateOfMonth(new Date(monthStart.getTime())), 1);\n        const eventDatas = this.parent.eventBase.filterEvents(monthStart, monthEnd, undefined, resource);\n        const rowIndex = this.parent.activeViewOptions.orientation === 'Vertical' ? index : month;\n        const td = this.parent.element.querySelector(`.e-content-wrap tr:nth-child(${rowIndex + 1}) td`);\n        this.cellHeight = td.offsetHeight;\n        for (let a = 0; a < eventDatas.length; a++) {\n            const data = eventDatas[a];\n            let overlapIndex;\n            const eventData = extend({}, data, null, true);\n            if (this.parent.activeViewOptions.group.resources.length > 0) {\n                const eventObj = this.isSpannedEvent(eventData, monthStart);\n                overlapIndex = this.getIndex(eventObj[this.fields.startTime]);\n                eventData.Index = overlapIndex;\n            }\n            else {\n                overlapIndex = this.getIndex(eventData[this.fields.startTime]);\n                eventData.Index = overlapIndex;\n            }\n            const availedHeight = this.cellHeader + (this.eventHeight * (a + 1)) + EVENT_GAP$2 + this.moreIndicatorHeight;\n            const leftValue = (this.parent.activeViewOptions.orientation === 'Vertical') ?\n                month * this.cellWidth : index * this.cellWidth;\n            if (this.parent.rowAutoHeight || this.cellHeight > availedHeight) {\n                this.renderEvent(eventWrapper, eventData, month, leftValue, leftValue, monthStart, index);\n                this.updateCellHeight(td, availedHeight);\n            }\n            else {\n                const moreIndex = this.parent.activeViewOptions.orientation === 'Horizontal' ? month : index;\n                this.renderMoreIndicator(eventWrapper, eventDatas.length - a, monthStart, moreIndex, leftValue, leftValue, index);\n                if (this.parent.activeViewOptions.orientation === 'Horizontal') {\n                    for (let i = index; i < eventDatas.length; i++) {\n                        this.renderedEvents.push(extend({}, eventDatas[i], { Index: overlapIndex + i }, true));\n                    }\n                }\n                break;\n            }\n        }\n    }\n    // eslint-disable-next-line max-len\n    renderEvent(wrapper, eventData, row, left, right, monthDate, rowIndex) {\n        const eventObj = this.isSpannedEvent(eventData, monthDate);\n        const wrap = this.createEventElement(eventObj);\n        let width;\n        let index;\n        if (eventObj.isSpanned.count === 1) {\n            const endTime = addDays(eventObj[this.fields.endTime], -1);\n            eventObj[this.fields.endTime] = (endTime > eventObj[this.fields.startTime]) ? endTime : eventObj[this.fields.endTime];\n        }\n        if (eventObj[this.fields.startTime] > eventObj[this.fields.endTime]) {\n            return;\n        }\n        if (this.parent.activeViewOptions.orientation === 'Horizontal') {\n            index = row + 1;\n            if (eventObj[this.fields.startTime].getTime() === eventObj[this.fields.endTime].getTime()) {\n                eventObj.isSpanned.count = 1;\n            }\n            width = eventObj.isSpanned.count * this.cellWidth;\n        }\n        else {\n            index = rowIndex + 1;\n            width = this.cellWidth;\n        }\n        const rowTd = this.parent.element.querySelector(`.e-content-wrap tr:nth-child(${index}) td`);\n        const top = rowTd.offsetTop + this.cellHeader + (this.eventHeight * eventObj.Index) + EVENT_GAP$2;\n        setStyleAttribute(wrap, {\n            'width': width + 'px', 'height': this.eventHeight + 'px', 'left': left + 'px', 'right': right + 'px', 'top': top + 'px'\n        });\n        const args = { data: eventObj, element: wrap, cancel: false, type: 'event' };\n        this.parent.trigger(eventRendered, args, (eventArgs) => {\n            if (!eventArgs.cancel) {\n                wrapper.appendChild(wrap);\n                this.wireAppointmentEvents(wrap, eventObj);\n                if (this.parent.activeViewOptions.group.resources.length > 0) {\n                    this.renderedEvents.push(extend({}, eventObj, null, true));\n                }\n                else if (this.parent.activeViewOptions.orientation === 'Vertical') {\n                    this.renderedEvents.push(extend({}, eventObj, null, true));\n                }\n                else if ((eventObj.isSpanned.isRight || eventObj.isSpanned.isLeft) && this.parent.activeViewOptions.orientation === 'Horizontal'\n                    || !eventObj.isSpanned.isRight) {\n                    this.renderedEvents.push(extend({}, eventObj, null, true));\n                }\n            }\n        });\n    }\n    // eslint-disable-next-line max-len\n    renderMoreIndicator(wrapper, count, startDate, row, left, right, index) {\n        if (this.parent.activeViewOptions.group.resources.length === 0 && wrapper.querySelector('[data-start-date=\"' + startDate.getTime() + '\"]')) {\n            return;\n        }\n        let endDate;\n        if (this.parent.activeViewOptions.group.resources.length > 0) {\n            endDate = addDays(lastDateOfMonth(new Date(startDate.getTime())), 1);\n        }\n        else {\n            endDate = addDays(new Date(startDate.getTime()), 1);\n        }\n        const moreIndicator = this.getMoreIndicatorElement(count, startDate, endDate);\n        const rowTr = this.parent.element.querySelector(`.e-content-wrap tr:nth-child(${row + 1})`);\n        const top = rowTr.offsetTop + (this.cellHeight - this.moreIndicatorHeight);\n        left = (Math.floor(left / this.cellWidth) * this.cellWidth);\n        right = (Math.floor(right / this.cellWidth) * this.cellWidth);\n        setStyleAttribute(moreIndicator, { 'width': this.cellWidth + 'px', 'left': left + 'px', 'right': right + 'px', 'top': top + 'px' });\n        if (!isNullOrUndefined(index)) {\n            moreIndicator.setAttribute('data-group-index', index.toString());\n        }\n        wrapper.appendChild(moreIndicator);\n        EventHandler.add(moreIndicator, 'click', this.moreIndicatorClick, this);\n    }\n    createEventElement(record) {\n        const eventSubject = (record[this.fields.subject] || this.parent.eventSettings.fields.subject.default\n            || this.parent.localeObj.getConstant('addTitle'));\n        const eventWrapper = createElement('div', {\n            className: APPOINTMENT_CLASS,\n            attrs: {\n                'data-id': 'Appointment_' + record[this.fields.id],\n                'data-guid': record.Guid,\n                'role': 'button', 'tabindex': '0',\n                'aria-readonly': this.parent.eventBase.getReadonlyAttribute(record), 'aria-selected': 'false', 'aria-grabbed': 'true',\n                'aria-label': this.parent.getAnnouncementString(record)\n            }\n        });\n        if (this.cssClass) {\n            addClass([eventWrapper], this.cssClass);\n        }\n        if (record[this.fields.isReadonly]) {\n            addClass([eventWrapper], READ_ONLY);\n        }\n        if (this.parent.activeViewOptions.group.resources.length > 0) {\n            const resIndex = this.getGroupIndexFromEvent(record);\n            eventWrapper.setAttribute('data-group-index', resIndex.toString());\n        }\n        let templateElement = [];\n        const eventObj = extend({}, record, null, true);\n        if (this.parent.activeViewOptions.eventTemplate) {\n            const templateId = this.parent.element.id + '_' + this.parent.activeViewOptions.eventTemplateName + 'eventTemplate';\n            templateElement = this.parent.getAppointmentTemplate()(eventObj, this.parent, 'eventTemplate', templateId, false);\n        }\n        else {\n            const locationEle = (record[this.fields.location] || this.parent.eventSettings.fields.location.default || '');\n            const subjectEle = createElement('div', {\n                className: SUBJECT_CLASS,\n                innerHTML: (eventSubject + (locationEle ? ';&nbsp' + locationEle : ''))\n            });\n            const startTimeEle = createElement('div', {\n                className: APPOINTMENT_TIME + (this.parent.isAdaptive ? ' ' + DISABLE_CLASS : ''),\n                innerHTML: this.parent.getTimeString(eventObj[this.fields.startTime])\n            });\n            const endTimeEle = createElement('div', {\n                className: APPOINTMENT_TIME + (this.parent.isAdaptive ? ' ' + DISABLE_CLASS : ''),\n                innerHTML: this.parent.getTimeString(eventObj[this.fields.endTime])\n            });\n            addClass([subjectEle], 'e-text-center');\n            if (record[this.fields.isAllDay]) {\n                templateElement = [subjectEle];\n            }\n            else if (!eventObj.isLeft && !eventObj.isRight) {\n                templateElement = [startTimeEle, subjectEle, endTimeEle];\n            }\n            else {\n                if (!eventObj.isLeft) {\n                    templateElement.push(startTimeEle);\n                }\n                templateElement.push(subjectEle);\n                if (!eventObj.isRight) {\n                    templateElement.push(endTimeEle);\n                }\n            }\n        }\n        const appointmentDetails = createElement('div', { className: APPOINTMENT_DETAILS });\n        append(templateElement, appointmentDetails);\n        eventWrapper.appendChild(appointmentDetails);\n        this.renderResizeHandler(eventWrapper, record.data, record[this.fields.isReadonly]);\n        this.applyResourceColor(eventWrapper, eventObj, 'backgroundColor', this.groupOrder);\n        return eventWrapper;\n    }\n    isSpannedEvent(eventObj, monthDate) {\n        const monthStart = new Date(monthDate.getFullYear(), monthDate.getMonth(), 1);\n        const monthEnd = addDays(new Date(monthDate.getFullYear(), monthDate.getMonth() + 1, 0), 1);\n        const eventData = extend({}, eventObj, null, true);\n        const eventStart = eventData[this.fields.startTime];\n        const eventEnd = eventData[this.fields.endTime];\n        const isSpanned = { isLeft: false, isRight: false, count: 1 };\n        if (this.isResource) {\n            this.updateSpannedEvents(eventObj, monthStart, monthEnd);\n        }\n        if (eventStart.getTime() < monthStart.getTime()) {\n            eventData[this.fields.startTime] = monthStart;\n            isSpanned.isLeft = true;\n        }\n        if (eventEnd.getTime() > monthEnd.getTime()) {\n            eventData[this.fields.endTime] = monthEnd;\n            isSpanned.isRight = true;\n        }\n        if (this.parent.activeViewOptions.group.resources.length === 0) {\n            let end = resetTime(eventData[this.fields.endTime]).getTime();\n            const start = resetTime(eventData[this.fields.startTime]).getTime();\n            if (eventObj[this.fields.isAllDay] && end === eventObj[this.fields.endTime].getTime() || isSpanned.isRight) {\n                end = addDays(new Date(end), -1).getTime();\n            }\n            isSpanned.count = Math.ceil((end - start) / MS_PER_DAY) + 1;\n        }\n        eventData.isSpanned = isSpanned;\n        if (resetTime(eventStart).getTime() < resetTime(this.parent.minDate).getTime()) {\n            eventData[this.fields.startTime] = this.parent.minDate;\n        }\n        if (resetTime(eventEnd).getTime() > resetTime(this.parent.maxDate).getTime()) {\n            eventData[this.fields.endTime] = this.parent.maxDate;\n        }\n        return eventData;\n    }\n    getOverlapEvents(date, appointments) {\n        const appointmentsList = [];\n        let dateStart;\n        let dateEnd;\n        if (this.parent.activeViewOptions.group.resources.length > 0) {\n            const monthStart = this.parent.calendarUtil.getMonthStartDate(new Date(date.getTime()));\n            const monthEnd = addDays(this.parent.calendarUtil.getMonthEndDate(new Date(date.getTime())), -1);\n            dateStart = resetTime(new Date(monthStart.getTime())).getTime();\n            dateEnd = resetTime(new Date(monthEnd.getTime())).getTime();\n        }\n        else {\n            if (this.parent.rowAutoHeight) {\n                dateStart = resetTime(new Date(date.getTime())).getTime();\n                dateEnd = addDays(resetTime(new Date(date.getTime())), 1).getTime();\n            }\n            else {\n                dateStart = dateEnd = resetTime(new Date(date.getTime())).getTime();\n            }\n        }\n        for (const app of appointments) {\n            const appStart = new Date(app[this.fields.startTime].getTime());\n            const appEnd = new Date(app[this.fields.endTime].getTime());\n            if (this.parent.activeViewOptions.orientation === 'Vertical' &&\n                this.parent.activeViewOptions.group.resources.length > 0) {\n                if ((resetTime(appStart).getTime() >= dateStart) && (resetTime(appEnd).getTime() <= dateEnd)) {\n                    appointmentsList.push(app);\n                }\n            }\n            else {\n                if (((resetTime(appStart).getTime() <= dateStart) && (resetTime(appEnd).getTime() > dateStart)) ||\n                    (resetTime(appStart).getTime() >= dateStart) && (resetTime(appEnd).getTime() <= dateEnd)) {\n                    appointmentsList.push(app);\n                }\n            }\n        }\n        return appointmentsList;\n    }\n    getMonths() {\n        // eslint-disable-next-line prefer-spread\n        return Array.apply(null, { length: this.parent.monthsCount }).map((value, index) => this.parent.firstMonthOfYear + index);\n    }\n    removeCellHeight() {\n        const elementSelector = `.${MONTH_HEADER_WRAPPER} tbody tr,.${RESOURCE_COLUMN_TABLE_CLASS} tbody tr,.${CONTENT_TABLE_CLASS} tbody tr`;\n        const rows = [].slice.call(this.element.querySelectorAll(elementSelector));\n        for (const row of rows) {\n            row.firstElementChild.style.height = '';\n        }\n    }\n    destroy() {\n        super.destroy();\n        this.parent = null;\n    }\n}\n\n/* eslint-disable @typescript-eslint/no-explicit-any */\nconst MINUTES_PER_DAY = 1440;\n/**\n * Schedule events drag actions\n */\nclass DragAndDrop extends ActionBase {\n    constructor() {\n        super(...arguments);\n        this.widthUptoCursorPoint = 0;\n        this.heightUptoCursorPoint = 0;\n        this.cursorPointIndex = 0;\n        this.isHeaderRows = false;\n        this.isTimelineDayProcess = false;\n        this.widthPerMinute = 0;\n        this.heightPerMinute = 0;\n        this.minDiff = 0;\n        this.isStepDragging = false;\n        this.isMorePopupOpened = false;\n        this.isAllDayDrag = false;\n        this.isMultiSelect = false;\n        this.multiData = [];\n        this.updatedData = [];\n        this.swagData = [];\n        this.startTime = 0;\n        this.isAllDayTarget = false;\n        this.targetTd = null;\n        this.isCursorAhead = false;\n    }\n    wireDragEvent(element) {\n        new Draggable(element, {\n            abort: '.' + EVENT_RESIZE_CLASS,\n            clone: true,\n            isDragScroll: true,\n            enableTapHold: this.parent.isAdaptive,\n            enableTailMode: (this.parent.eventDragArea) ? true : false,\n            cursorAt: (this.parent.eventDragArea) ? { left: -20, top: -20 } : { left: 0, top: 0 },\n            dragArea: this.dragArea,\n            dragStart: this.dragStart.bind(this),\n            drag: this.drag.bind(this),\n            dragStop: this.dragStop.bind(this),\n            enableAutoScroll: false,\n            helper: this.dragHelper.bind(this),\n            queryPositionInfo: this.dragPosition.bind(this)\n        });\n    }\n    setDragArea() {\n        const dragElement = document.querySelector(this.parent.eventDragArea);\n        this.dragArea = this.parent.eventDragArea && dragElement ? dragElement :\n            this.parent.element.querySelector('.' + CONTENT_TABLE_CLASS);\n    }\n    dragHelper(e) {\n        this.setDragActionDefaultValues();\n        this.actionObj.element = e.element;\n        this.actionObj.action = 'drag';\n        let elements = [];\n        if (!this.parent.allowMultiDrag || isNullOrUndefined(this.parent.selectedElements) || this.parent.selectedElements.length === 0 ||\n            (this.parent.selectedElements.length > 0 && this.parent.selectedElements.indexOf(this.actionObj.element) === -1)) {\n            elements = [e.element];\n        }\n        else {\n            elements = this.parent.selectedElements;\n            this.isMultiSelect = true;\n        }\n        elements.forEach((ele) => {\n            const cloneElement = this.createCloneElement(ele);\n            if (ele.getAttribute('data-guid') === this.actionObj.element.getAttribute('data-guid')) {\n                this.actionObj.clone = cloneElement;\n                if (!this.parent.eventDragArea && this.parent.currentView !== 'Month' &&\n                    this.parent.activeViewOptions.timeScale.enable && !this.parent.activeView.isTimelineView() &&\n                    !this.actionObj.element.classList.contains(ALLDAY_APPOINTMENT_CLASS)) {\n                    setStyleAttribute(this.actionObj.clone, { cursor: 'move', left: '0%', right: '0%', width: '100%' });\n                }\n                this.actionObj.clone.style.top = formatUnit(this.actionObj.element.offsetTop);\n            }\n            this.actionObj.cloneElement.push(cloneElement);\n            this.actionObj.originalElement.push(ele);\n        });\n        return this.actionObj.clone;\n    }\n    dragPosition(e) {\n        if (this.parent.eventDragArea) {\n            return { left: e.left, top: e.top };\n        }\n        const cellHeight = (this.actionObj.cellHeight / this.actionObj.slotInterval) * this.actionObj.interval;\n        let leftValue = formatUnit(0);\n        if (this.parent.currentView === 'Month') {\n            leftValue = e.left;\n        }\n        let cloneRight;\n        if (this.isStepDragging) {\n            cloneRight = Math.ceil(this.actionObj.clone.getBoundingClientRect().right) + this.actionObj.interval;\n        }\n        else {\n            cloneRight = this.actionObj.clone.getBoundingClientRect().right;\n        }\n        const dragArea = this.parent.element.querySelector('.' + CONTENT_WRAP_CLASS);\n        const contentWrapRight = dragArea.getBoundingClientRect().right;\n        if (this.parent.activeView.isTimelineView() && this.parent.currentView !== 'TimelineYear' && !this.parent.enableRtl &&\n            this.actionObj.pageX > cloneRight && !this.isMorePopupOpened && !(this.actionObj.pageX > contentWrapRight)) {\n            this.isCursorAhead = true;\n        }\n        if (this.parent.activeView.isTimelineView()) {\n            leftValue = formatUnit(this.actionObj.clone.offsetLeft);\n        }\n        let topValue;\n        if ((this.parent.activeView.isTimelineView() || !this.parent.timeScale.enable ||\n            (!isNullOrUndefined(this.actionObj.clone.offsetParent) &&\n                this.actionObj.clone.offsetParent.classList.contains(MORE_EVENT_POPUP_CLASS)))) {\n            topValue = formatUnit(this.actionObj.clone.offsetTop);\n        }\n        else if (this.parent.currentView === 'Month') {\n            topValue = formatUnit(0);\n        }\n        else if (this.actionObj.clone.classList.contains(ALLDAY_APPOINTMENT_CLASS)) {\n            topValue = formatUnit(this.parent.element.querySelector('.' + ALLDAY_ROW_CLASS).offsetTop);\n            setStyleAttribute(this.actionObj.clone, {\n                width: formatUnit(Math.ceil(this.actionObj.clone.offsetWidth / this.actionObj.cellWidth) * this.actionObj.cellWidth),\n                right: this.parent.enableRtl && formatUnit(0)\n            });\n        }\n        else {\n            if (this.actionObj.element.classList.contains(ALLDAY_APPOINTMENT_CLASS) &&\n                !this.actionObj.clone.classList.contains(ALLDAY_APPOINTMENT_CLASS)) {\n                setStyleAttribute(this.actionObj.clone, {\n                    height: formatUnit(this.actionObj.cellHeight),\n                    width: formatUnit(this.actionObj.cellWidth - 1),\n                    pointerEvents: 'none'\n                });\n            }\n            let top = parseInt(e.top, 10);\n            top = top < 0 ? 0 : top;\n            topValue = formatUnit(Math.ceil(top / cellHeight) * cellHeight);\n            const scrollHeight = this.parent.element.querySelector('.e-content-wrap').scrollHeight;\n            const cloneBottom = parseInt(topValue, 10) + this.actionObj.clone.offsetHeight;\n            if (cloneBottom > scrollHeight) {\n                topValue = (parseInt(topValue, 10) - (cloneBottom - scrollHeight)) + 'px';\n            }\n        }\n        return { left: leftValue, top: topValue };\n    }\n    setDragActionDefaultValues() {\n        this.actionObj.action = 'drag';\n        this.actionObj.isAllDay = null;\n        this.actionObj.slotInterval = this.parent.activeViewOptions.timeScale.interval / this.parent.activeViewOptions.timeScale.slotCount;\n        this.actionObj.interval = this.actionObj.slotInterval;\n        const workCell = this.parent.element.querySelector('.' + WORK_CELLS_CLASS);\n        this.actionObj.cellWidth = workCell.offsetWidth;\n        this.actionObj.cellHeight = workCell.offsetHeight;\n    }\n    dragStart(e) {\n        const eventGuid = this.actionObj.element.getAttribute('data-guid');\n        this.actionObj.event = this.parent.eventBase.getEventByGuid(eventGuid);\n        const eventObj = extend({}, this.actionObj.event, null, true);\n        this.startTime = eventObj[this.parent.eventFields.startTime].getTime();\n        const dragArgs = {\n            cancel: false,\n            data: eventObj,\n            selectedData: this.getSelectedData(),\n            event: e,\n            excludeSelectors: null,\n            element: this.actionObj.element,\n            interval: this.actionObj.interval,\n            navigation: { enable: false, timeDelay: 2000 },\n            scroll: { enable: true, scrollBy: 30, timeDelay: 100 }\n        };\n        this.parent.trigger(dragStart, dragArgs, (dragEventArgs) => {\n            if (dragEventArgs.cancel || (!isNullOrUndefined(this.actionObj.element) &&\n                isNullOrUndefined(this.actionObj.element.parentElement))) {\n                const dragObj = this.actionObj.element.ej2_instances[0];\n                if (!isNullOrUndefined(dragObj)) {\n                    dragObj.intDestroy(e.event);\n                }\n                this.actionObj.action = '';\n                this.removeCloneElementClasses();\n                this.removeCloneElement();\n                return;\n            }\n            this.actionClass('addClass');\n            this.parent.uiStateValues.action = true;\n            this.actionObj.start = eventObj[this.parent.eventFields.startTime];\n            this.actionObj.end = eventObj[this.parent.eventFields.endTime];\n            this.actionObj.groupIndex = parseInt(this.actionObj.element.getAttribute('data-group-index') || '0', 10);\n            this.actionObj.interval = dragEventArgs.interval;\n            this.actionObj.navigation = dragEventArgs.navigation;\n            this.actionObj.scroll = dragEventArgs.scroll;\n            this.actionObj.excludeSelectors = dragEventArgs.excludeSelectors;\n            const viewElement = this.parent.element.querySelector('.' + CONTENT_WRAP_CLASS);\n            this.scrollArgs = { element: viewElement, width: viewElement.scrollWidth, height: viewElement.scrollHeight };\n            this.widthPerMinute = (this.actionObj.cellWidth / this.actionObj.slotInterval) * this.actionObj.interval;\n            this.heightPerMinute = (this.actionObj.cellHeight / this.actionObj.slotInterval) * this.actionObj.interval;\n            this.widthUptoCursorPoint = 0;\n            this.heightUptoCursorPoint = 0;\n            this.cursorPointIndex = -1;\n            this.isHeaderRows = false;\n            this.isTimelineDayProcess = false;\n            this.minDiff = 0;\n            this.isMorePopupOpened = false;\n            this.daysVariation = -1;\n            this.isAllDayTarget = this.actionObj.clone.classList.contains(ALLDAY_APPOINTMENT_CLASS);\n            if ((this.parent.activeView.isTimelineView() || !this.parent.timeScale.enable) && this.parent.currentView !== 'TimelineYear') {\n                if (!isNullOrUndefined(this.actionObj.clone.offsetParent) &&\n                    this.actionObj.clone.offsetParent.classList.contains(MORE_EVENT_POPUP_CLASS)) {\n                    this.isMorePopupOpened = true;\n                }\n                this.actionObj.pageX = e.event.pageX;\n                const rows = this.parent.activeViewOptions.headerRows;\n                this.isHeaderRows = rows.length > 0 && rows[rows.length - 1].option !== 'Hour' &&\n                    rows[rows.length - 1].option !== 'Date';\n                this.isTimelineDayProcess = !this.parent.activeViewOptions.timeScale.enable || this.isHeaderRows ||\n                    this.parent.currentView === 'TimelineMonth' || (rows.length > 0 && rows[rows.length - 1].option === 'Date');\n                this.isStepDragging = !this.isTimelineDayProcess && (this.actionObj.slotInterval !== this.actionObj.interval);\n                if (this.isTimelineDayProcess) {\n                    this.timelineEventModule = new TimelineEvent(this.parent, 'day');\n                }\n                else {\n                    this.timelineEventModule = new TimelineEvent(this.parent, 'hour');\n                }\n            }\n            if (this.parent.currentView === 'TimelineYear') {\n                this.yearEvent = new YearEvent(this.parent);\n            }\n            if (this.parent.currentView === 'Month') {\n                this.startTime = resetTime(new Date(this.startTime)).getTime();\n                this.updateOriginalElement(this.actionObj.clone);\n                this.monthEvent = new MonthEvent(this.parent);\n            }\n            if (this.parent.currentView === 'Day' || this.parent.currentView === 'Week' || this.parent.currentView === 'WorkWeek') {\n                this.verticalEvent = new VerticalEvent(this.parent);\n                this.verticalEvent.initializeValues();\n                const splitEvents = this.splitEvent(this.actionObj.event);\n                splitEvents.forEach((event) => {\n                    let query = `.e-day-wrapper[data-date=\"${resetTime(event[this.parent.eventFields.startTime]).getTime()}\"]`;\n                    if (this.parent.activeViewOptions.group.resources.length > 0) {\n                        query = query.concat('[data-group-index = \"' + this.actionObj.groupIndex + '\"]');\n                    }\n                    const appWrap = this.parent.element.querySelector(query);\n                    if (appWrap) {\n                        const appEle = appWrap.querySelector('[data-id=\"' + this.actionObj.clone.getAttribute('data-id') + '\"]');\n                        if (appEle) {\n                            addClass([appEle], EVENT_ACTION_CLASS);\n                        }\n                    }\n                });\n            }\n        });\n    }\n    getSelectedData() {\n        if (this.isMultiSelect && this.multiData.length === 0 && this.parent.selectedElements.length > 0) {\n            for (const element of this.parent.selectedElements) {\n                const eventGuid = element.getAttribute('data-guid');\n                const data = this.parent.eventBase.getEventByGuid(eventGuid);\n                this.multiData.push(extend({}, data, null, true));\n            }\n        }\n        return this.multiData;\n    }\n    drag(e) {\n        if (this.parent.quickPopup) {\n            this.parent.quickPopup.quickPopupHide(true);\n        }\n        if ((!isNullOrUndefined(e.target)) && e.target.classList.contains(DISABLE_DATES)) {\n            return;\n        }\n        const eventObj = extend({}, this.actionObj.event, null, true);\n        const eventArgs = this.getPageCoordinates(e);\n        this.actionObj.Y = this.actionObj.pageY = eventArgs.pageY;\n        this.actionObj.X = this.actionObj.pageX = eventArgs.pageX;\n        this.actionObj.target = e.target;\n        this.widthUptoCursorPoint = (this.widthUptoCursorPoint === 0) ?\n            Math.ceil((Math.abs(this.actionObj.clone.getBoundingClientRect().left - this.actionObj.X) / this.widthPerMinute)) *\n                this.widthPerMinute : this.widthUptoCursorPoint;\n        this.widthUptoCursorPoint = this.isMorePopupOpened ? this.actionObj.cellWidth : this.widthUptoCursorPoint;\n        this.heightUptoCursorPoint = (this.heightUptoCursorPoint === 0) ?\n            Math.ceil((Math.abs(this.actionObj.clone.getBoundingClientRect().top - this.actionObj.Y) / this.heightPerMinute)) *\n                this.heightPerMinute : this.heightUptoCursorPoint;\n        this.isAllDayDrag = (this.parent.activeViewOptions.timeScale.enable) ?\n            this.actionObj.clone.classList.contains(ALLDAY_APPOINTMENT_CLASS) :\n            this.actionObj.event[this.parent.eventFields.isAllDay];\n        if (this.isStepDragging && this.minDiff === 0) {\n            this.calculateMinutesDiff(eventObj);\n        }\n        if ((this.parent.currentView === 'Month' || this.isAllDayDrag) && this.daysVariation < 0) {\n            const date = this.parent.getDateFromElement(this.actionObj.target);\n            if (!isNullOrUndefined(date)) {\n                const currentDate = resetTime(date);\n                const startDate = resetTime(new Date(eventObj[this.parent.eventFields.startTime].getTime()));\n                this.daysVariation = (currentDate.getTime() - startDate.getTime()) / MS_PER_DAY;\n            }\n            else {\n                this.daysVariation = 0;\n            }\n        }\n        else {\n            this.daysVariation = 0;\n        }\n        if (this.parent.eventDragArea) {\n            const targetElement = eventArgs.target;\n            this.actionObj.clone.style.top = formatUnit(targetElement.offsetTop);\n            this.actionObj.clone.style.left = formatUnit(targetElement.offsetLeft);\n            const currentTarget = closest(targetElement, '.' + ROOT);\n            if (!currentTarget) {\n                this.actionObj.clone.style.height = '';\n                this.actionObj.clone.style.width = '';\n            }\n            else {\n                if (!(this.parent.currentView === 'Week' || this.parent.currentView === 'WorkWeek' || this.parent.currentView === 'Day')) {\n                    this.actionObj.clone.style.width = formatUnit(this.actionObj.element.offsetWidth);\n                }\n            }\n        }\n        this.updateScrollPosition(e);\n        this.updateNavigatingPosition(e);\n        this.updateDraggingDateTime(e);\n        const dragArgs = {\n            data: eventObj, event: e, element: this.actionObj.element, startTime: this.actionObj.start,\n            endTime: this.actionObj.end, selectedData: this.updatedData\n        };\n        if (this.parent.group.resources.length > 0) {\n            dragArgs.groupIndex = this.actionObj.groupIndex;\n        }\n        this.parent.trigger(drag, dragArgs);\n    }\n    calculateMinutesDiff(eventObj) {\n        if (this.parent.enableRtl) {\n            this.minDiff =\n                ((this.actionObj.clone.offsetWidth - this.widthUptoCursorPoint) / this.widthPerMinute) * this.actionObj.interval;\n        }\n        else {\n            this.minDiff = (this.widthUptoCursorPoint / this.widthPerMinute) * this.actionObj.interval;\n        }\n        const startDate = eventObj[this.parent.eventFields.startTime];\n        const startTime = this.parent.activeView.renderDates[0];\n        const startEndHours = getStartEndHours(startTime, this.parent.activeView.getStartHour(), this.parent.activeView.getEndHour());\n        if (startEndHours.startHour.getTime() > startDate.getTime()) {\n            this.minDiff = this.minDiff + ((startEndHours.startHour.getTime() - startDate.getTime()) / MS_PER_MINUTE);\n        }\n    }\n    dragStop(e) {\n        this.isCursorAhead = false;\n        this.removeCloneElementClasses();\n        this.removeCloneElement();\n        clearInterval(this.actionObj.navigationInterval);\n        this.actionObj.navigationInterval = null;\n        clearInterval(this.actionObj.scrollInterval);\n        this.actionObj.scrollInterval = null;\n        this.actionClass('removeClass');\n        this.parent.uiStateValues.action = false;\n        this.actionObj.action = null;\n        if (this.isAllowDrop(e)) {\n            return;\n        }\n        const target = ((!e.target.classList.contains('e-work-cells') && this.parent.cellTemplate) ?\n            closest(e.target, '.e-work-cells') : e.target);\n        const dragArgs = {\n            cancel: false, data: this.getChangedData(this.updatedData), selectedData: this.updatedData,\n            event: e, element: this.actionObj.element, target: target\n        };\n        this.parent.trigger(dragStop, dragArgs, (dragEventArgs) => {\n            if (dragEventArgs.cancel) {\n                return;\n            }\n            if (this.parent.activeViewOptions.group.resources.length > 0 && !this.parent.activeViewOptions.group.allowGroupEdit\n                && !this.parent.rowAutoHeight && !this.parent.virtualScrollModule && this.parent.activeViewOptions.group.byGroupID) {\n                this.parent.crudModule.crudObj.isCrudAction = true;\n                this.parent.crudModule.crudObj.sourceEvent =\n                    [this.parent.resourceBase.lastResourceLevel[parseInt(dragArgs.element.getAttribute('data-group-index'), 10)]];\n                const currentGroupIndex = parseInt(dragArgs.target.getAttribute('data-group-index'), 10) || this.actionObj.groupIndex;\n                this.parent.crudModule.crudObj.targetEvent = [this.parent.resourceBase.lastResourceLevel[currentGroupIndex]];\n            }\n            this.saveChangedData(dragEventArgs, this.isMultiSelect);\n        });\n        this.updatedData = [];\n        this.multiData = [];\n        this.isMultiSelect = false;\n        this.parent.selectedElements = [];\n    }\n    updateNavigatingPosition(e) {\n        if (this.actionObj.navigation.enable) {\n            let currentDate = this.parent.getCurrentTime();\n            if (isNullOrUndefined(this.actionObj.navigationInterval)) {\n                this.actionObj.navigationInterval = window.setInterval(() => {\n                    if (currentDate) {\n                        const crtDate = this.parent.getCurrentTime();\n                        const end = crtDate.getSeconds();\n                        let start = currentDate.getSeconds() + (this.actionObj.navigation.timeDelay / 1000);\n                        start = (start >= 60) ? start - 60 : start;\n                        if (start === end) {\n                            currentDate = this.parent.getCurrentTime();\n                            this.viewNavigation(e);\n                            this.updateDraggingDateTime(e);\n                        }\n                    }\n                }, this.actionObj.navigation.timeDelay);\n            }\n        }\n    }\n    updateDraggingDateTime(e) {\n        if (!isNullOrUndefined(this.actionObj.clone.offsetParent) &&\n            this.actionObj.clone.offsetParent.classList.contains(MORE_EVENT_POPUP_CLASS)) {\n            this.morePopupEventDragging(e);\n        }\n        else if (this.parent.activeView.isTimelineView() && this.parent.currentView !== 'TimelineYear') {\n            this.timelineEventModule.dateRender = this.parent.activeView.renderDates;\n            this.timelineEventModule.cellWidth = this.actionObj.cellWidth;\n            this.timelineEventModule.getSlotDates();\n            this.actionObj.cellWidth = this.isHeaderRows ? this.timelineEventModule.cellWidth : this.actionObj.cellWidth;\n            this.calculateTimelineTime(e);\n        }\n        else {\n            if (this.parent.currentView === 'Month' || this.parent.currentView === 'TimelineYear') {\n                this.calculateVerticalDate(e);\n            }\n            else {\n                this.calculateVerticalTime(e);\n            }\n        }\n    }\n    navigationWrapper() {\n        if (!this.parent.activeView.isTimelineView()) {\n            if (this.parent.currentView === 'Month' || !this.parent.timeScale.enable) {\n                const outerWrapperCls = [].slice.call(this.parent.element.querySelectorAll('.' + WORK_CELLS_CLASS));\n                this.actionObj.index = (this.parent.activeView.renderDates.length < this.actionObj.index) ?\n                    this.parent.activeView.renderDates.length - 1 : this.actionObj.index;\n                let targetWrapper = outerWrapperCls[this.actionObj.index].querySelector('.' + APPOINTMENT_WRAPPER_CLASS);\n                if (!targetWrapper) {\n                    targetWrapper = createElement('div', { className: APPOINTMENT_WRAPPER_CLASS });\n                    outerWrapperCls[this.actionObj.index].appendChild(targetWrapper);\n                }\n                targetWrapper.appendChild(this.actionObj.clone);\n            }\n            else {\n                const wrapperClass = this.actionObj.clone.classList.contains(ALLDAY_APPOINTMENT_CLASS) ?\n                    '.' + ALLDAY_APPOINTMENT_WRAPPER_CLASS : '.' + APPOINTMENT_WRAPPER_CLASS;\n                this.parent.element.querySelectorAll(wrapperClass)\n                    .item(this.actionObj.index).appendChild(this.actionObj.clone);\n                if (wrapperClass === '.' + ALLDAY_APPOINTMENT_WRAPPER_CLASS) {\n                    const elementHeight = this.getAllDayEventHeight();\n                    const event = [].slice.call(this.parent.element.querySelectorAll('.' + ALLDAY_CELLS_CLASS + ':first-child'));\n                    if (event[0].offsetHeight < elementHeight) {\n                        for (const e of event) {\n                            e.style.height = ((elementHeight + 2) / 12) + 'em';\n                        }\n                    }\n                    this.actionObj.clone.style.height = formatUnit(elementHeight);\n                }\n                this.actionObj.height = parseInt(this.actionObj.clone.style.height, 10);\n            }\n        }\n        else {\n            let outWrapper;\n            if (this.parent.activeViewOptions.group.resources.length > 0) {\n                outWrapper = this.parent.element.querySelectorAll('.e-appointment-container:not(.e-hidden)').item(this.actionObj.index);\n            }\n            else {\n                outWrapper = this.parent.element.querySelector('.' + APPOINTMENT_CONTAINER_CLASS);\n            }\n            let tarWrapper = outWrapper.querySelector('.' + APPOINTMENT_WRAPPER_CLASS);\n            if (!tarWrapper) {\n                tarWrapper = createElement('div', { className: APPOINTMENT_WRAPPER_CLASS });\n                outWrapper.appendChild(tarWrapper);\n            }\n            this.actionObj.cloneElement.forEach((ele) => {\n                tarWrapper.appendChild(ele);\n            });\n        }\n    }\n    // eslint-disable-next-line @typescript-eslint/no-unused-vars\n    viewNavigation(e) {\n        let navigationType;\n        const dragArea = this.parent.element.querySelector('.' + CONTENT_WRAP_CLASS);\n        if (dragArea && ((!this.scrollEdges.top && !this.scrollEdges.bottom) ||\n            closest(this.actionObj.clone, '.' + ALLDAY_APPOINTMENT_WRAPPER_CLASS))) {\n            if ((dragArea.scrollLeft === 0) &&\n                (Math.round(this.actionObj.X) <=\n                    Math.round(dragArea.getBoundingClientRect().left + this.actionObj.cellWidth + window.pageXOffset))) {\n                navigationType = this.parent.enableRtl ? 'next' : 'previous';\n            }\n            else if ((Math.round(dragArea.scrollLeft) + dragArea.clientWidth === dragArea.scrollWidth) &&\n                (Math.round(this.actionObj.X) >=\n                    Math.round(dragArea.getBoundingClientRect().right - this.actionObj.cellWidth + window.pageXOffset))) {\n                navigationType = this.parent.enableRtl ? 'previous' : 'next';\n            }\n            if (navigationType) {\n                this.parent.changeDate(this.parent.activeView.getNextPreviousDate(navigationType));\n            }\n        }\n    }\n    morePopupEventDragging(e) {\n        if (isNullOrUndefined(e.target) || (e.target && isNullOrUndefined(closest(e.target, 'td')))) {\n            return;\n        }\n        const eventObj = extend({}, this.actionObj.event, null, true);\n        const eventDuration = eventObj[this.parent.eventFields.endTime].getTime() -\n            eventObj[this.parent.eventFields.startTime].getTime();\n        const td = closest(e.target, 'td');\n        if (this.parent.currentView === 'TimelineYear' && !td.classList.contains('e-work-cells')) {\n            return;\n        }\n        const dragStart$$1 = this.parent.getDateFromElement(td);\n        const dragEnd = new Date(dragStart$$1.getTime());\n        dragEnd.setMilliseconds(eventDuration);\n        if (this.parent.activeViewOptions.group.resources.length > 0) {\n            this.actionObj.groupIndex = parseInt(td.getAttribute('data-group-index'), 10);\n        }\n        this.actionObj.start = new Date(dragStart$$1.getTime());\n        this.actionObj.end = new Date(dragEnd.getTime());\n        this.actionObj.clone.style.top = formatUnit(td.offsetParent.offsetTop);\n        this.actionObj.clone.style.left = formatUnit(td.offsetLeft);\n        this.actionObj.clone.style.width = formatUnit(td.offsetWidth);\n        let eventContainer = td;\n        let eventWrapper;\n        if (this.parent.activeView.isTimelineView()) {\n            const rowIndex = closest(td, 'tr').rowIndex;\n            eventContainer = this.parent.element.querySelectorAll('.e-appointment-container').item(rowIndex);\n        }\n        eventWrapper = eventContainer.querySelector('.' + APPOINTMENT_WRAPPER_CLASS);\n        if (!eventWrapper) {\n            eventWrapper = createElement('div', { className: APPOINTMENT_WRAPPER_CLASS });\n            eventContainer.appendChild(eventWrapper);\n        }\n        this.appendCloneElement(eventWrapper);\n    }\n    calculateVerticalTime(e) {\n        if (isNullOrUndefined(this.actionObj.target) ||\n            (this.actionObj.target && isNullOrUndefined(closest(this.actionObj.target, 'tr'))) ||\n            (!(closest(this.actionObj.target, 'td').classList.contains(WORK_CELLS_CLASS)) &&\n                !(closest(this.actionObj.target, 'td').classList.contains(ALLDAY_CELLS_CLASS)))) {\n            return;\n        }\n        if (this.parent.activeViewOptions.timeScale.enable) {\n            this.swapDragging(e);\n        }\n        const dragArea = this.parent.element.querySelector('.' + CONTENT_WRAP_CLASS);\n        const eventObj = extend({}, this.actionObj.event, null, true);\n        const eventStart = eventObj[this.parent.eventFields.startTime];\n        const eventEnd = eventObj[this.parent.eventFields.endTime];\n        const eventDuration = eventEnd.getTime() - eventStart.getTime();\n        let offsetTop = Math.floor(parseInt(this.actionObj.clone.style.top, 10) / this.actionObj.cellHeight)\n            * this.actionObj.cellHeight;\n        offsetTop = offsetTop < 0 ? 0 : offsetTop;\n        if (this.scrollEdges.top || this.scrollEdges.bottom) {\n            offsetTop = this.scrollEdges.top ? dragArea.scrollTop - this.heightUptoCursorPoint +\n                this.actionObj.cellHeight + window.pageYOffset :\n                (dragArea.scrollTop + dragArea.offsetHeight - this.actionObj.clone.offsetHeight + window.pageYOffset) +\n                    (this.actionObj.clone.offsetHeight - this.heightUptoCursorPoint);\n            offsetTop = Math.round(offsetTop / this.actionObj.cellHeight) * this.actionObj.cellHeight;\n            this.actionObj.clone.style.top = formatUnit(offsetTop);\n        }\n        const rowIndex = (this.parent.activeViewOptions.timeScale.enable) ? (offsetTop / this.actionObj.cellHeight) : 0;\n        const heightPerMinute = this.actionObj.cellHeight / this.actionObj.slotInterval;\n        const diffInMinutes = parseInt(this.actionObj.clone.style.top, 10) - offsetTop;\n        let tr;\n        if (this.isAllDayDrag) {\n            tr = this.parent.element.querySelector('.' + ALLDAY_ROW_CLASS);\n        }\n        else {\n            const trCollections = [].slice.call(this.parent.getContentTable().querySelectorAll('tr'));\n            tr = trCollections[rowIndex];\n        }\n        let index;\n        if (closest(this.actionObj.target, 'td').classList.contains(WORK_CELLS_CLASS) ||\n            closest(this.actionObj.target, 'td').classList.contains(ALLDAY_CELLS_CLASS)) {\n            index = closest(this.actionObj.target, 'td').cellIndex;\n        }\n        const colIndex = isNullOrUndefined(index) ? closest(this.actionObj.clone, 'td').cellIndex : index;\n        this.actionObj.index = colIndex;\n        if (isNullOrUndefined(tr)) {\n            return;\n        }\n        const td = tr.children[colIndex];\n        if (this.parent.activeViewOptions.group.resources.length > 0) {\n            this.actionObj.groupIndex = parseInt(td.getAttribute('data-group-index'), 10);\n        }\n        let dragStart$$1;\n        let dragEnd;\n        if (this.parent.activeViewOptions.timeScale.enable && !this.isAllDayDrag) {\n            this.appendCloneElement(this.getEventWrapper(colIndex));\n            dragStart$$1 = this.parent.getDateFromElement(td);\n            dragStart$$1.setMinutes(dragStart$$1.getMinutes() + (diffInMinutes / heightPerMinute));\n            dragEnd = new Date(dragStart$$1.getTime());\n            if (this.actionObj.element.classList.contains(ALLDAY_APPOINTMENT_CLASS)) {\n                dragEnd.setMinutes(dragEnd.getMinutes() + this.actionObj.slotInterval);\n            }\n            else {\n                dragEnd.setMilliseconds(eventDuration);\n            }\n        }\n        else {\n            dragStart$$1 = this.parent.getDateFromElement(td);\n            dragStart$$1.setDate(dragStart$$1.getDate() - this.daysVariation);\n            dragStart$$1.setHours(eventStart.getHours(), eventStart.getMinutes(), eventStart.getSeconds());\n            dragEnd = new Date(dragStart$$1.getTime());\n            dragEnd.setMilliseconds(eventDuration);\n            if (!this.actionObj.element.classList.contains(ALLDAY_APPOINTMENT_CLASS) &&\n                this.actionObj.clone.classList.contains(ALLDAY_APPOINTMENT_CLASS)) {\n                dragEnd = addDays(resetTime(dragEnd), 1);\n            }\n            this.updateAllDayEvents(dragStart$$1, dragEnd, this.parent.activeViewOptions.group.byDate ? colIndex : undefined);\n        }\n        this.actionObj.start = new Date(+dragStart$$1);\n        this.actionObj.end = new Date(+dragEnd);\n        const event = this.getUpdatedEvent(this.actionObj.start, this.actionObj.end, this.actionObj.event);\n        const dynamicWrappers = [].slice.call(this.parent.element.querySelectorAll('.e-dynamic-clone'));\n        for (const wrapper of dynamicWrappers) {\n            remove(wrapper);\n        }\n        if (this.multiData.length > 0) {\n            if (this.isAllDayTarget && this.isAllDayDrag && !isNullOrUndefined(this.actionObj.isAllDay) && !this.actionObj.isAllDay) {\n                const targetCellTime = parseInt((closest(this.actionObj.target, 'td')).getAttribute('data-date'), 10);\n                this.multiData.forEach((data) => {\n                    this.swagData.push(extend({}, data, null, true));\n                    if (data[this.parent.eventFields.isAllDay]) {\n                        data[this.parent.eventFields.startTime] =\n                            new Date(data[this.parent.eventFields.startTime].getTime() + (targetCellTime - this.startTime));\n                        const startTime = new Date(data[this.parent.eventFields.startTime]);\n                        const endTime = new Date(startTime.setMinutes(startTime.getMinutes() + this.actionObj.slotInterval));\n                        data[this.parent.eventFields.endTime] = endTime;\n                        data[this.parent.eventFields.isAllDay] = false;\n                    }\n                });\n                this.startTime = targetCellTime;\n            }\n            if (this.isAllDayTarget && this.isAllDayDrag &&\n                !isNullOrUndefined(this.actionObj.isAllDay) && this.actionObj.isAllDay && this.swagData.length > 0) {\n                this.multiData = this.swagData;\n                this.swagData = [];\n                const eventObj = extend({}, this.actionObj.event, null, true);\n                this.startTime = eventObj[this.parent.eventFields.startTime].getTime();\n            }\n            const startTimeDiff = event[this.parent.eventFields.startTime].getTime() - this.startTime;\n            for (let index = 0; index < this.multiData.length; index++) {\n                this.updatedData[index] = this.updateMultipleData(this.multiData[index], startTimeDiff);\n                const dayIndex = this.getDayIndex(this.updatedData[index]);\n                if (dayIndex >= 0) {\n                    const wrapper = this.getEventWrapper(dayIndex, this.updatedData[index][this.parent.eventFields.isAllDay]);\n                    this.appendCloneElement(wrapper, this.actionObj.cloneElement[index]);\n                    this.updateEventHeight(this.updatedData[index], index, dayIndex);\n                }\n                else {\n                    if (!isNullOrUndefined(this.actionObj.cloneElement[index].parentNode)) {\n                        remove(this.actionObj.cloneElement[index]);\n                    }\n                }\n            }\n        }\n        else {\n            this.updateEventHeight(event);\n        }\n        this.updateTimePosition(this.actionObj.start, this.updatedData);\n    }\n    splitEvent(event) {\n        const eventFields = this.parent.eventFields;\n        const eventData = [];\n        const startTime = event[eventFields.startTime];\n        const endTime = event[eventFields.endTime];\n        if (resetTime(new Date(startTime.getTime())) < resetTime(new Date(endTime.getTime()))) {\n            let startReferenceDate = resetTime(new Date(startTime.getTime()));\n            let endReferenceDate = new Date(startReferenceDate.getTime());\n            for (let i = 0; startReferenceDate < new Date(endTime.getTime()); i++) {\n                endReferenceDate = new Date(endReferenceDate.setDate(startReferenceDate.getDate() + 1));\n                const eventObj = extend({}, event, null, true);\n                eventObj[eventFields.startTime] = new Date(startReferenceDate);\n                eventObj[eventFields.endTime] = new Date(endReferenceDate);\n                startReferenceDate = new Date(startReferenceDate.setDate(startReferenceDate.getDate() + 1));\n                eventData.push(eventObj);\n            }\n            const index = eventData.length - 1;\n            eventData[0][eventFields.startTime] = startTime;\n            eventData[index][eventFields.endTime] = endTime;\n        }\n        else {\n            eventData.push(event);\n        }\n        return eventData;\n    }\n    updateMultipleData(data, timeDifference) {\n        const eventObj = extend({}, data, null, true);\n        if (!isNullOrUndefined(this.actionObj.isAllDay) && this.parent.activeViewOptions.timeScale.enable &&\n            ((this.isAllDayTarget && eventObj[this.parent.eventFields.isAllDay]) ||\n                (!this.isAllDayTarget && !eventObj[this.parent.eventFields.isAllDay]))) {\n            eventObj[this.parent.eventFields.isAllDay] = this.actionObj.isAllDay;\n        }\n        const endTimeDiff = eventObj[this.parent.eventFields.endTime].getTime() -\n            eventObj[this.parent.eventFields.startTime].getTime();\n        if (eventObj[this.parent.eventFields.isAllDay]) {\n            const differInDays = Math.ceil(timeDifference / (1000 * 3600 * 24));\n            const day = Math.ceil(endTimeDiff / (1000 * 3600 * 24));\n            const startTime = new Date(eventObj[this.parent.eventFields.startTime]);\n            eventObj[this.parent.eventFields.startTime] = resetTime(new Date(startTime.setDate(startTime.getDate() + differInDays)));\n            eventObj[this.parent.eventFields.endTime] = addDays(eventObj[this.parent.eventFields.startTime], day);\n        }\n        else {\n            eventObj[this.parent.eventFields.startTime] =\n                new Date(eventObj[this.parent.eventFields.startTime].getTime() + timeDifference);\n            eventObj[this.parent.eventFields.endTime] =\n                new Date(eventObj[this.parent.eventFields.startTime].getTime() + endTimeDiff);\n        }\n        return eventObj;\n    }\n    getDayIndex(event) {\n        const eventObj = extend({}, event, null, true);\n        const startTime = resetTime(eventObj[this.parent.eventFields.startTime]).getTime();\n        let query = '';\n        let wrapper = DAY_WRAPPER_CLASS;\n        if (this.parent.activeViewOptions.timeScale.enable && (eventObj[this.parent.eventFields.isAllDay])) {\n            wrapper = ALLDAY_APPOINTMENT_WRAPPER_CLASS;\n        }\n        else {\n            wrapper = WORK_CELLS_CLASS;\n        }\n        query = '.' + wrapper + '[data-date=\"' + startTime + '\"]';\n        if (this.parent.activeViewOptions.group.resources.length > 0) {\n            query = query + '[data-group-index=\"' + this.actionObj.groupIndex + '\"]';\n        }\n        this.targetTd = this.parent.element.querySelector(query);\n        if (isNullOrUndefined(this.targetTd)) {\n            return -1;\n        }\n        return this.targetTd.cellIndex;\n    }\n    updateEventHeight(event, index, colIndex) {\n        this.verticalEvent.initializeValues();\n        let datesCount = 0;\n        if (!this.parent.uiStateValues.isGroupAdaptive) {\n            for (let i = 0; i < this.actionObj.groupIndex; i++) {\n                datesCount = datesCount + this.verticalEvent.dateRender[i].length;\n            }\n        }\n        const indexGroup = this.parent.uiStateValues.isGroupAdaptive ? datesCount : this.actionObj.groupIndex;\n        const target = (this.parent.activeViewOptions.group.byDate &&\n            !isNullOrUndefined(this.parent.getDateFromElement(this.actionObj.target))) ? true : false;\n        if (target || !this.parent.activeViewOptions.group.byDate) {\n            let dynamicIndex = -1;\n            let dayIndex = !this.parent.activeViewOptions.group.byDate ?\n                isNullOrUndefined(index) ? this.actionObj.index - datesCount : colIndex - datesCount\n                : this.parent.getIndexOfDate(this.verticalEvent.dateRender[indexGroup], resetTime(\n                // eslint-disable-next-line max-len\n                this.parent.getDateFromElement(isNullOrUndefined(index) ? this.actionObj.target : this.targetTd)));\n            const splitEvents = this.splitEvent(event);\n            const events = this.parent.eventBase.isAllDayAppointment(event) || splitEvents.length > 2 ||\n                this.parent.eventSettings.spannedEventPlacement !== 'TimeSlot' ? [event] : splitEvents;\n            for (let i = 0; i < events.length; i++) {\n                if (i > 0) {\n                    let filterQuery = `.e-day-wrapper[data-date=\"${resetTime(events[i][this.parent.eventFields.startTime]).getTime()}\"]`;\n                    if (this.parent.activeViewOptions.group.resources.length > 0) {\n                        filterQuery = filterQuery.concat('[data-group-index = \"' + this.actionObj.groupIndex + '\"]');\n                    }\n                    const appWrap = this.parent.element.querySelector(filterQuery);\n                    if (appWrap) {\n                        dayIndex = dayIndex + 1;\n                        dynamicIndex = appWrap.cellIndex;\n                    }\n                    else {\n                        dayIndex = -1;\n                    }\n                }\n                if (dayIndex >= 0) {\n                    const record = this.verticalEvent.isSpannedEvent(events[i], dayIndex, indexGroup);\n                    const eStart = record[this.verticalEvent.fields.startTime];\n                    const eEnd = record[this.verticalEvent.fields.endTime];\n                    let appHeight = this.parent.activeViewOptions.timeScale.enable ? this.verticalEvent.getHeight(eStart, eEnd) :\n                        this.actionObj.element.offsetHeight;\n                    let topValue = this.parent.activeViewOptions.timeScale.enable ?\n                        this.verticalEvent.getTopValue(eStart, dayIndex, indexGroup) : this.actionObj.element.offsetTop;\n                    if (isNullOrUndefined(index)) {\n                        if (i === 0) {\n                            this.actionObj.clone.style.top = formatUnit(topValue);\n                            this.actionObj.clone.style.height = formatUnit(appHeight);\n                        }\n                        else {\n                            this.renderSpannedEvents(record, dynamicIndex, topValue, appHeight);\n                        }\n                    }\n                    else {\n                        let appWidth = this.actionObj.cellWidth;\n                        if (event[this.parent.eventFields.isAllDay]) {\n                            topValue = this.parent.element.querySelector('.' + ALLDAY_ROW_CLASS).offsetTop;\n                            appHeight = this.getAllDayEventHeight();\n                            const timeDiff = event[this.parent.eventFields.endTime].getTime() -\n                                event[this.parent.eventFields.startTime].getTime();\n                            const allDayDifference = Math.ceil(timeDiff / (1000 * 3600 * 24));\n                            if (allDayDifference >= 0) {\n                                appWidth = (allDayDifference * this.actionObj.cellWidth);\n                            }\n                        }\n                        if (this.actionObj.cloneElement[index]) {\n                            if (i === 0) {\n                                this.actionObj.cloneElement[index].style.top = formatUnit(topValue);\n                                this.actionObj.cloneElement[index].style.height = formatUnit(appHeight);\n                                this.actionObj.cloneElement[index].style.width = formatUnit(appWidth);\n                                this.actionObj.cloneElement[index].style.left = formatUnit(0);\n                            }\n                            else {\n                                this.renderSpannedEvents(record, dynamicIndex, topValue, appHeight);\n                            }\n                        }\n                    }\n                }\n            }\n        }\n    }\n    renderSpannedEvents(record, index, top, height) {\n        const startTime = record[this.parent.eventFields.startTime].getTime();\n        const endTime = record[this.parent.eventFields.endTime].getTime();\n        if (startTime !== endTime) {\n            const appointmentElement = this.verticalEvent.\n                createAppointmentElement(record, false, record.isSpanned, this.actionObj.groupIndex);\n            addClass([appointmentElement], [CLONE_ELEMENT_CLASS, 'e-dynamic-clone']);\n            setStyleAttribute(appointmentElement, {\n                'width': '100%',\n                'height': height + 'px',\n                'top': top + 'px',\n                'border': '0px'\n            });\n            const appointmentWrap = [].slice.call(this.parent.element.querySelectorAll('.' + APPOINTMENT_WRAPPER_CLASS));\n            appointmentWrap[index].appendChild(appointmentElement);\n        }\n    }\n    getRenderedDates() {\n        let renderDates = this.parent.activeView.renderDates;\n        this.parent.eventBase.slots.push(...this.parent.activeView.renderDates.map((date) => +date));\n        if (this.parent.activeViewOptions.group.resources.length > 0) {\n            this.parent.eventBase.slots = [];\n            const resources = this.parent.resourceBase.lastResourceLevel.\n                filter((res) => res.groupIndex === this.actionObj.groupIndex);\n            renderDates = resources[0].renderDates;\n            this.parent.eventBase.slots.push(...renderDates.map((date) => +date));\n        }\n        return renderDates;\n    }\n    updateAllDayEvents(startDate, endDate, colIndex) {\n        this.parent.eventBase.slots = [];\n        const event = this.getUpdatedEvent(startDate, endDate, this.actionObj.event);\n        const renderDates = this.getRenderedDates();\n        const events = this.parent.eventBase.splitEvent(event, renderDates);\n        let query = `.e-all-day-cells[data-date=\"${events[0][this.parent.eventFields.startTime].getTime()}\"]`;\n        if (this.parent.activeViewOptions.group.resources.length > 0) {\n            query = query.concat('[data-group-index = \"' + this.actionObj.groupIndex + '\"]');\n        }\n        const cell = [].slice.call(this.parent.element.querySelectorAll(query));\n        if (cell.length > 0 || !isNullOrUndefined(colIndex)) {\n            const cellIndex = !isNullOrUndefined(colIndex) ? colIndex : cell[0].cellIndex;\n            this.appendCloneElement(this.getEventWrapper(cellIndex));\n            // eslint-disable-next-line max-len\n            this.actionObj.clone.style.width = formatUnit(events[0].data.count * this.actionObj.cellWidth);\n        }\n    }\n    // eslint-disable-next-line @typescript-eslint/no-unused-vars\n    swapDragging(e) {\n        const colIndex = closest(this.actionObj.target, 'td').cellIndex;\n        if (closest(this.actionObj.target, '.' + DATE_HEADER_WRAP_CLASS) &&\n            !closest(this.actionObj.clone, '.' + ALLDAY_APPOINTMENT_WRAPPER_CLASS)) {\n            addClass([this.actionObj.clone], ALLDAY_APPOINTMENT_CLASS);\n            this.appendCloneElement(this.getEventWrapper(colIndex));\n            this.actionObj.isAllDay = true;\n            const eventHeight = this.getAllDayEventHeight();\n            const allDayElement = [].slice.call(this.parent.element.querySelectorAll('.' + ALLDAY_CELLS_CLASS + ':first-child'));\n            if (allDayElement[0].offsetHeight < eventHeight) {\n                for (const element of allDayElement) {\n                    element.style.height = ((eventHeight + 2) / 12) + 'em';\n                }\n            }\n            setStyleAttribute(this.actionObj.clone, {\n                width: formatUnit(this.actionObj.cellWidth),\n                height: formatUnit(eventHeight),\n                top: formatUnit(this.parent.element.querySelector('.' + ALLDAY_ROW_CLASS).offsetTop)\n            });\n        }\n        if (closest(this.actionObj.target, '.' + WORK_CELLS_CLASS) &&\n            !closest(this.actionObj.clone, '.' + DAY_WRAPPER_CLASS)) {\n            removeClass([this.actionObj.clone], ALLDAY_APPOINTMENT_CLASS);\n            this.appendCloneElement(this.getEventWrapper(colIndex));\n            this.actionObj.isAllDay = false;\n            // eslint-disable-next-line max-len\n            const height = (this.actionObj.element.offsetHeight === 0) ? this.actionObj.height : this.actionObj.element.offsetHeight;\n            setStyleAttribute(this.actionObj.clone, {\n                left: formatUnit(0),\n                height: formatUnit(height),\n                width: formatUnit(this.actionObj.cellWidth)\n            });\n        }\n    }\n    calculateVerticalDate(e) {\n        if (isNullOrUndefined(e.target) || (e.target && isNullOrUndefined(closest(e.target, 'tr'))) ||\n            (e.target && e.target.tagName === 'DIV')) {\n            return;\n        }\n        const eventObj = extend({}, this.actionObj.event, null, true);\n        if (isNullOrUndefined(this.parent.eventDragArea)) {\n            this.removeCloneElement();\n        }\n        const eventDuration = eventObj[this.parent.eventFields.endTime].getTime() -\n            eventObj[this.parent.eventFields.startTime].getTime();\n        let td = closest(this.actionObj.target, 'td');\n        if (!isNullOrUndefined(td)) {\n            const tr = td.parentElement;\n            this.actionObj.index = (tr.rowIndex * tr.children.length) + td.cellIndex;\n            const workCells = [].slice.call(this.parent.element.querySelectorAll('.' + WORK_CELLS_CLASS));\n            td = workCells[this.actionObj.index];\n            const currentDate = this.parent.getDateFromElement(td);\n            if (!isNullOrUndefined(currentDate)) {\n                if (this.parent.activeViewOptions.group.resources.length > 0) {\n                    this.actionObj.groupIndex = parseInt(td.getAttribute('data-group-index'), 10);\n                }\n                const timeString = new Date(currentDate.setDate(currentDate.getDate() - this.daysVariation));\n                let dragStart$$1 = new Date(timeString.getTime());\n                let dragEnd = new Date(dragStart$$1.getTime());\n                const startTimeDiff = eventObj[this.parent.eventFields.startTime].getTime() -\n                    (resetTime(new Date(+eventObj[this.parent.eventFields.startTime]))).getTime();\n                dragStart$$1 = new Date(dragStart$$1.getTime() + startTimeDiff);\n                dragEnd = new Date(dragStart$$1.getTime() + eventDuration);\n                this.actionObj.start = new Date(dragStart$$1.getTime());\n                this.actionObj.end = new Date(dragEnd.getTime());\n            }\n        }\n        const event = this.getUpdatedEvent(this.actionObj.start, this.actionObj.end, this.actionObj.event);\n        const eventWrappers = [].slice.call(this.parent.element.querySelectorAll('.' + CLONE_ELEMENT_CLASS));\n        for (const wrapper of eventWrappers) {\n            remove(wrapper);\n        }\n        if (this.multiData && this.multiData.length > 0) {\n            const startTime = resetTime(new Date(event[this.parent.eventFields.startTime]));\n            let startTimeDiff = startTime.getTime() - this.startTime;\n            if (this.parent.currentView === 'TimelineYear' && this.parent.group.resources.length > 0) {\n                startTimeDiff = (startTime.getFullYear() - new Date(this.startTime).getFullYear()) * 12;\n                startTimeDiff -= new Date(this.startTime).getMonth();\n                startTimeDiff += startTime.getMonth();\n            }\n            for (let index = 0; index < this.multiData.length; index++) {\n                this.updatedData[index] = this.updateMultipleVerticalDate(this.multiData[index], startTimeDiff);\n                if (this.parent.currentView === 'TimelineYear') {\n                    this.dynamicYearlyEventsRendering(this.updatedData[index]);\n                }\n                else {\n                    this.dynamicEventsRendering(this.updatedData[index]);\n                }\n            }\n        }\n        else {\n            if (this.parent.currentView === 'TimelineYear') {\n                this.dynamicYearlyEventsRendering(event);\n            }\n            else {\n                this.dynamicEventsRendering(event);\n            }\n        }\n    }\n    updateMultipleVerticalDate(data, timeDifference) {\n        const eventObj = extend({}, data, null, true);\n        const eventDuration = eventObj[this.parent.eventFields.endTime].getTime() -\n            eventObj[this.parent.eventFields.startTime].getTime();\n        const startDate = new Date(eventObj[this.parent.eventFields.startTime]);\n        if (this.parent.currentView === 'TimelineYear' && this.parent.group.resources.length > 0) {\n            eventObj[this.parent.eventFields.startTime] = new Date(startDate.setMonth(startDate.getMonth() + timeDifference));\n        }\n        else {\n            const differInDays = Math.ceil(timeDifference / MS_PER_DAY);\n            eventObj[this.parent.eventFields.startTime] = new Date(startDate.setDate(startDate.getDate() + differInDays));\n        }\n        eventObj[this.parent.eventFields.endTime] =\n            new Date(eventObj[this.parent.eventFields.startTime].getTime() + eventDuration);\n        return eventObj;\n    }\n    calculateTimelineTime(e) {\n        const eventObj = extend({}, this.actionObj.event, null, true);\n        const eventDuration = eventObj[this.parent.eventFields.endTime].getTime() -\n            eventObj[this.parent.eventFields.startTime].getTime();\n        let offsetLeft = this.parent.enableRtl ? Math.abs(this.actionObj.clone.offsetLeft) - this.actionObj.clone.offsetWidth :\n            parseInt(this.actionObj.clone.style.left, 10);\n        offsetLeft = Math.floor(offsetLeft / this.actionObj.cellWidth) * this.actionObj.cellWidth;\n        let rightOffset;\n        if (this.parent.enableRtl) {\n            rightOffset = Math.abs(parseInt(this.actionObj.clone.style.right, 10));\n            this.actionObj.clone.style.right = formatUnit(rightOffset);\n        }\n        offsetLeft = this.getOffsetValue(offsetLeft, rightOffset);\n        const colIndex = this.getColumnIndex(offsetLeft);\n        const dragArea = this.parent.element.querySelector('.' + CONTENT_WRAP_CLASS);\n        const contentWrapRight = dragArea.getBoundingClientRect().right;\n        const cursorDrag = this.parent.activeView.isTimelineView() && !this.parent.enableRtl &&\n            this.actionObj.pageX > this.actionObj.clone.getBoundingClientRect().right &&\n            !this.isMorePopupOpened && !(this.actionObj.pageX > contentWrapRight);\n        const leftVal = (this.parent.eventDragArea) ? dragArea.scrollLeft - dragArea.offsetLeft : 0;\n        if ((this.isCursorAhead || cursorDrag) && !this.isStepDragging) {\n            this.isCursorAhead = true;\n        }\n        let cloneIndex = Math.floor((this.actionObj.pageX - this.actionObj.clone.getBoundingClientRect().left + leftVal) / this.actionObj.cellWidth);\n        if (this.parent.enableRtl) {\n            cloneIndex = Math.abs(Math.floor((this.actionObj.pageX - this.actionObj.clone.getBoundingClientRect().right) /\n                this.actionObj.cellWidth)) - 1;\n        }\n        if (this.cursorPointIndex < 0) {\n            this.cursorIndex(e, eventObj, offsetLeft, cloneIndex);\n        }\n        const tr = this.parent.getContentTable().querySelector('tr');\n        let index = this.getCursorCurrentIndex(colIndex, cloneIndex, tr);\n        index = index < 0 ? 0 : index;\n        let eventStart = this.isHeaderRows ? new Date(this.timelineEventModule.dateRender[index].getTime()) :\n            this.parent.getDateFromElement(tr.children[index]);\n        if (this.isStepDragging) {\n            const widthDiff = this.getWidthDiff(tr, index);\n            if (widthDiff !== 0) {\n                const timeDiff = Math.round(widthDiff / this.widthPerMinute);\n                eventStart.setMinutes(eventStart.getMinutes() + (timeDiff * this.actionObj.interval));\n                if (this.isCursorAhead || cursorDrag) {\n                    eventStart.setMilliseconds(-(eventDuration));\n                }\n                else {\n                    eventStart.setMinutes(eventStart.getMinutes() - this.minDiff);\n                }\n            }\n            else {\n                eventStart = this.actionObj.start;\n            }\n        }\n        else {\n            if (this.isCursorAhead || cursorDrag) {\n                eventStart.setMinutes(eventStart.getMinutes() +\n                    (this.isTimelineDayProcess ? MINUTES_PER_DAY : this.actionObj.slotInterval));\n                eventStart.setMilliseconds(-(eventDuration));\n            }\n            else {\n                eventStart.setMinutes(eventStart.getMinutes() -\n                    (this.cursorPointIndex * (this.isTimelineDayProcess ? MINUTES_PER_DAY : this.actionObj.slotInterval)));\n            }\n        }\n        eventStart = this.calculateIntervalTime(eventStart);\n        if (this.isTimelineDayProcess) {\n            const eventSrt = eventObj[this.parent.eventFields.startTime];\n            eventStart.setHours(eventSrt.getHours(), eventSrt.getMinutes(), eventSrt.getSeconds());\n        }\n        if (this.parent.eventDragArea) {\n            const targetDate = this.parent.getDateFromElement(e.target);\n            if (!isNullOrUndefined(targetDate)) {\n                eventStart = targetDate;\n            }\n        }\n        const eventEnd = new Date(eventStart.getTime());\n        eventEnd.setMilliseconds(eventDuration);\n        let eventsData = [this.getUpdatedEvent(eventStart, eventEnd, this.actionObj.event)];\n        if (this.multiData.length > 0) {\n            const startTimeDiff = eventsData[0][this.parent.eventFields.startTime].getTime() - this.startTime;\n            for (let i = 0; i < this.multiData.length; i++) {\n                this.updatedData[i] = this.updateMultipleData(this.multiData[i], startTimeDiff);\n            }\n            eventsData = this.updatedData;\n        }\n        for (let dataIndex = 0; dataIndex < eventsData.length; dataIndex++) {\n            const events = this.timelineEventModule.splitEvent(eventsData[dataIndex], this.timelineEventModule.dateRender);\n            const eventData = events[0].data;\n            const startTime = this.timelineEventModule.getStartTime(events[0], eventData);\n            const endTime = this.timelineEventModule.getEndTime(events[0], eventData);\n            // eslint-disable-next-line max-len\n            const width = this.timelineEventModule.getEventWidth(startTime, endTime, eventObj[this.parent.eventFields.isAllDay], eventData.count);\n            // eslint-disable-next-line max-len\n            let day = this.parent.getIndexOfDate(this.timelineEventModule.dateRender, resetTime(new Date(startTime.getTime())));\n            day = day < 0 ? 0 : day;\n            const left = this.timelineEventModule.getPosition(startTime, endTime, eventObj[this.parent.eventFields.isAllDay], day);\n            const cloneElement = this.multiData.length > 0 ? this.actionObj.cloneElement[dataIndex] : this.actionObj.clone;\n            if (this.parent.enableRtl) {\n                cloneElement.style.right = formatUnit(left);\n            }\n            else {\n                cloneElement.style.left = formatUnit(left);\n            }\n            if (!this.isMorePopupOpened) {\n                cloneElement.style.width = formatUnit(width);\n            }\n            if (this.parent.activeViewOptions.group.resources.length > 0) {\n                this.calculateResourceGroupingPosition(e, cloneElement);\n            }\n            this.actionObj.start = new Date(eventStart.getTime());\n            this.actionObj.end = new Date(eventEnd.getTime());\n            this.updateTimePosition(this.actionObj.start, this.updatedData);\n        }\n    }\n    getOffsetValue(offsetLeft, rightOffset) {\n        if (this.scrollEdges.left || this.scrollEdges.right) {\n            const viewEle = this.parent.element.querySelector('.' + CONTENT_WRAP_CLASS);\n            if (this.parent.enableRtl) {\n                rightOffset = viewEle.offsetWidth - viewEle.scrollLeft;\n                if (this.scrollEdges.right) {\n                    rightOffset = (rightOffset - viewEle.offsetWidth + this.actionObj.clone.offsetWidth) -\n                        (this.actionObj.clone.offsetWidth - this.widthUptoCursorPoint);\n                }\n                else {\n                    rightOffset = rightOffset + this.widthUptoCursorPoint;\n                    if (rightOffset - this.widthUptoCursorPoint >= viewEle.scrollWidth) {\n                        this.actionObj.clone.style.width =\n                            formatUnit(this.actionObj.clone.offsetWidth - this.widthUptoCursorPoint + this.actionObj.cellWidth);\n                        rightOffset = (viewEle.scrollLeft - viewEle.scrollWidth);\n                    }\n                }\n                this.actionObj.clone.style.left = formatUnit(rightOffset);\n            }\n            else {\n                if (this.scrollEdges.left) {\n                    offsetLeft = viewEle.scrollLeft - this.widthUptoCursorPoint + this.actionObj.cellWidth;\n                    if (viewEle.scrollLeft + viewEle.offsetWidth >= viewEle.offsetWidth) {\n                        viewEle.scrollLeft = viewEle.scrollLeft - 1;\n                    }\n                    else if (this.actionObj.clone.offsetLeft === 0) {\n                        offsetLeft = viewEle.scrollLeft;\n                    }\n                }\n                else {\n                    offsetLeft = (viewEle.scrollLeft + viewEle.offsetWidth -\n                        this.actionObj.clone.offsetWidth) + (this.actionObj.clone.offsetWidth - this.widthUptoCursorPoint);\n                }\n                offsetLeft = offsetLeft < 0 ? 0 : offsetLeft;\n                this.actionObj.clone.style.left = formatUnit(offsetLeft);\n            }\n        }\n        return offsetLeft;\n    }\n    getWidthDiff(tr, index) {\n        const pages = this.scrollArgs.element.getBoundingClientRect();\n        if (pages.left <= this.actionObj.pageX && pages.right >= this.actionObj.pageX) {\n            const targetLeft = tr.children[index].offsetLeft;\n            const pageX = this.actionObj.pageX - pages.left;\n            if (this.parent.enableRtl) {\n                return (targetLeft + this.actionObj.cellWidth) - (this.scrollArgs.element.scrollLeft + pageX);\n            }\n            else {\n                return (this.scrollArgs.element.scrollLeft + pageX) - targetLeft;\n            }\n        }\n        return 0;\n    }\n    getColumnIndex(offsetLeft) {\n        const index = Math.floor(offsetLeft / this.actionObj.cellWidth);\n        if (this.isHeaderRows) {\n            return index;\n        }\n        return this.getIndex(index);\n    }\n    getCursorCurrentIndex(colIndex, cloneIndex, tr) {\n        const index = colIndex + cloneIndex;\n        if (this.isHeaderRows) {\n            const dateLength = Math.floor(tr.offsetWidth / this.actionObj.cellWidth);\n            return (index > dateLength - 1) ? dateLength - 1 : index;\n        }\n        return (index > tr.children.length - 1) ? tr.children.length - 1 : index;\n    }\n    cursorIndex(e, event, left, index) {\n        const td = closest(e.target, '.e-work-cells');\n        if (!isNullOrUndefined(td) && !this.isMorePopupOpened) {\n            let targetDate = this.parent.getDateFromElement(td);\n            if (this.isHeaderRows) {\n                const currentIndex = Math.floor(left / this.actionObj.cellWidth);\n                targetDate = new Date(this.timelineEventModule.dateRender[currentIndex + index].getTime());\n            }\n            const timeDiff = targetDate.getTime() - event[this.parent.eventFields.startTime].getTime();\n            if (this.isTimelineDayProcess) {\n                this.cursorPointIndex = Math.abs(Math.ceil(timeDiff / (MS_PER_DAY)));\n            }\n            else {\n                const widthDiff = Math.floor((timeDiff / MS_PER_MINUTE) / (this.actionObj.slotInterval / this.actionObj.cellWidth));\n                this.cursorPointIndex = Math.floor(widthDiff / this.actionObj.cellWidth);\n                this.cursorPointIndex = this.cursorPointIndex < 0 ? 0 : this.cursorPointIndex;\n            }\n        }\n        else {\n            this.cursorPointIndex = 0;\n        }\n    }\n    calculateResourceGroupingPosition(e, cloneElement) {\n        const dragArea = this.parent.element.querySelector('.' + CONTENT_WRAP_CLASS);\n        const trCollection = [].slice.call(this.parent.element.querySelectorAll('.e-content-wrap .e-content-table tr:not(.e-hidden)'));\n        let translateY = getTranslateY(dragArea.querySelector('table'));\n        translateY = (isNullOrUndefined(translateY)) ? 0 : translateY;\n        const rowHeight = (this.parent.rowAutoHeight) ?\n            ~~(dragArea.querySelector('table').offsetHeight / trCollection.length) : this.actionObj.cellHeight;\n        let rowIndex = Math.floor(Math.floor((this.actionObj.Y +\n            (dragArea.scrollTop - translateY - (window.scrollY || window.pageYOffset))) -\n            dragArea.getBoundingClientRect().top) / rowHeight);\n        rowIndex = (rowIndex < 0) ? 0 : (rowIndex > trCollection.length - 1) ? trCollection.length - 1 : rowIndex;\n        this.actionObj.index = rowIndex;\n        const eventContainer = this.parent.element.querySelectorAll('.e-appointment-container:not(.e-hidden)').item(rowIndex);\n        let eventWrapper = eventContainer.querySelector('.' + APPOINTMENT_WRAPPER_CLASS);\n        if (!eventWrapper) {\n            eventWrapper = createElement('div', { className: APPOINTMENT_WRAPPER_CLASS });\n            eventContainer.appendChild(eventWrapper);\n        }\n        this.appendCloneElement(eventWrapper, cloneElement);\n        const td = closest(this.actionObj.target, 'td');\n        this.actionObj.groupIndex = (td && !isNaN(parseInt(td.getAttribute('data-group-index'), 10)))\n            ? parseInt(td.getAttribute('data-group-index'), 10) : this.actionObj.groupIndex;\n        let top = trCollection[rowIndex].getBoundingClientRect().height * rowIndex;\n        if (this.parent.rowAutoHeight) {\n            const cursorElement = this.getCursorElement(e);\n            if (cursorElement) {\n                top = cursorElement.classList.contains(WORK_CELLS_CLASS) ? cursorElement.offsetTop :\n                    cursorElement.offsetParent.classList.contains(APPOINTMENT_CLASS) ?\n                        cursorElement.offsetParent.offsetTop : top;\n            }\n        }\n        cloneElement.style.top = formatUnit(top);\n    }\n    appendCloneElement(element, cloneElement = null) {\n        cloneElement = isNullOrUndefined(cloneElement) ? this.actionObj.clone : cloneElement;\n        const dragElement = document.querySelector(this.parent.eventDragArea);\n        if (this.parent.eventDragArea && dragElement) {\n            dragElement.appendChild(cloneElement);\n        }\n        else {\n            element.appendChild(cloneElement);\n        }\n    }\n    getEventWrapper(index, isAllDayDrag) {\n        let eventWrapper;\n        if (isNullOrUndefined(isAllDayDrag)) {\n            isAllDayDrag = this.actionObj.clone.classList.contains(ALLDAY_APPOINTMENT_CLASS);\n        }\n        if (this.parent.activeViewOptions.timeScale.enable) {\n            const wrapperClass = isAllDayDrag ? '.' + ALLDAY_APPOINTMENT_WRAPPER_CLASS : '.' + APPOINTMENT_WRAPPER_CLASS;\n            eventWrapper = this.parent.element.querySelectorAll(wrapperClass).item(index);\n        }\n        else {\n            const targetWrapper = this.parent.element.querySelectorAll('.' + WORK_CELLS_CLASS).item(index);\n            eventWrapper = targetWrapper.querySelector('.' + APPOINTMENT_WRAPPER_CLASS);\n            if (!eventWrapper) {\n                eventWrapper = createElement('div', { className: APPOINTMENT_WRAPPER_CLASS });\n                targetWrapper.appendChild(eventWrapper);\n            }\n        }\n        return eventWrapper;\n    }\n    getAllDayEventHeight() {\n        const eventWrapper = createElement('div', { className: APPOINTMENT_CLASS });\n        this.parent.element.querySelector('.' + ALLDAY_APPOINTMENT_WRAPPER_CLASS).appendChild(eventWrapper);\n        const eventHeight = eventWrapper.offsetHeight;\n        remove(eventWrapper);\n        return eventHeight;\n    }\n    isAllowDrop(e) {\n        if (!this.actionObj.excludeSelectors) {\n            return false;\n        }\n        const dropSelectors = this.actionObj.excludeSelectors.split(',');\n        let isAllowDrop = false;\n        for (const selector of dropSelectors) {\n            if (e.target.classList.contains(selector)) {\n                isAllowDrop = true;\n                break;\n            }\n        }\n        return isAllowDrop;\n    }\n    /**\n     * Get module name.\n     *\n     * @returns {string} Returns the module name\n     */\n    getModuleName() {\n        return 'dragAndDrop';\n    }\n}\n\n/**\n * view base\n */\nclass ViewBase {\n    /**\n     * Constructor\n     *\n     * @param {Schedule} parent Accepts the schedule instance\n     */\n    constructor(parent) {\n        this.parent = parent;\n    }\n    isTimelineView() {\n        return this.parent.currentView.indexOf('Timeline') !== -1;\n    }\n    getContentRows() {\n        return [];\n    }\n    refreshHeader() {\n        // Method to refresh the date header\n    }\n    refreshResourceHeader() {\n        remove(this.element.querySelector('tbody').lastElementChild.firstElementChild);\n        const resTd = createElement('td');\n        resTd.appendChild(this.parent.resourceBase.createResourceColumn());\n        prepend([resTd], this.element.querySelector('tbody').lastElementChild);\n        this.parent.notify(contentReady, {});\n    }\n    getDayName(date) {\n        return this.parent.getDayNames('abbreviated')[date.getDay()];\n    }\n    getDate(date) {\n        return this.parent.globalize.formatDate(date, { format: 'd', calendar: this.parent.getCalendarMode() });\n    }\n    getTime(date) {\n        if (this.parent.isAdaptive) {\n            if (this.parent.activeViewOptions.timeFormat === 'HH:mm' || this.parent.activeViewOptions.timeFormat === 'HH.mm') {\n                return this.parent.globalize.formatDate(date, { format: 'H', calendar: this.parent.getCalendarMode() });\n            }\n            return this.parent.globalize.formatDate(date, { skeleton: 'h', calendar: this.parent.getCalendarMode() });\n        }\n        return this.parent.getTimeString(date);\n    }\n    getTimelineDate(date) {\n        const text = this.parent.globalize.formatDate(date, { skeleton: 'MMMd', calendar: this.parent.getCalendarMode() }) + ', ' +\n            this.parent.getDayNames('wide')[date.getDay()];\n        return capitalizeFirstWord(text, 'multiple');\n    }\n    createEventTable(trCount) {\n        const eventTable = createElement('div', { className: EVENT_TABLE_CLASS });\n        append(this.getEventRows(trCount), eventTable);\n        return eventTable;\n    }\n    getEventRows(trCount) {\n        const eventRows = [];\n        let eventContainer;\n        for (let row = 0; row < trCount; row++) {\n            eventContainer = createElement('div', { className: APPOINTMENT_CONTAINER_CLASS });\n            if (this.parent.resourceBase && !this.parent.uiStateValues.isGroupAdaptive && this.parent.resourceBase.renderedResources) {\n                eventContainer.setAttribute('data-group-index', this.parent.resourceBase.renderedResources[row].groupIndex.toString());\n            }\n            eventRows.push(eventContainer);\n        }\n        return eventRows;\n    }\n    collapseRows(wrap) {\n        if (this.parent.activeViewOptions.group.resources.length > 0 && !this.parent.uiStateValues.isGroupAdaptive) {\n            this.parent.resourceBase.hideResourceRows(wrap.querySelector('tbody'));\n            this.parent.resourceBase.hideResourceRows(wrap.querySelector('.' + EVENT_TABLE_CLASS));\n        }\n    }\n    createTableLayout(className) {\n        const clsName = className || '';\n        const table = createElement('table', { className: SCHEDULE_TABLE_CLASS + ' ' + clsName, attrs: { role: 'table' } });\n        const tbody = createElement('tbody');\n        table.appendChild(tbody);\n        return table;\n    }\n    createColGroup(table, lastRow) {\n        let length = lastRow.length;\n        if (lastRow[0] && lastRow[0].colSpan) {\n            length = lastRow.map((value) => value.colSpan).reduce((prev, next) => prev + next);\n        }\n        const colGroupEle = createElement('colgroup');\n        for (let i = 0; i < length; i++) {\n            colGroupEle.appendChild(createElement('col'));\n        }\n        prepend([colGroupEle], table);\n    }\n    getScrollXIndent(content) {\n        return content.offsetHeight - content.clientHeight > 0 ? getScrollBarWidth() : 0;\n    }\n    scrollTopPanel(target) {\n        this.getDatesHeaderElement().firstElementChild.scrollLeft = target.scrollLeft;\n    }\n    scrollHeaderLabels(target) {\n        const headerTable = this.element.querySelector('.e-date-header-wrap table');\n        const colWidth = headerTable.offsetWidth / headerTable.querySelectorAll('colgroup col').length;\n        const applyLeft = (headerCells, isRtl) => {\n            let currentCell;\n            let tdLeft = 0;\n            let colSpan = 0;\n            const hiddenLeft = isRtl ? -(target.scrollLeft) : target.scrollLeft;\n            for (const cell of headerCells) {\n                colSpan += parseInt(cell.getAttribute('colSpan'), 10);\n                if (colSpan > Math.floor(hiddenLeft / colWidth)) {\n                    currentCell = cell;\n                    break;\n                }\n                tdLeft += cell.offsetWidth;\n            }\n            if (!isNullOrUndefined(currentCell)) {\n                currentCell.children[0].style[isRtl ? 'right' : 'left'] = (hiddenLeft - tdLeft) + 'px';\n            }\n        };\n        const classNames = ['.e-header-year-cell', '.e-header-month-cell', '.e-header-week-cell', '.e-header-cells'];\n        for (const className of classNames) {\n            const headerCells = [].slice.call(this.element.querySelectorAll(className));\n            if (headerCells.length > 0) {\n                for (const element of headerCells) {\n                    element.children[0].style[this.parent.enableRtl ? 'right' : 'left'] = '';\n                }\n                applyLeft(headerCells, this.parent.enableRtl);\n            }\n        }\n    }\n    addAttributes(td, element) {\n        if (td.template) {\n            append(td.template, element);\n        }\n        if (td.colSpan) {\n            element.setAttribute('colspan', td.colSpan.toString());\n        }\n        if (td.className) {\n            addClass([element], td.className);\n        }\n    }\n    getHeaderBarHeight() {\n        let headerBarHeight = 2;\n        if (this.parent.headerModule) {\n            headerBarHeight += getOuterHeight(this.parent.headerModule.getHeaderElement());\n        }\n        if (this.parent.uiStateValues.isGroupAdaptive) {\n            const resHeader = this.parent.element.querySelector('.' + RESOURCE_HEADER_TOOLBAR);\n            if (resHeader) {\n                headerBarHeight += resHeader.offsetHeight;\n            }\n        }\n        return headerBarHeight;\n    }\n    renderPanel(type) {\n        if (type === PREVIOUS_PANEL_CLASS) {\n            prepend([this.element], this.parent.element.querySelector('.' + TABLE_CONTAINER_CLASS));\n        }\n        else {\n            this.parent.element.querySelector('.' + TABLE_CONTAINER_CLASS).appendChild(this.element);\n        }\n    }\n    setPanel(panel) {\n        this.element = panel;\n    }\n    getPanel() {\n        return this.element;\n    }\n    getDatesHeaderElement() {\n        return this.element.querySelector('.' + DATE_HEADER_CONTAINER_CLASS);\n    }\n    // eslint-disable-next-line @typescript-eslint/no-unused-vars\n    getDateSlots(renderDates, workDays) {\n        return []; // Here getDateSlots only need in vertical and month views\n    }\n    generateColumnLevels() {\n        return []; // Here generateColumnLevels only need in vertical and month views\n    }\n    getColumnLevels() {\n        return this.colLevels;\n    }\n    highlightCurrentTime() {\n        // Here showTimeIndicator functionalities\n    }\n    startDate() {\n        return this.renderDates[0];\n    }\n    endDate() {\n        return addDays(this.renderDates[this.renderDates.length - 1], 1);\n    }\n    getStartHour() {\n        let startHour = this.parent.getStartEndTime(this.parent.activeViewOptions.startHour);\n        if (isNullOrUndefined(startHour)) {\n            startHour = new Date(2000, 0, 0, 0);\n        }\n        return startHour;\n    }\n    getEndHour() {\n        let endHour = this.parent.getStartEndTime(this.parent.activeViewOptions.endHour);\n        if (isNullOrUndefined(endHour)) {\n            endHour = new Date(2000, 0, 0, 0);\n        }\n        return endHour;\n    }\n    isCurrentDate(date) {\n        return date.setHours(0, 0, 0, 0) === this.parent.getCurrentTime().setHours(0, 0, 0, 0);\n    }\n    isCurrentMonth(date) {\n        return date.getFullYear() ===\n            this.parent.getCurrentTime().getFullYear() && date.getMonth() === this.parent.getCurrentTime().getMonth();\n    }\n    isWorkDay(date, workDays = this.parent.activeViewOptions.workDays) {\n        if (workDays.indexOf(date.getDay()) >= 0) {\n            return true;\n        }\n        return false;\n    }\n    isWorkHour(date, startHour, endHour, workDays) {\n        if (isNullOrUndefined(startHour) || isNullOrUndefined(endHour)) {\n            return false;\n        }\n        startHour.setMilliseconds(0);\n        endHour.setMilliseconds(0);\n        return !(getDateInMs(date) < getDateInMs(startHour) || getDateInMs(date) >= getDateInMs(endHour) ||\n            !this.isWorkDay(date, workDays));\n    }\n    getRenderDates(workDays) {\n        const renderDates = [];\n        // Due to same code for vertical and time line, week & work week views, if condition has used\n        if (this.parent.currentView === 'Week' || this.parent.currentView === 'TimelineWeek') {\n            const selectedDate = resetTime(this.parent.selectedDate);\n            let start = getWeekFirstDate(selectedDate, this.parent.activeViewOptions.firstDayOfWeek);\n            for (let i = 0, length = WEEK_LENGTH * this.parent.activeViewOptions.interval; i < length; i++) {\n                if (this.parent.activeViewOptions.showWeekend) {\n                    renderDates.push(start);\n                }\n                else {\n                    if (this.isWorkDay(start, workDays)) {\n                        renderDates.push(start);\n                    }\n                }\n                start = addDays(start, 1);\n            }\n        }\n        else if (this.parent.currentView === 'WorkWeek' || this.parent.currentView === 'TimelineWorkWeek') {\n            let start = getWeekFirstDate(resetTime(this.parent.selectedDate), this.parent.activeViewOptions.firstDayOfWeek);\n            for (let i = 0, length = WEEK_LENGTH * this.parent.activeViewOptions.interval; i < length; i++) {\n                if (this.isWorkDay(start, workDays)) {\n                    renderDates.push(start);\n                }\n                start = addDays(start, 1);\n            }\n        }\n        else {\n            const dayCount = this.parent.currentView === 'Agenda' ? this.parent.agendaDaysCount :\n                this.parent.activeViewOptions.interval;\n            let start = resetTime(this.parent.selectedDate);\n            do {\n                if (this.parent.activeViewOptions.showWeekend) {\n                    renderDates.push(start);\n                }\n                else {\n                    if (this.isWorkDay(start, workDays)) {\n                        renderDates.push(start);\n                    }\n                }\n                start = addDays(start, 1);\n            } while (dayCount !== renderDates.length);\n        }\n        if (!workDays) {\n            this.renderDates = renderDates;\n        }\n        if (this.parent.headerModule) {\n            this.parent.headerModule.previousNextIconHandler();\n        }\n        return renderDates;\n    }\n    getNextPreviousDate(type) {\n        if (this.parent.currentView === 'Day' || this.parent.currentView === 'TimelineDay') {\n            if (this.parent.activeViewOptions.showWeekend) {\n                const daysCount = this.parent.activeViewOptions.interval;\n                return addDays(this.parent.selectedDate, type === 'next' ? daysCount : -daysCount);\n            }\n            else {\n                let date;\n                if (type === 'next') {\n                    date = addDays(this.renderDates.slice(-1)[0], 1);\n                    while (!this.isWorkDay(date)) {\n                        date = addDays(date, 1);\n                    }\n                }\n                else {\n                    date = addDays(this.renderDates[0], -1);\n                    let count = 0;\n                    do {\n                        if (this.isWorkDay(date)) {\n                            count += 1;\n                        }\n                        if (this.parent.activeViewOptions.interval !== count) {\n                            date = addDays(date, -1);\n                        }\n                    } while (this.parent.activeViewOptions.interval !== count);\n                }\n                return date;\n            }\n        }\n        const weekLength = type === 'next' ? WEEK_LENGTH : -WEEK_LENGTH;\n        return addDays(this.parent.selectedDate, weekLength * this.parent.activeViewOptions.interval);\n    }\n    getLabelText(view) {\n        const viewStr = view.charAt(0).toLowerCase() + view.substring(1);\n        return this.parent.localeObj.getConstant(viewStr) + ' of ' + capitalizeFirstWord(this.parent.globalize.formatDate(this.parent.selectedDate, { skeleton: 'long', calendar: this.parent.getCalendarMode() }), 'single');\n    }\n    getDateRangeText() {\n        if (this.parent.isAdaptive) {\n            const formatDate = (this.parent.activeViewOptions.dateFormat) ? this.parent.activeViewOptions.dateFormat : 'MMMM y';\n            return capitalizeFirstWord(this.parent.globalize.formatDate(this.parent.selectedDate, { format: formatDate, calendar: this.parent.getCalendarMode() }), 'single');\n        }\n        return this.formatDateRange(this.renderDates[0], this.renderDates[this.renderDates.length - 1]);\n    }\n    formatDateRange(startDate, endDate) {\n        const globalize = this.parent.globalize;\n        const mode = this.parent.getCalendarMode();\n        if (startDate === endDate) {\n            endDate = null;\n        }\n        if (!isNullOrUndefined(this.parent.activeViewOptions.dateFormat)) {\n            let text = '';\n            if (!endDate) {\n                text = globalize.formatDate(startDate, { format: this.parent.activeViewOptions.dateFormat, calendar: mode });\n                return capitalizeFirstWord(text, 'multiple');\n            }\n            text = (globalize.formatDate(startDate, { format: this.parent.activeViewOptions.dateFormat, calendar: mode }) +\n                ' - ' + globalize.formatDate(endDate, { format: this.parent.activeViewOptions.dateFormat, calendar: mode }));\n            return capitalizeFirstWord(text, 'multiple');\n        }\n        let formattedStr;\n        let longDateFormat;\n        if (this.parent.locale === 'en' || this.parent.locale === 'en-US') {\n            longDateFormat = getValue('dateFormats.long', getDefaultDateObject(mode));\n        }\n        else {\n            longDateFormat = getValue('main.' + '' + this.parent.locale + '.dates.calendars.' + mode + '.dateFormats.long', cldrData);\n        }\n        if (!endDate) {\n            return capitalizeFirstWord(globalize.formatDate(startDate, { format: longDateFormat, calendar: mode }), 'single');\n        }\n        const dateFormat = longDateFormat.trim().toLocaleLowerCase();\n        if (dateFormat.substr(0, 1) === 'd') {\n            if (startDate.getFullYear() === endDate.getFullYear()) {\n                if (startDate.getMonth() === endDate.getMonth()) {\n                    formattedStr = globalize.formatDate(startDate, { format: 'dd', calendar: mode }) + ' - ' +\n                        globalize.formatDate(endDate, { format: 'dd MMMM yyyy', calendar: mode });\n                }\n                else {\n                    formattedStr = globalize.formatDate(startDate, { format: 'dd MMM', calendar: mode }) + ' - ' +\n                        globalize.formatDate(endDate, { format: 'dd MMM yyyy', calendar: mode });\n                }\n            }\n            else {\n                formattedStr = globalize.formatDate(startDate, { format: 'dd MMM yyyy', calendar: mode }) + ' - ' +\n                    globalize.formatDate(endDate, { format: 'dd MMM yyyy', calendar: mode });\n            }\n        }\n        else if (dateFormat.substr(0, 1) === 'm') {\n            if (startDate.getFullYear() === endDate.getFullYear()) {\n                if (startDate.getMonth() === endDate.getMonth()) {\n                    formattedStr = globalize.formatDate(startDate, { format: 'MMMM dd', calendar: mode }) + ' - ' +\n                        globalize.formatDate(endDate, { format: 'dd, yyyy', calendar: mode });\n                }\n                else {\n                    formattedStr = globalize.formatDate(startDate, { format: 'MMM dd', calendar: mode }) + ' - ' +\n                        globalize.formatDate(endDate, { format: 'MMM dd, yyyy', calendar: mode });\n                }\n            }\n            else {\n                formattedStr = globalize.\n                    formatDate(startDate, { format: 'MMM dd, yyyy', calendar: mode }) + ' - ' +\n                    globalize.formatDate(endDate, { format: 'MMM dd, yyyy', calendar: mode });\n            }\n        }\n        else {\n            formattedStr = globalize.formatDate(startDate, { format: longDateFormat, calendar: mode }) + ' - ' +\n                globalize.formatDate(endDate, { format: longDateFormat, calendar: mode });\n        }\n        return capitalizeFirstWord(formattedStr, 'multiple');\n    }\n    getMobileDateElement(date, className) {\n        const wrap = createElement('div', {\n            className: className,\n            innerHTML: '<div class=\"e-m-date\">' + this.parent.globalize.formatDate(date, { format: 'd', calendar: this.parent.getCalendarMode() }) + '</div>' + '<div class=\"e-m-day\">' +\n                capitalizeFirstWord(this.parent.globalize.formatDate(date, { format: 'E', calendar: this.parent.getCalendarMode() }), 'single') + '</div>'\n        });\n        return wrap;\n    }\n    setResourceHeaderContent(tdElement, tdData, className = TEXT_ELLIPSIS) {\n        if (this.parent.activeViewOptions.resourceHeaderTemplate) {\n            const data = { resource: tdData.resource, resourceData: tdData.resourceData };\n            const scheduleId = this.parent.element.id + '_';\n            const viewName = this.parent.activeViewOptions.resourceHeaderTemplateName;\n            const templateId = scheduleId + viewName + 'resourceHeaderTemplate';\n            const quickTemplate = [].slice.call(this.parent.getResourceHeaderTemplate()(data, this.parent, 'resourceHeaderTemplate', templateId, false));\n            append(quickTemplate, tdElement);\n        }\n        else {\n            tdElement.appendChild(createElement('div', {\n                className: className, innerHTML: tdData.resourceData[tdData.resource.textField]\n            }));\n        }\n    }\n    renderResourceMobileLayout() {\n        if (this.parent.resourceBase.lastResourceLevel && this.parent.resourceBase.lastResourceLevel.length <= 0) {\n            return;\n        }\n        this.parent.resourceBase.renderResourceHeader();\n        this.parent.resourceBase.renderResourceTree();\n    }\n    addAutoHeightClass(element) {\n        if (!this.parent.uiStateValues.isGroupAdaptive && this.parent.rowAutoHeight && this.isTimelineView()\n            && this.parent.activeViewOptions.group.resources.length > 0) {\n            addClass([element], AUTO_HEIGHT);\n        }\n    }\n    getColElements() {\n        return [].slice.call(this.element.querySelectorAll('.' + CONTENT_WRAP_CLASS + ' col, .' + DATE_HEADER_WRAP_CLASS + ' col'));\n    }\n    setColWidth(content) {\n        if (this.isTimelineView()) {\n            const colElements = this.getColElements();\n            const contentBody = this.element.querySelector('.' + CONTENT_TABLE_CLASS + ' tbody');\n            const colWidth = Math.ceil(contentBody.offsetWidth / (colElements.length / 2));\n            colElements.forEach((col) => setStyleAttribute(col, { 'width': formatUnit(colWidth) }));\n            if (content.offsetHeight !== content.clientHeight) {\n                const resourceColumn = this.parent.element.querySelector('.' + RESOURCE_COLUMN_WRAP_CLASS);\n                if (!isNullOrUndefined(resourceColumn)) {\n                    setStyleAttribute(resourceColumn, { 'height': formatUnit(content.clientHeight) });\n                }\n            }\n        }\n    }\n    resetColWidth() {\n        const colElements = this.getColElements();\n        for (const col of colElements) {\n            col.style.width = '';\n        }\n    }\n    getContentAreaElement() {\n        return this.element.querySelector('.' + CONTENT_WRAP_CLASS);\n    }\n    wireExpandCollapseIconEvents() {\n        if (this.parent.resourceBase && this.parent.resourceBase.resourceCollection.length > 1) {\n            const treeIcons = [].slice.call(this.element.querySelectorAll('.' + RESOURCE_TREE_ICON_CLASS));\n            for (const icon of treeIcons) {\n                EventHandler.clearEvents(icon);\n                EventHandler.add(icon, 'click', this.parent.resourceBase.onTreeIconClick, this.parent.resourceBase);\n            }\n        }\n    }\n    scrollToDate(scrollDate) {\n        if (['Month', 'TimelineMonth'].indexOf(this.parent.currentView) === -1 || isNullOrUndefined(scrollDate)) {\n            return;\n        }\n        const scrollWrap = this.getContentAreaElement();\n        const tdDate = new Date(resetTime(new Date(+scrollDate)).getTime()).getTime();\n        const dateElement = scrollWrap.querySelector(`.${WORK_CELLS_CLASS}[data-date=\"${tdDate}\"]`);\n        if (this.parent.currentView === 'Month' && dateElement) {\n            scrollWrap.scrollTop = dateElement.offsetTop;\n        }\n        if (this.parent.currentView === 'TimelineMonth' && dateElement) {\n            if (!this.parent.enableRtl) {\n                scrollWrap.scrollLeft = dateElement.offsetLeft;\n            }\n            else {\n                scrollWrap.scrollLeft = -(this.parent.getContentTable().offsetWidth - dateElement.offsetLeft - dateElement.offsetWidth);\n            }\n        }\n    }\n    setPersistence() {\n        if (this.parent.enablePersistence) {\n            const contentWrap = this.element.querySelector('.e-content-wrap');\n            if (!isNullOrUndefined(contentWrap)) {\n                this.parent.scrollLeft = contentWrap.scrollLeft;\n                this.parent.scrollTop = contentWrap.scrollTop;\n            }\n        }\n    }\n    retainScrollPosition() {\n        if (this.parent.enablePersistence) {\n            const conWrap = this.parent.element.querySelector('.e-content-wrap');\n            if (!isNullOrUndefined(conWrap) && !isNullOrUndefined(this.parent.scrollLeft) && !isNullOrUndefined(this.parent.scrollTop)) {\n                conWrap.scrollTop = this.parent.scrollTop;\n                conWrap.scrollLeft = this.parent.scrollLeft;\n            }\n        }\n    }\n    getViewStartDate() {\n        let startDate = this.renderDates[0];\n        if (this.parent.activeViewOptions.group.resources.length > 0 && this.parent.resourceBase.lastResourceLevel.length > 0) {\n            startDate = this.parent.resourceBase.getResourceRenderDates()[0];\n        }\n        return startDate;\n    }\n    getViewEndDate() {\n        let endDate = addDays(this.renderDates[this.renderDates.length - 1], 1);\n        if (this.parent.activeViewOptions.group.resources.length > 0 && this.parent.resourceBase.lastResourceLevel.length > 0) {\n            endDate = addDays(this.parent.resourceBase.getResourceRenderDates().slice(-1)[0], 1);\n        }\n        return endDate;\n    }\n    destroy() {\n        if (this.element && this.element.parentNode) {\n            remove(this.element);\n        }\n        this.element = null;\n        this.renderDates = null;\n        this.colLevels = null;\n    }\n}\n\n/**\n * vertical view\n */\nclass VerticalView extends ViewBase {\n    constructor(parent) {\n        super(parent);\n        this.viewClass = 'e-day-view';\n        this.isInverseTableSelect = true;\n        this.baseCssClass = 'e-vertical-view';\n        this.appointment = null;\n    }\n    getModuleName() {\n        return 'verticalView';\n    }\n    addEventListener() {\n        this.parent.on(scrollUiUpdate, this.scrollUiUpdate, this);\n        this.parent.on(dataReady, this.renderEvents, this);\n    }\n    removeEventListener() {\n        if (this.parent) {\n            this.parent.off(scrollUiUpdate, this.scrollUiUpdate);\n            this.parent.off(dataReady, this.renderEvents);\n        }\n    }\n    renderEvents() {\n        this.appointment = this.parent.activeViewOptions.timeScale.enable ?\n            new VerticalEvent(this.parent) : new MonthEvent(this.parent);\n        this.appointment.renderAppointments();\n        this.parent.notify(eventsLoaded, {});\n    }\n    onContentScroll(e) {\n        this.parent.removeNewEventElement();\n        const target = e.target;\n        this.parent.notify(virtualScroll, e);\n        this.scrollLeftPanel(target);\n        this.scrollTopPanel(target);\n        if (!this.parent.isAdaptive) {\n            this.parent.uiStateValues.top = target.scrollTop;\n        }\n        this.parent.uiStateValues.left = target.scrollLeft;\n        if (!isNullOrUndefined(this.parent.quickPopup)) {\n            this.parent.quickPopup.quickPopupHide();\n        }\n        this.setPersistence();\n    }\n    onAdaptiveMove(e) {\n        if (this.parent.uiStateValues.action) {\n            e.preventDefault();\n        }\n    }\n    onAdaptiveScroll(e) {\n        if (this.parent && !this.parent.isDestroyed) {\n            this.parent.removeNewEventElement();\n            this.parent.uiStateValues.top = e.target.scrollTop;\n        }\n    }\n    scrollLeftPanel(target) {\n        const leftPanel = this.getLeftPanelElement();\n        if (!isNullOrUndefined(leftPanel)) {\n            leftPanel.scrollTop = target.scrollTop;\n        }\n    }\n    scrollUiUpdate(args) {\n        if (!this.parent) {\n            return;\n        }\n        const dateHeader = this.parent.element.querySelector('.' + DATE_HEADER_WRAP_CLASS);\n        const headerBarHeight = this.getHeaderBarHeight();\n        const timeCells = this.getLeftPanelElement();\n        const content = this.getScrollableElement();\n        const header = this.getDatesHeaderElement();\n        const scrollerHeight = this.parent.element.offsetHeight - headerBarHeight - header.offsetHeight;\n        this.setColWidth(content);\n        this.setContentHeight(content, timeCells, scrollerHeight);\n        const scrollBarWidth = getScrollBarWidth();\n        // eslint-disable-next-line @typescript-eslint/no-explicit-any\n        header.firstElementChild.style[args.cssProperties.rtlBorder] = '';\n        // eslint-disable-next-line @typescript-eslint/no-explicit-any\n        header.style[args.cssProperties.rtlPadding] = '';\n        const isDateHeaderScroll = this.parent.enableAllDayScroll ? !((content.offsetWidth - content.clientWidth) <=\n            (dateHeader.offsetWidth - dateHeader.clientWidth) && dateHeader.classList.contains('e-all-day-scroll')) : true;\n        if (content.offsetWidth - content.clientWidth > 0 && isDateHeaderScroll) {\n            // eslint-disable-next-line @typescript-eslint/no-explicit-any\n            header.firstElementChild.style[args.cssProperties.border] = scrollBarWidth > 0 ? '1px' : '0px';\n            // eslint-disable-next-line @typescript-eslint/no-explicit-any\n            header.style[args.cssProperties.padding] = scrollBarWidth > 0 ? scrollBarWidth - 1 + 'px' : '0px';\n        }\n        else {\n            // eslint-disable-next-line @typescript-eslint/no-explicit-any\n            header.firstElementChild.style[args.cssProperties.border] = '';\n            // eslint-disable-next-line @typescript-eslint/no-explicit-any\n            header.style[args.cssProperties.padding] = '';\n        }\n        if (!args.isPreventScrollUpdate) {\n            if (this.parent.uiStateValues.isInitial) {\n                this.scrollToWorkHour();\n                this.parent.uiStateValues.isInitial = false;\n            }\n            else {\n                if (timeCells) {\n                    timeCells.scrollTop = this.parent.uiStateValues.top;\n                }\n                content.scrollTop = this.parent.uiStateValues.top;\n                content.scrollLeft = this.parent.uiStateValues.left;\n            }\n        }\n        if (this.parent.activeViewOptions.timeScale.enable) {\n            this.highlightCurrentTime();\n        }\n        this.retainScrollPosition();\n    }\n    setContentHeight(element, leftPanelElement, height) {\n        if (this.parent.isAdaptive && !this.isTimelineView()) {\n            element.style.height = (this.parent.height === 'auto') ? 'auto' : formatUnit(height);\n        }\n        else {\n            if (!isNullOrUndefined(leftPanelElement)) {\n                leftPanelElement.style.height = (this.parent.height === 'auto') ? 'auto'\n                    : formatUnit(height - this.getScrollXIndent(element));\n            }\n            element.style.height = (this.parent.height === 'auto') ? 'auto' : formatUnit(height);\n        }\n    }\n    scrollToWorkHour() {\n        if (this.parent.workHours.highlight) {\n            const firstWorkHourCell = this.element.querySelector('.' + WORK_HOURS_CLASS);\n            if (firstWorkHourCell) {\n                this.getScrollableElement().scrollTop = firstWorkHourCell.offsetTop;\n                this.parent.uiStateValues.top = firstWorkHourCell.offsetTop;\n                this.parent.uiStateValues.left = 0;\n            }\n        }\n    }\n    scrollToHour(hour, scrollDate) {\n        const date = this.parent.getStartEndTime(hour);\n        if (isNullOrUndefined(date) || !isNullOrUndefined(scrollDate)) {\n            return;\n        }\n        this.getScrollableElement().scrollTop = this.getTopFromDateTime(date);\n    }\n    generateColumnLevels() {\n        const level = this.getDateSlots(this.renderDates, this.parent.activeViewOptions.workDays);\n        let columnLevels = [];\n        if (this.parent.activeViewOptions.group.resources.length > 0) {\n            columnLevels = this.parent.resourceBase.generateResourceLevels(level);\n            if (this.parent.uiStateValues.isGroupAdaptive && this.parent.resourceBase.lastResourceLevel.length > 0) {\n                const resourceLevel = this.parent.resourceBase.lastResourceLevel[this.parent.uiStateValues.groupIndex];\n                const resStartHour = resourceLevel.resourceData[resourceLevel.resource.startHourField];\n                const resEndHour = resourceLevel.resourceData[resourceLevel.resource.endHourField];\n                const dateSlots = this.getDateSlots(resourceLevel.renderDates, resourceLevel.workDays, resStartHour, resEndHour);\n                columnLevels = [dateSlots];\n            }\n        }\n        else {\n            columnLevels.push(level);\n        }\n        this.colLevels = columnLevels;\n        return columnLevels;\n    }\n    // eslint-disable-next-line max-len\n    getDateSlots(renderDates, workDays, workStartHour = this.parent.workHours.start, workEndHour = this.parent.workHours.end) {\n        const dateCol = [];\n        const start = this.parent.getStartEndTime(workStartHour);\n        const end = this.parent.getStartEndTime(workEndHour);\n        for (const col of renderDates) {\n            const classList$$1 = [HEADER_CELLS_CLASS];\n            if (this.isCurrentDate(col)) {\n                classList$$1.push(CURRENT_DAY_CLASS);\n            }\n            dateCol.push({\n                date: col, type: 'dateHeader', className: classList$$1, colSpan: 1,\n                workDays: workDays, startHour: new Date(+start), endHour: new Date(+end)\n            });\n        }\n        return dateCol;\n    }\n    isWorkHourRange(date) {\n        return (this.getStartHour().getTime() <= date.getTime()) && (this.getEndHour().getTime() >= date.getTime());\n    }\n    highlightCurrentTime() {\n        if (this.parent.activeViewOptions.headerRows.length > 0 &&\n            this.parent.activeViewOptions.headerRows.slice(-1)[0].option !== 'Hour') {\n            return;\n        }\n        if (this.parent.showTimeIndicator && this.isWorkHourRange(this.parent.getCurrentTime())) {\n            const currentDateIndex = this.getCurrentTimeIndicatorIndex();\n            if (currentDateIndex.length > 0) {\n                const workCells = [].slice.call(this.element.querySelectorAll('.' + WORK_CELLS_CLASS));\n                if (workCells.length > 0) {\n                    this.changeCurrentTimePosition();\n                }\n                if (isNullOrUndefined(this.currentTimeIndicatorTimer)) {\n                    const currentDate = this.parent.getCurrentTime();\n                    const interval = MS_PER_MINUTE - ((currentDate.getSeconds() * 1000) + currentDate.getMilliseconds());\n                    if (interval <= (MS_PER_MINUTE - 1000)) {\n                        window.setTimeout(() => {\n                            if (!isNullOrUndefined(this.currentTimeIndicatorTimer)) {\n                                this.clearCurrentTimeIndicatorTimer();\n                                this.changeCurrentTimePosition();\n                                this.updateCurrentTimeIndicatorTimer();\n                            }\n                        }, interval);\n                    }\n                    this.updateCurrentTimeIndicatorTimer();\n                }\n            }\n            else {\n                this.clearCurrentTimeIndicatorTimer();\n            }\n        }\n        else {\n            this.clearCurrentTimeIndicatorTimer();\n        }\n    }\n    getCurrentTimeIndicatorIndex() {\n        const currentDateIndex = [];\n        if (!isNullOrUndefined(this.parent.resourceBase) && (this.parent.activeViewOptions.group.resources.length > 0) &&\n            !this.parent.uiStateValues.isGroupAdaptive) {\n            let count = 0;\n            for (const resource of this.parent.resourceBase.lastResourceLevel) {\n                const index = this.parent.getIndexOfDate(resource.renderDates, resetTime(this.parent.getCurrentTime()));\n                if (index >= 0) {\n                    const resIndex = this.parent.activeViewOptions.group.byDate ?\n                        (this.parent.resourceBase.lastResourceLevel.length * index) + count : count + index;\n                    currentDateIndex.push(resIndex);\n                }\n                count += this.parent.activeViewOptions.group.byDate ? 1 : resource.renderDates.length;\n            }\n        }\n        else {\n            const renderDates = (this.parent.uiStateValues.isGroupAdaptive && this.parent.resourceBase.lastResourceLevel.length > 0)\n                ? this.parent.resourceBase.lastResourceLevel[this.parent.uiStateValues.groupIndex].renderDates : this.renderDates;\n            const index = this.parent.getIndexOfDate(renderDates, resetTime(this.parent.getCurrentTime()));\n            if (index >= 0) {\n                currentDateIndex.push(index);\n            }\n        }\n        return currentDateIndex;\n    }\n    clearCurrentTimeIndicatorTimer() {\n        if (!isNullOrUndefined(this.currentTimeIndicatorTimer)) {\n            window.clearInterval(this.currentTimeIndicatorTimer);\n            this.currentTimeIndicatorTimer = null;\n            this.removeCurrentTimeIndicatorElements();\n        }\n    }\n    updateCurrentTimeIndicatorTimer() {\n        this.currentTimeIndicatorTimer = window.setInterval(() => { this.changeCurrentTimePosition(); }, MS_PER_MINUTE);\n    }\n    removeCurrentTimeIndicatorElements() {\n        const queryString = '.' + PREVIOUS_TIMELINE_CLASS + ',.' + CURRENT_TIMELINE_CLASS + ',.' + CURRENT_TIME_CLASS;\n        const timeIndicator = [].slice.call(this.element.querySelectorAll(queryString));\n        for (const indicator of timeIndicator) {\n            remove(indicator);\n        }\n    }\n    changeCurrentTimePosition() {\n        if (!this.parent || this.parent && this.parent.isDestroyed) {\n            return;\n        }\n        this.removeCurrentTimeIndicatorElements();\n        const currentDateIndex = this.getCurrentTimeIndicatorIndex();\n        const firstRow = this.parent.getContentTable().rows[0];\n        const top = this.getTopFromDateTime(this.parent.getCurrentTime());\n        const topInPx = formatUnit(top);\n        const rowIndex = Math.floor(top / firstRow.cells[0].offsetHeight);\n        const timeCellsWrap = this.getLeftPanelElement();\n        const timeTrs = [].slice.call(timeCellsWrap.querySelectorAll('tr'));\n        if (isNullOrUndefined(rowIndex) || isNaN(rowIndex) || rowIndex === timeTrs.length) {\n            return;\n        }\n        const curTimeWrap = [].slice.call(this.element.querySelectorAll('.' + TIMELINE_WRAPPER_CLASS));\n        for (let i = 0, length = currentDateIndex[0]; i < length; i++) {\n            curTimeWrap[i].appendChild(createElement('div', { className: PREVIOUS_TIMELINE_CLASS, styles: 'top:' + topInPx }));\n        }\n        for (const day of currentDateIndex) {\n            curTimeWrap[day].appendChild(createElement('div', { className: CURRENT_TIMELINE_CLASS, styles: 'top:' + topInPx }));\n        }\n        const currentTimeEle = createElement('div', {\n            innerHTML: this.parent.getTimeString(this.parent.getCurrentTime()),\n            className: CURRENT_TIME_CLASS,\n            styles: 'top:' + topInPx\n        });\n        if (rowIndex <= timeTrs.length) {\n            removeClass(timeCellsWrap.querySelectorAll('.' + HIDE_CHILDS_CLASS), HIDE_CHILDS_CLASS);\n            if (timeTrs[rowIndex]) {\n                addClass([timeTrs[rowIndex].lastElementChild], HIDE_CHILDS_CLASS);\n            }\n            prepend([currentTimeEle], timeCellsWrap);\n            currentTimeEle.style.top = formatUnit(currentTimeEle.offsetTop - (currentTimeEle.offsetHeight / 2));\n        }\n    }\n    getTopFromDateTime(date) {\n        const startHour = this.getStartHour();\n        const diffInMinutes = ((date.getHours() - startHour.getHours()) * 60) + (date.getMinutes() - startHour.getMinutes());\n        return (diffInMinutes * this.getWorkCellHeight() * this.parent.activeViewOptions.timeScale.slotCount) /\n            this.parent.activeViewOptions.timeScale.interval;\n    }\n    getWorkCellHeight() {\n        return parseFloat(this.element.querySelector('.' + WORK_CELLS_CLASS).getBoundingClientRect().height.toFixed(2));\n    }\n    getTdContent(date, type, groupIndex) {\n        let cntEle;\n        const wrapper = createElement('div');\n        let templateName = '';\n        const templateId = this.parent.element.id + '_';\n        switch (type) {\n            case 'dateHeader':\n                if (this.parent.activeViewOptions.dateHeaderTemplate) {\n                    templateName = 'dateHeaderTemplate';\n                    const args = { date: date, type: type };\n                    const viewName = this.parent.activeViewOptions.dateHeaderTemplateName;\n                    cntEle = [].slice.call(this.parent.getDateHeaderTemplate()(args, this.parent, templateName, templateId + viewName + templateName, false));\n                }\n                else {\n                    wrapper.innerHTML = this.parent.activeView.isTimelineView() ?\n                        `<span class=\"e-header-date e-navigate\">${this.getTimelineDate(date)}</span>` :\n                        `<div class=\"e-header-day\">${capitalizeFirstWord(this.getDayName(date), 'single')}</div>` +\n                            `<div class=\"e-header-date e-navigate\" role=\"link\">${this.getDate(date)}</div>`;\n                    cntEle = [].slice.call(wrapper.childNodes);\n                }\n                break;\n            case 'majorSlot':\n                if (this.parent.activeViewOptions.timeScale.majorSlotTemplate) {\n                    templateName = 'majorSlotTemplate';\n                    const args = { date: date, type: type };\n                    cntEle = [].slice.call(this.parent.getMajorSlotTemplate()(args, this.parent, templateName, templateId + templateName, false));\n                }\n                else {\n                    wrapper.innerHTML = `<span>${this.getTime(date)}</span>`;\n                    cntEle = [].slice.call(wrapper.childNodes);\n                }\n                break;\n            case 'minorSlot':\n                if (this.parent.activeViewOptions.timeScale.minorSlotTemplate) {\n                    templateName = 'minorSlotTemplate';\n                    const args = { date: date, type: type };\n                    cntEle = [].slice.call(this.parent.getMinorSlotTemplate()(args, this.parent, templateName, templateId + templateName, false));\n                }\n                else {\n                    cntEle = [].slice.call(wrapper.childNodes);\n                }\n                break;\n            case 'alldayCells':\n                if (this.parent.activeViewOptions.cellTemplate) {\n                    const viewName = this.parent.activeViewOptions.cellTemplateName;\n                    templateName = 'cellTemplate';\n                    const args = { date: date, type: type, groupIndex: groupIndex };\n                    cntEle = [].slice.call(this.parent.getCellTemplate()(args, this.parent, templateName, templateId + viewName + templateName, false));\n                }\n                break;\n        }\n        return cntEle;\n    }\n    refreshHeader() {\n        remove(this.element.querySelector('tbody tr'));\n        this.renderHeader();\n        this.parent.notify(contentReady, {});\n    }\n    renderLayout(type) {\n        this.setPanel(createElement('div', { className: TABLE_WRAP_CLASS }));\n        const clsList = [this.baseCssClass, this.viewClass];\n        clsList.push(type);\n        if (this.parent.activeViewOptions.group.byDate) {\n            clsList.push('e-by-date');\n        }\n        if (!this.parent.activeViewOptions.timeScale.enable) {\n            addClass([this.element], [TIMESCALE_DISABLE, this.viewClass]);\n        }\n        if (this.parent.activeViewOptions.allowVirtualScrolling) {\n            clsList.push(VIRTUAL_SCROLL_CLASS);\n        }\n        if (this.parent.eventSettings.ignoreWhitespace) {\n            clsList.push(IGNORE_WHITESPACE);\n        }\n        this.renderPanel(type);\n        addClass([this.element], clsList);\n        this.element.appendChild(this.createTableLayout(OUTER_TABLE_CLASS));\n        this.element.querySelector('table').setAttribute('role', 'presentation');\n        this.colLevels = this.generateColumnLevels();\n        this.renderHeader();\n        this.renderContent();\n        if (this.parent.uiStateValues.isGroupAdaptive && !this.parent.element.querySelector('.' + RESOURCE_TOOLBAR_CONTAINER)) {\n            this.renderResourceMobileLayout();\n        }\n        this.parent.notify(contentReady, {});\n    }\n    renderHeader() {\n        const tr = createElement('tr');\n        const dateTd = createElement('td');\n        dateTd.appendChild(this.renderDatesHeader());\n        if (this.parent.activeViewOptions.timeScale.enable) {\n            const indentTd = createElement('td', { className: LEFT_INDENT_CLASS });\n            indentTd.appendChild(this.renderLeftIndent());\n            tr.appendChild(indentTd);\n        }\n        tr.appendChild(dateTd);\n        prepend([tr], this.element.querySelector('tbody'));\n    }\n    renderContent() {\n        const tr = createElement('tr');\n        const workTd = createElement('td');\n        if (this.parent.isAdaptive) {\n            workTd.setAttribute('colspan', (this.parent.activeViewOptions.timeScale.enable ? '2' : '1'));\n            const scrollContainer = createElement('div', { className: SCROLL_CONTAINER_CLASS });\n            if (this.parent.activeViewOptions.timeScale.enable) {\n                scrollContainer.appendChild(this.renderTimeCells());\n            }\n            scrollContainer.appendChild(this.renderContentArea());\n            workTd.appendChild(scrollContainer);\n            EventHandler.add(scrollContainer, 'scroll', this.onAdaptiveScroll, this);\n            EventHandler.add(scrollContainer, Browser.touchMoveEvent, this.onAdaptiveMove, this);\n            tr.appendChild(workTd);\n        }\n        else {\n            workTd.appendChild(this.renderContentArea());\n            if (this.parent.activeViewOptions.timeScale.enable) {\n                const timesTd = createElement('td');\n                timesTd.appendChild(this.renderTimeCells());\n                tr.appendChild(timesTd);\n            }\n            tr.appendChild(workTd);\n        }\n        this.element.querySelector('tbody').appendChild(tr);\n    }\n    renderLeftIndent() {\n        const wrap = createElement('div', { className: LEFT_INDENT_WRAP_CLASS });\n        const tbl = this.createTableLayout();\n        const trEle = createElement('tr');\n        const rowCount = this.colLevels.length;\n        let nth;\n        for (let i = 0; i < rowCount; i++) {\n            const ntr = trEle.cloneNode();\n            const data = { className: [(this.colLevels[i][0] && this.colLevels[i][0].className[0])], type: 'emptyCells' };\n            if (this.parent.activeViewOptions.showWeekNumber && data.className.indexOf(HEADER_CELLS_CLASS) !== -1) {\n                data.className.push(WEEK_NUMBER_CLASS);\n                const weekNo = this.parent.getWeekNumberContent(this.renderDates);\n                data.template = [createElement('span', {\n                        innerHTML: '' + weekNo,\n                        attrs: { title: this.parent.localeObj.getConstant('week') + ' ' + weekNo }\n                    })];\n            }\n            nth = this.createTd(data);\n            this.parent.renderHeaderIndentTemplate(data, nth);\n            ntr.appendChild(nth);\n            tbl.querySelector('tbody').appendChild(ntr);\n        }\n        const ntr = trEle.cloneNode();\n        const appointmentExpandCollapse = createElement('div', {\n            attrs: {\n                'tabindex': '0', 'role': 'list',\n                title: this.parent.localeObj.getConstant('expandAllDaySection'), 'aria-disabled': 'false', 'aria-label': 'Expand section'\n            },\n            className: ALLDAY_APPOINTMENT_SECTION_CLASS + ' ' + APPOINTMENT_ROW_EXPAND_CLASS + ' ' +\n                ICON + ' ' + DISABLE_CLASS\n        });\n        const data = { className: [ALLDAY_CELLS_CLASS], type: 'emptyCells' };\n        nth = this.createTd(data);\n        nth.appendChild(appointmentExpandCollapse);\n        this.parent.renderHeaderIndentTemplate(data, nth);\n        ntr.appendChild(nth);\n        tbl.querySelector('tbody').appendChild(ntr);\n        wrap.appendChild(tbl);\n        return wrap;\n    }\n    renderDatesHeader() {\n        const container = createElement('div', { className: DATE_HEADER_CONTAINER_CLASS });\n        const wrap = createElement('div', { className: DATE_HEADER_WRAP_CLASS });\n        container.appendChild(wrap);\n        const tbl = this.createTableLayout();\n        const trEle = createElement('tr');\n        const rowCount = this.colLevels.length;\n        const lastLevel = this.colLevels[rowCount - 1];\n        for (let i = 0; i < rowCount; i++) {\n            const ntr = trEle.cloneNode();\n            addClass([ntr], HEADER_ROW_CLASS);\n            const level = this.colLevels[i];\n            for (let j = 0; j < level.length; j++) {\n                ntr.appendChild(this.createTd(level[j]));\n            }\n            tbl.querySelector('tbody').appendChild(ntr);\n        }\n        this.createAllDayRow(tbl, lastLevel);\n        this.createColGroup(tbl, lastLevel);\n        wrap.appendChild(tbl);\n        return container;\n    }\n    createAllDayRow(table, tdData) {\n        const ntr = createElement('tr');\n        addClass([ntr], ALLDAY_ROW_CLASS);\n        for (let j = 0; j < tdData.length; j++) {\n            const td = extend({}, tdData[j]);\n            td.className = [ALLDAY_CELLS_CLASS];\n            td.type = 'alldayCells';\n            const ntd = this.createTd(td);\n            ntd.setAttribute('data-date', td.date.getTime().toString());\n            if (!isNullOrUndefined(td.groupIndex)) {\n                ntd.setAttribute('data-group-index', '' + td.groupIndex);\n            }\n            else if (this.parent.uiStateValues.isGroupAdaptive) {\n                ntd.setAttribute('data-group-index', '' + this.parent.uiStateValues.groupIndex);\n            }\n            this.wireCellEvents(ntd);\n            ntr.appendChild(ntd);\n        }\n        table.querySelector('tbody').appendChild(ntr);\n        const thead = createElement('thead');\n        thead.appendChild(this.createEventWrapper('allDay'));\n        prepend([thead], table);\n    }\n    createTd(td) {\n        const tdEle = createElement('td');\n        this.addAttributes(td, tdEle);\n        if (td.date && td.type) {\n            const ele = this.getTdContent(td.date, td.type, td.groupIndex);\n            if (ele && ele.length) {\n                append(ele, tdEle);\n            }\n        }\n        if (!this.parent.isMinMaxDate(resetTime(new Date('' + td.date)))) {\n            addClass([tdEle], DISABLE_DATES);\n        }\n        if (td.type === 'resourceHeader') {\n            this.setResourceHeaderContent(tdEle, td);\n        }\n        if (td.type === 'dateHeader' && td.className.indexOf(HEADER_CELLS_CLASS) >= 0) {\n            tdEle.setAttribute('data-date', td.date.getTime().toString());\n            if (!isNullOrUndefined(td.groupIndex)) {\n                tdEle.setAttribute('data-group-index', '' + td.groupIndex);\n            }\n            this.wireMouseEvents(tdEle);\n        }\n        const args = { elementType: td.type, element: tdEle, date: td.date, groupIndex: td.groupIndex };\n        this.parent.trigger(renderCell, args);\n        return tdEle;\n    }\n    wireCellEvents(element) {\n        EventHandler.add(element, 'mousedown', this.parent.workCellAction.cellMouseDown, this.parent.workCellAction);\n        this.wireMouseEvents(element);\n    }\n    wireMouseEvents(element) {\n        EventHandler.add(element, 'click', this.parent.workCellAction.cellClick, this.parent.workCellAction);\n        if (!this.parent.isAdaptive) {\n            EventHandler.add(element, 'dblclick', this.parent.workCellAction.cellDblClick, this.parent.workCellAction);\n        }\n    }\n    renderTimeCells() {\n        const wrap = createElement('div', { className: TIME_CELLS_WRAP_CLASS });\n        const tbl = this.createTableLayout();\n        const trEle = createElement('tr');\n        const handler = (r) => {\n            r.type = r.first ? 'majorSlot' : 'minorSlot';\n            r.className = r.last ? [TIME_CELLS_CLASS, TIME_SLOT_CLASS] : [TIME_SLOT_CLASS];\n            const ntr = trEle.cloneNode();\n            const data = { date: r.date, type: r.type, className: r.className };\n            ntr.appendChild(this.createTd(data));\n            tbl.querySelector('tbody').appendChild(ntr);\n            return r;\n        };\n        this.getTimeSlotRows(handler);\n        wrap.appendChild(tbl);\n        return wrap;\n    }\n    renderContentArea() {\n        const wrap = createElement('div', { className: CONTENT_WRAP_CLASS });\n        const tbl = this.createTableLayout(CONTENT_TABLE_CLASS);\n        this.addAutoHeightClass(tbl);\n        this.renderContentTable(tbl);\n        this.createColGroup(tbl, this.colLevels.slice(-1)[0]);\n        wrap.appendChild(tbl);\n        this.wireCellEvents(tbl.querySelector('tbody'));\n        EventHandler.add(wrap, 'scroll', this.onContentScroll, this);\n        EventHandler.add(wrap, Browser.touchMoveEvent, this.onAdaptiveMove, this);\n        return wrap;\n    }\n    renderContentTable(table) {\n        const tr = createElement('tr', { attrs: { role: 'row' } });\n        const td = createElement('td', { attrs: { role: 'gridcell', 'aria-selected': 'false' } });\n        const tbody = table.querySelector('tbody');\n        const handler = (r) => {\n            const ntr = tr.cloneNode();\n            for (const tdData of this.colLevels[this.colLevels.length - 1]) {\n                const ntd = this.createContentTd(tdData, r, td);\n                ntr.appendChild(ntd);\n            }\n            tbody.appendChild(ntr);\n            return r;\n        };\n        this.getTimeSlotRows(handler);\n        this.renderContentTableHeader(table);\n    }\n    createContentTd(tdData, r, td) {\n        const ntd = td.cloneNode();\n        if (tdData.colSpan) {\n            ntd.setAttribute('colspan', tdData.colSpan.toString());\n        }\n        const clsName = this.getContentTdClass(r);\n        const cellDate = resetTime(tdData.date);\n        if (!this.parent.isMinMaxDate(cellDate)) {\n            clsName.push(DISABLE_DATES);\n        }\n        setTime(cellDate, getDateInMs(r.date));\n        let type = 'workCells';\n        if (tdData.className.indexOf(RESOURCE_PARENT_CLASS) !== -1) {\n            clsName.push(RESOURCE_GROUP_CELLS_CLASS);\n            type = 'resourceGroupCells';\n        }\n        if (this.parent.workHours.highlight && ((this.parent.activeViewOptions.timeScale.enable &&\n            this.isWorkHour(cellDate, tdData.startHour, tdData.endHour, tdData.workDays)) ||\n            (!this.parent.activeViewOptions.timeScale.enable && this.isWorkDay(cellDate, tdData.workDays)))) {\n            clsName.push(WORK_HOURS_CLASS);\n        }\n        addClass([ntd], clsName);\n        if (this.parent.activeViewOptions.cellTemplate) {\n            const args = { date: cellDate, type: type, groupIndex: tdData.groupIndex };\n            const scheduleId = this.parent.element.id + '_';\n            const viewName = this.parent.activeViewOptions.cellTemplateName;\n            const templateId = scheduleId + viewName + 'cellTemplate';\n            const tooltipTemplate = [].slice.call(this.parent.getCellTemplate()(args, this.parent, 'cellTemplate', templateId, false));\n            append(tooltipTemplate, ntd);\n        }\n        ntd.setAttribute('data-date', cellDate.getTime().toString());\n        if (!isNullOrUndefined(tdData.groupIndex) || this.parent.uiStateValues.isGroupAdaptive) {\n            const groupIndex = this.parent.uiStateValues.isGroupAdaptive ? this.parent.uiStateValues.groupIndex :\n                tdData.groupIndex;\n            ntd.setAttribute('data-group-index', '' + groupIndex);\n        }\n        const args = { elementType: type, element: ntd, date: cellDate, groupIndex: tdData.groupIndex };\n        this.parent.trigger(renderCell, args);\n        return ntd;\n    }\n    getContentTdClass(r) {\n        return r.last ? [WORK_CELLS_CLASS] : [WORK_CELLS_CLASS, ALTERNATE_CELLS_CLASS];\n    }\n    renderContentTableHeader(table) {\n        const thead = createElement('thead');\n        thead.appendChild(this.createEventWrapper());\n        if (this.parent.activeViewOptions.timeScale.enable) {\n            thead.appendChild(this.createEventWrapper('timeIndicator'));\n        }\n        prepend([thead], table);\n    }\n    createEventWrapper(type = '') {\n        const tr = createElement('tr');\n        const levels = this.colLevels.slice(-1)[0];\n        for (let i = 0, len = levels.length; i < len; i++) {\n            const col = levels[i];\n            const appointmentWrap = createElement('td', {\n                className: (type === 'allDay') ? ALLDAY_APPOINTMENT_WRAPPER_CLASS : (type === 'timeIndicator') ?\n                    TIMELINE_WRAPPER_CLASS : DAY_WRAPPER_CLASS, attrs: { 'data-date': col.date.getTime().toString() }\n            });\n            if (!isNullOrUndefined(col.groupIndex)) {\n                appointmentWrap.setAttribute('data-group-index', col.groupIndex.toString());\n            }\n            if (type === '') {\n                const innerWrapper = createElement('div', {\n                    id: APPOINTMENT_WRAPPER_CLASS + '-' + i.toString(),\n                    className: APPOINTMENT_WRAPPER_CLASS\n                });\n                appointmentWrap.appendChild(innerWrapper);\n            }\n            tr.appendChild(appointmentWrap);\n        }\n        return tr;\n    }\n    getScrollableElement() {\n        if (this.parent.isAdaptive && !this.isTimelineView()) {\n            return this.element.querySelector('.' + SCROLL_CONTAINER_CLASS);\n        }\n        else {\n            return this.getContentAreaElement();\n        }\n    }\n    getLeftPanelElement() {\n        return this.element.querySelector('.' + TIME_CELLS_WRAP_CLASS);\n    }\n    getEndDateFromStartDate(start) {\n        const msMajorInterval = this.parent.activeViewOptions.timeScale.interval * MS_PER_MINUTE;\n        const msInterval = msMajorInterval / this.parent.activeViewOptions.timeScale.slotCount;\n        const end = new Date(start.getTime());\n        end.setMilliseconds(end.getMilliseconds() + msInterval);\n        return end;\n    }\n    getTimeSlotRows(handler) {\n        const rows = [];\n        const startHour = this.getStartHour();\n        const endHour = this.getEndHour();\n        const msMajorInterval = this.parent.activeViewOptions.timeScale.interval * MS_PER_MINUTE;\n        const msInterval = msMajorInterval / this.parent.activeViewOptions.timeScale.slotCount;\n        let length = Math.round(MS_PER_DAY / msInterval);\n        const msStartHour = startHour.getTime();\n        const msEndHour = endHour.getTime();\n        if (msStartHour !== msEndHour) {\n            length = (Math.abs(msEndHour - msStartHour) / msInterval) - ((new Date(msEndHour).getTimezoneOffset()\n                - new Date(msStartHour).getTimezoneOffset()) / (60 / this.parent.activeViewOptions.timeScale.slotCount));\n        }\n        if (!this.parent.activeViewOptions.timeScale.enable) {\n            length = 1;\n        }\n        const start = this.parent.getStartEndTime(this.parent.workHours.start);\n        const end = this.parent.getStartEndTime(this.parent.workHours.end);\n        for (let i = 0; i < length; i++) {\n            let dt = new Date(msStartHour + (msInterval * i));\n            if (isDaylightSavingTime(dt) || new Date(msStartHour).getTimezoneOffset() !== dt.getTimezoneOffset()) {\n                const timeOffset = new Date(msStartHour).getTimezoneOffset() - dt.getTimezoneOffset();\n                dt = new Date(dt.getTime() - (1000 * 60 * timeOffset));\n            }\n            const majorTickDivider = i % (msMajorInterval / msInterval);\n            const row = {\n                date: new Date('' + dt),\n                startHour: start,\n                endHour: end,\n                first: (majorTickDivider === 0),\n                middle: (majorTickDivider < this.parent.activeViewOptions.timeScale.slotCount - 1),\n                last: (majorTickDivider === this.parent.activeViewOptions.timeScale.slotCount - 1),\n                type: ''\n            };\n            if (handler) {\n                handler(row);\n            }\n            rows.push(row);\n        }\n        return rows;\n    }\n    destroy() {\n        if (!this.parent || this.parent && this.parent.isDestroyed) {\n            return;\n        }\n        this.clearCurrentTimeIndicatorTimer();\n        if (this.element) {\n            if (this.appointment) {\n                this.appointment.destroy();\n                this.appointment = null;\n            }\n            const contentScrollableEle = this.getContentAreaElement();\n            if (contentScrollableEle) {\n                EventHandler.remove(contentScrollableEle, 'scroll', this.onContentScroll);\n                EventHandler.remove(contentScrollableEle, Browser.touchMoveEvent, this.onAdaptiveMove);\n            }\n            if (this.parent.resourceBase) {\n                this.parent.resourceBase.destroy();\n            }\n            if (this.parent.scheduleTouchModule) {\n                this.parent.scheduleTouchModule.resetValues();\n            }\n            super.destroy();\n        }\n    }\n}\n\n/**\n * day view\n */\nclass Day extends VerticalView {\n    /**\n     * Constructor for day view\n     *\n     * @param {Schedule} parent Accepts the schedule instance\n     */\n    constructor(parent) {\n        super(parent);\n        this.viewClass = 'e-day-view';\n    }\n    /**\n     * Get module name.\n     *\n     * @returns {string} Returns the module name.\n     */\n    getModuleName() {\n        return 'day';\n    }\n}\n\n/**\n * week view\n */\nclass Week extends VerticalView {\n    /**\n     * Constructor for week view\n     *\n     * @param {Schedule} parent Accepts the schedule instance\n     */\n    constructor(parent) {\n        super(parent);\n        this.viewClass = 'e-week-view';\n    }\n    startDate() {\n        return this.getViewStartDate();\n    }\n    endDate() {\n        return this.getViewEndDate();\n    }\n    /**\n     * Get module name.\n     *\n     * @returns {string} Returns the module name.\n     */\n    getModuleName() {\n        return 'week';\n    }\n}\n\n/**\n * work week view\n */\nclass WorkWeek extends VerticalView {\n    /**\n     * Constructor for work week view\n     *\n     * @param {Schedule} parent Accepts the schedule instance\n     */\n    constructor(parent) {\n        super(parent);\n        this.viewClass = 'e-work-week-view';\n    }\n    startDate() {\n        return this.getViewStartDate();\n    }\n    endDate() {\n        return this.getViewEndDate();\n    }\n    /**\n     * Get module name.\n     *\n     * @returns {string} Returns the module name.\n     */\n    getModuleName() {\n        return 'workWeek';\n    }\n}\n\n/* eslint-disable @typescript-eslint/no-explicit-any */\n/**\n * month view\n */\nclass Month extends ViewBase {\n    constructor(parent) {\n        super(parent);\n        this.dayNameFormat = 'wide';\n        this.viewClass = 'e-month-view';\n        this.isInverseTableSelect = false;\n        this.monthEvent = null;\n        this.monthDates = {};\n    }\n    addEventListener() {\n        this.parent.on(scrollUiUpdate, this.onScrollUIUpdate, this);\n        this.parent.on(dataReady, this.onDataReady, this);\n        this.parent.on(cellClick, this.onCellClick, this);\n    }\n    removeEventListener() {\n        if (this.parent) {\n            this.parent.off(scrollUiUpdate, this.onScrollUIUpdate);\n            this.parent.off(dataReady, this.onDataReady);\n            this.parent.off(cellClick, this.onCellClick);\n        }\n    }\n    // eslint-disable-next-line @typescript-eslint/no-unused-vars\n    onDataReady(args) {\n        this.monthEvent = new MonthEvent(this.parent);\n        this.monthEvent.renderAppointments();\n        this.parent.notify(eventsLoaded, {});\n    }\n    // eslint-disable-next-line @typescript-eslint/no-unused-vars\n    onCellClick(event) { }\n    onContentScroll(e) {\n        this.parent.removeNewEventElement();\n        this.parent.notify(virtualScroll, e);\n        this.scrollTopPanel(e.target);\n        this.scrollLeftPanel(e.target);\n        this.setPersistence();\n    }\n    scrollLeftPanel(target) {\n        const leftPanel = this.getLeftPanelElement();\n        if (leftPanel) {\n            leftPanel.scrollTop = target.scrollTop;\n        }\n    }\n    getLeftPanelElement() {\n        return this.element.querySelector('.' + WEEK_NUMBER_WRAPPER_CLASS);\n    }\n    onScrollUIUpdate(args) {\n        const headerHeight = this.getHeaderBarHeight();\n        const header = this.getDatesHeaderElement();\n        const content = this.getContentAreaElement();\n        const height = this.parent.element.offsetHeight - headerHeight - header.offsetHeight;\n        const leftPanel = this.getLeftPanelElement();\n        if (this.parent.height !== 'auto') {\n            this.setContentHeight(content, leftPanel, height);\n        }\n        const scrollBarWidth = getScrollBarWidth();\n        header.firstElementChild.style[args.cssProperties.rtlBorder] = '';\n        header.style[args.cssProperties.rtlPadding] = '';\n        if (content.offsetWidth - content.clientWidth > 0) {\n            header.firstElementChild.style[args.cssProperties.border] = scrollBarWidth > 0 ? '1px' : '0px';\n            header.style[args.cssProperties.padding] = scrollBarWidth > 0 ? scrollBarWidth - 1 + 'px' : '0px';\n        }\n        else {\n            header.firstElementChild.style[args.cssProperties.border] = '';\n            header.style[args.cssProperties.padding] = '';\n        }\n        this.setColWidth(content);\n        if (args.scrollPosition) {\n            if (leftPanel) {\n                leftPanel.scrollTop = args.scrollPosition.top;\n            }\n            content.scrollTop = args.scrollPosition.top;\n            content.scrollLeft = args.scrollPosition.left;\n        }\n        else {\n            const headerCell = this.element.querySelector('.' + HEADER_CELLS_CLASS + '[data-date=\"'\n                + this.parent.selectedDate.getTime().toString() + '\"]');\n            if (!isNullOrUndefined(headerCell)) {\n                content.scrollLeft = !this.parent.enableRtl ?\n                    headerCell.offsetLeft : -(this.parent.getContentTable().offsetWidth - headerCell.offsetLeft - headerCell.offsetWidth);\n            }\n            else {\n                content.scrollLeft = 0;\n            }\n        }\n        this.retainScrollPosition();\n    }\n    setContentHeight(content, leftPanelElement, height) {\n        content.style.height = 'auto';\n        if (this.parent.currentView === 'Month') {\n            content.style.height = formatUnit(height);\n        }\n        if (leftPanelElement) {\n            if (this.parent.currentView === 'MonthAgenda') {\n                height = this.element.querySelector('.' + CONTENT_TABLE_CLASS).offsetHeight;\n            }\n            leftPanelElement.style.height = 'auto';\n            leftPanelElement.style.height = formatUnit(height - this.getScrollXIndent(content));\n        }\n    }\n    generateColumnLevels() {\n        let colLevels = [];\n        const level = this.getDateSlots(this.renderDates, this.parent.activeViewOptions.workDays);\n        if (this.parent.activeViewOptions.group.resources.length > 0) {\n            colLevels = this.parent.resourceBase.generateResourceLevels(level);\n            if (this.parent.currentView === 'MonthAgenda') {\n                colLevels = [level];\n            }\n            if (this.parent.uiStateValues.isGroupAdaptive && this.parent.resourceBase.lastResourceLevel.length > 0) {\n                const resourceLevel = this.parent.resourceBase.lastResourceLevel[this.parent.uiStateValues.groupIndex];\n                colLevels = [this.getDateSlots(resourceLevel.renderDates, resourceLevel.workDays)];\n            }\n        }\n        else {\n            colLevels.push(level);\n        }\n        this.colLevels = colLevels;\n        return colLevels;\n    }\n    getDateSlots(renderDates, workDays) {\n        const count = this.parent.activeViewOptions.showWeekend ? WEEK_LENGTH : workDays.length;\n        const dateSlots = [];\n        for (let col = 0; col < count; col++) {\n            const classList$$1 = [HEADER_CELLS_CLASS];\n            const currentDateIndex = renderDates.slice(0, count).map((date) => date.getDay());\n            if (this.isCurrentMonth(this.parent.selectedDate) && currentDateIndex.indexOf(this.parent.getCurrentTime().getDay()) === col) {\n                classList$$1.push(CURRENT_DAY_CLASS);\n            }\n            dateSlots.push({ date: renderDates[col], type: 'monthDay', className: classList$$1, colSpan: 1, workDays: workDays });\n        }\n        return dateSlots;\n    }\n    getDayNameFormat() {\n        if (this.parent.isAdaptive || this.parent.activeViewOptions.group.resources.length > 0) {\n            return 'abbreviated';\n        }\n        return 'wide';\n    }\n    renderLayout(type) {\n        this.dayNameFormat = this.getDayNameFormat();\n        this.setPanel(createElement('div', { className: TABLE_WRAP_CLASS }));\n        const clsList = [this.viewClass];\n        clsList.push(type);\n        if (this.parent.activeViewOptions.group.byDate) {\n            clsList.push('e-by-date');\n        }\n        if (this.parent.activeViewOptions.allowVirtualScrolling) {\n            clsList.push(VIRTUAL_SCROLL_CLASS);\n        }\n        if (this.parent.eventSettings.ignoreWhitespace) {\n            clsList.push(IGNORE_WHITESPACE);\n        }\n        addClass([this.element], clsList);\n        this.renderPanel(type);\n        this.element.appendChild(this.createTableLayout(OUTER_TABLE_CLASS));\n        this.element.querySelector('table').setAttribute('role', 'presentation');\n        this.colLevels = this.generateColumnLevels();\n        this.renderHeader();\n        this.renderContent();\n        const target = (this.parent.currentView === 'MonthAgenda') ? this.parent.activeView.getPanel() : this.parent.element;\n        if (this.parent.uiStateValues.isGroupAdaptive && !target.querySelector('.' + RESOURCE_TOOLBAR_CONTAINER)) {\n            this.renderResourceMobileLayout();\n        }\n        this.parent.notify(contentReady, {});\n    }\n    refreshHeader() {\n        remove(this.element.querySelector('tbody tr'));\n        this.renderHeader();\n        this.parent.notify(contentReady, {});\n    }\n    wireCellEvents(element) {\n        EventHandler.add(element, 'mousedown', this.parent.workCellAction.cellMouseDown, this.parent.workCellAction);\n        EventHandler.add(element, 'click', this.parent.workCellAction.cellClick, this.parent.workCellAction);\n        if (!this.parent.isAdaptive) {\n            EventHandler.add(element, 'dblclick', this.parent.workCellAction.cellDblClick, this.parent.workCellAction);\n        }\n    }\n    renderHeader() {\n        const tr = createElement('tr');\n        this.renderLeftIndent(tr);\n        const dateTd = createElement('td');\n        dateTd.appendChild(this.renderDatesHeader());\n        tr.appendChild(dateTd);\n        prepend([tr], this.element.querySelector('tbody'));\n    }\n    renderLeftIndent(tr) {\n        if (this.parent.activeViewOptions.showWeekNumber) {\n            tr.appendChild(createElement('td', { className: 'e-left-indent' }));\n        }\n    }\n    renderContent() {\n        const tr = createElement('tr');\n        if (this.parent.activeViewOptions.showWeekNumber) {\n            tr.appendChild(this.renderWeekNumberContent());\n        }\n        const workTd = createElement('td');\n        const wrap = createElement('div', { className: CONTENT_WRAP_CLASS });\n        const contentArea = this.renderContentArea();\n        if (this.parent.currentView === 'Month') {\n            wrap.appendChild(contentArea);\n        }\n        else {\n            const monthAgendaWrapper = createElement('div', { className: TABLE_CONTAINER_CLASS });\n            monthAgendaWrapper.appendChild(contentArea);\n            wrap.appendChild(monthAgendaWrapper);\n        }\n        EventHandler.add(wrap, 'scroll', this.onContentScroll, this);\n        workTd.appendChild(wrap);\n        tr.appendChild(workTd);\n        this.element.querySelector('tbody').appendChild(tr);\n        this.renderAppointmentContainer();\n    }\n    renderWeekNumberContent() {\n        const dateCol = this.renderDates.map((date) => new Date(+date));\n        const td = createElement('td');\n        const contentWrapper = createElement('div', { className: WEEK_NUMBER_WRAPPER_CLASS });\n        td.appendChild(contentWrapper);\n        const contentWrapTable = this.createTableLayout();\n        contentWrapper.appendChild(contentWrapTable);\n        const noOfDays = this.parent.activeViewOptions.showWeekend ? WEEK_LENGTH :\n            this.parent.activeViewOptions.workDays.length;\n        for (let i = 0, length = (this.renderDates.length / noOfDays); i < length; i++) {\n            const dates = dateCol.splice(0, noOfDays);\n            const weekNumber = this.parent.getWeekNumberContent(dates);\n            contentWrapTable.querySelector('tbody').appendChild(this.createWeekNumberElement(weekNumber));\n        }\n        return td;\n    }\n    renderAppointmentContainer() {\n        //Here needs to render mobile view appointment details on selected date\n    }\n    renderDatesHeader() {\n        const container = createElement('div', { className: DATE_HEADER_CONTAINER_CLASS });\n        const wrap = createElement('div', { className: DATE_HEADER_WRAP_CLASS });\n        container.appendChild(wrap);\n        const table = this.createTableLayout();\n        this.createColGroup(table, this.colLevels[this.colLevels.length - 1]);\n        const trEle = createElement('tr');\n        for (let i = 0; i < this.colLevels.length; i++) {\n            const level = this.colLevels[i];\n            const ntr = trEle.cloneNode();\n            for (let j = 0; j < level.length; j++) {\n                const td = level[j];\n                ntr.appendChild(this.createHeaderCell(td));\n            }\n            table.querySelector('tbody').appendChild(ntr);\n        }\n        wrap.appendChild(table);\n        return container;\n    }\n    createHeaderCell(td) {\n        const tdEle = createElement('td');\n        this.addAttributes(td, tdEle);\n        if (td.type === 'monthDay') {\n            const ele = createElement('span', { innerHTML: capitalizeFirstWord(this.parent.getDayNames(this.dayNameFormat)[td.date.getDay()], 'single') });\n            tdEle.appendChild(ele);\n        }\n        if (td.type === 'resourceHeader') {\n            this.setResourceHeaderContent(tdEle, td);\n        }\n        if (td.type === 'dateHeader') {\n            addClass([tdEle], DATE_HEADER_CLASS);\n            tdEle.setAttribute('data-date', td.date.getTime().toString());\n            if (this.parent.activeViewOptions.dateHeaderTemplate) {\n                const cellArgs = { date: td.date, type: td.type };\n                const elementId = this.parent.element.id + '_';\n                const viewName = this.parent.activeViewOptions.dateHeaderTemplateName;\n                const templateId = elementId + viewName + 'dateHeaderTemplate';\n                const dateTemplate = [].slice.call(this.parent.getDateHeaderTemplate()(cellArgs, this.parent, 'dateHeaderTemplate', templateId, false));\n                if (dateTemplate && dateTemplate.length) {\n                    append(dateTemplate, tdEle);\n                }\n            }\n            else {\n                const ele = createElement('span', { className: NAVIGATE_CLASS });\n                const skeleton = 'full';\n                const title = this.parent.globalize.formatDate(td.date, { skeleton: skeleton, calendar: this.parent.getCalendarMode() });\n                ele.setAttribute('title', capitalizeFirstWord(title, 'multiple'));\n                const innerText = (this.parent.calendarUtil.isMonthStart(td.date) && !this.isCurrentDate(td.date) && !this.parent.isAdaptive) ?\n                    this.parent.globalize.formatDate(td.date, { format: 'MMM d', calendar: this.parent.getCalendarMode() }) :\n                    this.parent.globalize.formatDate(td.date, { skeleton: 'd', calendar: this.parent.getCalendarMode() });\n                ele.innerHTML = capitalizeFirstWord(innerText, 'single');\n                tdEle.appendChild(ele);\n            }\n            this.wireCellEvents(tdEle);\n        }\n        const args = { elementType: td.type, element: tdEle, date: td.date, groupIndex: td.groupIndex };\n        this.parent.trigger(renderCell, args);\n        return tdEle;\n    }\n    getContentSlots() {\n        if (!(this.colLevels[this.colLevels.length - 1] && this.colLevels[this.colLevels.length - 1][0])) {\n            return [];\n        }\n        const slotDatas = [];\n        const prepareSlots = (rowIndex, renderDate, resData, classList$$1) => {\n            const data = {\n                date: new Date(+renderDate), groupIndex: resData.groupIndex, workDays: resData.workDays,\n                type: 'monthCells', className: classList$$1 || [WORK_CELLS_CLASS]\n            };\n            if (!slotDatas[rowIndex]) {\n                slotDatas[rowIndex] = [];\n            }\n            slotDatas[rowIndex].push(data);\n        };\n        const includeResource = this.parent.currentView !== 'MonthAgenda' &&\n            this.parent.activeViewOptions.group.resources.length > 0;\n        if (includeResource && !this.parent.uiStateValues.isGroupAdaptive && !this.parent.activeViewOptions.group.byDate) {\n            for (const res of this.colLevels[this.colLevels.length - 2]) {\n                const dates = res.renderDates.map((date) => new Date(+date));\n                const count = this.parent.activeViewOptions.showWeekend ? WEEK_LENGTH : res.workDays.length;\n                for (let i = 0; i < (res.renderDates.length / count); i++) {\n                    const colDates = dates.splice(0, count);\n                    for (const colDate of colDates) {\n                        prepareSlots(i, colDate, res);\n                    }\n                }\n            }\n        }\n        else {\n            const dates = this.renderDates.map((date) => new Date(+date));\n            const count = this.parent.activeViewOptions.showWeekend ? WEEK_LENGTH :\n                this.parent.activeViewOptions.workDays.length;\n            for (let i = 0; i < (this.renderDates.length / count); i++) {\n                const colDates = dates.splice(0, count);\n                for (const colDate of colDates) {\n                    if (includeResource) {\n                        const lastRow = this.colLevels[(this.colLevels.length - 1)];\n                        const resourcesTd = lastRow.slice(0, lastRow.length / count);\n                        for (let resIndex = 0; resIndex < resourcesTd.length; resIndex++) {\n                            let clsList;\n                            if (resIndex !== 0) {\n                                clsList = [WORK_CELLS_CLASS, DISABLE_DATE];\n                            }\n                            prepareSlots(i, colDate, resourcesTd[resIndex], clsList);\n                        }\n                    }\n                    else {\n                        prepareSlots(i, colDate, this.colLevels[this.colLevels.length - 1][0]);\n                    }\n                }\n            }\n        }\n        return slotDatas;\n    }\n    updateClassList(data) {\n        if (this.isOtherMonth(data.date)) {\n            data.className.push(OTHERMONTH_CLASS);\n        }\n        if (!this.parent.isMinMaxDate(data.date)) {\n            data.className.push(DISABLE_DATES);\n        }\n        if (this.parent.currentView === 'MonthAgenda' && this.parent.isSelectedDate(data.date)) {\n            data.className.push(SELECTED_CELL_CLASS);\n        }\n    }\n    isOtherMonth(date) {\n        return date.getTime() < this.monthDates.start.getTime() || date.getTime() > this.monthDates.end.getTime();\n    }\n    renderContentArea() {\n        const tbl = this.createTableLayout(CONTENT_TABLE_CLASS);\n        this.addAutoHeightClass(tbl);\n        if (this.parent.currentView === 'TimelineMonth') {\n            this.createColGroup(tbl, this.colLevels[this.colLevels.length - 1]);\n        }\n        const monthDate = new Date(this.parent.selectedDate.getTime());\n        this.monthDates = {\n            start: this.parent.calendarUtil.firstDateOfMonth(monthDate),\n            end: this.parent.calendarUtil.lastDateOfMonth(addMonths(monthDate, this.parent.activeViewOptions.interval - 1))\n        };\n        const tBody = tbl.querySelector('tbody');\n        append(this.getContentRows(), tBody);\n        this.wireCellEvents(tBody);\n        return tbl;\n    }\n    getContentRows() {\n        const trows = [];\n        const tr = createElement('tr', { attrs: { role: 'row' } });\n        const td = createElement('td', { attrs: { role: 'gridcell', 'aria-selected': 'false' } });\n        const slotDatas = this.getContentSlots();\n        for (let row = 0; row < slotDatas.length; row++) {\n            const ntr = tr.cloneNode();\n            for (let col = 0; col < slotDatas[row].length; col++) {\n                const ntd = this.createContentTd(slotDatas[row][col], td);\n                ntr.appendChild(ntd);\n            }\n            trows.push(ntr);\n        }\n        return trows;\n    }\n    createContentTd(data, td) {\n        const ntd = td.cloneNode();\n        if (data.colSpan) {\n            ntd.setAttribute('colspan', data.colSpan.toString());\n        }\n        this.updateClassList(data);\n        let type = data.type;\n        if (data.className.indexOf(RESOURCE_PARENT_CLASS) !== -1) {\n            data.className.push(RESOURCE_GROUP_CELLS_CLASS);\n            type = 'resourceGroupCells';\n        }\n        if (this.parent.workHours.highlight && this.isWorkDay(data.date, data.workDays)) {\n            data.className.push(WORKDAY_CLASS);\n        }\n        if (this.isCurrentDate(data.date)) {\n            data.className.push(CURRENTDATE_CLASS);\n        }\n        addClass([ntd], data.className);\n        ntd.setAttribute('data-date', data.date.getTime().toString());\n        if (!isNullOrUndefined(data.groupIndex) || this.parent.uiStateValues.isGroupAdaptive) {\n            const groupIndex = this.parent.uiStateValues.isGroupAdaptive ? this.parent.uiStateValues.groupIndex :\n                data.groupIndex;\n            ntd.setAttribute('data-group-index', '' + groupIndex);\n        }\n        this.renderDateHeaderElement(data, ntd);\n        if (this.parent.activeViewOptions.cellTemplate) {\n            const args = { date: data.date, type: type, groupIndex: data.groupIndex };\n            const scheduleId = this.parent.element.id + '_';\n            const viewName = this.parent.activeViewOptions.cellTemplateName;\n            const templateId = scheduleId + viewName + 'cellTemplate';\n            const cellTemplate = [].slice.call(this.parent.getCellTemplate()(args, this.parent, 'cellTemplate', templateId, false));\n            append(cellTemplate, ntd);\n        }\n        const args = { elementType: type, element: ntd, date: data.date, groupIndex: data.groupIndex };\n        this.parent.trigger(renderCell, args);\n        return ntd;\n    }\n    renderDateHeaderElement(data, ntd) {\n        if (this.parent.currentView === 'TimelineMonth') {\n            return;\n        }\n        const dateHeader = createElement('div', { className: DATE_HEADER_CLASS });\n        if (this.parent.activeViewOptions.cellHeaderTemplate) {\n            const args = { date: data.date, type: data.type, groupIndex: data.groupIndex };\n            const scheduleId = this.parent.element.id + '_';\n            const viewName = this.parent.activeViewOptions.cellHeaderTemplateName;\n            const templateId = scheduleId + viewName + 'cellHeaderTemplate';\n            const cellHeaderTemplate = [].slice.call(this.parent.getCellHeaderTemplate()(args, this.parent, 'cellHeaderTemplate', templateId, false));\n            append(cellHeaderTemplate, dateHeader);\n        }\n        else {\n            const innerText = (this.parent.calendarUtil.isMonthStart(data.date) && !this.isCurrentDate(data.date) && !this.parent.isAdaptive) ?\n                this.parent.globalize.formatDate(data.date, { format: 'MMM d', calendar: this.parent.getCalendarMode() }) :\n                this.parent.globalize.formatDate(data.date, { skeleton: 'd', calendar: this.parent.getCalendarMode() });\n            dateHeader.innerHTML = capitalizeFirstWord(innerText, 'single');\n        }\n        ntd.appendChild(dateHeader);\n        if (this.getModuleName() === 'month') {\n            addClass([dateHeader], NAVIGATE_CLASS);\n            const skeleton = 'full';\n            const announcementText = this.parent.globalize.formatDate(data.date, { skeleton: skeleton, calendar: this.parent.getCalendarMode() });\n            dateHeader.setAttribute('aria-label', announcementText);\n        }\n    }\n    getMonthStart(currentDate) {\n        const monthStart = getWeekFirstDate(this.parent.calendarUtil.firstDateOfMonth(currentDate), this.parent.activeViewOptions.firstDayOfWeek);\n        const start = new Date(monthStart.getFullYear(), monthStart.getMonth(), monthStart.getDate());\n        return start;\n    }\n    getMonthEnd(currentDate) {\n        const endDate = addMonths(currentDate, this.parent.activeViewOptions.interval - 1);\n        const lastWeekOfMonth = getWeekFirstDate(this.parent.calendarUtil.lastDateOfMonth(endDate), this.parent.activeViewOptions.firstDayOfWeek);\n        const monthEnd = addDays(lastWeekOfMonth, WEEK_LENGTH - 1);\n        return monthEnd;\n    }\n    getRenderDates(workDays) {\n        const renderDates = [];\n        const currentDate = resetTime(this.parent.selectedDate);\n        let start = this.getMonthStart(currentDate);\n        const monthEnd = this.getMonthEnd(currentDate);\n        do {\n            if (this.parent.activeViewOptions.showWeekend) {\n                renderDates.push(start);\n            }\n            else {\n                if (this.isWorkDay(start, workDays)) {\n                    renderDates.push(start);\n                }\n            }\n            start = addDays(start, 1);\n            if (start.getHours() > 0) {\n                start = resetTime(start);\n            }\n        } while (start.getTime() <= monthEnd.getTime());\n        if (!workDays) {\n            this.renderDates = renderDates;\n        }\n        if (this.parent.headerModule) {\n            this.parent.headerModule.previousNextIconHandler();\n        }\n        return renderDates;\n    }\n    getNextPreviousDate(type) {\n        if (type === 'next') {\n            return addMonths(this.parent.selectedDate, this.parent.activeViewOptions.interval);\n        }\n        else {\n            return addMonths(this.parent.selectedDate, -(this.parent.activeViewOptions.interval));\n        }\n    }\n    getEndDateFromStartDate(start) {\n        return addDays(new Date(start.getTime()), 1);\n    }\n    getDateRangeText() {\n        if (this.parent.isAdaptive || isNullOrUndefined(this.parent.activeViewOptions.dateFormat)) {\n            if (this.parent.activeViewOptions.interval > 1) {\n                const endDate = addMonths(lastDateOfMonth(this.parent.selectedDate), this.parent.activeViewOptions.interval - 1);\n                if (this.parent.selectedDate.getFullYear() === endDate.getFullYear()) {\n                    const monthNames = (this.parent.globalize.formatDate(this.parent.selectedDate, { format: 'MMMM', calendar: this.parent.getCalendarMode() })) + ' - ' +\n                        (this.parent.globalize.formatDate(endDate, { format: 'MMMM ', calendar: this.parent.getCalendarMode() })) +\n                        this.parent.globalize.formatDate(endDate, { skeleton: 'y', calendar: this.parent.getCalendarMode() });\n                    return capitalizeFirstWord(monthNames, 'single');\n                }\n                const text = (this.parent.globalize.formatDate(this.parent.selectedDate, { format: 'MMMM', calendar: this.parent.getCalendarMode() })) + ' ' +\n                    this.parent.selectedDate.getFullYear() + ' - ' +\n                    this.parent.globalize.formatDate(endDate, { format: 'MMMM ', calendar: this.parent.getCalendarMode() }) +\n                    this.parent.globalize.formatDate(endDate, { skeleton: 'y', calendar: this.parent.getCalendarMode() });\n                return capitalizeFirstWord(text, 'single');\n            }\n            const format = (this.parent.activeViewOptions.dateFormat) ? this.parent.activeViewOptions.dateFormat : 'MMMM y';\n            return capitalizeFirstWord(this.parent.globalize.formatDate(this.parent.selectedDate, { format: format, calendar: this.parent.getCalendarMode() }), 'single');\n        }\n        return this.formatDateRange(this.parent.selectedDate);\n    }\n    getLabelText(view) {\n        return this.parent.localeObj.getConstant(view) + ' of ' + capitalizeFirstWord(this.parent.globalize.formatDate(this.parent.selectedDate, { format: 'MMMM y', calendar: this.parent.getCalendarMode() }), 'single');\n    }\n    createWeekNumberElement(text) {\n        const tr = createElement('tr');\n        const td = createElement('td', {\n            className: WEEK_NUMBER_CLASS,\n            attrs: { 'title': (text ? this.parent.localeObj.getConstant('week') + ' ' + text : '') },\n            innerHTML: (text || '')\n        });\n        tr.appendChild(td);\n        const args = { elementType: 'weekNumberCell', element: td };\n        this.parent.trigger(renderCell, args);\n        return tr;\n    }\n    unWireEvents() {\n        const contentScrollableEle = this.element.querySelector('.' + CONTENT_WRAP_CLASS);\n        if (contentScrollableEle) {\n            EventHandler.remove(contentScrollableEle, 'scroll', this.onContentScroll);\n        }\n    }\n    getModuleName() {\n        return 'month';\n    }\n    destroy() {\n        if (!this.parent || this.parent && this.parent.isDestroyed) {\n            return;\n        }\n        if (this.element) {\n            if (this.monthEvent) {\n                this.monthEvent.destroy();\n                this.monthEvent = null;\n            }\n            this.unWireEvents();\n            if (this.parent.resourceBase) {\n                this.parent.resourceBase.destroy();\n            }\n            if (this.parent.scheduleTouchModule) {\n                this.parent.scheduleTouchModule.resetValues();\n            }\n            super.destroy();\n        }\n    }\n}\n\n/* eslint-disable @typescript-eslint/no-explicit-any */\n/**\n * year view\n */\nclass Year extends ViewBase {\n    constructor(parent) {\n        super(parent);\n        this.viewClass = 'e-year-view';\n        this.isInverseTableSelect = false;\n        this.yearEventModule = null;\n    }\n    getModuleName() {\n        return 'year';\n    }\n    renderLayout(className) {\n        if (this.parent.resourceBase) {\n            this.parent.resourceBase.generateResourceLevels([{ renderDates: this.parent.activeView.renderDates }]);\n        }\n        this.setPanel(createElement('div', { className: TABLE_WRAP_CLASS }));\n        const viewTypeClass = this.parent.activeViewOptions.orientation === 'Horizontal' ? 'e-horizontal' : 'e-vertical';\n        addClass([this.element], [this.viewClass, viewTypeClass, className]);\n        this.renderPanel(className);\n        const calendarTable = this.createTableLayout(OUTER_TABLE_CLASS);\n        this.element.appendChild(calendarTable);\n        this.element.querySelector('table').setAttribute('role', 'presentation');\n        const calendarTBody = calendarTable.querySelector('tbody');\n        this.rowCount = this.getRowColumnCount('row');\n        this.columnCount = this.getRowColumnCount('column');\n        this.renderHeader(calendarTBody);\n        this.renderContent(calendarTBody);\n        if (this.parent.currentView !== 'Year' && this.parent.uiStateValues.isGroupAdaptive) {\n            this.generateColumnLevels();\n            this.renderResourceMobileLayout();\n        }\n        this.wireEvents(this.element.querySelector('.' + CONTENT_WRAP_CLASS), 'scroll');\n        this.parent.notify(contentReady, {});\n    }\n    // eslint-disable-next-line @typescript-eslint/no-unused-vars\n    renderHeader(headerWrapper) { }\n    renderContent(content) {\n        const tr = createElement('tr');\n        content.appendChild(tr);\n        const td = createElement('td');\n        tr.appendChild(td);\n        this.element.querySelector('tbody').appendChild(tr);\n        const contentWrapper = createElement('div', { className: CONTENT_WRAP_CLASS });\n        td.appendChild(contentWrapper);\n        const calendarTable = this.createTableLayout('e-calendar-table');\n        contentWrapper.appendChild(calendarTable);\n        const cTr = createElement('tr');\n        calendarTable.querySelector('tbody').appendChild(cTr);\n        const cTd = createElement('td');\n        cTr.appendChild(cTd);\n        const calendarWrapper = createElement('div', { className: 'e-calendar-wrapper' });\n        cTd.appendChild(calendarWrapper);\n        const months = this.getMonths();\n        for (const month of months) {\n            const currentMonth = new Date(this.parent.selectedDate.getFullYear(), month, 1);\n            const calendarElement = createElement('div', {\n                className: 'e-month-calendar e-calendar',\n                attrs: { 'data-role': 'calendar' }\n            });\n            calendarElement.appendChild(this.renderCalendarHeader(currentMonth));\n            calendarElement.appendChild(this.renderCalendarContent(currentMonth));\n            calendarWrapper.appendChild(calendarElement);\n        }\n    }\n    renderCalendarHeader(currentDate) {\n        const headerWrapper = createElement('div', { className: 'e-header e-month' });\n        const headerContent = createElement('div', { className: 'e-day e-title', innerHTML: this.getMonthName(currentDate) });\n        headerWrapper.appendChild(headerContent);\n        this.parent.trigger(renderCell, { elementType: 'headerCells', element: headerContent, date: currentDate });\n        return headerWrapper;\n    }\n    renderCalendarContent(currentDate) {\n        const dateCollection = this.getMonthDates(currentDate);\n        const contentWrapper = createElement('div', { className: 'e-content e-month' });\n        const contentTable = this.createTableLayout('e-calendar-table ' + CONTENT_TABLE_CLASS);\n        contentWrapper.appendChild(contentTable);\n        const thead = createElement('thead', { className: 'e-week-header' });\n        const tr = createElement('tr');\n        let currentWeek = getWeekFirstDate(firstDateOfMonth(currentDate), this.parent.firstDayOfWeek);\n        if (this.parent.activeViewOptions.showWeekNumber) {\n            tr.appendChild(createElement('th'));\n        }\n        for (let i = 0; i < WEEK_LENGTH; i++) {\n            tr.appendChild(createElement('th', { innerHTML: this.parent.getDayNames('narrow')[currentWeek.getDay()] }));\n            currentWeek = new Date(currentWeek.getTime() + MS_PER_DAY);\n        }\n        thead.appendChild(tr);\n        prepend([thead], contentTable);\n        const tbody = contentTable.querySelector('tbody');\n        while (dateCollection.length > 0) {\n            const weekDates = dateCollection.splice(0, WEEK_LENGTH);\n            const tr = createElement('tr', { attrs: { 'role': 'row' } });\n            if (this.parent.activeViewOptions.showWeekNumber) {\n                const weekNumber = this.parent.getWeekNumberContent(weekDates);\n                const td = createElement('td', {\n                    className: 'e-week-number',\n                    attrs: { 'role': 'gridcell', 'title': 'Week ' + weekNumber },\n                    innerHTML: weekNumber\n                });\n                tr.appendChild(td);\n                this.parent.trigger(renderCell, { elementType: 'weekNumberCells', element: td });\n            }\n            for (const date of weekDates) {\n                const td = createElement('td', {\n                    className: 'e-cell ' + WORK_CELLS_CLASS,\n                    attrs: { 'role': 'gridcell', 'aria-selected': 'false', 'data-date': date.getTime().toString() }\n                });\n                const span = createElement('span', {\n                    className: 'e-day', innerHTML: this.parent.globalize.formatDate(date, { skeleton: 'd', calendar: this.parent.getCalendarMode() }),\n                    attrs: { title: this.parent.globalize.formatDate(date, { type: 'date', skeleton: 'full' }) }\n                });\n                td.appendChild(span);\n                let classList$$1 = [];\n                if (currentDate.getMonth() !== date.getMonth()) {\n                    classList$$1.push(OTHERMONTH_CLASS);\n                }\n                if (this.isCurrentDate(date) && currentDate.getMonth() === date.getMonth()) {\n                    classList$$1 = classList$$1.concat(['e-today', 'e-selected']);\n                }\n                if (classList$$1.length > 0) {\n                    addClass([td], classList$$1);\n                }\n                tr.appendChild(td);\n                this.wireEvents(td, 'cell');\n                this.parent.trigger(renderCell, { elementType: 'workCells', element: td, date: date });\n            }\n            tbody.appendChild(tr);\n        }\n        return contentWrapper;\n    }\n    createTableColGroup(count) {\n        const colGroupEle = createElement('colgroup');\n        for (let i = 0; i < count; i++) {\n            colGroupEle.appendChild(createElement('col'));\n        }\n        return colGroupEle;\n    }\n    getMonthName(date) {\n        const month = this.parent.globalize.formatDate(date, {\n            format: this.parent.activeViewOptions.dateFormat || 'MMMM y',\n            calendar: this.parent.getCalendarMode()\n        });\n        return capitalizeFirstWord(month, 'multiple');\n    }\n    generateColumnLevels() {\n        let colLevels = [];\n        const level = this.getDateSlots([this.parent.selectedDate], this.parent.activeViewOptions.workDays);\n        if (this.parent.activeViewOptions.group.resources.length > 0) {\n            colLevels = this.parent.resourceBase.generateResourceLevels(level);\n            if (this.parent.uiStateValues.isGroupAdaptive) {\n                const resourceLevel = this.parent.resourceBase.lastResourceLevel[this.parent.uiStateValues.groupIndex];\n                colLevels = [this.getDateSlots([this.parent.selectedDate], resourceLevel.workDays)];\n            }\n        }\n        else {\n            colLevels.push(level);\n        }\n        colLevels.pop();\n        this.colLevels = colLevels;\n        return colLevels;\n    }\n    // eslint-disable-next-line max-len\n    getDateSlots(renderDates, workDays, startHour = this.parent.workHours.start, endHour = this.parent.workHours.end) {\n        const dateCol = [{\n                date: renderDates[0], type: 'dateHeader', className: [HEADER_CELLS_CLASS], colSpan: 1, workDays: workDays,\n                startHour: new Date(+this.parent.globalize.parseDate(startHour, { skeleton: 'Hm' })),\n                endHour: new Date(+this.parent.globalize.parseDate(endHour, { skeleton: 'Hm' }))\n            }];\n        return dateCol;\n    }\n    getMonthDates(date) {\n        const startDate = getWeekFirstDate(firstDateOfMonth(date), this.parent.firstDayOfWeek);\n        const endDate = addDays(new Date(+startDate), (6 * WEEK_LENGTH));\n        const dateCollection = [];\n        for (let start = startDate; start.getTime() < endDate.getTime(); start = addDays(start, 1)) {\n            dateCollection.push(resetTime(new Date(start)));\n        }\n        return dateCollection;\n    }\n    getRowColumnCount(type) {\n        const months = this.getMonths();\n        const year = this.parent.selectedDate.getFullYear();\n        const monthDaysCount = [];\n        for (const month of months) {\n            monthDaysCount.push(new Date(year, month, 1).getDay() + new Date(year, month + 1, 0).getDate());\n        }\n        const maxCount = Math.max(...monthDaysCount);\n        let count;\n        if (type === 'row') {\n            count = this.parent.activeViewOptions.orientation === 'Horizontal' ? months.length : maxCount;\n        }\n        else {\n            count = this.parent.activeViewOptions.orientation === 'Horizontal' ? maxCount : months.length;\n        }\n        return count;\n    }\n    isCurrentDate(date) {\n        return resetTime(new Date()).getTime() === resetTime(new Date(date.getTime())).getTime();\n    }\n    getMonths() {\n        // eslint-disable-next-line prefer-spread\n        return Array.apply(null, { length: this.parent.activeViewOptions.monthsCount }).map((value, index) => this.parent.firstMonthOfYear + index);\n    }\n    onCellClick(e) {\n        const target = closest(e.target, '.' + WORK_CELLS_CLASS);\n        const startDate = this.parent.getDateFromElement(target);\n        const endDate = addDays(new Date(startDate.getTime()), 1);\n        const filteredEvents = this.parent.eventBase.filterEvents(startDate, endDate);\n        const moreEventArgs = { date: startDate, event: filteredEvents, element: e.target };\n        this.parent.quickPopup.moreEventClick(moreEventArgs, endDate);\n    }\n    onContentScroll(e) {\n        const target = e.target;\n        const headerWrapper = this.getDatesHeaderElement();\n        if (headerWrapper) {\n            headerWrapper.firstElementChild.scrollLeft = target.scrollLeft;\n        }\n        const scrollTopSelector = `.${MONTH_HEADER_WRAPPER},.${RESOURCE_COLUMN_WRAP_CLASS}`;\n        const scrollTopElement = this.element.querySelector(scrollTopSelector);\n        if (scrollTopElement) {\n            scrollTopElement.scrollTop = target.scrollTop;\n        }\n        this.setPersistence();\n    }\n    onScrollUiUpdate(args) {\n        let height = this.parent.element.offsetHeight - this.getHeaderBarHeight();\n        const headerWrapper = this.element.querySelector('.' + DATE_HEADER_CONTAINER_CLASS);\n        if (headerWrapper) {\n            height -= headerWrapper.offsetHeight;\n        }\n        const contentWrapper = this.element.querySelector('.' + CONTENT_WRAP_CLASS);\n        if (contentWrapper) {\n            contentWrapper.style.height = formatUnit(height);\n        }\n        if (!this.parent.isAdaptive && headerWrapper) {\n            const scrollBarWidth = getScrollBarWidth();\n            if (contentWrapper.offsetWidth - contentWrapper.clientWidth > 0) {\n                headerWrapper.firstElementChild.style[args.cssProperties.border] = scrollBarWidth > 0 ? '1px' : '0px';\n                headerWrapper.style[args.cssProperties.padding] = scrollBarWidth > 0 ? scrollBarWidth - 1 + 'px' : '0px';\n            }\n            else {\n                headerWrapper.firstElementChild.style[args.cssProperties.border] = '';\n                headerWrapper.style[args.cssProperties.padding] = '';\n            }\n        }\n        this.setColWidth(this.getContentAreaElement());\n        const leftPanelSelector = `.${MONTH_HEADER_WRAPPER},.${RESOURCE_COLUMN_WRAP_CLASS}`;\n        const leftPanelElement = this.element.querySelector(leftPanelSelector);\n        if (leftPanelElement) {\n            const isYScroll = contentWrapper.scrollWidth > contentWrapper.clientWidth;\n            leftPanelElement.style.height = formatUnit(height - (isYScroll ? 17 : 0));\n        }\n        this.retainScrollPosition();\n    }\n    getStartDate() {\n        return new Date(this.parent.selectedDate.getFullYear(), this.parent.firstMonthOfYear % 12, 1);\n    }\n    getEndDate() {\n        return addDays(addMonths(this.getStartDate(), this.parent.monthsCount), -1);\n    }\n    startDate() {\n        return getWeekFirstDate(this.getStartDate(), this.parent.firstDayOfWeek);\n    }\n    endDate() {\n        return addDays(getWeekLastDate(this.getEndDate(), this.parent.firstDayOfWeek), 1);\n    }\n    getEndDateFromStartDate(start) {\n        let date = new Date(start.getTime());\n        if (this.parent.activeViewOptions.group.resources.length > 0 && !this.parent.uiStateValues.isGroupAdaptive) {\n            date = lastDateOfMonth(date);\n        }\n        return addDays(new Date(date.getTime()), 1);\n    }\n    getNextPreviousDate(type) {\n        return addYears(this.parent.selectedDate, ((type === 'next') ? 1 : -1));\n    }\n    getDateRangeText() {\n        const startDate = this.getStartDate();\n        const endDate = this.getEndDate();\n        if (startDate.getFullYear() !== endDate.getFullYear()) {\n            return this.parent.globalize.formatDate(startDate, { skeleton: 'yMMM' }) + ' - ' + this.parent.globalize.formatDate(endDate, { skeleton: 'yMMM' });\n        }\n        else {\n            return this.parent.globalize.formatDate(this.parent.selectedDate, { skeleton: 'y' });\n        }\n    }\n    addEventListener() {\n        this.parent.on(scrollUiUpdate, this.onScrollUiUpdate, this);\n        this.parent.on(dataReady, this.onDataReady, this);\n    }\n    removeEventListener() {\n        if (this.parent) {\n            this.parent.off(scrollUiUpdate, this.onScrollUiUpdate);\n            this.parent.off(dataReady, this.onDataReady);\n        }\n    }\n    onDataReady(args) {\n        this.yearEventModule = new YearEvent(this.parent);\n        this.yearEventModule.renderAppointments();\n        this.parent.notify(eventsLoaded, args);\n    }\n    wireEvents(element, type) {\n        if (type === 'cell') {\n            if (this.parent.currentView !== 'TimelineYear') {\n                EventHandler.add(element, 'click', this.onCellClick, this);\n            }\n            else {\n                EventHandler.add(element, 'click', this.parent.workCellAction.cellClick, this.parent.workCellAction);\n                if (!this.parent.isAdaptive) {\n                    EventHandler.add(element, 'dblclick', this.parent.workCellAction.cellDblClick, this.parent.workCellAction);\n                }\n            }\n        }\n        else {\n            EventHandler.add(element, 'scroll', this.onContentScroll, this);\n        }\n    }\n    destroy() {\n        if (!this.parent || this.parent && this.parent.isDestroyed) {\n            return;\n        }\n        if (this.element) {\n            const contentScroll = this.element.querySelector('.' + CONTENT_WRAP_CLASS);\n            if (contentScroll) {\n                EventHandler.remove(contentScroll, 'scroll', this.onContentScroll);\n            }\n            if (this.yearEventModule) {\n                this.yearEventModule.destroy();\n                this.yearEventModule = null;\n            }\n            if (this.parent.resourceBase) {\n                this.parent.resourceBase.destroy();\n            }\n            super.destroy();\n        }\n    }\n}\n\n/* eslint-disable @typescript-eslint/no-explicit-any */\nclass AgendaBase extends ViewBase {\n    constructor(parent) {\n        super(parent);\n    }\n    // eslint-disable-next-line max-len\n    createAgendaContentElement(type, listData, aTd, groupOrder, groupIndex) {\n        let listElement;\n        const fieldMapping = this.parent.eventFields;\n        if (type === 'noEvents') {\n            const noEvents = [{ 'subject': this.parent.localeObj.getConstant('noEvents') }];\n            listElement = ListBase.createList(this.parent.createElement, noEvents, {\n                moduleName: 'agenda',\n                listClass: this.parent.activeView.viewClass,\n                itemClass: this.parent.activeView.viewClass,\n                template: '<div class=' + AGENDA_NO_EVENT_CLASS + '>${subject}</div>'\n            });\n        }\n        else {\n            listElement = ListBase.createList(this.parent.createElement, listData, {\n                moduleName: 'agenda',\n                listClass: this.parent.activeView.viewClass,\n                itemClass: this.parent.activeView.viewClass\n            });\n            const listElements = [].slice.call(listElement.children);\n            listElements.forEach((element, li) => {\n                const appWrapper = createElement('div', {\n                    className: APPOINTMENT_CLASS, attrs: {\n                        'data-id': 'Appointment_' + listData[li][this.parent.eventFields.id],\n                        'data-guid': listData[li].Guid,\n                        'role': 'button',\n                        'tabindex': '0',\n                        'aria-readonly': this.parent.eventBase.getReadonlyAttribute(listData[li]),\n                        'aria-selected': 'false',\n                        'aria-grabbed': 'true',\n                        'aria-label': this.parent.getAnnouncementString(listData[li])\n                    }\n                });\n                if (!isNullOrUndefined(groupIndex)) {\n                    appWrapper.setAttribute('data-group-index', groupIndex.toString());\n                }\n                this.parent.eventBase.applyResourceColor(appWrapper, listData[li], 'borderColor', groupOrder);\n                let templateEle;\n                if (!isNullOrUndefined(this.parent.activeViewOptions.eventTemplate)) {\n                    addClass([appWrapper], EVENT_TEMPLATE);\n                    const scheduleId = this.parent.element.id + '_';\n                    const viewName = this.parent.activeViewOptions.eventTemplateName;\n                    const templateId = scheduleId + viewName + 'eventTemplate';\n                    templateEle = this.parent.getAppointmentTemplate()(listData[li], this.parent, 'eventTemplate', templateId, false);\n                    if (!isNullOrUndefined(listData[li][fieldMapping.recurrenceRule])) {\n                        const iconClass = (listData[li][fieldMapping.id] === listData[li][fieldMapping.recurrenceID]) ?\n                            EVENT_RECURRENCE_ICON_CLASS : EVENT_RECURRENCE_EDIT_ICON_CLASS;\n                        appWrapper.appendChild(createElement('div', { className: ICON + ' ' + iconClass }));\n                    }\n                }\n                else {\n                    templateEle = this.createAppointment(listData[li]);\n                }\n                append([].slice.call(templateEle), appWrapper);\n                removeChildren(element);\n                element.appendChild(appWrapper);\n                const args = {\n                    data: extend({}, listData[li], null, true),\n                    element: element, cancel: false\n                };\n                this.parent.trigger(eventRendered, args, (eventArgs) => {\n                    if (eventArgs.cancel) {\n                        remove(element);\n                    }\n                });\n            });\n        }\n        aTd.appendChild(listElement);\n        if ((this.parent.currentView === 'MonthAgenda' && this.parent.activeViewOptions.group.resources.length > 0)\n            || this.parent.currentView === 'Agenda') {\n            addClass([aTd], AGENDA_DAY_BORDER_CLASS);\n        }\n        this.parent.renderTemplates();\n        return aTd;\n    }\n    createAppointment(event) {\n        const fieldMapping = this.parent.eventFields;\n        let eventSubject = (event[fieldMapping.subject] || this.parent.eventSettings.fields.subject.default\n            || this.parent.localeObj.getConstant('addTitle'));\n        const eventLocation = (event[fieldMapping.location] || this.parent.eventSettings.fields.location.default);\n        const appSubjectWrap = createElement('div', { className: SUBJECT_WRAP });\n        if (!isNullOrUndefined(eventLocation) && eventLocation !== '') {\n            eventSubject += ',';\n        }\n        appSubjectWrap.appendChild(createElement('div', { className: SUBJECT_CLASS, innerHTML: eventSubject }));\n        if (!isNullOrUndefined(eventLocation) && eventLocation !== '') {\n            appSubjectWrap.appendChild(createElement('div', { className: LOCATION_CLASS, innerHTML: eventLocation }));\n        }\n        if (!isNullOrUndefined(event[fieldMapping.recurrenceRule])) {\n            const iconClass = (event[fieldMapping.id] === event[fieldMapping.recurrenceID]) ?\n                EVENT_RECURRENCE_ICON_CLASS : EVENT_RECURRENCE_EDIT_ICON_CLASS;\n            appSubjectWrap.appendChild(createElement('div', { className: ICON + ' ' + iconClass }));\n        }\n        const strDate = event[fieldMapping.startTime];\n        const endDate = event[fieldMapping.endTime];\n        const isAllDay = event[fieldMapping.isAllDay];\n        let allDayStr = this.parent.localeObj.getConstant('allDay');\n        const timeStr = this.parent.getTimeString(strDate) + ' - ' + this.parent.getTimeString(endDate);\n        if (!isNullOrUndefined(event.data)) {\n            const milliSeconds = (endDate.getTimezoneOffset() !== strDate.getTimezoneOffset()) ?\n                (endDate.getTime() - strDate.getTime() + 3600000) : (endDate.getTime() - strDate.getTime());\n            const eventString = (milliSeconds / MS_PER_DAY) >= 1 ? allDayStr : timeStr;\n            allDayStr = eventString + ' (' + this.parent.localeObj.getConstant('day') + ' '\n                + event.data.index + '/' + event.data.count + ')';\n        }\n        const displayStr = (!isNullOrUndefined(event.data) || isAllDay) ? allDayStr : timeStr;\n        const appDateTime = createElement('div', { className: DATE_TIME_CLASS, innerHTML: displayStr });\n        return [appSubjectWrap, appDateTime];\n    }\n    processAgendaEvents(events) {\n        let eventsProcessed = [];\n        if (isNullOrUndefined(events)) {\n            return eventsProcessed;\n        }\n        for (const event of events) {\n            const spanned = this.parent.eventBase.splitEventByDay(event);\n            eventsProcessed = eventsProcessed.concat(spanned.length > 1 ? spanned : event);\n        }\n        return eventsProcessed;\n    }\n    wireEventActions() {\n        const eventElement = [].slice.call(this.parent.element.querySelectorAll('.' + APPOINTMENT_CLASS));\n        for (const element of eventElement) {\n            this.parent.eventBase.wireAppointmentEvents(element, null, true);\n        }\n        const dateHeaderElement = [].slice.call(this.parent.element.querySelectorAll('.e-m-date'));\n        for (const element of dateHeaderElement) {\n            EventHandler.add(element, 'click', this.parent.agendaModule.dayNavigationClick, this);\n        }\n    }\n    calculateResourceTableElement(tBody, noOfDays, agendaDate) {\n        if (isNullOrUndefined(this.parent.resourceBase.lastResourceLevel)) {\n            const level = this.getDateSlots(this.renderDates, this.parent.activeViewOptions.workDays);\n            this.parent.resourceBase.generateResourceLevels(level);\n        }\n        const agendaLastDate = addDays(new Date(agendaDate.getTime()), noOfDays);\n        const days = (this.parent.activeViewOptions.group.byDate || this.parent.currentView === 'MonthAgenda') ? noOfDays : 1;\n        const resColl = this.parent.resourceBase.resourceCollection;\n        const resData = this.parent.resourceBase.lastResourceLevel;\n        const initialDate = agendaDate;\n        for (let i = 0; i < days; i++) {\n            const lastLevelInfo = [];\n            const tempLastLevelInfo = [];\n            let tempIndex = 0;\n            let eventObj;\n            let dateObj;\n            const firstDate = addDays(initialDate, i);\n            const finalDate = (this.parent.activeViewOptions.group.byDate || this.parent.currentView === 'MonthAgenda')\n                ? addDays(firstDate, 1) : agendaLastDate;\n            const agendaCollection = this.parent.eventBase.filterEvents(firstDate, finalDate);\n            if (agendaCollection.length > 0 || !this.parent.hideEmptyAgendaDays || this.parent.currentView === 'MonthAgenda') {\n                for (let res = 0; res < resData.length; res++) {\n                    noOfDays = (!this.parent.activeViewOptions.group.byDate || this.parent.currentView === 'MonthAgenda') ? noOfDays : 1;\n                    const data = [];\n                    agendaDate = firstDate;\n                    // eslint-disable-next-line max-len\n                    const resDataCollection = this.parent.eventBase.filterEvents(agendaDate, agendaLastDate, agendaCollection, resData[res]);\n                    if (resDataCollection.length > 0 || !this.parent.hideEmptyAgendaDays || this.parent.currentView === 'MonthAgenda') {\n                        for (let r = 0; r < noOfDays; r++) {\n                            // eslint-disable-next-line max-len\n                            const resDayCollection = this.parent.eventBase.filterEvents(agendaDate, addDays(agendaDate, 1), resDataCollection, undefined);\n                            if (resDayCollection.length > 0 || !this.parent.hideEmptyAgendaDays ||\n                                this.parent.currentView === 'MonthAgenda') {\n                                data.push(resDayCollection[0]);\n                                eventObj = {\n                                    rowSpan: 1, type: 'eventColumn', resource: resColl[resColl.length - 1],\n                                    groupIndex: resData[res].groupIndex, groupOrder: resData[res].groupOrder,\n                                    resourceData: resData[res].resourceData, eventData: resDayCollection, date: agendaDate\n                                };\n                                dateObj = {\n                                    rowSpan: 1, type: 'dateColumn', resource: resColl[resColl.length - 1],\n                                    groupOrder: resData[res].groupOrder, resourceData: resData[res].resourceData,\n                                    date: agendaDate\n                                };\n                                if (!lastLevelInfo[tempIndex]) {\n                                    lastLevelInfo[tempIndex] = [];\n                                }\n                                lastLevelInfo[tempIndex].push(eventObj);\n                                lastLevelInfo[tempIndex].push(dateObj);\n                                tempIndex++;\n                            }\n                            agendaDate = addDays(agendaDate, 1);\n                            if (agendaDate.getTime() >= agendaLastDate.getTime() || this.parent.activeViewOptions.group.byDate\n                                || this.parent.currentView === 'MonthAgenda') {\n                                lastLevelInfo[lastLevelInfo.length - 1][1].cssClass = AGENDA_DAY_BORDER_CLASS;\n                                const tempObj = {\n                                    rowSpan: data.length, type: 'resourceColumn', resource: resColl[resColl.length - 1],\n                                    groupOrder: resData[res].groupOrder.slice(0, -1), resourceData: resData[res].resourceData,\n                                    groupIndex: (lastLevelInfo.length - data.length), className: [RESOURCE_NAME],\n                                    date: agendaDate\n                                };\n                                lastLevelInfo[lastLevelInfo.length - data.length].push(tempObj);\n                                tempLastLevelInfo.push(extend({}, tempObj, null, true));\n                                break;\n                            }\n                        }\n                    }\n                }\n                const topResources = resColl.slice(0, -1);\n                let tempGroupedData = [];\n                let totalRowSpan = 0;\n                for (let y = 0; y < topResources.length; y++) {\n                    const data = topResources[topResources.length - (y + 1)].dataSource;\n                    for (let x = 0; x < data.length; x++) {\n                        let z = 0;\n                        for (let u = 0; u < tempLastLevelInfo.length; u++) {\n                            // eslint-disable-next-line max-len\n                            if (tempLastLevelInfo[u].groupOrder[topResources.length - (y + 1)] === data[x][topResources[topResources.length - (y + 1)].idField]) {\n                                totalRowSpan = totalRowSpan + tempLastLevelInfo[u].rowSpan;\n                                tempGroupedData.push(extend({}, tempLastLevelInfo[u], null, true));\n                            }\n                            if (++z === tempLastLevelInfo.length && tempGroupedData.length > 0) {\n                                tempGroupedData[0].rowSpan = totalRowSpan;\n                                tempGroupedData[0].type = 'parentColumnLevel_' + (y + 1);\n                                tempGroupedData[0].resource = topResources[topResources.length - (y + 1)];\n                                tempGroupedData[0].resourceData = data[x];\n                                tempGroupedData[0].date = agendaDate;\n                                lastLevelInfo[tempGroupedData[0].groupIndex].push(tempGroupedData[0]);\n                                tempGroupedData = [];\n                                totalRowSpan = 0;\n                            }\n                        }\n                    }\n                }\n                this.createResourceTableRow(lastLevelInfo, tBody);\n            }\n        }\n        const totalCollection = this.parent.eventBase.filterEvents(initialDate, agendaLastDate);\n        if (totalCollection.length === 0 && !this.parent.activeViewOptions.allowVirtualScrolling && this.parent.hideEmptyAgendaDays) {\n            this.renderEmptyContent(tBody, initialDate);\n        }\n    }\n    createResourceTableRow(tContent, tBody) {\n        const tr = createElement('tr', { attrs: { role: 'row' } });\n        let ntr;\n        const td = createElement('td', { attrs: { role: 'gridcell', 'aria-selected': 'false' } });\n        let tempData;\n        let rowSpan = 0;\n        let level;\n        if (this.parent.activeViewOptions.group.byDate || this.parent.currentView === 'MonthAgenda') {\n            let tContentCollection = [];\n            const parentCollection = this.parent.resourceBase.resourceCollection.slice(0, -1);\n            for (let w = 0; w < tContent.length; w++) {\n                tContentCollection = tContentCollection.concat(tContent[w]);\n            }\n            level = (parentCollection.length > 0) ? 'parentColumnLevel_' + parentCollection.length : 'resourceColumn';\n            const rowSpanCollection = tContentCollection.filter((data) => data.type === level);\n            for (let x = 0; x < rowSpanCollection.length; x++) {\n                rowSpan = rowSpan + rowSpanCollection[x].rowSpan;\n            }\n        }\n        for (let row = 0; row < tContent.length; row++) {\n            ntr = tr.cloneNode();\n            for (let col = tContent[row].length - 1; col >= 0; col--) {\n                const data = tContent[row][col];\n                let ntd = td.cloneNode();\n                if (data.type === 'dateColumn') {\n                    if (this.parent.activeViewOptions.group.byDate || this.parent.currentView === 'MonthAgenda') {\n                        tempData = tContent[row][col];\n                        continue;\n                    }\n                    ntd.setAttribute('data-date', data.date.getTime().toString());\n                    ntd.appendChild(this.createDateHeaderElement(data.date));\n                    const className = [AGENDA_CELLS_CLASS, AGENDA_DATE_CLASS];\n                    if (data.cssClass) {\n                        className.push(data.cssClass);\n                    }\n                    addClass([ntd], className);\n                    ntr.appendChild(ntd);\n                }\n                else if (data.type === 'eventColumn') {\n                    const elementType = (data.eventData.length === 0) ? 'noEvents' : 'data';\n                    ntd = this.createAgendaContentElement(elementType, data.eventData, ntd, data.groupOrder, data.groupIndex);\n                    ntd.setAttribute('data-date', data.date.getTime().toString());\n                    if (this.parent.activeViewOptions.group.byDate || this.parent.currentView === 'MonthAgenda') {\n                        addClass([ntd], [AGENDA_CELLS_CLASS, AGENDA_DAY_PADDING_CLASS]);\n                    }\n                    ntr.appendChild(ntd);\n                }\n                else {\n                    ntd.setAttribute('rowspan', data.rowSpan.toString());\n                    addClass([ntd], AGENDA_RESOURCE_CLASS);\n                    this.setResourceHeaderContent(ntd, data, data.className[0]);\n                    ntr.appendChild(ntd);\n                }\n            }\n            if (this.parent.activeViewOptions.group.byDate && row === 0 && this.parent.currentView !== 'MonthAgenda') {\n                const ntd = td.cloneNode();\n                ntd.setAttribute('data-date', tempData.date.getTime().toString());\n                ntd.setAttribute('rowspan', rowSpan.toString());\n                ntd.appendChild(this.createDateHeaderElement(tempData.date));\n                addClass([ntd], [AGENDA_CELLS_CLASS, AGENDA_DATE_CLASS, DATE_BORDER_CLASS]);\n                const daysCount = getDaysCount(this.parent.selectedDate.getTime(), tempData.date.getTime());\n                ntr.setAttribute('aria-rowindex', daysCount.toString());\n                if (this.parent.element.querySelector(`.e-agenda-view tr[aria-rowindex=\"${daysCount}\"]`)) {\n                    break;\n                }\n                ntr.insertBefore(ntd, ntr.childNodes[0]);\n            }\n            tBody.appendChild(ntr);\n        }\n    }\n    createDateHeaderElement(date) {\n        let dateHeader;\n        if (this.parent.activeViewOptions.dateHeaderTemplate) {\n            dateHeader = createElement('div', { className: AGENDA_HEADER_CLASS });\n            const args = { date: date, type: 'dateHeader' };\n            const scheduleId = this.parent.element.id + '_';\n            const viewName = this.parent.activeViewOptions.dateHeaderTemplateName;\n            const templateId = scheduleId + viewName + 'dateHeaderTemplate';\n            const dateTemplate = [].slice.call(this.parent.getDateHeaderTemplate()(args, this.parent, 'dateHeaderTemplate', templateId, false));\n            append(dateTemplate, dateHeader);\n        }\n        else {\n            dateHeader = this.getMobileDateElement(date, AGENDA_HEADER_CLASS);\n        }\n        return dateHeader;\n    }\n    renderEmptyContent(tBody, agendaDate) {\n        const eTr = this.createTableRowElement(agendaDate, 'noEvents');\n        const eTd = eTr.children[0];\n        const noEvents = createElement('div', {\n            className: AGENDA_EMPTY_EVENT_CLASS,\n            innerHTML: this.parent.localeObj.getConstant('noEvents')\n        });\n        eTd.appendChild(noEvents);\n        tBody.appendChild(eTr);\n    }\n    createTableRowElement(date, type) {\n        const daysCount = getDaysCount(this.parent.selectedDate.getTime(), date.getTime());\n        const tr = createElement('tr', { attrs: { 'role': 'row', 'aria-rowindex': daysCount.toString() } });\n        const td = createElement('td', {\n            attrs: {\n                'class': (type === 'monthHeader') ? MONTH_HEADER_CLASS : AGENDA_CELLS_CLASS,\n                'role': 'gridcell',\n                'aria-selected': 'false',\n                'aria-colindex': daysCount.toString(),\n                'data-date': date.getTime().toString()\n            }\n        });\n        const dTd = td.cloneNode();\n        const aTd = td.cloneNode();\n        tr.appendChild(dTd);\n        if (type !== 'noEvents') {\n            tr.appendChild(aTd);\n        }\n        return tr;\n    }\n    destroy() {\n        super.destroy();\n    }\n}\n\n/* eslint-disable @typescript-eslint/no-explicit-any */\n/**\n * agenda view\n */\nclass Agenda extends AgendaBase {\n    constructor(parent) {\n        super(parent);\n        this.viewClass = 'e-agenda-view';\n        this.isInverseTableSelect = false;\n        this.agendaDates = {};\n        this.virtualScrollTop = 1;\n    }\n    getModuleName() {\n        return 'agenda';\n    }\n    renderLayout() {\n        this.agendaDates = {};\n        this.element = createElement('div', { className: TABLE_WRAP_CLASS });\n        addClass([this.element], this.viewClass);\n        this.element.appendChild(this.createTableLayout(OUTER_TABLE_CLASS));\n        this.element.querySelector('table').setAttribute('role', 'presentation');\n        this.parent.element.querySelector('.' + TABLE_CONTAINER_CLASS).appendChild(this.element);\n        const eTr = createElement('tr');\n        this.element.querySelector('tbody').appendChild(eTr);\n        const workTd = createElement('td');\n        eTr.appendChild(workTd);\n        const wrap = createElement('div', { className: CONTENT_WRAP_CLASS });\n        workTd.appendChild(wrap);\n        const tbl = this.createTableLayout(CONTENT_TABLE_CLASS);\n        wrap.appendChild(tbl);\n        const tBody = tbl.querySelector('tbody');\n        const agendaDate = resetTime(this.parent.selectedDate);\n        this.renderEmptyContent(tBody, agendaDate);\n        this.wireEvents();\n        if (this.parent.resourceBase) {\n            this.parent.resourceBase.generateResourceLevels([{ renderDates: this.parent.activeView.renderDates }]);\n        }\n        if (this.parent.uiStateValues.isGroupAdaptive && !this.parent.element.querySelector('.' + RESOURCE_TOOLBAR_CONTAINER)) {\n            this.renderResourceMobileLayout();\n        }\n        this.parent.notify(contentReady, {});\n    }\n    eventLoad(args) {\n        this.dataSource = extend([], this.parent.eventsData, null, true);\n        for (const event of this.parent.eventsData) {\n            delete event.generatedDates;\n        }\n        let eventCollection = this.parent.activeViewOptions.allowVirtualScrolling ? args.processedData : this.parent.eventsProcessed;\n        if (this.parent.uiStateValues.isGroupAdaptive) {\n            const resource = this.parent.resourceBase.lastResourceLevel[this.parent.uiStateValues.groupIndex];\n            this.dataSource = this.parent.eventBase.filterEventsByResource(resource, this.dataSource);\n            eventCollection = this.parent.eventBase.filterEventsByResource(resource, eventCollection);\n        }\n        this.parent.eventsProcessed = this.processAgendaEvents(eventCollection);\n        const agendaDate = resetTime(this.parent.selectedDate);\n        const tBody = this.element.querySelector('.' + CONTENT_TABLE_CLASS + ' tbody');\n        removeChildren(tBody);\n        this.renderInitialContent(tBody, agendaDate);\n        this.wireEventActions();\n        const contentArea = closest(tBody, '.' + CONTENT_WRAP_CLASS);\n        contentArea.scrollTop = 1;\n        this.parent.notify(eventsLoaded, {});\n        if (!this.parent.activeViewOptions.allowVirtualScrolling) {\n            this.retainScrollPosition();\n        }\n    }\n    refreshEvent(refreshDate) {\n        let processedData = [];\n        const fields = this.parent.eventFields;\n        for (const data of this.dataSource) {\n            if (isNullOrUndefined(data[fields.recurrenceID]) && !isNullOrUndefined(data[fields.recurrenceRule]) &&\n                !isNullOrUndefined(data.generatedDates) && refreshDate >= data.generatedDates.end) {\n                processedData = processedData.concat(this.parent.eventBase.generateOccurrence(data, refreshDate));\n            }\n        }\n        this.parent.eventsProcessed = this.parent.eventsProcessed.concat(this.processAgendaEvents(processedData));\n    }\n    refreshHeader() {\n        const tBody = this.element.querySelector('.' + CONTENT_TABLE_CLASS + ' tbody');\n        if (this.parent.activeViewOptions.group.byDate) {\n            removeChildren(tBody);\n        }\n        else {\n            remove(tBody.firstElementChild);\n        }\n        const agendaDate = resetTime(this.parent.selectedDate);\n        const emptyTBody = createElement('tbody');\n        const firstDate = new Date(agendaDate.getTime());\n        const lastDate = (this.parent.activeViewOptions.allowVirtualScrolling && this.parent.hideEmptyAgendaDays) ?\n            this.getEndDateFromStartDate(firstDate) : addDays(firstDate, this.parent.agendaDaysCount);\n        this.renderContent(emptyTBody, firstDate, lastDate);\n        append([].slice.call(emptyTBody.childNodes), tBody);\n    }\n    renderInitialContent(tBody, agendaDate) {\n        const emptyTBody = createElement('tbody');\n        let firstDate = new Date(agendaDate.getTime());\n        let lastDate = (this.parent.activeViewOptions.allowVirtualScrolling && this.parent.hideEmptyAgendaDays) ?\n            this.getEndDateFromStartDate(firstDate) : addDays(firstDate, this.parent.agendaDaysCount);\n        this.renderContent(emptyTBody, firstDate, lastDate);\n        append([].slice.call(emptyTBody.childNodes), tBody);\n        // Initial rendering, to load previous date events upto scroll bar enable\n        if (this.parent.activeViewOptions.allowVirtualScrolling && this.parent.hideEmptyAgendaDays && this.parent.eventsData.length > 0) {\n            const contentArea = this.getContentAreaElement();\n            const contentChild = contentArea.querySelector('.e-content-table');\n            while (contentArea.offsetWidth <= contentArea.clientWidth) {\n                if (this.parent.isAdaptive && contentChild.offsetHeight >= contentArea.clientHeight) {\n                    break;\n                }\n                const emptyTBody = createElement('tbody');\n                lastDate = firstDate;\n                firstDate = addDays(lastDate, -this.parent.agendaDaysCount);\n                this.renderContent(emptyTBody, firstDate, lastDate);\n                prepend([].slice.call(emptyTBody.childNodes), tBody);\n                if (firstDate <= this.parent.minDate) {\n                    break;\n                }\n            }\n        }\n        if (tBody.childNodes.length <= 0) {\n            this.renderEmptyContent(tBody, agendaDate);\n        }\n    }\n    renderContent(tBody, agendaDate, lastDate) {\n        const fieldMapping = this.parent.eventFields;\n        const firstDate = new Date(agendaDate.getTime());\n        const isObject = this.appointmentFiltering(firstDate, lastDate);\n        if (isObject.length > 0 && this.parent.activeViewOptions.allowVirtualScrolling && this.parent.hideEmptyAgendaDays) {\n            agendaDate = isObject[0][fieldMapping.startTime];\n            agendaDate = new Date(new Date(agendaDate.getTime()).setHours(0, 0, 0, 0));\n            this.updateHeaderText(isObject[0][fieldMapping.startTime]);\n        }\n        let endDate;\n        if (!this.parent.hideEmptyAgendaDays || (this.parent.agendaDaysCount > 0 && isObject.length > 0)) {\n            if (this.parent.activeViewOptions.group.resources.length > 0 && !this.parent.uiStateValues.isGroupAdaptive) {\n                let date = agendaDate;\n                if (!this.parent.activeViewOptions.group.byDate) {\n                    this.parent.activeViewOptions.allowVirtualScrolling = false;\n                    date = firstDate;\n                    if (this.parent.headerModule) {\n                        this.parent.headerModule.updateDateRange(this.parent.activeView.getDateRangeText());\n                        this.parent.headerModule.updateHeaderItems('remove');\n                    }\n                }\n                this.calculateResourceTableElement(tBody, this.parent.agendaDaysCount, date);\n            }\n            else {\n                for (let day = 0; day < this.parent.agendaDaysCount; day++) {\n                    const filterData = this.appointmentFiltering(agendaDate);\n                    const nTr = this.createTableRowElement(agendaDate, 'data');\n                    if (this.element.querySelector('tr[aria-rowindex=\"' + parseInt(nTr.getAttribute('aria-rowindex'), 10) + '\"]')) {\n                        agendaDate = addDays(agendaDate, 1);\n                        continue;\n                    }\n                    const dTd = nTr.children[0];\n                    const aTd = nTr.children[1];\n                    if (filterData.length > 0 || (!this.parent.hideEmptyAgendaDays && filterData.length === 0)) {\n                        const elementType = (!this.parent.hideEmptyAgendaDays && filterData.length === 0) ? 'noEvents' : 'data';\n                        dTd.appendChild(this.createDateHeaderElement(agendaDate));\n                        nTr.appendChild(dTd);\n                        const cTd = this.createAgendaContentElement(elementType, filterData, aTd);\n                        nTr.appendChild(cTd);\n                        if (cTd.querySelectorAll('li').length > 0) {\n                            tBody.appendChild(nTr);\n                        }\n                    }\n                    else if (this.parent.activeViewOptions.allowVirtualScrolling) {\n                        day--;\n                    }\n                    if (this.isCurrentDate(new Date(agendaDate.getTime()))) {\n                        addClass(dTd.childNodes, AGENDA_CURRENT_DAY_CLASS);\n                    }\n                    agendaDate = addDays(agendaDate, 1);\n                    if (agendaDate.getTime() > lastDate.getTime()) {\n                        break;\n                    }\n                }\n            }\n            endDate = new Date(agendaDate.getTime() - MS_PER_DAY);\n        }\n        this.agendaDates = { start: firstDate, end: endDate };\n    }\n    agendaScrolling(event) {\n        if (this.parent.quickPopup) {\n            this.parent.quickPopup.quickPopupHide();\n        }\n        if (this.parent.activeViewOptions.allowVirtualScrolling) {\n            this.virtualScrolling(event);\n        }\n        if (!this.parent.activeViewOptions.allowVirtualScrolling) {\n            this.setPersistence();\n        }\n    }\n    virtualScrolling(event) {\n        const target = event.target;\n        const scrollTop = target.scrollTop;\n        const scrollHeight = target.scrollHeight;\n        const offsetHeight = target.clientHeight;\n        const totalHeight = scrollTop + offsetHeight;\n        const direction = (this.virtualScrollTop < scrollTop) ? 'next' : 'previous';\n        const tBody = target.querySelector('tbody');\n        const emptyTBody = createElement('tbody');\n        const topElement = this.getElementFromScrollerPosition(event);\n        const scrollDate = this.parent.getDateFromElement(topElement);\n        let filterDate;\n        let filterData;\n        if (scrollTop === 0) {\n            filterDate = this.getPreviousNextDate(addDays(scrollDate, -1), direction);\n            filterData = this.appointmentFiltering(filterDate.start, filterDate.end);\n            if (filterData.length > 0 || !this.parent.hideEmptyAgendaDays) {\n                this.renderContent(emptyTBody, filterDate.start, filterDate.end);\n                prepend([].slice.call(emptyTBody.childNodes), tBody);\n                this.wireEventActions();\n                for (let s = 0, element = tBody.children; s < element.length; s++) {\n                    if (element[s].getAttribute('aria-rowindex') === topElement.getAttribute('aria-colindex')) {\n                        const scrollToValue = element[s].offsetTop -\n                            this.element.querySelector('.e-agenda-item').offsetHeight;\n                        target.scrollTop = scrollToValue;\n                        break;\n                    }\n                }\n                this.updateHeaderText(scrollDate);\n            }\n        }\n        else if (totalHeight >= (scrollHeight - 5)) {\n            filterDate = this.getPreviousNextDate(addDays(scrollDate, 1), direction);\n            filterData = this.appointmentFiltering(filterDate.start, filterDate.end);\n            if (filterData.length > 0 || !this.parent.hideEmptyAgendaDays) {\n                this.renderContent(emptyTBody, filterDate.start, filterDate.end);\n                append([].slice.call(emptyTBody.childNodes), tBody);\n                this.wireEventActions();\n                this.updateHeaderText(scrollDate);\n            }\n        }\n        else {\n            this.updateHeaderText(scrollDate);\n        }\n        this.virtualScrollTop = scrollTop;\n        const selectedElements = this.parent.eventBase.getSelectedAppointments();\n        if (selectedElements.length > 0) {\n            selectedElements[selectedElements.length - 1].focus();\n        }\n    }\n    getElementFromScrollerPosition(event) {\n        let filterElement;\n        const target = event.target;\n        const scrollTop = target.scrollTop;\n        const scrollHeight = target.scrollHeight;\n        const offsetHeight = target.clientHeight;\n        const totalHeight = scrollTop + offsetHeight;\n        const liCollection = [].slice.call(target.querySelectorAll('.e-agenda-item'));\n        let li;\n        let liDetails;\n        if (liCollection.length > 0) {\n            if (scrollTop === 0) {\n                li = liCollection[0];\n                filterElement = closest(li, '.' + AGENDA_CELLS_CLASS);\n            }\n            else if (totalHeight === scrollHeight) {\n                li = liCollection[liCollection.length - 1];\n                filterElement = closest(li, '.' + AGENDA_CELLS_CLASS);\n            }\n            else {\n                for (let a = 0, length = liCollection.length; a < length; a++) {\n                    li = liCollection[a];\n                    liDetails = li.getBoundingClientRect();\n                    if (liDetails.top >= 0) {\n                        filterElement = closest(li, '.' + AGENDA_CELLS_CLASS);\n                        break;\n                    }\n                }\n            }\n        }\n        return filterElement;\n    }\n    updateHeaderText(date) {\n        if (this.parent.showHeaderBar) {\n            this.parent.headerModule.updateDateRange(this.getDateRangeText(date));\n        }\n    }\n    getPreviousNextDate(date, type) {\n        let currentDate = new Date(date.getTime());\n        const firstDate = this.getStartDateFromEndDate(date);\n        const lastDate = this.getEndDateFromStartDate(date);\n        let daysCount = 0;\n        do {\n            const filterData = this.appointmentFiltering(currentDate);\n            if (filterData.length > 0 || !this.parent.hideEmptyAgendaDays) {\n                daysCount++;\n            }\n            currentDate = addDays(currentDate, (type === 'next') ? 1 : -1);\n            if (currentDate < firstDate || currentDate > lastDate) {\n                break;\n            }\n        } while (daysCount !== this.parent.agendaDaysCount);\n        const endDate = addDays(currentDate, (type === 'next') ? -1 : 1);\n        return (type === 'next') ? { start: date, end: addDays(endDate, 1) } : { start: endDate, end: addDays(date, 1) };\n    }\n    appointmentFiltering(startDate, endDate) {\n        let dateStart;\n        let dateEnd;\n        if (!isNullOrUndefined(startDate) && isNullOrUndefined(endDate)) {\n            dateStart = resetTime(new Date(startDate.getTime()));\n            dateEnd = setTime(new Date(dateStart.getTime()), MS_PER_DAY);\n        }\n        else {\n            dateStart = new Date(startDate.getTime());\n            dateEnd = new Date(endDate.getTime());\n        }\n        let filterData = this.parent.eventBase.filterEvents(dateStart, dateEnd);\n        if (filterData.length === 0) {\n            this.refreshEvent(startDate);\n            filterData = this.parent.eventBase.filterEvents(dateStart, dateEnd);\n        }\n        return filterData;\n    }\n    getStartDateFromEndDate(endDate) {\n        let filterDate;\n        const fields = this.parent.eventFields;\n        if (this.parent.eventsProcessed.length > 0) {\n            const firstDate = Math.min(...this.parent.eventsProcessed.map((a) => a[fields.startTime].getTime()));\n            filterDate = this.parent.hideEmptyAgendaDays ? new Date(firstDate) : this.parent.minDate;\n        }\n        else {\n            filterDate = this.parent.hideEmptyAgendaDays ? addMonths(endDate, -1) : this.parent.minDate;\n        }\n        return resetTime(filterDate);\n    }\n    getEndDateFromStartDate(startDate) {\n        let filterDate;\n        const fieldMapping = this.parent.eventFields;\n        if (this.parent.eventsProcessed.length > 0) {\n            const lastDate = Math.max(...this.parent.eventsProcessed.map((a) => a[fieldMapping.endTime].getTime()));\n            filterDate = this.parent.hideEmptyAgendaDays ? new Date(lastDate) : this.parent.maxDate;\n        }\n        else {\n            filterDate = this.parent.hideEmptyAgendaDays ? addMonths(startDate, 1) : this.parent.maxDate;\n        }\n        return resetTime(addDays(filterDate, 1));\n    }\n    getNextPreviousDate(type) {\n        const noOfDays = (type === 'next') ? 1 : -1;\n        return addDays(this.parent.selectedDate, noOfDays);\n    }\n    startDate() {\n        return resetTime(this.parent.selectedDate);\n    }\n    endDate() {\n        if (this.parent.activeViewOptions.allowVirtualScrolling) {\n            return this.getEndDateFromStartDate(this.startDate());\n        }\n        else {\n            return addDays(this.startDate(), this.parent.agendaDaysCount);\n        }\n    }\n    getDateRangeText(date) {\n        const formatDate = (this.parent.activeViewOptions.dateFormat) ? this.parent.activeViewOptions.dateFormat : 'MMMM y';\n        if (this.parent.activeViewOptions.allowVirtualScrolling || this.parent.isAdaptive) {\n            const currentDate = isNullOrUndefined(date) ? this.parent.selectedDate : date;\n            return capitalizeFirstWord(this.parent.globalize.formatDate(currentDate, { format: formatDate, calendar: this.parent.getCalendarMode() }), 'multiple');\n        }\n        else {\n            const startDate = this.parent.selectedDate;\n            const endDate = addDays(startDate, this.parent.agendaDaysCount - 1);\n            return this.formatDateRange(startDate, endDate);\n        }\n    }\n    dayNavigationClick(e) {\n        const element = closest(e.currentTarget, '.' + AGENDA_CELLS_CLASS);\n        const date = this.parent.getDateFromElement(element);\n        if (!isNullOrUndefined(date) && !this.parent.isAdaptive && this.parent.isMinMaxDate(date)) {\n            this.parent.setProperties({ selectedDate: date }, true);\n            this.parent.changeView('Day', e);\n        }\n    }\n    wireEvents() {\n        EventHandler.add(this.element.querySelector('.' + CONTENT_WRAP_CLASS), scroll, this.agendaScrolling, this);\n    }\n    unWireEvents() {\n        EventHandler.remove(this.element.querySelector('.' + CONTENT_WRAP_CLASS), scroll, this.agendaScrolling);\n        const dateHeaderElement = [].slice.call(this.element.querySelectorAll('.e-m-date'));\n        for (const element of dateHeaderElement) {\n            EventHandler.remove(element, 'click', this.dayNavigationClick);\n        }\n    }\n    addEventListener() {\n        this.parent.on(scrollUiUpdate, this.onAgendaScrollUiUpdate, this);\n        this.parent.on(dataReady, this.eventLoad, this);\n    }\n    removeEventListener() {\n        if (this.parent) {\n            this.parent.off(scrollUiUpdate, this.onAgendaScrollUiUpdate);\n            this.parent.off(dataReady, this.eventLoad);\n        }\n    }\n    onAgendaScrollUiUpdate() {\n        const headerHeight = this.getHeaderBarHeight();\n        if (this.parent.headerModule) {\n            if (this.parent.activeViewOptions.allowVirtualScrolling) {\n                this.parent.headerModule.updateHeaderItems('add');\n            }\n            else {\n                this.parent.headerModule.updateHeaderItems('remove');\n            }\n        }\n        const contentArea = this.element.querySelector('.' + CONTENT_WRAP_CLASS);\n        if (this.parent.height !== 'auto') {\n            contentArea.style.height = formatUnit(this.parent.element.offsetHeight - headerHeight);\n        }\n    }\n    destroy() {\n        if (!this.parent || this.parent && this.parent.isDestroyed) {\n            return;\n        }\n        if (this.element) {\n            this.unWireEvents();\n            if (this.parent.resourceBase) {\n                this.parent.resourceBase.destroy();\n            }\n            if (this.parent.headerModule && this.parent.activeViewOptions.allowVirtualScrolling) {\n                this.parent.headerModule.updateHeaderItems('remove');\n            }\n            super.destroy();\n        }\n    }\n}\n\n/* eslint-disable @typescript-eslint/no-explicit-any */\n/**\n * month agenda view\n */\nclass MonthAgenda extends Month {\n    constructor(parent) {\n        super(parent);\n        this.dayNameFormat = 'narrow';\n        this.viewClass = 'e-month-agenda-view';\n        this.monthAgendaDate = new Date('' + parent.selectedDate);\n    }\n    getModuleName() {\n        return 'monthAgenda';\n    }\n    renderAppointmentContainer() {\n        const contentArea = this.getContentAreaElement();\n        const wrapperContainer = createElement('div', { className: WRAPPER_CONTAINER_CLASS });\n        contentArea.appendChild(wrapperContainer);\n        const appWrap = createElement('div', { className: APPOINTMENT_WRAP_CLASS });\n        wrapperContainer.appendChild(appWrap);\n        this.appendAppContainer(appWrap);\n        this.setEventWrapperHeight();\n    }\n    getDayNameFormat() {\n        if (this.parent.isAdaptive) {\n            return 'narrow';\n        }\n        return 'abbreviated';\n    }\n    setEventWrapperHeight() {\n        let headerHeight = (this.parent.headerModule ? this.parent.headerModule.getHeaderElement().offsetHeight : 0) + 2;\n        const resourceWrapper = this.parent.element.querySelector('.' + RESOURCE_HEADER_TOOLBAR);\n        if (resourceWrapper) {\n            headerHeight += resourceWrapper.offsetHeight;\n        }\n        const contentArea = this.getContentAreaElement().firstElementChild;\n        const dateHeader = this.element.querySelector('.' + DATE_HEADER_WRAP_CLASS);\n        const availHeight = this.parent.element.offsetHeight - headerHeight - dateHeader.offsetHeight - contentArea.offsetHeight;\n        const wrapperContainer = this.element.querySelector('.' + WRAPPER_CONTAINER_CLASS);\n        const eventWrapper = this.element.querySelector('.' + APPOINTMENT_WRAP_CLASS);\n        if (this.parent.height !== 'auto') {\n            wrapperContainer.style.height = eventWrapper.style.height = formatUnit(availHeight);\n        }\n    }\n    onDataReady(args) {\n        this.setEventWrapperHeight();\n        this.clearElements();\n        let eventCollection = args.processedData;\n        if (this.parent.uiStateValues.isGroupAdaptive) {\n            const resource = this.parent.resourceBase.lastResourceLevel[this.parent.uiStateValues.groupIndex];\n            eventCollection = this.parent.eventBase.filterEventsByResource(resource, eventCollection);\n        }\n        this.agendaBase = this.getAgendaBase();\n        this.parent.eventsProcessed = this.agendaBase.processAgendaEvents(eventCollection);\n        let count = 0;\n        for (const date of this.renderDates) {\n            const filterData = this.appointmentFiltering(date);\n            const workCell = this.element.querySelectorAll('.' + WORK_CELLS_CLASS)[count];\n            if (filterData.length > 0) {\n                if (!workCell.querySelector('.' + APPOINTMENT_INDICATOR_CLASS)) {\n                    workCell.appendChild(createElement('div', { className: APPOINTMENT_INDICATOR_CLASS }));\n                }\n                if (date.getTime() === resetTime(new Date(this.monthAgendaDate.getTime())).getTime()) {\n                    this.onEventRender(filterData, date);\n                }\n            }\n            count++;\n        }\n        this.parent.notify(eventsLoaded, {});\n    }\n    onCellClick(event) {\n        if (this.parent.quickPopup) {\n            this.parent.quickPopup.quickPopupHide();\n        }\n        const filterData = this.appointmentFiltering(event.startTime);\n        this.onEventRender(filterData, event.startTime);\n        this.parent.notify(eventsLoaded, {});\n        this.monthAgendaDate = new Date('' + event.startTime);\n    }\n    onEventRender(events, date) {\n        this.agendaBase = this.getAgendaBase();\n        const appWrap = this.element.querySelector('.' + APPOINTMENT_WRAP_CLASS);\n        removeChildren(appWrap);\n        if (this.parent.activeViewOptions.group.resources.length === 0 || this.parent.uiStateValues.isGroupAdaptive) {\n            if (events.length > 0) {\n                const appContainer = createElement('div', { className: APPOINTMENT_CONTAINER_CLASS });\n                appWrap.appendChild(this.agendaBase.createAgendaContentElement('data', events, appContainer));\n            }\n            else {\n                this.appendAppContainer(appWrap);\n            }\n        }\n        else {\n            if (events.length > 0) {\n                const table = this.createTableLayout();\n                const tBody = table.querySelector('tbody');\n                this.agendaBase.calculateResourceTableElement(tBody, 1, date);\n                table.appendChild(tBody);\n                appWrap.appendChild(table);\n            }\n            else {\n                this.appendAppContainer(appWrap);\n            }\n        }\n        this.agendaBase.wireEventActions();\n    }\n    appointmentFiltering(date) {\n        const dateStart = resetTime(new Date(date.getTime()));\n        const dateEnd = setTime(new Date(dateStart.getTime()), MS_PER_DAY);\n        return this.parent.eventBase.filterEvents(dateStart, dateEnd);\n    }\n    clearElements() {\n        const appointmentIndicators = [].slice.call(this.element.querySelectorAll('.' + APPOINTMENT_INDICATOR_CLASS));\n        for (const appointmentIndicator of appointmentIndicators) {\n            remove(appointmentIndicator);\n        }\n        this.appendAppContainer(this.element.querySelector('.' + APPOINTMENT_WRAP_CLASS));\n    }\n    appendAppContainer(appWrap) {\n        const app = createElement('div', { className: APPOINTMENT_CONTAINER_CLASS });\n        addClass([app], AGENDA_NO_EVENT_CLASS);\n        app.innerHTML = this.parent.localeObj.getConstant('noEvents');\n        removeChildren(appWrap);\n        appWrap.appendChild(app);\n    }\n    getNextPreviousDate(type) {\n        const selectedDate = this.parent.selectedDate;\n        const interval = (type === 'next') ? this.parent.activeViewOptions.interval : -this.parent.activeViewOptions.interval;\n        const navigateDate = addMonths(this.parent.selectedDate, interval);\n        const month = (type === 'next') ? 2 : 0;\n        const lastDate = new Date(selectedDate.getFullYear(), selectedDate.getMonth() + month, 0).getDate();\n        const date = (lastDate >= this.monthAgendaDate.getDate()) ? this.monthAgendaDate.getDate() : lastDate;\n        this.monthAgendaDate = new Date(navigateDate.getFullYear(), navigateDate.getMonth(), date);\n        return this.monthAgendaDate;\n    }\n    getAgendaBase() {\n        return this.agendaBase || new AgendaBase(this.parent);\n    }\n    destroy() {\n        if (this.agendaBase) {\n            this.agendaBase.destroy();\n            this.agendaBase = null;\n        }\n        super.destroy();\n    }\n}\n\n/**\n * timeline header rows\n */\nclass TimelineHeaderRow {\n    constructor(parent, renderDates) {\n        this.parent = parent;\n        this.renderDates = renderDates;\n    }\n    groupByYear(dates) {\n        const result = {};\n        for (const d of dates) {\n            const key = d.getFullYear();\n            result[key] = result[key] || [];\n            result[key].push(d);\n        }\n        return result;\n    }\n    groupByMonth(dates) {\n        const result = {};\n        for (const d of dates) {\n            const key = (d.getFullYear() - 1970) * 12 + d.getMonth();\n            result[key] = result[key] || [];\n            result[key].push(d);\n        }\n        return result;\n    }\n    groupByWeek(dates) {\n        const result = {};\n        for (const d of dates) {\n            const jsDate = +new Date(1970, 0, 1);\n            const tzOffsetDiff = d.getTimezoneOffset() - new Date(1970, 0, 1).getTimezoneOffset();\n            let key = Math.ceil(((((+d - jsDate) - (tzOffsetDiff * 60 * 1000)) / MS_PER_DAY) + new Date(jsDate).getDay() + 1) / 7);\n            if (this.parent.firstDayOfWeek && this.parent.firstDayOfWeek > new Date(+d).getDay()) {\n                key = key - 1;\n            }\n            result[key] = result[key] || [];\n            result[key].push(d);\n        }\n        return result;\n    }\n    generateSlots(data, colspan, row, cls, type) {\n        const dateParser = (date, format) => this.parent.globalize.formatDate(date, { format: format, calendar: this.parent.getCalendarMode() });\n        const tdDatas = [];\n        const keys = Object.keys(data);\n        for (let i = 0; i < keys.length; i++) {\n            const dates = data[keys[i]];\n            let htmlCol;\n            if (row.template) {\n                const args = { date: dates[0], type: type };\n                const templateId = this.parent.element.id + '_headerRowTemplate';\n                htmlCol = [].slice.call(this.parent.templateParser(row.template)(args, this.parent, 'template', templateId, false));\n            }\n            else {\n                let viewTemplate;\n                switch (row.option) {\n                    case 'Year':\n                        viewTemplate = `<span class=\"e-header-year\">${dateParser(dates[0], 'y')}</span>`;\n                        break;\n                    case 'Month':\n                        viewTemplate = `<span class=\"e-header-month\">${capitalizeFirstWord(dateParser(dates[0], 'MMMM'), 'single')}</span>`;\n                        break;\n                    case 'Week':\n                        viewTemplate = `<span class=\"e-header-week\">${this.parent.getWeekNumberContent(dates)}</span>`;\n                }\n                const headerWrapper = createElement('div', { innerHTML: viewTemplate });\n                htmlCol = [].slice.call(headerWrapper.childNodes);\n            }\n            tdDatas.push({ date: dates[0], type: type, className: [cls], colSpan: dates.length * colspan, template: htmlCol });\n        }\n        return tdDatas;\n    }\n    generateColumnLevels(dateSlots, hourSlots) {\n        const levels = [];\n        const rows = this.parent.activeViewOptions.headerRows;\n        let lastLevelColspan = 1;\n        if (rows[rows.length - 1].option === 'Hour' && hourSlots.length > 0) {\n            lastLevelColspan = hourSlots.length / dateSlots.length;\n        }\n        let tdDatas = [];\n        let byYear;\n        let byMonth;\n        let byWeek;\n        for (const row of rows) {\n            switch (row.option) {\n                case 'Year':\n                    byYear = this.groupByYear(this.renderDates);\n                    tdDatas = this.generateSlots(byYear, lastLevelColspan, row, 'e-header-year-cell', 'yearHeader');\n                    levels.push(tdDatas);\n                    break;\n                case 'Month':\n                    byMonth = this.groupByMonth(this.renderDates);\n                    tdDatas = this.generateSlots(byMonth, lastLevelColspan, row, 'e-header-month-cell', 'monthHeader');\n                    levels.push(tdDatas);\n                    break;\n                case 'Week':\n                    byWeek = this.groupByWeek(this.renderDates);\n                    tdDatas = this.generateSlots(byWeek, lastLevelColspan, row, 'e-header-week-cell', 'weekHeader');\n                    levels.push(tdDatas);\n                    break;\n                case 'Date':\n                    tdDatas = dateSlots;\n                    tdDatas = tdDatas.map((value) => {\n                        value.colSpan = lastLevelColspan;\n                        return value;\n                    });\n                    levels.push(tdDatas);\n                    break;\n                case 'Hour':\n                    if (hourSlots.length > 0) {\n                        levels.push(hourSlots);\n                    }\n                    break;\n            }\n        }\n        return levels;\n    }\n}\n\n/**\n * timeline views\n */\nclass TimelineViews extends VerticalView {\n    constructor(parent) {\n        super(parent);\n        this.timelineAppointment = null;\n        this.baseCssClass = 'e-timeline-view';\n    }\n    getModuleName() {\n        return 'timelineViews';\n    }\n    getLeftPanelElement() {\n        return this.element.querySelector('.' + RESOURCE_COLUMN_WRAP_CLASS);\n    }\n    scrollTopPanel(target) {\n        super.scrollTopPanel(target);\n        this.scrollHeaderLabels(target);\n    }\n    scrollToWorkHour() {\n        const start = this.parent.getStartEndTime(this.parent.workHours.start);\n        const currDateTime = this.isWorkDay(this.parent.selectedDate) && this.parent.workHours.highlight &&\n            !isNullOrUndefined(start) ? new Date(+this.parent.selectedDate).setHours(start.getHours(), start.getMinutes(), 0, 0)\n            : new Date(+this.parent.selectedDate).setHours(0, 0, 0, 0);\n        const queryString = '[data-date=\"' + new Date(currDateTime).getTime().toString() + '\"]';\n        const firstWorkHourCell = this.element.querySelector(queryString);\n        if (firstWorkHourCell) {\n            this.getContentAreaElement().scrollLeft = !this.parent.enableRtl ? firstWorkHourCell.offsetLeft :\n                -(this.parent.getContentTable().offsetWidth - firstWorkHourCell.offsetLeft - firstWorkHourCell.offsetWidth);\n        }\n    }\n    scrollToHour(hour, scrollDate) {\n        let date;\n        let index;\n        if (scrollDate) {\n            index = this.parent.getIndexOfDate(this.renderDates, resetTime(scrollDate));\n            if (index >= 0) {\n                const timeString = hour.split(':');\n                if (timeString.length === 2) {\n                    date = new Date(scrollDate.setHours(parseInt(timeString[0], 10), parseInt(timeString[1], 10), 0));\n                }\n            }\n        }\n        date = isNullOrUndefined(scrollDate) ? this.parent.getStartEndTime(hour) : date;\n        if (isNullOrUndefined(date)) {\n            return;\n        }\n        const scrollLeft = isNullOrUndefined(scrollDate) ? this.getLeftFromDateTime(null, date) :\n            this.getLeftFromDateTime([index], date);\n        this.getScrollableElement().scrollLeft = !this.parent.enableRtl ? scrollLeft : -scrollLeft;\n    }\n    generateColumnLevels() {\n        let levels = [];\n        const dateSlots = this.getDateSlots(this.renderDates, this.parent.activeViewOptions.workDays);\n        levels.push(dateSlots);\n        if (this.parent.activeViewOptions.group.resources.length > 0) {\n            this.parent.resourceBase.generateResourceLevels(dateSlots, !this.parent.uiStateValues.isGroupAdaptive);\n        }\n        let hourSlots = [];\n        if (this.parent.activeViewOptions.timeScale.enable) {\n            hourSlots = this.generateTimeSlots(levels[levels.length - 1]);\n            levels.push(hourSlots);\n        }\n        if (this.parent.activeViewOptions.headerRows.length > 0) {\n            const renderGn = new TimelineHeaderRow(this.parent, this.renderDates);\n            levels = renderGn.generateColumnLevels(dateSlots, hourSlots);\n        }\n        return levels;\n    }\n    generateTimeSlots(dateSlots) {\n        const handler = (r) => {\n            r.type = r.first ? 'majorSlot' : 'minorSlot';\n            r.className = r.first ? [TIME_SLOT_CLASS] : [TIME_SLOT_CLASS, TIME_CELLS_CLASS];\n            r.workDays = this.parent.activeViewOptions.workDays;\n            return r;\n        };\n        const timeSlotData = this.getTimeSlotRows(handler);\n        const slots = [];\n        for (const data of dateSlots) {\n            data.colSpan = timeSlotData.length;\n            const tempTimeSlots = extend([], timeSlotData, null, true);\n            for (const slot of tempTimeSlots) {\n                const cellDate = resetTime(new Date('' + data.date));\n                slot.date = setTime(cellDate, getDateInMs(slot.date));\n                slots.push(slot);\n            }\n        }\n        return slots;\n    }\n    changeCurrentTimePosition() {\n        if (!this.parent || this.parent && this.parent.isDestroyed) {\n            return;\n        }\n        this.removeCurrentTimeIndicatorElements();\n        const currentDateIndex = this.getCurrentTimeIndicatorIndex();\n        const left = this.getLeftFromDateTime(currentDateIndex, this.parent.getCurrentTime());\n        const height = this.element.querySelector('.' + CONTENT_TABLE_CLASS).offsetHeight;\n        const headerWrap = this.element.querySelector('.' + DATE_HEADER_WRAP_CLASS);\n        const contentWrap = this.element.querySelector('.' + CONTENT_WRAP_CLASS);\n        contentWrap.appendChild(createElement('div', {\n            className: CURRENT_TIMELINE_CLASS,\n            styles: (this.parent.enableRtl ? 'right' : 'left') + ':' + formatUnit(left) + '; height:' + formatUnit(height)\n        }));\n        if (this.parent.virtualScrollModule) {\n            const timeIndicator = this.parent.element.querySelector('.' + CURRENT_TIMELINE_CLASS);\n            const element = this.parent.element.querySelector('.' + CONTENT_WRAP_CLASS + ' table');\n            setStyleAttribute(timeIndicator, {\n                transform: element.style.transform\n            });\n        }\n        const currentTimeEle = createElement('div', {\n            innerHTML: this.parent.getTimeString(this.parent.getCurrentTime()),\n            className: CURRENT_TIME_CLASS\n        });\n        headerWrap.appendChild(currentTimeEle);\n        currentTimeEle.style[this.parent.enableRtl ? 'right' : 'left'] = formatUnit(left - (currentTimeEle.offsetWidth / 2));\n    }\n    getLeftFromDateTime(currentDateIndex, date) {\n        const startHour = this.getStartHour();\n        const endHour = this.getEndHour();\n        let diffInDates = 0;\n        let diffInMinutes = ((date.getHours() - startHour.getHours()) * 60) + (date.getMinutes() - startHour.getMinutes());\n        if (!isNullOrUndefined(currentDateIndex)) {\n            const end = (endHour.getHours() === 0) ? 24 : endHour.getHours();\n            if (currentDateIndex[0] !== 0) {\n                diffInDates = (currentDateIndex[0]) * ((end - startHour.getHours()) * 60) + (endHour.getMinutes() - startHour.getMinutes());\n            }\n            diffInMinutes = diffInDates + diffInMinutes;\n        }\n        return (diffInMinutes * this.getWorkCellWidth() * this.parent.activeViewOptions.timeScale.slotCount) /\n            this.parent.activeViewOptions.timeScale.interval;\n    }\n    getWorkCellWidth() {\n        return this.element.querySelector('.e-work-cells').getBoundingClientRect().width;\n    }\n    renderHeader() {\n        const tr = createElement('tr');\n        if (this.parent.activeViewOptions.group.resources.length > 0 && !this.parent.uiStateValues.isGroupAdaptive) {\n            this.parent.resourceBase.renderResourceHeaderIndent(tr);\n        }\n        const dateTd = createElement('td');\n        dateTd.appendChild(this.renderDatesHeader());\n        tr.appendChild(dateTd);\n        prepend([tr], this.element.querySelector('tbody'));\n    }\n    // eslint-disable-next-line @typescript-eslint/no-unused-vars\n    createAllDayRow(table, tdData) { }\n    getCurrentTimeIndicatorIndex() {\n        const currentDateIndex = [];\n        const index = this.parent.getIndexOfDate(this.renderDates, resetTime(this.parent.getCurrentTime()));\n        if (index >= 0) {\n            currentDateIndex.push(index);\n        }\n        return currentDateIndex;\n    }\n    renderContent() {\n        const tr = createElement('tr');\n        if (this.parent.activeViewOptions.group.resources.length > 0 && !this.parent.uiStateValues.isGroupAdaptive) {\n            const resTd = createElement('td');\n            resTd.appendChild(this.parent.resourceBase.createResourceColumn());\n            tr.appendChild(resTd);\n        }\n        const workTd = createElement('td');\n        const wrap = this.renderContentArea();\n        wrap.appendChild(this.createEventTable(this.getRowCount()));\n        this.collapseRows(wrap);\n        workTd.appendChild(wrap);\n        tr.appendChild(workTd);\n        if (this.parent.virtualScrollModule) {\n            this.parent.virtualScrollModule.renderVirtualTrack(wrap);\n        }\n        this.element.querySelector('tbody').appendChild(tr);\n    }\n    getRowCount() {\n        if (this.parent.activeViewOptions.group.resources.length > 0 && !this.parent.uiStateValues.isGroupAdaptive) {\n            return this.parent.resourceBase.renderedResources.length;\n        }\n        return 1;\n    }\n    getResourceTdData(i, tdData) {\n        const resLevel = this.parent.resourceBase.renderedResources[i];\n        const resSHr = resLevel.resourceData[resLevel.resource.startHourField] || this.parent.workHours.start;\n        const resEHr = resLevel.resourceData[resLevel.resource.endHourField] || this.parent.workHours.end;\n        tdData.startHour = this.parent.getStartEndTime(resSHr);\n        tdData.endHour = this.parent.getStartEndTime(resEHr);\n        tdData.workDays = resLevel.resourceData[resLevel.resource.workDaysField] || this.parent.workDays;\n        tdData.className = resLevel.className;\n        tdData.groupIndex = resLevel.groupIndex;\n        tdData.groupOrder = resLevel.groupOrder;\n        return tdData;\n    }\n    renderContentTable(table) {\n        const tBody = table.querySelector('tbody');\n        append(this.getContentRows(), tBody);\n    }\n    getContentRows() {\n        const rows = [];\n        const tr = createElement('tr', { attrs: { role: 'row' } });\n        const td = createElement('td', { attrs: { role: 'gridcell', 'aria-selected': 'false' } });\n        const trCount = this.getRowCount();\n        for (let i = 0; i < trCount; i++) {\n            const ntr = tr.cloneNode();\n            for (let tdData of this.colLevels[this.colLevels.length - 1]) {\n                if (this.parent.activeViewOptions.group.resources.length > 0 && !this.parent.uiStateValues.isGroupAdaptive) {\n                    tdData = this.getResourceTdData(i, tdData);\n                }\n                const ntd = this.createContentTd(tdData, tdData, td);\n                ntr.appendChild(ntd);\n            }\n            rows.push(ntr);\n        }\n        return rows;\n    }\n    getContentTdClass(r) {\n        return (r.first || !this.parent.activeViewOptions.timeScale.enable) ? [WORK_CELLS_CLASS] :\n            [WORK_CELLS_CLASS, ALTERNATE_CELLS_CLASS];\n    }\n    renderEvents() {\n        this.timelineAppointment = new TimelineEvent(this.parent, this.parent.activeViewOptions.timeScale.enable ? 'hour' : 'day');\n        this.timelineAppointment.renderAppointments();\n        this.parent.notify(eventsLoaded, {});\n    }\n    destroy() {\n        if (!this.parent || this.parent && this.parent.isDestroyed) {\n            return;\n        }\n        if (this.timelineAppointment) {\n            this.timelineAppointment.destroy();\n            this.timelineAppointment = null;\n        }\n        super.destroy();\n    }\n}\n\n/**\n * timeline month view\n */\nclass TimelineMonth extends Month {\n    constructor(parent) {\n        super(parent);\n        this.viewClass = 'e-timeline-month-view';\n        this.isInverseTableSelect = true;\n        this.appointment = null;\n    }\n    getModuleName() {\n        return 'timelineMonth';\n    }\n    onDataReady() {\n        this.appointment = new TimelineEvent(this.parent, 'day');\n        this.appointment.renderAppointments();\n        this.parent.notify(eventsLoaded, {});\n    }\n    getLeftPanelElement() {\n        return this.element.querySelector('.' + RESOURCE_COLUMN_WRAP_CLASS);\n    }\n    scrollTopPanel(target) {\n        super.scrollTopPanel(target);\n        this.scrollHeaderLabels(target);\n    }\n    setContentHeight(content, leftPanelElement, height) {\n        if (leftPanelElement) {\n            leftPanelElement.style.height = formatUnit(height - this.getScrollXIndent(content));\n        }\n        content.style.height = formatUnit(height);\n    }\n    getDateSlots(renderDates, workDays) {\n        const dateSlots = [];\n        for (const col of renderDates) {\n            const classList$$1 = [HEADER_CELLS_CLASS];\n            if (this.isCurrentDate(col)) {\n                classList$$1.push(CURRENT_DAY_CLASS);\n            }\n            dateSlots.push({ date: col, type: 'dateHeader', className: classList$$1, colSpan: 1, workDays: workDays });\n        }\n        return dateSlots;\n    }\n    renderLeftIndent(tr) {\n        if (this.parent.activeViewOptions.group.resources.length > 0 && !this.parent.uiStateValues.isGroupAdaptive) {\n            this.parent.resourceBase.renderResourceHeaderIndent(tr);\n        }\n    }\n    renderContent() {\n        const contentTr = createElement('tr');\n        if (this.parent.activeViewOptions.group.resources.length > 0 && !this.parent.uiStateValues.isGroupAdaptive) {\n            const resTd = createElement('td');\n            resTd.appendChild(this.parent.resourceBase.createResourceColumn());\n            contentTr.appendChild(resTd);\n        }\n        const contentTd = createElement('td');\n        this.element.querySelector('tbody').appendChild(contentTr);\n        const wrap = createElement('div', { className: CONTENT_WRAP_CLASS });\n        wrap.appendChild(this.renderContentArea());\n        wrap.appendChild(this.createEventTable(this.getRowCount()));\n        this.collapseRows(wrap);\n        EventHandler.add(wrap, 'scroll', this.onContentScroll, this);\n        contentTd.appendChild(wrap);\n        if (this.parent.virtualScrollModule) {\n            this.parent.virtualScrollModule.renderVirtualTrack(wrap);\n        }\n        contentTr.appendChild(contentTd);\n    }\n    getRowCount() {\n        if (this.parent.activeViewOptions.group.resources.length > 0 && !this.parent.uiStateValues.isGroupAdaptive) {\n            return this.parent.resourceBase.renderedResources.length;\n        }\n        return 1;\n    }\n    getContentSlots() {\n        const slotDatas = [];\n        for (let row = 0; row < this.getRowCount(); row++) {\n            for (const data of this.colLevels[this.colLevels.length - 1]) {\n                data.className = [WORK_CELLS_CLASS];\n                if (this.parent.activeViewOptions.group.resources.length > 0 && !this.parent.uiStateValues.isGroupAdaptive) {\n                    const resLevel = this.parent.resourceBase.renderedResources[row];\n                    data.workDays = resLevel.resourceData[resLevel.resource.workDaysField] || this.parent.workDays;\n                    data.className = data.className.concat(resLevel.className);\n                    data.groupIndex = resLevel.groupIndex;\n                    data.groupOrder = resLevel.groupOrder;\n                }\n                const slotData = {\n                    date: new Date(+data.date), colSpan: data.colSpan, groupIndex: data.groupIndex, workDays: data.workDays,\n                    type: 'monthCells', className: data.className\n                };\n                if (!slotDatas[row]) {\n                    slotDatas[row] = [];\n                }\n                slotDatas[row].push(slotData);\n            }\n        }\n        return slotDatas;\n    }\n    updateClassList(data) {\n        if (!this.parent.isMinMaxDate(data.date)) {\n            data.className.push(DISABLE_DATES);\n        }\n    }\n    unWireEvents() {\n        EventHandler.remove(this.getContentAreaElement(), 'scroll', this.onContentScroll);\n    }\n    getMonthStart(currentDate) {\n        const monthStart = this.parent.calendarUtil.firstDateOfMonth(resetTime(currentDate));\n        return new Date(monthStart.getFullYear(), monthStart.getMonth(), monthStart.getDate());\n    }\n    getMonthEnd(currentDate) {\n        const monthStart = this.parent.calendarUtil.firstDateOfMonth(resetTime(currentDate));\n        return this.parent.calendarUtil.lastDateOfMonth(addMonths(new Date(+monthStart), this.parent.activeViewOptions.interval - 1));\n    }\n    generateColumnLevels() {\n        let colLevels = [];\n        const level = this.getDateSlots(this.renderDates, this.parent.activeViewOptions.workDays);\n        colLevels.push(level);\n        if (this.parent.activeViewOptions.group.resources.length > 0) {\n            this.parent.resourceBase.generateResourceLevels(level, !this.parent.uiStateValues.isGroupAdaptive);\n        }\n        const hourSlots = [];\n        if (this.parent.activeViewOptions.headerRows.length > 0) {\n            const renderGn = new TimelineHeaderRow(this.parent, this.renderDates);\n            colLevels = renderGn.generateColumnLevels(level, hourSlots);\n        }\n        this.colLevels = colLevels;\n        return colLevels;\n    }\n    destroy() {\n        if (!this.parent || this.parent && this.parent.isDestroyed) {\n            return;\n        }\n        if (this.element) {\n            const contentScrollableEle = this.element.querySelector('.' + CONTENT_WRAP_CLASS);\n            if (contentScrollableEle) {\n                EventHandler.remove(contentScrollableEle, 'scroll', this.onContentScroll);\n            }\n        }\n        if (this.appointment) {\n            this.appointment.destroy();\n            this.appointment = null;\n        }\n        super.destroy();\n    }\n}\n\n/* eslint-disable @typescript-eslint/no-explicit-any */\n/**\n * timeline year view\n */\nclass TimelineYear extends Year {\n    constructor(parent) {\n        super(parent);\n        this.viewClass = 'e-timeline-year-view';\n        this.isInverseTableSelect = true;\n    }\n    getModuleName() {\n        return 'timelineYear';\n    }\n    renderHeader(headerWrapper) {\n        const tr = createElement('tr');\n        headerWrapper.appendChild(tr);\n        if (this.parent.activeViewOptions.orientation === 'Vertical' && this.parent.activeViewOptions.group.resources.length > 0 &&\n            !this.parent.uiStateValues.isGroupAdaptive) {\n            this.parent.resourceBase.renderResourceHeaderIndent(tr);\n        }\n        else {\n            const leftHeaderCells = createElement('td', { className: LEFT_INDENT_CLASS });\n            tr.appendChild(leftHeaderCells);\n            leftHeaderCells.appendChild(this.renderResourceHeader(LEFT_INDENT_WRAP_CLASS));\n        }\n        const td = createElement('td');\n        tr.appendChild(td);\n        const container = createElement('div', { className: DATE_HEADER_CONTAINER_CLASS });\n        td.appendChild(container);\n        if (this.parent.activeViewOptions.orientation === 'Horizontal' && this.parent.activeViewOptions.group.resources.length > 0 &&\n            !this.parent.uiStateValues.isGroupAdaptive) {\n            container.appendChild(this.renderResourceHeader(DATE_HEADER_WRAP_CLASS));\n            this.columnCount = this.colLevels.slice(-1)[0].length;\n        }\n        else {\n            const wrapper = createElement('div', { className: DATE_HEADER_WRAP_CLASS });\n            container.appendChild(wrapper);\n            const table = this.createTableLayout();\n            wrapper.appendChild(table);\n            table.appendChild(this.createTableColGroup(this.columnCount));\n            const innerTr = createElement('tr');\n            table.querySelector('tbody').appendChild(innerTr);\n            const months = this.getMonths();\n            const dayHeaderDates = this.getMonthDates(new Date(this.parent.selectedDate.getFullYear(), months[0], 1));\n            for (let column = 0; column < this.columnCount; column++) {\n                const date = new Date(this.parent.selectedDate.getFullYear(), months[column], 1);\n                const innerTd = createElement('td', { className: HEADER_CELLS_CLASS });\n                if (this.parent.activeViewOptions.orientation === 'Horizontal') {\n                    if (this.parent.dayHeaderTemplate) {\n                        append(this.renderDayMonthHeaderTemplate(dayHeaderDates[column], column, 'dayHeaderTemplate'), innerTd);\n                    }\n                    else {\n                        innerTd.innerHTML = `<span>${this.parent.getDayNames('abbreviated')[column % 7]}</span>`;\n                    }\n                }\n                else {\n                    if (this.parent.monthHeaderTemplate) {\n                        append(this.renderDayMonthHeaderTemplate(date, months[column], 'mothHeaderTemplate'), innerTd);\n                    }\n                    else {\n                        innerTd.innerHTML = `<span>${this.getMonthName(date)}</span>`;\n                    }\n                    innerTd.setAttribute('data-date', date.getTime().toString());\n                }\n                innerTr.appendChild(innerTd);\n                this.parent.trigger(renderCell, { elementType: 'headerCells', element: innerTd });\n            }\n        }\n    }\n    renderResourceHeader(className) {\n        const wrap = createElement('div', { className: className });\n        const tbl = this.createTableLayout();\n        wrap.appendChild(tbl);\n        const trEle = createElement('tr');\n        if (this.parent.activeViewOptions.group.resources.length > 0) {\n            this.colLevels = this.generateColumnLevels();\n        }\n        else {\n            const colData = [{ className: [HEADER_CELLS_CLASS], type: 'headerCell' }];\n            this.colLevels = [colData];\n        }\n        for (const col of this.colLevels) {\n            const ntr = trEle.cloneNode();\n            const count = className === DATE_HEADER_WRAP_CLASS ? col : [col[0]];\n            for (const c of count) {\n                const tdEle = createElement('td');\n                if (c.className) {\n                    addClass([tdEle], c.className);\n                }\n                if (className === DATE_HEADER_WRAP_CLASS) {\n                    if (c.template) {\n                        append(c.template, tdEle);\n                    }\n                    if (c.colSpan) {\n                        tdEle.setAttribute('colspan', c.colSpan.toString());\n                    }\n                    if (c.groupIndex > -1) {\n                        tdEle.setAttribute('data-group-index', c.groupIndex.toString());\n                    }\n                    this.setResourceHeaderContent(tdEle, c);\n                }\n                if (className === LEFT_INDENT_WRAP_CLASS) {\n                    this.parent.renderHeaderIndentTemplate(c, tdEle);\n                }\n                const args = { elementType: c.type, element: tdEle, date: c.date, groupIndex: c.groupIndex };\n                this.parent.trigger(renderCell, args);\n                ntr.appendChild(tdEle);\n            }\n            tbl.querySelector('tbody').appendChild(ntr);\n        }\n        if (className === DATE_HEADER_WRAP_CLASS) {\n            tbl.appendChild(this.createTableColGroup(this.colLevels.slice(-1)[0].length));\n        }\n        return wrap;\n    }\n    renderContent(contentWrapper) {\n        const tr = createElement('tr');\n        contentWrapper.appendChild(tr);\n        const firstTd = createElement('td');\n        const lastTd = createElement('td');\n        const tdCollection = [];\n        let monthTBody;\n        if (this.parent.activeViewOptions.orientation === 'Vertical' && this.parent.activeViewOptions.group.resources.length > 0 &&\n            !this.parent.uiStateValues.isGroupAdaptive) {\n            tdCollection.push(firstTd);\n            firstTd.appendChild(this.parent.resourceBase.createResourceColumn());\n            this.rowCount = this.parent.resourceBase.lastResourceLevel.length;\n        }\n        else {\n            tdCollection.push(firstTd);\n            const monthWrapper = createElement('div', { className: MONTH_HEADER_WRAPPER });\n            firstTd.appendChild(monthWrapper);\n            monthWrapper.appendChild(this.createTableLayout());\n            monthTBody = monthWrapper.querySelector('tbody');\n        }\n        tdCollection.push(lastTd);\n        append(tdCollection, tr);\n        const content = createElement('div', { className: CONTENT_WRAP_CLASS });\n        lastTd.appendChild(content);\n        const contentTable = this.createTableLayout(CONTENT_TABLE_CLASS);\n        content.appendChild(contentTable);\n        const eventWrapper = createElement('div', { className: EVENT_TABLE_CLASS });\n        content.appendChild(eventWrapper);\n        const contentTBody = contentTable.querySelector('tbody');\n        if (this.parent.activeViewOptions.group.resources.length > 0 && !this.parent.uiStateValues.isGroupAdaptive) {\n            if (this.parent.rowAutoHeight) {\n                const addClassTable = [contentTable];\n                const monthHeader = this.parent.element.querySelector('.' + MONTH_HEADER_WRAPPER + ' .' + SCHEDULE_TABLE_CLASS);\n                if (monthHeader) {\n                    addClassTable.push(monthHeader);\n                }\n                addClass(addClassTable, AUTO_HEIGHT);\n            }\n            const colCount = this.parent.activeViewOptions.orientation === 'Horizontal' ? this.colLevels.slice(-1)[0].length : this.columnCount;\n            contentTable.appendChild(this.createTableColGroup(colCount));\n            this.renderResourceContent(eventWrapper, monthTBody, contentTBody);\n        }\n        else {\n            contentTable.appendChild(this.createTableColGroup(this.columnCount));\n            this.renderDefaultContent(eventWrapper, monthTBody, contentTBody);\n        }\n    }\n    renderDefaultContent(wrapper, monthBody, contentBody) {\n        const months = this.getMonths();\n        const dayHeaderDates = this.getMonthDates(new Date(this.parent.selectedDate.getFullYear(), months[0], 1));\n        for (let month = 0; month < this.rowCount; month++) {\n            wrapper.appendChild(createElement('div', { className: APPOINTMENT_CONTAINER_CLASS }));\n            let monthDate = new Date(this.parent.selectedDate.getFullYear(), months[month], 1);\n            let monthStart = this.parent.calendarUtil.getMonthStartDate(new Date(monthDate.getTime()));\n            let monthEnd = this.parent.calendarUtil.getMonthEndDate(new Date(monthDate.getTime()));\n            const tr = createElement('tr', { attrs: { 'role': 'row' } });\n            const monthTr = tr.cloneNode();\n            monthBody.appendChild(monthTr);\n            const contentTr = tr.cloneNode();\n            contentBody.appendChild(contentTr);\n            const monthTd = createElement('td', { className: MONTH_HEADER_CLASS, attrs: { 'role': 'gridcell' } });\n            if (this.parent.activeViewOptions.orientation === 'Horizontal') {\n                if (this.parent.monthHeaderTemplate) {\n                    append(this.renderDayMonthHeaderTemplate(monthStart, month, 'monthHeaderTemplate'), monthTd);\n                }\n                else {\n                    monthTd.innerHTML = `<span>${this.getMonthName(monthDate)}</span>`;\n                }\n                monthTd.setAttribute('data-date', monthDate.getTime().toString());\n            }\n            else {\n                if (this.parent.dayHeaderTemplate) {\n                    append(this.renderDayMonthHeaderTemplate(dayHeaderDates[month], month, 'dayHeaderTemplate'), monthTd);\n                }\n                else {\n                    monthTd.innerHTML = `<span>${this.parent.getDayNames('abbreviated')[month % 7]}</span>`;\n                }\n            }\n            monthTr.appendChild(monthTd);\n            this.parent.trigger(renderCell, { elementType: 'leftHeaderCells', element: monthTd });\n            let date = new Date(monthStart.getTime());\n            for (let column = 0; column < this.columnCount; column++) {\n                let isDateAvail;\n                if (this.parent.activeViewOptions.orientation === 'Vertical') {\n                    monthDate = new Date(this.parent.selectedDate.getFullYear(), months[column], 1);\n                    monthStart = this.parent.calendarUtil.getMonthStartDate(new Date(monthDate.getTime()));\n                    monthEnd = this.parent.calendarUtil.getMonthEndDate(new Date(monthDate.getTime()));\n                    const dayDate = (month - monthStart.getDay()) + 1;\n                    date = new Date(this.parent.selectedDate.getFullYear(), months[column], dayDate);\n                    isDateAvail = dayDate > 0 && date.getTime() < monthEnd.getTime();\n                }\n                else {\n                    isDateAvail = column >= monthStart.getDay() && date.getTime() < monthEnd.getTime();\n                }\n                const td = createElement('td', {\n                    className: WORK_CELLS_CLASS, attrs: { 'role': 'gridcell', 'aria-selected': 'false' }\n                });\n                contentTr.appendChild(td);\n                const dateHeader = createElement('div', {\n                    className: DATE_HEADER_CLASS + ' ' + NAVIGATE_CLASS,\n                    innerHTML: (isDateAvail) ?\n                        this.parent.globalize.formatDate(date, { skeleton: 'd', calendar: this.parent.getCalendarMode() }) : ''\n                });\n                const skeleton = 'full';\n                const announcementText = this.parent.globalize.formatDate(date, {\n                    skeleton: skeleton, calendar: this.parent.getCalendarMode()\n                });\n                dateHeader.setAttribute('aria-label', announcementText);\n                if (isDateAvail) {\n                    const tds = [td];\n                    const classList$$1 = [];\n                    if (this.parent.activeViewOptions.workDays.indexOf(date.getDay()) > -1) {\n                        classList$$1.push(WORKDAY_CLASS);\n                    }\n                    if (this.isCurrentDate(date)) {\n                        classList$$1.push(CURRENT_DAY_CLASS);\n                        if (this.parent.activeViewOptions.orientation === 'Horizontal') {\n                            tds.push(this.element.querySelector('.' + HEADER_CELLS_CLASS + `:nth-child(${column + 1})`));\n                        }\n                        else {\n                            tds.push(this.element.querySelectorAll('.' + MONTH_HEADER_CLASS).item(month));\n                        }\n                    }\n                    if (classList$$1.length > 0) {\n                        addClass(tds, classList$$1);\n                    }\n                }\n                else {\n                    addClass([td], OTHERMONTH_CLASS);\n                }\n                td.appendChild(dateHeader);\n                if (isDateAvail) {\n                    td.setAttribute('data-date', date.getTime().toString());\n                    this.wireEvents(td, 'cell');\n                }\n                this.renderCellTemplate({ date: date, type: 'workCells' }, td);\n                this.parent.trigger(renderCell, { elementType: 'workCells', element: td, date: date });\n                if (isDateAvail) {\n                    if (this.parent.activeViewOptions.orientation === 'Horizontal') {\n                        date = addDays(new Date(date.getTime()), 1);\n                    }\n                }\n            }\n        }\n    }\n    renderResourceContent(wrapper, monthBody, contentBody) {\n        const months = this.getMonths();\n        for (let row = 0; row < this.rowCount; row++) {\n            wrapper.appendChild(createElement('div', { className: APPOINTMENT_CONTAINER_CLASS }));\n            const tr = createElement('tr', { attrs: { 'role': 'row' } });\n            contentBody.appendChild(tr);\n            let resData;\n            if (this.parent.activeViewOptions.group.resources.length > 0 && !this.parent.uiStateValues.isGroupAdaptive) {\n                resData = this.parent.resourceBase.lastResourceLevel[row];\n            }\n            let monthDate = new Date(this.parent.selectedDate.getFullYear(), months[row], 1);\n            let date = this.parent.calendarUtil.getMonthStartDate(new Date(monthDate.getTime()));\n            if (this.parent.activeViewOptions.orientation === 'Horizontal') {\n                const monthTr = tr.cloneNode();\n                monthBody.appendChild(monthTr);\n                const monthTd = createElement('td', {\n                    className: MONTH_HEADER_CLASS,\n                    attrs: { 'role': 'gridcell', 'data-date': date.getTime().toString() }\n                });\n                if (this.parent.monthHeaderTemplate) {\n                    append(this.renderDayMonthHeaderTemplate(monthDate, row, 'monthHeaderTemplate'), monthTd);\n                }\n                else {\n                    monthTd.innerHTML = `<span>${this.getMonthName(monthDate)}</span>`;\n                }\n                monthTr.appendChild(monthTd);\n            }\n            for (let month = 0; month < this.columnCount; month++) {\n                let classList$$1 = [];\n                let groupIndex = row;\n                if (this.parent.activeViewOptions.orientation === 'Vertical') {\n                    classList$$1 = classList$$1.concat(resData.className);\n                    if (classList$$1.indexOf(RESOURCE_PARENT_CLASS) > -1) {\n                        classList$$1.push(RESOURCE_GROUP_CELLS_CLASS);\n                    }\n                    else {\n                        classList$$1.push(WORKDAY_CLASS);\n                    }\n                    monthDate = new Date(this.parent.selectedDate.getFullYear(), months[month], 1);\n                    date = this.parent.calendarUtil.getMonthStartDate(new Date(monthDate.getTime()));\n                }\n                else {\n                    groupIndex = this.colLevels.slice(-1)[0][month].groupIndex;\n                    classList$$1.push(WORKDAY_CLASS);\n                }\n                const td = createElement('td', {\n                    className: WORK_CELLS_CLASS,\n                    attrs: {\n                        'role': 'gridcell', 'aria-selected': 'false',\n                        'data-date': date.getTime().toString()\n                    }\n                });\n                addClass([td], classList$$1);\n                td.setAttribute('data-group-index', groupIndex.toString());\n                this.renderCellTemplate({ date: date, type: 'resourceGroupCells', groupIndex: groupIndex }, td);\n                this.wireEvents(td, 'cell');\n                tr.appendChild(td);\n                this.parent.trigger(renderCell, { elementType: 'resourceGroupCells', element: td, date: date });\n            }\n        }\n        if (this.parent.activeViewOptions.orientation === 'Vertical') {\n            this.collapseRows(this.parent.element.querySelector('.' + CONTENT_WRAP_CLASS));\n        }\n    }\n    renderDayMonthHeaderTemplate(date, column, type) {\n        const args = { date: date, type: type === 'dayHeaderTemplate' ? 'dayHeader' : 'monthHeader' };\n        const dayId = `schedule_${this.parent.activeViewOptions.dayHeaderTemplateName}dayHeaderTemplate`;\n        const monthId = `schedule_${this.parent.activeViewOptions.dayHeaderTemplateName}monthHeaderTemplate`;\n        if (type === 'dayHeaderTemplate') {\n            args.day = this.parent.getDayNames('wide')[column % 7];\n            return [].slice.call(this.parent.getDayHeaderTemplate()(args, this.parent, 'dayHeaderTemplate', dayId, false));\n        }\n        else {\n            return [].slice.call(this.parent.getMonthHeaderTemplate()(args, this.parent, 'monthHeaderTemplate', monthId, false));\n        }\n    }\n    renderCellTemplate(data, td) {\n        if (!this.parent.activeViewOptions.cellTemplate || td.classList.contains(OTHERMONTH_CLASS)) {\n            return;\n        }\n        const args = { date: data.date, type: data.type };\n        if (data.groupIndex) {\n            args.groupIndex = data.groupIndex;\n        }\n        const scheduleId = this.parent.element.id + '_';\n        const viewName = this.parent.activeViewOptions.cellTemplateName;\n        const templateId = scheduleId + viewName + 'cellTemplate';\n        const cellTemplate = [].slice.call(this.parent.getCellTemplate()(args, this.parent, 'cellTemplate', templateId, false));\n        append(cellTemplate, td);\n    }\n    scrollToDate(scrollDate) {\n        if (this.parent.activeViewOptions.group.resources.length === 0) {\n            const date = +new Date(resetTime(scrollDate));\n            const element = this.element.querySelector('[data-date=\"' + date + '\"]');\n            if (element) {\n                this.getScrollableElement().scrollLeft = element.offsetLeft;\n                this.getScrollableElement().scrollTop = element.offsetTop;\n            }\n        }\n    }\n    getScrollableElement() {\n        if (this.parent.isAdaptive && !this.isTimelineView()) {\n            return this.element.querySelector('.' + SCROLL_CONTAINER_CLASS);\n        }\n        else {\n            return this.getContentAreaElement();\n        }\n    }\n}\n\n/* eslint-disable @typescript-eslint/no-explicit-any */\n/**\n * ICalendar Export Module\n */\nclass ICalendarExport {\n    constructor(parent) {\n        this.parent = parent;\n    }\n    initializeCalendarExport(fileName, customData) {\n        let eventsData = (customData) ? customData :\n            extend([], this.parent.eventsData, null, true);\n        eventsData = this.parent.eventBase.sortByTime(eventsData);\n        const SEPARATOR = (navigator.appVersion.indexOf('Win') !== -1) ? '\\r\\n' : '\\n';\n        const iCalendarEvents = [];\n        const filterCollection = [];\n        const timeZone = this.parent.timezone || this.parent.tzModule.getLocalTimezoneName();\n        const fields = this.parent.eventFields;\n        eventsData.forEach((eventObj) => {\n            let uId = this.parent.eventBase.generateGuid();\n            const editedExDate = [];\n            if (eventObj[fields.recurrenceID]) {\n                const filter = this.filterEvents(filterCollection, fields.id, eventObj[fields.recurrenceID]);\n                uId = filter[0].UID;\n            }\n            if (!eventObj[fields.recurrenceID] && eventObj[fields.recurrenceRule] && eventObj[fields.recurrenceException]) {\n                const exDate = (eventObj[fields.recurrenceException]).split(',');\n                const editedObj = this.filterEvents(eventsData, fields.recurrenceID, eventObj[fields.id]);\n                editedObj.forEach((edited) => {\n                    editedExDate.push(getRecurrenceStringFromDate(edited[fields.startTime]));\n                });\n                const exceptionDateList = exDate.filter((value) => editedExDate.indexOf(value) === -1);\n                eventObj[fields.recurrenceException] = (exceptionDateList.length > 0) ? (exceptionDateList.join(',') + ',') : '';\n            }\n            const startZone = (eventObj[fields.startTimezone] || timeZone);\n            const endZone = (eventObj[fields.endTimezone] || timeZone);\n            const readonly = (eventObj[fields.isReadonly]) ? (eventObj[fields.isReadonly]) : false;\n            const calendarEvent = [\n                'BEGIN:VEVENT',\n                'LOCATION:' + (eventObj[fields.location] || ''),\n                'SUMMARY:' + (eventObj[fields.subject] || ''),\n                'UID:' + uId,\n                'DESCRIPTION:' + (eventObj[fields.description] || ''),\n                'ISREADONLY:' + readonly,\n                'END:VEVENT'\n            ];\n            if (eventObj[fields.isAllDay]) {\n                calendarEvent.splice(4, 0, 'DTEND;VALUE=DATE:' + this.convertDateToString(eventObj[fields.endTime], true));\n                calendarEvent.splice(4, 0, 'DTSTART;VALUE=DATE:' + this.convertDateToString(eventObj[fields.startTime], true));\n            }\n            else if (!eventObj[fields.isAllDay] && !eventObj[fields.recurrenceRule]) {\n                calendarEvent.splice(4, 0, 'DTEND:' + this.convertDateToString(eventObj[fields.endTime]));\n                calendarEvent.splice(4, 0, 'DTSTART:' + this.convertDateToString(eventObj[fields.startTime]));\n            }\n            else {\n                calendarEvent.splice(4, 0, 'DTEND;TZID=\"' + endZone + '\":' + this.convertDateToString(eventObj[fields.endTime]));\n                calendarEvent.splice(4, 0, 'DTSTART;TZID=\"' + startZone + '\":'\n                    + this.convertDateToString(eventObj[fields.startTime]));\n            }\n            if (eventObj[fields.recurrenceRule]) {\n                calendarEvent.splice(4, 0, 'RRULE:' + eventObj[fields.recurrenceRule]);\n            }\n            if (eventObj[fields.recurrenceException]) {\n                const exDate = eventObj[fields.recurrenceException].split(',');\n                for (let i = 0; i < exDate.length - 1; i++) {\n                    calendarEvent.splice(5, 0, 'EXDATE:' +\n                        this.convertDateToString(getDateFromRecurrenceDateString(exDate[i]), eventObj[fields.isAllDay]));\n                }\n            }\n            if (eventObj[fields.recurrenceID]) {\n                calendarEvent.splice(4, 0, 'RECURRENCE-ID;TZID=\"' + startZone + '\":'\n                    + this.convertDateToString(eventObj[fields.startTime], eventObj[fields.isAllDay]));\n            }\n            const customFields = this.customFieldFilter(eventObj, fields);\n            if (customFields.length > 0) {\n                customFields.forEach((customField) => calendarEvent.splice(4, 0, customField + ':' + (eventObj[customField] || '')));\n            }\n            const app = extend({}, eventObj);\n            app.UID = uId;\n            filterCollection.push(app);\n            iCalendarEvents.push(calendarEvent.join(SEPARATOR));\n        });\n        const iCalendar = [\n            'BEGIN:VCALENDAR',\n            'PRODID:-//Syncfusion Inc//Scheduler//EN',\n            'VERSION:2.0',\n            'CALSCALE:GREGORIAN',\n            'METHOD:PUBLISH',\n            'X-WR-CALNAME:' + (fileName || 'Calendar'),\n            'X-WR-TIMEZONE:' + timeZone\n        ].join(SEPARATOR);\n        const icsString = iCalendar + SEPARATOR + iCalendarEvents.join(SEPARATOR) + SEPARATOR + 'END:VCALENDAR';\n        this.download(icsString, fileName);\n    }\n    customFieldFilter(eventObj, fields) {\n        const defaultFields = Object.keys(fields).map((key) => fields[key]);\n        const eventFields = Object.keys(eventObj);\n        return eventFields.filter((value) => (defaultFields.indexOf(value) === -1) && (value !== 'Guid'));\n    }\n    convertDateToString(eventDate, allDay) {\n        const year = ('0000' + (eventDate.getFullYear().toString())).slice(-4);\n        const month = ('00' + ((eventDate.getMonth() + 1).toString())).slice(-2);\n        const date = ('00' + ((eventDate.getDate()).toString())).slice(-2);\n        const hours = ('00' + (eventDate.getHours().toString())).slice(-2);\n        const minutes = ('00' + (eventDate.getMinutes().toString())).slice(-2);\n        const seconds = ('00' + (eventDate.getSeconds().toString())).slice(-2);\n        const timeString = (allDay) ? year + month + date : year + month + date + 'T' + hours + minutes + seconds;\n        return timeString;\n    }\n    download(icsString, fileName) {\n        const buffer = new Blob([icsString], { type: 'data:text/calendar;charset=utf8' });\n        fileName = (fileName || 'Calendar') + '.ics';\n        if (navigator.msSaveBlob) {\n            navigator.msSaveBlob(buffer, fileName);\n        }\n        else {\n            const downloadLink = document.createElementNS('http://www.w3.org/1999/xhtml', 'a');\n            downloadLink.download = fileName;\n            downloadLink.href = URL.createObjectURL(buffer);\n            const event = document.createEvent('MouseEvent');\n            event.initEvent('click', true, true);\n            downloadLink.dispatchEvent(event);\n            setTimeout(() => {\n                URL.revokeObjectURL(downloadLink.href);\n                downloadLink.href = undefined;\n            });\n        }\n    }\n    filterEvents(data, field, value) {\n        return data.filter((e) => e[field] === value);\n    }\n    getModuleName() {\n        return 'iCalendarExport';\n    }\n    destroy() {\n        if (!this.parent || this.parent && this.parent.isDestroyed) {\n            return;\n        }\n        this.parent = null;\n    }\n}\n\n/* eslint-disable @typescript-eslint/no-explicit-any */\n/**\n * ICalendar Import Module\n */\nclass ICalendarImport {\n    constructor(parent) {\n        this.allDay = false;\n        this.parent = parent;\n    }\n    initializeCalendarImport(fileContent) {\n        if (fileContent && fileContent instanceof Blob) {\n            const fileReader = new FileReader();\n            fileReader.onload = () => {\n                const iCalString = fileReader.result;\n                this.iCalendarParser(iCalString);\n            };\n            fileReader.readAsText(fileContent, 'UTF-8');\n        }\n        else if (fileContent && typeof fileContent === 'string') {\n            this.iCalendarParser(fileContent);\n        }\n    }\n    iCalendarParser(iCalString) {\n        const fields = this.parent.eventFields;\n        const events = [];\n        const uId = 'UID';\n        const calArray = iCalString.replace(new RegExp('\\\\r', 'g'), '').split('\\n');\n        let isEvent = false;\n        let curEvent;\n        // eslint-disable-next-line prefer-const\n        let id = this.parent.eventBase.getEventMaxID();\n        let count = 0;\n        calArray.forEach((element) => {\n            let index;\n            let type;\n            let value;\n            if (!isEvent && element === 'BEGIN:VEVENT') {\n                isEvent = true;\n                curEvent = {};\n            }\n            if (isEvent && element === 'END:VEVENT') {\n                isEvent = false;\n                events.push(curEvent);\n                curEvent = null;\n            }\n            if (isEvent) {\n                index = element.indexOf(':');\n                type = element.substr(0, index).replace(/^\\s\\s*/, '').replace(/\\s\\s*$/, '');\n                value = element.substr(index + 1, element.length - (index + 1)).replace(/^\\s\\s*/, '').replace(/\\s\\s*$/, '');\n                if (element.indexOf('SUMMARY') !== -1) {\n                    type = 'SUMMARY';\n                }\n                if (element.indexOf('DTSTART') !== -1) {\n                    curEvent[fields.startTime] = this.dateParsing(element);\n                    curEvent[fields.isAllDay] = this.allDay;\n                    this.allDay = false;\n                }\n                else if (element.indexOf('DTEND') !== -1) {\n                    curEvent[fields.endTime] = this.dateParsing(element);\n                }\n                else if (element.indexOf('EXDATE') !== -1) {\n                    value = getRecurrenceStringFromDate(this.dateParsing(element));\n                    curEvent[fields.recurrenceException] = (isNullOrUndefined(curEvent[fields.recurrenceException])) ?\n                        value : curEvent[fields.recurrenceException] + ',' + value;\n                }\n                else if (element.indexOf('RECURRENCE-ID') !== -1) {\n                    value = getRecurrenceStringFromDate(this.dateParsing(element));\n                    curEvent[fields.recurrenceException] = value;\n                    curEvent[fields.recurrenceID] = value;\n                }\n                else {\n                    switch (type) {\n                        case 'BEGIN':\n                            break;\n                        case 'UID':\n                            curEvent[uId] = value;\n                            curEvent[fields.id] = typeof (id) === 'string' ? id + count.toString() : id + count;\n                            count++;\n                            break;\n                        case 'SUMMARY':\n                            curEvent[fields.subject] = value;\n                            break;\n                        case 'LOCATION':\n                            curEvent[fields.location] = value;\n                            break;\n                        case 'DESCRIPTION':\n                            curEvent[fields.description] = value;\n                            break;\n                        case 'ISREADONLY':\n                            curEvent[fields.isReadonly] = (value.indexOf('true') > -1);\n                            break;\n                        case 'RRULE':\n                            curEvent[fields.recurrenceRule] = value;\n                            break;\n                        default:\n                            if (this.parent.resourceCollection.length > 0) {\n                                const resData = this.parent.resourceCollection.filter((data) => data.field === type);\n                                curEvent[type] = (resData.length > 0 && (typeof (resData[0].dataSource[0][resData[0].idField]) == 'number')) ? parseInt(value, 10) : value;\n                            }\n                            else {\n                                curEvent[type] = value;\n                            }\n                    }\n                }\n            }\n        });\n        const app = extend([], events, null, true);\n        this.parent.addEvent(this.processOccurrence(app));\n    }\n    processOccurrence(app) {\n        const appoint = [];\n        const uId = 'UID';\n        const fields = this.parent.eventFields;\n        app.forEach((eventObj) => {\n            let parentObj;\n            let id;\n            // eslint-disable-next-line no-prototype-builtins\n            if (!eventObj.hasOwnProperty(fields.recurrenceID)) {\n                parentObj = eventObj;\n                id = eventObj[fields.id];\n            }\n            const data = app.filter((data) => data.UID === eventObj[uId]);\n            if (data.length > 1 && isNullOrUndefined(eventObj[fields.recurrenceID])) {\n                for (let i = 0; i < data.length; i++) {\n                    // eslint-disable-next-line no-prototype-builtins\n                    if (data[i].hasOwnProperty(fields.recurrenceID)) {\n                        const exdate = data[i][fields.recurrenceID];\n                        data[i][fields.recurrenceID] = id;\n                        data[i][fields.recurrenceException] = null;\n                        parentObj[fields.recurrenceException] = (isNullOrUndefined(parentObj[fields.recurrenceException])) ?\n                            exdate : parentObj[fields.recurrenceException] + ',' + exdate;\n                        appoint.push(data[i]);\n                    }\n                }\n                appoint.push(parentObj);\n                // eslint-disable-next-line no-prototype-builtins\n            }\n            else if (!eventObj.hasOwnProperty(fields.recurrenceID)) {\n                appoint.push(eventObj);\n            }\n        });\n        return appoint;\n    }\n    getDateString(value) {\n        value = value || '';\n        // eslint-disable-next-line no-useless-escape\n        return (value.replace(/\\\\\\,/g, ',').replace(/\\\\\\;/g, ';').replace(/\\\\[nN]/g, '\\n').replace(/\\\\\\\\/g, '\\\\'));\n    }\n    dateParsing(element) {\n        const expression = /([^':;]+)((?:;(?:[^':;]+)(?:=(?:(?:'[^']*')|(?:[^':;]+))))*):(.*)/;\n        const split = (element.match(expression)).slice(1);\n        const value = split[split.length - 1];\n        let newDate = new Date(this.getDateString(value));\n        if (element && (element.indexOf('VALUE=DATE') > -1 || element.indexOf('RECURRENCE-ID;TZID') > -1)) {\n            const data = /^(\\d{4})(\\d{2})(\\d{2})$/.exec(value);\n            if (data !== null) {\n                newDate = new Date(parseInt(data[1], 10), parseInt(data[2], 10) - 1, parseInt(data[3], 10));\n            }\n            if (element.indexOf('DTSTART') > -1) {\n                this.allDay = true;\n            }\n        }\n        const data = /^(\\d{4})(\\d{2})(\\d{2})T(\\d{2})(\\d{2})(\\d{2})(Z)?$/.exec(value);\n        if (data !== null) {\n            if (data[7] === 'Z') {\n                newDate = new Date(Date.UTC(parseInt(data[1], 10), parseInt(data[2], 10) - 1, parseInt(data[3], 10), parseInt(data[4], 10), parseInt(data[5], 10), parseInt(data[6], 10)));\n            }\n            else {\n                newDate = new Date(parseInt(data[1], 10), parseInt(data[2], 10) - 1, parseInt(data[3], 10), parseInt(data[4], 10), parseInt(data[5], 10), parseInt(data[6], 10));\n            }\n        }\n        return newDate;\n    }\n    getModuleName() {\n        return 'iCalendarImport';\n    }\n    destroy() {\n        if (!this.parent || this.parent && this.parent.isDestroyed) {\n            return;\n        }\n    }\n}\n\n/* eslint-disable @typescript-eslint/no-explicit-any */\n/**\n * Excel Export Module\n */\nclass ExcelExport {\n    constructor(parent) {\n        this.parent = parent;\n    }\n    initializeExcelExport(excelExportOptions) {\n        const exportFields = excelExportOptions.fields || Object.keys(this.parent.eventFields).map((field) => this.parent.eventFields[field]);\n        const exportName = excelExportOptions.fileName || 'Schedule';\n        const exportType = excelExportOptions.exportType || 'xlsx';\n        const isIncludeOccurrences = excelExportOptions.includeOccurrences || false;\n        let eventCollection;\n        if (excelExportOptions.customData) {\n            eventCollection = !isIncludeOccurrences ? excelExportOptions.customData :\n                this.parent.eventBase.getProcessedEvents(excelExportOptions.customData);\n        }\n        else {\n            eventCollection = !isIncludeOccurrences ? this.parent.eventsData : this.parent.eventsProcessed;\n        }\n        this.processWorkbook(exportFields, exportName, exportType, eventCollection);\n    }\n    processWorkbook(fields, name, type, eventCollection) {\n        const columns = [];\n        const rows = [];\n        const columnHeader = [];\n        fields.forEach((field, i) => columns.push({ index: i + 1, width: (field === 'Id' ? 20 : 150) }));\n        const style = { fontSize: 12, borders: { color: '#E0E0E0' }, bold: true };\n        fields.forEach((field, i) => columnHeader.push({ index: i + 1, value: field, style: style }));\n        rows.push({ index: 1, cells: columnHeader });\n        let i = 2;\n        for (const event of eventCollection) {\n            const columnData = [];\n            fields.forEach((field, n) => {\n                let columnRule = { index: n + 1, value: event[field] || '' };\n                if (field === this.parent.eventFields.startTime || field === this.parent.eventFields.endTime) {\n                    const styleRule = { fontSize: 12, numberFormat: 'm/d/yyyy h:mm AM/PM' };\n                    columnRule = extend({}, columnRule, { style: styleRule }, true);\n                }\n                columnData.push(columnRule);\n            });\n            rows.push({ index: i, cells: columnData });\n            i++;\n        }\n        const workSheet = [{ columns: columns, rows: rows }];\n        const book = new Workbook({ worksheets: workSheet }, type, this.parent.locale);\n        book.save(name + '.' + type);\n    }\n    getModuleName() {\n        return 'excelExport';\n    }\n    destroy() {\n        this.parent = null;\n    }\n}\n\n/* eslint-disable @typescript-eslint/no-explicit-any */\n/**\n * Print Module\n */\nclass Print {\n    constructor(parent) {\n        this.parent = parent;\n    }\n    print(printOptions) {\n        if (isNullOrUndefined(printOptions)) {\n            this.printScheduler();\n        }\n        else {\n            this.printSchedulerWithModel(printOptions);\n        }\n    }\n    printScheduler() {\n        const clone = this.parent.element.cloneNode(true);\n        clone.id = this.parent.element.id + '_print';\n        document.body.appendChild(clone);\n        const className = this.parent.currentView === 'MonthAgenda' ? '.e-appointment-wrap' : '.e-content-wrap';\n        const scrollableEle = this.parent.element.querySelector(className);\n        const links = [].slice.call(document.getElementsByTagName('head')[0].querySelectorAll('link, style'));\n        let reference = '';\n        for (const link of links) {\n            reference += link.outerHTML;\n        }\n        const div = createElement('div');\n        clone.style.width = this.parent.element.offsetWidth + 'px';\n        const elementWidth = Math.round((parseInt(clone.style.width, 10)) / 100) * 100;\n        div.appendChild(clone);\n        const printWindow = window.open('', 'print', 'height=550,width=' + elementWidth + ',tabbar=no');\n        printWindow.document.write('<!DOCTYPE html><html><head>' + reference + '</head><body>' + div.innerHTML +\n            '<script>(function() { window.ready = true; })();</script></body></html>');\n        printWindow.document.close();\n        printWindow.focus();\n        setTimeout(() => {\n            if (printWindow.ready && scrollableEle) {\n                // eslint-disable-next-line no-self-assign\n                scrollableEle.scrollLeft = scrollableEle.scrollLeft;\n                // eslint-disable-next-line no-self-assign\n                scrollableEle.scrollTop = scrollableEle.scrollTop;\n                const headerTimeCellsScroll = printWindow.document.querySelector('.e-date-header-wrap');\n                if (headerTimeCellsScroll) {\n                    headerTimeCellsScroll.scrollLeft = scrollableEle.scrollLeft;\n                }\n                const timeCellsScroll = printWindow.document.querySelector('.e-time-cells-wrap');\n                if (timeCellsScroll) {\n                    timeCellsScroll.scrollTop = scrollableEle.scrollTop;\n                }\n                printWindow.print();\n                printWindow.close();\n            }\n        }, 500);\n    }\n    printSchedulerWithModel(printOptions) {\n        const element = createElement('div', { id: this.parent.element.id + '_print', className: 'e-print-schedule' });\n        document.body.appendChild(element);\n        Schedule.Inject(Day, Week, WorkWeek, Month, Agenda, MonthAgenda, TimelineViews, TimelineMonth, Year, TimelineYear);\n        this.printInstance = new Schedule(this.getPrintScheduleModel(printOptions));\n        this.printInstance.isPrinting = true;\n        this.printInstance.appendTo(element);\n        this.printInstance.on(print$1, this.contentReady, this);\n        this.printWindow = window.open('', 'print', 'height=' + window.outerHeight + ',width=' + window.outerWidth + ',tabbar=no');\n        this.printWindow.moveTo(0, 0);\n        this.printWindow.resizeTo(screen.availWidth, screen.availHeight);\n    }\n    getPrintScheduleModel(printOptions) {\n        const printModel = {};\n        const scheduleProps = ['agendaDaysCount', 'calendarMode', 'cssClass', 'currentView',\n            'dateFormat', 'enableRtl', 'endHour', 'eventSettings', 'firstDayOfWeek',\n            'firstMonthOfYear', 'group', 'height', 'locale', 'maxDate', 'minDate', 'readonly',\n            'resources', 'rowAutoHeight', 'selectedDate', 'showHeaderBar', 'showTimeIndicator', 'showWeekNumber',\n            'showWeekend', 'startHour', 'timeFormat', 'timeScale', 'timezone', 'views', 'width', 'workDays', 'workHours'\n        ];\n        let eventSettings;\n        let group;\n        for (const key of scheduleProps) {\n            switch (key) {\n                case 'eventSettings':\n                    eventSettings = Object.assign({}, this.parent.eventSettings.properties);\n                    eventSettings.dataSource = this.parent.eventsData;\n                    eventSettings.template = null;\n                    printModel.eventSettings = eventSettings;\n                    break;\n                case 'group':\n                    group = isNullOrUndefined(printOptions.group) ? this.parent.group : printOptions.group;\n                    group.headerTooltipTemplate = null;\n                    printModel.group = group;\n                    break;\n                default:\n                    printModel[key] = isNullOrUndefined(printOptions[key]) ?\n                        this.parent[key] : printOptions[key];\n                    break;\n            }\n        }\n        return printModel;\n    }\n    contentReady() {\n        this.printWindow = print(this.printInstance.element, this.printWindow);\n        this.printWindow.onbeforeunload = () => {\n            this.printInstance.off(print$1, this.contentReady);\n            this.printInstance.element.remove();\n            this.printInstance.destroy();\n            this.printInstance = null;\n            this.printWindow = null;\n        };\n    }\n    getModuleName() {\n        return 'print';\n    }\n    destroy() {\n        this.parent = null;\n    }\n}\n\n/**\n * Exporting modules\n */\n\n/**\n * Schedule component exported items\n */\n\n/**\n * Recurrence-Editor component exported items\n */\n\n/**\n * Calendar util exported items\n */\n\n/**\n * Export Schedule components\n */\n\nexport { Schedule, cellClick, cellDoubleClick, moreEventsClick, select, hover, actionBegin, actionComplete, actionFailure, navigating, renderCell, eventClick, eventRendered, dataBinding, dataBound, popupOpen, popupClose, dragStart, drag, dragStop, resizeStart, resizing, resizeStop, inlineClick, initialLoad, initialEnd, print$1 as print, dataReady, eventsLoaded, contentReady, scroll, virtualScroll, scrollUiUpdate, uiUpdate, documentClick, cellMouseDown, WEEK_LENGTH, MS_PER_DAY, MS_PER_MINUTE, getElementHeightFromClass, getTranslateY, getWeekFirstDate, getWeekLastDate, firstDateOfMonth, lastDateOfMonth, getWeekNumber, getWeekMiddleDate, setTime, resetTime, getDateInMs, getDateCount, addDays, addMonths, addYears, getStartEndHours, getMaxDays, getDaysCount, getDateFromString, getScrollBarWidth, findIndexInData, getOuterHeight, removeChildren, isDaylightSavingTime, getUniversalTime, isMobile, isIPadDevice, capitalizeFirstWord, Resize, DragAndDrop, HeaderRenderer, ViewBase, Day, Week, WorkWeek, Month, Year, Agenda, MonthAgenda, TimelineViews, TimelineMonth, TimelineYear, Timezone, timezoneData, ICalendarExport, ICalendarImport, ExcelExport, Print, RecurrenceEditor, generateSummary, generate, getDateFromRecurrenceDateString, extractObjectFromRule, getCalendarUtil, getRecurrenceStringFromDate, Gregorian, Islamic };\n"]},"metadata":{},"sourceType":"module"}