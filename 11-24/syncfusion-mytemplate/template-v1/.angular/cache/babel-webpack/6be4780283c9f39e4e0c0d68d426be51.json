{"ast":null,"code":"import _createForOfIteratorHelper from \"D:/angularStarter/11-24/syncfusion-mytemplate/template-v1/node_modules/@babel/runtime/helpers/esm/createForOfIteratorHelper\";\nimport _createClass from \"D:/angularStarter/11-24/syncfusion-mytemplate/template-v1/node_modules/@babel/runtime/helpers/esm/createClass\";\nimport _get from \"D:/angularStarter/11-24/syncfusion-mytemplate/template-v1/node_modules/@babel/runtime/helpers/esm/get\";\nimport _getPrototypeOf from \"D:/angularStarter/11-24/syncfusion-mytemplate/template-v1/node_modules/@babel/runtime/helpers/esm/getPrototypeOf\";\nimport _classCallCheck from \"D:/angularStarter/11-24/syncfusion-mytemplate/template-v1/node_modules/@babel/runtime/helpers/esm/classCallCheck\";\nimport _inherits from \"D:/angularStarter/11-24/syncfusion-mytemplate/template-v1/node_modules/@babel/runtime/helpers/esm/inherits\";\nimport _createSuper from \"D:/angularStarter/11-24/syncfusion-mytemplate/template-v1/node_modules/@babel/runtime/helpers/esm/createSuper\";\nimport { Animation, Browser, ChildProperty, Complex, Component, Event, EventHandler, KeyboardEvents, L10n, NotifyPropertyChanges, Property, SanitizeHtmlHelper, addClass, append, attributes, classList, closest, compile, createElement, detach, extend, formatUnit, getComponent as _getComponent, getUniqueID, getValue, isNullOrUndefined, isUndefined, matches, prepend, remove, removeClass, rippleEffect, select, selectAll, setStyleAttribute, setValue } from '@syncfusion/ej2-base';\nimport { DataManager, DataUtil, Predicate, Query } from '@syncfusion/ej2-data';\nimport { ListBase, Sortable, cssClass, moveTo } from '@syncfusion/ej2-lists';\nimport { Popup, createSpinner, getZindexPartial, hideSpinner as _hideSpinner, isCollide, showSpinner as _showSpinner } from '@syncfusion/ej2-popups';\nimport { Input, TextBox } from '@syncfusion/ej2-inputs';\nimport { Button, createCheckBox } from '@syncfusion/ej2-buttons';\nimport { TreeView } from '@syncfusion/ej2-navigations';\n/**\n * IncrementalSearch module file\n */\n\nvar queryString = '';\nvar prevString = '';\nvar matches$1 = [];\nvar activeClass = 'e-active';\nvar prevElementId = '';\n/**\n * Search and focus the list item based on key code matches with list text content\n *\n * @param  { number } keyCode - Specifies the key code which pressed on keyboard events.\n * @param  { HTMLElement[]} items - Specifies an array of HTMLElement, from which matches find has done.\n * @param { number } selectedIndex - Specifies the selected item in list item, so that search will happen\n * after selected item otherwise it will do from initial.\n * @param  { boolean } ignoreCase - Specifies the case consideration when search has done.\n * @param {string} elementId - Specifies the list element ID.\n * @returns {Element} Returns list item based on key code matches with list text content.\n */\n\nfunction _incrementalSearch(keyCode, items, selectedIndex, ignoreCase, elementId) {\n  queryString += String.fromCharCode(keyCode);\n  setTimeout(function () {\n    queryString = '';\n  }, 1000);\n  var index;\n  queryString = ignoreCase ? queryString.toLowerCase() : queryString;\n\n  if (prevElementId === elementId && prevString === queryString) {\n    for (var i = 0; i < matches$1.length; i++) {\n      if (matches$1[i].classList.contains(activeClass)) {\n        index = i;\n        break;\n      }\n    }\n\n    index = index + 1;\n    return matches$1[index] ? matches$1[index] : matches$1[0];\n  } else {\n    var listItems = items;\n    var strLength = queryString.length;\n    var text;\n    var item;\n    selectedIndex = selectedIndex ? selectedIndex + 1 : 0;\n    var _i = selectedIndex;\n    matches$1 = [];\n\n    do {\n      if (_i === listItems.length) {\n        _i = -1;\n      }\n\n      if (_i === -1) {\n        index = 0;\n      } else {\n        index = _i;\n      }\n\n      item = listItems[index];\n      text = ignoreCase ? item.innerText.toLowerCase() : item.innerText;\n\n      if (text.substr(0, strLength) === queryString) {\n        matches$1.push(listItems[index]);\n      }\n\n      _i++;\n    } while (_i !== selectedIndex);\n\n    prevString = queryString;\n    prevElementId = elementId;\n    return matches$1[0];\n  }\n}\n/**\n * Search the list item based on given input value matches with search type.\n *\n * @param {string} inputVal - Specifies the given input value.\n * @param {HTMLElement[]} items - Specifies the list items.\n * @param {SearchType} searchType - Specifies the filter type.\n * @param {boolean} ignoreCase - Specifies the case sensitive option for search operation.\n * @returns {Element | number} Returns the search matched items.\n */\n\n\nfunction Search(inputVal, items, searchType, ignoreCase) {\n  var listItems = items;\n  ignoreCase = ignoreCase !== undefined && ignoreCase !== null ? ignoreCase : true;\n  var itemData = {\n    item: null,\n    index: null\n  };\n\n  if (inputVal && inputVal.length) {\n    var strLength = inputVal.length;\n    var queryStr = ignoreCase ? inputVal.toLocaleLowerCase() : inputVal;\n\n    for (var i = 0, itemsData = listItems; i < itemsData.length; i++) {\n      var item = itemsData[i];\n      var text = (ignoreCase ? item.textContent.toLocaleLowerCase() : item.textContent).replace(/^\\s+|\\s+$/g, '');\n\n      if (searchType === 'Equal' && text === queryStr || searchType === 'StartsWith' && text.substr(0, strLength) === queryStr) {\n        itemData.item = item;\n        itemData.index = i;\n        return {\n          item: item,\n          index: i\n        };\n      }\n    }\n\n    return itemData;\n  }\n\n  return itemData;\n}\n\nfunction resetIncrementalSearchValues(elementId) {\n  if (prevElementId === elementId) {\n    prevElementId = '';\n    prevString = '';\n    queryString = '';\n    matches$1 = [];\n  }\n}\n/* eslint-disable jsdoc/require-param, valid-jsdoc */\n\n/**\n * Function helps to find which highlightSearch is to call based on your data.\n *\n * @param  {HTMLElement} element - Specifies an li element.\n * @param  {string} query - Specifies the string to be highlighted.\n * @param  {boolean} ignoreCase - Specifies the ignoreCase option.\n * @param  {HightLightType} type - Specifies the type of highlight.\n * @returns {void}\n */\n\n\nfunction highlightSearch(element, query, ignoreCase, type) {\n  if (query === '') {\n    return;\n  } else {\n    var ignoreRegex = ignoreCase ? 'gim' : 'gm'; // eslint-disable-next-line\n\n    query = /^[a-zA-Z0-9- ]*$/.test(query) ? query : query.replace(/[\\-\\[\\]\\/\\{\\}\\(\\)\\*\\+\\?\\.\\\\\\^\\$\\|]/g, '\\\\$&');\n    var replaceQuery = type === 'StartsWith' ? '^(' + query + ')' : type === 'EndsWith' ? '(' + query + ')$' : '(' + query + ')';\n    findTextNode(element, new RegExp(replaceQuery, ignoreRegex));\n  }\n}\n/* eslint-enable jsdoc/require-param, valid-jsdoc */\n\n/**\n *\n * @param {HTMLElement} element - Specifies the element.\n * @param {RegExp} pattern - Specifies the regex to match the searched text.\n * @returns {void}\n */\n\n\nfunction findTextNode(element, pattern) {\n  for (var index = 0; element.childNodes && index < element.childNodes.length; index++) {\n    if (element.childNodes[index].nodeType === 3 && element.childNodes[index].textContent.trim() !== '') {\n      var value = element.childNodes[index].nodeValue.trim().replace(pattern, '<span class=\"e-highlight\">$1</span>');\n      element.childNodes[index].nodeValue = '';\n      element.innerHTML = element.innerHTML.trim() + value;\n      break;\n    } else {\n      findTextNode(element.childNodes[index], pattern);\n    }\n  }\n}\n/**\n * Function helps to remove highlighted element based on your data.\n *\n * @param  {HTMLElement} content - Specifies an content element.\n * @returns {void}\n */\n\n\nfunction revertHighlightSearch(content) {\n  var contentElement = content.querySelectorAll('.e-highlight');\n\n  for (var i = contentElement.length - 1; i >= 0; i--) {\n    var parent = contentElement[i].parentNode;\n    var text = document.createTextNode(contentElement[i].textContent);\n    parent.replaceChild(text, contentElement[i]);\n  }\n}\n/**\n * Common source\n */\n\n\nvar __decorate = undefined && undefined.__decorate || function (decorators, target, key, desc) {\n  var c = arguments.length,\n      r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc,\n      d;\n  if (typeof Reflect === \"object\" && typeof Reflect.decorate === \"function\") r = Reflect.decorate(decorators, target, key, desc);else for (var i = decorators.length - 1; i >= 0; i--) {\n    if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;\n  }\n  return c > 3 && r && Object.defineProperty(target, key, r), r;\n};\n\nvar FieldSettings = /*#__PURE__*/function (_ChildProperty) {\n  _inherits(FieldSettings, _ChildProperty);\n\n  var _super = _createSuper(FieldSettings);\n\n  function FieldSettings() {\n    _classCallCheck(this, FieldSettings);\n\n    return _super.apply(this, arguments);\n  }\n\n  return FieldSettings;\n}(ChildProperty);\n\n__decorate([Property()], FieldSettings.prototype, \"text\", void 0);\n\n__decorate([Property()], FieldSettings.prototype, \"value\", void 0);\n\n__decorate([Property()], FieldSettings.prototype, \"iconCss\", void 0);\n\n__decorate([Property()], FieldSettings.prototype, \"groupBy\", void 0);\n\n__decorate([Property()], FieldSettings.prototype, \"htmlAttributes\", void 0);\n\nvar dropDownBaseClasses = {\n  root: 'e-dropdownbase',\n  rtl: 'e-rtl',\n  content: 'e-content',\n  selected: 'e-active',\n  hover: 'e-hover',\n  noData: 'e-nodata',\n  fixedHead: 'e-fixed-head',\n  focus: 'e-item-focus',\n  li: 'e-list-item',\n  group: 'e-list-group-item',\n  disabled: 'e-disabled',\n  grouping: 'e-dd-group'\n};\nvar ITEMTEMPLATE_PROPERTY = 'ItemTemplate';\nvar VALUETEMPLATE_PROPERTY = 'ValueTemplate';\nvar GROUPTEMPLATE_PROPERTY = 'GroupTemplate';\nvar HEADERTEMPLATE_PROPERTY = 'HeaderTemplate';\nvar FOOTERTEMPLATE_PROPERTY = 'FooterTemplate';\nvar NORECORDSTEMPLATE_PROPERTY = 'NoRecordsTemplate';\nvar ACTIONFAILURETEMPLATE_PROPERTY = 'ActionFailureTemplate';\n/**\n * DropDownBase component will generate the list items based on given data and act as base class to drop-down related components\n */\n\nvar DropDownBase = /*#__PURE__*/function (_Component) {\n  _inherits(DropDownBase, _Component);\n\n  var _super2 = _createSuper(DropDownBase);\n\n  /**\n   * * Constructor for DropDownBase class\n   *\n   * @param {DropDownBaseModel} options - Specifies the DropDownBase model.\n   * @param {string | HTMLElement} element - Specifies the element to render as component.\n   * @private\n   */\n  function DropDownBase(options, element) {\n    var _this;\n\n    _classCallCheck(this, DropDownBase);\n\n    _this = _super2.call(this, options, element);\n    _this.preventChange = false;\n    _this.isAngular = false;\n    _this.isPreventChange = false;\n    _this.isDynamicDataChange = false;\n    return _this;\n  }\n\n  _createClass(DropDownBase, [{\n    key: \"getPropObject\",\n    value: function getPropObject(prop, newProp, oldProp) {\n      var newProperty = new Object();\n      var oldProperty = new Object();\n\n      var propName = function propName(prop) {\n        return prop;\n      };\n\n      newProperty[propName(prop)] = newProp[propName(prop)];\n      oldProperty[propName(prop)] = oldProp[propName(prop)];\n      var data = new Object();\n      data.newProperty = newProperty;\n      data.oldProperty = oldProperty;\n      return data;\n    }\n  }, {\n    key: \"getValueByText\",\n    value: function getValueByText(text, ignoreCase, ignoreAccent) {\n      var value = null;\n\n      if (!isNullOrUndefined(this.listData)) {\n        if (ignoreCase) {\n          value = this.checkValueCase(text, true, ignoreAccent);\n        } else {\n          value = this.checkValueCase(text, false, ignoreAccent);\n        }\n      }\n\n      return value;\n    }\n  }, {\n    key: \"checkValueCase\",\n    value: function checkValueCase(text, ignoreCase, ignoreAccent, isTextByValue) {\n      var _this2 = this;\n\n      var value = null;\n\n      if (isTextByValue) {\n        value = text;\n      }\n\n      var dataSource = this.listData;\n      var fields = this.fields;\n      var type = this.typeOfData(dataSource).typeof;\n\n      if (type === 'string' || type === 'number' || type === 'boolean') {\n        var _iterator = _createForOfIteratorHelper(dataSource),\n            _step;\n\n        try {\n          for (_iterator.s(); !(_step = _iterator.n()).done;) {\n            var item = _step.value;\n\n            if (!isNullOrUndefined(item)) {\n              if (ignoreAccent) {\n                value = this.checkingAccent(String(item), text, ignoreCase);\n              } else {\n                if (ignoreCase) {\n                  if (this.checkIgnoreCase(String(item), text)) {\n                    value = this.getItemValue(String(item), text, ignoreCase);\n                  }\n                } else {\n                  if (this.checkNonIgnoreCase(String(item), text)) {\n                    value = this.getItemValue(String(item), text, ignoreCase, isTextByValue);\n                  }\n                }\n              }\n            }\n          }\n        } catch (err) {\n          _iterator.e(err);\n        } finally {\n          _iterator.f();\n        }\n      } else {\n        if (ignoreCase) {\n          dataSource.filter(function (item) {\n            var itemValue = getValue(fields.value, item);\n\n            if (!isNullOrUndefined(itemValue) && _this2.checkIgnoreCase(getValue(fields.text, item).toString(), text)) {\n              value = getValue(fields.value, item);\n            }\n          });\n        } else {\n          if (isTextByValue) {\n            var compareValue = null;\n            compareValue = value;\n            dataSource.filter(function (item) {\n              var itemValue = getValue(fields.value, item);\n\n              if (!isNullOrUndefined(itemValue) && !isNullOrUndefined(value) && itemValue.toString() === compareValue.toString()) {\n                value = getValue(fields.text, item);\n              }\n            });\n          } else {\n            dataSource.filter(function (item) {\n              if (_this2.checkNonIgnoreCase(getValue(fields.text, item), text)) {\n                value = getValue(fields.value, item);\n              }\n            });\n          }\n        }\n      }\n\n      return value;\n    }\n  }, {\n    key: \"checkingAccent\",\n    value: function checkingAccent(item, text, ignoreCase) {\n      var dataItem = DataUtil.ignoreDiacritics(String(item));\n      var textItem = DataUtil.ignoreDiacritics(text.toString());\n      var value = null;\n\n      if (ignoreCase) {\n        if (this.checkIgnoreCase(dataItem, textItem)) {\n          value = this.getItemValue(String(item), text, ignoreCase);\n        }\n      } else {\n        if (this.checkNonIgnoreCase(String(item), text)) {\n          value = this.getItemValue(String(item), text, ignoreCase);\n        }\n      }\n\n      return value;\n    }\n  }, {\n    key: \"checkIgnoreCase\",\n    value: function checkIgnoreCase(item, text) {\n      return String(item).toLowerCase() === text.toString().toLowerCase() ? true : false;\n    }\n  }, {\n    key: \"checkNonIgnoreCase\",\n    value: function checkNonIgnoreCase(item, text) {\n      return String(item) === text.toString() ? true : false;\n    }\n  }, {\n    key: \"getItemValue\",\n    value: function getItemValue(dataItem, typedText, ignoreCase, isTextByValue) {\n      var value = null;\n      var dataSource = this.listData;\n      var type = this.typeOfData(dataSource).typeof;\n\n      if (isTextByValue) {\n        value = dataItem.toString();\n      } else {\n        if (ignoreCase) {\n          value = type === 'string' ? String(dataItem) : this.getFormattedValue(String(dataItem));\n        } else {\n          value = type === 'string' ? typedText : this.getFormattedValue(typedText);\n        }\n      }\n\n      return value;\n    }\n  }, {\n    key: \"templateCompiler\",\n    value: function templateCompiler(baseTemplate) {\n      var checkTemplate = false;\n\n      if (baseTemplate) {\n        try {\n          checkTemplate = selectAll(baseTemplate, document).length ? true : false;\n        } catch (exception) {\n          checkTemplate = false;\n        }\n      }\n\n      return checkTemplate;\n    }\n  }, {\n    key: \"l10nUpdate\",\n    value: function l10nUpdate(actionFailure) {\n      var ele = this.getModuleName() === 'listbox' ? this.ulElement : this.list;\n\n      if (this.noRecordsTemplate !== 'No records found' || this.actionFailureTemplate !== 'Request failed') {\n        var template = actionFailure ? this.actionFailureTemplate : this.noRecordsTemplate;\n        var compiledString;\n        var templateId = actionFailure ? this.actionFailureTemplateId : this.noRecordsTemplateId;\n        ele.innerHTML = '';\n        var tempaltecheck = this.templateCompiler(template);\n\n        if (tempaltecheck) {\n          compiledString = compile(select(template, document).innerHTML.trim());\n        } else {\n          compiledString = compile(template);\n        }\n\n        var templateName = actionFailure ? 'actionFailureTemplate' : 'noRecordsTemplate'; // eslint-disable-next-line @typescript-eslint/no-explicit-any\n\n        var noDataCompTemp = compiledString({}, this, templateName, templateId, this.isStringTemplate, null, ele);\n\n        if (noDataCompTemp && noDataCompTemp.length > 0) {\n          for (var i = 0; i < noDataCompTemp.length; i++) {\n            ele.appendChild(noDataCompTemp[i]);\n          }\n        }\n\n        this.renderReactTemplates();\n      } else {\n        var l10nLocale = {\n          noRecordsTemplate: 'No records found',\n          actionFailureTemplate: 'Request failed'\n        };\n        var componentLocale = new L10n(this.getLocaleName(), {}, this.locale);\n\n        if (componentLocale.getConstant('actionFailureTemplate') !== '') {\n          this.l10n = componentLocale;\n        } else {\n          this.l10n = new L10n(this.getModuleName() === 'listbox' ? 'listbox' : 'dropdowns', l10nLocale, this.locale);\n        }\n\n        var content = actionFailure ? this.l10n.getConstant('actionFailureTemplate') : this.l10n.getConstant('noRecordsTemplate');\n\n        if (this.getModuleName() === 'listbox') {\n          var liElem = this.createElement('li');\n          liElem.textContent = content;\n          ele.appendChild(liElem);\n          liElem.classList.add('e-list-nrt');\n        } else {\n          ele.innerHTML = content;\n        }\n      }\n    }\n  }, {\n    key: \"getLocaleName\",\n    value: function getLocaleName() {\n      return 'drop-down-base';\n    }\n  }, {\n    key: \"getTextByValue\",\n    value: function getTextByValue(value) {\n      var text = this.checkValueCase(value, false, false, true);\n      return text;\n    }\n  }, {\n    key: \"getFormattedValue\",\n    value: function getFormattedValue(value) {\n      if (this.listData && this.listData.length) {\n        var item = this.typeOfData(this.listData);\n\n        if (typeof getValue(this.fields.value ? this.fields.value : 'value', item.item) === 'number' || item.typeof === 'number') {\n          return parseFloat(value);\n        }\n\n        if (typeof getValue(this.fields.value ? this.fields.value : 'value', item.item) === 'boolean' || item.typeof === 'boolean') {\n          return value === 'true' || '' + value === 'true';\n        }\n      }\n\n      return value;\n    }\n    /**\n     * Sets RTL to dropdownbase wrapper\n     *\n     * @returns {void}\n     */\n\n  }, {\n    key: \"setEnableRtl\",\n    value: function setEnableRtl() {\n      if (this.list) {\n        this.enableRtlElements.push(this.list);\n      }\n\n      if (this.enableRtl) {\n        addClass(this.enableRtlElements, dropDownBaseClasses.rtl);\n      } else {\n        removeClass(this.enableRtlElements, dropDownBaseClasses.rtl);\n      }\n    }\n    /**\n     * Initialize the Component.\n     *\n     * @returns {void}\n     */\n\n  }, {\n    key: \"initialize\",\n    value: function initialize() {\n      this.bindEvent = true;\n      this.actionFailureTemplateId = \"\".concat(this.element.id).concat(ACTIONFAILURETEMPLATE_PROPERTY);\n\n      if (this.element.tagName === 'UL') {\n        var jsonElement = ListBase.createJsonFromElement(this.element);\n        this.setProperties({\n          fields: {\n            text: 'text',\n            value: 'text'\n          }\n        }, true);\n        this.resetList(jsonElement, this.fields);\n      } else if (this.element.tagName === 'SELECT') {\n        var dataSource = this.dataSource instanceof Array ? this.dataSource.length > 0 ? true : false : !isNullOrUndefined(this.dataSource) ? true : false;\n\n        if (!dataSource) {\n          this.renderItemsBySelect();\n        } else if (this.isDynamicDataChange) {\n          this.setListData(this.dataSource, this.fields, this.query);\n        }\n      } else {\n        this.setListData(this.dataSource, this.fields, this.query);\n      }\n    }\n    /**\n     * Get the properties to be maintained in persisted state.\n     *\n     * @returns {string} Returns the persisted data of the component.\n     */\n\n  }, {\n    key: \"getPersistData\",\n    value: function getPersistData() {\n      return this.addOnPersist([]);\n    }\n    /**\n     * Sets the enabled state to DropDownBase.\n     *\n     * @returns {void}\n     */\n\n  }, {\n    key: \"setEnabled\",\n    value: function setEnabled() {\n      this.element.setAttribute('aria-disabled', this.enabled ? 'false' : 'true');\n    }\n    /**\n     * Sets the enabled state to DropDownBase.\n     *\n     * @param {string} value - Specifies the attribute values to add on the input element.\n     * @returns {void}\n     */\n\n  }, {\n    key: \"updateDataAttribute\",\n    value: function updateDataAttribute(value) {\n      var invalidAttr = ['class', 'style', 'id', 'type'];\n      var attr = {};\n\n      for (var a = 0; a < this.element.attributes.length; a++) {\n        if (invalidAttr.indexOf(this.element.attributes[a].name) === -1 && !(this.getModuleName() === 'dropdownlist' && this.element.attributes[a].name === 'readonly')) {\n          attr[this.element.attributes[a].name] = this.element.getAttribute(this.element.attributes[a].name);\n        }\n      }\n\n      extend(attr, value, attr);\n      this.setProperties({\n        htmlAttributes: attr\n      }, true);\n    }\n  }, {\n    key: \"renderItemsBySelect\",\n    value: function renderItemsBySelect() {\n      var element = this.element;\n      var fields = {\n        value: 'value',\n        text: 'text'\n      };\n      var jsonElement = [];\n      var group = element.querySelectorAll('select>optgroup');\n      var option = element.querySelectorAll('select>option');\n      this.getJSONfromOption(jsonElement, option, fields);\n\n      if (group.length) {\n        for (var i = 0; i < group.length; i++) {\n          var item = group[i];\n          var optionGroup = {};\n          optionGroup[fields.text] = item.label;\n          optionGroup.isHeader = true;\n          var child = item.querySelectorAll('option');\n          jsonElement.push(optionGroup);\n          this.getJSONfromOption(jsonElement, child, fields);\n        }\n\n        element.querySelectorAll('select>option');\n      }\n\n      this.updateFields(fields.text, fields.value, this.fields.groupBy, this.fields.htmlAttributes, this.fields.iconCss);\n      this.resetList(jsonElement, fields);\n    }\n  }, {\n    key: \"updateFields\",\n    value: function updateFields(text, value, groupBy, htmlAttributes, iconCss) {\n      var field = {\n        'fields': {\n          text: text,\n          value: value,\n          groupBy: !isNullOrUndefined(groupBy) ? groupBy : this.fields && this.fields.groupBy,\n          htmlAttributes: !isNullOrUndefined(htmlAttributes) ? htmlAttributes : this.fields && this.fields.htmlAttributes,\n          iconCss: !isNullOrUndefined(iconCss) ? iconCss : this.fields && this.fields.iconCss\n        }\n      };\n      this.setProperties(field, true);\n    }\n  }, {\n    key: \"getJSONfromOption\",\n    value: function getJSONfromOption(items, options, fields) {\n      var _iterator2 = _createForOfIteratorHelper(options),\n          _step2;\n\n      try {\n        for (_iterator2.s(); !(_step2 = _iterator2.n()).done;) {\n          var option = _step2.value;\n          var json = {};\n          json[fields.text] = option.innerText;\n          json[fields.value] = !isNullOrUndefined(option.getAttribute(fields.value)) ? option.getAttribute(fields.value) : option.innerText;\n          items.push(json);\n        }\n      } catch (err) {\n        _iterator2.e(err);\n      } finally {\n        _iterator2.f();\n      }\n    }\n    /**\n     * Execute before render the list items\n     *\n     * @private\n     * @returns {void}\n     */\n\n  }, {\n    key: \"preRender\",\n    value: function preRender() {\n      // there is no event handler\n      this.scrollTimer = -1;\n      this.enableRtlElements = [];\n      this.isRequested = false;\n      this.isDataFetched = false;\n      this.itemTemplateId = \"\".concat(this.element.id).concat(ITEMTEMPLATE_PROPERTY);\n      this.valueTemplateId = \"\".concat(this.element.id).concat(VALUETEMPLATE_PROPERTY);\n      this.groupTemplateId = \"\".concat(this.element.id).concat(GROUPTEMPLATE_PROPERTY);\n      this.headerTemplateId = \"\".concat(this.element.id).concat(HEADERTEMPLATE_PROPERTY);\n      this.footerTemplateId = \"\".concat(this.element.id).concat(FOOTERTEMPLATE_PROPERTY);\n      this.noRecordsTemplateId = \"\".concat(this.element.id).concat(NORECORDSTEMPLATE_PROPERTY);\n    }\n    /**\n     * Creates the list items of DropDownBase component.\n     *\n     * @param {Object[] | string[] | number[] | DataManager | boolean[]} dataSource - Specifies the data to generate the list.\n     * @param {FieldSettingsModel} fields - Maps the columns of the data table and binds the data to the component.\n     * @param {Query} query - Accepts the external Query that execute along with data processing.\n     * @returns {void}\n     */\n\n  }, {\n    key: \"setListData\",\n    value: function setListData(dataSource, fields, query) {\n      var _this3 = this;\n\n      fields = fields ? fields : this.fields;\n      var ulElement;\n      this.isActive = true;\n      var eventArgs = {\n        cancel: false,\n        data: dataSource,\n        query: query\n      };\n      this.isPreventChange = this.isAngular && this.preventChange ? true : this.isPreventChange;\n      this.trigger('actionBegin', eventArgs, function (eventArgs) {\n        if (!eventArgs.cancel) {\n          _this3.showSpinner();\n\n          if (dataSource instanceof DataManager) {\n            _this3.isRequested = true;\n\n            if (_this3.isDataFetched) {\n              _this3.emptyDataRequest(fields);\n\n              return;\n            }\n\n            eventArgs.data.executeQuery(_this3.getQuery(eventArgs.query)).then(function (e) {\n              _this3.isPreventChange = _this3.isAngular && _this3.preventChange ? true : _this3.isPreventChange;\n\n              _this3.trigger('actionComplete', e, function (e) {\n                if (!e.cancel) {\n                  var listItems = e.result;\n\n                  if (listItems.length === 0) {\n                    _this3.isDataFetched = true;\n                  }\n\n                  ulElement = _this3.renderItems(listItems, fields);\n\n                  _this3.onActionComplete(ulElement, listItems, e);\n\n                  if (_this3.groupTemplate) {\n                    _this3.renderGroupTemplate(ulElement);\n                  }\n\n                  _this3.isRequested = false;\n\n                  _this3.bindChildItems(listItems, ulElement, fields, e);\n                }\n              });\n            }).catch(function (e) {\n              _this3.isRequested = false;\n\n              _this3.onActionFailure(e);\n\n              _this3.hideSpinner();\n            });\n          } else {\n            var dataManager = new DataManager(eventArgs.data);\n\n            var listItems = _this3.getQuery(eventArgs.query).executeLocal(dataManager);\n\n            var localDataArgs = {\n              cancel: false,\n              result: listItems\n            };\n            _this3.isPreventChange = _this3.isAngular && _this3.preventChange ? true : _this3.isPreventChange;\n\n            _this3.trigger('actionComplete', localDataArgs, function (localDataArgs) {\n              if (!localDataArgs.cancel) {\n                ulElement = _this3.renderItems(localDataArgs.result, fields);\n\n                _this3.onActionComplete(ulElement, localDataArgs.result);\n\n                if (_this3.groupTemplate) {\n                  _this3.renderGroupTemplate(ulElement);\n                }\n\n                _this3.bindChildItems(localDataArgs.result, ulElement, fields);\n              }\n            });\n          }\n        }\n      });\n    }\n  }, {\n    key: \"bindChildItems\",\n    value: function bindChildItems(listItems, ulElement, fields, e) {\n      var _this4 = this;\n\n      if (listItems.length >= 100 && this.getModuleName() === 'autocomplete') {\n        setTimeout(function () {\n          var childNode = _this4.remainingItems(_this4.sortedData, fields);\n\n          append(childNode, ulElement);\n          _this4.liCollections = _this4.list.querySelectorAll('.' + dropDownBaseClasses.li);\n\n          _this4.updateListValues();\n\n          _this4.raiseDataBound(listItems, e);\n        }, 0);\n      } else {\n        this.raiseDataBound(listItems, e);\n      }\n    }\n  }, {\n    key: \"updateListValues\",\n    value: function updateListValues() {// Used this method in component side.\n    }\n  }, {\n    key: \"findListElement\",\n    value: function findListElement(list, findNode, attribute, value) {\n      var liElement = null;\n\n      if (list) {\n        var listArr = [].slice.call(list.querySelectorAll(findNode));\n\n        for (var index = 0; index < listArr.length; index++) {\n          if (listArr[index].getAttribute(attribute) === value + '') {\n            liElement = listArr[index];\n            break;\n          }\n        }\n      }\n\n      return liElement;\n    }\n  }, {\n    key: \"raiseDataBound\",\n    value: function raiseDataBound(listItems, e) {\n      this.hideSpinner();\n      var dataBoundEventArgs = {\n        items: listItems,\n        e: e\n      };\n      this.trigger('dataBound', dataBoundEventArgs);\n    }\n  }, {\n    key: \"remainingItems\",\n    value: function remainingItems(dataSource, fields) {\n      var spliceData = new DataManager(dataSource).executeLocal(new Query().skip(100));\n\n      if (this.itemTemplate) {\n        var listElements = this.templateListItem(spliceData, fields);\n        return [].slice.call(listElements.childNodes);\n      }\n\n      var type = this.typeOfData(spliceData).typeof;\n\n      if (type === 'string' || type === 'number' || type === 'boolean') {\n        return ListBase.createListItemFromArray(this.createElement, spliceData, true, this.listOption(spliceData, fields), this);\n      }\n\n      return ListBase.createListItemFromJson(this.createElement, spliceData, this.listOption(spliceData, fields), 1, true, this);\n    }\n  }, {\n    key: \"emptyDataRequest\",\n    value: function emptyDataRequest(fields) {\n      var listItems = [];\n      this.onActionComplete(this.renderItems(listItems, fields), listItems);\n      this.isRequested = false;\n      this.hideSpinner();\n    }\n  }, {\n    key: \"showSpinner\",\n    value: function showSpinner() {// Used this method in component side.\n    }\n  }, {\n    key: \"hideSpinner\",\n    value: function hideSpinner() {// Used this method in component side.\n    }\n  }, {\n    key: \"onActionFailure\",\n    value: function onActionFailure(e) {\n      this.liCollections = [];\n      this.trigger('actionFailure', e);\n      this.l10nUpdate(true);\n      addClass([this.list], dropDownBaseClasses.noData);\n    }\n    /* eslint-disable @typescript-eslint/no-unused-vars */\n\n  }, {\n    key: \"onActionComplete\",\n    value: function onActionComplete(ulElement, list, e) {\n      /* eslint-enable @typescript-eslint/no-unused-vars */\n      this.listData = list; // eslint-disable-next-line @typescript-eslint/no-explicit-any\n\n      if (this.isReact) {\n        this.clearTemplate(['itemTemplate', 'groupTemplate', 'actionFailureTemplate', 'noRecordsTemplate']);\n      }\n\n      this.list.innerHTML = '';\n      this.fixedHeaderElement = isNullOrUndefined(this.fixedHeaderElement) ? this.fixedHeaderElement : null;\n      this.list.appendChild(ulElement);\n      this.liCollections = this.list.querySelectorAll('.' + dropDownBaseClasses.li);\n      this.ulElement = this.list.querySelector('ul');\n      this.postRender(this.list, list, this.bindEvent);\n    }\n    /* eslint-disable @typescript-eslint/no-unused-vars */\n\n  }, {\n    key: \"postRender\",\n    value: function postRender(listElement, list, bindEvent) {\n      /* eslint-enable @typescript-eslint/no-unused-vars */\n      var focusItem = listElement.querySelector('.' + dropDownBaseClasses.li);\n      var selectedItem = listElement.querySelector('.' + dropDownBaseClasses.selected);\n\n      if (focusItem && !selectedItem) {\n        focusItem.classList.add(dropDownBaseClasses.focus);\n      }\n\n      if (list.length <= 0) {\n        this.l10nUpdate();\n        addClass([listElement], dropDownBaseClasses.noData);\n      } else {\n        listElement.classList.remove(dropDownBaseClasses.noData);\n      }\n    }\n    /**\n     * Get the query to do the data operation before list item generation.\n     *\n     * @param {Query} query - Accepts the external Query that execute along with data processing.\n     * @returns {Query} Returns the query to do the data query operation.\n     */\n\n  }, {\n    key: \"getQuery\",\n    value: function getQuery(query) {\n      return query ? query : this.query ? this.query : new Query();\n    }\n    /**\n     * To render the template content for group header element.\n     *\n     * @param {HTMLElement} listEle - Specifies the group list elements.\n     * @returns {void}\n     */\n\n  }, {\n    key: \"renderGroupTemplate\",\n    value: function renderGroupTemplate(listEle) {\n      if (this.fields.groupBy !== null && this.dataSource || this.element.querySelector('.' + dropDownBaseClasses.group)) {\n        var dataSource = this.dataSource;\n        var option = {\n          groupTemplateID: this.groupTemplateId,\n          isStringTemplate: this.isStringTemplate\n        };\n        var headerItems = listEle.querySelectorAll('.' + dropDownBaseClasses.group);\n        var groupcheck = this.templateCompiler(this.groupTemplate);\n\n        if (groupcheck) {\n          var groupValue = select(this.groupTemplate, document).innerHTML.trim(); // eslint-disable-next-line @typescript-eslint/no-unused-vars\n\n          var tempHeaders = ListBase.renderGroupTemplate(groupValue, dataSource, this.fields.properties, headerItems, option, this);\n        } else {\n          // eslint-disable-next-line @typescript-eslint/no-unused-vars\n          var _tempHeaders = ListBase.renderGroupTemplate(this.groupTemplate, dataSource, this.fields.properties, headerItems, option, this);\n        }\n\n        this.renderReactTemplates();\n      }\n    }\n    /**\n     * To create the ul li list items\n     *\n     * @param {object []} dataSource - Specifies the data to generate the list.\n     * @param {FieldSettingsModel} fields - Maps the columns of the data table and binds the data to the component.\n     * @returns {HTMLElement} Return the ul li list items.\n     */\n\n  }, {\n    key: \"createListItems\",\n    value: function createListItems(dataSource, fields) {\n      if (dataSource && fields.groupBy || this.element.querySelector('optgroup')) {\n        if (fields.groupBy) {\n          if (this.sortOrder !== 'None') {\n            dataSource = this.getSortedDataSource(dataSource);\n          }\n\n          dataSource = ListBase.groupDataSource(dataSource, fields.properties, this.sortOrder);\n        }\n\n        addClass([this.list], dropDownBaseClasses.grouping);\n      } else {\n        dataSource = this.getSortedDataSource(dataSource);\n      }\n\n      var options = this.listOption(dataSource, fields);\n      var spliceData = dataSource.length > 100 ? new DataManager(dataSource).executeLocal(new Query().take(100)) : dataSource;\n      this.sortedData = dataSource;\n      return ListBase.createList(this.createElement, this.getModuleName() === 'autocomplete' ? spliceData : dataSource, options, true, this);\n    }\n  }, {\n    key: \"listOption\",\n    value: function listOption(dataSource, fields) {\n      var iconCss = isNullOrUndefined(fields.iconCss) ? false : true;\n      var fieldValues = !isNullOrUndefined(fields.properties) ? fields.properties : fields;\n      var options = fields.text !== null || fields.value !== null ? {\n        fields: fieldValues,\n        showIcon: iconCss,\n        ariaAttributes: {\n          groupItemRole: 'presentation'\n        }\n      } : {\n        fields: {\n          value: 'text'\n        }\n      };\n      return extend({}, options, fields, true);\n    }\n  }, {\n    key: \"setFloatingHeader\",\n    value: function setFloatingHeader(e) {\n      if (isNullOrUndefined(this.fixedHeaderElement)) {\n        this.fixedHeaderElement = this.createElement('div', {\n          className: dropDownBaseClasses.fixedHead\n        });\n\n        if (!this.list.querySelector('li').classList.contains(dropDownBaseClasses.group)) {\n          this.fixedHeaderElement.style.display = 'none';\n        }\n\n        prepend([this.fixedHeaderElement], this.list);\n        this.setFixedHeader();\n      }\n\n      if (!isNullOrUndefined(this.fixedHeaderElement) && this.fixedHeaderElement.style.zIndex === '0') {\n        this.setFixedHeader();\n      }\n\n      this.scrollStop(e);\n    }\n  }, {\n    key: \"scrollStop\",\n    value: function scrollStop(e) {\n      var target = !isNullOrUndefined(e) ? e.target : this.list;\n      var liHeight = parseInt(getComputedStyle(this.getValidLi(), null).getPropertyValue('height'), 10);\n      var topIndex = Math.round(target.scrollTop / liHeight);\n      var liCollections = this.list.querySelectorAll('li' + ':not(.e-hide-listitem)');\n\n      for (var i = topIndex; i > -1; i--) {\n        if (!isNullOrUndefined(liCollections[i]) && liCollections[i].classList.contains(dropDownBaseClasses.group)) {\n          var currentLi = liCollections[i];\n          this.fixedHeaderElement.innerHTML = currentLi.innerHTML;\n          this.fixedHeaderElement.style.top = target.scrollTop + 'px';\n          this.fixedHeaderElement.style.display = 'block';\n          break;\n        } else {\n          this.fixedHeaderElement.style.display = 'none';\n          this.fixedHeaderElement.style.top = 'none';\n        }\n      }\n    }\n  }, {\n    key: \"getValidLi\",\n    value: function getValidLi() {\n      return this.liCollections[0];\n    }\n    /**\n     * To render the list items\n     *\n     * @param {object[]} listData - Specifies the list of array of data.\n     * @param {FieldSettingsModel} fields - Maps the columns of the data table and binds the data to the component.\n     * @returns {HTMLElement} Return the list items.\n     */\n\n  }, {\n    key: \"renderItems\",\n    value: function renderItems(listData, fields) {\n      var ulElement;\n\n      if (this.itemTemplate && listData) {\n        var dataSource = listData;\n\n        if (dataSource && fields.groupBy) {\n          if (this.sortOrder !== 'None') {\n            dataSource = this.getSortedDataSource(dataSource);\n          }\n\n          dataSource = ListBase.groupDataSource(dataSource, fields.properties, this.sortOrder);\n        } else {\n          dataSource = this.getSortedDataSource(dataSource);\n        }\n\n        this.sortedData = dataSource;\n        var spliceData = dataSource.length > 100 ? new DataManager(dataSource).executeLocal(new Query().take(100)) : dataSource;\n        ulElement = this.templateListItem(this.getModuleName() === 'autocomplete' ? spliceData : dataSource, fields);\n      } else {\n        ulElement = this.createListItems(listData, fields);\n      }\n\n      return ulElement;\n    }\n  }, {\n    key: \"templateListItem\",\n    value: function templateListItem(dataSource, fields) {\n      var option = this.listOption(dataSource, fields);\n      option.templateID = this.itemTemplateId;\n      option.isStringTemplate = this.isStringTemplate;\n      var itemcheck = this.templateCompiler(this.itemTemplate);\n\n      if (itemcheck) {\n        var itemValue = select(this.itemTemplate, document).innerHTML.trim();\n        return ListBase.renderContentTemplate(this.createElement, itemValue, dataSource, fields.properties, option, this);\n      } else {\n        return ListBase.renderContentTemplate(this.createElement, this.itemTemplate, dataSource, fields.properties, option, this);\n      }\n    }\n  }, {\n    key: \"typeOfData\",\n    value: function typeOfData(items) {\n      var item = {\n        typeof: null,\n        item: null\n      };\n\n      for (var i = 0; !isNullOrUndefined(items) && i < items.length; i++) {\n        if (!isNullOrUndefined(items[i])) {\n          var listDataType = typeof items[i] === 'string' || typeof items[i] === 'number' || typeof items[i] === 'boolean';\n          var isNullData = listDataType ? isNullOrUndefined(items[i]) : isNullOrUndefined(getValue(this.fields.value ? this.fields.value : 'value', items[i]));\n\n          if (!isNullData) {\n            return item = {\n              typeof: typeof items[i],\n              item: items[i]\n            };\n          }\n        }\n      }\n\n      return item;\n    }\n  }, {\n    key: \"setFixedHeader\",\n    value: function setFixedHeader() {\n      this.list.parentElement.style.display = 'block';\n      var borderWidth = 0;\n\n      if (this.list && this.list.parentElement) {\n        borderWidth = parseInt(document.defaultView.getComputedStyle(this.list.parentElement, null).getPropertyValue('border-width'), 10);\n        /*Shorthand property not working in Firefox for getComputedStyle method.\n        Refer bug report https://bugzilla.mozilla.org/show_bug.cgi?id=137688\n        Refer alternate solution https://stackoverflow.com/a/41696234/9133493*/\n\n        if (isNaN(borderWidth)) {\n          var borderTopWidth = parseInt(document.defaultView.getComputedStyle(this.list.parentElement, null).getPropertyValue('border-top-width'), 10);\n          var borderBottomWidth = parseInt(document.defaultView.getComputedStyle(this.list.parentElement, null).getPropertyValue('border-bottom-width'), 10);\n          var borderLeftWidth = parseInt(document.defaultView.getComputedStyle(this.list.parentElement, null).getPropertyValue('border-left-width'), 10);\n          var borderRightWidth = parseInt(document.defaultView.getComputedStyle(this.list.parentElement, null).getPropertyValue('border-right-width'), 10);\n          borderWidth = borderTopWidth + borderBottomWidth + borderLeftWidth + borderRightWidth;\n        }\n      }\n\n      var liWidth = this.getValidLi().offsetWidth - borderWidth;\n      this.fixedHeaderElement.style.width = liWidth.toString() + 'px';\n      setStyleAttribute(this.fixedHeaderElement, {\n        zIndex: 10\n      });\n      var firstLi = this.ulElement.querySelector('.' + dropDownBaseClasses.group + ':not(.e-hide-listitem)');\n      this.fixedHeaderElement.innerHTML = firstLi.innerHTML;\n    }\n  }, {\n    key: \"getSortedDataSource\",\n    value: function getSortedDataSource(dataSource) {\n      if (dataSource && this.sortOrder !== 'None') {\n        var textField = this.fields.text ? this.fields.text : 'text';\n\n        if (this.typeOfData(dataSource).typeof === 'string' || this.typeOfData(dataSource).typeof === 'number' || this.typeOfData(dataSource).typeof === 'boolean') {\n          textField = '';\n        }\n\n        dataSource = ListBase.getDataSource(dataSource, ListBase.addSorting(this.sortOrder, textField));\n      }\n\n      return dataSource;\n    }\n    /**\n     * Return the index of item which matched with given value in data source\n     *\n     * @param {string | number | boolean} value - Specifies given value.\n     * @returns {number} Returns the index of the item.\n     */\n\n  }, {\n    key: \"getIndexByValue\",\n    value: function getIndexByValue(value) {\n      var index;\n      var listItems = this.getItems();\n\n      for (var i = 0; i < listItems.length; i++) {\n        if (!isNullOrUndefined(value) && listItems[i].getAttribute('data-value') === value.toString()) {\n          index = i;\n          break;\n        }\n      }\n\n      return index;\n    }\n    /**\n     * To dispatch the event manually\n     *\n     * @param {HTMLElement} element - Specifies the element to dispatch the event.\n     * @param {string} type - Specifies the name of the event.\n     * @returns {void}\n     */\n\n  }, {\n    key: \"dispatchEvent\",\n    value: function dispatchEvent(element, type) {\n      var evt = document.createEvent('HTMLEvents');\n      evt.initEvent(type, false, true);\n      element.dispatchEvent(evt);\n    }\n    /**\n     * To set the current fields\n     *\n     * @returns {void}\n     */\n\n  }, {\n    key: \"setFields\",\n    value: function setFields() {\n      if (this.fields.value && !this.fields.text) {\n        this.updateFields(this.fields.value, this.fields.value);\n      } else if (!this.fields.value && this.fields.text) {\n        this.updateFields(this.fields.text, this.fields.text);\n      } else if (!this.fields.value && !this.fields.text) {\n        this.updateFields('text', 'text');\n      }\n    }\n    /**\n     * reset the items list.\n     *\n     * @param {Object[] | string[] | number[] | DataManager | boolean[]} dataSource - Specifies the data to generate the list.\n     * @param {FieldSettingsModel} fields - Maps the columns of the data table and binds the data to the component.\n     * @param {Query} query - Accepts the external Query that execute along with data processing.\n     * @returns {void}\n     */\n\n  }, {\n    key: \"resetList\",\n    value: function resetList(dataSource, fields, query) {\n      if (this.list) {\n        if (this.element.tagName === 'SELECT' && this.element.options.length > 0 || this.element.tagName === 'UL' && this.element.childNodes.length > 0) {\n          var data = dataSource instanceof Array ? dataSource.length > 0 : !isNullOrUndefined(dataSource);\n\n          if (!data && this.selectData && this.selectData.length > 0) {\n            dataSource = this.selectData;\n          }\n        }\n\n        this.setListData(dataSource, fields, query);\n      }\n    }\n  }, {\n    key: \"updateSelectElementData\",\n    value: function updateSelectElementData(isFiltering) {\n      if (isFiltering && isNullOrUndefined(this.selectData) && this.listData && this.listData.length > 0) {\n        this.selectData = this.listData;\n      }\n    }\n  }, {\n    key: \"updateSelection\",\n    value: function updateSelection() {// This is for after added the item, need to update the selected index values.\n    }\n  }, {\n    key: \"renderList\",\n    value: function renderList() {\n      // This is for render the list items.\n      this.render();\n    } // eslint-disable-next-line @typescript-eslint/no-unused-vars\n\n  }, {\n    key: \"updateDataSource\",\n    value: function updateDataSource(props) {\n      this.resetList(this.dataSource);\n    }\n  }, {\n    key: \"setUpdateInitial\",\n    value: function setUpdateInitial(props, newProp) {\n      this.isDataFetched = false;\n      var updateData = {};\n\n      for (var j = 0; props.length > j; j++) {\n        if (newProp[props[j]] && props[j] === 'fields') {\n          this.setFields();\n          updateData[props[j]] = newProp[props[j]];\n        } else if (newProp[props[j]]) {\n          updateData[props[j]] = newProp[props[j]];\n        }\n      }\n\n      if (Object.keys(updateData).length > 0) {\n        if (Object.keys(updateData).indexOf('dataSource') === -1) {\n          updateData.dataSource = this.dataSource;\n        }\n\n        this.updateDataSource(updateData);\n      }\n    }\n    /**\n     * When property value changes happened, then onPropertyChanged method will execute the respective changes in this component.\n     *\n     * @param {DropDownBaseModel} newProp - Returns the dynamic property value of the component.\n     * @param {DropDownBaseModel} oldProp - Returns the previous property value of the component.\n     * @private\n     * @returns {void}\n     */\n    // eslint-disable-next-line @typescript-eslint/no-unused-vars\n\n  }, {\n    key: \"onPropertyChanged\",\n    value: function onPropertyChanged(newProp, oldProp) {\n      if (this.getModuleName() === 'dropdownbase') {\n        this.setUpdateInitial(['fields', 'query', 'dataSource'], newProp);\n      }\n\n      this.setUpdateInitial(['sortOrder', 'itemTemplate'], newProp);\n\n      for (var _i2 = 0, _Object$keys = Object.keys(newProp); _i2 < _Object$keys.length; _i2++) {\n        var prop = _Object$keys[_i2];\n\n        switch (prop) {\n          case 'query':\n          case 'sortOrder':\n          case 'dataSource':\n          case 'itemTemplate':\n            break;\n\n          case 'enableRtl':\n            this.setEnableRtl();\n            break;\n\n          case 'enabled':\n            this.setEnabled();\n            break;\n\n          case 'groupTemplate':\n            this.renderGroupTemplate(this.list);\n\n            if (this.ulElement && this.fixedHeaderElement) {\n              var firstLi = this.ulElement.querySelector('.' + dropDownBaseClasses.group);\n              this.fixedHeaderElement.innerHTML = firstLi.innerHTML;\n            }\n\n            break;\n\n          case 'locale':\n            if (this.list && !isNullOrUndefined(this.liCollections) && this.liCollections.length === 0) {\n              this.l10nUpdate();\n            }\n\n            break;\n\n          case 'zIndex':\n            this.setProperties({\n              zIndex: newProp.zIndex\n            }, true);\n            this.setZIndex();\n            break;\n        }\n      }\n    }\n    /**\n     * Build and render the component\n     *\n     * @param {boolean} isEmptyData - Specifies the component to initialize with list data or not.\n     * @private\n     * @returns {void}\n     */\n\n  }, {\n    key: \"render\",\n    value: function render(isEmptyData) {\n      this.list = this.createElement('div', {\n        className: dropDownBaseClasses.content,\n        attrs: {\n          'tabindex': '0'\n        }\n      });\n      this.list.classList.add(dropDownBaseClasses.root);\n      this.setFields();\n      var rippleModel = {\n        duration: 300,\n        selector: '.' + dropDownBaseClasses.li\n      };\n      this.rippleFun = rippleEffect(this.list, rippleModel);\n      var group = this.element.querySelector('select>optgroup');\n\n      if ((this.fields.groupBy || !isNullOrUndefined(group)) && !this.isGroupChecking) {\n        EventHandler.add(this.list, 'scroll', this.setFloatingHeader, this);\n      }\n\n      if (this.getModuleName() === 'dropdownbase') {\n        if (this.element.getAttribute('tabindex')) {\n          this.list.setAttribute('tabindex', this.element.getAttribute('tabindex'));\n        }\n\n        removeClass([this.element], dropDownBaseClasses.root);\n        this.element.style.display = 'none';\n        var wrapperElement = this.createElement('div');\n        this.element.parentElement.insertBefore(wrapperElement, this.element);\n        wrapperElement.appendChild(this.element);\n        wrapperElement.appendChild(this.list);\n      }\n\n      this.setEnableRtl();\n      this.setEnabled();\n\n      if (!isEmptyData) {\n        this.initialize();\n      }\n    }\n    /**\n     * Return the module name of this component.\n     *\n     * @private\n     * @returns {string} Return the module name of this component.\n     */\n\n  }, {\n    key: \"getModuleName\",\n    value: function getModuleName() {\n      return 'dropdownbase';\n    }\n    /* eslint-disable valid-jsdoc, jsdoc/require-returns-description */\n\n    /**\n     * Gets all the list items bound on this component.\n     *\n     * @returns {Element[]}\n     */\n\n  }, {\n    key: \"getItems\",\n    value: function getItems() {\n      return this.ulElement.querySelectorAll('.' + dropDownBaseClasses.li);\n    }\n    /* eslint-enable valid-jsdoc, jsdoc/require-returns-description */\n\n    /**\n     * Adds a new item to the popup list. By default, new item appends to the list as the last item,\n     * but you can insert based on the index parameter.\n     *\n     * @param  { Object[] } items - Specifies an array of JSON data or a JSON data.\n     * @param { number } itemIndex - Specifies the index to place the newly added item in the popup list.\n     * @returns {void}\n     * @deprecated\n     */\n\n  }, {\n    key: \"addItem\",\n    value: function addItem(items, itemIndex) {\n      if (!this.list || this.list.textContent === this.noRecordsTemplate && this.getModuleName() !== 'listbox') {\n        this.renderList();\n      }\n\n      if (this.sortOrder !== 'None' && isNullOrUndefined(itemIndex)) {\n        var newList = [].slice.call(this.listData);\n        newList.push(items);\n        newList = this.getSortedDataSource(newList);\n\n        if (this.fields.groupBy) {\n          newList = ListBase.groupDataSource(newList, this.fields.properties, this.sortOrder);\n          itemIndex = newList.indexOf(items);\n        } else {\n          itemIndex = newList.indexOf(items);\n        }\n      }\n\n      var itemsCount = this.getItems().length;\n      var selectedItemValue = this.list.querySelector('.' + dropDownBaseClasses.selected);\n      items = items instanceof Array ? items : [items];\n      var index;\n      index = isNullOrUndefined(itemIndex) || itemIndex < 0 || itemIndex > itemsCount - 1 ? itemsCount : itemIndex;\n      var fields = this.fields;\n\n      if (items && fields.groupBy) {\n        items = ListBase.groupDataSource(items, fields.properties);\n      }\n\n      var liCollections = [];\n\n      for (var i = 0; i < items.length; i++) {\n        var item = items[i];\n        var isHeader = item.isHeader;\n        var li = this.createElement('li', {\n          className: isHeader ? dropDownBaseClasses.group : dropDownBaseClasses.li,\n          id: 'option-add-' + i\n        });\n        var itemText = item instanceof Object ? getValue(fields.text, item) : item;\n\n        if (isHeader) {\n          li.innerText = itemText;\n        }\n\n        if (this.itemTemplate && !isHeader) {\n          var compiledString = compile(this.itemTemplate); // eslint-disable-next-line @typescript-eslint/no-explicit-any\n\n          var addItemTemplate = compiledString(item, this, 'itemTemplate', this.itemTemplateId, this.isStringTemplate, null, li);\n\n          if (addItemTemplate) {\n            append(addItemTemplate, li);\n          }\n        } else if (!isHeader) {\n          li.appendChild(document.createTextNode(itemText));\n        }\n\n        li.setAttribute('data-value', item instanceof Object ? getValue(fields.value, item) : item);\n        li.setAttribute('role', 'option');\n        this.notify('addItem', {\n          module: 'CheckBoxSelection',\n          item: li\n        });\n        liCollections.push(li);\n        this.listData.push(item);\n\n        if (this.sortOrder === 'None' && isNullOrUndefined(itemIndex) && index === 0) {\n          index = null;\n        }\n\n        this.updateActionCompleteData(li, item, index); //Listbox event\n\n        this.trigger('beforeItemRender', {\n          element: li,\n          item: item\n        });\n      }\n\n      if (itemsCount === 0 && isNullOrUndefined(this.list.querySelector('ul'))) {\n        this.list.innerHTML = '';\n        this.list.classList.remove(dropDownBaseClasses.noData);\n        this.list.appendChild(this.ulElement);\n        this.liCollections = liCollections;\n        append(liCollections, this.ulElement);\n        this.updateAddItemList(this.list, itemsCount);\n      } else {\n        if (this.getModuleName() === 'listbox' && itemsCount === 0) {\n          this.ulElement.innerHTML = '';\n        }\n\n        var attr = [];\n\n        for (var _i3 = 0; _i3 < items.length; _i3++) {\n          var listGroupItem = this.ulElement.querySelectorAll('.e-list-group-item');\n\n          for (var j = 0; j < listGroupItem.length; j++) {\n            attr[j] = listGroupItem[j].innerText;\n          }\n\n          if (attr.indexOf(liCollections[_i3].innerText) > -1 && fields.groupBy) {\n            for (var _j = 0; _j < listGroupItem.length; _j++) {\n              if (attr[_j] === liCollections[_i3].innerText) {\n                if (this.sortOrder === 'None') {\n                  this.ulElement.insertBefore(liCollections[_i3 + 1], listGroupItem[_j + 1]);\n                } else {\n                  this.ulElement.insertBefore(liCollections[_i3 + 1], this.ulElement.childNodes[itemIndex]);\n                }\n\n                _i3 = _i3 + 1;\n                break;\n              }\n            }\n          } else {\n            if (this.liCollections[index]) {\n              this.liCollections[index].parentNode.insertBefore(liCollections[_i3], this.liCollections[index]);\n            } else {\n              this.ulElement.appendChild(liCollections[_i3]);\n            }\n          }\n\n          var tempLi = [].slice.call(this.liCollections);\n          tempLi.splice(index, 0, liCollections[_i3]);\n          this.liCollections = tempLi;\n          index += 1;\n\n          if (this.getModuleName() === 'multiselect') {\n            this.updateDataList();\n          }\n        }\n      }\n\n      if (selectedItemValue || itemIndex === 0) {\n        this.updateSelection();\n      }\n    }\n  }, {\n    key: \"validationAttribute\",\n    value: function validationAttribute(target, hidden) {\n      var name = target.getAttribute('name') ? target.getAttribute('name') : target.getAttribute('id');\n      hidden.setAttribute('name', name);\n      target.removeAttribute('name');\n      var attributes$$1 = ['required', 'aria-required', 'form'];\n\n      for (var i = 0; i < attributes$$1.length; i++) {\n        if (!target.getAttribute(attributes$$1[i])) {\n          continue;\n        }\n\n        var attr = target.getAttribute(attributes$$1[i]);\n        hidden.setAttribute(attributes$$1[i], attr);\n        target.removeAttribute(attributes$$1[i]);\n      }\n    }\n  }, {\n    key: \"setZIndex\",\n    value: function setZIndex() {// this is for component wise\n    } // eslint-disable-next-line @typescript-eslint/no-unused-vars\n\n  }, {\n    key: \"updateActionCompleteData\",\n    value: function updateActionCompleteData(li, item, index) {// this is for ComboBox custom value\n    } // eslint-disable-next-line @typescript-eslint/no-unused-vars\n\n  }, {\n    key: \"updateAddItemList\",\n    value: function updateAddItemList(list, itemCount) {// this is for multiselect add item\n    }\n  }, {\n    key: \"updateDataList\",\n    value: function updateDataList() {// this is for multiselect update list items\n    }\n    /* eslint-disable valid-jsdoc, jsdoc/require-returns-description */\n\n    /**\n     * Gets the data Object that matches the given value.\n     *\n     * @param { string | number } value - Specifies the value of the list item.\n     * @returns {Object}\n     */\n\n  }, {\n    key: \"getDataByValue\",\n    value: function getDataByValue(value) {\n      if (!isNullOrUndefined(this.listData)) {\n        var type = this.typeOfData(this.listData).typeof;\n\n        if (type === 'string' || type === 'number' || type === 'boolean') {\n          var _iterator3 = _createForOfIteratorHelper(this.listData),\n              _step3;\n\n          try {\n            for (_iterator3.s(); !(_step3 = _iterator3.n()).done;) {\n              var item = _step3.value;\n\n              if (!isNullOrUndefined(item) && item === value) {\n                return item;\n              }\n            }\n          } catch (err) {\n            _iterator3.e(err);\n          } finally {\n            _iterator3.f();\n          }\n        } else {\n          var _iterator4 = _createForOfIteratorHelper(this.listData),\n              _step4;\n\n          try {\n            for (_iterator4.s(); !(_step4 = _iterator4.n()).done;) {\n              var _item = _step4.value;\n\n              if (!isNullOrUndefined(_item) && getValue(this.fields.value ? this.fields.value : 'value', _item) === value) {\n                return _item;\n              }\n            }\n          } catch (err) {\n            _iterator4.e(err);\n          } finally {\n            _iterator4.f();\n          }\n        }\n      }\n\n      return null;\n    }\n    /* eslint-enable valid-jsdoc, jsdoc/require-returns-description */\n\n    /**\n     * Removes the component from the DOM and detaches all its related event handlers. It also removes the attributes and classes.\n     *\n     * @method destroy\n     * @returns {void}\n     */\n\n  }, {\n    key: \"destroy\",\n    value: function destroy() {\n      if (document.body.contains(this.list)) {\n        EventHandler.remove(this.list, 'scroll', this.setFloatingHeader);\n\n        if (!isNullOrUndefined(this.rippleFun)) {\n          this.rippleFun();\n        }\n\n        detach(this.list);\n      }\n\n      _get(_getPrototypeOf(DropDownBase.prototype), \"destroy\", this).call(this);\n    }\n  }]);\n\n  return DropDownBase;\n}(Component);\n\n__decorate([Complex({\n  text: null,\n  value: null,\n  iconCss: null,\n  groupBy: null\n}, FieldSettings)], DropDownBase.prototype, \"fields\", void 0);\n\n__decorate([Property(false)], DropDownBase.prototype, \"enablePersistence\", void 0);\n\n__decorate([Property(null)], DropDownBase.prototype, \"itemTemplate\", void 0);\n\n__decorate([Property(null)], DropDownBase.prototype, \"groupTemplate\", void 0);\n\n__decorate([Property('No records found')], DropDownBase.prototype, \"noRecordsTemplate\", void 0);\n\n__decorate([Property('Request failed')], DropDownBase.prototype, \"actionFailureTemplate\", void 0);\n\n__decorate([Property('None')], DropDownBase.prototype, \"sortOrder\", void 0);\n\n__decorate([Property(true)], DropDownBase.prototype, \"enabled\", void 0);\n\n__decorate([Property([])], DropDownBase.prototype, \"dataSource\", void 0);\n\n__decorate([Property(null)], DropDownBase.prototype, \"query\", void 0);\n\n__decorate([Property('StartsWith')], DropDownBase.prototype, \"filterType\", void 0);\n\n__decorate([Property(true)], DropDownBase.prototype, \"ignoreCase\", void 0);\n\n__decorate([Property(1000)], DropDownBase.prototype, \"zIndex\", void 0);\n\n__decorate([Property(false)], DropDownBase.prototype, \"ignoreAccent\", void 0);\n\n__decorate([Property()], DropDownBase.prototype, \"locale\", void 0);\n\n__decorate([Event()], DropDownBase.prototype, \"actionBegin\", void 0);\n\n__decorate([Event()], DropDownBase.prototype, \"actionComplete\", void 0);\n\n__decorate([Event()], DropDownBase.prototype, \"actionFailure\", void 0);\n\n__decorate([Event()], DropDownBase.prototype, \"select\", void 0);\n\n__decorate([Event()], DropDownBase.prototype, \"dataBound\", void 0);\n\n__decorate([Event()], DropDownBase.prototype, \"created\", void 0);\n\n__decorate([Event()], DropDownBase.prototype, \"destroyed\", void 0);\n\nDropDownBase = __decorate([NotifyPropertyChanges], DropDownBase);\n/**\n * export all modules from current location\n */\n\nvar __decorate$1 = undefined && undefined.__decorate || function (decorators, target, key, desc) {\n  var c = arguments.length,\n      r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc,\n      d;\n  if (typeof Reflect === \"object\" && typeof Reflect.decorate === \"function\") r = Reflect.decorate(decorators, target, key, desc);else for (var i = decorators.length - 1; i >= 0; i--) {\n    if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;\n  }\n  return c > 3 && r && Object.defineProperty(target, key, r), r;\n}; // eslint-disable-next-line @typescript-eslint/triple-slash-reference\n/// <reference path='../drop-down-base/drop-down-base-model.d.ts'/>\n// don't use space in classnames\n\n\nvar dropDownListClasses = {\n  root: 'e-dropdownlist',\n  hover: dropDownBaseClasses.hover,\n  selected: dropDownBaseClasses.selected,\n  rtl: dropDownBaseClasses.rtl,\n  li: dropDownBaseClasses.li,\n  disable: dropDownBaseClasses.disabled,\n  base: dropDownBaseClasses.root,\n  focus: dropDownBaseClasses.focus,\n  input: 'e-input-group',\n  inputFocus: 'e-input-focus',\n  icon: 'e-input-group-icon e-ddl-icon',\n  iconAnimation: 'e-icon-anim',\n  value: 'e-input-value',\n  device: 'e-ddl-device',\n  backIcon: 'e-input-group-icon e-back-icon e-icons',\n  filterBarClearIcon: 'e-input-group-icon e-clear-icon e-icons',\n  filterInput: 'e-input-filter',\n  filterParent: 'e-filter-parent',\n  mobileFilter: 'e-ddl-device-filter',\n  footer: 'e-ddl-footer',\n  header: 'e-ddl-header',\n  clearIcon: 'e-clear-icon',\n  clearIconHide: 'e-clear-icon-hide',\n  popupFullScreen: 'e-popup-full-page',\n  disableIcon: 'e-ddl-disable-icon',\n  hiddenElement: 'e-ddl-hidden'\n};\nvar inputObject = {\n  container: null,\n  buttons: []\n};\n/**\n * The DropDownList component contains a list of predefined values from which you can\n * choose a single value.\n * ```html\n * <input type=\"text\" tabindex=\"1\" id=\"list\"> </input>\n * ```\n * ```typescript\n *   let dropDownListObj:DropDownList = new DropDownList();\n *   dropDownListObj.appendTo(\"#list\");\n * ```\n */\n\nvar DropDownList = /*#__PURE__*/function (_DropDownBase) {\n  _inherits(DropDownList, _DropDownBase);\n\n  var _super3 = _createSuper(DropDownList);\n\n  /**\n   * * Constructor for creating the DropDownList component.\n   *\n   * @param {DropDownListModel} options - Specifies the DropDownList model.\n   * @param {string | HTMLElement} element - Specifies the element to render as component.\n   * @private\n   */\n  function DropDownList(options, element) {\n    var _this5;\n\n    _classCallCheck(this, DropDownList);\n\n    _this5 = _super3.call(this, options, element);\n    _this5.isListSearched = false;\n    _this5.preventChange = false;\n    _this5.isAngular = false;\n    return _this5;\n  }\n  /**\n   * Initialize the event handler.\n   *\n   * @private\n   * @returns {void}\n   */\n\n\n  _createClass(DropDownList, [{\n    key: \"preRender\",\n    value: function preRender() {\n      this.valueTempElement = null;\n      this.element.style.opacity = '0';\n      this.initializeData();\n\n      _get(_getPrototypeOf(DropDownList.prototype), \"preRender\", this).call(this);\n\n      this.activeIndex = this.index;\n      this.queryString = '';\n    }\n  }, {\n    key: \"initializeData\",\n    value: function initializeData() {\n      this.isPopupOpen = false;\n      this.isDocumentClick = false;\n      this.isInteracted = false;\n      this.isFilterFocus = false;\n      this.beforePopupOpen = false;\n      this.initial = true;\n      this.initRemoteRender = false;\n      this.isNotSearchList = false;\n      this.isTyped = false;\n      this.isSelected = false;\n      this.preventFocus = false;\n      this.preventAutoFill = false;\n      this.isValidKey = false;\n      this.typedString = '';\n      this.isEscapeKey = false;\n      this.isPreventBlur = false;\n      this.isTabKey = false;\n      this.actionCompleteData = {\n        isUpdated: false\n      };\n      this.actionData = {\n        isUpdated: false\n      };\n      this.prevSelectPoints = {};\n      this.isSelectCustom = false;\n      this.isDropDownClick = false;\n      this.preventAltUp = false;\n      this.isCustomFilter = false;\n      this.isSecondClick = false;\n      this.previousValue = null;\n      this.keyConfigure = {\n        tab: 'tab',\n        enter: '13',\n        escape: '27',\n        end: '35',\n        home: '36',\n        down: '40',\n        up: '38',\n        pageUp: '33',\n        pageDown: '34',\n        open: 'alt+40',\n        close: 'shift+tab',\n        hide: 'alt+38',\n        space: '32'\n      };\n    }\n  }, {\n    key: \"setZIndex\",\n    value: function setZIndex() {\n      if (this.popupObj) {\n        this.popupObj.setProperties({\n          'zIndex': this.zIndex\n        });\n      }\n    }\n  }, {\n    key: \"renderList\",\n    value: function renderList(isEmptyData) {\n      _get(_getPrototypeOf(DropDownList.prototype), \"render\", this).call(this, isEmptyData);\n\n      this.unWireListEvents();\n      this.wireListEvents();\n    }\n  }, {\n    key: \"floatLabelChange\",\n    value: function floatLabelChange() {\n      if (this.getModuleName() === 'dropdownlist' && this.floatLabelType === 'Auto') {\n        var floatElement = this.inputWrapper.container.querySelector('.e-float-text');\n\n        if (this.inputElement.value !== '' || this.isInteracted) {\n          classList(floatElement, ['e-label-top'], ['e-label-bottom']);\n        } else {\n          classList(floatElement, ['e-label-bottom'], ['e-label-top']);\n        }\n      }\n    }\n  }, {\n    key: \"resetHandler\",\n    value: function resetHandler(e) {\n      e.preventDefault();\n      this.clearAll(e);\n    }\n  }, {\n    key: \"resetFocusElement\",\n    value: function resetFocusElement() {\n      this.removeHover();\n      this.removeSelection();\n      this.removeFocus();\n      this.list.scrollTop = 0;\n\n      if (this.getModuleName() !== 'autocomplete' && !isNullOrUndefined(this.ulElement)) {\n        var li = this.ulElement.querySelector('.' + dropDownListClasses.li);\n\n        if (li) {\n          li.classList.add(dropDownListClasses.focus);\n        }\n      }\n    }\n  }, {\n    key: \"clearAll\",\n    value: function clearAll(e, properties) {\n      if (isNullOrUndefined(properties) || !isNullOrUndefined(properties) && (isNullOrUndefined(properties.dataSource) || !(properties.dataSource instanceof DataManager) && properties.dataSource.length === 0)) {\n        this.isActive = true;\n        this.resetSelection(properties);\n      }\n\n      var dataItem = this.getItemData();\n\n      if (this.previousValue === dataItem.value) {\n        return;\n      }\n\n      this.onChangeEvent(e);\n    }\n  }, {\n    key: \"resetSelection\",\n    value: function resetSelection(properties) {\n      if (this.list) {\n        if (!isNullOrUndefined(properties) && (isNullOrUndefined(properties.dataSource) || !(properties.dataSource instanceof DataManager) && properties.dataSource.length === 0)) {\n          this.selectedLI = null;\n          this.actionCompleteData.isUpdated = false;\n          this.actionCompleteData.ulElement = null;\n          this.actionCompleteData.list = null;\n          this.resetList(properties.dataSource);\n        } else {\n          if (this.allowFiltering && this.getModuleName() !== 'autocomplete' && !isNullOrUndefined(this.actionCompleteData.ulElement) && !isNullOrUndefined(this.actionCompleteData.list)) {\n            this.onActionComplete(this.actionCompleteData.ulElement.cloneNode(true), this.actionCompleteData.list);\n          }\n\n          this.resetFocusElement();\n        }\n      }\n\n      this.hiddenElement.innerHTML = '';\n      this.inputElement.value = '';\n      this.value = null;\n      this.itemData = null;\n      this.text = null;\n      this.index = null;\n      this.activeIndex = null;\n      this.item = null;\n      this.queryString = '';\n\n      if (this.valueTempElement) {\n        detach(this.valueTempElement);\n        this.inputElement.style.display = 'block';\n        this.valueTempElement = null;\n      }\n\n      this.setSelection(null, null);\n      this.isSelectCustom = false;\n      this.updateIconState();\n      this.cloneElements();\n    }\n  }, {\n    key: \"setHTMLAttributes\",\n    value: function setHTMLAttributes() {\n      if (Object.keys(this.htmlAttributes).length) {\n        for (var _i4 = 0, _Object$keys2 = Object.keys(this.htmlAttributes); _i4 < _Object$keys2.length; _i4++) {\n          var htmlAttr = _Object$keys2[_i4];\n\n          if (htmlAttr === 'class') {\n            var updatedClassValue = this.htmlAttributes[htmlAttr].replace(/\\s+/g, ' ').trim();\n\n            if (updatedClassValue !== '') {\n              addClass([this.inputWrapper.container], updatedClassValue.split(' '));\n            }\n          } else if (htmlAttr === 'disabled' && this.htmlAttributes[htmlAttr] === 'disabled') {\n            this.enabled = false;\n            this.setEnable();\n          } else if (htmlAttr === 'readonly' && !isNullOrUndefined(this.htmlAttributes[htmlAttr])) {\n            this.readonly = true;\n            this.dataBind();\n          } else if (htmlAttr === 'style') {\n            this.inputWrapper.container.setAttribute('style', this.htmlAttributes[htmlAttr]);\n          } else {\n            var defaultAttr = ['title', 'id', 'placeholder', 'aria-placeholder', 'role', 'autocorrect', 'autocomplete', 'autocapitalize', 'spellcheck', 'minlength', 'maxlength'];\n            var validateAttr = ['name', 'required'];\n\n            if (this.getModuleName() === 'autocomplete' || this.getModuleName() === 'combobox') {\n              defaultAttr.push('tabindex');\n            }\n\n            if (validateAttr.indexOf(htmlAttr) > -1 || htmlAttr.indexOf('data') === 0) {\n              this.hiddenElement.setAttribute(htmlAttr, this.htmlAttributes[htmlAttr]);\n            } else if (defaultAttr.indexOf(htmlAttr) > -1) {\n              if (htmlAttr === 'placeholder') {\n                Input.setPlaceholder(this.htmlAttributes[htmlAttr], this.inputElement);\n              } else {\n                this.inputElement.setAttribute(htmlAttr, this.htmlAttributes[htmlAttr]);\n              }\n            } else {\n              this.inputWrapper.container.setAttribute(htmlAttr, this.htmlAttributes[htmlAttr]);\n            }\n          }\n        }\n      }\n\n      if (this.getModuleName() === 'autocomplete' || this.getModuleName() === 'combobox') {\n        this.inputWrapper.container.removeAttribute('tabindex');\n      }\n    }\n  }, {\n    key: \"getAriaAttributes\",\n    value: function getAriaAttributes() {\n      return {\n        'aria-disabled': 'false',\n        'aria-owns': this.element.id + '_options',\n        'role': 'listbox',\n        'aria-haspopup': 'true',\n        'aria-expanded': 'false',\n        'aria-activedescendant': 'null',\n        'aria-live': 'polite',\n        'aria-labelledby': this.hiddenElement.id\n      };\n    }\n  }, {\n    key: \"setEnableRtl\",\n    value: function setEnableRtl() {\n      Input.setEnableRtl(this.enableRtl, [this.inputElement.parentElement]);\n\n      if (this.popupObj) {\n        this.popupObj.enableRtl = this.enableRtl;\n        this.popupObj.dataBind();\n      }\n    }\n  }, {\n    key: \"setEnable\",\n    value: function setEnable() {\n      Input.setEnabled(this.enabled, this.inputElement);\n\n      if (this.enabled) {\n        removeClass([this.inputWrapper.container], dropDownListClasses.disable);\n        this.inputElement.setAttribute('aria-disabled', 'false');\n        this.targetElement().setAttribute('tabindex', this.tabIndex);\n      } else {\n        this.hidePopup();\n        addClass([this.inputWrapper.container], dropDownListClasses.disable);\n        this.inputElement.setAttribute('aria-disabled', 'true');\n        this.targetElement().tabIndex = -1;\n      }\n    }\n    /**\n     * Get the properties to be maintained in the persisted state.\n     *\n     * @returns {string} Returns the persisted data of the component.\n     */\n\n  }, {\n    key: \"getPersistData\",\n    value: function getPersistData() {\n      return this.addOnPersist(['value']);\n    }\n  }, {\n    key: \"getLocaleName\",\n    value: function getLocaleName() {\n      return 'drop-down-list';\n    }\n  }, {\n    key: \"preventTabIndex\",\n    value: function preventTabIndex(element) {\n      if (this.getModuleName() === 'dropdownlist') {\n        element.tabIndex = -1;\n      }\n    }\n  }, {\n    key: \"targetElement\",\n    value: function targetElement() {\n      return this.inputWrapper.container;\n    }\n  }, {\n    key: \"getNgDirective\",\n    value: function getNgDirective() {\n      return 'EJS-DROPDOWNLIST';\n    }\n  }, {\n    key: \"getElementByText\",\n    value: function getElementByText(text) {\n      return this.getElementByValue(this.getValueByText(text));\n    }\n  }, {\n    key: \"getElementByValue\",\n    value: function getElementByValue(value) {\n      var item;\n      var listItems = this.getItems();\n\n      var _iterator5 = _createForOfIteratorHelper(listItems),\n          _step5;\n\n      try {\n        for (_iterator5.s(); !(_step5 = _iterator5.n()).done;) {\n          var liItem = _step5.value;\n\n          if (this.getFormattedValue(liItem.getAttribute('data-value')) === value) {\n            item = liItem;\n            break;\n          }\n        }\n      } catch (err) {\n        _iterator5.e(err);\n      } finally {\n        _iterator5.f();\n      }\n\n      return item;\n    }\n  }, {\n    key: \"initValue\",\n    value: function initValue() {\n      this.renderList();\n\n      if (this.dataSource instanceof DataManager) {\n        this.initRemoteRender = true;\n      } else {\n        this.updateValues();\n      }\n    }\n  }, {\n    key: \"updateValues\",\n    value: function updateValues() {\n      if (!isNullOrUndefined(this.value)) {\n        this.setSelection(this.getElementByValue(this.value), null);\n      } else if (this.text && isNullOrUndefined(this.value)) {\n        var element = this.getElementByText(this.text);\n\n        if (isNullOrUndefined(element)) {\n          this.setProperties({\n            text: null\n          });\n          return;\n        } else {\n          this.setSelection(element, null);\n        }\n      } else {\n        this.setSelection(this.liCollections[this.activeIndex], null);\n      }\n\n      this.setHiddenValue();\n      Input.setValue(this.text, this.inputElement, this.floatLabelType, this.showClearButton);\n    }\n  }, {\n    key: \"onBlurHandler\",\n    value: function onBlurHandler(e) {\n      if (!this.enabled) {\n        return;\n      }\n\n      var target = e.relatedTarget;\n      var currentTarget = e.target;\n      var isPreventBlur = this.isPreventBlur;\n      this.isPreventBlur = false; //IE 11 - issue\n\n      if (isPreventBlur && !this.isDocumentClick && this.isPopupOpen && (!isNullOrUndefined(currentTarget) || !this.isFilterLayout() && isNullOrUndefined(target))) {\n        if (this.getModuleName() === 'dropdownlist' && this.allowFiltering && this.isPopupOpen) {\n          this.filterInput.focus();\n        } else {\n          this.targetElement().focus();\n        }\n\n        return;\n      }\n\n      if (this.isDocumentClick || !isNullOrUndefined(this.popupObj) && document.body.contains(this.popupObj.element) && this.popupObj.element.classList.contains(dropDownListClasses.mobileFilter)) {\n        if (!this.beforePopupOpen) {\n          this.isDocumentClick = false;\n        }\n\n        return;\n      }\n\n      if (this.getModuleName() === 'dropdownlist' && !this.isFilterFocus && target !== this.inputElement && (document.activeElement !== target || document.activeElement === target && currentTarget.classList.contains(dropDownListClasses.inputFocus)) || isNullOrUndefined(target) && this.getModuleName() === 'dropdownlist' && this.allowFiltering && currentTarget !== this.inputWrapper.container || this.getModuleName() !== 'dropdownlist' && !this.inputWrapper.container.contains(target) || this.isTabKey) {\n        this.isDocumentClick = this.isPopupOpen ? true : false;\n        this.focusOutAction(e);\n        this.isTabKey = false;\n      }\n\n      if (this.isRequested && !this.isPopupOpen && !this.isPreventBlur) {\n        this.isActive = false;\n        this.beforePopupOpen = false;\n      }\n    }\n  }, {\n    key: \"focusOutAction\",\n    value: function focusOutAction(e) {\n      this.isInteracted = false;\n      this.focusOut(e);\n      this.onFocusOut();\n    }\n  }, {\n    key: \"onFocusOut\",\n    value: function onFocusOut() {\n      if (!this.enabled) {\n        return;\n      }\n\n      if (this.isSelected) {\n        this.isSelectCustom = false;\n        this.onChangeEvent(null);\n      }\n\n      this.floatLabelChange();\n      this.dispatchEvent(this.hiddenElement, 'change');\n\n      if (this.getModuleName() === 'dropdownlist' && this.element.tagName !== 'INPUT') {\n        this.dispatchEvent(this.inputElement, 'blur');\n      }\n\n      if (this.inputWrapper.clearButton) {\n        addClass([this.inputWrapper.clearButton], dropDownListClasses.clearIconHide);\n      }\n\n      this.trigger('blur');\n    }\n  }, {\n    key: \"onFocus\",\n    value: function onFocus(e) {\n      if (!this.isInteracted) {\n        this.isInteracted = true;\n        var args = {\n          isInteracted: e ? true : false,\n          event: e\n        };\n        this.trigger('focus', args);\n      }\n\n      this.updateIconState();\n    }\n  }, {\n    key: \"resetValueHandler\",\n    value: function resetValueHandler(e) {\n      var formElement = closest(this.inputElement, 'form');\n\n      if (formElement && e.target === formElement) {\n        var val = this.element.tagName === this.getNgDirective() ? null : this.inputElement.getAttribute('value');\n        this.text = val;\n      }\n    }\n  }, {\n    key: \"wireEvent\",\n    value: function wireEvent() {\n      EventHandler.add(this.inputWrapper.container, 'mousedown', this.dropDownClick, this);\n      EventHandler.add(this.inputWrapper.container, 'focus', this.focusIn, this);\n      EventHandler.add(this.inputWrapper.container, 'keypress', this.onSearch, this);\n      this.bindCommonEvent();\n    }\n  }, {\n    key: \"bindCommonEvent\",\n    value: function bindCommonEvent() {\n      EventHandler.add(this.targetElement(), 'blur', this.onBlurHandler, this);\n      var formElement = closest(this.inputElement, 'form');\n\n      if (formElement) {\n        EventHandler.add(formElement, 'reset', this.resetValueHandler, this);\n      }\n\n      if (!Browser.isDevice) {\n        this.keyboardModule = new KeyboardEvents(this.targetElement(), {\n          keyAction: this.keyActionHandler.bind(this),\n          keyConfigs: this.keyConfigure,\n          eventName: 'keydown'\n        });\n      } else {\n        this.keyboardModule = new KeyboardEvents(this.targetElement(), {\n          keyAction: this.mobileKeyActionHandler.bind(this),\n          keyConfigs: this.keyConfigure,\n          eventName: 'keydown'\n        });\n      }\n\n      this.bindClearEvent();\n    }\n  }, {\n    key: \"bindClearEvent\",\n    value: function bindClearEvent() {\n      if (this.showClearButton) {\n        EventHandler.add(this.inputWrapper.clearButton, 'mousedown', this.resetHandler, this);\n      }\n    }\n  }, {\n    key: \"unBindCommonEvent\",\n    value: function unBindCommonEvent() {\n      if (this.targetElement()) {\n        EventHandler.remove(this.targetElement(), 'blur', this.onBlurHandler);\n      }\n\n      var formElement = this.inputElement && closest(this.inputElement, 'form');\n\n      if (formElement) {\n        EventHandler.remove(formElement, 'reset', this.resetValueHandler);\n      }\n\n      if (!Browser.isDevice) {\n        this.keyboardModule.destroy();\n      }\n\n      if (this.showClearButton) {\n        EventHandler.remove(this.inputWrapper.clearButton, 'mousedown', this.resetHandler);\n      }\n    }\n  }, {\n    key: \"updateIconState\",\n    value: function updateIconState() {\n      if (this.showClearButton) {\n        if (this.inputElement.value !== '' && !this.readonly) {\n          removeClass([this.inputWrapper.clearButton], dropDownListClasses.clearIconHide);\n        } else {\n          addClass([this.inputWrapper.clearButton], dropDownListClasses.clearIconHide);\n        }\n      }\n    }\n    /**\n     * Event binding for list\n     *\n     * @returns {void}\n     */\n\n  }, {\n    key: \"wireListEvents\",\n    value: function wireListEvents() {\n      EventHandler.add(this.list, 'click', this.onMouseClick, this);\n      EventHandler.add(this.list, 'mouseover', this.onMouseOver, this);\n      EventHandler.add(this.list, 'mouseout', this.onMouseLeave, this);\n    }\n  }, {\n    key: \"onSearch\",\n    value: function onSearch(e) {\n      if (e.charCode !== 32 && e.charCode !== 13) {\n        if (this.list === undefined) {\n          this.renderList();\n        }\n\n        this.searchKeyEvent = e;\n        this.onServerIncrementalSearch(e);\n      }\n    }\n  }, {\n    key: \"onServerIncrementalSearch\",\n    value: function onServerIncrementalSearch(e) {\n      if (!this.isRequested && !isNullOrUndefined(this.list) && !isNullOrUndefined(this.list.querySelector('li')) && this.enabled && !this.readonly) {\n        this.incrementalSearch(e);\n      }\n    }\n  }, {\n    key: \"onMouseClick\",\n    value: function onMouseClick(e) {\n      var target = e.target;\n      var li = closest(target, '.' + dropDownBaseClasses.li);\n\n      if (!this.isValidLI(li)) {\n        return;\n      }\n\n      this.setSelection(li, e);\n\n      if (Browser.isDevice && this.isFilterLayout()) {\n        history.back();\n      } else {\n        var delay = 100;\n        this.closePopup(delay);\n      }\n    }\n  }, {\n    key: \"onMouseOver\",\n    value: function onMouseOver(e) {\n      var currentLi = closest(e.target, '.' + dropDownBaseClasses.li);\n      this.setHover(currentLi);\n    }\n  }, {\n    key: \"setHover\",\n    value: function setHover(li) {\n      if (this.enabled && this.isValidLI(li) && !li.classList.contains(dropDownBaseClasses.hover)) {\n        this.removeHover();\n        addClass([li], dropDownBaseClasses.hover);\n      }\n    }\n  }, {\n    key: \"onMouseLeave\",\n    value: function onMouseLeave() {\n      this.removeHover();\n    }\n  }, {\n    key: \"removeHover\",\n    value: function removeHover() {\n      if (this.list) {\n        var hoveredItem = this.list.querySelectorAll('.' + dropDownBaseClasses.hover);\n\n        if (hoveredItem && hoveredItem.length) {\n          removeClass(hoveredItem, dropDownBaseClasses.hover);\n        }\n      }\n    }\n  }, {\n    key: \"isValidLI\",\n    value: function isValidLI(li) {\n      return li && li.hasAttribute('role') && li.getAttribute('role') === 'option';\n    }\n  }, {\n    key: \"incrementalSearch\",\n    value: function incrementalSearch(e) {\n      if (this.liCollections.length > 0) {\n        var li = _incrementalSearch(e.charCode, this.liCollections, this.activeIndex, true, this.element.id);\n\n        if (!isNullOrUndefined(li)) {\n          this.setSelection(li, e);\n          this.setScrollPosition();\n        }\n      }\n    }\n    /**\n     * Hides the spinner loader.\n     *\n     * @returns {void}\n     */\n\n  }, {\n    key: \"hideSpinner\",\n    value: function hideSpinner() {\n      if (!isNullOrUndefined(this.spinnerElement)) {\n        _hideSpinner(this.spinnerElement);\n\n        removeClass([this.spinnerElement], dropDownListClasses.disableIcon);\n        this.spinnerElement.innerHTML = '';\n        this.spinnerElement = null;\n      }\n    }\n    /**\n     * Shows the spinner loader.\n     *\n     * @returns {void}\n     */\n\n  }, {\n    key: \"showSpinner\",\n    value: function showSpinner() {\n      if (isNullOrUndefined(this.spinnerElement)) {\n        this.spinnerElement = Browser.isDevice && !isNullOrUndefined(this.filterInputObj) && this.filterInputObj.buttons[1] || !isNullOrUndefined(this.filterInputObj) && this.filterInputObj.buttons[0] || this.inputWrapper.buttons[0];\n        addClass([this.spinnerElement], dropDownListClasses.disableIcon);\n        createSpinner({\n          target: this.spinnerElement,\n          width: Browser.isDevice ? '16px' : '14px'\n        }, this.createElement);\n\n        _showSpinner(this.spinnerElement);\n      }\n    }\n  }, {\n    key: \"keyActionHandler\",\n    value: function keyActionHandler(e) {\n      if (!this.enabled) {\n        return;\n      }\n\n      var preventAction = e.action === 'pageUp' || e.action === 'pageDown';\n      var preventHomeEnd = this.getModuleName() !== 'dropdownlist' && (e.action === 'home' || e.action === 'end');\n      this.isEscapeKey = e.action === 'escape';\n      this.isTabKey = !this.isPopupOpen && e.action === 'tab';\n      var isNavAction = e.action === 'down' || e.action === 'up' || e.action === 'home' || e.action === 'end';\n      var isNavigation = e.action === 'down' || e.action === 'up' || e.action === 'pageUp' || e.action === 'pageDown' || e.action === 'home' || e.action === 'end';\n\n      if ((this.isEditTextBox() || preventAction || preventHomeEnd) && !this.isPopupOpen) {\n        return;\n      }\n\n      if (!this.readonly) {\n        var isTabAction = e.action === 'tab' || e.action === 'close';\n\n        if (this.list === undefined && !this.isRequested && !isTabAction && e.action !== 'escape') {\n          this.searchKeyEvent = e;\n          this.renderList();\n        }\n\n        if (isNullOrUndefined(this.list) || !isNullOrUndefined(this.liCollections) && isNavigation && this.liCollections.length === 0 || this.isRequested) {\n          return;\n        }\n\n        if (isTabAction && this.getModuleName() !== 'autocomplete' && this.isPopupOpen || e.action === 'escape') {\n          e.preventDefault();\n        }\n\n        this.isSelected = e.action === 'escape' ? false : this.isSelected;\n        this.isTyped = isNavigation || e.action === 'escape' ? false : this.isTyped;\n\n        switch (e.action) {\n          case 'down':\n          case 'up':\n            this.updateUpDownAction(e);\n            break;\n\n          case 'pageUp':\n            this.pageUpSelection(this.activeIndex - this.getPageCount(), e);\n            e.preventDefault();\n            break;\n\n          case 'pageDown':\n            this.pageDownSelection(this.activeIndex + this.getPageCount(), e);\n            e.preventDefault();\n            break;\n\n          case 'home':\n            this.updateHomeEndAction(e);\n            break;\n\n          case 'end':\n            this.updateHomeEndAction(e);\n            break;\n\n          case 'space':\n            if (this.getModuleName() === 'dropdownlist') {\n              if (!this.beforePopupOpen) {\n                this.showPopup();\n              }\n            }\n\n            break;\n\n          case 'open':\n            this.showPopup();\n            break;\n\n          case 'hide':\n            this.preventAltUp = this.isPopupOpen;\n            this.hidePopup(e);\n            this.focusDropDown(e);\n            break;\n\n          case 'enter':\n            this.selectCurrentItem(e);\n            break;\n\n          case 'tab':\n            this.selectCurrentValueOnTab(e);\n            break;\n\n          case 'escape':\n          case 'close':\n            if (this.isPopupOpen) {\n              this.hidePopup(e);\n              this.focusDropDown(e);\n            }\n\n            break;\n        }\n      }\n    }\n  }, {\n    key: \"updateUpDownAction\",\n    value: function updateUpDownAction(e) {\n      var focusEle = this.list.querySelector('.' + dropDownListClasses.focus);\n\n      if (this.isSelectFocusItem(focusEle)) {\n        this.setSelection(focusEle, e);\n      } else if (!isNullOrUndefined(this.liCollections)) {\n        var index = e.action === 'down' ? this.activeIndex + 1 : this.activeIndex - 1;\n        var startIndex = 0;\n\n        if (this.getModuleName() === 'autocomplete') {\n          startIndex = e.action === 'down' && isNullOrUndefined(this.activeIndex) ? 0 : this.liCollections.length - 1;\n          index = index < 0 ? this.liCollections.length - 1 : index === this.liCollections.length ? 0 : index;\n        }\n\n        var nextItem = isNullOrUndefined(this.activeIndex) ? this.liCollections[startIndex] : this.liCollections[index];\n\n        if (!isNullOrUndefined(nextItem)) {\n          this.setSelection(nextItem, e);\n        }\n      }\n\n      e.preventDefault();\n    }\n  }, {\n    key: \"updateHomeEndAction\",\n    value: function updateHomeEndAction(e) {\n      if (this.getModuleName() === 'dropdownlist') {\n        var findLi = 0;\n\n        if (e.action === 'home') {\n          findLi = 0;\n        } else {\n          findLi = this.getItems().length - 1;\n        }\n\n        e.preventDefault();\n\n        if (this.activeIndex === findLi) {\n          return;\n        }\n\n        this.setSelection(this.liCollections[findLi], e);\n      }\n    }\n  }, {\n    key: \"selectCurrentValueOnTab\",\n    value: function selectCurrentValueOnTab(e) {\n      if (this.getModuleName() === 'autocomplete') {\n        this.selectCurrentItem(e);\n      } else {\n        if (this.isPopupOpen) {\n          this.hidePopup(e);\n          this.focusDropDown(e);\n        }\n      }\n    }\n  }, {\n    key: \"mobileKeyActionHandler\",\n    value: function mobileKeyActionHandler(e) {\n      if (!this.enabled) {\n        return;\n      }\n\n      if (this.isEditTextBox() && !this.isPopupOpen) {\n        return;\n      }\n\n      if (!this.readonly) {\n        if (this.list === undefined && !this.isRequested) {\n          this.searchKeyEvent = e;\n          this.renderList();\n        }\n\n        if (isNullOrUndefined(this.list) || !isNullOrUndefined(this.liCollections) && this.liCollections.length === 0 || this.isRequested) {\n          return;\n        }\n\n        if (e.action === 'enter') {\n          this.selectCurrentItem(e);\n        }\n      }\n    }\n  }, {\n    key: \"selectCurrentItem\",\n    value: function selectCurrentItem(e) {\n      if (this.isPopupOpen) {\n        var li = this.list.querySelector('.' + dropDownListClasses.focus);\n\n        if (li) {\n          this.setSelection(li, e);\n          this.isTyped = false;\n        }\n\n        if (this.isSelected) {\n          this.isSelectCustom = false;\n          this.onChangeEvent(e);\n        }\n\n        this.hidePopup();\n        this.focusDropDown(e);\n      } else {\n        this.showPopup();\n      }\n    }\n  }, {\n    key: \"isSelectFocusItem\",\n    value: function isSelectFocusItem(element) {\n      return !isNullOrUndefined(element);\n    }\n  }, {\n    key: \"getPageCount\",\n    value: function getPageCount() {\n      var liHeight = this.list.classList.contains(dropDownBaseClasses.noData) ? null : getComputedStyle(this.getItems()[0], null).getPropertyValue('height');\n      return Math.round(this.list.getBoundingClientRect().height / parseInt(liHeight, 10));\n    }\n  }, {\n    key: \"pageUpSelection\",\n    value: function pageUpSelection(steps, event) {\n      var previousItem = steps >= 0 ? this.liCollections[steps + 1] : this.liCollections[0];\n      this.setSelection(previousItem, event);\n    }\n  }, {\n    key: \"pageDownSelection\",\n    value: function pageDownSelection(steps, event) {\n      var list = this.getItems();\n      var previousItem = steps <= list.length ? this.liCollections[steps - 1] : this.liCollections[list.length - 1];\n      this.setSelection(previousItem, event);\n    }\n  }, {\n    key: \"unWireEvent\",\n    value: function unWireEvent() {\n      EventHandler.remove(this.inputWrapper.container, 'mousedown', this.dropDownClick);\n      EventHandler.remove(this.inputWrapper.container, 'keypress', this.onSearch);\n      EventHandler.remove(this.inputWrapper.container, 'focus', this.focusIn);\n      this.unBindCommonEvent();\n    }\n    /**\n     * Event un binding for list items.\n     *\n     * @returns {void}\n     */\n\n  }, {\n    key: \"unWireListEvents\",\n    value: function unWireListEvents() {\n      EventHandler.remove(this.list, 'click', this.onMouseClick);\n      EventHandler.remove(this.list, 'mouseover', this.onMouseOver);\n      EventHandler.remove(this.list, 'mouseout', this.onMouseLeave);\n    }\n  }, {\n    key: \"checkSelector\",\n    value: function checkSelector(id) {\n      return '[id=\"' + id.replace(/(:|\\.|\\[|\\]|,|=|@|\\\\|\\/|#)/g, '\\\\$1') + '\"]';\n    }\n  }, {\n    key: \"onDocumentClick\",\n    value: function onDocumentClick(e) {\n      var target = e.target;\n\n      if (!(!isNullOrUndefined(this.popupObj) && closest(target, this.checkSelector(this.popupObj.element.id))) && !this.inputWrapper.container.contains(e.target)) {\n        if (this.inputWrapper.container.classList.contains(dropDownListClasses.inputFocus) || this.isPopupOpen) {\n          this.isDocumentClick = true;\n          var isActive = this.isRequested;\n          this.isInteracted = false;\n          this.hidePopup(e);\n\n          if (!isActive) {\n            this.onFocusOut();\n            this.inputWrapper.container.classList.remove(dropDownListClasses.inputFocus);\n          }\n        }\n      } else if (target !== this.inputElement && !(this.allowFiltering && target === this.filterInput) && !(this.getModuleName() === 'combobox' && !this.allowFiltering && Browser.isDevice && target === this.inputWrapper.buttons[0])) {\n        this.isPreventBlur = (Browser.isIE || Browser.info.name === 'edge') && (document.activeElement === this.targetElement() || document.activeElement === this.filterInput);\n        e.preventDefault();\n      }\n    }\n  }, {\n    key: \"activeStateChange\",\n    value: function activeStateChange() {\n      if (this.isDocumentClick) {\n        this.hidePopup();\n        this.onFocusOut();\n        this.inputWrapper.container.classList.remove(dropDownListClasses.inputFocus);\n      }\n    }\n  }, {\n    key: \"focusDropDown\",\n    value: function focusDropDown(e) {\n      if (!this.initial && this.isFilterLayout()) {\n        this.focusIn(e);\n      }\n    }\n  }, {\n    key: \"dropDownClick\",\n    value: function dropDownClick(e) {\n      if (e.which === 3 || e.button === 2) {\n        return;\n      }\n\n      if (this.targetElement().classList.contains(dropDownListClasses.disable) || this.inputWrapper.clearButton === e.target) {\n        return;\n      }\n\n      var target = e.target;\n\n      if (target !== this.inputElement && !(this.allowFiltering && target === this.filterInput) && this.getModuleName() !== 'combobox') {\n        e.preventDefault();\n      }\n\n      if (!this.readonly) {\n        if (this.isPopupOpen) {\n          this.hidePopup();\n\n          if (this.isFilterLayout()) {\n            this.focusDropDown(e);\n          }\n        } else {\n          this.focusIn(e);\n          this.floatLabelChange();\n          this.queryString = this.inputElement.value.trim() === '' ? null : this.inputElement.value;\n          this.isDropDownClick = true;\n          this.showPopup();\n        } // eslint-disable-next-line @typescript-eslint/no-this-alias\n\n\n        var proxy = this; // eslint-disable-next-line max-len\n\n        var duration = this.element.tagName === this.getNgDirective() && this.itemTemplate ? 500 : 100;\n\n        if (!this.isSecondClick) {\n          setTimeout(function () {\n            proxy.cloneElements();\n            proxy.isSecondClick = true;\n          }, duration);\n        }\n      } else {\n        this.focusIn(e);\n      }\n    }\n  }, {\n    key: \"cloneElements\",\n    value: function cloneElements() {\n      if (this.list) {\n        var ulElement = this.list.querySelector('ul');\n\n        if (ulElement) {\n          ulElement = ulElement.cloneNode ? ulElement.cloneNode(true) : ulElement;\n          this.actionCompleteData.ulElement = ulElement;\n        }\n      }\n    }\n  }, {\n    key: \"updateSelectedItem\",\n    value: function updateSelectedItem(li, e, preventSelect, isSelection) {\n      var _this6 = this;\n\n      this.removeSelection();\n      li.classList.add(dropDownBaseClasses.selected);\n      this.removeHover();\n      var value = this.getFormattedValue(li.getAttribute('data-value'));\n      var selectedData = this.getDataByValue(value);\n\n      if (!this.initial && !preventSelect && !isNullOrUndefined(e)) {\n        var items = this.detachChanges(selectedData);\n        this.isSelected = true;\n        var eventArgs = {\n          e: e,\n          item: li,\n          itemData: items,\n          isInteracted: e ? true : false,\n          cancel: false\n        };\n        this.trigger('select', eventArgs, function (eventArgs) {\n          if (eventArgs.cancel) {\n            li.classList.remove(dropDownBaseClasses.selected);\n          } else {\n            _this6.selectEventCallback(li, e, preventSelect, selectedData, value);\n\n            if (isSelection) {\n              _this6.setSelectOptions(li, e);\n            }\n          }\n        });\n      } else {\n        this.selectEventCallback(li, e, preventSelect, selectedData, value);\n\n        if (isSelection) {\n          this.setSelectOptions(li, e);\n        }\n      }\n    }\n  }, {\n    key: \"selectEventCallback\",\n    value: function selectEventCallback(li, e, preventSelect, selectedData, value) {\n      this.previousItemData = !isNullOrUndefined(this.itemData) ? this.itemData : null;\n      this.item = li;\n      this.itemData = selectedData;\n      var focusedItem = this.list.querySelector('.' + dropDownBaseClasses.focus);\n\n      if (focusedItem) {\n        removeClass([focusedItem], dropDownBaseClasses.focus);\n      }\n\n      li.setAttribute('aria-selected', 'true');\n      this.activeIndex = this.getIndexByValue(value);\n    }\n  }, {\n    key: \"activeItem\",\n    value: function activeItem(li) {\n      if (this.isValidLI(li) && !li.classList.contains(dropDownBaseClasses.selected)) {\n        this.removeSelection();\n        li.classList.add(dropDownBaseClasses.selected);\n        this.removeHover();\n        li.setAttribute('aria-selected', 'true');\n      }\n    } // eslint-disable-next-line @typescript-eslint/no-unused-vars\n\n  }, {\n    key: \"setValue\",\n    value: function setValue(e) {\n      var dataItem = this.getItemData();\n\n      if (dataItem.value === null) {\n        Input.setValue(null, this.inputElement, this.floatLabelType, this.showClearButton);\n      } else {\n        Input.setValue(dataItem.text, this.inputElement, this.floatLabelType, this.showClearButton);\n      }\n\n      if (this.valueTemplate && this.itemData !== null) {\n        this.setValueTemplate();\n      } else if (!isNullOrUndefined(this.valueTempElement) && this.inputElement.previousSibling === this.valueTempElement) {\n        detach(this.valueTempElement);\n        this.inputElement.style.display = 'block';\n      }\n\n      var clearIcon = dropDownListClasses.clearIcon;\n      var isFilterElement = this.isFiltering() && this.filterInput && this.getModuleName() === 'combobox';\n      var clearElement = isFilterElement && this.filterInput.parentElement.querySelector('.' + clearIcon);\n\n      if (this.isFiltering() && clearElement) {\n        clearElement.style.removeProperty('visibility');\n      }\n\n      if (this.previousValue === dataItem.value) {\n        this.isSelected = false;\n        return true;\n      } else {\n        this.isSelected = !this.initial ? true : false;\n        this.isSelectCustom = false;\n\n        if (this.getModuleName() === 'dropdownlist') {\n          this.updateIconState();\n        }\n\n        return false;\n      }\n    }\n  }, {\n    key: \"setSelection\",\n    value: function setSelection(li, e) {\n      if (this.isValidLI(li) && (!li.classList.contains(dropDownBaseClasses.selected) || this.isPopupOpen && this.isSelected && li.classList.contains(dropDownBaseClasses.selected))) {\n        this.updateSelectedItem(li, e, false, true);\n      } else {\n        this.setSelectOptions(li, e);\n      }\n    }\n  }, {\n    key: \"setSelectOptions\",\n    value: function setSelectOptions(li, e) {\n      if (this.list) {\n        this.removeHover();\n      }\n\n      this.previousSelectedLI = !isNullOrUndefined(this.selectedLI) ? this.selectedLI : null;\n      this.selectedLI = li;\n\n      if (this.setValue(e)) {\n        return;\n      }\n\n      if (this.isPopupOpen) {\n        attributes(this.targetElement(), {\n          'aria-activedescendant': this.selectedLI ? this.selectedLI.id : null\n        });\n\n        if (this.isFilterLayout() && this.filterInput) {\n          attributes(this.filterInput, {\n            'aria-activedescendant': this.selectedLI ? this.selectedLI.id : null\n          });\n        }\n      }\n\n      if (!this.isPopupOpen && !isNullOrUndefined(li) || this.isPopupOpen && !isNullOrUndefined(e) && (e.type !== 'keydown' || e.type === 'keydown' && e.action === 'enter')) {\n        this.isSelectCustom = false;\n        this.onChangeEvent(e);\n      }\n\n      if (this.isPopupOpen && !isNullOrUndefined(this.selectedLI) && this.itemData !== null && (!e || e.type !== 'click')) {\n        this.setScrollPosition(e);\n      }\n\n      if (Browser.info.name !== 'mozilla') {\n        attributes(this.inputElement, {\n          'aria-label': this.inputElement.value\n        });\n        attributes(this.targetElement(), {\n          'aria-describedby': this.inputElement.id\n        });\n        this.targetElement().removeAttribute('aria-live');\n      }\n    }\n  }, {\n    key: \"dropdownCompiler\",\n    value: function dropdownCompiler(dropdownTemplate) {\n      var checkTemplate = false;\n\n      if (dropdownTemplate) {\n        try {\n          checkTemplate = document.querySelectorAll(dropdownTemplate).length ? true : false;\n        } catch (exception) {\n          checkTemplate = false;\n        }\n      }\n\n      return checkTemplate;\n    }\n  }, {\n    key: \"setValueTemplate\",\n    value: function setValueTemplate() {\n      var compiledString; // eslint-disable-next-line @typescript-eslint/no-explicit-any\n\n      if (this.isReact) {\n        this.clearTemplate(['valueTemplate']);\n      }\n\n      if (!this.valueTempElement) {\n        this.valueTempElement = this.createElement('span', {\n          className: dropDownListClasses.value\n        });\n        this.inputElement.parentElement.insertBefore(this.valueTempElement, this.inputElement);\n        this.inputElement.style.display = 'none';\n      }\n\n      this.valueTempElement.innerHTML = '';\n      var valuecheck = this.dropdownCompiler(this.valueTemplate);\n\n      if (valuecheck) {\n        compiledString = compile(document.querySelector(this.valueTemplate).innerHTML.trim());\n      } else {\n        compiledString = compile(this.valueTemplate);\n      } // eslint-disable-next-line @typescript-eslint/no-explicit-any\n\n\n      var valueCompTemp = compiledString(this.itemData, this, 'valueTemplate', this.valueTemplateId, this.isStringTemplate, null, this.valueTempElement);\n\n      if (valueCompTemp && valueCompTemp.length > 0) {\n        for (var i = 0; i < valueCompTemp.length; i++) {\n          this.valueTempElement.appendChild(valueCompTemp[i]);\n        }\n      }\n\n      this.renderReactTemplates();\n    }\n  }, {\n    key: \"removeSelection\",\n    value: function removeSelection() {\n      if (this.list) {\n        var selectedItems = this.list.querySelectorAll('.' + dropDownBaseClasses.selected);\n\n        if (selectedItems.length) {\n          removeClass(selectedItems, dropDownBaseClasses.selected);\n          selectedItems[0].removeAttribute('aria-selected');\n        }\n      }\n    }\n  }, {\n    key: \"getItemData\",\n    value: function getItemData() {\n      var fields = this.fields;\n      var dataItem = null;\n      dataItem = this.itemData;\n      var dataValue;\n      var dataText;\n\n      if (!isNullOrUndefined(dataItem)) {\n        dataValue = getValue(fields.value, dataItem);\n        dataText = getValue(fields.text, dataItem);\n      }\n\n      var value = !isNullOrUndefined(dataItem) && !isUndefined(dataValue) ? dataValue : dataItem;\n      var text = !isNullOrUndefined(dataItem) && !isUndefined(dataValue) ? dataText : dataItem;\n      return {\n        value: value,\n        text: text\n      };\n    }\n    /**\n     * To trigger the change event for list.\n     *\n     * @param {MouseEvent | KeyboardEvent | TouchEvent} eve - Specifies the event arguments.\n     * @returns {void}\n     */\n\n  }, {\n    key: \"onChangeEvent\",\n    value: function onChangeEvent(eve) {\n      var dataItem = this.getItemData();\n      var index = this.isSelectCustom ? null : this.activeIndex;\n      this.setProperties({\n        'index': index,\n        'text': dataItem.text,\n        'value': dataItem.value\n      }, true);\n      this.detachChangeEvent(eve);\n    }\n  }, {\n    key: \"detachChanges\",\n    value: function detachChanges(value) {\n      var items;\n\n      if (typeof value === 'string' || typeof value === 'boolean' || typeof value === 'number') {\n        items = Object.defineProperties({}, {\n          value: {\n            value: value,\n            enumerable: true\n          },\n          text: {\n            value: value,\n            enumerable: true\n          }\n        });\n      } else {\n        items = value;\n      }\n\n      return items;\n    }\n  }, {\n    key: \"detachChangeEvent\",\n    value: function detachChangeEvent(eve) {\n      this.isSelected = false;\n      this.previousValue = this.value;\n      this.activeIndex = this.index;\n      this.typedString = !isNullOrUndefined(this.text) ? this.text : '';\n\n      if (!this.initial) {\n        var items = this.detachChanges(this.itemData);\n        var preItems;\n\n        if (typeof this.previousItemData === 'string' || typeof this.previousItemData === 'boolean' || typeof this.previousItemData === 'number') {\n          preItems = Object.defineProperties({}, {\n            value: {\n              value: this.previousItemData,\n              enumerable: true\n            },\n            text: {\n              value: this.previousItemData,\n              enumerable: true\n            }\n          });\n        } else {\n          preItems = this.previousItemData;\n        }\n\n        this.setHiddenValue();\n        var eventArgs = {\n          e: eve,\n          item: this.item,\n          itemData: items,\n          previousItem: this.previousSelectedLI,\n          previousItemData: preItems,\n          isInteracted: eve ? true : false,\n          value: this.value,\n          element: this.element,\n          event: eve\n        };\n\n        if (this.isAngular && this.preventChange) {\n          this.preventChange = false;\n        } else {\n          this.trigger('change', eventArgs);\n        }\n      }\n\n      if ((isNullOrUndefined(this.value) || this.value === '') && this.floatLabelType !== 'Always') {\n        removeClass([this.inputWrapper.container], 'e-valid-input');\n      }\n    }\n  }, {\n    key: \"setHiddenValue\",\n    value: function setHiddenValue() {\n      if (!isNullOrUndefined(this.value)) {\n        if (this.hiddenElement.querySelector('option')) {\n          var selectedElement = this.hiddenElement.querySelector('option');\n          selectedElement.textContent = this.text;\n          selectedElement.setAttribute('value', this.value.toString());\n        } else {\n          this.hiddenElement.innerHTML = '<option selected>' + this.text + '</option>';\n\n          var _selectedElement = this.hiddenElement.querySelector('option');\n\n          _selectedElement.setAttribute('value', this.value.toString());\n        }\n      } else {\n        this.hiddenElement.innerHTML = '';\n      }\n    }\n    /**\n     * Filter bar implementation\n     *\n     * @param {KeyboardEventArgs} e - Specifies the event arguments.\n     * @returns {void}\n     */\n\n  }, {\n    key: \"onFilterUp\",\n    value: function onFilterUp(e) {\n      if (!(e.ctrlKey && e.keyCode === 86) && (this.isValidKey || e.keyCode === 40 || e.keyCode === 38)) {\n        this.isValidKey = false;\n\n        switch (e.keyCode) {\n          case 38: //up arrow\n\n          case 40:\n            //down arrow\n            if (this.getModuleName() === 'autocomplete' && !this.isPopupOpen && !this.preventAltUp && !this.isRequested) {\n              this.preventAutoFill = true;\n              this.searchLists(e);\n            } else {\n              this.preventAutoFill = false;\n            }\n\n            this.preventAltUp = false;\n            e.preventDefault();\n            break;\n\n          case 46: //delete\n\n          case 8:\n            //backspace\n            this.typedString = this.filterInput.value;\n\n            if (!this.isPopupOpen && this.typedString !== '' || this.isPopupOpen && this.queryString.length > 0) {\n              this.preventAutoFill = true;\n              this.searchLists(e);\n            } else if (this.typedString === '' && this.queryString === '' && this.getModuleName() !== 'autocomplete') {\n              this.preventAutoFill = true;\n              this.searchLists(e);\n            } else if (this.typedString === '') {\n              if (this.list) {\n                this.resetFocusElement();\n              }\n\n              this.activeIndex = null;\n\n              if (this.getModuleName() !== 'dropdownlist') {\n                this.preventAutoFill = true;\n                this.searchLists(e);\n\n                if (this.getModuleName() === 'autocomplete') {\n                  this.hidePopup();\n                }\n              }\n            }\n\n            e.preventDefault();\n            break;\n\n          default:\n            this.typedString = this.filterInput.value;\n            this.preventAutoFill = false;\n            this.searchLists(e);\n            break;\n        }\n      } else {\n        this.isValidKey = false;\n      }\n    }\n  }, {\n    key: \"onFilterDown\",\n    value: function onFilterDown(e) {\n      switch (e.keyCode) {\n        case 13:\n          //enter\n          break;\n\n        case 40: //down arrow\n\n        case 38:\n          //up arrow\n          this.queryString = this.filterInput.value;\n          e.preventDefault();\n          break;\n\n        case 9:\n          //tab\n          if (this.isPopupOpen && this.getModuleName() !== 'autocomplete') {\n            e.preventDefault();\n          }\n\n          break;\n\n        default:\n          this.prevSelectPoints = this.getSelectionPoints();\n          this.queryString = this.filterInput.value;\n          break;\n      }\n    }\n  }, {\n    key: \"removeFillSelection\",\n    value: function removeFillSelection() {\n      if (this.isInteracted) {\n        var selection = this.getSelectionPoints();\n        this.inputElement.setSelectionRange(selection.end, selection.end);\n      }\n    }\n  }, {\n    key: \"getQuery\",\n    value: function getQuery(query) {\n      var filterQuery;\n\n      if (!this.isCustomFilter && this.allowFiltering && this.filterInput) {\n        filterQuery = query ? query.clone() : this.query ? this.query.clone() : new Query();\n        var filterType = this.typedString === '' ? 'contains' : this.filterType;\n        var dataType = this.typeOfData(this.dataSource).typeof;\n\n        if (!(this.dataSource instanceof DataManager) && dataType === 'string' || dataType === 'number') {\n          filterQuery.where('', filterType, this.typedString, this.ignoreCase, this.ignoreAccent);\n        } else {\n          var fields = this.fields.text ? this.fields.text : '';\n          filterQuery.where(fields, filterType, this.typedString, this.ignoreCase, this.ignoreAccent);\n        }\n      } else {\n        filterQuery = query ? query.clone() : this.query ? this.query.clone() : new Query();\n      }\n\n      return filterQuery;\n    }\n  }, {\n    key: \"getSelectionPoints\",\n    value: function getSelectionPoints() {\n      var input = this.inputElement;\n      return {\n        start: Math.abs(input.selectionStart),\n        end: Math.abs(input.selectionEnd)\n      };\n    }\n  }, {\n    key: \"searchLists\",\n    value: function searchLists(e) {\n      var _this7 = this;\n\n      this.isTyped = true;\n      this.activeIndex = null;\n      this.isListSearched = true;\n\n      if (this.filterInput.parentElement.querySelector('.' + dropDownListClasses.clearIcon)) {\n        var clearElement = this.filterInput.parentElement.querySelector('.' + dropDownListClasses.clearIcon);\n        clearElement.style.visibility = this.filterInput.value === '' ? 'hidden' : 'visible';\n      }\n\n      this.isDataFetched = false;\n\n      if (this.isFiltering()) {\n        var eventArgs = {\n          preventDefaultAction: false,\n          text: this.filterInput.value,\n          updateData: function updateData(dataSource, query, fields) {\n            if (eventArgs.cancel) {\n              return;\n            }\n\n            _this7.isCustomFilter = true;\n\n            _this7.filteringAction(dataSource, query, fields);\n          },\n          baseEventArgs: e,\n          cancel: false\n        };\n        this.trigger('filtering', eventArgs, function (eventArgs) {\n          if (!eventArgs.cancel && !_this7.isCustomFilter && !eventArgs.preventDefaultAction) {\n            _this7.filteringAction(_this7.dataSource, null, _this7.fields);\n          }\n        });\n      }\n    }\n    /**\n     * To filter the data from given data source by using query\n     *\n     * @param  {Object[] | DataManager } dataSource - Set the data source to filter.\n     * @param  {Query} query - Specify the query to filter the data.\n     * @param  {FieldSettingsModel} fields - Specify the fields to map the column in the data table.\n     * @returns {void}\n     * @deprecated\n     */\n\n  }, {\n    key: \"filter\",\n    value: function filter(dataSource, query, fields) {\n      this.isCustomFilter = true;\n      this.filteringAction(dataSource, query, fields);\n    }\n  }, {\n    key: \"filteringAction\",\n    value: function filteringAction(dataSource, query, fields) {\n      if (!isNullOrUndefined(this.filterInput)) {\n        this.beforePopupOpen = !this.isPopupOpen && this.getModuleName() === 'combobox' && this.filterInput.value === '' ? false : true;\n\n        if (this.filterInput.value.trim() === '' && !this.itemTemplate) {\n          this.actionCompleteData.isUpdated = false;\n          this.isTyped = false;\n\n          if (!isNullOrUndefined(this.actionCompleteData.ulElement) && !isNullOrUndefined(this.actionCompleteData.list)) {\n            this.onActionComplete(this.actionCompleteData.ulElement, this.actionCompleteData.list);\n          }\n\n          this.isTyped = true;\n\n          if (!isNullOrUndefined(this.itemData) && this.getModuleName() === 'dropdownlist') {\n            this.focusIndexItem();\n            this.setScrollPosition();\n          }\n\n          this.isNotSearchList = true;\n        } else {\n          this.isNotSearchList = false;\n          query = this.filterInput.value.trim() === '' ? null : query;\n          this.resetList(dataSource, fields, query);\n        }\n\n        this.renderReactTemplates();\n      }\n    }\n  }, {\n    key: \"setSearchBox\",\n    value: function setSearchBox(popupElement) {\n      if (this.isFiltering()) {\n        var parentElement = popupElement.querySelector('.' + dropDownListClasses.filterParent) ? popupElement.querySelector('.' + dropDownListClasses.filterParent) : this.createElement('span', {\n          className: dropDownListClasses.filterParent\n        });\n        this.filterInput = this.createElement('input', {\n          attrs: {\n            type: 'text'\n          },\n          className: dropDownListClasses.filterInput\n        });\n        this.element.parentNode.insertBefore(this.filterInput, this.element);\n        var backIcon = false;\n\n        if (Browser.isDevice) {\n          backIcon = true;\n        }\n\n        this.filterInputObj = Input.createInput({\n          element: this.filterInput,\n          buttons: backIcon ? [dropDownListClasses.backIcon, dropDownListClasses.filterBarClearIcon] : [dropDownListClasses.filterBarClearIcon],\n          properties: {\n            placeholder: this.filterBarPlaceholder\n          }\n        }, this.createElement);\n\n        if (!isNullOrUndefined(this.cssClass)) {\n          if (this.cssClass.split(' ').indexOf('e-outline') !== -1) {\n            addClass([this.filterInputObj.container], 'e-outline');\n          } else if (this.cssClass.split(' ').indexOf('e-filled') !== -1) {\n            addClass([this.filterInputObj.container], 'e-filled');\n          }\n        }\n\n        append([this.filterInputObj.container], parentElement);\n        prepend([parentElement], popupElement);\n        attributes(this.filterInput, {\n          'aria-disabled': 'false',\n          'aria-owns': this.element.id + '_options',\n          'role': 'listbox',\n          'aria-activedescendant': this.selectedLI ? this.selectedLI.id : null,\n          'autocomplete': 'off',\n          'autocorrect': 'off',\n          'autocapitalize': 'off',\n          'spellcheck': 'false'\n        });\n        this.clearIconElement = this.filterInput.parentElement.querySelector('.' + dropDownListClasses.clearIcon);\n\n        if (!Browser.isDevice && this.clearIconElement) {\n          EventHandler.add(this.clearIconElement, 'click', this.clearText, this);\n          this.clearIconElement.style.visibility = 'hidden';\n        }\n\n        if (!Browser.isDevice) {\n          this.searchKeyModule = new KeyboardEvents(this.filterInput, {\n            keyAction: this.keyActionHandler.bind(this),\n            keyConfigs: this.keyConfigure,\n            eventName: 'keydown'\n          });\n        } else {\n          this.searchKeyModule = new KeyboardEvents(this.filterInput, {\n            keyAction: this.mobileKeyActionHandler.bind(this),\n            keyConfigs: this.keyConfigure,\n            eventName: 'keydown'\n          });\n        }\n\n        EventHandler.add(this.filterInput, 'input', this.onInput, this);\n        EventHandler.add(this.filterInput, 'keyup', this.onFilterUp, this);\n        EventHandler.add(this.filterInput, 'keydown', this.onFilterDown, this);\n        EventHandler.add(this.filterInput, 'blur', this.onBlurHandler, this);\n        EventHandler.add(this.filterInput, 'paste', this.pasteHandler, this);\n        return this.filterInputObj;\n      } else {\n        return inputObject;\n      }\n    }\n  }, {\n    key: \"onInput\",\n    value: function onInput(e) {\n      this.isValidKey = true; // For filtering works in mobile firefox.\n\n      if (Browser.isDevice && Browser.info.name === 'mozilla') {\n        this.typedString = this.filterInput.value;\n        this.preventAutoFill = true;\n        this.searchLists(e);\n      }\n    }\n  }, {\n    key: \"pasteHandler\",\n    value: function pasteHandler(e) {\n      var _this8 = this;\n\n      setTimeout(function () {\n        _this8.typedString = _this8.filterInput.value;\n\n        _this8.searchLists(e);\n      });\n    }\n  }, {\n    key: \"onActionFailure\",\n    value: function onActionFailure(e) {\n      _get(_getPrototypeOf(DropDownList.prototype), \"onActionFailure\", this).call(this, e);\n\n      if (this.beforePopupOpen) {\n        this.renderPopup();\n      }\n    } // eslint-disable-next-line @typescript-eslint/no-unused-vars\n\n  }, {\n    key: \"onActionComplete\",\n    value: function onActionComplete(ulElement, list, e, isUpdated) {\n      var _this9 = this;\n\n      if (this.isNotSearchList) {\n        this.isNotSearchList = false;\n        return;\n      }\n\n      if (this.isActive) {\n        var selectedItem = this.selectedLI ? this.selectedLI.cloneNode(true) : null;\n\n        _get(_getPrototypeOf(DropDownList.prototype), \"onActionComplete\", this).call(this, ulElement, list, e);\n\n        this.updateSelectElementData(this.allowFiltering);\n\n        if (this.isRequested && !isNullOrUndefined(this.searchKeyEvent) && this.searchKeyEvent.type === 'keydown') {\n          this.isRequested = false;\n          this.keyActionHandler(this.searchKeyEvent);\n          this.searchKeyEvent = null;\n        }\n\n        if (this.isRequested && !isNullOrUndefined(this.searchKeyEvent)) {\n          this.incrementalSearch(this.searchKeyEvent);\n          this.searchKeyEvent = null;\n        }\n\n        this.list.scrollTop = 0;\n\n        if (!isNullOrUndefined(ulElement)) {\n          attributes(ulElement, {\n            'id': this.element.id + '_options',\n            'role': 'listbox',\n            'aria-hidden': 'false'\n          });\n        }\n\n        if (this.initRemoteRender) {\n          this.initial = true;\n          this.activeIndex = this.index;\n          this.updateValues();\n          this.initRemoteRender = false;\n          this.initial = false;\n\n          if (this.value && this.dataSource instanceof DataManager) {\n            var checkField = isNullOrUndefined(this.fields.value) ? this.fields.text : this.fields.value;\n            var checkVal = list.some(function (x) {\n              return x[checkField] === _this9.value;\n            });\n\n            if (!checkVal) {\n              this.dataSource.executeQuery(this.getQuery(this.query).where(new Predicate(checkField, 'equal', this.value))).then(function (e) {\n                if (e.result.length > 0) {\n                  _this9.addItem(e.result, list.length);\n\n                  _this9.updateValues();\n                }\n              });\n            }\n          }\n        }\n\n        if (this.getModuleName() !== 'autocomplete' && this.isFiltering() && !this.isTyped) {\n          if (!this.actionCompleteData.isUpdated || !this.isCustomFilter && !this.isFilterFocus || isNullOrUndefined(this.itemData) && this.allowFiltering && (this.dataSource instanceof DataManager || !isNullOrUndefined(this.dataSource) && !isNullOrUndefined(this.dataSource.length) && this.dataSource.length !== 0)) {\n            if (this.itemTemplate && this.element.tagName === 'EJS-COMBOBOX' && this.allowFiltering) {\n              setTimeout(function () {\n                _this9.updateActionCompleteDataValues(ulElement, list);\n              }, 0);\n            } else {\n              this.updateActionCompleteDataValues(ulElement, list);\n            }\n          }\n\n          this.addNewItem(list, selectedItem);\n\n          if (!isNullOrUndefined(this.itemData)) {\n            this.focusIndexItem();\n          }\n        }\n\n        if (this.beforePopupOpen) {\n          this.renderPopup();\n        }\n      }\n    }\n  }, {\n    key: \"updateActionCompleteDataValues\",\n    value: function updateActionCompleteDataValues(ulElement, list) {\n      this.actionCompleteData = {\n        ulElement: ulElement.cloneNode(true),\n        list: list,\n        isUpdated: true\n      };\n\n      if (isNullOrUndefined(this.actionData.ulElement) && isNullOrUndefined(this.actionData.list)) {\n        this.actionData = this.actionCompleteData;\n      }\n    }\n  }, {\n    key: \"addNewItem\",\n    value: function addNewItem(listData, newElement) {\n      var _this10 = this;\n\n      if (!isNullOrUndefined(this.itemData) && !isNullOrUndefined(newElement)) {\n        var value = this.getItemData().value;\n        var isExist = listData.some(function (data) {\n          return (typeof data === 'string' || typeof data === 'number') && data === value || getValue(_this10.fields.value, data) === value;\n        });\n\n        if (!isExist) {\n          this.addItem(this.itemData);\n        }\n      }\n    }\n  }, {\n    key: \"updateActionCompleteData\",\n    value: function updateActionCompleteData(li, item, index) {\n      var _this11 = this;\n\n      if (this.getModuleName() !== 'autocomplete' && this.actionCompleteData.ulElement) {\n        if (this.itemTemplate && this.element.tagName === 'EJS-COMBOBOX' && this.allowFiltering) {\n          setTimeout(function () {\n            _this11.actionCompleteDataUpdate(li, item, index);\n          }, 0);\n        } else {\n          this.actionCompleteDataUpdate(li, item, index);\n        }\n      }\n    }\n  }, {\n    key: \"actionCompleteDataUpdate\",\n    value: function actionCompleteDataUpdate(li, item, index) {\n      if (index != null) {\n        this.actionCompleteData.ulElement.insertBefore(li.cloneNode(true), this.actionCompleteData.ulElement.childNodes[index]);\n      } else {\n        this.actionCompleteData.ulElement.appendChild(li.cloneNode(true));\n      }\n\n      if (this.isFiltering() && this.actionCompleteData.list.indexOf(item) < 0) {\n        this.actionCompleteData.list.push(item);\n      }\n    }\n  }, {\n    key: \"focusIndexItem\",\n    value: function focusIndexItem() {\n      var value = this.getItemData().value;\n      this.activeIndex = this.getIndexByValue(value);\n      var element = this.findListElement(this.list, 'li', 'data-value', value);\n      this.selectedLI = element;\n      this.activeItem(element);\n      this.removeFocus();\n    }\n  }, {\n    key: \"updateSelection\",\n    value: function updateSelection() {\n      var selectedItem = this.list.querySelector('.' + dropDownBaseClasses.selected);\n\n      if (selectedItem) {\n        this.setProperties({\n          'index': this.getIndexByValue(selectedItem.getAttribute('data-value'))\n        });\n        this.activeIndex = this.index;\n      } else {\n        this.removeFocus();\n        this.list.querySelector('.' + dropDownBaseClasses.li).classList.add(dropDownListClasses.focus);\n      }\n    }\n  }, {\n    key: \"removeFocus\",\n    value: function removeFocus() {\n      var highlightedItem = this.list.querySelectorAll('.' + dropDownListClasses.focus);\n\n      if (highlightedItem && highlightedItem.length) {\n        removeClass(highlightedItem, dropDownListClasses.focus);\n      }\n    }\n  }, {\n    key: \"renderPopup\",\n    value: function renderPopup() {\n      var _this12 = this;\n\n      if (this.popupObj && document.body.contains(this.popupObj.element)) {\n        this.refreshPopup();\n        return;\n      }\n\n      var args = {\n        cancel: false\n      };\n      this.trigger('beforeOpen', args, function (args) {\n        if (!args.cancel) {\n          var popupEle = _this12.createElement('div', {\n            id: _this12.element.id + '_popup',\n            className: 'e-ddl e-popup ' + (_this12.cssClass != null ? _this12.cssClass : '')\n          });\n\n          var searchBox = _this12.setSearchBox(popupEle);\n\n          _this12.listHeight = formatUnit(_this12.popupHeight);\n\n          if (_this12.headerTemplate) {\n            _this12.setHeaderTemplate(popupEle);\n          }\n\n          append([_this12.list], popupEle);\n\n          if (_this12.footerTemplate) {\n            _this12.setFooterTemplate(popupEle);\n          }\n\n          document.body.appendChild(popupEle);\n          popupEle.style.visibility = 'hidden';\n\n          if (_this12.popupHeight !== 'auto') {\n            _this12.searchBoxHeight = 0;\n\n            if (!isNullOrUndefined(searchBox.container)) {\n              _this12.searchBoxHeight = searchBox.container.parentElement.getBoundingClientRect().height;\n              _this12.listHeight = (parseInt(_this12.listHeight, 10) - _this12.searchBoxHeight).toString() + 'px';\n            }\n\n            if (_this12.headerTemplate) {\n              _this12.header = _this12.header ? _this12.header : popupEle.querySelector('.e-ddl-header');\n              var height = Math.round(_this12.header.getBoundingClientRect().height);\n              _this12.listHeight = (parseInt(_this12.listHeight, 10) - (height + _this12.searchBoxHeight)).toString() + 'px';\n            }\n\n            if (_this12.footerTemplate) {\n              _this12.footer = _this12.footer ? _this12.footer : popupEle.querySelector('.e-ddl-footer');\n\n              var _height = Math.round(_this12.footer.getBoundingClientRect().height);\n\n              _this12.listHeight = (parseInt(_this12.listHeight, 10) - (_height + _this12.searchBoxHeight)).toString() + 'px';\n            }\n\n            _this12.list.style.maxHeight = (parseInt(_this12.listHeight, 10) - 2).toString() + 'px'; // due to box-sizing property\n\n            popupEle.style.maxHeight = formatUnit(_this12.popupHeight);\n          } else {\n            popupEle.style.height = 'auto';\n          }\n\n          var offsetValue = 0;\n          var left;\n\n          if (!isNullOrUndefined(_this12.selectedLI) && !isNullOrUndefined(_this12.activeIndex) && _this12.activeIndex >= 0) {\n            _this12.setScrollPosition();\n          } else {\n            _this12.list.scrollTop = 0;\n          }\n\n          if (Browser.isDevice && !_this12.allowFiltering && (_this12.getModuleName() === 'dropdownlist' || _this12.isDropDownClick && _this12.getModuleName() === 'combobox')) {\n            offsetValue = _this12.getOffsetValue(popupEle);\n            var firstItem = _this12.isEmptyList() ? _this12.list : _this12.liCollections[0];\n            left = -(parseInt(getComputedStyle(firstItem).textIndent, 10) - parseInt(getComputedStyle(_this12.inputElement).paddingLeft, 10) + parseInt(getComputedStyle(_this12.inputElement.parentElement).borderLeftWidth, 10));\n          }\n\n          _this12.getFocusElement();\n\n          _this12.createPopup(popupEle, offsetValue, left);\n\n          _this12.checkCollision(popupEle);\n\n          if (Browser.isDevice) {\n            _this12.popupObj.element.classList.add(dropDownListClasses.device);\n\n            if (_this12.getModuleName() === 'dropdownlist' || _this12.getModuleName() === 'combobox' && !_this12.allowFiltering && _this12.isDropDownClick) {\n              _this12.popupObj.collision = {\n                X: 'fit',\n                Y: 'fit'\n              };\n            }\n\n            if (_this12.isFilterLayout()) {\n              _this12.popupObj.element.classList.add(dropDownListClasses.mobileFilter);\n\n              _this12.popupObj.position = {\n                X: 0,\n                Y: 0\n              };\n\n              _this12.popupObj.dataBind();\n\n              attributes(_this12.popupObj.element, {\n                style: 'left:0px;right:0px;top:0px;bottom:0px;'\n              });\n              addClass([document.body, _this12.popupObj.element], dropDownListClasses.popupFullScreen);\n\n              _this12.setSearchBoxPosition();\n\n              _this12.backIconElement = searchBox.container.querySelector('.e-back-icon');\n              _this12.clearIconElement = searchBox.container.querySelector('.' + dropDownListClasses.clearIcon);\n              EventHandler.add(_this12.backIconElement, 'click', _this12.clickOnBackIcon, _this12);\n              EventHandler.add(_this12.clearIconElement, 'click', _this12.clearText, _this12);\n            }\n          }\n\n          popupEle.style.visibility = 'visible';\n          addClass([popupEle], 'e-popup-close');\n\n          var scrollParentElements = _this12.popupObj.getScrollableParent(_this12.inputWrapper.container);\n\n          var _iterator6 = _createForOfIteratorHelper(scrollParentElements),\n              _step6;\n\n          try {\n            for (_iterator6.s(); !(_step6 = _iterator6.n()).done;) {\n              var element = _step6.value;\n              EventHandler.add(element, 'scroll', _this12.scrollHandler, _this12);\n            }\n          } catch (err) {\n            _iterator6.e(err);\n          } finally {\n            _iterator6.f();\n          }\n\n          if (Browser.isDevice && _this12.isFilterLayout()) {\n            EventHandler.add(_this12.list, 'scroll', _this12.listScroll, _this12);\n          }\n\n          if (!isNullOrUndefined(_this12.list)) {\n            _this12.unWireListEvents();\n\n            _this12.wireListEvents();\n          }\n\n          attributes(_this12.targetElement(), {\n            'aria-expanded': 'true'\n          });\n          var inputParent = _this12.isFiltering() ? _this12.filterInput.parentElement : _this12.inputWrapper.container;\n          addClass([inputParent], [dropDownListClasses.inputFocus]);\n          var animModel = {\n            name: 'FadeIn',\n            duration: 100\n          };\n          _this12.beforePopupOpen = true;\n          var popupInstance = _this12.popupObj;\n          var eventArgs = {\n            popup: popupInstance,\n            cancel: false,\n            animation: animModel\n          };\n\n          _this12.trigger('open', eventArgs, function (eventArgs) {\n            if (!eventArgs.cancel) {\n              addClass([_this12.inputWrapper.container], [dropDownListClasses.iconAnimation]);\n\n              _this12.renderReactTemplates();\n\n              _this12.popupObj.show(new Animation(eventArgs.animation), _this12.zIndex === 1000 ? _this12.element : null);\n            } else {\n              _this12.beforePopupOpen = false;\n\n              _this12.destroyPopup();\n            }\n          });\n        } else {\n          _this12.beforePopupOpen = false;\n        }\n      });\n    }\n  }, {\n    key: \"checkCollision\",\n    value: function checkCollision(popupEle) {\n      if (!Browser.isDevice || Browser.isDevice && !(this.getModuleName() === 'dropdownlist' || this.isDropDownClick)) {\n        var collision = isCollide(popupEle);\n\n        if (collision.length > 0) {\n          popupEle.style.marginTop = -parseInt(getComputedStyle(popupEle).marginTop, 10) + 'px';\n        }\n\n        this.popupObj.resolveCollision();\n      }\n    }\n  }, {\n    key: \"getOffsetValue\",\n    value: function getOffsetValue(popupEle) {\n      var popupStyles = getComputedStyle(popupEle);\n      var borderTop = parseInt(popupStyles.borderTopWidth, 10);\n      var borderBottom = parseInt(popupStyles.borderBottomWidth, 10);\n      return this.setPopupPosition(borderTop + borderBottom);\n    }\n  }, {\n    key: \"createPopup\",\n    value: function createPopup(element, offsetValue, left) {\n      var _this13 = this;\n\n      this.popupObj = new Popup(element, {\n        width: this.setWidth(),\n        targetType: 'relative',\n        relateTo: this.inputWrapper.container,\n        collision: {\n          X: 'flip',\n          Y: 'flip'\n        },\n        offsetY: offsetValue,\n        enableRtl: this.enableRtl,\n        offsetX: left,\n        position: {\n          X: 'left',\n          Y: 'bottom'\n        },\n        zIndex: this.zIndex,\n        close: function close() {\n          if (!_this13.isDocumentClick) {\n            _this13.focusDropDown();\n          } // eslint-disable-next-line\n\n\n          if (_this13.isReact) {\n            _this13.clearTemplate(['headerTemplate', 'footerTemplate']);\n          }\n\n          var isResetItem = _this13.getModuleName() === 'autocomplete' ? true : false;\n          _this13.isNotSearchList = false;\n          _this13.isDocumentClick = false;\n\n          _this13.destroyPopup();\n\n          if (_this13.isFiltering() && _this13.actionCompleteData.list && _this13.actionCompleteData.list[0]) {\n            _this13.isActive = true;\n\n            _this13.onActionComplete(_this13.actionCompleteData.ulElement, _this13.actionCompleteData.list, null, true);\n          }\n        },\n        open: function open() {\n          EventHandler.add(document, 'mousedown', _this13.onDocumentClick, _this13);\n          _this13.isPopupOpen = true;\n\n          var actionList = _this13.actionCompleteData && _this13.actionCompleteData.ulElement && _this13.actionCompleteData.ulElement.querySelector('li');\n\n          var ulElement = _this13.list.querySelector('ul li');\n\n          if (_this13.isFiltering() && _this13.itemTemplate && _this13.element.tagName === _this13.getNgDirective() && actionList && ulElement && actionList.textContent !== ulElement.textContent && _this13.element.tagName !== 'EJS-COMBOBOX') {\n            _this13.cloneElements();\n          }\n\n          if (_this13.isFilterLayout()) {\n            removeClass([_this13.inputWrapper.container], [dropDownListClasses.inputFocus]);\n            _this13.isFilterFocus = true;\n\n            _this13.filterInput.focus();\n\n            if (_this13.inputWrapper.clearButton) {\n              addClass([_this13.inputWrapper.clearButton], dropDownListClasses.clearIconHide);\n            }\n          }\n\n          _this13.activeStateChange();\n        },\n        targetExitViewport: function targetExitViewport() {\n          if (!Browser.isDevice) {\n            _this13.hidePopup();\n          }\n        }\n      });\n    }\n  }, {\n    key: \"isEmptyList\",\n    value: function isEmptyList() {\n      return !isNullOrUndefined(this.liCollections) && this.liCollections.length === 0;\n    }\n  }, {\n    key: \"getFocusElement\",\n    value: function getFocusElement() {// combo-box used this method\n    }\n  }, {\n    key: \"isFilterLayout\",\n    value: function isFilterLayout() {\n      return this.getModuleName() === 'dropdownlist' && this.allowFiltering;\n    }\n  }, {\n    key: \"scrollHandler\",\n    value: function scrollHandler() {\n      if (Browser.isDevice && (this.getModuleName() === 'dropdownlist' && !this.isFilterLayout() || this.getModuleName() === 'combobox' && !this.allowFiltering && this.isDropDownClick)) {\n        this.hidePopup();\n      }\n    }\n  }, {\n    key: \"setSearchBoxPosition\",\n    value: function setSearchBoxPosition() {\n      var searchBoxHeight = this.filterInput.parentElement.getBoundingClientRect().height;\n      this.popupObj.element.style.maxHeight = '100%';\n      this.popupObj.element.style.width = '100%';\n      this.list.style.maxHeight = window.innerHeight - searchBoxHeight + 'px';\n      this.list.style.height = window.innerHeight - searchBoxHeight + 'px';\n      var clearElement = this.filterInput.parentElement.querySelector('.' + dropDownListClasses.clearIcon);\n      detach(this.filterInput);\n      clearElement.parentElement.insertBefore(this.filterInput, clearElement);\n    }\n  }, {\n    key: \"setPopupPosition\",\n    value: function setPopupPosition(border) {\n      var offsetValue;\n      var popupOffset = border;\n      var selectedLI = this.list.querySelector('.' + dropDownListClasses.focus) || this.selectedLI;\n      var firstItem = this.isEmptyList() ? this.list : this.liCollections[0];\n      var lastItem = this.isEmptyList() ? this.list : this.liCollections[this.getItems().length - 1];\n      var liHeight = firstItem.getBoundingClientRect().height;\n      var listHeight = this.list.offsetHeight / 2;\n      var height = isNullOrUndefined(selectedLI) ? firstItem.offsetTop : selectedLI.offsetTop;\n      var lastItemOffsetValue = lastItem.offsetTop;\n\n      if (lastItemOffsetValue - listHeight < height && !isNullOrUndefined(this.liCollections) && this.liCollections.length > 0 && !isNullOrUndefined(selectedLI)) {\n        var count = this.list.offsetHeight / liHeight;\n        var paddingBottom = parseInt(getComputedStyle(this.list).paddingBottom, 10);\n        offsetValue = (count - (this.liCollections.length - this.activeIndex)) * liHeight - popupOffset + paddingBottom;\n        this.list.scrollTop = selectedLI.offsetTop;\n      } else if (height > listHeight) {\n        offsetValue = listHeight - liHeight / 2;\n        this.list.scrollTop = height - listHeight + liHeight / 2;\n      } else {\n        offsetValue = height;\n      }\n\n      var inputHeight = this.inputWrapper.container.offsetHeight;\n      offsetValue = offsetValue + liHeight + popupOffset - (liHeight - inputHeight) / 2;\n      return -offsetValue;\n    }\n  }, {\n    key: \"setWidth\",\n    value: function setWidth() {\n      var width = formatUnit(this.popupWidth);\n\n      if (width.indexOf('%') > -1) {\n        var inputWidth = this.inputWrapper.container.offsetWidth * parseFloat(width) / 100;\n        width = inputWidth.toString() + 'px';\n      }\n\n      if (Browser.isDevice && !this.allowFiltering && (this.getModuleName() === 'dropdownlist' || this.isDropDownClick && this.getModuleName() === 'combobox')) {\n        var firstItem = this.isEmptyList() ? this.list : this.liCollections[0];\n        width = parseInt(width, 10) + (parseInt(getComputedStyle(firstItem).textIndent, 10) - parseInt(getComputedStyle(this.inputElement).paddingLeft, 10) + parseInt(getComputedStyle(this.inputElement.parentElement).borderLeftWidth, 10)) * 2 + 'px';\n      }\n\n      return width;\n    }\n  }, {\n    key: \"scrollBottom\",\n    value: function scrollBottom(isInitial) {\n      if (!isNullOrUndefined(this.selectedLI)) {\n        var currentOffset = this.list.offsetHeight;\n        var nextBottom = this.selectedLI.offsetTop + this.selectedLI.offsetHeight - this.list.scrollTop;\n        var nextOffset = this.list.scrollTop + nextBottom - currentOffset;\n        nextOffset = isInitial ? nextOffset + parseInt(getComputedStyle(this.list).paddingTop, 10) * 2 : nextOffset;\n        var boxRange = this.selectedLI.offsetTop + this.selectedLI.offsetHeight - this.list.scrollTop;\n        boxRange = this.fields.groupBy && !isNullOrUndefined(this.fixedHeaderElement) ? boxRange - this.fixedHeaderElement.offsetHeight : boxRange;\n\n        if (this.activeIndex === 0) {\n          this.list.scrollTop = 0;\n        } else if (nextBottom > currentOffset || !(boxRange > 0 && this.list.offsetHeight > boxRange)) {\n          this.list.scrollTop = nextOffset;\n        }\n      }\n    }\n  }, {\n    key: \"scrollTop\",\n    value: function scrollTop() {\n      if (!isNullOrUndefined(this.selectedLI)) {\n        var nextOffset = this.selectedLI.offsetTop - this.list.scrollTop;\n        nextOffset = this.fields.groupBy && !isNullOrUndefined(this.fixedHeaderElement) ? nextOffset - this.fixedHeaderElement.offsetHeight : nextOffset;\n        var boxRange = this.selectedLI.offsetTop + this.selectedLI.offsetHeight - this.list.scrollTop;\n\n        if (this.activeIndex === 0) {\n          this.list.scrollTop = 0;\n        } else if (nextOffset < 0) {\n          this.list.scrollTop = this.list.scrollTop + nextOffset;\n        } else if (!(boxRange > 0 && this.list.offsetHeight > boxRange)) {\n          this.list.scrollTop = this.selectedLI.offsetTop - (this.fields.groupBy && !isNullOrUndefined(this.fixedHeaderElement) ? this.fixedHeaderElement.offsetHeight : 0);\n        }\n      }\n    }\n  }, {\n    key: \"isEditTextBox\",\n    value: function isEditTextBox() {\n      return false;\n    }\n  }, {\n    key: \"isFiltering\",\n    value: function isFiltering() {\n      return this.allowFiltering;\n    }\n  }, {\n    key: \"isPopupButton\",\n    value: function isPopupButton() {\n      return true;\n    }\n  }, {\n    key: \"setScrollPosition\",\n    value: function setScrollPosition(e) {\n      if (!isNullOrUndefined(e)) {\n        switch (e.action) {\n          case 'pageDown':\n          case 'down':\n          case 'end':\n            this.scrollBottom();\n            break;\n\n          default:\n            this.scrollTop();\n            break;\n        }\n      } else {\n        this.scrollBottom(true);\n      }\n    }\n  }, {\n    key: \"clearText\",\n    value: function clearText() {\n      this.filterInput.value = this.typedString = '';\n      this.searchLists(null);\n    }\n  }, {\n    key: \"listScroll\",\n    value: function listScroll() {\n      this.filterInput.blur();\n    }\n  }, {\n    key: \"setEleWidth\",\n    value: function setEleWidth(width) {\n      if (!isNullOrUndefined(width)) {\n        if (typeof width === 'number') {\n          this.inputWrapper.container.style.width = formatUnit(width);\n        } else if (typeof width === 'string') {\n          this.inputWrapper.container.style.width = width.match(/px|%|em/) ? width : formatUnit(width);\n        }\n      }\n    }\n  }, {\n    key: \"closePopup\",\n    value: function closePopup(delay) {\n      var _this14 = this;\n\n      this.isTyped = false;\n\n      if (!(this.popupObj && document.body.contains(this.popupObj.element) && this.beforePopupOpen)) {\n        return;\n      }\n\n      EventHandler.remove(document, 'mousedown', this.onDocumentClick);\n      this.isActive = false;\n      this.filterInputObj = null;\n      this.isDropDownClick = false;\n      this.preventAutoFill = false;\n      var scrollableParentElements = this.popupObj.getScrollableParent(this.inputWrapper.container);\n\n      var _iterator7 = _createForOfIteratorHelper(scrollableParentElements),\n          _step7;\n\n      try {\n        for (_iterator7.s(); !(_step7 = _iterator7.n()).done;) {\n          var element = _step7.value;\n          EventHandler.remove(element, 'scroll', this.scrollHandler);\n        }\n      } catch (err) {\n        _iterator7.e(err);\n      } finally {\n        _iterator7.f();\n      }\n\n      if (Browser.isDevice && this.isFilterLayout()) {\n        removeClass([document.body, this.popupObj.element], dropDownListClasses.popupFullScreen);\n        EventHandler.remove(this.list, 'scroll', this.listScroll);\n      }\n\n      if (this.isFilterLayout()) {\n        if (!Browser.isDevice) {\n          this.searchKeyModule.destroy();\n\n          if (this.clearIconElement) {\n            EventHandler.remove(this.clearIconElement, 'click', this.clearText);\n          }\n        }\n\n        if (this.backIconElement) {\n          EventHandler.remove(this.backIconElement, 'click', this.clickOnBackIcon);\n          EventHandler.remove(this.clearIconElement, 'click', this.clearText);\n        }\n\n        EventHandler.remove(this.filterInput, 'input', this.onInput);\n        EventHandler.remove(this.filterInput, 'keyup', this.onFilterUp);\n        EventHandler.remove(this.filterInput, 'keydown', this.onFilterDown);\n        EventHandler.remove(this.filterInput, 'blur', this.onBlurHandler);\n        EventHandler.remove(this.filterInput, 'paste', this.pasteHandler);\n        this.filterInput = null;\n      }\n\n      attributes(this.targetElement(), {\n        'aria-expanded': 'false',\n        'aria-activedescendant': null\n      });\n      this.inputWrapper.container.classList.remove(dropDownListClasses.iconAnimation);\n\n      if (this.isFiltering()) {\n        this.actionCompleteData.isUpdated = false;\n      }\n\n      this.beforePopupOpen = false;\n      var animModel = {\n        name: 'FadeOut',\n        duration: 100,\n        delay: delay ? delay : 0\n      };\n      var popupInstance = this.popupObj;\n      var eventArgs = {\n        popup: popupInstance,\n        cancel: false,\n        animation: animModel\n      };\n      this.trigger('close', eventArgs, function (eventArgs) {\n        if (!isNullOrUndefined(_this14.popupObj) && !isNullOrUndefined(_this14.popupObj.element.querySelector('.e-fixed-head'))) {\n          var fixedHeader = _this14.popupObj.element.querySelector('.e-fixed-head');\n\n          fixedHeader.parentNode.removeChild(fixedHeader);\n          _this14.fixedHeaderElement = null;\n        }\n\n        if (!eventArgs.cancel) {\n          if (_this14.getModuleName() === 'autocomplete') {\n            _this14.rippleFun();\n          }\n\n          if (_this14.isPopupOpen) {\n            _this14.popupObj.hide(new Animation(eventArgs.animation));\n          } else {\n            _this14.destroyPopup();\n          }\n        }\n      });\n    }\n  }, {\n    key: \"destroyPopup\",\n    value: function destroyPopup() {\n      this.isPopupOpen = false;\n      this.isFilterFocus = false;\n      this.popupObj.destroy();\n      detach(this.popupObj.element);\n    }\n  }, {\n    key: \"clickOnBackIcon\",\n    value: function clickOnBackIcon() {\n      this.hidePopup();\n      this.focusIn();\n    }\n    /**\n     * To Initialize the control rendering\n     *\n     * @private\n     * @returns {void}\n     */\n\n  }, {\n    key: \"render\",\n    value: function render() {\n      if (this.element.tagName === 'INPUT') {\n        this.inputElement = this.element;\n\n        if (isNullOrUndefined(this.inputElement.getAttribute('role'))) {\n          this.inputElement.setAttribute('role', 'textbox');\n        }\n\n        if (isNullOrUndefined(this.inputElement.getAttribute('type'))) {\n          this.inputElement.setAttribute('type', 'text');\n        }\n      } else {\n        this.inputElement = this.createElement('input', {\n          attrs: {\n            role: 'textbox',\n            type: 'text'\n          }\n        });\n\n        if (this.element.tagName !== this.getNgDirective()) {\n          this.element.style.display = 'none';\n        }\n\n        this.element.parentElement.insertBefore(this.inputElement, this.element);\n        this.preventTabIndex(this.inputElement);\n      }\n\n      var updatedCssClassValues = this.cssClass;\n\n      if (!isNullOrUndefined(this.cssClass) && this.cssClass !== '') {\n        updatedCssClassValues = this.cssClass.replace(/\\s+/g, ' ').trim();\n      }\n\n      this.inputWrapper = Input.createInput({\n        element: this.inputElement,\n        buttons: this.isPopupButton() ? [dropDownListClasses.icon] : null,\n        floatLabelType: this.floatLabelType,\n        properties: {\n          readonly: this.getModuleName() === 'dropdownlist' ? true : this.readonly,\n          placeholder: this.placeholder,\n          cssClass: updatedCssClassValues,\n          enabled: this.enabled,\n          enableRtl: this.enableRtl,\n          showClearButton: this.showClearButton\n        }\n      }, this.createElement);\n\n      if (this.element.tagName === this.getNgDirective()) {\n        this.element.appendChild(this.inputWrapper.container);\n      } else {\n        this.inputElement.parentElement.insertBefore(this.element, this.inputElement);\n      }\n\n      this.hiddenElement = this.createElement('select', {\n        attrs: {\n          'aria-hidden': 'true',\n          'tabindex': '-1',\n          'class': dropDownListClasses.hiddenElement\n        }\n      });\n      prepend([this.hiddenElement], this.inputWrapper.container);\n      this.validationAttribute(this.element, this.hiddenElement);\n      this.setReadOnly();\n      this.setFields();\n      this.inputWrapper.container.style.width = formatUnit(this.width);\n      this.inputWrapper.container.classList.add('e-ddl');\n      this.wireEvent();\n      this.tabIndex = this.element.hasAttribute('tabindex') ? this.element.getAttribute('tabindex') : '0';\n      this.element.removeAttribute('tabindex');\n      var id = this.element.getAttribute('id') ? this.element.getAttribute('id') : getUniqueID('ej2_dropdownlist');\n      this.element.id = id;\n      this.hiddenElement.id = id + '_hidden';\n      this.targetElement().setAttribute('tabindex', this.tabIndex);\n      attributes(this.targetElement(), this.getAriaAttributes());\n      this.updateDataAttribute(this.htmlAttributes);\n      this.setHTMLAttributes();\n\n      if (this.value !== null || this.activeIndex !== null || this.text !== null) {\n        this.initValue();\n      } else if (this.element.tagName === 'SELECT' && this.element.options[0]) {\n        var selectElement = this.element;\n        this.value = selectElement.options[selectElement.selectedIndex].value;\n        this.text = isNullOrUndefined(this.value) ? null : selectElement.options[selectElement.selectedIndex].textContent;\n        this.initValue();\n      }\n\n      this.preventTabIndex(this.element);\n\n      if (!this.enabled) {\n        this.targetElement().tabIndex = -1;\n      }\n\n      this.initial = false;\n      this.element.style.opacity = '';\n\n      this.inputElement.onselect = function (e) {\n        e.stopImmediatePropagation();\n      };\n\n      this.inputElement.onchange = function (e) {\n        e.stopImmediatePropagation();\n      };\n\n      if (this.element.hasAttribute('autofocus')) {\n        this.focusIn();\n      }\n\n      if (!isNullOrUndefined(this.text)) {\n        this.inputElement.setAttribute('value', this.text);\n      }\n\n      if (this.element.hasAttribute('data-val')) {\n        this.element.setAttribute('data-val', 'false');\n      }\n\n      this.renderComplete();\n    }\n  }, {\n    key: \"setFooterTemplate\",\n    value: function setFooterTemplate(popupEle) {\n      var compiledString;\n\n      if (this.footer) {\n        this.footer.innerHTML = '';\n      } else {\n        this.footer = this.createElement('div');\n        addClass([this.footer], dropDownListClasses.footer);\n      }\n\n      var footercheck = this.dropdownCompiler(this.footerTemplate);\n\n      if (footercheck) {\n        compiledString = compile(select(this.footerTemplate, document).innerHTML.trim());\n      } else {\n        compiledString = compile(this.footerTemplate);\n      } // eslint-disable-next-line @typescript-eslint/no-explicit-any\n\n\n      var footerCompTemp = compiledString({}, this, 'footerTemplate', this.footerTemplateId, this.isStringTemplate, null, this.footer);\n\n      if (footerCompTemp && footerCompTemp.length > 0) {\n        for (var i = 0; i < footerCompTemp.length; i++) {\n          this.footer.appendChild(footerCompTemp[i]);\n        }\n      }\n\n      append([this.footer], popupEle);\n    }\n  }, {\n    key: \"setHeaderTemplate\",\n    value: function setHeaderTemplate(popupEle) {\n      var compiledString;\n\n      if (this.header) {\n        this.header.innerHTML = '';\n      } else {\n        this.header = this.createElement('div');\n        addClass([this.header], dropDownListClasses.header);\n      }\n\n      var headercheck = this.dropdownCompiler(this.headerTemplate);\n\n      if (headercheck) {\n        compiledString = compile(select(this.headerTemplate, document).innerHTML.trim());\n      } else {\n        compiledString = compile(this.headerTemplate);\n      } // eslint-disable-next-line @typescript-eslint/no-explicit-any\n\n\n      var headerCompTemp = compiledString({}, this, 'headerTemplate', this.headerTemplateId, this.isStringTemplate, null, this.header);\n\n      if (headerCompTemp && headerCompTemp.length) {\n        for (var i = 0; i < headerCompTemp.length; i++) {\n          this.header.appendChild(headerCompTemp[i]);\n        }\n      }\n\n      var contentEle = popupEle.querySelector('div.e-content');\n      popupEle.insertBefore(this.header, contentEle);\n    }\n  }, {\n    key: \"setOldText\",\n    value: function setOldText(text) {\n      this.text = text;\n    }\n  }, {\n    key: \"setOldValue\",\n    value: function setOldValue(value) {\n      this.value = value;\n    }\n  }, {\n    key: \"refreshPopup\",\n    value: function refreshPopup() {\n      if (!isNullOrUndefined(this.popupObj) && document.body.contains(this.popupObj.element) && (this.allowFiltering && !(Browser.isDevice && this.isFilterLayout()) || this.getModuleName() === 'autocomplete')) {\n        removeClass([this.popupObj.element], 'e-popup-close');\n        this.popupObj.refreshPosition(this.inputWrapper.container);\n        this.popupObj.resolveCollision();\n      }\n    }\n  }, {\n    key: \"checkData\",\n    value: function checkData(newProp) {\n      if (newProp.dataSource && !isNullOrUndefined(Object.keys(newProp.dataSource)) && this.itemTemplate && this.allowFiltering && !(this.isListSearched && newProp.dataSource instanceof DataManager)) {\n        this.list = null;\n        this.actionCompleteData = {\n          ulElement: null,\n          list: null,\n          isUpdated: false\n        };\n      }\n\n      this.isListSearched = false;\n      var isChangeValue = Object.keys(newProp).indexOf('value') !== -1 && isNullOrUndefined(newProp.value);\n      var isChangeText = Object.keys(newProp).indexOf('text') !== -1 && isNullOrUndefined(newProp.text);\n\n      if (this.getModuleName() !== 'autocomplete' && this.allowFiltering && (isChangeValue || isChangeText)) {\n        this.itemData = null;\n      }\n\n      if (this.allowFiltering && newProp.dataSource && !isNullOrUndefined(Object.keys(newProp.dataSource))) {\n        this.actionCompleteData = {\n          ulElement: null,\n          list: null,\n          isUpdated: false\n        };\n        this.actionData = this.actionCompleteData;\n      } else if (this.allowFiltering && newProp.query && !isNullOrUndefined(Object.keys(newProp.query))) {\n        this.actionCompleteData = this.getModuleName() === 'combobox' ? {\n          ulElement: null,\n          list: null,\n          isUpdated: false\n        } : this.actionCompleteData;\n        this.actionData = this.actionCompleteData;\n      }\n    }\n  }, {\n    key: \"updateDataSource\",\n    value: function updateDataSource(props) {\n      if (this.inputElement.value !== '' || !isNullOrUndefined(props) && (isNullOrUndefined(props.dataSource) || !(props.dataSource instanceof DataManager) && props.dataSource.length === 0)) {\n        this.clearAll(null, props);\n      }\n\n      if (this.fields.groupBy && props.fields && !this.isGroupChecking) {\n        EventHandler.remove(this.list, 'scroll', this.setFloatingHeader);\n        EventHandler.add(this.list, 'scroll', this.setFloatingHeader, this);\n      }\n\n      if (!(!isNullOrUndefined(props) && (isNullOrUndefined(props.dataSource) || !(props.dataSource instanceof DataManager) && props.dataSource.length === 0)) || !(props.dataSource === [])) {\n        this.typedString = '';\n        this.resetList(this.dataSource);\n      }\n\n      if (!this.isCustomFilter && !this.isFilterFocus && document.activeElement !== this.filterInput) {\n        this.checkCustomValue();\n      }\n    }\n  }, {\n    key: \"checkCustomValue\",\n    value: function checkCustomValue() {\n      this.itemData = this.getDataByValue(this.value);\n      var dataItem = this.getItemData();\n      this.setProperties({\n        'value': dataItem.value,\n        'text': dataItem.text\n      });\n    }\n  }, {\n    key: \"updateInputFields\",\n    value: function updateInputFields() {\n      if (this.getModuleName() === 'dropdownlist') {\n        Input.setValue(this.text, this.inputElement, this.floatLabelType, this.showClearButton);\n      }\n    }\n    /**\n     * Dynamically change the value of properties.\n     *\n     * @private\n     * @param {DropDownListModel} newProp - Returns the dynamic property value of the component.\n     * @param {DropDownListModel} oldProp - Returns the previous previous value of the component.\n     * @returns {void}\n     */\n\n  }, {\n    key: \"onPropertyChanged\",\n    value: function onPropertyChanged(newProp, oldProp) {\n      if (this.getModuleName() === 'dropdownlist') {\n        this.checkData(newProp);\n        this.setUpdateInitial(['fields', 'query', 'dataSource'], newProp);\n      }\n\n      for (var _i5 = 0, _Object$keys3 = Object.keys(newProp); _i5 < _Object$keys3.length; _i5++) {\n        var prop = _Object$keys3[_i5];\n\n        switch (prop) {\n          case 'query':\n          case 'dataSource':\n            break;\n\n          case 'htmlAttributes':\n            this.setHTMLAttributes();\n            break;\n\n          case 'width':\n            this.setEleWidth(newProp.width);\n            break;\n\n          case 'placeholder':\n            Input.setPlaceholder(newProp.placeholder, this.inputElement);\n            break;\n\n          case 'filterBarPlaceholder':\n            if (this.filterInput) {\n              Input.setPlaceholder(newProp.filterBarPlaceholder, this.filterInput);\n            }\n\n            break;\n\n          case 'readonly':\n            if (this.getModuleName() !== 'dropdownlist') {\n              Input.setReadonly(newProp.readonly, this.inputElement);\n            }\n\n            this.setReadOnly();\n            break;\n\n          case 'cssClass':\n            this.setCssClass(newProp.cssClass, oldProp.cssClass);\n            break;\n\n          case 'enableRtl':\n            this.setEnableRtl();\n            break;\n\n          case 'enabled':\n            this.setEnable();\n            break;\n\n          case 'text':\n            if (newProp.text === null) {\n              this.clearAll();\n              break;\n            }\n\n            if (!this.list) {\n              if (this.dataSource instanceof DataManager) {\n                this.initRemoteRender = true;\n              }\n\n              this.renderList();\n            }\n\n            if (!this.initRemoteRender) {\n              var li = this.getElementByText(newProp.text);\n\n              if (!this.checkValidLi(li)) {\n                if (this.liCollections && this.liCollections.length === 100 && this.getModuleName() === 'autocomplete' && this.listData.length > 100) {\n                  this.setSelectionData(newProp.text, oldProp.text, 'text');\n                } else {\n                  this.setOldText(oldProp.text);\n                }\n              }\n\n              this.updateInputFields();\n            }\n\n            break;\n\n          case 'value':\n            if (newProp.value === null) {\n              this.clearAll();\n              break;\n            }\n\n            this.notify('beforeValueChange', {\n              newProp: newProp\n            }); // gird component value type change\n\n            if (!this.list) {\n              if (this.dataSource instanceof DataManager) {\n                this.initRemoteRender = true;\n              }\n\n              this.renderList();\n            }\n\n            if (!this.initRemoteRender) {\n              var item = this.getElementByValue(newProp.value);\n\n              if (!this.checkValidLi(item)) {\n                if (this.liCollections && this.liCollections.length === 100 && this.getModuleName() === 'autocomplete' && this.listData.length > 100) {\n                  this.setSelectionData(newProp.value, oldProp.value, 'value');\n                } else {\n                  this.setOldValue(oldProp.value);\n                }\n              }\n\n              this.updateInputFields();\n              this.preventChange = this.isAngular && this.preventChange ? !this.preventChange : this.preventChange;\n            }\n\n            break;\n\n          case 'index':\n            if (newProp.index === null) {\n              this.clearAll();\n              break;\n            }\n\n            if (!this.list) {\n              if (this.dataSource instanceof DataManager) {\n                this.initRemoteRender = true;\n              }\n\n              this.renderList();\n            }\n\n            if (!this.initRemoteRender && this.liCollections) {\n              var element = this.liCollections[newProp.index];\n\n              if (!this.checkValidLi(element)) {\n                if (this.liCollections && this.liCollections.length === 100 && this.getModuleName() === 'autocomplete' && this.listData.length > 100) {\n                  this.setSelectionData(newProp.index, oldProp.index, 'index');\n                } else {\n                  this.index = oldProp.index;\n                }\n              }\n\n              this.updateInputFields();\n            }\n\n            break;\n\n          case 'footerTemplate':\n            if (this.popupObj) {\n              this.setFooterTemplate(this.popupObj.element);\n            }\n\n            break;\n\n          case 'headerTemplate':\n            if (this.popupObj) {\n              this.setHeaderTemplate(this.popupObj.element);\n            }\n\n            break;\n\n          case 'valueTemplate':\n            if (!isNullOrUndefined(this.itemData) && this.valueTemplate != null) {\n              this.setValueTemplate();\n            }\n\n            break;\n\n          case 'allowFiltering':\n            if (this.allowFiltering) {\n              this.actionCompleteData = {\n                ulElement: this.ulElement,\n                list: this.listData,\n                isUpdated: true\n              };\n              this.actionData = this.actionCompleteData;\n              this.updateSelectElementData(this.allowFiltering);\n            }\n\n            break;\n\n          case 'floatLabelType':\n            Input.removeFloating(this.inputWrapper);\n            Input.addFloating(this.inputElement, newProp.floatLabelType, this.placeholder, this.createElement);\n            break;\n\n          case 'showClearButton':\n            Input.setClearButton(newProp.showClearButton, this.inputElement, this.inputWrapper, null, this.createElement);\n            this.bindClearEvent();\n            break;\n\n          default:\n            {\n              // eslint-disable-next-line max-len\n              var ddlProps = this.getPropObject(prop, newProp, oldProp);\n\n              _get(_getPrototypeOf(DropDownList.prototype), \"onPropertyChanged\", this).call(this, ddlProps.newProperty, ddlProps.oldProperty);\n            }\n            break;\n        }\n      }\n    }\n  }, {\n    key: \"checkValidLi\",\n    value: function checkValidLi(element) {\n      if (this.isValidLI(element)) {\n        this.setSelection(element, null);\n        return true;\n      }\n\n      return false;\n    }\n  }, {\n    key: \"setSelectionData\",\n    value: function setSelectionData(newProp, oldProp, prop) {\n      var _this15 = this;\n\n      var li;\n\n      this.updateListValues = function () {\n        if (prop === 'text') {\n          li = _this15.getElementByText(newProp);\n\n          if (!_this15.checkValidLi(li)) {\n            _this15.setOldText(oldProp);\n          }\n        } else if (prop === 'value') {\n          li = _this15.getElementByValue(newProp);\n\n          if (!_this15.checkValidLi(li)) {\n            _this15.setOldValue(oldProp);\n          }\n        } else if (prop === 'index') {\n          li = _this15.liCollections[newProp];\n\n          if (!_this15.checkValidLi(li)) {\n            _this15.index = oldProp;\n          }\n        }\n      };\n    }\n  }, {\n    key: \"setReadOnly\",\n    value: function setReadOnly() {\n      if (this.readonly) {\n        addClass([this.inputWrapper.container], ['e-readonly']);\n      } else {\n        removeClass([this.inputWrapper.container], ['e-readonly']);\n      }\n    }\n  }, {\n    key: \"setCssClass\",\n    value: function setCssClass(newClass, oldClass) {\n      if (!isNullOrUndefined(oldClass)) {\n        oldClass = oldClass.replace(/\\s+/g, ' ').trim();\n      }\n\n      if (!isNullOrUndefined(newClass)) {\n        newClass = newClass.replace(/\\s+/g, ' ').trim();\n      }\n\n      Input.setCssClass(newClass, [this.inputWrapper.container], oldClass);\n\n      if (this.popupObj) {\n        Input.setCssClass(newClass, [this.popupObj.element], oldClass);\n      }\n    }\n    /**\n     * Return the module name of this component.\n     *\n     * @private\n     * @returns {string} Return the module name of this component.\n     */\n\n  }, {\n    key: \"getModuleName\",\n    value: function getModuleName() {\n      return 'dropdownlist';\n    }\n    /**\n     * Opens the popup that displays the list of items.\n     *\n     * @returns {void}\n     */\n\n  }, {\n    key: \"showPopup\",\n    value: function showPopup() {\n      if (!this.enabled) {\n        return;\n      }\n\n      if (this.isFiltering() && this.dataSource instanceof DataManager && this.actionData.list != this.actionCompleteData.list && this.actionData.list && this.actionData.ulElement) {\n        this.actionCompleteData = this.actionData;\n        this.onActionComplete(this.actionCompleteData.ulElement, this.actionCompleteData.list, null, true);\n      }\n\n      if (this.beforePopupOpen) {\n        this.refreshPopup();\n        return;\n      }\n\n      this.beforePopupOpen = true;\n\n      if (this.isFiltering() && !this.isActive && this.actionCompleteData.list && this.actionCompleteData.list[0]) {\n        this.isActive = true;\n        this.onActionComplete(this.actionCompleteData.ulElement, this.actionCompleteData.list, null, true);\n      } else if (isNullOrUndefined(this.list) || !isUndefined(this.list) && (this.list.classList.contains(dropDownBaseClasses.noData) || this.list.querySelectorAll('.' + dropDownBaseClasses.li).length <= 0)) {\n        this.renderList();\n      }\n\n      this.invokeRenderPopup();\n    }\n  }, {\n    key: \"invokeRenderPopup\",\n    value: function invokeRenderPopup() {\n      if (Browser.isDevice && this.isFilterLayout()) {\n        // eslint-disable-next-line @typescript-eslint/no-this-alias\n        var proxy = this;\n\n        window.onpopstate = function () {\n          proxy.hidePopup();\n        };\n\n        history.pushState({}, '');\n      }\n\n      if (!isNullOrUndefined(this.list.children[0]) || this.list.classList.contains(dropDownBaseClasses.noData)) {\n        this.renderPopup();\n      }\n\n      attributes(this.targetElement(), {\n        'aria-activedescendant': this.selectedLI ? this.selectedLI.id : null\n      });\n    }\n  }, {\n    key: \"renderHightSearch\",\n    value: function renderHightSearch() {// update high light search\n    }\n    /* eslint-disable valid-jsdoc, jsdoc/require-param */\n\n    /**\n     * Hides the popup if it is in an open state.\n     *\n     * @returns {void}\n     */\n\n  }, {\n    key: \"hidePopup\",\n    value: function hidePopup(e) {\n      /* eslint-enable valid-jsdoc, jsdoc/require-param */\n      if (this.isEscapeKey && this.getModuleName() === 'dropdownlist') {\n        Input.setValue(this.text, this.inputElement, this.floatLabelType, this.showClearButton);\n        this.isEscapeKey = false;\n\n        if (!isNullOrUndefined(this.index)) {\n          var element = this.findListElement(this.ulElement, 'li', 'data-value', this.value);\n          this.selectedLI = this.liCollections[this.index] || element;\n\n          if (this.selectedLI) {\n            this.updateSelectedItem(this.selectedLI, null, true);\n\n            if (this.valueTemplate && this.itemData !== null) {\n              this.setValueTemplate();\n            }\n          }\n        } else {\n          this.resetSelection();\n        }\n      }\n\n      this.closePopup();\n      var dataItem = this.getItemData();\n      var isSelectVal = !isNullOrUndefined(this.selectedLI);\n\n      if (this.inputElement && this.inputElement.value.trim() === '' && !this.isInteracted && (this.isSelectCustom || isSelectVal && this.inputElement.value !== dataItem.text)) {\n        this.isSelectCustom = false;\n        this.clearAll(e);\n      }\n    }\n    /* eslint-disable valid-jsdoc, jsdoc/require-param */\n\n    /**\n     * Sets the focus on the component for interaction.\n     *\n     * @returns {void}\n     */\n\n  }, {\n    key: \"focusIn\",\n    value: function focusIn(e) {\n      if (!this.enabled) {\n        return;\n      }\n\n      if (this.targetElement().classList.contains(dropDownListClasses.disable)) {\n        return;\n      }\n\n      var isFocused = false;\n\n      if (this.preventFocus && Browser.isDevice) {\n        this.inputWrapper.container.tabIndex = 1;\n        this.inputWrapper.container.focus();\n        this.preventFocus = false;\n        isFocused = true;\n      }\n\n      if (!isFocused) {\n        this.targetElement().focus();\n      }\n\n      addClass([this.inputWrapper.container], [dropDownListClasses.inputFocus]);\n      this.onFocus(e);\n    }\n    /**\n     * Moves the focus from the component if the component is already focused.\n     *\n     * @returns {void}\n     */\n\n  }, {\n    key: \"focusOut\",\n    value: function focusOut(e) {\n      /* eslint-enable valid-jsdoc, jsdoc/require-param */\n      if (!this.enabled) {\n        return;\n      }\n\n      this.isTyped = true;\n      this.hidePopup(e);\n\n      if (this.targetElement()) {\n        this.targetElement().blur();\n      }\n\n      removeClass([this.inputWrapper.container], [dropDownListClasses.inputFocus]);\n    }\n    /**\n     * Removes the component from the DOM and detaches all its related event handlers. Also it removes the attributes and classes.\n     *\n     * @method destroy\n     * @returns {void}\n     */\n\n  }, {\n    key: \"destroy\",\n    value: function destroy() {\n      this.isActive = false;\n      resetIncrementalSearchValues(this.element.id); // eslint-disable-next-line @typescript-eslint/no-explicit-any\n\n      if (this.isReact) {\n        this.clearTemplate();\n      }\n\n      this.hidePopup();\n      this.unWireEvent();\n\n      if (this.list) {\n        this.unWireListEvents();\n      }\n\n      if (this.element && !this.element.classList.contains('e-' + this.getModuleName())) {\n        return;\n      }\n\n      if (this.inputElement) {\n        var attrArray = ['readonly', 'aria-disabled', 'aria-placeholder', 'placeholder', 'aria-owns', 'aria-labelledby', 'aria-haspopup', 'aria-expanded', 'aria-activedescendant', 'autocomplete', 'aria-readonly', 'autocorrect', 'autocapitalize', 'spellcheck', 'aria-autocomplete', 'aria-live', 'aria-describedby', 'aria-label'];\n\n        for (var i = 0; i < attrArray.length; i++) {\n          this.inputElement.removeAttribute(attrArray[i]);\n        }\n\n        this.inputElement.setAttribute('tabindex', this.tabIndex);\n        this.inputElement.classList.remove('e-input');\n        Input.setValue('', this.inputElement, this.floatLabelType, this.showClearButton);\n      }\n\n      this.element.style.display = 'block';\n\n      if (this.inputWrapper.container.parentElement.tagName === this.getNgDirective()) {\n        detach(this.inputWrapper.container);\n      } else {\n        this.inputWrapper.container.parentElement.insertBefore(this.element, this.inputWrapper.container);\n        detach(this.inputWrapper.container);\n      }\n\n      _get(_getPrototypeOf(DropDownList.prototype), \"destroy\", this).call(this);\n    }\n    /* eslint-disable valid-jsdoc, jsdoc/require-returns-description */\n\n    /**\n     * Gets all the list items bound on this component.\n     *\n     * @returns {Element[]}\n     */\n\n  }, {\n    key: \"getItems\",\n    value: function getItems() {\n      if (!this.list) {\n        if (this.dataSource instanceof DataManager) {\n          this.initRemoteRender = true;\n        }\n\n        this.renderList();\n      }\n\n      return this.ulElement ? _get(_getPrototypeOf(DropDownList.prototype), \"getItems\", this).call(this) : [];\n    }\n    /**\n     * Gets the data Object that matches the given value.\n     *\n     * @param { string | number } value - Specifies the value of the list item.\n     * @returns {Object}\n     */\n\n  }, {\n    key: \"getDataByValue\",\n    value: function getDataByValue(value) {\n      return _get(_getPrototypeOf(DropDownList.prototype), \"getDataByValue\", this).call(this, value);\n    }\n    /* eslint-enable valid-jsdoc, jsdoc/require-returns-description */\n\n    /**\n     * Allows you to clear the selected values from the component.\n     *\n     * @returns {void}\n     */\n\n  }, {\n    key: \"clear\",\n    value: function clear() {\n      this.value = null;\n    }\n  }]);\n\n  return DropDownList;\n}(DropDownBase);\n\n__decorate$1([Property(null)], DropDownList.prototype, \"cssClass\", void 0);\n\n__decorate$1([Property('100%')], DropDownList.prototype, \"width\", void 0);\n\n__decorate$1([Property('300px')], DropDownList.prototype, \"popupHeight\", void 0);\n\n__decorate$1([Property('100%')], DropDownList.prototype, \"popupWidth\", void 0);\n\n__decorate$1([Property(null)], DropDownList.prototype, \"placeholder\", void 0);\n\n__decorate$1([Property(null)], DropDownList.prototype, \"filterBarPlaceholder\", void 0);\n\n__decorate$1([Property({})], DropDownList.prototype, \"htmlAttributes\", void 0);\n\n__decorate$1([Property(null)], DropDownList.prototype, \"query\", void 0);\n\n__decorate$1([Property(null)], DropDownList.prototype, \"valueTemplate\", void 0);\n\n__decorate$1([Property(null)], DropDownList.prototype, \"headerTemplate\", void 0);\n\n__decorate$1([Property(null)], DropDownList.prototype, \"footerTemplate\", void 0);\n\n__decorate$1([Property(false)], DropDownList.prototype, \"allowFiltering\", void 0);\n\n__decorate$1([Property(false)], DropDownList.prototype, \"readonly\", void 0);\n\n__decorate$1([Property(null)], DropDownList.prototype, \"text\", void 0);\n\n__decorate$1([Property(null)], DropDownList.prototype, \"value\", void 0);\n\n__decorate$1([Property(null)], DropDownList.prototype, \"index\", void 0);\n\n__decorate$1([Property('Never')], DropDownList.prototype, \"floatLabelType\", void 0);\n\n__decorate$1([Property(false)], DropDownList.prototype, \"showClearButton\", void 0);\n\n__decorate$1([Event()], DropDownList.prototype, \"filtering\", void 0);\n\n__decorate$1([Event()], DropDownList.prototype, \"change\", void 0);\n\n__decorate$1([Event()], DropDownList.prototype, \"beforeOpen\", void 0);\n\n__decorate$1([Event()], DropDownList.prototype, \"open\", void 0);\n\n__decorate$1([Event()], DropDownList.prototype, \"close\", void 0);\n\n__decorate$1([Event()], DropDownList.prototype, \"blur\", void 0);\n\n__decorate$1([Event()], DropDownList.prototype, \"focus\", void 0);\n\nDropDownList = __decorate$1([NotifyPropertyChanges], DropDownList);\n/**\n * export all modules from current location\n */\n\nvar __decorate$2 = undefined && undefined.__decorate || function (decorators, target, key, desc) {\n  var c = arguments.length,\n      r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc,\n      d;\n  if (typeof Reflect === \"object\" && typeof Reflect.decorate === \"function\") r = Reflect.decorate(decorators, target, key, desc);else for (var i = decorators.length - 1; i >= 0; i--) {\n    if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;\n  }\n  return c > 3 && r && Object.defineProperty(target, key, r), r;\n};\n\nvar RTL = 'e-rtl';\nvar DROPDOWNTREE = 'e-ddt';\nvar HIDDENELEMENT = 'e-ddt-hidden';\nvar DROPDOWNICON = 'e-input-group-icon e-ddt-icon e-icons';\nvar SHOW_CHIP = 'e-show-chip';\nvar SHOW_CLEAR = 'e-show-clear';\nvar SHOW_DD_ICON = 'e-show-dd-icon';\nvar CHIP_INPUT = 'e-chip-input';\nvar INPUTFOCUS = 'e-input-focus';\nvar INPUTGROUP = 'e-input-group';\nvar ICONANIMATION = 'e-icon-anim';\nvar CLOSEICON_CLASS = 'e-clear-icon e-icons';\nvar CHIP_WRAPPER = 'e-chips-wrapper';\nvar CHIP_COLLECTION = 'e-chips-collection';\nvar CHIP = 'e-chips';\nvar CHIP_CONTENT = 'e-chipcontent';\nvar CHIP_CLOSE = 'e-chips-close';\nvar HIDEICON = 'e-icon-hide';\nvar DDTHIDEICON = 'e-ddt-icon-hide';\nvar POPUP_CLASS = 'e-ddt e-popup';\nvar PARENTITEM = 'e-list-parent';\nvar CONTENT = 'e-popup-content';\nvar DROPDOWN = 'e-dropdown';\nvar DISABLED = 'e-disabled';\nvar ICONS = 'e-icons';\nvar CHECKALLPARENT = 'e-selectall-parent';\nvar CHECKALLHIDE = 'e-hide-selectall';\nvar BIGGER = 'e-bigger';\nvar SMALL = 'e-small';\nvar ALLTEXT = 'e-all-text';\nvar CHECKBOXFRAME = 'e-frame';\nvar CHECK = 'e-check';\nvar CHECKBOXWRAP = 'e-checkbox-wrapper';\nvar FILTERWRAP = 'e-filter-wrap';\nvar DDTICON = 'e-ddt-icon';\nvar FOOTER = 'e-ddt-footer';\nvar HEADER = 'e-ddt-header';\nvar NODATACONTAINER = 'e-ddt-nodata';\nvar NODATA = 'e-no-data';\nvar HEADERTEMPLATE = 'HeaderTemplate';\nvar FOOTERTEMPLATE = 'FooterTemplate';\nvar NORECORDSTEMPLATE = 'NoRecordsTemplate';\nvar ACTIONFAILURETEMPLATE = 'ActionFailureTemplate';\nvar CUSTOMTEMPLATE = 'CustomTemplate';\nvar REMAIN_WRAPPER = 'e-remain';\nvar OVERFLOW_VIEW = 'e-overflow';\nvar SHOW_TEXT = 'e-show-text';\nvar TOTAL_COUNT_WRAPPER = 'e-total-count';\nvar REMAIN_COUNT = 'e-wrap-count';\n\nvar Fields = /*#__PURE__*/function (_ChildProperty2) {\n  _inherits(Fields, _ChildProperty2);\n\n  var _super4 = _createSuper(Fields);\n\n  function Fields() {\n    _classCallCheck(this, Fields);\n\n    return _super4.apply(this, arguments);\n  }\n\n  return Fields;\n}(ChildProperty);\n\n__decorate$2([Property('child')], Fields.prototype, \"child\", void 0);\n\n__decorate$2([Property([])], Fields.prototype, \"dataSource\", void 0);\n\n__decorate$2([Property('expanded')], Fields.prototype, \"expanded\", void 0);\n\n__decorate$2([Property('hasChildren')], Fields.prototype, \"hasChildren\", void 0);\n\n__decorate$2([Property('htmlAttributes')], Fields.prototype, \"htmlAttributes\", void 0);\n\n__decorate$2([Property('iconCss')], Fields.prototype, \"iconCss\", void 0);\n\n__decorate$2([Property('imageUrl')], Fields.prototype, \"imageUrl\", void 0);\n\n__decorate$2([Property('parentValue')], Fields.prototype, \"parentValue\", void 0);\n\n__decorate$2([Property(null)], Fields.prototype, \"query\", void 0);\n\n__decorate$2([Property('selected')], Fields.prototype, \"selected\", void 0);\n\n__decorate$2([Property(null)], Fields.prototype, \"tableName\", void 0);\n\n__decorate$2([Property('text')], Fields.prototype, \"text\", void 0);\n\n__decorate$2([Property('tooltip')], Fields.prototype, \"tooltip\", void 0);\n\n__decorate$2([Property('value')], Fields.prototype, \"value\", void 0);\n\nvar TreeSettings = /*#__PURE__*/function (_ChildProperty3) {\n  _inherits(TreeSettings, _ChildProperty3);\n\n  var _super5 = _createSuper(TreeSettings);\n\n  function TreeSettings() {\n    _classCallCheck(this, TreeSettings);\n\n    return _super5.apply(this, arguments);\n  }\n\n  return TreeSettings;\n}(ChildProperty);\n\n__decorate$2([Property(false)], TreeSettings.prototype, \"autoCheck\", void 0);\n\n__decorate$2([Property('Auto')], TreeSettings.prototype, \"expandOn\", void 0);\n\n__decorate$2([Property(false)], TreeSettings.prototype, \"loadOnDemand\", void 0);\n/**\n * The Dropdown Tree control allows you to select single or multiple values from hierarchical data in a tree-like structure.\n * It has several out-of-the-box features, such as data binding, check boxes, templates, filter,\n * UI customization, accessibility, and preselected values.\n * ```html\n *  <input type=\"text\" id=\"tree\"></input>\n * ```\n * ```typescript\n *  let ddtObj: DropDownTree = new DropDownTree();\n *  ddtObj.appendTo(\"#tree\");\n * ```\n */\n\n\nvar DropDownTree = /*#__PURE__*/function (_Component2) {\n  _inherits(DropDownTree, _Component2);\n\n  var _super6 = _createSuper(DropDownTree);\n\n  function DropDownTree(options, element) {\n    var _this16;\n\n    _classCallCheck(this, DropDownTree);\n\n    _this16 = _super6.call(this, options, element);\n    _this16.filterTimer = null;\n    _this16.isFilteredData = false;\n    _this16.isFilterRestore = false; // eslint-disable-next-line\n\n    _this16.selectedData = [];\n    _this16.filterDelayTime = 300;\n    _this16.isClicked = false;\n    return _this16;\n  }\n  /**\n   * Get the properties to be maintained in the persisted state.\n   *\n   * @returns {string}\n   * @hidden\n   */\n\n\n  _createClass(DropDownTree, [{\n    key: \"getPersistData\",\n    value: function getPersistData() {\n      var keyEntity = ['value'];\n      return this.addOnPersist(keyEntity);\n    }\n  }, {\n    key: \"getLocaleName\",\n    value: function getLocaleName() {\n      return 'drop-down-tree';\n    }\n    /**\n     * Initialize the event handler.\n     *\n     * @returns {void}\n     * @private\n     */\n\n  }, {\n    key: \"preRender\",\n    value: function preRender() {\n      this.inputFocus = false;\n      this.isPopupOpen = false;\n      this.isFirstRender = true;\n      this.isInitialized = false;\n      this.currentText = null;\n      this.currentValue = null;\n      this.oldValue = null;\n      this.removeValue = false;\n      this.selectedText = [];\n      this.treeItems = [];\n      this.dataValue = null;\n      this.isNodeSelected = false;\n      this.isDynamicChange = false;\n      this.clearIconWidth = 0;\n      this.headerTemplateId = \"\".concat(this.element.id).concat(HEADERTEMPLATE);\n      this.footerTemplateId = \"\".concat(this.element.id).concat(FOOTERTEMPLATE);\n      this.actionFailureTemplateId = \"\".concat(this.element.id).concat(ACTIONFAILURETEMPLATE);\n      this.noRecordsTemplateId = \"\".concat(this.element.id).concat(NORECORDSTEMPLATE);\n      this.customTemplateId = \"\".concat(this.element.id).concat(CUSTOMTEMPLATE);\n      this.keyConfigs = {\n        escape: 'escape',\n        altUp: 'alt+uparrow',\n        altDown: 'alt+downarrow',\n        tab: 'tab',\n        shiftTab: 'shift+tab',\n        end: 'end',\n        enter: 'enter',\n        home: 'home',\n        moveDown: 'downarrow',\n        moveLeft: 'leftarrow',\n        moveRight: 'rightarrow',\n        moveUp: 'uparrow',\n        ctrlDown: 'ctrl+downarrow',\n        ctrlUp: 'ctrl+uparrow',\n        ctrlEnter: 'ctrl+enter',\n        ctrlHome: 'ctrl+home',\n        ctrlEnd: 'ctrl+end',\n        shiftDown: 'shift+downarrow',\n        shiftUp: 'shift+uparrow',\n        shiftEnter: 'shift+enter',\n        shiftHome: 'shift+home',\n        shiftEnd: 'shift+end',\n        csDown: 'ctrl+shift+downarrow',\n        csUp: 'ctrl+shift+uparrow',\n        csEnter: 'ctrl+shift+enter',\n        csHome: 'ctrl+shift+home',\n        csEnd: 'ctrl+shift+end',\n        space: 'space',\n        ctrlA: 'ctrl+A'\n      };\n    }\n    /**\n     * To Initialize the control rendering\n     *\n     * @private\n     * @returns {void}\n     */\n\n  }, {\n    key: \"render\",\n    value: function render() {\n      var isTree = select('#' + this.element.id + '_tree', document);\n\n      if (isTree) {\n        var popupDiv = select('#' + this.element.id + '_popup', document);\n        detach(popupDiv ? popupDiv : isTree.parentElement);\n      }\n\n      this.ensureAutoCheck();\n\n      if (this.element.tagName === 'INPUT') {\n        this.inputEle = this.element;\n\n        if (isNullOrUndefined(this.inputEle.getAttribute('role'))) {\n          this.inputEle.setAttribute('role', 'textbox');\n        }\n\n        if (isNullOrUndefined(this.inputEle.getAttribute('type'))) {\n          this.inputEle.setAttribute('type', 'text');\n        }\n      } else {\n        this.inputEle = this.createElement('input', {\n          attrs: {\n            role: 'textbox',\n            type: 'text'\n          }\n        });\n        this.element.parentElement.insertBefore(this.inputEle, this.element);\n      }\n\n      this.inputObj = Input.createInput({\n        element: this.inputEle,\n        floatLabelType: this.floatLabelType,\n        buttons: this.showDropDownIcon ? [DROPDOWNICON] : null,\n        properties: {\n          readonly: true,\n          placeholder: this.placeholder,\n          enabled: this.enabled,\n          cssClass: this.cssClass,\n          enableRtl: this.enableRtl\n        }\n      }, this.createElement);\n      this.inputWrapper = this.inputObj.container;\n\n      if (!this.inputWrapper.classList.contains(INPUTGROUP)) {\n        this.inputWrapper.classList.add(INPUTGROUP);\n      }\n\n      if (this.showDropDownIcon) {\n        this.inputWrapper.classList.add(SHOW_DD_ICON);\n      }\n\n      if (this.element.tagName === this.getDirective()) {\n        this.element.appendChild(this.inputWrapper);\n      }\n\n      this.createHiddenElement();\n      this.createClearIcon();\n      this.inputWrapper.classList.add(DROPDOWNTREE);\n      this.setElementWidth(this.width);\n      this.updateDataAttribute();\n      this.setHTMLAttributes();\n      this.setAttributes();\n      this.popupDiv = this.createElement('div', {\n        className: CONTENT,\n        attrs: {\n          'tabindex': '0'\n        }\n      });\n      this.popupDiv.classList.add(DROPDOWN);\n      this.tree = this.createElement('div', {\n        id: this.element.id + '_tree'\n      });\n      this.popupDiv.appendChild(this.tree);\n      document.body.appendChild(this.popupDiv);\n      this.wireTreeEvents();\n      addClass([this.popupDiv], DDTHIDEICON);\n      this.renderTree();\n      this.isRemoteData = this.fields.dataSource instanceof DataManager;\n\n      if (this.allowMultiSelection || this.showCheckBox) {\n        if (this.mode !== 'Delimiter') {\n          this.createChip();\n        }\n\n        if (!this.wrapText && this.mode !== 'Custom') {\n          this.overFlowWrapper = this.createElement('span', {\n            className: OVERFLOW_VIEW + ' ' + HIDEICON\n          });\n          this.inputWrapper.insertBefore(this.overFlowWrapper, this.hiddenElement);\n\n          if (this.mode !== 'Box') {\n            addClass([this.overFlowWrapper], SHOW_TEXT);\n          }\n        }\n      }\n\n      if (!this.isRemoteData) {\n        this.setTreeValue();\n        this.setTreeText();\n        this.updateHiddenValue();\n        this.setSelectedValue();\n\n        if (!this.wrapText) {\n          this.updateView();\n        }\n      }\n\n      this.wireEvents();\n      var firstUl = select('.' + PARENTITEM, this.treeObj.element);\n\n      if (firstUl && firstUl.getAttribute('aria-multiselectable')) {\n        firstUl.removeAttribute('aria-multiselectable');\n      }\n\n      this.oldValue = this.value;\n      this.isInitialized = true;\n      this.hasTemplate = this.itemTemplate || this.headerTemplate || this.footerTemplate || this.actionFailureTemplate || this.noRecordsTemplate || this.customTemplate;\n      this.renderComplete();\n    }\n  }, {\n    key: \"ensureAutoCheck\",\n    value: function ensureAutoCheck() {\n      if (this.allowFiltering && this.treeSettings.autoCheck) {\n        this.setProperties({\n          treeSettings: {\n            autoCheck: false\n          }\n        }, true);\n      }\n    }\n  }, {\n    key: \"hideCheckAll\",\n    value: function hideCheckAll(flag) {\n      var checkAllEle = !isNullOrUndefined(this.popupEle) ? this.popupEle.querySelector('.' + CHECKALLPARENT) : null;\n\n      if (!isNullOrUndefined(checkAllEle)) {\n        if (flag && !checkAllEle.classList.contains(CHECKALLHIDE)) {\n          addClass([checkAllEle], CHECKALLHIDE);\n        } else if (!flag && checkAllEle.classList.contains(CHECKALLHIDE)) {\n          removeClass([checkAllEle], CHECKALLHIDE);\n        }\n      }\n    }\n  }, {\n    key: \"renderFilter\",\n    value: function renderFilter() {\n      this.filterContainer = this.createElement('div', {\n        id: this.element.id + '_filter_wrap',\n        className: FILTERWRAP\n      });\n      var filterInput = this.createElement('input', {\n        id: this.element.id + '_filter',\n        attrs: {\n          autocomplete: 'off',\n          'aria-label': this.filterBarPlaceholder\n        }\n      });\n      this.filterContainer.appendChild(filterInput);\n      prepend([this.filterContainer], this.popupEle);\n      this.filterObj = new TextBox({\n        value: '',\n        showClearButton: true,\n        placeholder: this.filterBarPlaceholder,\n        input: this.filterChangeHandler.bind(this)\n      });\n      this.filterObj.appendTo('#' + this.element.id + '_filter');\n    }\n  }, {\n    key: \"filterChangeHandler\",\n    value: function filterChangeHandler(args) {\n      var _this17 = this;\n\n      if (!isNullOrUndefined(args.value)) {\n        window.clearTimeout(this.filterTimer);\n        this.filterTimer = window.setTimeout(function () {\n          _this17.filterHandler(args.value, args.event);\n        }, this.filterDelayTime);\n      }\n    }\n  }, {\n    key: \"filterHandler\",\n    value: function filterHandler(value, event) {\n      var _this18 = this;\n\n      if (!this.isFilteredData) {\n        this.treeData = this.treeObj.getTreeData();\n      }\n\n      var filterFields = this.cloneFields(this.fields);\n      var args = {\n        cancel: false,\n        preventDefaultAction: false,\n        event: event,\n        text: value,\n        fields: filterFields\n      };\n      this.trigger('filtering', args, function (args) {\n        if (!args.cancel) {\n          var flag = false;\n          var fields;\n          _this18.isFilteredData = true;\n\n          if (value === '') {\n            _this18.isFilteredData = false;\n            _this18.isFilterRestore = true;\n            fields = _this18.cloneFields(_this18.fields);\n          } else if (args.preventDefaultAction) {\n            fields = args.fields;\n          } else {\n            if (_this18.treeDataType === 1) {\n              fields = _this18.selfReferencefilter(value, args.fields);\n            } else {\n              if (_this18.fields.dataSource instanceof DataManager) {\n                flag = true;\n              } else {\n                fields = _this18.nestedFilter(value, args.fields);\n              }\n            }\n          }\n\n          _this18.hideCheckAll(_this18.isFilteredData);\n\n          if (flag) {\n            return;\n          }\n\n          _this18.treeObj.fields = _this18.getTreeFields(fields);\n\n          _this18.treeObj.dataBind();\n        }\n      });\n    }\n  }, {\n    key: \"nestedFilter\",\n    value: function nestedFilter(value, filteredFields) {\n      // eslint-disable-next-line\n      var matchedDataSource = [];\n\n      for (var i = 0; i < this.treeData.length; i++) {\n        // eslint-disable-next-line\n        var filteredChild = this.nestedChildFilter(value, this.treeData[i]);\n\n        if (!isNullOrUndefined(filteredChild)) {\n          matchedDataSource.push(filteredChild);\n        }\n      }\n\n      filteredFields.dataSource = matchedDataSource;\n      return filteredFields;\n    } // eslint-disable-next-line\n\n  }, {\n    key: \"nestedChildFilter\",\n    value: function nestedChildFilter(value, node) {\n      // eslint-disable-next-line\n      var children = node[this.fields.child];\n\n      if (isNullOrUndefined(children)) {\n        return this.isMatchedNode(value, node) ? node : null;\n      } else {\n        // eslint-disable-next-line\n        var matchedChildren = [];\n\n        for (var i = 0; i < children.length; i++) {\n          // eslint-disable-next-line\n          var filteredChild = this.nestedChildFilter(value, children[i]);\n\n          if (!isNullOrUndefined(filteredChild)) {\n            matchedChildren.push(filteredChild);\n          }\n        }\n\n        if (matchedChildren.length !== 0) {\n          node[this.fields.child] = matchedChildren;\n          return node;\n        } else {\n          node[this.fields.child] = null;\n          return this.isMatchedNode(value, node) ? node : null;\n        }\n      }\n    }\n  }, {\n    key: \"selfReferencefilter\",\n    value: function selfReferencefilter(value, filteredFields) {\n      // eslint-disable-next-line\n      var matchedData = []; // eslint-disable-next-line\n\n      var matchedDataSource = [];\n\n      for (var i = 0; i < this.treeData.length; i++) {\n        if (this.isMatchedNode(value, this.treeData[i])) {\n          matchedData.push(this.treeData[i]);\n        }\n      }\n\n      for (var _i6 = 0; _i6 < matchedData.length; _i6++) {\n        if (matchedDataSource.indexOf(matchedData[_i6]) === -1) {\n          matchedDataSource.push(matchedData[_i6]); // eslint-disable-next-line\n\n          var parentId = matchedData[_i6][this.fields.parentValue];\n\n          while (!isNullOrUndefined(parentId)) {\n            // eslint-disable-next-line\n            var parent = null;\n\n            for (var j = 0; j < this.treeData.length; j++) {\n              // eslint-disable-next-line\n              var _value = this.treeData[j][this.fields.value];\n\n              if (!isNullOrUndefined(_value) && _value === parentId) {\n                parent = this.treeData[j];\n                break;\n              }\n            }\n\n            if (!isNullOrUndefined(parent) && matchedDataSource.indexOf(parent) === -1) {\n              matchedDataSource.push(parent);\n              parentId = parent[this.fields.parentValue];\n            } else {\n              break;\n            }\n          }\n        }\n      }\n\n      filteredFields.dataSource = matchedDataSource;\n      return filteredFields;\n    } // eslint-disable-next-line\n\n  }, {\n    key: \"isMatchedNode\",\n    value: function isMatchedNode(value, node) {\n      var checkValue = node[this.fields.text];\n\n      if (this.ignoreCase) {\n        checkValue = checkValue.toLowerCase();\n        value = value.toLowerCase();\n      }\n\n      if (this.ignoreAccent) {\n        checkValue = DataUtil.ignoreDiacritics(checkValue);\n        value = DataUtil.ignoreDiacritics(value);\n      }\n\n      if (this.filterType === 'StartsWith') {\n        return checkValue.slice(0, value.length) === value;\n      } else if (this.filterType === 'EndsWith') {\n        return checkValue.slice(-value.length) === value;\n      } else {\n        return checkValue.indexOf(value) !== -1;\n      }\n    }\n    /* To wire events for the dropdown tree */\n\n  }, {\n    key: \"wireEvents\",\n    value: function wireEvents() {\n      EventHandler.add(this.inputWrapper, 'mouseup', this.dropDownClick, this);\n      EventHandler.add(this.inputWrapper, 'focus', this.focusIn, this);\n      EventHandler.add(this.inputWrapper, 'blur', this.focusOut, this);\n      EventHandler.add(this.inputWrapper, 'mousemove', this.mouseIn, this);\n      EventHandler.add(this.inputWrapper, 'mouseout', this.onMouseLeave, this);\n      EventHandler.add(this.overAllClear, 'mousedown', this.clearAll, this);\n      EventHandler.add(window, 'resize', this.windowResize, this);\n      var formElement = closest(this.inputWrapper, 'form');\n\n      if (formElement) {\n        EventHandler.add(formElement, 'reset', this.resetValueHandler, this);\n      }\n\n      this.keyboardModule = new KeyboardEvents(this.inputWrapper, {\n        keyAction: this.keyActionHandler.bind(this),\n        keyConfigs: this.keyConfigs,\n        eventName: 'keydown'\n      });\n    }\n  }, {\n    key: \"wireTreeEvents\",\n    value: function wireTreeEvents() {\n      this.keyboardModule = new KeyboardEvents(this.tree, {\n        keyAction: this.treeAction.bind(this),\n        keyConfigs: this.keyConfigs,\n        eventName: 'keydown'\n      });\n    }\n  }, {\n    key: \"wireCheckAllWrapperEvents\",\n    value: function wireCheckAllWrapperEvents() {\n      this.keyboardModule = new KeyboardEvents(this.checkAllParent, {\n        keyAction: this.checkAllAction.bind(this),\n        keyConfigs: this.keyConfigs,\n        eventName: 'keydown'\n      });\n    }\n    /* To unwire events for the dropdown tree */\n\n  }, {\n    key: \"unWireEvents\",\n    value: function unWireEvents() {\n      EventHandler.remove(this.inputWrapper, 'mouseup', this.dropDownClick);\n      EventHandler.remove(this.inputWrapper, 'focus', this.focusIn);\n      EventHandler.remove(this.inputWrapper, 'blur', this.focusOut);\n      EventHandler.remove(this.inputWrapper, 'mousemove', this.mouseIn);\n      EventHandler.remove(this.inputWrapper, 'mouseout', this.onMouseLeave);\n      EventHandler.remove(this.overAllClear, 'mousedown', this.clearAll);\n      EventHandler.remove(window, 'resize', this.windowResize);\n      var formElement = closest(this.inputWrapper, 'form');\n\n      if (formElement) {\n        EventHandler.remove(formElement, 'reset', this.resetValueHandler);\n      }\n    }\n    /* Trigger when the dropdown is clicked */\n\n  }, {\n    key: \"dropDownClick\",\n    value: function dropDownClick(e) {\n      if (!this.enabled || this.readonly) {\n        return;\n      }\n\n      if (this.isClearButtonClick) {\n        this.isClearButtonClick = false;\n        return;\n      }\n\n      if (this.isPopupOpen) {\n        this.hidePopup();\n      } else {\n        this.focusIn(e);\n        this.renderPopup();\n      }\n\n      this.showOverAllClear();\n    }\n  }, {\n    key: \"mouseIn\",\n    value: function mouseIn() {\n      if (this.enabled || !this.readonly) {\n        this.showOverAllClear();\n      }\n    }\n  }, {\n    key: \"onMouseLeave\",\n    value: function onMouseLeave() {\n      if (!this.inputFocus) {\n        addClass([this.overAllClear], HIDEICON);\n        removeClass([this.inputWrapper], SHOW_CLEAR);\n      }\n    }\n  }, {\n    key: \"getDirective\",\n    value: function getDirective() {\n      return 'EJS-DROPDOWNTREE';\n    }\n  }, {\n    key: \"focusOut\",\n    value: function focusOut(e) {\n      if (!this.enabled || this.readonly || !this.inputFocus) {\n        return;\n      }\n\n      if ((Browser.isIE || Browser.info.name === 'edge') && e.target === this.inputWrapper) {\n        return;\n      }\n\n      var target = e.relatedTarget;\n\n      if (target !== this.inputEle && isNullOrUndefined(target) && (e.target !== this.inputWrapper || !this.isPopupOpen)) {\n        this.onFocusOut(e);\n      }\n    }\n  }, {\n    key: \"onFocusOut\",\n    value: function onFocusOut(event) {\n      this.inputFocus = false;\n\n      if (this.isPopupOpen) {\n        this.hidePopup();\n      }\n\n      if (this.isClearButtonClick) {\n        this.isClearButtonClick = false;\n      }\n\n      if (this.showClearButton) {\n        this.clearIconWidth = select('.e-clear-icon', this.inputWrapper).offsetWidth;\n        addClass([this.overAllClear], HIDEICON);\n        removeClass([this.inputWrapper], SHOW_CLEAR);\n      }\n\n      removeClass([this.inputWrapper], [INPUTFOCUS]);\n\n      if (this.allowMultiSelection || this.showCheckBox) {\n        var isValue = this.value ? this.value.length ? true : false : false;\n\n        if (this.mode !== 'Delimiter' && this.mode !== 'Custom') {\n          if (this.chipWrapper && this.mode === 'Default') {\n            addClass([this.chipWrapper], HIDEICON);\n            removeClass([this.inputWrapper], SHOW_CHIP);\n            removeClass([this.inputEle], CHIP_INPUT);\n          }\n        }\n\n        if (!this.wrapText && isValue) {\n          this.updateView();\n        }\n      }\n\n      if (this.changeOnBlur) {\n        this.triggerChangeEvent(event);\n      }\n\n      this.removeValue = false;\n      this.oldValue = this.value;\n      this.trigger('blur');\n    }\n  }, {\n    key: \"updateView\",\n    value: function updateView() {\n      if (!this.showCheckBox && !this.allowMultiSelection || this.mode === 'Custom' || this.inputFocus) {\n        return;\n      }\n\n      if (this.mode !== 'Box') {\n        addClass([this.inputWrapper, this.overFlowWrapper], SHOW_TEXT);\n      } else {\n        addClass([this.inputWrapper], SHOW_CHIP);\n      }\n\n      if (this.value && this.value.length !== 0) {\n        if (this.inputWrapper.contains(this.chipWrapper)) {\n          addClass([this.chipWrapper], HIDEICON);\n        }\n\n        addClass([this.inputEle], CHIP_INPUT);\n        this.updateOverFlowView();\n        this.ensurePlaceHolder();\n      }\n    }\n  }, {\n    key: \"triggerChangeEvent\",\n    value: function triggerChangeEvent(event) {\n      var isEqual = this.ddtCompareValues(this.oldValue, this.value);\n\n      if ((!isEqual || this.isChipDelete) && !this.removeValue) {\n        var eventArgs = {\n          e: event,\n          oldValue: this.oldValue,\n          value: this.value,\n          isInteracted: event ? true : false,\n          element: this.element\n        };\n        this.trigger('change', eventArgs);\n        this.oldValue = this.value;\n      }\n    }\n  }, {\n    key: \"ddtCompareValues\",\n    value: function ddtCompareValues(oldValue, newValue) {\n      if (oldValue === null || newValue === null) {\n        var isValid = oldValue === null ? newValue === oldValue ? true : false : oldValue.length === 0 ? newValue === oldValue : false;\n        return isValid;\n      } else if (oldValue.length !== newValue.length) {\n        return false;\n      }\n\n      for (var i = 0; i < oldValue.length; i++) {\n        if (oldValue[i] !== newValue[i]) {\n          return false;\n        }\n      }\n\n      return true;\n    }\n  }, {\n    key: \"focusIn\",\n    value: function focusIn(e) {\n      if (!this.enabled || this.readonly || this.inputFocus) {\n        return;\n      }\n\n      this.showOverAllClear();\n      this.inputFocus = true;\n      addClass([this.inputWrapper], [INPUTFOCUS]);\n\n      if (this.allowMultiSelection || this.showCheckBox) {\n        if (this.mode !== 'Delimiter' && this.inputFocus) {\n          if (this.chipWrapper && this.value && this.value.length !== 0) {\n            removeClass([this.chipWrapper], HIDEICON);\n            addClass([this.inputEle], CHIP_INPUT);\n          }\n\n          addClass([this.inputWrapper], SHOW_CHIP);\n\n          if (this.popupObj) {\n            this.popupObj.refreshPosition();\n          }\n        }\n\n        if (!this.wrapText && this.mode !== 'Custom') {\n          if (this.inputWrapper.contains(this.overFlowWrapper)) {\n            addClass([this.overFlowWrapper], HIDEICON);\n          }\n\n          if (this.mode === 'Delimiter') {\n            removeClass([this.inputWrapper], SHOW_CHIP);\n            removeClass([this.inputEle], CHIP_INPUT);\n          } else {\n            addClass([this.inputWrapper], SHOW_CHIP);\n          }\n\n          removeClass([this.inputWrapper], SHOW_TEXT);\n          this.ensurePlaceHolder();\n        }\n      }\n\n      var args = {\n        isInteracted: e ? true : false,\n        event: e\n      };\n      this.trigger('focus', args);\n    }\n  }, {\n    key: \"treeAction\",\n    value: function treeAction(e) {\n      var _this19 = this;\n\n      var eventArgs = {\n        cancel: false,\n        event: e\n      };\n      this.trigger('keyPress', eventArgs, function (observedArgs) {\n        if (!observedArgs.cancel) {\n          switch (e.action) {\n            case 'escape':\n            case 'altUp':\n              _this19.inputWrapper.focus();\n\n              e.preventDefault();\n\n              if (_this19.isPopupOpen) {\n                _this19.hidePopup();\n              }\n\n              break;\n\n            case 'tab':\n            case 'shiftTab':\n              if (_this19.isPopupOpen) {\n                _this19.hidePopup();\n              }\n\n              break;\n\n            case 'enter':\n            case 'ctrlEnter':\n            case 'shiftEnter':\n            case 'csEnter':\n              if (!_this19.showCheckBox) {\n                _this19.isValueChange = true;\n                _this19.keyEventArgs = e;\n              }\n\n              break;\n\n            case 'space':\n              _this19.isValueChange = true;\n              _this19.keyEventArgs = e;\n              break;\n\n            case 'ctrlA':\n              if (_this19.allowMultiSelection) {\n                _this19.selectAll(true);\n              }\n\n              break;\n\n            case 'moveRight':\n            case 'moveLeft':\n            case 'shiftDown':\n            case 'moveDown':\n            case 'ctrlDown':\n            case 'csDown':\n            case 'shiftUp':\n            case 'moveUp':\n            case 'ctrlUp':\n            case 'csUp':\n            case 'home':\n            case 'shiftHome':\n            case 'ctrlHome':\n            case 'csHome':\n            case 'end':\n            case 'shiftEnd':\n            case 'ctrlEnd':\n            case 'csEnd':\n          }\n        } else {\n          e.stopImmediatePropagation();\n        }\n      });\n    }\n  }, {\n    key: \"keyActionHandler\",\n    value: function keyActionHandler(e) {\n      var _this20 = this;\n\n      var eventArgs = {\n        cancel: false,\n        event: e\n      };\n      this.trigger('keyPress', eventArgs, function (observedArgs) {\n        if (!observedArgs.cancel) {\n          switch (e.action) {\n            case 'escape':\n            case 'altUp':\n              if (_this20.isPopupOpen) {\n                _this20.hidePopup();\n              }\n\n              break;\n\n            case 'shiftTab':\n            case 'tab':\n              if (_this20.isPopupOpen) {\n                _this20.hidePopup();\n              }\n\n              if (_this20.inputFocus) {\n                _this20.onFocusOut();\n              }\n\n              break;\n\n            case 'altDown':\n              if (!_this20.isPopupOpen) {\n                _this20.showPopup();\n\n                e.preventDefault();\n              }\n\n              break;\n\n            case 'moveDown':\n              if (_this20.showSelectAll && _this20.showCheckBox) {\n                _this20.checkAllParent.focus();\n              }\n\n              break;\n          }\n        }\n      });\n    }\n  }, {\n    key: \"checkAllAction\",\n    value: function checkAllAction(e) {\n      var _this21 = this;\n\n      var eventArgs = {\n        cancel: false,\n        event: e\n      };\n      this.trigger('keyPress', eventArgs, function (observedArgs) {\n        if (!observedArgs.cancel) {\n          switch (e.action) {\n            case 'space':\n              _this21.clickHandler(e);\n\n              break;\n\n            case 'moveDown':\n              _this21.treeObj.element.focus();\n\n          }\n        }\n      });\n    }\n  }, {\n    key: \"windowResize\",\n    value: function windowResize() {\n      if (this.popupObj) {\n        this.popupObj.setProperties({\n          width: this.setWidth()\n        });\n        this.popupObj.refreshPosition();\n      }\n    }\n  }, {\n    key: \"resetValueHandler\",\n    value: function resetValueHandler(e) {\n      var formElement = closest(this.inputWrapper, 'form');\n\n      if (formElement && e.target === formElement) {\n        this.isDynamicChange = true;\n        this.setProperties({\n          value: null\n        }, true);\n        this.resetValue(true);\n        this.isDynamicChange = false;\n      }\n    }\n  }, {\n    key: \"getAriaAttributes\",\n    value: function getAriaAttributes() {\n      var disable = this.enabled ? 'false' : 'true';\n      return {\n        'aria-disabled': disable,\n        'aria-owns': this.element.id + '_options',\n        'role': 'listbox',\n        'aria-haspopup': 'true',\n        'aria-expanded': 'false',\n        'aria-activedescendant': 'null',\n        'aria-labelledby': this.hiddenElement.id\n      };\n    }\n  }, {\n    key: \"updateOverFlowView\",\n    value: function updateOverFlowView() {\n      this.overFlowWrapper.classList.remove(TOTAL_COUNT_WRAPPER);\n      removeClass([this.overFlowWrapper], HIDEICON);\n\n      if (this.value && this.value.length) {\n        var data = '';\n        var overAllContainer;\n        var temp;\n        var tempData;\n        var tempIndex = 1;\n        var wrapperleng;\n        var remaining;\n        var downIconWidth = 0;\n        this.overFlowWrapper.innerHTML = ''; // eslint-disable-next-line\n\n        var l10nLocale = {\n          overflowCountTemplate: '+${count} more..',\n          totalCountTemplate: '${count} selected'\n        };\n        this.l10n = new L10n(this.getLocaleName(), l10nLocale, this.locale);\n        var remainContent = this.l10n.getConstant('overflowCountTemplate');\n        var remainElement = this.createElement('span', {\n          className: REMAIN_WRAPPER\n        }); // eslint-disable-next-line\n\n        var compiledString = compile(remainContent); // eslint-disable-next-line\n\n        var totalCompiledString = compile(this.l10n.getConstant('totalCountTemplate'));\n        remainElement.appendChild(compiledString({\n          'count': this.value.length\n        }, this, 'overflowCountTemplate', null, !this.isStringTemplate)[0]);\n        this.overFlowWrapper.appendChild(remainElement);\n        var remainSize = remainElement.offsetWidth;\n        remove(remainElement);\n\n        if (this.showDropDownIcon) {\n          downIconWidth = select('.' + DDTICON, this.inputWrapper).offsetWidth;\n        }\n\n        if (!isNullOrUndefined(this.value)) {\n          if (this.mode !== 'Box') {\n            for (var index = 0; !isNullOrUndefined(this.value[index]); index++) {\n              data += index === 0 ? '' : this.delimiterChar + ' ';\n              temp = this.getOverflowVal(index);\n              data += temp;\n              temp = this.overFlowWrapper.innerHTML;\n              this.overFlowWrapper.innerHTML = data;\n              wrapperleng = this.overFlowWrapper.offsetWidth;\n              overAllContainer = this.inputWrapper.offsetWidth;\n\n              if (wrapperleng + downIconWidth + this.clearIconWidth > overAllContainer) {\n                if (tempData !== undefined && tempData !== '') {\n                  temp = tempData;\n                  index = tempIndex + 1;\n                }\n\n                this.overFlowWrapper.innerHTML = temp;\n                remaining = this.value.length - index;\n                wrapperleng = this.overFlowWrapper.offsetWidth;\n\n                while (wrapperleng + remainSize + downIconWidth + this.clearIconWidth >= overAllContainer && wrapperleng !== 0 && this.overFlowWrapper.innerHTML !== '') {\n                  var textArr = this.overFlowWrapper.innerHTML.split(this.delimiterChar);\n                  textArr.pop();\n                  this.overFlowWrapper.innerHTML = textArr.join(this.delimiterChar);\n                  remaining++;\n                  wrapperleng = this.overFlowWrapper.offsetWidth;\n                }\n\n                break;\n              } else if (wrapperleng + remainSize + downIconWidth + this.clearIconWidth <= overAllContainer) {\n                tempData = data;\n                tempIndex = index;\n              } else if (index === 0) {\n                tempData = '';\n                tempIndex = -1;\n              }\n            }\n          } else {\n            addClass([this.chipWrapper], HIDEICON);\n            var ele = this.chipWrapper.cloneNode(true);\n            var chips = selectAll('.' + CHIP, ele);\n\n            for (var i = 0; i < chips.length; i++) {\n              temp = this.overFlowWrapper.innerHTML;\n              this.overFlowWrapper.appendChild(chips[i]);\n              data = this.overFlowWrapper.innerHTML;\n              wrapperleng = this.overFlowWrapper.offsetWidth;\n              overAllContainer = this.inputWrapper.offsetWidth;\n\n              if (wrapperleng + downIconWidth + this.clearIconWidth > overAllContainer) {\n                if (tempData !== undefined && tempData !== '') {\n                  temp = tempData;\n                  i = tempIndex + 1;\n                }\n\n                this.overFlowWrapper.innerHTML = temp;\n                remaining = this.value.length - i;\n                wrapperleng = this.overFlowWrapper.offsetWidth;\n\n                while (wrapperleng + remainSize + downIconWidth + this.clearIconWidth >= overAllContainer && wrapperleng !== 0 && this.overFlowWrapper.innerHTML !== '') {\n                  this.overFlowWrapper.removeChild(this.overFlowWrapper.lastChild);\n                  remaining++;\n                  wrapperleng = this.overFlowWrapper.offsetWidth;\n                }\n\n                break;\n              } else if (wrapperleng + remainSize + downIconWidth + this.clearIconWidth <= overAllContainer) {\n                tempData = data;\n                tempIndex = i;\n              } else if (i === 0) {\n                tempData = '';\n                tempIndex = -1;\n              }\n            }\n          }\n        }\n\n        if (remaining > 0) {\n          this.overFlowWrapper.appendChild(this.updateRemainTemplate(remainElement, remaining, compiledString, totalCompiledString));\n        }\n\n        if (this.mode === 'Box' && !this.overFlowWrapper.classList.contains(TOTAL_COUNT_WRAPPER)) {\n          addClass([remainElement], REMAIN_COUNT);\n        }\n      } else {\n        this.overFlowWrapper.innerHTML = '';\n        addClass([this.overFlowWrapper], HIDEICON);\n      }\n\n      this.updateDelimMode();\n    }\n  }, {\n    key: \"updateRemainTemplate\",\n    value: function updateRemainTemplate(remainElement, remaining, // eslint-disable-next-line\n    compiledString, // eslint-disable-next-line\n    totalCompiledString) {\n      if (this.overFlowWrapper.firstChild && this.overFlowWrapper.firstChild.nodeType === 3 && this.overFlowWrapper.firstChild.nodeValue === '') {\n        this.overFlowWrapper.removeChild(this.overFlowWrapper.firstChild);\n      }\n\n      remainElement.innerHTML = '';\n      remainElement.appendChild(this.overFlowWrapper.firstChild && (this.overFlowWrapper.firstChild.nodeType === 3 || this.mode === 'Box') ? compiledString({\n        'count': remaining\n      }, this, 'overflowCountTemplate', null, !this.isStringTemplate)[0] : totalCompiledString({\n        'count': remaining\n      }, this, 'totalCountTemplate', null, !this.isStringTemplate)[0]);\n\n      if (this.overFlowWrapper.firstChild && (this.overFlowWrapper.firstChild.nodeType === 3 || this.mode === 'Box')) {\n        removeClass([this.overFlowWrapper], TOTAL_COUNT_WRAPPER);\n      } else {\n        addClass([this.overFlowWrapper], TOTAL_COUNT_WRAPPER);\n        removeClass([this.overFlowWrapper], REMAIN_COUNT);\n      }\n\n      return remainElement;\n    }\n  }, {\n    key: \"getOverflowVal\",\n    value: function getOverflowVal(index) {\n      // eslint-disable-next-line\n      var selectedData = this.getSelectedData(this.value[index]);\n      return getValue(this.treeSettings.loadOnDemand ? this.fields.text : 'text', selectedData);\n    }\n  }, {\n    key: \"updateDelimMode\",\n    value: function updateDelimMode() {\n      if (this.mode !== 'Box') {\n        if (select('.' + REMAIN_WRAPPER, this.overFlowWrapper) && !this.overFlowWrapper.classList.contains(TOTAL_COUNT_WRAPPER)) {\n          addClass([this.overFlowWrapper], REMAIN_COUNT);\n          addClass([this.overFlowWrapper], SHOW_TEXT);\n        } else {\n          this.overFlowWrapper.classList.remove(REMAIN_COUNT);\n          removeClass([this.overFlowWrapper], REMAIN_COUNT);\n        }\n      } else if (select('.' + REMAIN_WRAPPER, this.overFlowWrapper)) {\n        this.overFlowWrapper.classList.remove(REMAIN_COUNT);\n      }\n    }\n  }, {\n    key: \"createHiddenElement\",\n    value: function createHiddenElement() {\n      if (this.allowMultiSelection || this.showCheckBox) {\n        this.hiddenElement = this.createElement('select', {\n          attrs: {\n            'aria-hidden': 'true',\n            'class': HIDDENELEMENT,\n            'tabindex': '-1',\n            'multiple': ''\n          }\n        });\n      } else {\n        this.hiddenElement = this.createElement('select', {\n          attrs: {\n            'aria-hidden': 'true',\n            'tabindex': '-1',\n            'class': HIDDENELEMENT\n          }\n        });\n      }\n\n      prepend([this.hiddenElement], this.inputWrapper);\n      this.validationAttribute();\n    }\n  }, {\n    key: \"createClearIcon\",\n    value: function createClearIcon() {\n      this.overAllClear = this.createElement('span', {\n        className: CLOSEICON_CLASS\n      });\n      addClass([this.overAllClear], HIDEICON);\n      removeClass([this.inputWrapper], SHOW_CLEAR);\n\n      if (this.showClearButton) {\n        this.inputWrapper.insertBefore(this.overAllClear, this.inputObj.buttons[0]);\n      }\n    }\n  }, {\n    key: \"validationAttribute\",\n    value: function validationAttribute() {\n      var name = this.inputEle.getAttribute('name') ? this.inputEle.getAttribute('name') : this.inputEle.getAttribute('id');\n      this.hiddenElement.setAttribute('name', name);\n      this.inputEle.removeAttribute('name');\n      var attributes$$1 = ['required', 'aria-required', 'form'];\n\n      for (var i = 0; i < attributes$$1.length; i++) {\n        var attr = this.inputEle.getAttribute(attributes$$1[i]);\n\n        if (attr) {\n          this.hiddenElement.setAttribute(attributes$$1[i], attr);\n          this.inputEle.removeAttribute(attributes$$1[i]);\n        }\n      }\n    }\n  }, {\n    key: \"createChip\",\n    value: function createChip() {\n      if (!this.inputWrapper.contains(this.chipWrapper)) {\n        this.chipWrapper = this.createElement('span', {\n          className: CHIP_WRAPPER\n        });\n        this.chipCollection = this.createElement('span', {\n          className: CHIP_COLLECTION\n        });\n        this.chipWrapper.appendChild(this.chipCollection);\n        this.inputWrapper.insertBefore(this.chipWrapper, this.hiddenElement);\n        addClass([this.inputWrapper], SHOW_CHIP);\n        var isValid = this.getValidMode();\n\n        if (isValid && this.value !== null && this.value && this.value.length !== 0) {\n          addClass([this.inputEle], CHIP_INPUT);\n        } else if (this.value === null || this.value && this.value.length === 0) {\n          addClass([this.chipWrapper], HIDEICON);\n        }\n      }\n    }\n  }, {\n    key: \"getValidMode\",\n    value: function getValidMode() {\n      if (this.allowMultiSelection || this.showCheckBox) {\n        return this.mode === 'Box' ? true : this.mode === 'Default' && this.inputFocus ? true : false;\n      } else {\n        return false;\n      }\n    }\n  }, {\n    key: \"createSelectAllWrapper\",\n    value: function createSelectAllWrapper() {\n      this.checkAllParent = this.createElement('div', {\n        className: CHECKALLPARENT,\n        attrs: {\n          'tabindex': '0'\n        }\n      });\n      this.selectAllSpan = this.createElement('span', {\n        className: ALLTEXT\n      });\n      this.selectAllSpan.textContent = '';\n      var ele = closest(this.element, '.' + BIGGER);\n      var touchClass = isNullOrUndefined(ele) ? '' : SMALL;\n      this.checkBoxElement = createCheckBox(this.createElement, true, {\n        cssClass: touchClass\n      });\n      this.checkBoxElement.setAttribute('role', 'checkbox');\n      this.checkAllParent.appendChild(this.checkBoxElement);\n      this.checkAllParent.appendChild(this.selectAllSpan);\n      this.setLocale();\n      EventHandler.add(this.checkAllParent, 'mouseup', this.clickHandler, this);\n      this.wireCheckAllWrapperEvents();\n    }\n  }, {\n    key: \"clickHandler\",\n    value: function clickHandler(e) {\n      var target;\n\n      if (e.currentTarget && e.currentTarget.classList.contains(CHECKALLPARENT)) {\n        target = e.currentTarget.firstElementChild.lastElementChild;\n      } else {\n        target = e.target;\n      }\n\n      this.checkWrapper = closest(target, '.' + CHECKBOXWRAP);\n\n      if (!isNullOrUndefined(this.checkWrapper)) {\n        this.isClicked = true;\n        var checkElement = select('.' + CHECKBOXFRAME, this.checkWrapper);\n        this.changeState(this.checkWrapper, checkElement.classList.contains(CHECK) ? 'uncheck' : 'check', e);\n        this.isClicked = false;\n      }\n\n      e.preventDefault();\n    }\n  }, {\n    key: \"changeState\",\n    value: function changeState(wrapper, state, e) {\n      var ariaState;\n      var frameSpan = wrapper.getElementsByClassName(CHECKBOXFRAME)[0];\n\n      if (state === 'check' && !frameSpan.classList.contains(CHECK)) {\n        frameSpan.classList.add(CHECK);\n        ariaState = 'true';\n\n        if (!this.isReverseUpdate) {\n          this.treeObj.checkAll();\n\n          if (!this.changeOnBlur) {\n            this.triggerChangeEvent(e);\n          }\n        }\n\n        this.setLocale(true);\n      } else if (state === 'uncheck' && frameSpan.classList.contains(CHECK)) {\n        frameSpan.classList.remove(CHECK);\n        ariaState = 'false';\n\n        if (!this.isReverseUpdate) {\n          this.treeObj.uncheckAll();\n\n          if (!this.changeOnBlur) {\n            this.triggerChangeEvent(e);\n          }\n        }\n\n        this.setLocale(false);\n      }\n\n      this.setMultiSelect();\n      this.ensurePlaceHolder();\n      ariaState = state === 'check' ? 'true' : 'false';\n\n      if (!isNullOrUndefined(ariaState)) {\n        wrapper.setAttribute('aria-checked', ariaState);\n      }\n    }\n  }, {\n    key: \"setLocale\",\n    value: function setLocale(unSelect) {\n      if (!this.selectAllSpan) {\n        return;\n      }\n\n      if (this.selectAllText !== 'Select All' || this.unSelectAllText !== 'Unselect All') {\n        var template = unSelect ? this.unSelectAllText : this.selectAllText;\n        this.selectAllSpan.textContent = ''; // eslint-disable-next-line\n\n        var compiledString = compile(template);\n        var templateName = unSelect ? 'unSelectAllText' : 'selectAllText';\n\n        var _iterator8 = _createForOfIteratorHelper(compiledString({}, this, templateName, null, !this.isStringTemplate)),\n            _step8;\n\n        try {\n          for (_iterator8.s(); !(_step8 = _iterator8.n()).done;) {\n            var item = _step8.value;\n            this.selectAllSpan.textContent = item.textContent;\n          }\n        } catch (err) {\n          _iterator8.e(err);\n        } finally {\n          _iterator8.f();\n        }\n      } else {\n        this.selectAllSpan.textContent = unSelect ? this.unSelectAllText : this.selectAllText;\n      }\n    }\n  }, {\n    key: \"setAttributes\",\n    value: function setAttributes() {\n      this.inputEle.setAttribute('tabindex', '-1');\n      var id = this.element.getAttribute('id');\n      this.hiddenElement.id = id + '_hidden';\n      this.inputWrapper.setAttribute('tabindex', '0');\n      attributes(this.inputWrapper, this.getAriaAttributes());\n    }\n  }, {\n    key: \"setHTMLAttributes\",\n    value: function setHTMLAttributes() {\n      if (Object.keys(this.htmlAttributes).length) {\n        for (var _i7 = 0, _Object$keys4 = Object.keys(this.htmlAttributes); _i7 < _Object$keys4.length; _i7++) {\n          var htmlAttr = _Object$keys4[_i7];\n\n          if (htmlAttr === 'class') {\n            this.inputWrapper.classList.add(this.htmlAttributes[htmlAttr]);\n          } else if (htmlAttr === 'disabled' && this.htmlAttributes[htmlAttr] === 'disabled') {\n            this.setProperties({\n              enabled: false\n            }, true);\n            this.setEnable();\n          } else if (htmlAttr === 'readonly' && !isNullOrUndefined(this.htmlAttributes[htmlAttr])) {\n            this.setProperties({\n              readonly: true\n            }, true);\n            this.dataBind();\n          } else if (htmlAttr === 'style') {\n            this.inputWrapper.setAttribute('style', this.htmlAttributes[htmlAttr]);\n          } else {\n            var defaultAttr = ['title', 'id', 'placeholder', 'aria-placeholder', 'role', 'autocorrect', 'autocomplete', 'autocapitalize', 'spellcheck', 'minlength', 'maxlength'];\n            var validateAttr = ['name', 'required'];\n\n            if (htmlAttr.indexOf('data') === 0 || validateAttr.indexOf(htmlAttr) > -1) {\n              this.hiddenElement.setAttribute(htmlAttr, this.htmlAttributes[htmlAttr]);\n            } else if (defaultAttr.indexOf(htmlAttr) > -1) {\n              if (htmlAttr === 'placeholder') {\n                Input.setPlaceholder(this.htmlAttributes[htmlAttr], this.inputEle);\n              } else {\n                this.inputEle.setAttribute(htmlAttr, this.htmlAttributes[htmlAttr]);\n              }\n            } else {\n              this.inputWrapper.setAttribute(htmlAttr, this.htmlAttributes[htmlAttr]);\n            }\n          }\n        }\n      }\n    }\n  }, {\n    key: \"updateDataAttribute\",\n    value: function updateDataAttribute() {\n      var value = this.htmlAttributes;\n      var invalidAttr = ['class', 'style', 'id', 'type'];\n      var attr = {};\n\n      for (var a = 0; a < this.element.attributes.length; a++) {\n        if (invalidAttr.indexOf(this.element.attributes[a].name) === -1 && !(this.element.attributes[a].name === 'readonly')) {\n          attr[this.element.attributes[a].name] = this.element.getAttribute(this.element.attributes[a].name);\n        }\n      }\n\n      extend(attr, value, attr);\n      this.setProperties({\n        htmlAttributes: attr\n      }, true);\n    }\n  }, {\n    key: \"showOverAllClear\",\n    value: function showOverAllClear() {\n      if (!this.enabled || this.readonly) {\n        return;\n      }\n\n      if (this.overAllClear) {\n        var isValue = this.value ? this.value.length ? true : false : false;\n\n        if (isValue && this.showClearButton) {\n          removeClass([this.overAllClear], HIDEICON);\n          addClass([this.inputWrapper], SHOW_CLEAR);\n        } else {\n          addClass([this.overAllClear], HIDEICON);\n          removeClass([this.inputWrapper], SHOW_CLEAR);\n        }\n      }\n    }\n  }, {\n    key: \"setTreeValue\",\n    value: function setTreeValue() {\n      if (this.value !== null && this.value.length !== 0) {\n        // eslint-disable-next-line\n        var data;\n\n        if (this.showCheckBox || this.allowMultiSelection) {\n          for (var i = 0; i < this.value.length; i++) {\n            data = this.treeObj.getTreeData(this.value[i])[0];\n\n            if (isNullOrUndefined(data)) {\n              this.value.splice(this.value.indexOf(this.value[i]), 1);\n            }\n          }\n\n          if (this.value.length !== 0) {\n            this.setValidValue();\n          }\n        } else {\n          data = this.treeObj.getTreeData(this.value[0])[0];\n\n          if (!isNullOrUndefined(data)) {\n            this.setProperties({\n              text: data[this.fields.text]\n            }, true);\n            this.setValidValue();\n          } else {\n            this.setProperties({\n              value: this.currentValue\n            }, true);\n          }\n        }\n      }\n    }\n  }, {\n    key: \"setTreeText\",\n    value: function setTreeText() {\n      if (this.value !== null && !this.isInitialized) {\n        return;\n      }\n\n      if (this.text !== null) {\n        // eslint-disable-next-line\n        var data;\n        var valArr = [];\n\n        if (this.showCheckBox || this.allowMultiSelection) {\n          var textArr = this.text.split(this.delimiterChar);\n\n          for (var i = 0; i < textArr.length; i++) {\n            data = this.getItems(textArr[i]);\n\n            if (!isNullOrUndefined(data)) {\n              valArr.push(data[this.fields.value].toString());\n            }\n          }\n\n          if (valArr.length !== 0) {\n            this.oldValue = this.value;\n            this.setProperties({\n              value: valArr\n            }, true);\n            this.setValidValue();\n          } else {\n            this.setProperties({\n              text: this.currentText\n            }, true);\n          }\n        } else {\n          data = this.getItems(this.text);\n\n          if (!isNullOrUndefined(data)) {\n            this.oldValue = this.value;\n            this.setProperties({\n              value: [data[this.fields.value].toString()]\n            }, true);\n            this.setValidValue();\n          } else {\n            this.setProperties({\n              text: this.currentText\n            }, true);\n          }\n        }\n      }\n    }\n  }, {\n    key: \"setSelectedValue\",\n    value: function setSelectedValue() {\n      if (this.value != null) {\n        return;\n      }\n\n      if (!this.isInitialized) {\n        this.oldValue = this.value;\n\n        if (this.treeObj.selectedNodes.length > 0 && !this.showCheckBox) {\n          this.setProperties({\n            value: this.treeObj.selectedNodes\n          }, true);\n\n          if (this.allowMultiSelection) {\n            this.updateMode();\n          }\n        } else if (this.showCheckBox && this.treeObj.checkedNodes) {\n          if (this.treeObj.checkedNodes.length > 0) {\n            this.setProperties({\n              value: this.treeObj.checkedNodes\n            }, true);\n            setValue('selectedNodes', [], this.treeObj);\n            this.treeObj.dataBind();\n            this.updateMode();\n          }\n        }\n\n        this.updateSelectedValues();\n        this.currentText = this.text;\n        this.currentValue = this.value;\n      }\n    }\n  }, {\n    key: \"setValidValue\",\n    value: function setValidValue() {\n      if (!this.showCheckBox && !this.allowMultiSelection) {\n        Input.setValue(this.text, this.inputEle, this.floatLabelType);\n        var id = this.value[0].toString();\n\n        if (this.treeObj.selectedNodes[0] !== id) {\n          setValue('selectedNodes', [id], this.treeObj);\n        }\n      } else {\n        if (this.showCheckBox) {\n          this.treeObj.checkedNodes = this.value.slice();\n          this.treeObj.dataBind();\n          this.setMultiSelect();\n        } else {\n          this.treeObj.selectedNodes = this.value.slice();\n          this.selectedText = [];\n          this.updateSelectedValues();\n        }\n\n        this.treeObj.dataBind();\n      }\n\n      this.currentText = this.text;\n      this.currentValue = this.value;\n\n      if (this.isInitialized) {\n        this.triggerChangeEvent();\n      }\n    } // eslint-disable-next-line\n\n  }, {\n    key: \"getItems\",\n    value: function getItems(givenText) {\n      // eslint-disable-next-line\n      var data;\n\n      if (this.treeDataType === 1) {\n        for (var i = 0; i < this.treeItems.length; i++) {\n          // eslint-disable-next-line\n          var text = getValue(this.fields.text, this.treeItems[i]);\n\n          if (!isNullOrUndefined(this.treeItems[i]) && !isNullOrUndefined(text) && text === givenText) {\n            data = this.treeItems[i];\n            break;\n          }\n        }\n      } else {\n        data = this.getNestedItems(this.treeItems, this.fields, givenText);\n      }\n\n      return data;\n    } // eslint-disable-next-line\n\n  }, {\n    key: \"getNestedItems\",\n    value: function getNestedItems(data, field, givenText) {\n      // eslint-disable-next-line\n      var newData;\n\n      for (var i = 0, objlen = data.length; i < objlen; i++) {\n        // eslint-disable-next-line\n        var dataId = getValue(this.fields.text, data[i]);\n\n        if (data[i] && dataId && dataId.toString() === givenText) {\n          return data[i];\n        } else if (typeof field.child === 'string' && !isNullOrUndefined(getValue(field.child, data[i]))) {\n          // eslint-disable-next-line\n          var childData = getValue(field.child, data[i]); // eslint-disable-next-line\n\n          newData = this.getNestedItems(childData, this.getChildType(field), givenText);\n\n          if (newData !== undefined) {\n            break;\n          }\n        } else if (this.fields.dataSource instanceof DataManager && !isNullOrUndefined(getValue('child', data[i]))) {\n          var child = 'child'; // eslint-disable-next-line\n\n          newData = this.getNestedItems(getValue(child, data[i]), this.getChildType(field), givenText);\n\n          if (newData !== undefined) {\n            break;\n          }\n        }\n      }\n\n      return newData;\n    }\n  }, {\n    key: \"getChildType\",\n    value: function getChildType(mapper) {\n      return typeof mapper.child === 'string' || isNullOrUndefined(mapper.child) ? mapper : mapper.child;\n    }\n    /* To render the treeview */\n\n  }, {\n    key: \"renderTree\",\n    value: function renderTree() {\n      this.treeObj = new TreeView({\n        fields: this.getTreeFields(this.fields),\n        enableRtl: this.enableRtl,\n        nodeSelected: this.onNodeSelected.bind(this),\n        nodeChecked: this.onNodeChecked.bind(this),\n        nodeChecking: this.beforeCheck.bind(this),\n        actionFailure: this.onActionFailure.bind(this),\n        nodeClicked: this.onNodeClicked.bind(this),\n        dataBound: this.OnDataBound.bind(this),\n        allowMultiSelection: this.allowMultiSelection,\n        showCheckBox: this.showCheckBox,\n        autoCheck: this.treeSettings.autoCheck,\n        sortOrder: this.sortOrder,\n        expandOn: this.treeSettings.expandOn,\n        loadOnDemand: this.treeSettings.loadOnDemand,\n        nodeSelecting: this.onBeforeSelect.bind(this),\n        nodeTemplate: this.itemTemplate\n      });\n      this.treeObj.appendTo('#' + this.tree.id);\n    }\n    /* To render the popup element */\n\n  }, {\n    key: \"renderPopup\",\n    value: function renderPopup() {\n      var _this22 = this;\n\n      if (this.isFilteredData) {\n        this.filterObj.value = '';\n        this.treeObj.fields = this.getTreeFields(this.fields);\n        this.isFilterRestore = true;\n        this.isFilteredData = false;\n        this.hideCheckAll(false);\n      }\n\n      var isCancelled = false;\n      var args = {\n        cancel: false\n      };\n      this.trigger('beforeOpen', args, function (args) {\n        if (!args.cancel) {\n          addClass([_this22.inputWrapper], [ICONANIMATION]);\n\n          if (_this22.isFirstRender) {\n            _this22.popupEle = _this22.createElement('div', {\n              id: _this22.element.id + '_popup',\n              className: POPUP_CLASS + ' ' + (_this22.cssClass != null ? _this22.cssClass : '')\n            });\n            document.body.appendChild(_this22.popupEle);\n\n            _this22.createPopup(_this22.popupEle);\n          } else {\n            _this22.popupEle = _this22.popupObj.element;\n          }\n        } else {\n          isCancelled = true;\n        }\n\n        if (_this22.isFirstRender && !isCancelled) {\n          prepend([_this22.popupDiv], _this22.popupEle);\n          removeClass([_this22.popupDiv], DDTHIDEICON);\n\n          if (_this22.allowFiltering) {\n            _this22.renderFilter();\n          }\n\n          if (_this22.showCheckBox && _this22.showSelectAll && !_this22.popupDiv.classList.contains(NODATA)) {\n            _this22.createSelectAllWrapper();\n\n            _this22.popupEle.insertBefore(_this22.checkAllParent, _this22.popupDiv);\n          }\n\n          if (_this22.headerTemplate) {\n            _this22.setHeaderTemplate();\n          }\n\n          if (_this22.footerTemplate) {\n            _this22.setFooterTemplate();\n          }\n\n          _this22.isFirstRender = false;\n          /* eslint-disable */\n\n          if (_this22.hasTemplate && _this22.portals) {\n            _this22.portals = _this22.portals.concat(_this22.treeObj.portals);\n            /* eslint-enable */\n\n            _this22.renderReactTemplates();\n          }\n        }\n\n        if (!isCancelled) {\n          attributes(_this22.inputWrapper, {\n            'aria-expanded': 'true'\n          });\n\n          _this22.popupObj.show(null, _this22.zIndex === 1000 ? _this22.inputEle : null);\n\n          removeClass([_this22.popupEle], DDTHIDEICON);\n\n          _this22.updatePopupHeight();\n\n          _this22.popupObj.refreshPosition();\n\n          if (!(_this22.showCheckBox && _this22.showSelectAll) && !_this22.popupDiv.classList.contains(NODATA) && _this22.treeItems.length > 0) {\n            _this22.treeObj.element.focus();\n          }\n\n          if (_this22.checkSelectAll && _this22.checkBoxElement) {\n            var wrap = closest(_this22.checkBoxElement, '.' + CHECKBOXWRAP);\n\n            _this22.changeState(wrap, 'check');\n\n            _this22.checkSelectAll = false;\n          }\n\n          if (_this22.allowFiltering) {\n            removeClass([_this22.inputWrapper], [INPUTFOCUS]);\n\n            _this22.filterObj.element.focus();\n          }\n\n          var eventArgs = {\n            popup: _this22.popupObj\n          };\n\n          _this22.trigger('open', eventArgs);\n        }\n      });\n    }\n  }, {\n    key: \"updatePopupHeight\",\n    value: function updatePopupHeight() {\n      if (this.isFirstRender) {\n        return;\n      }\n\n      var popupHeight = this.getHeight();\n      this.popupEle.style.maxHeight = popupHeight;\n\n      if (this.allowFiltering) {\n        var height = Math.round(this.filterContainer.getBoundingClientRect().height);\n        popupHeight = formatUnit(parseInt(popupHeight, 10) - height + 'px');\n      }\n\n      if (this.headerTemplate) {\n        var _height2 = Math.round(this.header.getBoundingClientRect().height);\n\n        popupHeight = formatUnit(parseInt(popupHeight, 10) - _height2 + 'px');\n      }\n\n      if (this.showCheckBox && this.showSelectAll) {\n        var _height3 = Math.round(this.checkAllParent.getBoundingClientRect().height);\n\n        popupHeight = formatUnit(parseInt(popupHeight, 10) - _height3 + 'px');\n      }\n\n      if (this.footerTemplate) {\n        var _height4 = Math.round(this.footer.getBoundingClientRect().height);\n\n        popupHeight = formatUnit(parseInt(popupHeight, 10) - _height4 + 'px');\n      }\n\n      var border = parseInt(window.getComputedStyle(this.popupEle).borderTopWidth, 10);\n      border = border + parseInt(window.getComputedStyle(this.popupEle).borderBottomWidth, 10);\n      popupHeight = formatUnit(parseInt(popupHeight, 10) - border + 'px');\n      this.popupDiv.style.maxHeight = popupHeight;\n    }\n  }, {\n    key: \"createPopup\",\n    value: function createPopup(element) {\n      var _this23 = this;\n\n      if (this.isFirstRender) {\n        this.popupObj = new Popup(element, {\n          width: this.setWidth(),\n          targetType: 'relative',\n          collision: {\n            X: 'flip',\n            Y: 'flip'\n          },\n          relateTo: this.inputWrapper,\n          zIndex: this.zIndex,\n          enableRtl: this.enableRtl,\n          position: {\n            X: 'left',\n            Y: 'bottom'\n          },\n          close: function close() {\n            _this23.isPopupOpen = false;\n          },\n          open: function open() {\n            EventHandler.add(document, 'mousedown', _this23.onDocumentClick, _this23);\n            _this23.isPopupOpen = true;\n          },\n          targetExitViewport: function targetExitViewport() {\n            if (!Browser.isDevice) {\n              _this23.hidePopup();\n            }\n          }\n        });\n      }\n    }\n    /* To calculate the width when change via set model */\n\n  }, {\n    key: \"setElementWidth\",\n    value: function setElementWidth(inputWidth) {\n      var ddElement = this.inputWrapper;\n\n      if (!isNullOrUndefined(inputWidth)) {\n        if (typeof inputWidth === 'number') {\n          ddElement.style.width = formatUnit(inputWidth);\n        } else if (typeof inputWidth === 'string') {\n          ddElement.style.width = inputWidth.match(/px|%|em/) ? inputWidth : formatUnit(inputWidth);\n        }\n      }\n    }\n    /* To calculate the width of the popup */\n\n  }, {\n    key: \"setWidth\",\n    value: function setWidth() {\n      var width = formatUnit(this.popupWidth);\n\n      if (width.indexOf('%') > -1) {\n        width = (this.inputWrapper.offsetWidth * parseFloat(width) / 100).toString() + 'px';\n      } else if (typeof this.popupWidth === 'string') {\n        width = this.popupWidth.match(/px|em/) ? this.popupWidth : width;\n      }\n\n      return width;\n    }\n    /* To calculate the height of the popup */\n\n  }, {\n    key: \"getHeight\",\n    value: function getHeight() {\n      var height = formatUnit(this.popupHeight);\n\n      if (height.indexOf('%') > -1) {\n        // Will set the height of the popup according to the view port height\n        height = (document.documentElement.clientHeight * parseFloat(height) / 100).toString() + 'px';\n      } else if (typeof this.popupHeight === 'string') {\n        height = this.popupHeight.match(/px|em/) ? this.popupHeight : height;\n      }\n\n      return height;\n    }\n  }, {\n    key: \"onDocumentClick\",\n    value: function onDocumentClick(e) {\n      var target = e.target;\n      var isTree = closest(target, '.' + PARENTITEM);\n      var isFilter = closest(target, '.' + FILTERWRAP);\n      var isHeader = closest(target, '.' + HEADER);\n      var isFooter = closest(target, '.' + FOOTER);\n      var isScroller = target.classList.contains(DROPDOWN) ? true : matches(target, '.e-ddt .e-popup') || matches(target, '.e-ddt .e-treeview');\n\n      if (this.isPopupOpen && (this.inputWrapper.contains(target) || isTree || isFilter || isScroller || isHeader || isFooter) || (this.allowMultiSelection || this.showCheckBox) && (this.isPopupOpen && target.classList.contains(CHIP_CLOSE) || this.isPopupOpen && (target.classList.contains(CHECKALLPARENT) || target.classList.contains(ALLTEXT) || target.classList.contains(CHECKBOXFRAME)))) {\n        this.isDocumentClick = false;\n        e.preventDefault();\n      } else if (!this.inputWrapper.contains(target) && this.inputFocus) {\n        this.focusOut(e);\n      }\n    }\n  }, {\n    key: \"onActionFailure\",\n    value: function onActionFailure(e) {\n      this.trigger('actionFailure', e);\n      this.l10nUpdate(true);\n      addClass([this.popupDiv], NODATA);\n    }\n  }, {\n    key: \"OnDataBound\",\n    value: function OnDataBound(args) {\n      this.treeItems = args.data;\n\n      if (this.treeItems.length <= 0) {\n        this.l10nUpdate();\n        addClass([this.popupDiv], NODATA);\n        this.hideCheckAll(true);\n      } else if (this.popupDiv.classList.contains(NODATA) && this.treeItems.length >= 1) {\n        removeClass([this.popupDiv], NODATA);\n        this.hideCheckAll(false);\n      }\n\n      this.treeDataType = this.getTreeDataType(this.treeItems, this.fields);\n\n      if (this.isFirstRender && this.isRemoteData) {\n        this.setTreeValue();\n        this.setTreeText();\n        this.updateHiddenValue();\n        this.setSelectedValue();\n\n        if (!this.wrapText) {\n          this.updateView();\n        }\n\n        this.treeObj.element.focus();\n      }\n\n      var eventArgs = {\n        data: args.data\n      };\n      this.trigger('dataBound', eventArgs);\n\n      if (this.isFilteredData) {\n        this.treeObj.expandAll();\n      }\n\n      if (this.isFilterRestore) {\n        this.restoreFilterSelection();\n        this.isFilterRestore = false;\n      }\n    }\n  }, {\n    key: \"restoreFilterSelection\",\n    value: function restoreFilterSelection() {\n      if (this.showCheckBox) {\n        this.treeObj.checkedNodes = this.value ? this.value : [];\n      } else {\n        this.treeObj.selectedNodes = this.value ? this.value : [];\n      }\n    }\n    /* To set cssclass for the dropdowntree */\n\n  }, {\n    key: \"setCssClass\",\n    value: function setCssClass(newClass, oldClass) {\n      var elements = this.popupObj ? [this.inputWrapper, this.popupObj.element] : [this.inputWrapper];\n\n      if (!isNullOrUndefined(oldClass) && oldClass !== '') {\n        removeClass(elements, oldClass.split(' '));\n      }\n\n      if (!isNullOrUndefined(newClass) && newClass !== '') {\n        addClass(elements, newClass.split(' '));\n      }\n    }\n  }, {\n    key: \"setEnableRTL\",\n    value: function setEnableRTL(state) {\n      if (state) {\n        this.inputWrapper.classList.add(RTL);\n      } else {\n        this.inputWrapper.classList.remove(RTL);\n      }\n\n      if (this.popupObj) {\n        this.popupObj.enableRtl = state;\n        this.popupObj.dataBind();\n      }\n\n      if (this.treeObj) {\n        this.treeObj.enableRtl = state;\n        this.treeObj.dataBind();\n      }\n    }\n    /* To set enable property */\n\n  }, {\n    key: \"setEnable\",\n    value: function setEnable() {\n      Input.setEnabled(this.enabled, this.inputEle);\n\n      if (this.enabled) {\n        removeClass([this.inputWrapper], DISABLED);\n        this.inputEle.setAttribute('aria-disabled', 'false');\n        this.inputWrapper.setAttribute('aria-disabled', 'false');\n      } else {\n        if (this.isPopupOpen) {\n          this.hidePopup();\n        }\n\n        addClass([this.inputWrapper], DISABLED);\n\n        if (this.inputWrapper && this.inputWrapper.classList.contains(INPUTFOCUS)) {\n          removeClass([this.inputWrapper], [INPUTFOCUS]);\n        }\n\n        this.inputEle.setAttribute('aria-disabled', 'true');\n        this.inputWrapper.setAttribute('aria-disabled', 'true');\n      }\n    }\n  }, {\n    key: \"cloneFields\",\n    value: function cloneFields(fields) {\n      var clonedField = {\n        dataSource: fields.dataSource,\n        value: fields.value,\n        text: fields.text,\n        parentValue: fields.parentValue,\n        child: this.cloneChildField(fields.child),\n        hasChildren: fields.hasChildren,\n        expanded: fields.expanded,\n        iconCss: fields.iconCss,\n        imageUrl: fields.imageUrl,\n        htmlAttributes: fields.htmlAttributes,\n        query: fields.query,\n        selected: fields.selected,\n        tableName: fields.tableName,\n        tooltip: fields.tooltip\n      };\n      return clonedField;\n    }\n  }, {\n    key: \"cloneChildField\",\n    value: function cloneChildField(fields) {\n      if (typeof fields === 'string') {\n        return fields;\n      } else {\n        var clonedField = {\n          dataSource: fields.dataSource,\n          value: fields.value,\n          text: fields.text,\n          parentValue: fields.parentValue,\n          child: fields.child ? this.cloneChildField(fields.child) : null,\n          hasChildren: fields.hasChildren,\n          expanded: fields.expanded,\n          iconCss: fields.iconCss,\n          imageUrl: fields.imageUrl,\n          htmlAttributes: fields.htmlAttributes,\n          query: fields.query,\n          selected: fields.selected,\n          tableName: fields.tableName,\n          tooltip: fields.tooltip\n        };\n        return clonedField;\n      }\n    }\n  }, {\n    key: \"getTreeFields\",\n    value: function getTreeFields(fields) {\n      var treeFields = {\n        dataSource: fields.dataSource,\n        id: fields.value,\n        text: fields.text,\n        parentID: fields.parentValue,\n        child: this.getTreeChildren(fields.child),\n        hasChildren: fields.hasChildren,\n        expanded: fields.expanded,\n        iconCss: fields.iconCss,\n        imageUrl: fields.imageUrl,\n        isChecked: fields.selected,\n        htmlAttributes: fields.htmlAttributes,\n        query: fields.query,\n        selected: fields.selected,\n        tableName: fields.tableName,\n        tooltip: fields.tooltip\n      };\n      return treeFields;\n    }\n  }, {\n    key: \"getTreeChildren\",\n    value: function getTreeChildren(mapper) {\n      if (typeof mapper === 'string') {\n        return mapper;\n      } else if (!isNullOrUndefined(mapper)) {\n        mapper = this.getActualProperties(mapper);\n        var childFields = mapper;\n\n        if (mapper.value) {\n          childFields.id = mapper.value;\n        }\n\n        if (mapper.parentValue) {\n          childFields.parentID = mapper.parentValue;\n        }\n\n        if (mapper.child) {\n          childFields.child = this.getTreeChildren(mapper.child);\n        }\n\n        if (mapper.selected && this.showCheckBox) {\n          childFields.isChecked = mapper.selected;\n        }\n\n        return childFields;\n      }\n\n      return null;\n    } // eslint-disable-next-line\n\n  }, {\n    key: \"getTreeDataType\",\n    value: function getTreeDataType(ds, field) {\n      if (this.fields.dataSource instanceof DataManager) {\n        for (var i = 0; i < ds.length; i++) {\n          if (typeof field.child === 'string' && isNullOrUndefined(getValue(field.child, ds[i]))) {\n            return 1;\n          }\n        }\n\n        return 2;\n      }\n\n      for (var _i8 = 0, len = ds.length; _i8 < len; _i8++) {\n        if (typeof field.child === 'string' && !isNullOrUndefined(getValue(field.child, ds[_i8]))) {\n          return 2;\n        }\n\n        if (!isNullOrUndefined(getValue(field.parentValue, ds[_i8])) || !isNullOrUndefined(getValue(field.hasChildren, ds[_i8]))) {\n          return 1;\n        }\n      }\n\n      return 1;\n    }\n    /* Triggers when the tree fields is changed dynamically */\n\n  }, {\n    key: \"setFields\",\n    value: function setFields() {\n      this.resetValue();\n\n      if (this.hasTemplate) {\n        this.updateTemplate();\n      }\n\n      this.treeObj.fields = this.getTreeFields(this.fields);\n      this.treeObj.dataBind();\n    }\n  }, {\n    key: \"getEventArgs\",\n    value: function getEventArgs(args) {\n      // eslint-disable-next-line\n      var checkData = args.data; // eslint-disable-next-line\n\n      var selectData = args.nodeData;\n      var state;\n\n      if (this.showCheckBox) {\n        if (args.action === 'check') {\n          state = 'select';\n        } else if (args.action === 'uncheck') {\n          state = 'un-select';\n        }\n      }\n\n      var eventArgs = {\n        action: this.showCheckBox ? state : args.action,\n        isInteracted: this.isClicked ? true : args.isInteracted,\n        item: args.node,\n        itemData: this.showCheckBox ? checkData[0] : selectData\n      };\n      return eventArgs;\n    }\n  }, {\n    key: \"onBeforeSelect\",\n    value: function onBeforeSelect(args) {\n      if (args.isInteracted) {\n        this.oldValue = this.value ? this.value.slice() : this.value;\n\n        if (this.value === null) {\n          this.setProperties({\n            value: []\n          }, true);\n        }\n      }\n    }\n  }, {\n    key: \"updateHiddenValue\",\n    value: function updateHiddenValue() {\n      if (this.allowMultiSelection || this.showCheckBox) {\n        return;\n      }\n\n      if (this.value && this.value.length) {\n        this.hiddenElement.innerHTML = '<option selected value =\"' + this.value[0] + '\">' + this.text + '</option>';\n      } else {\n        this.hiddenElement.innerHTML = '';\n      }\n    }\n    /* Triggers when the tree node is selected */\n\n  }, {\n    key: \"onNodeSelected\",\n    value: function onNodeSelected(args) {\n      if (this.showCheckBox) {\n        return;\n      }\n\n      var selectedText;\n\n      if (args.isInteracted) {\n        var id = getValue('id', args.nodeData).toString();\n\n        if (!this.allowMultiSelection) {\n          this.hiddenElement.innerHTML = '';\n          this.setProperties({\n            value: [id]\n          }, true);\n\n          if (this.itemTemplate) {\n            selectedText = getValue('text', this.treeObj.getNode(id));\n          } else {\n            selectedText = getValue('text', args.nodeData).toString();\n          }\n\n          Input.setValue(selectedText, this.inputEle, this.floatLabelType);\n          this.setProperties({\n            text: selectedText\n          }, true);\n          this.currentText = this.text;\n          this.currentValue = this.value;\n          attributes(this.inputWrapper, {\n            'aria-describedby': this.element.id\n          });\n          attributes(this.inputWrapper, {\n            'aria-activedescendant': id.toString()\n          });\n          this.updateHiddenValue();\n          this.showOverAllClear();\n          this.hidePopup();\n          this.isNodeSelected = true;\n        } else if (this.allowMultiSelection) {\n          this.setMultiSelect();\n        }\n      }\n\n      var eventArgs = this.getEventArgs(args);\n      this.trigger('select', eventArgs);\n\n      if (this.isValueChange && !this.changeOnBlur) {\n        this.triggerChangeEvent(this.keyEventArgs);\n        this.isValueChange = false;\n      }\n    }\n  }, {\n    key: \"onNodeClicked\",\n    value: function onNodeClicked(args) {\n      if (!this.changeOnBlur && this.isNodeSelected) {\n        this.triggerChangeEvent(args.event);\n        this.isNodeSelected = false;\n      }\n\n      var target = args.event.target;\n\n      if ((target.classList.contains('e-fullrow') || target.classList.contains('e-list-text')) && this.showCheckBox) {\n        this.isClicked = true; // eslint-disable-next-line\n\n        var getNodeDetails = this.treeObj.getNode(args.node);\n\n        if (getNodeDetails.isChecked === 'true') {\n          this.treeObj.uncheckAll([args.node]);\n        } else {\n          this.treeObj.checkAll([args.node]);\n        }\n\n        this.isClicked = false;\n        this.setMultiSelect();\n        this.ensurePlaceHolder();\n      }\n\n      if (!this.changeOnBlur && (this.allowMultiSelection || this.showCheckBox)) {\n        this.triggerChangeEvent(args.event);\n      }\n    }\n  }, {\n    key: \"onNodeChecked\",\n    value: function onNodeChecked(args) {\n      var eventArgs = this.getEventArgs(args);\n      this.trigger('select', eventArgs);\n\n      if (this.isFilteredData && args.action === 'uncheck') {\n        var id = getValue('id', args.data[0]).toString();\n        this.removeSelectedData(id, true);\n      }\n\n      if (!this.isChipDelete && args.isInteracted) {\n        this.setMultiSelect();\n        this.ensurePlaceHolder();\n      }\n\n      if (this.showSelectAll && this.checkBoxElement) {\n        var nodes = this.treeObj.element.querySelectorAll('li');\n        var checkedNodes = this.treeObj.element.querySelectorAll('li .e-checkbox-wrapper[aria-checked=true]');\n        var wrap = closest(this.checkBoxElement, '.' + CHECKBOXWRAP);\n\n        if (wrap && args.action === 'uncheck') {\n          this.isReverseUpdate = true;\n          this.changeState(wrap, 'uncheck');\n          this.isReverseUpdate = false;\n        } else if (wrap && args.action === 'check' && checkedNodes.length === nodes.length) {\n          this.isReverseUpdate = true;\n          this.changeState(wrap, 'check');\n          this.isReverseUpdate = false;\n        }\n      }\n    }\n  }, {\n    key: \"beforeCheck\",\n    value: function beforeCheck(args) {\n      if (args.isInteracted) {\n        this.oldValue = this.value ? this.value.slice() : this.value;\n      }\n    }\n  }, {\n    key: \"updateClearButton\",\n    value: function updateClearButton(state) {\n      if (state) {\n        if (!this.inputWrapper.contains(this.overAllClear)) {\n          this.inputEle.parentElement.insertBefore(this.overAllClear, this.inputEle.nextSibling);\n        } else {\n          removeClass([this.overAllClear], HIDEICON);\n          addClass([this.inputWrapper], SHOW_CLEAR);\n        }\n      } else {\n        addClass([this.overAllClear], HIDEICON);\n        removeClass([this.inputWrapper], SHOW_CLEAR);\n      }\n\n      if ((this.allowMultiSelection || this.showCheckBox) && this.chipWrapper) {\n        var chipClose = selectAll('.' + CHIP_CLOSE, this.chipWrapper);\n\n        for (var i = 0; i < chipClose.length; i++) {\n          if (!state) {\n            addClass([chipClose[i]], HIDEICON);\n          } else {\n            removeClass([chipClose[i]], HIDEICON);\n          }\n        }\n      }\n    }\n  }, {\n    key: \"updateDropDownIconState\",\n    value: function updateDropDownIconState(state) {\n      var spinIcon = select('.' + DDTICON, this.inputWrapper);\n\n      if (state) {\n        if (!spinIcon) {\n          Input.appendSpan(DROPDOWNICON, this.inputWrapper, this.createElement);\n        } else {\n          removeClass([spinIcon], HIDEICON);\n        }\n\n        addClass([this.inputWrapper], SHOW_DD_ICON);\n      } else {\n        addClass([spinIcon], HIDEICON);\n        removeClass([this.inputWrapper], SHOW_DD_ICON);\n      }\n    }\n  }, {\n    key: \"updateMode\",\n    value: function updateMode() {\n      if (this.mode === 'Custom') {\n        return;\n      }\n\n      if (this.mode !== 'Delimiter') {\n        if (!this.inputWrapper.contains(this.chipWrapper)) {\n          this.createChip();\n        }\n\n        var isValid = this.getValidMode();\n\n        if (this.chipWrapper.classList.contains(HIDEICON) && isValid) {\n          removeClass([this.chipWrapper], HIDEICON);\n          addClass([this.inputWrapper], SHOW_CHIP);\n        } else if (!isValid) {\n          addClass([this.chipWrapper], HIDEICON);\n          removeClass([this.inputWrapper], SHOW_CHIP);\n        }\n\n        var isValue = this.value !== null ? this.value.length !== 0 ? true : false : false;\n\n        if (isValid && isValue) {\n          addClass([this.inputEle], CHIP_INPUT);\n        } else {\n          removeClass([this.inputEle], CHIP_INPUT);\n        }\n      } else if (this.inputEle.classList.contains(CHIP_INPUT)) {\n        removeClass([this.inputEle], CHIP_INPUT);\n\n        if (this.chipWrapper) {\n          addClass([this.chipWrapper], HIDEICON);\n          removeClass([this.inputWrapper], SHOW_CHIP);\n        }\n      }\n    }\n  }, {\n    key: \"ensurePlaceHolder\",\n    value: function ensurePlaceHolder() {\n      if (this.value && this.value.length === 0) {\n        removeClass([this.inputEle], CHIP_INPUT);\n\n        if (this.chipWrapper) {\n          addClass([this.chipWrapper], HIDEICON);\n        }\n      }\n    }\n  }, {\n    key: \"ensureClearIconPosition\",\n    value: function ensureClearIconPosition(floatLabelType) {\n      if (floatLabelType !== 'Never') {\n        this.inputWrapper.insertBefore(this.overAllClear, this.inputObj.buttons[0]);\n      }\n    }\n  }, {\n    key: \"setMultiSelectValue\",\n    value: function setMultiSelectValue(newValues) {\n      if (!this.isFilteredData) {\n        this.setProperties({\n          value: newValues\n        }, true);\n\n        if (newValues && newValues.length !== 0 && !this.showCheckBox) {\n          this.treeObj.selectedNodes = this.value.slice();\n          this.treeObj.dataBind();\n        }\n      } else {\n        var selectedValues = isNullOrUndefined(this.value) ? [] : this.value;\n\n        for (var i = 0; i < newValues.length; i++) {\n          if (isNullOrUndefined(this.value) || this.value.indexOf(newValues[i]) === -1) {\n            selectedValues.push(newValues[i]);\n          }\n        }\n\n        this.setProperties({\n          value: selectedValues\n        }, true);\n      }\n    }\n  }, {\n    key: \"setMultiSelect\",\n    value: function setMultiSelect() {\n      if (this.showCheckBox && !this.isDynamicChange) {\n        this.setMultiSelectValue(this.treeObj.checkedNodes.slice());\n      } else {\n        var ddtValue = this.allowMultiSelection ? this.showCheckBox ? this.treeObj.checkedNodes : this.treeObj.selectedNodes : this.value ? this.showCheckBox ? this.value : [this.value[0]] : null;\n        this.setMultiSelectValue(ddtValue);\n\n        if (this.showCheckBox && this.value !== null) {\n          this.treeObj.checkedNodes = this.value;\n          this.treeObj.dataBind();\n        }\n      }\n\n      this.selectedText = [];\n      var checkSelection = this.allowMultiSelection ? true : this.showCheckBox ? true : false;\n\n      if (this.inputWrapper.contains(this.chipWrapper) && !checkSelection) {\n        removeClass([this.inputEle], CHIP_INPUT);\n        detach(this.chipWrapper);\n      }\n\n      var isValid = this.getValidMode();\n\n      if (isValid && this.value !== null) {\n        addClass([this.inputEle], CHIP_INPUT);\n\n        if (this.chipWrapper) {\n          removeClass([this.chipWrapper], HIDEICON);\n        }\n      }\n\n      var isValue = this.value ? this.value.length ? true : false : false;\n\n      if (this.chipWrapper && this.mode === 'Box' && !isValue) {\n        addClass([this.chipWrapper], HIDEICON);\n        removeClass([this.inputEle], CHIP_INPUT);\n      }\n\n      this.updateSelectedValues();\n    } // eslint-disable-next-line\n\n  }, {\n    key: \"getSelectedData\",\n    value: function getSelectedData(value) {\n      // eslint-disable-next-line\n      var data = null;\n\n      if (this.isFilteredData) {\n        for (var i = 0; i < this.selectedData.length; i++) {\n          if (getValue(this.treeSettings.loadOnDemand ? this.fields.value : 'id', this.selectedData[i]).toString() === value) {\n            data = this.selectedData[i];\n            break;\n          }\n        }\n      }\n\n      if (isNullOrUndefined(data)) {\n        if (this.treeSettings.loadOnDemand) {\n          data = this.getNodeData(value);\n        } else {\n          data = this.treeObj.getNode(value);\n        }\n\n        if (!isNullOrUndefined(data)) {\n          this.selectedData.push(data);\n        }\n      }\n\n      return data;\n    }\n  }, {\n    key: \"getNodeData\",\n    value: function getNodeData(id) {\n      var childItems;\n\n      if (isNullOrUndefined(id)) {\n        return childItems;\n      } else if (this.treeDataType === 1) {\n        for (var i = 0, objlen = this.treeItems.length; i < objlen; i++) {\n          var dataId = getValue(this.fields.value, this.treeItems[i]);\n\n          if (!isNullOrUndefined(this.treeItems[i]) && !isNullOrUndefined(dataId) && dataId.toString() === id) {\n            return this.treeItems[i];\n          }\n        }\n      } else {\n        return this.getChildNodeData(this.treeItems, this.fields, id);\n      }\n\n      return childItems;\n    }\n  }, {\n    key: \"getChildNodeData\",\n    value: function getChildNodeData(obj, mapper, id) {\n      var newChildItems;\n\n      if (isNullOrUndefined(obj)) {\n        return newChildItems;\n      }\n\n      for (var i = 0, objlen = obj.length; i < objlen; i++) {\n        var dataValue = getValue(mapper.value, obj[i]);\n\n        if (obj[i] && dataValue && dataValue.toString() === id) {\n          return obj[i];\n        } else if (typeof mapper.child === 'string' && !isNullOrUndefined(getValue(mapper.child, obj[i]))) {\n          var childNodeData = getValue(mapper.child, obj[i]);\n          newChildItems = this.getChildNodeData(childNodeData, this.getChildMapperFields(mapper), id);\n\n          if (newChildItems !== undefined) {\n            break;\n          }\n        } else if (this.fields.dataSource instanceof DataManager && !isNullOrUndefined(getValue('child', obj[i]))) {\n          var child = 'child';\n          newChildItems = this.getChildNodeData(getValue(child, obj[i]), this.getChildMapperFields(mapper), id);\n\n          if (newChildItems !== undefined) {\n            break;\n          }\n        }\n      }\n\n      return newChildItems;\n    }\n  }, {\n    key: \"getChildMapperFields\",\n    value: function getChildMapperFields(mapper) {\n      return typeof mapper.child === 'string' || isNullOrUndefined(mapper.child) ? mapper : mapper.child;\n    }\n  }, {\n    key: \"removeSelectedData\",\n    value: function removeSelectedData(value, muteOnChange) {\n      var selectedValues = isNullOrUndefined(this.value) ? [] : this.value.slice();\n      selectedValues.splice(selectedValues.indexOf(value), 1);\n      this.setProperties({\n        value: selectedValues\n      }, muteOnChange);\n\n      for (var i = 0; i < this.selectedData.length; i++) {\n        if (getValue(this.treeSettings.loadOnDemand ? this.fields.value : 'id', this.selectedData[i]).toString() === value) {\n          this.selectedData.splice(i, 1);\n          break;\n        }\n      }\n    }\n  }, {\n    key: \"updateSelectedValues\",\n    value: function updateSelectedValues() {\n      this.dataValue = '';\n      var temp;\n      var text;\n      var textValue = ''; // eslint-disable-next-line\n\n      var selectedData;\n      this.hiddenElement.innerHTML = '';\n      var hiddenInputValue = '';\n\n      if ((!this.isChipDelete || this.treeSettings.autoCheck) && this.inputWrapper.contains(this.chipWrapper)) {\n        this.chipCollection.innerHTML = '';\n      }\n\n      if (!this.isFilteredData) {\n        this.selectedData = [];\n      }\n\n      if (!isNullOrUndefined(this.value)) {\n        for (var i = 0, len = this.value.length; i < len; i++) {\n          selectedData = this.getSelectedData(this.value[i]);\n          text = getValue(this.treeSettings.loadOnDemand ? this.fields.text : 'text', selectedData);\n          this.selectedText.push(text);\n          temp = this.selectedText[this.selectedText.length - 1];\n\n          if (this.selectedText.length > 1) {\n            this.dataValue += this.delimiterChar + ' ' + temp;\n            textValue += ',' + temp;\n          } else {\n            this.dataValue += temp;\n            textValue += temp;\n          }\n\n          if (this.mode !== 'Custom' && this.mode !== 'Delimiter' && (!this.isChipDelete || this.treeSettings.autoCheck) && (this.allowMultiSelection || this.showCheckBox)) {\n            this.setChipValues(temp, this.value[i]);\n          }\n\n          hiddenInputValue += '<option selected value =\"' + this.value[i] + '\">' + this.selectedText[this.selectedText.length - 1] + '</option>';\n        }\n\n        if (this.selectedText.length >= 1) {\n          this.setProperties({\n            text: textValue\n          }, true);\n        }\n\n        this.hiddenElement.innerHTML = hiddenInputValue;\n\n        if (this.mode === 'Custom' && (this.allowMultiSelection || this.showCheckBox)) {\n          this.setTagValues();\n        }\n      }\n\n      var isValid = this.getValidMode();\n\n      if (this.mode !== 'Custom' && this.mode !== 'Box' && (this.allowMultiSelection || this.showCheckBox) && !isValid) {\n        if (this.chipWrapper) {\n          addClass([this.chipWrapper], HIDEICON);\n          removeClass([this.inputWrapper], SHOW_CHIP);\n        }\n      }\n\n      Input.setValue(this.dataValue, this.inputEle, this.floatLabelType);\n\n      if (textValue === '') {\n        this.setProperties({\n          text: null\n        }, true);\n      } else {\n        this.setProperties({\n          text: textValue\n        }, true);\n      }\n\n      if (this.showClearButton && this.inputFocus) {\n        this.showOverAllClear();\n      }\n\n      if ((this.allowMultiSelection || this.showCheckBox) && this.popupObj) {\n        this.popupObj.refreshPosition();\n      }\n\n      this.currentText = this.text;\n      this.currentValue = this.value;\n    }\n  }, {\n    key: \"setChipValues\",\n    value: function setChipValues(text, value) {\n      if (!this.inputWrapper.contains(this.chipWrapper)) {\n        this.createChip();\n      }\n\n      var chip = this.createElement('span', {\n        className: CHIP,\n        attrs: {\n          'data-value': value\n        }\n      });\n      var chipContent = this.createElement('span', {\n        className: CHIP_CONTENT\n      });\n      var chipClose = this.createElement('span', {\n        className: CHIP_CLOSE + ' ' + ICONS\n      });\n      chipContent.innerHTML = text;\n      chip.appendChild(chipContent);\n      this.chipCollection.appendChild(chip);\n\n      if (this.showClearButton) {\n        chip.appendChild(chipClose);\n        EventHandler.add(chipClose, 'mousedown', this.removeChip, this);\n      }\n    }\n  }, {\n    key: \"setTagValues\",\n    value: function setTagValues() {\n      if (this.value === null || this.text == null) {\n        return;\n      }\n\n      if (!this.inputWrapper.contains(this.chipWrapper)) {\n        this.createChip();\n      }\n\n      if (!this.inputWrapper.classList.contains(SHOW_CHIP)) {\n        addClass([this.inputWrapper], SHOW_CHIP);\n      }\n\n      var chip = this.createElement('span', {\n        className: CHIP\n      });\n\n      if (!this.inputEle.classList.contains(CHIP_INPUT)) {\n        addClass([this.inputEle], CHIP_INPUT);\n      }\n\n      if (this.chipWrapper.classList.contains(HIDEICON)) {\n        removeClass([this.chipWrapper], HIDEICON);\n      }\n\n      var chipContent = this.createElement('span', {\n        className: CHIP_CONTENT\n      });\n      var template = this.customTemplate;\n      var templateId = this.customTemplateId;\n      var templatestring = 'customTemplate';\n      var compiledString = this.templateComplier(template);\n      var tempArr = compiledString({\n        'value': this.value,\n        'text': this.text\n      }, this, templatestring, templateId, this.isStringTemplate, undefined, chipContent);\n\n      if (tempArr) {\n        tempArr = Array.prototype.slice.call(tempArr);\n        append(tempArr, chipContent);\n      }\n\n      chip.appendChild(chipContent);\n      this.chipCollection.appendChild(chip);\n    }\n  }, {\n    key: \"setSelectAllWrapper\",\n    value: function setSelectAllWrapper(state) {\n      if (this.isFirstRender) {\n        return;\n      }\n\n      if (state && !this.popupEle.contains(this.checkAllParent) && this.showCheckBox) {\n        this.createSelectAllWrapper();\n        this.popupEle.insertBefore(this.checkAllParent, this.popupDiv);\n      } else if (this.popupEle.contains(this.checkAllParent)) {\n        detach(this.checkAllParent);\n        this.checkAllParent = null;\n      }\n    }\n  }, {\n    key: \"setHeaderTemplate\",\n    value: function setHeaderTemplate() {\n      if (this.header) {\n        this.header.innerHTML = '';\n      } else {\n        this.header = this.createElement('div');\n        addClass([this.header], HEADER);\n      } // eslint-disable-next-line\n\n\n      var compiledString = this.templateComplier(this.headerTemplate);\n      var tempArr = compiledString({}, this, 'headerTemplate', this.headerTemplateId, this.isStringTemplate, undefined, this.header);\n\n      if (tempArr) {\n        tempArr = Array.prototype.slice.call(tempArr);\n        append(tempArr, this.header);\n      }\n\n      this.popupEle.insertBefore(this.header, this.checkAllParent ? this.checkAllParent : this.popupDiv);\n    } // eslint-disable-next-line\n\n  }, {\n    key: \"templateComplier\",\n    value: function templateComplier(template) {\n      if (template) {\n        // eslint-disable-next-line\n        try {\n          if (document.querySelectorAll(template).length) {\n            return compile(document.querySelector(template).innerHTML.trim());\n          }\n        } catch (e) {\n          return compile(template);\n        }\n      }\n\n      return compile(template);\n    }\n  }, {\n    key: \"setFooterTemplate\",\n    value: function setFooterTemplate() {\n      if (this.footer) {\n        this.footer.innerHTML = '';\n      } else {\n        this.footer = this.createElement('div');\n        addClass([this.footer], FOOTER);\n      } // eslint-disable-next-line\n\n\n      var compiledString = this.templateComplier(this.footerTemplate);\n      var tempArr = compiledString({}, this, 'footerTemplate', this.footerTemplateId, this.isStringTemplate, undefined, this.footer);\n\n      if (tempArr) {\n        tempArr = Array.prototype.slice.call(tempArr);\n        append(tempArr, this.footer);\n      }\n\n      append([this.footer], this.popupEle);\n    }\n  }, {\n    key: \"clearAll\",\n    value: function clearAll(e) {\n      if (!this.enabled || this.readonly) {\n        return;\n      }\n\n      this.resetValue();\n      this.showOverAllClear();\n\n      if (this.allowMultiSelection || this.showCheckBox) {\n        if (this.popupObj) {\n          this.popupObj.refreshPosition();\n        }\n\n        if (!this.wrapText) {\n          this.updateOverflowWrapper(true);\n        }\n      }\n\n      if (e) {\n        this.isClearButtonClick = true;\n      }\n\n      if (!this.changeOnBlur) {\n        this.triggerChangeEvent(e);\n      }\n    }\n  }, {\n    key: \"removeChip\",\n    value: function removeChip(e) {\n      if (!this.enabled || this.readonly) {\n        return;\n      }\n\n      var element = e.target.parentElement;\n      var value = element.getAttribute('data-value');\n\n      if (this.chipCollection) {\n        if (element) {\n          remove(element);\n        }\n      }\n\n      this.isChipDelete = true;\n      this.isClearButtonClick = true;\n      this.removeSelectedData(value, true);\n      this.selectedText = [];\n\n      if (this.allowMultiSelection) {\n        this.treeObj.selectedNodes = this.value.slice();\n        this.updateSelectedValues();\n      }\n\n      if (this.showCheckBox) {\n        this.treeObj.uncheckAll([value]);\n        this.clearCheckAll();\n        this.setMultiSelect();\n      }\n\n      this.triggerChangeEvent(e);\n      this.isChipDelete = false;\n      this.ensurePlaceHolder();\n    }\n  }, {\n    key: \"resetValue\",\n    value: function resetValue(isDynamicChange) {\n      Input.setValue(null, this.inputEle, this.floatLabelType);\n\n      if (!isDynamicChange) {\n        this.oldValue = this.value;\n        this.setProperties({\n          value: []\n        }, true);\n      }\n\n      this.dataValue = null;\n      this.setProperties({\n        text: null\n      }, true);\n      this.selectedData = [];\n      setValue('selectedNodes', [], this.treeObj);\n      this.hiddenElement.innerHTML = '';\n\n      if (this.showCheckBox) {\n        this.treeObj.uncheckAll();\n        this.setMultiSelect();\n        this.clearCheckAll();\n      }\n\n      if (this.oldValue === null && !isDynamicChange) {\n        this.removeValue = true;\n      } else if (isDynamicChange) {\n        this.triggerChangeEvent();\n      }\n\n      if ((this.allowMultiSelection || this.showCheckBox) && this.chipWrapper) {\n        this.chipCollection.innerHTML = '';\n\n        if (!this.wrapText) {\n          this.updateOverflowWrapper(true);\n        }\n\n        this.ensurePlaceHolder();\n      }\n    }\n  }, {\n    key: \"clearCheckAll\",\n    value: function clearCheckAll() {\n      if (this.showSelectAll && this.value && this.value.length === 0) {\n        this.setLocale(false);\n      }\n    }\n  }, {\n    key: \"selectAllItems\",\n    value: function selectAllItems(state) {\n      if (this.showCheckBox) {\n        if (state) {\n          this.treeObj.checkAll();\n        } else {\n          this.treeObj.uncheckAll();\n        }\n\n        this.checkSelectAll = true;\n      } else if (this.allowMultiSelection) {\n        if (!state) {\n          this.treeObj.selectedNodes = [];\n        } else {\n          var li = selectAll('li', this.treeObj.element);\n          var id;\n          var arr = [];\n\n          for (var i = 0; i < li.length; i++) {\n            id = li[i].getAttribute('data-uid').toString();\n            arr.push(id);\n          }\n\n          this.treeObj.selectedNodes = arr;\n        }\n      }\n\n      this.updateMode();\n      this.setMultiSelect();\n\n      if (!this.wrapText) {\n        if (state) {\n          this.updateView();\n        } else {\n          this.updateOverflowWrapper(true);\n        }\n      }\n    }\n  }, {\n    key: \"updateTreeSettings\",\n    value: function updateTreeSettings(prop) {\n      var value = Object.keys(prop.treeSettings)[0];\n\n      if (value === 'autoCheck') {\n        this.ensureAutoCheck();\n        this.treeObj.autoCheck = this.treeSettings.autoCheck;\n      } else if (value === 'loadOnDemand') {\n        this.treeObj.loadOnDemand = this.treeSettings.loadOnDemand;\n      } else if (value === 'expandOn') {\n        this.treeObj.expandOn = this.treeSettings.expandOn;\n        this.treeObj.dataBind();\n        return;\n      }\n\n      this.treeObj.dataBind();\n      this.setMultiSelect();\n      this.updateValue(this.value);\n    }\n  }, {\n    key: \"updateCheckBoxState\",\n    value: function updateCheckBoxState(checkBox) {\n      if (this.hasTemplate) {\n        this.updateTemplate();\n      }\n\n      if (!this.wrapText) {\n        this.updateOverflowWrapper(false);\n      }\n\n      this.treeObj.showCheckBox = checkBox;\n      this.treeObj.dataBind();\n      this.isDynamicChange = true;\n      this.setSelectAllWrapper(this.showSelectAll);\n\n      if (this.showSelectAll) {\n        this.setLocale();\n      }\n\n      if (this.showCheckBox) {\n        this.updateMode();\n      }\n\n      this.setMultiSelect();\n      this.isDynamicChange = false;\n    }\n  }, {\n    key: \"updateTemplate\",\n    value: function updateTemplate() {\n      if (this.popupObj) {\n        this.clearTemplate();\n        /* eslint-disable */\n\n        this.portals = [];\n        /* eslint-enable */\n\n        this.popupObj.destroy();\n\n        if (this.isPopupOpen) {\n          this.hidePopup();\n          this.isFirstRender = true;\n          this.renderPopup();\n        } else {\n          this.isFirstRender = true;\n        }\n      }\n    }\n  }, {\n    key: \"l10nUpdate\",\n    value: function l10nUpdate(actionFailure) {\n      if (this.noRecord) {\n        this.noRecord.innerHTML = '';\n      } else {\n        this.noRecord = this.createElement('div');\n        addClass([this.noRecord], NODATACONTAINER);\n        prepend([this.noRecord], this.popupDiv);\n      }\n\n      if (this.noRecordsTemplate !== 'No Records Found' || this.actionFailureTemplate !== 'The Request Failed') {\n        var template = actionFailure ? this.actionFailureTemplate : this.noRecordsTemplate;\n        var templateId = actionFailure ? this.actionFailureTemplateId : this.noRecordsTemplateId;\n        var templatestring = actionFailure ? 'actionFailureTemplate' : 'noRecordsTemplate'; // eslint-disable-next-line\n\n        var compiledString = this.templateComplier(template);\n        var tempArr = compiledString({}, this, templatestring, templateId, this.isStringTemplate, undefined, this.noRecord);\n\n        if (tempArr) {\n          tempArr = Array.prototype.slice.call(tempArr);\n          append(tempArr, this.noRecord);\n        }\n      } else {\n        // eslint-disable-next-line\n        var l10nLocale = {\n          noRecordsTemplate: 'No Records Found',\n          actionFailureTemplate: 'The Request Failed'\n        };\n        this.l10n = new L10n(this.getLocaleName(), l10nLocale, this.locale);\n        this.noRecord.innerHTML = actionFailure ? this.l10n.getConstant('actionFailureTemplate') : this.l10n.getConstant('noRecordsTemplate');\n      }\n    }\n  }, {\n    key: \"updateRecordTemplate\",\n    value: function updateRecordTemplate(action) {\n      if (this.treeItems && this.treeItems.length <= 0) {\n        this.l10nUpdate(action);\n\n        if (this.hasTemplate) {\n          this.updateTemplate();\n        }\n      }\n    }\n  }, {\n    key: \"updateOverflowWrapper\",\n    value: function updateOverflowWrapper(state) {\n      if (!state) {\n        if (!this.inputWrapper.contains(this.overFlowWrapper)) {\n          this.overFlowWrapper = this.createElement('span', {\n            className: OVERFLOW_VIEW + ' ' + HIDEICON\n          });\n          this.inputWrapper.insertBefore(this.overFlowWrapper, this.hiddenElement);\n        }\n      } else if (this.inputWrapper.contains(this.overFlowWrapper) && state) {\n        this.overFlowWrapper.innerHTML = '';\n      }\n    }\n  }, {\n    key: \"updateMultiSelection\",\n    value: function updateMultiSelection(state) {\n      if (!this.wrapText) {\n        this.updateOverflowWrapper(false);\n      }\n\n      this.treeObj.allowMultiSelection = state;\n      this.treeObj.dataBind();\n      this.updateOption();\n\n      if (this.allowMultiSelection) {\n        this.updateMode();\n      }\n\n      this.setMultiSelect();\n    }\n  }, {\n    key: \"updateAllowFiltering\",\n    value: function updateAllowFiltering(state) {\n      if (!this.isFirstRender) {\n        if (state) {\n          this.renderFilter();\n        } else {\n          this.destroyFilter();\n        }\n      }\n\n      this.ensureAutoCheck();\n    }\n  }, {\n    key: \"updateFilterPlaceHolder\",\n    value: function updateFilterPlaceHolder() {\n      if (this.filterObj) {\n        this.filterObj.placeholder = this.filterBarPlaceholder;\n        this.filterObj.element.setAttribute('aria-label', this.filterBarPlaceholder);\n      }\n    }\n  }, {\n    key: \"updateValue\",\n    value: function updateValue(value) {\n      this.isDynamicChange = true;\n\n      if (isNullOrUndefined(value) || value.length === 0) {\n        this.resetValue(true);\n      } else {\n        this.setTreeValue();\n\n        if ((this.allowMultiSelection || this.showCheckBox) && !this.wrapText) {\n          this.updateOverflowWrapper(false);\n          this.updateView();\n        }\n      }\n\n      this.updateHiddenValue();\n      this.isDynamicChange = false;\n    }\n  }, {\n    key: \"updateText\",\n    value: function updateText(text) {\n      if (isNullOrUndefined(text)) {\n        this.resetValue();\n      } else {\n        this.setTreeText();\n\n        if ((this.allowMultiSelection || this.showCheckBox) && !this.wrapText) {\n          this.updateOverflowWrapper(false);\n          this.updateView();\n        }\n      }\n\n      this.updateHiddenValue();\n    }\n  }, {\n    key: \"updateModelMode\",\n    value: function updateModelMode() {\n      var validMode = this.allowMultiSelection ? true : this.showCheckBox ? true : false;\n\n      if (!validMode) {\n        return;\n      }\n\n      if (!this.wrapText) {\n        var overFlow = select('.' + OVERFLOW_VIEW, this.inputWrapper);\n\n        if (overFlow) {\n          overFlow.innerHTML = '';\n        }\n      }\n\n      this.updateMode();\n      this.setMultiSelect();\n\n      if (!this.wrapText && this.value && this.value.length !== 0) {\n        this.updateOverFlowView();\n        addClass([this.inputEle], CHIP_INPUT);\n\n        if (this.mode === 'Box') {\n          removeClass([this.overFlowWrapper, this.inputWrapper], SHOW_TEXT);\n        } else {\n          addClass([this.overFlowWrapper, this.inputWrapper], SHOW_TEXT);\n        }\n      }\n    }\n  }, {\n    key: \"updateOption\",\n    value: function updateOption() {\n      if (!this.hiddenElement.hasAttribute('multiple') && (this.allowMultiSelection || this.showCheckBox)) {\n        this.hiddenElement.setAttribute('multiple', '');\n      } else if (this.hiddenElement.hasAttribute('multiple') && !this.allowMultiSelection && !this.showCheckBox) {\n        this.hiddenElement.removeAttribute('multiple');\n      }\n    }\n    /**\n     * Dynamically change the value of properties.\n     *\n     * @param {DropDownTreeModel} newProp - specifies the newProp value.\n     * @param {DropDownTreeModel} oldProp - specifies the newProp value.\n     * @returns {void}\n     * @private\n     */\n\n  }, {\n    key: \"onPropertyChanged\",\n    value: function onPropertyChanged(newProp, oldProp) {\n      for (var _i9 = 0, _Object$keys5 = Object.keys(newProp); _i9 < _Object$keys5.length; _i9++) {\n        var prop = _Object$keys5[_i9];\n\n        switch (prop) {\n          case 'width':\n            this.setElementWidth(newProp.width);\n\n            if (this.popupObj) {\n              this.popupObj.element.style.width = this.setWidth();\n            }\n\n            break;\n\n          case 'placeholder':\n            Input.setPlaceholder(newProp.placeholder, this.inputEle);\n            break;\n\n          case 'cssClass':\n            this.setCssClass(newProp.cssClass, oldProp.cssClass);\n            break;\n\n          case 'enableRtl':\n            this.setEnableRTL(this.enableRtl);\n            break;\n\n          case 'fields':\n            this.setFields();\n            break;\n\n          case 'readonly':\n            Input.setReadonly(newProp.readonly, this.inputEle);\n            break;\n\n          case 'enabled':\n            this.setEnable();\n            break;\n\n          case 'floatLabelType':\n            Input.removeFloating(this.inputObj);\n            Input.addFloating(this.inputEle, newProp.floatLabelType, this.placeholder, this.createElement);\n            this.ensureClearIconPosition(newProp.floatLabelType);\n            break;\n\n          case 'showClearButton':\n            this.updateClearButton(newProp.showClearButton);\n            break;\n\n          case 'allowFiltering':\n            this.updateAllowFiltering(newProp.allowFiltering);\n            break;\n\n          case 'filterBarPlaceholder':\n            this.updateFilterPlaceHolder();\n            break;\n\n          case 'value':\n            this.oldValue = oldProp.value;\n            this.updateValue(newProp.value);\n            break;\n\n          case 'text':\n            this.updateText(newProp.text);\n            break;\n\n          case 'allowMultiSelection':\n            this.updateMultiSelection(newProp.allowMultiSelection);\n            break;\n\n          case 'mode':\n            if (!this.showCheckBox && !this.allowMultiSelection) {\n              return;\n            }\n\n            if (this.mode === 'Custom') {\n              if (this.overFlowWrapper) {\n                detach(this.overFlowWrapper);\n              }\n\n              if (this.chipWrapper) {\n                detach(this.chipWrapper);\n              }\n\n              this.setTagValues();\n            } else {\n              if (oldProp.mode === 'Custom') {\n                this.updateOverflowWrapper(this.wrapText);\n              }\n\n              this.updateModelMode();\n            }\n\n            break;\n\n          case 'delimiterChar':\n            if (this.mode === 'Box') {\n              return;\n            }\n\n            if (this.showCheckBox || this.allowMultiSelection) {\n              this.setMultiSelect();\n            }\n\n            break;\n\n          case 'selectAllText':\n            if (this.showCheckBox && this.showSelectAll) {\n              this.setLocale();\n            }\n\n            break;\n\n          case 'unSelectAllText':\n            if (this.showCheckBox && this.showSelectAll) {\n              this.setLocale(false);\n            }\n\n            break;\n\n          case 'showSelectAll':\n            if (this.showCheckBox) {\n              this.setSelectAllWrapper(newProp.showSelectAll);\n              this.updatePopupHeight();\n            }\n\n            break;\n\n          case 'showCheckBox':\n            this.updateCheckBoxState(newProp.showCheckBox);\n\n            if (!this.wrapText) {\n              this.updateOverflowWrapper(true);\n            }\n\n            this.updatePopupHeight();\n            this.updateOption();\n            break;\n\n          case 'treeSettings':\n            this.updateTreeSettings(newProp);\n            break;\n\n          case 'customTemplate':\n            if (this.mode !== \"Custom\") {\n              return;\n            }\n\n            this.chipCollection.innerHTML = \"\";\n            this.setTagValues();\n            break;\n\n          case 'sortOrder':\n            if (this.hasTemplate) {\n              this.updateTemplate();\n            }\n\n            this.treeObj.sortOrder = newProp.sortOrder;\n            this.updateValue(this.value);\n            this.treeObj.dataBind();\n            break;\n\n          case 'showDropDownIcon':\n            this.updateDropDownIconState(newProp.showDropDownIcon);\n            break;\n\n          case 'popupWidth':\n            if (this.popupObj) {\n              this.popupObj.element.style.width = this.setWidth();\n            }\n\n            break;\n\n          case 'popupHeight':\n            if (this.popupObj) {\n              this.updatePopupHeight();\n            }\n\n            break;\n\n          case 'zIndex':\n            if (this.popupObj) {\n              this.popupObj.zIndex = newProp.zIndex;\n              this.popupObj.dataBind();\n            }\n\n            break;\n\n          case 'headerTemplate':\n            this.updateTemplate();\n            break;\n\n          case 'footerTemplate':\n            this.updateTemplate();\n            break;\n\n          case 'itemTemplate':\n            this.updateTemplate();\n            this.treeObj.nodeTemplate = newProp.itemTemplate;\n            this.treeObj.dataBind();\n            break;\n\n          case 'noRecordsTemplate':\n            this.updateRecordTemplate();\n            break;\n\n          case 'actionFailureTemplate':\n            this.updateRecordTemplate(true);\n            break;\n\n          case 'htmlAttributes':\n            this.setHTMLAttributes();\n            break;\n\n          case 'wrapText':\n            this.updateOverflowWrapper(this.wrapText);\n\n            if ((this.allowMultiSelection || this.showCheckBox) && !this.wrapText) {\n              this.updateView();\n            } else {\n              addClass([this.overFlowWrapper], HIDEICON);\n\n              if (this.chipWrapper && this.mode === 'Box') {\n                removeClass([this.chipWrapper], HIDEICON);\n              } else {\n                removeClass([this.inputWrapper], SHOW_CHIP);\n                removeClass([this.inputEle], CHIP_INPUT);\n              }\n\n              this.ensurePlaceHolder();\n            }\n\n            break;\n        }\n      }\n    }\n    /**\n     * Allows you to clear the selected values from the Dropdown Tree component.\n     *\n     * @method clear\n     * @returns {void}\n     */\n\n  }, {\n    key: \"clear\",\n    value: function clear() {\n      this.clearAll();\n\n      if (this.inputFocus) {\n        this.onFocusOut();\n      } else {\n        if (this.changeOnBlur) {\n          this.triggerChangeEvent();\n        }\n\n        this.removeValue = false;\n      }\n    }\n    /**\n     * Removes the component from the DOM and detaches all its related event handlers. Also, it removes the attributes and classes.\n     *\n     * @method destroy\n     * @returns {void}\n     */\n\n  }, {\n    key: \"destroy\",\n    value: function destroy() {\n      this.clearTemplate();\n      this.unWireEvents();\n      this.setCssClass(null, this.cssClass);\n      this.setProperties({\n        value: []\n      }, true);\n      this.setProperties({\n        text: null\n      }, true);\n      this.treeObj.destroy();\n      this.destroyFilter();\n\n      if (this.popupObj) {\n        this.popupObj.destroy();\n        detach(this.popupObj.element);\n      }\n\n      if (this.element.tagName !== this.getDirective()) {\n        this.inputWrapper.parentElement.insertBefore(this.element, this.inputWrapper);\n      }\n\n      Input.setValue(null, this.inputEle, this.floatLabelType);\n      detach(this.inputWrapper);\n      detach(this.popupDiv);\n      this.element.classList.remove('e-input');\n\n      if (this.showCheckBox || this.allowMultiSelection) {\n        this.element.classList.remove(CHIP_INPUT);\n      }\n\n      _get(_getPrototypeOf(DropDownTree.prototype), \"destroy\", this).call(this);\n    }\n  }, {\n    key: \"destroyFilter\",\n    value: function destroyFilter() {\n      if (this.filterObj) {\n        this.filterObj.destroy();\n        detach(this.filterObj.element);\n        detach(this.filterContainer);\n        this.filterObj = null;\n      }\n    }\n    /**\n     * Ensures visibility of the Dropdown Tree item by using item value or item element.\n     * If many Dropdown Tree items are present, and we are in need to find a particular item, then the `ensureVisible` property\n     * helps you to bring the item to visibility by expanding the Dropdown Tree and scrolling to the specific item.\n     *\n     * @param  {string | Element} item - Specifies the value of Dropdown Tree item/ Dropdown Tree item element.\n     * @returns {void}\n     */\n\n  }, {\n    key: \"ensureVisible\",\n    value: function ensureVisible(item) {\n      this.treeObj.ensureVisible(item);\n    }\n    /**\n     * To get the updated data source of the Dropdown Tree.\n     *\n     * @param  {string | Element} item - Specifies the value of Dropdown Tree item/ Dropdown Tree item element\n     * @returns {'{[key: string]: Object }[]'} - returns the updated data source of the Dropdown Tree.\n     */\n    // eslint-disable-next-line\n\n  }, {\n    key: \"getData\",\n    value: function getData(item) {\n      return this.treeObj.getTreeData(item);\n    }\n    /**\n     * Close the Dropdown tree pop-up.\n     *\n     * @returns {void}\n     */\n\n  }, {\n    key: \"hidePopup\",\n    value: function hidePopup() {\n      var eventArgs = {\n        popup: this.popupObj\n      };\n      this.inputWrapper.classList.remove(ICONANIMATION);\n\n      if (this.popupEle) {\n        addClass([this.popupEle], DDTHIDEICON);\n      }\n\n      attributes(this.inputWrapper, {\n        'aria-expanded': 'false'\n      });\n\n      if (this.popupObj && this.isPopupOpen) {\n        this.popupObj.hide();\n\n        if (this.inputFocus) {\n          this.inputWrapper.focus();\n\n          if (this.allowFiltering) {\n            addClass([this.inputWrapper], [INPUTFOCUS]);\n          }\n        }\n\n        this.trigger('close', eventArgs);\n      }\n    }\n    /**\n     * Based on the state parameter, entire list item will be selected or deselected.\n     *\n     * @param {boolean} state - Unselects/Selects entire Dropdown Tree items.\n     * @returns {void}\n     *\n     */\n\n  }, {\n    key: \"selectAll\",\n    value: function selectAll(state) {\n      this.selectAllItems(state);\n    }\n    /**\n     * Opens the popup that displays the Dropdown Tree items.\n     *\n     * @returns {void}\n     */\n\n  }, {\n    key: \"showPopup\",\n    value: function showPopup() {\n      if (!this.enabled || this.readonly || this.isPopupOpen) {\n        return;\n      }\n\n      this.renderPopup();\n      this.focusIn();\n    }\n    /**\n     * Return the module name.\n     *\n     * @private\n     * @returns {string} - returns the module name.\n     */\n\n  }, {\n    key: \"getModuleName\",\n    value: function getModuleName() {\n      return 'dropdowntree';\n    }\n  }]);\n\n  return DropDownTree;\n}(Component);\n\n__decorate$2([Property('The Request Failed')], DropDownTree.prototype, \"actionFailureTemplate\", void 0);\n\n__decorate$2([Property(false)], DropDownTree.prototype, \"allowFiltering\", void 0);\n\n__decorate$2([Property(false)], DropDownTree.prototype, \"allowMultiSelection\", void 0);\n\n__decorate$2([Property(true)], DropDownTree.prototype, \"changeOnBlur\", void 0);\n\n__decorate$2([Property('')], DropDownTree.prototype, \"cssClass\", void 0);\n\n__decorate$2([Property(\"${value.length} item(s) selected\")], DropDownTree.prototype, \"customTemplate\", void 0);\n\n__decorate$2([Property(',')], DropDownTree.prototype, \"delimiterChar\", void 0);\n\n__decorate$2([Property(true)], DropDownTree.prototype, \"enabled\", void 0);\n\n__decorate$2([Complex({}, Fields)], DropDownTree.prototype, \"fields\", void 0);\n\n__decorate$2([Property(null)], DropDownTree.prototype, \"filterBarPlaceholder\", void 0);\n\n__decorate$2([Property('StartsWith')], DropDownTree.prototype, \"filterType\", void 0);\n\n__decorate$2([Property('Never')], DropDownTree.prototype, \"floatLabelType\", void 0);\n\n__decorate$2([Property(null)], DropDownTree.prototype, \"footerTemplate\", void 0);\n\n__decorate$2([Property(false)], DropDownTree.prototype, \"ignoreAccent\", void 0);\n\n__decorate$2([Property(true)], DropDownTree.prototype, \"ignoreCase\", void 0);\n\n__decorate$2([Property(null)], DropDownTree.prototype, \"headerTemplate\", void 0);\n\n__decorate$2([Property({})], DropDownTree.prototype, \"htmlAttributes\", void 0);\n\n__decorate$2([Property(null)], DropDownTree.prototype, \"itemTemplate\", void 0);\n\n__decorate$2([Property('Default')], DropDownTree.prototype, \"mode\", void 0);\n\n__decorate$2([Property('No Records Found')], DropDownTree.prototype, \"noRecordsTemplate\", void 0);\n\n__decorate$2([Property(null)], DropDownTree.prototype, \"placeholder\", void 0);\n\n__decorate$2([Property('300px')], DropDownTree.prototype, \"popupHeight\", void 0);\n\n__decorate$2([Property('100%')], DropDownTree.prototype, \"popupWidth\", void 0);\n\n__decorate$2([Property(false)], DropDownTree.prototype, \"readonly\", void 0);\n\n__decorate$2([Property(false)], DropDownTree.prototype, \"showSelectAll\", void 0);\n\n__decorate$2([Property('Select All')], DropDownTree.prototype, \"selectAllText\", void 0);\n\n__decorate$2([Property(false)], DropDownTree.prototype, \"showCheckBox\", void 0);\n\n__decorate$2([Property(true)], DropDownTree.prototype, \"showClearButton\", void 0);\n\n__decorate$2([Property(true)], DropDownTree.prototype, \"showDropDownIcon\", void 0);\n\n__decorate$2([Property('None')], DropDownTree.prototype, \"sortOrder\", void 0);\n\n__decorate$2([Property(null)], DropDownTree.prototype, \"text\", void 0);\n\n__decorate$2([Complex({}, TreeSettings)], DropDownTree.prototype, \"treeSettings\", void 0);\n\n__decorate$2([Property('Unselect All')], DropDownTree.prototype, \"unSelectAllText\", void 0);\n\n__decorate$2([Property(null)], DropDownTree.prototype, \"value\", void 0);\n\n__decorate$2([Property('100%')], DropDownTree.prototype, \"width\", void 0);\n\n__decorate$2([Property(1000)], DropDownTree.prototype, \"zIndex\", void 0);\n\n__decorate$2([Property(false)], DropDownTree.prototype, \"wrapText\", void 0);\n\n__decorate$2([Event()], DropDownTree.prototype, \"actionFailure\", void 0);\n\n__decorate$2([Event()], DropDownTree.prototype, \"beforeOpen\", void 0);\n\n__decorate$2([Event()], DropDownTree.prototype, \"change\", void 0);\n\n__decorate$2([Event()], DropDownTree.prototype, \"close\", void 0);\n\n__decorate$2([Event()], DropDownTree.prototype, \"blur\", void 0);\n\n__decorate$2([Event()], DropDownTree.prototype, \"created\", void 0);\n\n__decorate$2([Event()], DropDownTree.prototype, \"dataBound\", void 0);\n\n__decorate$2([Event()], DropDownTree.prototype, \"destroyed\", void 0);\n\n__decorate$2([Event()], DropDownTree.prototype, \"filtering\", void 0);\n\n__decorate$2([Event()], DropDownTree.prototype, \"focus\", void 0);\n\n__decorate$2([Event()], DropDownTree.prototype, \"keyPress\", void 0);\n\n__decorate$2([Event()], DropDownTree.prototype, \"open\", void 0);\n\n__decorate$2([Event()], DropDownTree.prototype, \"select\", void 0);\n\nDropDownTree = __decorate$2([NotifyPropertyChanges], DropDownTree);\n/**\n * export all modules from current location\n */\n\nvar __decorate$3 = undefined && undefined.__decorate || function (decorators, target, key, desc) {\n  var c = arguments.length,\n      r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc,\n      d;\n  if (typeof Reflect === \"object\" && typeof Reflect.decorate === \"function\") r = Reflect.decorate(decorators, target, key, desc);else for (var i = decorators.length - 1; i >= 0; i--) {\n    if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;\n  }\n  return c > 3 && r && Object.defineProperty(target, key, r), r;\n}; // eslint-disable-next-line @typescript-eslint/triple-slash-reference\n/// <reference path='../drop-down-list/drop-down-list-model.d.ts'/>\n\n\nvar SPINNER_CLASS = 'e-atc-spinner-icon';\ndropDownListClasses.root = 'e-combobox';\nvar inputObject$1 = {\n  container: null,\n  buttons: []\n};\n/**\n * The ComboBox component allows the user to type a value or choose an option from the list of predefined options.\n * ```html\n * <select id=\"list\">\n *      <option value='1'>Badminton</option>\n *      <option value='2'>Basketball</option>\n *      <option value='3'>Cricket</option>\n *      <option value='4'>Football</option>\n *      <option value='5'>Tennis</option>\n * </select>\n * ```\n * ```typescript\n *   let games:ComboBox = new ComboBox();\n *   games.appendTo(\"#list\");\n * ```\n */\n\nvar ComboBox = /*#__PURE__*/function (_DropDownList) {\n  _inherits(ComboBox, _DropDownList);\n\n  var _super7 = _createSuper(ComboBox);\n\n  /**\n   * *Constructor for creating the component\n   *\n   * @param {ComboBoxModel} options - Specifies the ComboBox model.\n   * @param {string | HTMLElement} element - Specifies the element to render as component.\n   * @private\n   */\n  function ComboBox(options, element) {\n    _classCallCheck(this, ComboBox);\n\n    return _super7.call(this, options, element);\n  }\n  /**\n   * Initialize the event handler\n   *\n   * @private\n   * @returns {void}\n   */\n\n\n  _createClass(ComboBox, [{\n    key: \"preRender\",\n    value: function preRender() {\n      _get(_getPrototypeOf(ComboBox.prototype), \"preRender\", this).call(this);\n    }\n  }, {\n    key: \"getLocaleName\",\n    value: function getLocaleName() {\n      return 'combo-box';\n    }\n  }, {\n    key: \"wireEvent\",\n    value: function wireEvent() {\n      if (this.getModuleName() === 'combobox') {\n        EventHandler.add(this.inputWrapper.buttons[0], 'mousedown', this.preventBlur, this);\n        EventHandler.add(this.inputWrapper.container, 'blur', this.onBlurHandler, this);\n      }\n\n      if (!isNullOrUndefined(this.inputWrapper.buttons[0])) {\n        EventHandler.add(this.inputWrapper.buttons[0], 'mousedown', this.dropDownClick, this);\n      }\n\n      EventHandler.add(this.inputElement, 'focus', this.targetFocus, this);\n\n      if (!this.readonly) {\n        EventHandler.add(this.inputElement, 'input', this.onInput, this);\n        EventHandler.add(this.inputElement, 'keyup', this.onFilterUp, this);\n        EventHandler.add(this.inputElement, 'keydown', this.onFilterDown, this);\n        EventHandler.add(this.inputElement, 'paste', this.pasteHandler, this);\n      }\n\n      this.bindCommonEvent();\n    }\n  }, {\n    key: \"preventBlur\",\n    value: function preventBlur(e) {\n      if (!this.allowFiltering && document.activeElement !== this.inputElement && !document.activeElement.classList.contains(dropDownListClasses.input) && Browser.isDevice || !Browser.isDevice) {\n        e.preventDefault();\n      }\n    }\n  }, {\n    key: \"onBlurHandler\",\n    value: function onBlurHandler(e) {\n      var inputValue = this.inputElement && this.inputElement.value === '' ? null : this.inputElement && this.inputElement.value;\n\n      if (!isNullOrUndefined(this.listData) && !isNullOrUndefined(inputValue) && inputValue !== this.text) {\n        this.customValue(e);\n      }\n\n      _get(_getPrototypeOf(ComboBox.prototype), \"onBlurHandler\", this).call(this, e);\n    }\n  }, {\n    key: \"targetElement\",\n    value: function targetElement() {\n      return this.inputElement;\n    } // eslint-disable-next-line @typescript-eslint/no-unused-vars\n\n  }, {\n    key: \"setOldText\",\n    value: function setOldText(text) {\n      Input.setValue(this.text, this.inputElement, this.floatLabelType, this.showClearButton);\n      this.customValue();\n      this.removeSelection();\n    } // eslint-disable-next-line @typescript-eslint/no-unused-vars\n\n  }, {\n    key: \"setOldValue\",\n    value: function setOldValue(value) {\n      if (this.allowCustom) {\n        this.valueMuteChange(this.value);\n      } else {\n        this.valueMuteChange(null);\n      }\n\n      this.removeSelection();\n      this.setHiddenValue();\n    }\n  }, {\n    key: \"valueMuteChange\",\n    value: function valueMuteChange(value) {\n      var inputValue = isNullOrUndefined(value) ? null : value.toString();\n      Input.setValue(inputValue, this.inputElement, this.floatLabelType, this.showClearButton);\n      this.setProperties({\n        value: value,\n        text: value,\n        index: null\n      }, true);\n      this.activeIndex = this.index;\n      var fields = this.fields;\n      var dataItem = {};\n      dataItem[fields.text] = isNullOrUndefined(value) ? null : value.toString();\n      dataItem[fields.value] = isNullOrUndefined(value) ? null : value.toString();\n      this.itemData = dataItem;\n      this.item = null;\n\n      if (this.previousValue !== this.value) {\n        this.detachChangeEvent(null);\n      }\n    }\n  }, {\n    key: \"updateValues\",\n    value: function updateValues() {\n      if (!isNullOrUndefined(this.value)) {\n        var li = this.getElementByValue(this.value);\n\n        if (li) {\n          this.setSelection(li, null);\n        } else if (this.allowCustom) {\n          this.valueMuteChange(this.value);\n        } else {\n          this.valueMuteChange(null);\n        }\n      } else if (this.text && isNullOrUndefined(this.value)) {\n        var _li = this.getElementByText(this.text);\n\n        if (_li) {\n          this.setSelection(_li, null);\n        } else {\n          Input.setValue(this.text, this.inputElement, this.floatLabelType, this.showClearButton);\n          this.customValue();\n        }\n      } else {\n        this.setSelection(this.liCollections[this.activeIndex], null);\n      }\n\n      this.setHiddenValue();\n      Input.setValue(this.text, this.inputElement, this.floatLabelType, this.showClearButton);\n    }\n  }, {\n    key: \"updateIconState\",\n    value: function updateIconState() {\n      if (this.showClearButton) {\n        if (this.inputElement && this.inputElement.value !== '' && !this.readonly) {\n          removeClass([this.inputWrapper.clearButton], dropDownListClasses.clearIconHide);\n        } else {\n          addClass([this.inputWrapper.clearButton], dropDownListClasses.clearIconHide);\n        }\n      }\n    }\n  }, {\n    key: \"getAriaAttributes\",\n    value: function getAriaAttributes() {\n      var ariaAttributes = {\n        'aria-owns': this.element.id + '_options',\n        'role': 'combobox',\n        'aria-autocomplete': 'both',\n        'aria-labelledby': this.hiddenElement.id,\n        'aria-hasPopup': 'true',\n        'aria-expanded': 'false',\n        'aria-readonly': this.readonly.toString(),\n        'autocomplete': 'off',\n        'autocorrect': 'off',\n        'autocapitalize': 'off',\n        'spellcheck': 'false'\n      };\n      return ariaAttributes;\n    }\n  }, {\n    key: \"searchLists\",\n    value: function searchLists(e) {\n      this.isTyped = true;\n\n      if (this.isFiltering()) {\n        _get(_getPrototypeOf(ComboBox.prototype), \"searchLists\", this).call(this, e);\n\n        if (this.ulElement && this.filterInput.value.trim() === '') {\n          this.setHoverList(this.ulElement.querySelector('.' + dropDownListClasses.li));\n        }\n      } else {\n        if (this.ulElement && this.inputElement.value === '' && this.preventAutoFill) {\n          this.setHoverList(this.ulElement.querySelector('.' + dropDownListClasses.li));\n        }\n\n        this.incrementalSearch(e);\n      }\n    }\n  }, {\n    key: \"getNgDirective\",\n    value: function getNgDirective() {\n      return 'EJS-COMBOBOX';\n    }\n  }, {\n    key: \"setSearchBox\",\n    value: function setSearchBox() {\n      this.filterInput = this.inputElement;\n      return this.isFiltering() ? this.inputWrapper : inputObject$1;\n    } // eslint-disable-next-line @typescript-eslint/no-unused-vars\n\n  }, {\n    key: \"onActionComplete\",\n    value: function onActionComplete(ulElement, list, e, isUpdated) {\n      _get(_getPrototypeOf(ComboBox.prototype), \"onActionComplete\", this).call(this, ulElement, list, e);\n\n      if (this.isSelectCustom) {\n        this.removeSelection();\n      }\n\n      if (!this.preventAutoFill && this.getModuleName() === 'combobox' && this.isTyped) {\n        this.inlineSearch();\n      }\n    }\n  }, {\n    key: \"getFocusElement\",\n    value: function getFocusElement() {\n      var dataItem = this.isSelectCustom ? {\n        text: ''\n      } : this.getItemData();\n      var selected = this.list.querySelector('.' + dropDownListClasses.selected);\n      var isSelected = dataItem.text === this.inputElement.value && !isNullOrUndefined(selected);\n\n      if (isSelected) {\n        return selected;\n      }\n\n      if ((Browser.isDevice && !this.isDropDownClick || !Browser.isDevice) && !isNullOrUndefined(this.liCollections) && this.liCollections.length > 0) {\n        var inputValue = this.inputElement.value;\n        var activeItem = Search(inputValue, this.liCollections, 'StartsWith', true);\n        var activeElement = activeItem.item;\n\n        if (!isNullOrUndefined(activeElement)) {\n          var count = this.getIndexByValue(activeElement.getAttribute('data-value')) - 1;\n          var height = parseInt(getComputedStyle(this.liCollections[0], null).getPropertyValue('height'), 10);\n\n          if (!isNaN(height) && this.getModuleName() !== 'autocomplete') {\n            this.removeFocus();\n            var fixedHead = this.fields.groupBy ? this.liCollections[0].offsetHeight : 0;\n            this.list.scrollTop = count * height + fixedHead;\n            addClass([activeElement], dropDownListClasses.focus);\n          }\n        } else {\n          if (this.isSelectCustom && this.inputElement.value.trim() !== '') {\n            this.removeFocus();\n            this.list.scrollTop = 0;\n          }\n        }\n\n        return activeElement;\n      } else {\n        return null;\n      }\n    }\n  }, {\n    key: \"setValue\",\n    value: function setValue(e) {\n      if (e && e.type === 'keydown' && e.action === 'enter') {\n        this.removeFillSelection();\n      }\n\n      if (this.autofill && this.getModuleName() === 'combobox' && e && e.type === 'keydown' && e.action !== 'enter') {\n        this.preventAutoFill = false;\n        this.inlineSearch(e);\n        return false;\n      } else {\n        return _get(_getPrototypeOf(ComboBox.prototype), \"setValue\", this).call(this, e);\n      }\n    }\n  }, {\n    key: \"checkCustomValue\",\n    value: function checkCustomValue() {\n      this.itemData = this.getDataByValue(this.value);\n      var dataItem = this.getItemData();\n\n      if (!(this.allowCustom && isNullOrUndefined(dataItem.value) && isNullOrUndefined(dataItem.text))) {\n        this.setProperties({\n          'value': dataItem.value,\n          'text': dataItem.text\n        }, !this.allowCustom);\n      }\n    }\n    /**\n     * Shows the spinner loader.\n     *\n     * @returns {void}\n     * @deprecated\n     */\n\n  }, {\n    key: \"showSpinner\",\n    value: function showSpinner() {\n      if (isNullOrUndefined(this.spinnerElement)) {\n        this.spinnerElement = this.getModuleName() === 'autocomplete' ? this.inputWrapper.buttons[0] || this.inputWrapper.clearButton || Input.appendSpan('e-input-group-icon ' + SPINNER_CLASS, this.inputWrapper.container, this.createElement) : this.inputWrapper.buttons[0] || this.inputWrapper.clearButton;\n        addClass([this.spinnerElement], dropDownListClasses.disableIcon);\n        createSpinner({\n          target: this.spinnerElement,\n          width: Browser.isDevice ? '16px' : '14px'\n        }, this.createElement);\n\n        _showSpinner(this.spinnerElement);\n      }\n    }\n    /**\n     * Hides the spinner loader.\n     *\n     * @returns {void}\n     * @deprecated\n     */\n\n  }, {\n    key: \"hideSpinner\",\n    value: function hideSpinner() {\n      if (!isNullOrUndefined(this.spinnerElement)) {\n        _hideSpinner(this.spinnerElement);\n\n        removeClass([this.spinnerElement], dropDownListClasses.disableIcon);\n\n        if (this.spinnerElement.classList.contains(SPINNER_CLASS)) {\n          detach(this.spinnerElement);\n        } else {\n          this.spinnerElement.innerHTML = '';\n        }\n\n        this.spinnerElement = null;\n      }\n    }\n  }, {\n    key: \"setAutoFill\",\n    value: function setAutoFill(activeElement, isHover) {\n      if (!isHover) {\n        this.setHoverList(activeElement);\n      }\n\n      if (this.autofill && !this.preventAutoFill) {\n        var currentValue = this.getTextByValue(activeElement.getAttribute('data-value')).toString();\n        var currentFillValue = this.getFormattedValue(activeElement.getAttribute('data-value'));\n\n        if (this.getModuleName() === 'combobox') {\n          if (!this.isSelected && this.previousValue !== currentFillValue) {\n            this.updateSelectedItem(activeElement, null);\n            this.isSelected = true;\n            this.previousValue = this.getFormattedValue(activeElement.getAttribute('data-value'));\n          } else {\n            this.updateSelectedItem(activeElement, null, true);\n          }\n        }\n\n        if (!this.isAndroidAutoFill(currentValue)) {\n          this.setAutoFillSelection(currentValue);\n        }\n      }\n    }\n  }, {\n    key: \"isAndroidAutoFill\",\n    value: function isAndroidAutoFill(value) {\n      if (Browser.isAndroid) {\n        var currentPoints = this.getSelectionPoints();\n        var prevEnd = this.prevSelectPoints.end;\n        var curEnd = currentPoints.end;\n        var prevStart = this.prevSelectPoints.start;\n        var curStart = currentPoints.start;\n\n        if (prevEnd !== 0 && (prevEnd === value.length && prevStart === value.length || prevStart > curStart && prevEnd > curEnd || prevEnd === curEnd && prevStart === curStart)) {\n          return true;\n        } else {\n          return false;\n        }\n      } else {\n        return false;\n      }\n    }\n  }, {\n    key: \"clearAll\",\n    value: function clearAll(e, property) {\n      if (isNullOrUndefined(property) || !isNullOrUndefined(property) && isNullOrUndefined(property.dataSource)) {\n        _get(_getPrototypeOf(ComboBox.prototype), \"clearAll\", this).call(this, e);\n      }\n\n      if (this.isFiltering() && !isNullOrUndefined(e) && e.target === this.inputWrapper.clearButton) {\n        this.searchLists(e);\n      }\n    }\n  }, {\n    key: \"isSelectFocusItem\",\n    value: function isSelectFocusItem(element) {\n      return !isNullOrUndefined(element);\n    }\n  }, {\n    key: \"inlineSearch\",\n    value: function inlineSearch(e) {\n      var isKeyNavigate = e && (e.action === 'down' || e.action === 'up' || e.action === 'home' || e.action === 'end' || e.action === 'pageUp' || e.action === 'pageDown');\n      var activeElement = isKeyNavigate ? this.liCollections[this.activeIndex] : this.getFocusElement();\n\n      if (!isNullOrUndefined(activeElement)) {\n        if (!isKeyNavigate) {\n          var value = this.getFormattedValue(activeElement.getAttribute('data-value'));\n          this.activeIndex = this.getIndexByValue(value);\n          this.activeIndex = !isNullOrUndefined(this.activeIndex) ? this.activeIndex : null;\n        }\n\n        this.preventAutoFill = this.inputElement.value === '' ? false : this.preventAutoFill;\n        this.setAutoFill(activeElement, isKeyNavigate);\n      } else if (this.inputElement.value === '') {\n        this.activeIndex = null;\n        this.list.scrollTop = 0;\n        var focusItem = this.list.querySelector('.' + dropDownListClasses.li);\n        this.setHoverList(focusItem);\n      } else {\n        this.activeIndex = null;\n        this.removeSelection();\n\n        if (this.liCollections && this.liCollections.length < 0) {\n          this.removeFocus();\n        }\n      }\n    }\n  }, {\n    key: \"incrementalSearch\",\n    value: function incrementalSearch(e) {\n      this.showPopup();\n\n      if (!isNullOrUndefined(this.listData)) {\n        this.inlineSearch(e);\n        e.preventDefault();\n      }\n    }\n  }, {\n    key: \"setAutoFillSelection\",\n    value: function setAutoFillSelection(currentValue) {\n      var selection = this.getSelectionPoints();\n      var value = this.inputElement.value.substr(0, selection.start);\n\n      if (value && value.toLowerCase() === currentValue.substr(0, selection.start).toLowerCase()) {\n        var inputValue = value + currentValue.substr(value.length, currentValue.length);\n        Input.setValue(inputValue, this.inputElement, this.floatLabelType, this.showClearButton);\n        this.inputElement.setSelectionRange(selection.start, this.inputElement.value.length);\n      } else {\n        Input.setValue(currentValue, this.inputElement, this.floatLabelType, this.showClearButton);\n        this.inputElement.setSelectionRange(0, this.inputElement.value.length);\n      }\n    }\n  }, {\n    key: \"getValueByText\",\n    value: function getValueByText(text) {\n      return _get(_getPrototypeOf(ComboBox.prototype), \"getValueByText\", this).call(this, text, true, this.ignoreAccent);\n    }\n  }, {\n    key: \"unWireEvent\",\n    value: function unWireEvent() {\n      if (this.getModuleName() === 'combobox') {\n        EventHandler.remove(this.inputWrapper.buttons[0], 'mousedown', this.preventBlur);\n        EventHandler.remove(this.inputWrapper.container, 'blur', this.onBlurHandler);\n      }\n\n      if (!isNullOrUndefined(this.inputWrapper.buttons[0])) {\n        EventHandler.remove(this.inputWrapper.buttons[0], 'mousedown', this.dropDownClick);\n      }\n\n      if (this.inputElement) {\n        EventHandler.remove(this.inputElement, 'focus', this.targetFocus);\n\n        if (!this.readonly) {\n          EventHandler.remove(this.inputElement, 'input', this.onInput);\n          EventHandler.remove(this.inputElement, 'keyup', this.onFilterUp);\n          EventHandler.remove(this.inputElement, 'keydown', this.onFilterDown);\n          EventHandler.remove(this.inputElement, 'paste', this.pasteHandler);\n        }\n      }\n\n      this.unBindCommonEvent();\n    }\n  }, {\n    key: \"setSelection\",\n    value: function setSelection(li, e) {\n      _get(_getPrototypeOf(ComboBox.prototype), \"setSelection\", this).call(this, li, e);\n\n      if (!isNullOrUndefined(li) && !this.autofill && !this.isDropDownClick) {\n        this.removeFocus();\n      }\n    }\n  }, {\n    key: \"selectCurrentItem\",\n    value: function selectCurrentItem(e) {\n      var li;\n\n      if (this.isPopupOpen) {\n        if (this.isSelected) {\n          li = this.list.querySelector('.' + dropDownListClasses.selected);\n        } else {\n          li = this.list.querySelector('.' + dropDownListClasses.focus);\n        }\n\n        if (li) {\n          this.setSelection(li, e);\n          this.isTyped = false;\n        }\n\n        if (this.isSelected) {\n          this.isSelectCustom = false;\n          this.onChangeEvent(e);\n        }\n      }\n\n      if (e.action === 'enter' && this.inputElement.value.trim() === '') {\n        this.clearAll(e);\n      } else if (this.isTyped && !this.isSelected && isNullOrUndefined(li)) {\n        this.customValue(e);\n      }\n\n      this.hidePopup();\n    }\n  }, {\n    key: \"setHoverList\",\n    value: function setHoverList(li) {\n      this.removeSelection();\n\n      if (this.isValidLI(li) && !li.classList.contains(dropDownListClasses.selected)) {\n        this.removeFocus();\n        li.classList.add(dropDownListClasses.focus);\n      }\n    }\n  }, {\n    key: \"targetFocus\",\n    value: function targetFocus(e) {\n      if (Browser.isDevice && !this.allowFiltering) {\n        this.preventFocus = false;\n      }\n\n      this.onFocus(e);\n    }\n  }, {\n    key: \"dropDownClick\",\n    value: function dropDownClick(e) {\n      e.preventDefault();\n\n      if (Browser.isDevice && !this.isFiltering()) {\n        this.preventFocus = true;\n      }\n\n      _get(_getPrototypeOf(ComboBox.prototype), \"dropDownClick\", this).call(this, e);\n    }\n  }, {\n    key: \"customValue\",\n    value: function customValue(e) {\n      var _this24 = this;\n\n      var value = this.getValueByText(this.inputElement.value);\n\n      if (!this.allowCustom && this.inputElement.value !== '') {\n        var previousValue = this.previousValue;\n        var currentValue = this.value;\n        this.setProperties({\n          value: value\n        });\n\n        if (isNullOrUndefined(this.value)) {\n          Input.setValue('', this.inputElement, this.floatLabelType, this.showClearButton);\n        }\n\n        if (this.autofill && previousValue === this.value && currentValue !== this.value) {\n          this.onChangeEvent(null);\n        }\n      } else if (this.inputElement.value.trim() !== '') {\n        var _previousValue = this.value;\n\n        if (isNullOrUndefined(value)) {\n          var _value2 = this.inputElement.value === '' ? null : this.inputElement.value; // eslint-disable-next-line max-len\n\n\n          var eventArgs = {\n            text: _value2,\n            item: {}\n          };\n\n          if (!this.initial) {\n            this.trigger('customValueSpecifier', eventArgs, function (eventArgs) {\n              _this24.updateCustomValueCallback(_value2, eventArgs, _previousValue, e);\n            });\n          } else {\n            this.updateCustomValueCallback(_value2, eventArgs, _previousValue);\n          }\n        } else {\n          this.isSelectCustom = false;\n          this.setProperties({\n            value: value\n          });\n\n          if (_previousValue !== this.value) {\n            this.onChangeEvent(e);\n          }\n        }\n      } else if (this.allowCustom) {\n        this.isSelectCustom = true;\n      }\n    }\n  }, {\n    key: \"updateCustomValueCallback\",\n    value: function updateCustomValueCallback(value, eventArgs, previousValue, e) {\n      var fields = this.fields;\n      var item = eventArgs.item;\n      var dataItem = {};\n\n      if (item && getValue(fields.text, item) && getValue(fields.value, item)) {\n        dataItem = item;\n      } else {\n        setValue(fields.text, value, dataItem);\n        setValue(fields.value, value, dataItem);\n      }\n\n      this.itemData = dataItem;\n      var changeData = {\n        text: getValue(fields.text, this.itemData),\n        value: getValue(fields.value, this.itemData),\n        index: null\n      };\n      this.setProperties(changeData, true);\n      this.setSelection(null, null);\n      this.isSelectCustom = true;\n\n      if (previousValue !== this.value) {\n        this.onChangeEvent(e);\n      }\n    }\n    /**\n     * Dynamically change the value of properties.\n     *\n     * @param {ComboBoxModel} newProp - Returns the dynamic property value of the component.\n     * @param {ComboBoxModel} oldProp - Returns the previous property value of the component.\n     * @private\n     * @returns {void}\n     */\n\n  }, {\n    key: \"onPropertyChanged\",\n    value: function onPropertyChanged(newProp, oldProp) {\n      if (this.getModuleName() === 'combobox') {\n        this.checkData(newProp);\n        this.setUpdateInitial(['fields', 'query', 'dataSource'], newProp);\n      }\n\n      for (var _i10 = 0, _Object$keys6 = Object.keys(newProp); _i10 < _Object$keys6.length; _i10++) {\n        var prop = _Object$keys6[_i10];\n\n        switch (prop) {\n          case 'readonly':\n            Input.setReadonly(this.readonly, this.inputElement);\n\n            if (this.readonly) {\n              EventHandler.remove(this.inputElement, 'input', this.onInput);\n              EventHandler.remove(this.inputElement, 'keyup', this.onFilterUp);\n              EventHandler.remove(this.inputElement, 'keydown', this.onFilterDown);\n            } else {\n              EventHandler.add(this.inputElement, 'input', this.onInput, this);\n              EventHandler.add(this.inputElement, 'keyup', this.onFilterUp, this);\n              EventHandler.add(this.inputElement, 'keydown', this.onFilterDown, this);\n            }\n\n            this.setReadOnly();\n            break;\n\n          case 'allowFiltering':\n            this.setSearchBox();\n\n            if (this.isFiltering() && this.getModuleName() === 'combobox' && isNullOrUndefined(this.list)) {\n              _get(_getPrototypeOf(ComboBox.prototype), \"renderList\", this).call(this);\n            }\n\n            break;\n\n          case 'allowCustom':\n            break;\n\n          default:\n            {\n              // eslint-disable-next-line max-len\n              var comboProps = this.getPropObject(prop, newProp, oldProp);\n\n              _get(_getPrototypeOf(ComboBox.prototype), \"onPropertyChanged\", this).call(this, comboProps.newProperty, comboProps.oldProperty);\n\n              if (this.isFiltering() && prop === 'dataSource' && isNullOrUndefined(this.list) && this.itemTemplate && this.getModuleName() === 'combobox') {\n                _get(_getPrototypeOf(ComboBox.prototype), \"renderList\", this).call(this);\n              }\n\n              break;\n            }\n        }\n      }\n    }\n    /**\n     * To initialize the control rendering.\n     *\n     * @private\n     * @returns {void}\n     */\n\n  }, {\n    key: \"render\",\n    value: function render() {\n      _get(_getPrototypeOf(ComboBox.prototype), \"render\", this).call(this);\n\n      this.setSearchBox();\n\n      if (this.isFiltering() && this.getModuleName() === 'combobox' && isNullOrUndefined(this.list)) {\n        _get(_getPrototypeOf(ComboBox.prototype), \"renderList\", this).call(this);\n      }\n\n      this.renderComplete();\n    }\n    /**\n     * Return the module name of this component.\n     *\n     * @private\n     * @returns {string} Return the module name of this component.\n     */\n\n  }, {\n    key: \"getModuleName\",\n    value: function getModuleName() {\n      return 'combobox';\n    }\n    /**\n     * Adds a new item to the combobox popup list. By default, new item appends to the list as the last item,\n     * but you can insert based on the index parameter.\n     *\n     * @param  { Object[] } items - Specifies an array of JSON data or a JSON data.\n     * @param { number } itemIndex - Specifies the index to place the newly added item in the popup list.\n     * @returns {void}\n     * @deprecated\n     */\n\n  }, {\n    key: \"addItem\",\n    value: function addItem(items, itemIndex) {\n      _get(_getPrototypeOf(ComboBox.prototype), \"addItem\", this).call(this, items, itemIndex);\n    }\n    /**\n     * To filter the data from given data source by using query\n     *\n     * @param  {Object[] | DataManager } dataSource - Set the data source to filter.\n     * @param  {Query} query - Specify the query to filter the data.\n     * @param  {FieldSettingsModel} fields - Specify the fields to map the column in the data table.\n     * @returns {void}\n     * @deprecated\n     */\n\n  }, {\n    key: \"filter\",\n    value: function filter(dataSource, query, fields) {\n      _get(_getPrototypeOf(ComboBox.prototype), \"filter\", this).call(this, dataSource, query, fields);\n    }\n    /**\n     * Opens the popup that displays the list of items.\n     *\n     * @returns {void}\n     * @deprecated\n     */\n\n  }, {\n    key: \"showPopup\",\n    value: function showPopup() {\n      _get(_getPrototypeOf(ComboBox.prototype), \"showPopup\", this).call(this);\n    }\n    /* eslint-disable valid-jsdoc, jsdoc/require-param */\n\n    /**\n     * Hides the popup if it is in open state.\n     *\n     * @returns {void}\n     * @deprecated\n     */\n\n  }, {\n    key: \"hidePopup\",\n    value: function hidePopup(e) {\n      /* eslint-enable valid-jsdoc, jsdoc/require-param */\n      var inputValue = this.inputElement && this.inputElement.value === '' ? null : this.inputElement && this.inputElement.value;\n\n      if (!isNullOrUndefined(this.listData)) {\n        var isEscape = this.isEscapeKey;\n\n        if (this.isEscapeKey) {\n          Input.setValue(this.typedString, this.inputElement, this.floatLabelType, this.showClearButton);\n          this.isEscapeKey = false;\n        }\n\n        if (this.autofill) {\n          this.removeFillSelection();\n        }\n\n        var dataItem = this.isSelectCustom ? {\n          text: ''\n        } : this.getItemData();\n        var selected = this.list.querySelector('.' + dropDownListClasses.selected);\n\n        if (this.inputElement && dataItem.text === this.inputElement.value && !isNullOrUndefined(selected)) {\n          if (this.isSelected) {\n            this.onChangeEvent(e);\n            this.isSelectCustom = false;\n          }\n\n          _get(_getPrototypeOf(ComboBox.prototype), \"hidePopup\", this).call(this, e);\n\n          return;\n        }\n\n        if (this.getModuleName() === 'combobox' && this.inputElement.value.trim() !== '') {\n          var searchItem = Search(this.inputElement.value, this.liCollections, 'Equal', true);\n          this.selectedLI = searchItem.item;\n\n          if (isNullOrUndefined(searchItem.index)) {\n            searchItem.index = Search(this.inputElement.value, this.liCollections, 'StartsWith', true).index;\n          }\n\n          this.activeIndex = searchItem.index;\n\n          if (!isNullOrUndefined(this.selectedLI)) {\n            this.updateSelectedItem(this.selectedLI, null, true);\n          } else if (isEscape) {\n            this.isSelectCustom = true;\n            this.removeSelection();\n          }\n        }\n\n        if (!this.isEscapeKey && this.isTyped && !this.isInteracted) {\n          this.customValue(e);\n        }\n      }\n\n      if (isNullOrUndefined(this.listData) && this.allowCustom && !isNullOrUndefined(inputValue) && inputValue !== this.value) {\n        this.customValue();\n      }\n\n      _get(_getPrototypeOf(ComboBox.prototype), \"hidePopup\", this).call(this, e);\n    }\n    /**\n     * Sets the focus to the component for interaction.\n     *\n     * @returns {void}\n     */\n\n  }, {\n    key: \"focusIn\",\n    value: function focusIn() {\n      if (!this.enabled) {\n        return;\n      }\n\n      if (Browser.isDevice && !this.isFiltering()) {\n        this.preventFocus = true;\n      }\n\n      _get(_getPrototypeOf(ComboBox.prototype), \"focusIn\", this).call(this);\n    }\n    /**\n     * Allows you to clear the selected values from the component.\n     *\n     * @returns {void}\n     * @deprecated\n     */\n\n  }, {\n    key: \"clear\",\n    value: function clear() {\n      this.value = null;\n    }\n    /* eslint-disable valid-jsdoc, jsdoc/require-param */\n\n    /**\n     * Moves the focus from the component if the component is already focused.\n     *\n     * @returns {void}\n     * @deprecated\n     */\n\n  }, {\n    key: \"focusOut\",\n    value: function focusOut(e) {\n      /* eslint-enable valid-jsdoc, jsdoc/require-param */\n      _get(_getPrototypeOf(ComboBox.prototype), \"focusOut\", this).call(this, e);\n    }\n    /* eslint-disable valid-jsdoc, jsdoc/require-returns-description */\n\n    /**\n     * Gets all the list items bound on this component.\n     *\n     * @returns {Element[]}\n     * @deprecated\n     */\n\n  }, {\n    key: \"getItems\",\n    value: function getItems() {\n      return _get(_getPrototypeOf(ComboBox.prototype), \"getItems\", this).call(this);\n    }\n    /**\n     * Gets the data Object that matches the given value.\n     *\n     * @param { string | number } value - Specifies the value of the list item.\n     * @returns {Object}\n     * @deprecated\n     */\n\n  }, {\n    key: \"getDataByValue\",\n    value: function getDataByValue(value) {\n      return _get(_getPrototypeOf(ComboBox.prototype), \"getDataByValue\", this).call(this, value);\n    }\n    /* eslint-enable valid-jsdoc, jsdoc/require-returns-description */\n\n  }, {\n    key: \"renderHightSearch\",\n    value: function renderHightSearch() {// update high light search\n    }\n  }]);\n\n  return ComboBox;\n}(DropDownList);\n\n__decorate$3([Property(false)], ComboBox.prototype, \"autofill\", void 0);\n\n__decorate$3([Property(true)], ComboBox.prototype, \"allowCustom\", void 0);\n\n__decorate$3([Property({})], ComboBox.prototype, \"htmlAttributes\", void 0);\n\n__decorate$3([Property(false)], ComboBox.prototype, \"allowFiltering\", void 0);\n\n__decorate$3([Property(null)], ComboBox.prototype, \"query\", void 0);\n\n__decorate$3([Property(null)], ComboBox.prototype, \"index\", void 0);\n\n__decorate$3([Property(true)], ComboBox.prototype, \"showClearButton\", void 0);\n\n__decorate$3([Property(false)], ComboBox.prototype, \"enableRtl\", void 0);\n\n__decorate$3([Event()], ComboBox.prototype, \"customValueSpecifier\", void 0);\n\n__decorate$3([Event()], ComboBox.prototype, \"filtering\", void 0);\n\n__decorate$3([Property(null)], ComboBox.prototype, \"valueTemplate\", void 0);\n\n__decorate$3([Property('Never')], ComboBox.prototype, \"floatLabelType\", void 0);\n\n__decorate$3([Property(null)], ComboBox.prototype, \"filterBarPlaceholder\", void 0);\n\n__decorate$3([Property(null)], ComboBox.prototype, \"cssClass\", void 0);\n\n__decorate$3([Property(null)], ComboBox.prototype, \"headerTemplate\", void 0);\n\n__decorate$3([Property(null)], ComboBox.prototype, \"footerTemplate\", void 0);\n\n__decorate$3([Property(null)], ComboBox.prototype, \"placeholder\", void 0);\n\n__decorate$3([Property('100%')], ComboBox.prototype, \"width\", void 0);\n\n__decorate$3([Property('300px')], ComboBox.prototype, \"popupHeight\", void 0);\n\n__decorate$3([Property('100%')], ComboBox.prototype, \"popupWidth\", void 0);\n\n__decorate$3([Property(false)], ComboBox.prototype, \"readonly\", void 0);\n\n__decorate$3([Property(null)], ComboBox.prototype, \"text\", void 0);\n\n__decorate$3([Property(null)], ComboBox.prototype, \"value\", void 0);\n\nComboBox = __decorate$3([NotifyPropertyChanges], ComboBox);\n/**\n * export all modules from current location\n */\n\nvar __decorate$4 = undefined && undefined.__decorate || function (decorators, target, key, desc) {\n  var c = arguments.length,\n      r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc,\n      d;\n  if (typeof Reflect === \"object\" && typeof Reflect.decorate === \"function\") r = Reflect.decorate(decorators, target, key, desc);else for (var i = decorators.length - 1; i >= 0; i--) {\n    if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;\n  }\n  return c > 3 && r && Object.defineProperty(target, key, r), r;\n}; // eslint-disable-next-line @typescript-eslint/triple-slash-reference\n/// <reference path='../combo-box/combo-box-model.d.ts'/>\n\n\ndropDownListClasses.root = 'e-autocomplete';\ndropDownListClasses.icon = 'e-input-group-icon e-ddl-icon e-search-icon';\n/**\n * The AutoComplete component provides the matched suggestion list when type into the input,\n * from which the user can select one.\n * ```html\n * <input id=\"list\" type=\"text\"/>\n * ```\n * ```typescript\n *   let atcObj:AutoComplete = new AutoComplete();\n *   atcObj.appendTo(\"#list\");\n * ```\n */\n\nvar AutoComplete = /*#__PURE__*/function (_ComboBox) {\n  _inherits(AutoComplete, _ComboBox);\n\n  var _super8 = _createSuper(AutoComplete);\n\n  /**\n   * * Constructor for creating the widget\n   *\n   * @param {AutoCompleteModel} options - Specifies the AutoComplete model.\n   * @param {string | HTMLElement} element - Specifies the element to render as component.\n   * @private\n   */\n  function AutoComplete(options, element) {\n    var _this25;\n\n    _classCallCheck(this, AutoComplete);\n\n    _this25 = _super8.call(this, options, element);\n    _this25.isFiltered = false;\n    _this25.searchList = false;\n    return _this25;\n  }\n  /**\n   * Initialize the event handler\n   *\n   * @private\n   * @returns {void}\n   */\n\n\n  _createClass(AutoComplete, [{\n    key: \"preRender\",\n    value: function preRender() {\n      _get(_getPrototypeOf(AutoComplete.prototype), \"preRender\", this).call(this);\n    }\n  }, {\n    key: \"getLocaleName\",\n    value: function getLocaleName() {\n      return 'auto-complete';\n    }\n  }, {\n    key: \"getNgDirective\",\n    value: function getNgDirective() {\n      return 'EJS-AUTOCOMPLETE';\n    }\n  }, {\n    key: \"getQuery\",\n    value: function getQuery(query) {\n      var filterQuery = query ? query.clone() : this.query ? this.query.clone() : new Query();\n      var filterType = this.queryString === '' && !isNullOrUndefined(this.value) ? 'equal' : this.filterType;\n      var queryString = this.queryString === '' && !isNullOrUndefined(this.value) ? this.value : this.queryString;\n\n      if (this.isFiltered) {\n        return filterQuery;\n      }\n\n      if (this.queryString !== null && this.queryString !== '') {\n        var dataType = this.typeOfData(this.dataSource).typeof;\n\n        if (!(this.dataSource instanceof DataManager) && dataType === 'string' || dataType === 'number') {\n          filterQuery.where('', filterType, queryString, this.ignoreCase, this.ignoreAccent);\n        } else {\n          var mapping = !isNullOrUndefined(this.fields.value) ? this.fields.value : '';\n          filterQuery.where(mapping, filterType, queryString, this.ignoreCase, this.ignoreAccent);\n        }\n      }\n\n      if (!isNullOrUndefined(this.suggestionCount)) {\n        // Since defualt value of suggestioncount is 20, checked the condition\n        if (this.suggestionCount !== 20) {\n          for (var queryElements = 0; queryElements < filterQuery.queries.length; queryElements++) {\n            if (filterQuery.queries[queryElements].fn === 'onTake') {\n              filterQuery.queries.splice(queryElements, 1);\n            }\n          }\n        }\n\n        filterQuery.take(this.suggestionCount);\n      }\n\n      return filterQuery;\n    }\n  }, {\n    key: \"searchLists\",\n    value: function searchLists(e) {\n      var _this26 = this;\n\n      this.isTyped = true;\n      this.isDataFetched = this.isSelectCustom = false;\n\n      if (isNullOrUndefined(this.list)) {\n        _get(_getPrototypeOf(AutoComplete.prototype), \"renderList\", this).call(this, true);\n      }\n\n      this.queryString = this.filterInput.value;\n\n      if (e.type !== 'mousedown' && (e.keyCode === 40 || e.keyCode === 38)) {\n        this.queryString = this.queryString === '' ? null : this.queryString;\n        this.beforePopupOpen = true;\n        this.resetList(this.dataSource, this.fields);\n        return;\n      }\n\n      this.isSelected = false;\n      this.activeIndex = null;\n      var eventArgs = {\n        preventDefaultAction: false,\n        text: this.filterInput.value,\n        updateData: function updateData(dataSource, query, fields) {\n          if (eventArgs.cancel) {\n            return;\n          }\n\n          _this26.isFiltered = true;\n\n          _this26.filterAction(dataSource, query, fields);\n        },\n        cancel: false\n      };\n      this.trigger('filtering', eventArgs, function (eventArgs) {\n        if (!eventArgs.cancel && !_this26.isFiltered && !eventArgs.preventDefaultAction) {\n          _this26.searchList = true;\n\n          _this26.filterAction(_this26.dataSource, null, _this26.fields);\n        }\n      });\n    }\n    /**\n     * To filter the data from given data source by using query\n     *\n     * @param  {Object[] | DataManager } dataSource - Set the data source to filter.\n     * @param  {Query} query - Specify the query to filter the data.\n     * @param  {FieldSettingsModel} fields - Specify the fields to map the column in the data table.\n     * @returns {void}\n     * @deprecated\n     */\n\n  }, {\n    key: \"filter\",\n    value: function filter(dataSource, query, fields) {\n      this.isFiltered = true;\n      this.filterAction(dataSource, query, fields);\n    }\n  }, {\n    key: \"filterAction\",\n    value: function filterAction(dataSource, query, fields) {\n      this.beforePopupOpen = true;\n\n      if (this.queryString !== '' && this.queryString.length >= this.minLength) {\n        this.resetList(dataSource, fields, query);\n      } else {\n        this.hidePopup();\n        this.beforePopupOpen = false;\n      }\n\n      this.renderReactTemplates();\n    }\n  }, {\n    key: \"clearAll\",\n    value: function clearAll(e, property) {\n      if (isNullOrUndefined(property) || !isNullOrUndefined(property) && isNullOrUndefined(property.dataSource)) {\n        _get(_getPrototypeOf(AutoComplete.prototype), \"clearAll\", this).call(this, e);\n      }\n\n      if (this.beforePopupOpen) {\n        this.hidePopup();\n      }\n    } // eslint-disable-next-line @typescript-eslint/no-unused-vars\n\n  }, {\n    key: \"onActionComplete\",\n    value: function onActionComplete(ulElement, list, e, isUpdated) {\n      this.fixedHeaderElement = null;\n\n      _get(_getPrototypeOf(AutoComplete.prototype), \"onActionComplete\", this).call(this, ulElement, list, e);\n\n      var item = this.list.querySelector('.' + dropDownListClasses.li);\n\n      if (!isNullOrUndefined(item)) {\n        removeClass([item], dropDownListClasses.focus);\n      }\n\n      this.postBackAction();\n    }\n  }, {\n    key: \"postBackAction\",\n    value: function postBackAction() {\n      if (this.autofill && !isNullOrUndefined(this.liCollections[0]) && this.searchList) {\n        var items = [this.liCollections[0]];\n        var searchItem = Search(this.inputElement.value, items, 'StartsWith', this.ignoreCase);\n        this.searchList = false;\n\n        if (!isNullOrUndefined(searchItem.item)) {\n          _get(_getPrototypeOf(AutoComplete.prototype), \"setAutoFill\", this).call(this, this.liCollections[0], true);\n        }\n      }\n    }\n  }, {\n    key: \"setSelection\",\n    value: function setSelection(li, e) {\n      if (!this.isValidLI(li)) {\n        return;\n      }\n\n      if (!isNullOrUndefined(e) && e.type === 'keydown' && e.action !== 'enter' && e.action !== 'tab' && this.isValidLI(li)) {\n        var value = this.getFormattedValue(li.getAttribute('data-value'));\n        this.activeIndex = this.getIndexByValue(value);\n        this.setHoverList(li);\n        this.selectedLI = li;\n        this.setScrollPosition(e);\n\n        if (this.autofill && this.isPopupOpen) {\n          this.preventAutoFill = false;\n\n          _get(_getPrototypeOf(AutoComplete.prototype), \"setAutoFill\", this).call(this, li);\n        }\n\n        attributes(this.inputElement, {\n          'aria-activedescendant': this.selectedLI ? this.selectedLI.id : null\n        });\n      } else {\n        _get(_getPrototypeOf(AutoComplete.prototype), \"setSelection\", this).call(this, li, e);\n      }\n    }\n  }, {\n    key: \"listOption\",\n    value: function listOption(dataSource, fieldsSettings) {\n      var _this27 = this;\n\n      var fields = _get(_getPrototypeOf(AutoComplete.prototype), \"listOption\", this).call(this, dataSource, fieldsSettings);\n\n      if (isNullOrUndefined(fields.itemCreated)) {\n        fields.itemCreated = function (e) {\n          if (_this27.highlight) {\n            if (_this27.element.tagName === _this27.getNgDirective() && _this27.itemTemplate) {\n              setTimeout(function () {\n                highlightSearch(e.item, _this27.queryString, _this27.ignoreCase, _this27.filterType);\n              }, 0);\n            } else {\n              highlightSearch(e.item, _this27.queryString, _this27.ignoreCase, _this27.filterType);\n            }\n          }\n        };\n      } else {\n        var itemCreated = fields.itemCreated;\n\n        fields.itemCreated = function (e) {\n          if (_this27.highlight) {\n            highlightSearch(e.item, _this27.queryString, _this27.ignoreCase, _this27.filterType);\n          }\n\n          itemCreated.apply(_this27, [e]);\n        };\n      }\n\n      return fields;\n    }\n  }, {\n    key: \"isFiltering\",\n    value: function isFiltering() {\n      return true;\n    }\n  }, {\n    key: \"renderPopup\",\n    value: function renderPopup() {\n      this.list.scrollTop = 0;\n\n      _get(_getPrototypeOf(AutoComplete.prototype), \"renderPopup\", this).call(this);\n    }\n  }, {\n    key: \"isEditTextBox\",\n    value: function isEditTextBox() {\n      return true && this.inputElement.value.trim() !== '';\n    }\n  }, {\n    key: \"isPopupButton\",\n    value: function isPopupButton() {\n      return this.showPopupButton;\n    } // eslint-disable-next-line @typescript-eslint/no-unused-vars\n\n  }, {\n    key: \"isSelectFocusItem\",\n    value: function isSelectFocusItem(element) {\n      return false;\n    }\n    /**\n     * Search the entered text and show it in the suggestion list if available.\n     *\n     * @returns {void}\n     * @deprecated\n     */\n\n  }, {\n    key: \"showPopup\",\n    value: function showPopup() {\n      if (!this.enabled) {\n        return;\n      }\n\n      if (this.beforePopupOpen) {\n        this.refreshPopup();\n        return;\n      }\n\n      this.beforePopupOpen = true;\n      this.preventAutoFill = true;\n\n      if (isNullOrUndefined(this.list)) {\n        this.renderList();\n      } else {\n        this.resetList(this.dataSource, this.fields);\n      }\n    }\n    /**\n     * Hides the popup if it is in open state.\n     *\n     * @returns {void}\n     */\n\n  }, {\n    key: \"hidePopup\",\n    value: function hidePopup() {\n      _get(_getPrototypeOf(AutoComplete.prototype), \"hidePopup\", this).call(this);\n\n      this.activeIndex = -1;\n    }\n    /**\n     * Dynamically change the value of properties.\n     *\n     * @param {AutoCompleteModel} newProp - Returns the dynamic property value of the component.\n     * @param {AutoCompleteModel} oldProp - Returns the previous property value of the component.\n     * @private\n     * @returns {void}\n     */\n\n  }, {\n    key: \"onPropertyChanged\",\n    value: function onPropertyChanged(newProp, oldProp) {\n      if (this.getModuleName() === 'autocomplete') {\n        this.setUpdateInitial(['fields', 'query', 'dataSource'], newProp);\n      }\n\n      for (var _i11 = 0, _Object$keys7 = Object.keys(newProp); _i11 < _Object$keys7.length; _i11++) {\n        var prop = _Object$keys7[_i11];\n\n        switch (prop) {\n          case 'showPopupButton':\n            if (this.showPopupButton) {\n              var button = Input.appendSpan(dropDownListClasses.icon, this.inputWrapper.container, this.createElement);\n              this.inputWrapper.buttons[0] = button;\n\n              if (this.inputWrapper && this.inputWrapper.buttons && this.inputWrapper.buttons[0]) {\n                EventHandler.add(this.inputWrapper.buttons[0], 'click', this.dropDownClick, this);\n              }\n            } else {\n              detach(this.inputWrapper.buttons[0]);\n              this.inputWrapper.buttons[0] = null;\n            }\n\n            break;\n\n          default:\n            {\n              // eslint-disable-next-line max-len\n              var atcProps = this.getPropObject(prop, newProp, oldProp);\n\n              _get(_getPrototypeOf(AutoComplete.prototype), \"onPropertyChanged\", this).call(this, atcProps.newProperty, atcProps.oldProperty);\n\n              break;\n            }\n        }\n      }\n    }\n  }, {\n    key: \"renderHightSearch\",\n    value: function renderHightSearch() {\n      if (this.highlight) {\n        for (var i = 0; i < this.liCollections.length; i++) {\n          var isHighlight = this.ulElement.querySelector('.e-active');\n\n          if (!isHighlight) {\n            revertHighlightSearch(this.liCollections[i]);\n            highlightSearch(this.liCollections[i], this.queryString, this.ignoreCase, this.filterType);\n          }\n        }\n      }\n    }\n    /**\n     * Return the module name of this component.\n     *\n     * @private\n     * @returns {string} Return the module name of this component.\n     */\n\n  }, {\n    key: \"getModuleName\",\n    value: function getModuleName() {\n      return 'autocomplete';\n    }\n    /**\n     * To initialize the control rendering\n     *\n     * @private\n     * @returns {void}\n     */\n\n  }, {\n    key: \"render\",\n    value: function render() {\n      _get(_getPrototypeOf(AutoComplete.prototype), \"render\", this).call(this);\n    }\n  }]);\n\n  return AutoComplete;\n}(ComboBox);\n\n__decorate$4([Complex({\n  value: null,\n  iconCss: null,\n  groupBy: null\n}, FieldSettings)], AutoComplete.prototype, \"fields\", void 0);\n\n__decorate$4([Property(true)], AutoComplete.prototype, \"ignoreCase\", void 0);\n\n__decorate$4([Property(false)], AutoComplete.prototype, \"showPopupButton\", void 0);\n\n__decorate$4([Property(false)], AutoComplete.prototype, \"highlight\", void 0);\n\n__decorate$4([Property(20)], AutoComplete.prototype, \"suggestionCount\", void 0);\n\n__decorate$4([Property({})], AutoComplete.prototype, \"htmlAttributes\", void 0);\n\n__decorate$4([Property(null)], AutoComplete.prototype, \"query\", void 0);\n\n__decorate$4([Property(1)], AutoComplete.prototype, \"minLength\", void 0);\n\n__decorate$4([Property('Contains')], AutoComplete.prototype, \"filterType\", void 0);\n\n__decorate$4([Event()], AutoComplete.prototype, \"filtering\", void 0);\n\n__decorate$4([Property(null)], AutoComplete.prototype, \"index\", void 0);\n\n__decorate$4([Property('Never')], AutoComplete.prototype, \"floatLabelType\", void 0);\n\n__decorate$4([Property(null)], AutoComplete.prototype, \"valueTemplate\", void 0);\n\n__decorate$4([Property(null)], AutoComplete.prototype, \"filterBarPlaceholder\", void 0);\n\n__decorate$4([Property(false)], AutoComplete.prototype, \"allowFiltering\", void 0);\n\n__decorate$4([Property(null)], AutoComplete.prototype, \"text\", void 0);\n\nAutoComplete = __decorate$4([NotifyPropertyChanges], AutoComplete);\n/**\n * export all modules from current location\n */\n\n/**\n * FloatLable Moduel\n * Specifies whether to display the floating label above the input element.\n */\n\nvar FLOATLINE = 'e-float-line';\nvar FLOATTEXT = 'e-float-text';\nvar LABELTOP = 'e-label-top';\nvar LABELBOTTOM = 'e-label-bottom';\n/* eslint-disable valid-jsdoc */\n\n/**\n * Function to create Float Label element.\n *\n * @param {HTMLDivElement} overAllWrapper - Overall wrapper of multiselect.\n * @param {HTMLElement} searchWrapper - Search wrapper of multiselect.\n * @param {HTMLElement} element - The given html element.\n * @param {HTMLInputElement} inputElement - Specify the input wrapper.\n * @param {number[] | string[] | boolean[]} value - Value of the MultiSelect.\n * @param {FloatLabelType} floatLabelType - Specify the FloatLabel Type.\n * @param {string} placeholder - Specify the PlaceHolder text.\n */\n\nfunction createFloatLabel(overAllWrapper, searchWrapper, element, inputElement, value, floatLabelType, placeholder) {\n  var floatLinelement = createElement('span', {\n    className: FLOATLINE\n  });\n  var floatLabelElement = createElement('label', {\n    className: FLOATTEXT\n  });\n\n  if (!isNullOrUndefined(element.id) && element.id !== '') {\n    floatLabelElement.id = 'label_' + element.id.replace(/ /g, '_');\n    attributes(element, {\n      'aria-labelledby': floatLabelElement.id\n    });\n  }\n\n  if (!isNullOrUndefined(inputElement.placeholder) && inputElement.placeholder !== '') {\n    floatLabelElement.innerText = encodePlaceholder(inputElement.placeholder);\n    inputElement.removeAttribute('placeholder');\n  }\n\n  floatLabelElement.innerText = encodePlaceholder(placeholder);\n  searchWrapper.appendChild(floatLinelement);\n  searchWrapper.appendChild(floatLabelElement);\n  overAllWrapper.classList.add('e-float-input');\n  updateFloatLabelState(value, floatLabelElement);\n\n  if (floatLabelType === 'Always') {\n    if (floatLabelElement.classList.contains(LABELBOTTOM)) {\n      removeClass([floatLabelElement], LABELBOTTOM);\n    }\n\n    addClass([floatLabelElement], LABELTOP);\n  }\n}\n/**\n * Function to update status of the Float Label element.\n *\n * @param {string[] | number[] | boolean[]} value - Value of the MultiSelect.\n * @param {HTMLElement} label - Float label element.\n */\n\n\nfunction updateFloatLabelState(value, label) {\n  if (value && value.length > 0) {\n    addClass([label], LABELTOP);\n    removeClass([label], LABELBOTTOM);\n  } else {\n    removeClass([label], LABELTOP);\n    addClass([label], LABELBOTTOM);\n  }\n}\n/**\n * Function to remove Float Label element.\n *\n * @param {HTMLDivElement} overAllWrapper - Overall wrapper of multiselect.\n * @param {HTMLDivElement} componentWrapper - Wrapper element of multiselect.\n * @param {HTMLElement} searchWrapper - Search wrapper of multiselect.\n * @param {HTMLInputElement} inputElement - Specify the input wrapper.\n * @param {number[] | string[] | boolean[]} value - Value of the MultiSelect.\n * @param {FloatLabelType} floatLabelType - Specify the FloatLabel Type.\n * @param {string} placeholder - Specify the PlaceHolder text.\n */\n\n\nfunction removeFloating(overAllWrapper, componentWrapper, searchWrapper, inputElement, value, floatLabelType, placeholder) {\n  var placeholderElement = componentWrapper.querySelector('.' + FLOATTEXT);\n  var floatLine = componentWrapper.querySelector('.' + FLOATLINE);\n  var placeholderText;\n\n  if (!isNullOrUndefined(placeholderElement)) {\n    placeholderText = placeholderElement.innerText;\n    detach(searchWrapper.querySelector('.' + FLOATTEXT));\n    setPlaceHolder(value, inputElement, placeholderText);\n\n    if (!isNullOrUndefined(floatLine)) {\n      detach(searchWrapper.querySelector('.' + FLOATLINE));\n    }\n  } else {\n    placeholderText = placeholder !== null ? placeholder : '';\n    setPlaceHolder(value, inputElement, placeholderText);\n  }\n\n  overAllWrapper.classList.remove('e-float-input');\n}\n/**\n * Function to set the placeholder to the element.\n *\n * @param {number[] | string[] | boolean[]} value - Value of the MultiSelect.\n * @param {HTMLInputElement} inputElement - Specify the input wrapper.\n * @param {string} placeholder - Specify the PlaceHolder text.\n */\n\n\nfunction setPlaceHolder(value, inputElement, placeholder) {\n  if (value && value.length) {\n    inputElement.placeholder = '';\n  } else {\n    inputElement.placeholder = placeholder;\n  }\n}\n/**\n * Function for focusing the Float Element.\n *\n * @param {HTMLDivElement} overAllWrapper - Overall wrapper of multiselect.\n * @param {HTMLDivElement} componentWrapper - Wrapper element of multiselect.\n */\n\n\nfunction floatLabelFocus(overAllWrapper, componentWrapper) {\n  overAllWrapper.classList.add('e-input-focus');\n  var label = componentWrapper.querySelector('.' + FLOATTEXT);\n\n  if (!isNullOrUndefined(label)) {\n    addClass([label], LABELTOP);\n\n    if (label.classList.contains(LABELBOTTOM)) {\n      removeClass([label], LABELBOTTOM);\n    }\n  }\n}\n/* eslint-disable @typescript-eslint/no-unused-vars */\n\n/**\n * Function to focus the Float Label element.\n *\n * @param {HTMLDivElement} overAllWrapper - Overall wrapper of multiselect.\n * @param {HTMLDivElement} componentWrapper - Wrapper element of multiselect.\n * @param {number[] | string[] | boolean[]} value - Value of the MultiSelect.\n * @param {FloatLabelType} floatLabelType - Specify the FloatLabel Type.\n * @param {string} placeholder - Specify the PlaceHolder text.\n */\n\n\nfunction floatLabelBlur(overAllWrapper, componentWrapper, value, floatLabelType, placeholder) {\n  /* eslint-enable @typescript-eslint/no-unused-vars */\n  overAllWrapper.classList.remove('e-input-focus');\n  var label = componentWrapper.querySelector('.' + FLOATTEXT);\n\n  if (value && value.length <= 0 && floatLabelType === 'Auto' && !isNullOrUndefined(label)) {\n    if (label.classList.contains(LABELTOP)) {\n      removeClass([label], LABELTOP);\n    }\n\n    addClass([label], LABELBOTTOM);\n  }\n}\n\nfunction encodePlaceholder(placeholder) {\n  var result = '';\n\n  if (!isNullOrUndefined(placeholder) && placeholder !== '') {\n    var spanElement = document.createElement('span');\n    spanElement.innerHTML = '<input  placeholder=\"' + placeholder + '\"/>';\n    var hiddenInput = spanElement.children[0];\n    result = hiddenInput.placeholder;\n  }\n\n  return result;\n}\n/* eslint-enable valid-jsdoc */\n\n\nvar __decorate$5 = undefined && undefined.__decorate || function (decorators, target, key, desc) {\n  var c = arguments.length,\n      r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc,\n      d;\n  if (typeof Reflect === \"object\" && typeof Reflect.decorate === \"function\") r = Reflect.decorate(decorators, target, key, desc);else for (var i = decorators.length - 1; i >= 0; i--) {\n    if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;\n  }\n  return c > 3 && r && Object.defineProperty(target, key, r), r;\n}; // eslint-disable-next-line @typescript-eslint/triple-slash-reference\n/// <reference path='../drop-down-base/drop-down-base-model.d.ts'/>\n\n\nvar FOCUS = 'e-input-focus';\nvar DISABLED$1 = 'e-disabled';\nvar OVER_ALL_WRAPPER = 'e-multiselect e-input-group e-control-wrapper';\nvar ELEMENT_WRAPPER = 'e-multi-select-wrapper';\nvar ELEMENT_MOBILE_WRAPPER = 'e-mob-wrapper';\nvar HIDE_LIST = 'e-hide-listitem';\nvar DELIMITER_VIEW = 'e-delim-view';\nvar CHIP_WRAPPER$1 = 'e-chips-collection';\nvar CHIP$1 = 'e-chips';\nvar CHIP_CONTENT$1 = 'e-chipcontent';\nvar CHIP_CLOSE$1 = 'e-chips-close';\nvar CHIP_SELECTED = 'e-chip-selected';\nvar SEARCHBOX_WRAPPER = 'e-searcher';\nvar DELIMITER_VIEW_WRAPPER = 'e-delimiter';\nvar ZERO_SIZE = 'e-zero-size';\nvar REMAIN_WRAPPER$1 = 'e-remain';\nvar CLOSEICON_CLASS$1 = 'e-chips-close e-close-hooker';\nvar DELIMITER_WRAPPER = 'e-delim-values';\nvar POPUP_WRAPPER = 'e-ddl e-popup e-multi-select-list-wrapper';\nvar INPUT_ELEMENT = 'e-dropdownbase';\nvar RTL_CLASS = 'e-rtl';\nvar CLOSE_ICON_HIDE = 'e-close-icon-hide';\nvar MOBILE_CHIP = 'e-mob-chip';\nvar FOOTER$1 = 'e-ddl-footer';\nvar HEADER$1 = 'e-ddl-header';\nvar DISABLE_ICON = 'e-ddl-disable-icon';\nvar SPINNER_CLASS$1 = 'e-ms-spinner-icon';\nvar HIDDEN_ELEMENT = 'e-multi-hidden';\nvar _destroy = 'destroy';\nvar dropdownIcon = 'e-input-group-icon e-ddl-icon';\nvar iconAnimation = 'e-icon-anim';\nvar TOTAL_COUNT_WRAPPER$1 = 'e-delim-total';\nvar BOX_ELEMENT = 'e-multiselect-box';\nvar FILTERPARENT = 'e-filter-parent';\nvar CUSTOM_WIDTH = 'e-search-custom-width';\nvar FILTERINPUT = 'e-input-filter';\n/**\n * The Multiselect allows the user to pick a more than one value from list of predefined values.\n * ```html\n * <select id=\"list\">\n *      <option value='1'>Badminton</option>\n *      <option value='2'>Basketball</option>\n *      <option value='3'>Cricket</option>\n *      <option value='4'>Football</option>\n *      <option value='5'>Tennis</option>\n * </select>\n * ```\n * ```typescript\n * <script>\n *   var multiselectObj = new Multiselect();\n *   multiselectObj.appendTo(\"#list\");\n * </script>\n * ```\n */\n\nvar MultiSelect = /*#__PURE__*/function (_DropDownBase2) {\n  _inherits(MultiSelect, _DropDownBase2);\n\n  var _super9 = _createSuper(MultiSelect);\n\n  /**\n   * Constructor for creating the DropDownList widget.\n   *\n   * @param {MultiSelectModel} option - Specifies the MultiSelect model.\n   * @param {string | HTMLElement} element - Specifies the element to render as component.\n   * @private\n   */\n  function MultiSelect(option, element) {\n    var _this28;\n\n    _classCallCheck(this, MultiSelect);\n\n    _this28 = _super9.call(this, option, element);\n    _this28.clearIconWidth = 0;\n    _this28.isValidKey = false;\n    _this28.selectAllEventData = [];\n    _this28.selectAllEventEle = [];\n    _this28.scrollFocusStatus = false;\n    _this28.keyDownStatus = false;\n    return _this28;\n  }\n\n  _createClass(MultiSelect, [{\n    key: \"enableRTL\",\n    value: function enableRTL(state) {\n      if (state) {\n        this.overAllWrapper.classList.add(RTL_CLASS);\n      } else {\n        this.overAllWrapper.classList.remove(RTL_CLASS);\n      }\n\n      if (this.popupObj) {\n        this.popupObj.enableRtl = state;\n        this.popupObj.dataBind();\n      }\n    }\n  }, {\n    key: \"requiredModules\",\n    value: function requiredModules() {\n      var modules = [];\n\n      if (this.mode === 'CheckBox') {\n        this.isGroupChecking = this.enableGroupCheckBox;\n\n        if (this.enableGroupCheckBox) {\n          var prevOnChange = this.isProtectedOnChange;\n          this.isProtectedOnChange = true;\n          this.enableSelectionOrder = false;\n          this.isProtectedOnChange = prevOnChange;\n        }\n\n        this.allowCustomValue = false;\n        this.hideSelectedItem = false;\n        this.closePopupOnSelect = false;\n        modules.push({\n          member: 'CheckBoxSelection',\n          args: [this]\n        });\n      }\n\n      return modules;\n    }\n  }, {\n    key: \"updateHTMLAttribute\",\n    value: function updateHTMLAttribute() {\n      if (Object.keys(this.htmlAttributes).length) {\n        for (var _i12 = 0, _Object$keys8 = Object.keys(this.htmlAttributes); _i12 < _Object$keys8.length; _i12++) {\n          var htmlAttr = _Object$keys8[_i12];\n\n          switch (htmlAttr) {\n            case 'class':\n              {\n                var updatedClassValue = this.htmlAttributes[htmlAttr].replace(/\\s+/g, ' ').trim();\n\n                if (updatedClassValue !== '') {\n                  addClass([this.overAllWrapper], updatedClassValue.split(' '));\n                  addClass([this.popupWrapper], updatedClassValue.split(' '));\n                }\n\n                break;\n              }\n\n            case 'disabled':\n              this.enable(false);\n              break;\n\n            case 'placeholder':\n              if (!this.placeholder) {\n                this.inputElement.setAttribute(htmlAttr, this.htmlAttributes[htmlAttr]);\n                this.setProperties({\n                  placeholder: this.inputElement.placeholder\n                }, true);\n                this.refreshPlaceHolder();\n              }\n\n              break;\n\n            default:\n              {\n                var defaultAttr = ['id'];\n                var validateAttr = ['name', 'required', 'aria-required', 'form'];\n                var containerAttr = ['title', 'role', 'style', 'class'];\n\n                if (defaultAttr.indexOf(htmlAttr) > -1) {\n                  this.element.setAttribute(htmlAttr, this.htmlAttributes[htmlAttr]);\n                } else if (htmlAttr.indexOf('data') === 0 || validateAttr.indexOf(htmlAttr) > -1) {\n                  this.hiddenElement.setAttribute(htmlAttr, this.htmlAttributes[htmlAttr]);\n                } else if (containerAttr.indexOf(htmlAttr) > -1) {\n                  this.overAllWrapper.setAttribute(htmlAttr, this.htmlAttributes[htmlAttr]);\n                } else {\n                  this.inputElement.setAttribute(htmlAttr, this.htmlAttributes[htmlAttr]);\n                }\n\n                break;\n              }\n          }\n        }\n      }\n    }\n  }, {\n    key: \"updateReadonly\",\n    value: function updateReadonly(state) {\n      if (state || this.mode === 'CheckBox') {\n        this.inputElement.setAttribute('readonly', 'true');\n      } else {\n        this.inputElement.removeAttribute('readonly');\n      }\n    }\n  }, {\n    key: \"updateClearButton\",\n    value: function updateClearButton(state) {\n      if (state) {\n        if (this.overAllClear.parentNode) {\n          this.overAllClear.style.display = '';\n        } else {\n          this.componentWrapper.appendChild(this.overAllClear);\n        }\n\n        this.componentWrapper.classList.remove(CLOSE_ICON_HIDE);\n      } else {\n        this.overAllClear.style.display = 'none';\n        this.componentWrapper.classList.add(CLOSE_ICON_HIDE);\n      }\n    }\n  }, {\n    key: \"updateCssClass\",\n    value: function updateCssClass() {\n      if (!isNullOrUndefined(this.cssClass) && this.cssClass !== '') {\n        var updatedCssClassValues = this.cssClass;\n        updatedCssClassValues = this.cssClass.replace(/\\s+/g, ' ').trim();\n\n        if (updatedCssClassValues !== '') {\n          addClass([this.overAllWrapper], updatedCssClassValues.split(' '));\n          addClass([this.popupWrapper], updatedCssClassValues.split(' '));\n        }\n      }\n    }\n  }, {\n    key: \"updateOldPropCssClass\",\n    value: function updateOldPropCssClass(oldClass) {\n      if (!isNullOrUndefined(oldClass) && oldClass !== '') {\n        oldClass = oldClass.replace(/\\s+/g, ' ').trim();\n\n        if (oldClass !== '') {\n          removeClass([this.overAllWrapper], oldClass.split(' '));\n          removeClass([this.popupWrapper], oldClass.split(' '));\n        }\n      }\n    }\n  }, {\n    key: \"onPopupShown\",\n    value: function onPopupShown() {\n      var _this29 = this;\n\n      if (Browser.isDevice && this.mode === 'CheckBox' && this.allowFiltering) {\n        // eslint-disable-next-line @typescript-eslint/no-this-alias\n        var proxy = this;\n\n        window.onpopstate = function () {\n          proxy.hidePopup();\n          proxy.inputElement.focus();\n        };\n\n        history.pushState({}, '');\n      }\n\n      var animModel = {\n        name: 'FadeIn',\n        duration: 100\n      };\n      var eventArgs = {\n        popup: this.popupObj,\n        cancel: false,\n        animation: animModel\n      };\n      this.trigger('open', eventArgs, function (eventArgs) {\n        if (!eventArgs.cancel) {\n          _this29.focusAtFirstListItem();\n\n          document.body.appendChild(_this29.popupObj.element);\n\n          if (_this29.mode === 'CheckBox' && _this29.enableGroupCheckBox && !isNullOrUndefined(_this29.fields.groupBy)) {\n            _this29.updateListItems(_this29.list.querySelectorAll('li.e-list-item'), _this29.mainList.querySelectorAll('li.e-list-item'));\n          }\n\n          if (_this29.mode === 'CheckBox' || _this29.showDropDownIcon) {\n            addClass([_this29.overAllWrapper], [iconAnimation]);\n          }\n\n          _this29.refreshPopup();\n\n          _this29.renderReactTemplates();\n\n          _this29.popupObj.show(eventArgs.animation, _this29.zIndex === 1000 ? _this29.element : null);\n\n          attributes(_this29.inputElement, {\n            'aria-expanded': 'true'\n          });\n\n          if (_this29.isFirstClick) {\n            _this29.loadTemplate();\n          }\n        }\n      });\n    }\n  }, {\n    key: \"updateListItems\",\n    value: function updateListItems(listItems, mainListItems) {\n      for (var i = 0; i < listItems.length; i++) {\n        this.findGroupStart(listItems[i]);\n        this.findGroupStart(mainListItems[i]);\n      }\n\n      this.deselectHeader();\n    }\n  }, {\n    key: \"loadTemplate\",\n    value: function loadTemplate() {\n      this.refreshListItems(null);\n\n      if (this.mode === 'CheckBox') {\n        this.removeFocus();\n      }\n\n      this.notify('reOrder', {\n        module: 'CheckBoxSelection',\n        enable: this.mode === 'CheckBox',\n        e: this\n      });\n    }\n  }, {\n    key: \"setScrollPosition\",\n    value: function setScrollPosition() {\n      if ((!this.hideSelectedItem && this.mode !== 'CheckBox' || this.mode === 'CheckBox' && !this.enableSelectionOrder) && !isNullOrUndefined(this.value) && this.value.length > 0) {\n        var valueEle = this.findListElement(this.hideSelectedItem ? this.ulElement : this.list, 'li', 'data-value', this.value[this.value.length - 1]);\n\n        if (!isNullOrUndefined(valueEle)) {\n          this.scrollBottom(valueEle);\n        }\n      }\n    }\n  }, {\n    key: \"focusAtFirstListItem\",\n    value: function focusAtFirstListItem() {\n      if (this.ulElement && this.ulElement.querySelector('li.' + dropDownBaseClasses.li)) {\n        var element;\n\n        if (this.mode === 'CheckBox') {\n          this.removeFocus();\n          return;\n        } else {\n          element = this.ulElement.querySelector('li.' + dropDownBaseClasses.li + ':not(.' + HIDE_LIST + ')');\n        }\n\n        if (element !== null) {\n          this.removeFocus();\n          this.addListFocus(element);\n        }\n      }\n    }\n  }, {\n    key: \"focusAtLastListItem\",\n    value: function focusAtLastListItem(data) {\n      var activeElement;\n\n      if (data) {\n        activeElement = Search(data, this.liCollections, 'StartsWith', this.ignoreCase);\n      } else {\n        if (this.value && this.value.length) {\n          Search(this.value[this.value.length - 1], this.liCollections, 'StartsWith', this.ignoreCase);\n        } else {\n          activeElement = null;\n        }\n      }\n\n      if (activeElement && activeElement.item !== null) {\n        this.addListFocus(activeElement.item);\n        this.scrollBottom(activeElement.item, activeElement.index);\n      }\n    }\n  }, {\n    key: \"getAriaAttributes\",\n    value: function getAriaAttributes() {\n      var ariaAttributes = {\n        'aria-disabled': 'false',\n        'aria-owns': this.element.id + '_options',\n        'role': 'listbox',\n        'aria-multiselectable': 'true',\n        'aria-activedescendant': 'null',\n        'aria-haspopup': 'true',\n        'aria-expanded': 'false'\n      };\n      return ariaAttributes;\n    }\n  }, {\n    key: \"updateListARIA\",\n    value: function updateListARIA() {\n      attributes(this.ulElement, {\n        'id': this.element.id + '_options',\n        'role': 'listbox',\n        'aria-hidden': 'false'\n      });\n      var disableStatus = this.inputElement.disabled ? true : false;\n      attributes(this.inputElement, this.getAriaAttributes());\n\n      if (disableStatus) {\n        attributes(this.inputElement, {\n          'aria-disabled': 'true'\n        });\n      }\n\n      this.ensureAriaDisabled(disableStatus ? 'true' : 'false');\n    }\n  }, {\n    key: \"ensureAriaDisabled\",\n    value: function ensureAriaDisabled(status) {\n      if (this.htmlAttributes && this.htmlAttributes['aria-disabled']) {\n        var attr = this.htmlAttributes;\n        extend(attr, {\n          'aria-disabled': status\n        }, attr);\n        this.setProperties({\n          htmlAttributes: attr\n        }, true);\n      }\n    }\n  }, {\n    key: \"removelastSelection\",\n    value: function removelastSelection(e) {\n      var elements = this.chipCollectionWrapper.querySelectorAll('span.' + CHIP$1);\n      var value = elements[elements.length - 1].getAttribute('data-value');\n\n      if (!isNullOrUndefined(this.value)) {\n        this.tempValues = this.value.slice();\n      }\n\n      var customValue = this.getFormattedValue(value);\n\n      if (this.allowCustomValue && (value !== 'false' && customValue === false || !isNullOrUndefined(customValue) && customValue.toString() === 'NaN')) {\n        customValue = value;\n      }\n\n      this.removeValue(customValue, e);\n      this.removeChipSelection();\n      this.updateDelimeter(this.delimiterChar, e);\n      this.makeTextBoxEmpty();\n\n      if (this.mainList && this.listData) {\n        this.refreshSelection();\n      }\n\n      this.checkPlaceholderSize();\n    }\n  }, {\n    key: \"onActionFailure\",\n    value: function onActionFailure(e) {\n      _get(_getPrototypeOf(MultiSelect.prototype), \"onActionFailure\", this).call(this, e);\n\n      this.renderPopup();\n      this.onPopupShown();\n    }\n  }, {\n    key: \"targetElement\",\n    value: function targetElement() {\n      this.targetInputElement = this.inputElement;\n\n      if (this.mode === 'CheckBox' && this.allowFiltering) {\n        this.notify('targetElement', {\n          module: 'CheckBoxSelection',\n          enable: this.mode === 'CheckBox'\n        });\n      }\n\n      return this.targetInputElement.value;\n    }\n  }, {\n    key: \"getForQuery\",\n    value: function getForQuery(valuecheck) {\n      var predicate;\n      var field = isNullOrUndefined(this.fields.value) ? this.fields.text : this.fields.value;\n\n      for (var i = 0; i < valuecheck.length; i++) {\n        if (i === 0) {\n          predicate = new Predicate(field, 'equal', valuecheck[i]);\n        } else {\n          predicate = predicate.or(field, 'equal', valuecheck[i]);\n        }\n      }\n\n      return this.getQuery(this.query).where(predicate);\n    }\n    /* eslint-disable @typescript-eslint/no-unused-vars */\n\n  }, {\n    key: \"onActionComplete\",\n    value: function onActionComplete(ulElement, list, e, isUpdated) {\n      /* eslint-enable @typescript-eslint/no-unused-vars */\n      _get(_getPrototypeOf(MultiSelect.prototype), \"onActionComplete\", this).call(this, ulElement, list, e);\n\n      this.updateSelectElementData(this.allowFiltering); // eslint-disable-next-line @typescript-eslint/no-this-alias\n\n      var proxy = this;\n\n      if (!isNullOrUndefined(this.value) && !this.allowCustomValue) {\n        for (var i = 0; i < this.value.length; i++) {\n          var checkEle = this.findListElement(this.allowFiltering && !isNullOrUndefined(this.mainList) ? this.mainList : ulElement, 'li', 'data-value', proxy.value[i]);\n\n          if (!checkEle) {\n            this.value.splice(i, 1);\n            i -= 1;\n          }\n        }\n      }\n\n      this.updateActionList(ulElement, list, e);\n\n      if (this.dataSource instanceof DataManager && this.mode === 'CheckBox' && this.allowFiltering) {\n        this.removeFocus();\n      }\n    }\n    /* eslint-disable @typescript-eslint/no-unused-vars */\n\n  }, {\n    key: \"updateActionList\",\n    value: function updateActionList(ulElement, list, e, isUpdated) {\n      /* eslint-enable @typescript-eslint/no-unused-vars */\n      if (this.mode === 'CheckBox' && this.showSelectAll) {\n        this.notify('selectAll', {\n          module: 'CheckBoxSelection',\n          enable: this.mode === 'CheckBox'\n        });\n      }\n\n      if (!this.mainList && !this.mainData) {\n        this.mainList = ulElement.cloneNode ? ulElement.cloneNode(true) : ulElement;\n        this.mainData = list;\n        this.mainListCollection = this.liCollections;\n      } else if (!isNullOrUndefined(this.mainData) && this.mainData.length === 0) {\n        this.mainData = list;\n      }\n\n      if ((this.remoteCustomValue || list.length <= 0) && this.allowCustomValue && this.inputFocus && this.allowFiltering && this.inputElement.value && this.inputElement.value !== '') {\n        this.checkForCustomValue(this.tempQuery, this.fields);\n        return;\n      }\n\n      if (this.value && this.value.length && (this.mode !== 'CheckBox' && this.inputElement.value.trim() !== '' || this.mode === 'CheckBox' || (this.keyCode === 8 || this.keyCode === 46) && this.allowFiltering && this.allowCustomValue && this.dataSource instanceof DataManager && this.inputElement.value === '')) {\n        this.refreshSelection();\n      }\n\n      this.updateListARIA();\n      this.unwireListEvents();\n      this.wireListEvents();\n\n      if (!isNullOrUndefined(this.setInitialValue)) {\n        this.setInitialValue();\n      }\n\n      if (!isNullOrUndefined(this.selectAllAction)) {\n        this.selectAllAction();\n      }\n\n      if (this.setDynValue) {\n        if (!isNullOrUndefined(this.text) && (isNullOrUndefined(this.value) || this.value.length === 0)) {\n          this.initialTextUpdate();\n        }\n\n        this.initialValueUpdate();\n        this.initialUpdate();\n        this.refreshPlaceHolder();\n\n        if (this.mode !== 'CheckBox' && this.changeOnBlur) {\n          this.updateValueState(null, this.value, null);\n        }\n      }\n\n      this.renderPopup();\n\n      if (this.beforePopupOpen) {\n        this.beforePopupOpen = false;\n        this.onPopupShown();\n      }\n    }\n  }, {\n    key: \"refreshSelection\",\n    value: function refreshSelection() {\n      var value;\n      var element;\n      var className = this.hideSelectedItem ? HIDE_LIST : dropDownBaseClasses.selected;\n\n      if (!isNullOrUndefined(this.value)) {\n        for (var index = 0; !isNullOrUndefined(this.value[index]); index++) {\n          value = this.value[index];\n          element = this.findListElement(this.list, 'li', 'data-value', value);\n\n          if (element) {\n            addClass([element], className);\n\n            if (this.hideSelectedItem && element.previousSibling && element.previousElementSibling.classList.contains(dropDownBaseClasses.group) && (!element.nextElementSibling || element.nextElementSibling.classList.contains(dropDownBaseClasses.group))) {\n              addClass([element.previousElementSibling], className);\n            }\n\n            if (this.hideSelectedItem && this.fields.groupBy && !element.previousElementSibling.classList.contains(HIDE_LIST)) {\n              this.hideGroupItem(value);\n            }\n\n            if (this.hideSelectedItem && element.classList.contains(dropDownBaseClasses.focus)) {\n              removeClass([element], dropDownBaseClasses.focus);\n              var listEle = element.parentElement.querySelectorAll('.' + dropDownBaseClasses.li + ':not(.' + HIDE_LIST + ')');\n\n              if (listEle.length > 0) {\n                addClass([listEle[0]], dropDownBaseClasses.focus);\n              } else {\n                this.ulElement = this.ulElement.cloneNode ? this.ulElement.cloneNode(true) : this.ulElement;\n\n                if (!(this.list && this.list.querySelectorAll('.' + dropDownBaseClasses.li).length > 0)) {\n                  this.l10nUpdate();\n                  addClass([this.list], dropDownBaseClasses.noData);\n                }\n              }\n            }\n\n            element.setAttribute('aria-selected', 'true');\n\n            if (this.mode === 'CheckBox' && element.classList.contains('e-active')) {\n              var ariaValue = element.firstElementChild.getAttribute('aria-checked');\n\n              if (isNullOrUndefined(ariaValue) || ariaValue === 'false') {\n                var args = {\n                  module: 'CheckBoxSelection',\n                  enable: this.mode === 'CheckBox',\n                  li: element,\n                  e: null\n                };\n                this.notify('updatelist', args);\n              }\n            }\n          }\n        }\n      }\n\n      this.checkSelectAll();\n      this.checkMaxSelection();\n    }\n  }, {\n    key: \"hideGroupItem\",\n    value: function hideGroupItem(value) {\n      var element;\n      var element1;\n      var className = this.hideSelectedItem ? HIDE_LIST : dropDownBaseClasses.selected;\n      element1 = element = this.findListElement(this.ulElement, 'li', 'data-value', value);\n      var i = 0;\n      var j = 0;\n      var temp = true;\n      var temp1 = true;\n\n      do {\n        if (element && element.previousElementSibling && !element.previousElementSibling.classList.contains(HIDE_LIST) && element.previousElementSibling.classList.contains(dropDownBaseClasses.li)) {\n          temp = false;\n        }\n\n        if (!temp || !element || element.previousElementSibling && element.previousElementSibling.classList.contains(dropDownBaseClasses.group)) {\n          i = 10;\n        } else {\n          element = element.previousElementSibling;\n        }\n\n        if (element1 && element1.nextElementSibling && !element1.nextElementSibling.classList.contains(HIDE_LIST) && element1.nextElementSibling.classList.contains(dropDownBaseClasses.li)) {\n          temp1 = false;\n        }\n\n        if (!temp1 || !element1 || element1.nextElementSibling && element1.nextElementSibling.classList.contains(dropDownBaseClasses.group)) {\n          j = 10;\n        } else {\n          element1 = element1.nextElementSibling;\n        }\n      } while (i < 10 || j < 10);\n\n      if (temp && temp1 && !element.previousElementSibling.classList.contains(HIDE_LIST)) {\n        addClass([element.previousElementSibling], className);\n      } else if (temp && temp1 && element.previousElementSibling.classList.contains(HIDE_LIST)) {\n        removeClass([element.previousElementSibling], className);\n      }\n    }\n  }, {\n    key: \"getValidLi\",\n    value: function getValidLi() {\n      var liElement = this.ulElement.querySelector('li.' + dropDownBaseClasses.li + ':not(.' + HIDE_LIST + ')');\n      return !isNullOrUndefined(liElement) ? liElement : this.liCollections[0];\n    }\n  }, {\n    key: \"checkSelectAll\",\n    value: function checkSelectAll() {\n      var groupItemLength = this.list.querySelectorAll('li.e-list-group-item.e-active').length;\n      var listItem = this.list.querySelectorAll('li.e-list-item');\n      var searchCount = this.list.querySelectorAll('li.' + dropDownBaseClasses.li).length;\n      var searchActiveCount = this.list.querySelectorAll('li.' + dropDownBaseClasses.selected).length;\n\n      if (this.enableGroupCheckBox && !isNullOrUndefined(this.fields.groupBy)) {\n        searchActiveCount = searchActiveCount - groupItemLength;\n      }\n\n      if ((searchCount === searchActiveCount || searchActiveCount === this.maximumSelectionLength) && this.mode === 'CheckBox' && this.showSelectAll) {\n        this.notify('checkSelectAll', {\n          module: 'CheckBoxSelection',\n          enable: this.mode === 'CheckBox',\n          value: 'check'\n        });\n      } else if (searchCount !== searchActiveCount && this.mode === 'CheckBox' && this.showSelectAll) {\n        this.notify('checkSelectAll', {\n          module: 'CheckBoxSelection',\n          enable: this.mode === 'CheckBox',\n          value: 'uncheck'\n        });\n      }\n\n      if (this.enableGroupCheckBox && this.fields.groupBy && !this.enableSelectionOrder) {\n        for (var i = 0; i < listItem.length; i++) {\n          this.findGroupStart(listItem[i]);\n        }\n\n        this.deselectHeader();\n      }\n    } // eslint-disable-next-line @typescript-eslint/no-unused-vars\n\n  }, {\n    key: \"openClick\",\n    value: function openClick(e) {\n      if (!this.openOnClick && this.mode !== 'CheckBox') {\n        if (this.targetElement() !== '') {\n          this.showPopup();\n        } else {\n          this.hidePopup();\n        }\n      } else if (!this.openOnClick && this.mode === 'CheckBox' && !this.isPopupOpen()) {\n        this.showPopup();\n      }\n    }\n  }, {\n    key: \"keyUp\",\n    value: function keyUp(e) {\n      if (this.mode === 'CheckBox' && !this.openOnClick) {\n        var char = String.fromCharCode(e.keyCode);\n        var isWordCharacter = char.match(/\\w/);\n\n        if (!isNullOrUndefined(isWordCharacter)) {\n          this.isValidKey = true;\n        }\n      }\n\n      this.isValidKey = this.isPopupOpen() && e.keyCode === 8 || this.isValidKey;\n      this.isValidKey = e.ctrlKey && e.keyCode === 86 ? false : this.isValidKey;\n\n      if (this.isValidKey) {\n        this.isValidKey = false;\n        this.expandTextbox();\n        this.showOverAllClear();\n\n        switch (e.keyCode) {\n          default:\n            // For filtering works in mobile firefox\n            this.search(e);\n        }\n      }\n    }\n    /**\n     * To filter the multiselect data from given data source by using query\n     *\n     * @param  {Object[] | DataManager } dataSource - Set the data source to filter.\n     * @param  {Query} query - Specify the query to filter the data.\n     * @param  {FieldSettingsModel} fields - Specify the fields to map the column in the data table.\n     * @returns {void}\n     */\n\n  }, {\n    key: \"filter\",\n    value: function filter(dataSource, query, fields) {\n      this.isFiltered = true;\n      this.remoteFilterAction = true;\n      this.dataUpdater(dataSource, query, fields);\n    }\n  }, {\n    key: \"getQuery\",\n    value: function getQuery(query) {\n      var filterQuery = query ? query.clone() : this.query ? this.query.clone() : new Query();\n\n      if (this.filterAction) {\n        if (this.targetElement() !== null) {\n          var dataType = this.typeOfData(this.dataSource).typeof;\n\n          if (!(this.dataSource instanceof DataManager) && dataType === 'string' || dataType === 'number') {\n            filterQuery.where('', this.filterType, this.targetElement(), this.ignoreCase, this.ignoreAccent);\n          } else {\n            var fields = this.fields;\n            filterQuery.where(!isNullOrUndefined(fields.text) ? fields.text : '', this.filterType, this.targetElement(), this.ignoreCase, this.ignoreAccent);\n          }\n        }\n\n        return filterQuery;\n      } else {\n        return query ? query : this.query ? this.query : new Query();\n      }\n    }\n  }, {\n    key: \"dataUpdater\",\n    value: function dataUpdater(dataSource, query, fields) {\n      this.isDataFetched = false;\n\n      if (this.targetElement().trim() === '') {\n        var list = this.mainList.cloneNode ? this.mainList.cloneNode(true) : this.mainList;\n\n        if (this.backCommand) {\n          this.remoteCustomValue = false;\n\n          if (this.allowCustomValue && list.querySelectorAll('li').length == 0 && this.mainData.length > 0) {\n            this.mainData = [];\n          }\n\n          this.onActionComplete(list, this.mainData);\n\n          if (this.value && this.value.length) {\n            this.refreshSelection();\n          }\n\n          if (this.keyCode !== 8) {\n            this.focusAtFirstListItem();\n          }\n\n          this.notify('reOrder', {\n            module: 'CheckBoxSelection',\n            enable: this.mode === 'CheckBox',\n            e: this\n          });\n        }\n      } else {\n        this.resetList(dataSource, fields, query);\n\n        if (this.allowCustomValue) {\n          if (!(dataSource instanceof DataManager)) {\n            this.checkForCustomValue(query, fields);\n          } else {\n            this.remoteCustomValue = true;\n            this.tempQuery = query;\n          }\n        }\n      }\n\n      this.refreshPopup();\n\n      if (this.mode === 'CheckBox') {\n        this.removeFocus();\n      }\n    }\n  }, {\n    key: \"checkForCustomValue\",\n    value: function checkForCustomValue(query, fields) {\n      var dataChecks = !this.getValueByText(this.inputElement.value, this.ignoreCase);\n\n      if (this.allowCustomValue && dataChecks) {\n        var value = this.inputElement.value;\n        var field = fields ? fields : this.fields;\n        var customData = !isNullOrUndefined(this.mainData) && this.mainData.length > 0 ? this.mainData[0] : this.mainData;\n\n        if (typeof customData !== 'string' && typeof customData !== 'number' && typeof customData !== 'boolean') {\n          var dataItem = {};\n          setValue(field.text, value, dataItem);\n\n          if (typeof getValue(this.fields.value ? this.fields.value : 'value', customData) === 'number') {\n            setValue(field.value, Math.random(), dataItem);\n          } else {\n            setValue(field.value, value, dataItem);\n          }\n\n          var tempData = JSON.parse(JSON.stringify(this.listData));\n          tempData.splice(0, 0, dataItem);\n          this.resetList(tempData, field, query);\n        } else {\n          var _tempData = [this.inputElement.value];\n          _tempData[0] = typeof customData === 'number' && !isNaN(parseFloat(_tempData[0])) ? parseFloat(_tempData[0]) : _tempData[0];\n          _tempData[0] = typeof customData === 'boolean' ? _tempData[0] === 'true' ? true : _tempData[0] === 'false' ? false : _tempData[0] : _tempData[0];\n          this.resetList(_tempData, field);\n        }\n      }\n\n      if (this.value && this.value.length) {\n        this.refreshSelection();\n      }\n    }\n  }, {\n    key: \"getNgDirective\",\n    value: function getNgDirective() {\n      return 'EJS-MULTISELECT';\n    }\n  }, {\n    key: \"wrapperClick\",\n    value: function wrapperClick(e) {\n      this.setDynValue = false;\n\n      if (!this.enabled) {\n        return;\n      }\n\n      if (e.target === this.overAllClear) {\n        e.preventDefault();\n        return;\n      }\n\n      if (!this.inputFocus) {\n        this.inputElement.focus();\n      }\n\n      if (!this.readonly) {\n        if (e.target && e.target.classList.toString().indexOf(CHIP_CLOSE$1) !== -1) {\n          if (this.isPopupOpen()) {\n            this.refreshPopup();\n          }\n\n          return;\n        }\n\n        if (!this.isPopupOpen() && (this.openOnClick || this.showDropDownIcon && e.target && e.target.className === dropdownIcon)) {\n          this.showPopup();\n        } else {\n          this.hidePopup();\n\n          if (this.mode === 'CheckBox') {\n            this.showOverAllClear();\n            this.inputFocus = true;\n\n            if (!this.overAllWrapper.classList.contains(FOCUS)) {\n              this.overAllWrapper.classList.add(FOCUS);\n            }\n          }\n        }\n      }\n\n      if (!(this.targetElement() && this.targetElement() !== '')) {\n        e.preventDefault();\n      }\n    }\n  }, {\n    key: \"enable\",\n    value: function enable(state) {\n      if (state) {\n        this.overAllWrapper.classList.remove(DISABLED$1);\n        this.inputElement.removeAttribute('disabled');\n        attributes(this.inputElement, {\n          'aria-disabled': 'false'\n        });\n        this.ensureAriaDisabled('false');\n      } else {\n        this.overAllWrapper.classList.add(DISABLED$1);\n        this.inputElement.setAttribute('disabled', 'true');\n        attributes(this.inputElement, {\n          'aria-disabled': 'true'\n        });\n        this.ensureAriaDisabled('true');\n      }\n\n      if (this.enabled !== state) {\n        this.enabled = state;\n      }\n\n      this.hidePopup();\n    }\n  }, {\n    key: \"onBlurHandler\",\n    value: function onBlurHandler(eve, isDocClickFromCheck) {\n      var target;\n\n      if (!isNullOrUndefined(eve)) {\n        target = eve.relatedTarget;\n      }\n\n      if (this.popupObj && document.body.contains(this.popupObj.element) && this.popupObj.element.contains(target)) {\n        if (this.mode !== 'CheckBox') {\n          this.inputElement.focus();\n        } else if (this.floatLabelType === 'Auto' && (this.overAllWrapper.classList.contains('e-outline') || this.overAllWrapper.classList.contains('e-filled'))) {\n          addClass([this.overAllWrapper], 'e-valid-input');\n        }\n\n        return;\n      }\n\n      if (this.floatLabelType === 'Auto' && this.overAllWrapper.classList.contains('e-outline') && this.mode === 'CheckBox' && (isNullOrUndefined(this.value) || this.value.length === 0)) {\n        removeClass([this.overAllWrapper], 'e-valid-input');\n      }\n\n      if (this.mode === 'CheckBox' && Browser.isIE && !isNullOrUndefined(eve) && !isDocClickFromCheck) {\n        this.inputFocus = false;\n        this.overAllWrapper.classList.remove(FOCUS);\n        return;\n      }\n\n      if (this.scrollFocusStatus) {\n        if (!isNullOrUndefined(eve)) {\n          eve.preventDefault();\n        }\n\n        this.inputElement.focus();\n        this.scrollFocusStatus = false;\n        return;\n      }\n\n      this.inputFocus = false;\n      this.overAllWrapper.classList.remove(FOCUS);\n\n      if (this.addTagOnBlur) {\n        var dataChecks = this.getValueByText(this.inputElement.value, this.ignoreCase, this.ignoreAccent);\n        var listLiElement = this.findListElement(this.list, 'li', 'data-value', dataChecks);\n        var className = this.hideSelectedItem ? HIDE_LIST : dropDownBaseClasses.selected;\n        var allowChipAddition = listLiElement && !listLiElement.classList.contains(className) ? true : false;\n\n        if (allowChipAddition) {\n          this.updateListSelection(listLiElement, eve);\n\n          if (this.mode === 'Delimiter') {\n            this.updateDelimeter(this.delimiterChar);\n          }\n        }\n      }\n\n      this.refreshListItems(null);\n\n      if (this.mode !== 'Box' && this.mode !== 'CheckBox') {\n        this.updateDelimView();\n      }\n\n      if (this.changeOnBlur) {\n        this.updateValueState(eve, this.value, this.tempValues);\n        this.dispatchEvent(this.hiddenElement, 'change');\n      }\n\n      this.overAllClear.style.display = 'none';\n\n      if (this.isPopupOpen()) {\n        this.hidePopup();\n      }\n\n      this.makeTextBoxEmpty();\n      this.trigger('blur');\n      this.focused = true;\n\n      if (Browser.isDevice && this.mode !== 'Delimiter' && this.mode !== 'CheckBox') {\n        this.removeChipFocus();\n      }\n\n      this.removeChipSelection();\n      this.refreshInputHight();\n      floatLabelBlur(this.overAllWrapper, this.componentWrapper, this.value, this.floatLabelType, this.placeholder);\n      this.refreshPlaceHolder();\n\n      if ((this.allowFiltering || this.enableSelectionOrder === true && this.mode === 'CheckBox') && !isNullOrUndefined(this.mainList)) {\n        this.ulElement = this.mainList;\n      }\n\n      this.checkPlaceholderSize();\n    }\n  }, {\n    key: \"checkPlaceholderSize\",\n    value: function checkPlaceholderSize() {\n      if (this.showDropDownIcon) {\n        var downIconWidth = this.dropIcon.offsetWidth + parseInt(window.getComputedStyle(this.dropIcon).marginRight, 10);\n        this.setPlaceholderSize(downIconWidth);\n      } else {\n        if (!isNullOrUndefined(this.dropIcon)) {\n          this.setPlaceholderSize(this.showDropDownIcon ? this.dropIcon.offsetWidth : 0);\n        }\n      }\n    }\n  }, {\n    key: \"setPlaceholderSize\",\n    value: function setPlaceholderSize(downIconWidth) {\n      if (isNullOrUndefined(this.value) || this.value.length === 0) {\n        if (this.dropIcon.offsetWidth !== 0) {\n          this.searchWrapper.style.width = 'calc(100% - ' + (downIconWidth + 10) + 'px';\n        } else {\n          addClass([this.searchWrapper], CUSTOM_WIDTH);\n        }\n      } else if (!isNullOrUndefined(this.value)) {\n        this.searchWrapper.removeAttribute('style');\n        removeClass([this.searchWrapper], CUSTOM_WIDTH);\n      }\n    }\n  }, {\n    key: \"refreshInputHight\",\n    value: function refreshInputHight() {\n      if ((!this.value || !this.value.length) && (isNullOrUndefined(this.text) || this.text === '')) {\n        this.searchWrapper.classList.remove(ZERO_SIZE);\n      } else {\n        this.searchWrapper.classList.add(ZERO_SIZE);\n      }\n    }\n  }, {\n    key: \"validateValues\",\n    value: function validateValues(newValue, oldValue) {\n      return JSON.stringify(newValue.slice().sort()) !== JSON.stringify(oldValue.slice().sort());\n    }\n  }, {\n    key: \"updateValueState\",\n    value: function updateValueState(event, newVal, oldVal) {\n      var newValue = newVal ? newVal : [];\n      var oldValue = oldVal ? oldVal : [];\n\n      if (this.initStatus && this.validateValues(newValue, oldValue)) {\n        var eventArgs = {\n          e: event,\n          oldValue: oldVal,\n          value: newVal,\n          isInteracted: event ? true : false,\n          element: this.element,\n          event: event\n        };\n\n        if (this.isAngular && this.preventChange) {\n          this.preventChange = false;\n        } else {\n          this.trigger('change', eventArgs);\n        }\n\n        this.updateTempValue();\n\n        if (!this.changeOnBlur) {\n          this.dispatchEvent(this.hiddenElement, 'change');\n        }\n      }\n    }\n  }, {\n    key: \"updateTempValue\",\n    value: function updateTempValue() {\n      if (!this.value) {\n        this.tempValues = this.value;\n      } else {\n        this.tempValues = this.value.slice();\n      }\n    }\n  }, {\n    key: \"getPagingCount\",\n    value: function getPagingCount() {\n      var height = this.list.classList.contains(dropDownBaseClasses.noData) ? null : getComputedStyle(this.getItems()[0], null).getPropertyValue('height');\n      return Math.round(this.list.offsetHeight / parseInt(height, 10));\n    }\n  }, {\n    key: \"pageUpSelection\",\n    value: function pageUpSelection(steps) {\n      var collection = this.list.querySelectorAll('li.' + dropDownBaseClasses.li + ':not(.' + HIDE_LIST + ')' + ':not(.e-reorder-hide)');\n      var previousItem = steps >= 0 ? collection[steps + 1] : collection[0];\n      this.addListFocus(previousItem);\n      this.scrollBottom(previousItem, this.getIndexByValue(previousItem.getAttribute('data-value')));\n    }\n  }, {\n    key: \"pageDownSelection\",\n    value: function pageDownSelection(steps) {\n      // eslint-disable-next-line @typescript-eslint/no-unused-vars\n      var list = this.getItems();\n      var collection = this.list.querySelectorAll('li.' + dropDownBaseClasses.li + ':not(.' + HIDE_LIST + ')' + ':not(.e-reorder-hide)');\n      var previousItem = steps <= collection.length ? collection[steps - 1] : collection[collection.length - 1];\n      this.addListFocus(previousItem);\n      this.scrollBottom(previousItem, this.getIndexByValue(previousItem.getAttribute('data-value')));\n    }\n  }, {\n    key: \"getItems\",\n    value: function getItems() {\n      if (!this.list) {\n        _get(_getPrototypeOf(MultiSelect.prototype), \"render\", this).call(this);\n      }\n\n      return this.ulElement && this.ulElement.querySelectorAll('.' + dropDownBaseClasses.li).length > 0 ? this.ulElement.querySelectorAll('.' + dropDownBaseClasses.li + ':not(.' + HIDE_LIST + ')') : [];\n    }\n  }, {\n    key: \"focusInHandler\",\n    value: function focusInHandler(e) {\n      if (this.enabled) {\n        this.showOverAllClear();\n        this.inputFocus = true;\n\n        if (this.value && this.value.length) {\n          if (this.mode !== 'Delimiter' && this.mode !== 'CheckBox') {\n            this.chipCollectionWrapper.style.display = '';\n          } else {\n            this.showDelimWrapper();\n          }\n\n          if (this.mode !== 'CheckBox') {\n            this.viewWrapper.style.display = 'none';\n          }\n        }\n\n        if (this.mode !== 'CheckBox') {\n          this.searchWrapper.classList.remove(ZERO_SIZE);\n        }\n\n        this.checkPlaceholderSize();\n\n        if (this.focused) {\n          var args = {\n            isInteracted: e ? true : false,\n            event: e\n          };\n          this.trigger('focus', args);\n          this.focused = false;\n        }\n\n        if (!this.overAllWrapper.classList.contains(FOCUS)) {\n          this.overAllWrapper.classList.add(FOCUS);\n        }\n\n        floatLabelFocus(this.overAllWrapper, this.componentWrapper);\n\n        if (this.isPopupOpen()) {\n          this.refreshPopup();\n        }\n\n        return true;\n      } else {\n        return false;\n      }\n    }\n  }, {\n    key: \"showDelimWrapper\",\n    value: function showDelimWrapper() {\n      if (this.mode === 'CheckBox') {\n        this.viewWrapper.style.display = '';\n      } else {\n        this.delimiterWrapper.style.display = '';\n      }\n\n      this.componentWrapper.classList.add(DELIMITER_VIEW_WRAPPER);\n    }\n  }, {\n    key: \"hideDelimWrapper\",\n    value: function hideDelimWrapper() {\n      this.delimiterWrapper.style.display = 'none';\n      this.componentWrapper.classList.remove(DELIMITER_VIEW_WRAPPER);\n    }\n  }, {\n    key: \"expandTextbox\",\n    value: function expandTextbox() {\n      var size = 5;\n\n      if (this.placeholder) {\n        size = size > this.inputElement.placeholder.length ? size : this.inputElement.placeholder.length;\n      }\n\n      if (this.inputElement.value.length > size) {\n        this.inputElement.size = this.inputElement.value.length;\n      } else {\n        this.inputElement.size = size;\n      }\n    }\n  }, {\n    key: \"isPopupOpen\",\n    value: function isPopupOpen() {\n      return this.popupWrapper !== null && this.popupWrapper.parentElement !== null;\n    }\n  }, {\n    key: \"refreshPopup\",\n    value: function refreshPopup() {\n      if (this.popupObj && this.mobFilter) {\n        this.popupObj.setProperties({\n          width: this.calcPopupWidth()\n        });\n        this.popupObj.refreshPosition(this.overAllWrapper);\n        this.popupObj.resolveCollision();\n      }\n    }\n  }, {\n    key: \"checkTextLength\",\n    value: function checkTextLength() {\n      return this.targetElement().length < 1;\n    }\n  }, {\n    key: \"popupKeyActions\",\n    value: function popupKeyActions(e) {\n      switch (e.keyCode) {\n        case 38:\n          this.hidePopup();\n\n          if (this.mode === 'CheckBox') {\n            this.inputElement.focus();\n          }\n\n          e.preventDefault();\n          break;\n\n        case 40:\n          if (!this.isPopupOpen()) {\n            this.showPopup();\n            e.preventDefault();\n          }\n\n          break;\n      }\n    }\n  }, {\n    key: \"updateAriaAttribute\",\n    value: function updateAriaAttribute() {\n      var focusedItem = this.list.querySelector('.' + dropDownBaseClasses.focus);\n\n      if (!isNullOrUndefined(focusedItem)) {\n        this.inputElement.setAttribute('aria-activedescendant', focusedItem.id);\n      }\n    }\n  }, {\n    key: \"homeNavigation\",\n    value: function homeNavigation(isHome) {\n      this.removeFocus();\n      var scrollEle = this.ulElement.querySelectorAll('li.' + dropDownBaseClasses.li + ':not(.' + HIDE_LIST + ')' + ':not(.e-reorder-hide)');\n\n      if (scrollEle.length > 0) {\n        var element = scrollEle[isHome ? 0 : scrollEle.length - 1];\n        element.classList.add(dropDownBaseClasses.focus);\n        this.scrollBottom(element);\n      }\n    }\n  }, {\n    key: \"onKeyDown\",\n    value: function onKeyDown(e) {\n      if (this.readonly || !this.enabled && this.mode !== 'CheckBox') {\n        return;\n      }\n\n      this.keyCode = e.keyCode;\n      this.keyDownStatus = true;\n\n      if (e.keyCode > 111 && e.keyCode < 124) {\n        return;\n      }\n\n      if (e.altKey) {\n        this.popupKeyActions(e);\n        return;\n      } else if (this.isPopupOpen()) {\n        var focusedItem = this.list.querySelector('.' + dropDownBaseClasses.focus);\n        var activeIndex;\n\n        switch (e.keyCode) {\n          case 36:\n          case 35:\n            this.homeNavigation(e.keyCode === 36 ? true : false);\n            break;\n\n          case 33:\n            e.preventDefault();\n\n            if (focusedItem) {\n              this.getIndexByValue(focusedItem.getAttribute('data-value'));\n              this.pageUpSelection(activeIndex - this.getPagingCount());\n              this.updateAriaAttribute();\n            }\n\n            return;\n\n          case 34:\n            e.preventDefault();\n\n            if (focusedItem) {\n              this.getIndexByValue(focusedItem.getAttribute('data-value'));\n              this.pageDownSelection(activeIndex + this.getPagingCount());\n              this.updateAriaAttribute();\n            }\n\n            return;\n\n          case 38:\n            this.arrowUp(e);\n            break;\n\n          case 40:\n            this.arrowDown(e);\n            break;\n\n          case 27:\n            e.preventDefault();\n            this.hidePopup();\n\n            if (this.mode === 'CheckBox') {\n              this.inputElement.focus();\n            }\n\n            return;\n\n          case 13:\n            e.preventDefault();\n\n            if (this.mode !== 'CheckBox') {\n              this.selectByKey(e);\n            }\n\n            this.checkPlaceholderSize();\n            return;\n\n          case 32:\n            this.spaceKeySelection(e);\n            return;\n\n          case 9:\n            e.preventDefault();\n            this.hidePopup();\n            this.inputElement.focus();\n            this.overAllWrapper.classList.add(FOCUS);\n        }\n      } else {\n        switch (e.keyCode) {\n          case 13:\n          case 9:\n          case 16:\n          case 17:\n          case 20:\n            return;\n\n          case 40:\n            if (this.openOnClick) {\n              this.showPopup();\n            }\n\n            break;\n\n          case 27:\n            e.preventDefault();\n            this.escapeAction();\n            return;\n        }\n      }\n\n      if (this.checkTextLength()) {\n        this.keyNavigation(e);\n      }\n\n      if (this.mode === 'CheckBox' && this.enableSelectionOrder) {\n        this.checkBackCommand(e);\n      }\n\n      this.expandTextbox();\n\n      if (!(this.mode === 'CheckBox' && this.showSelectAll)) {\n        this.refreshPopup();\n      }\n    }\n  }, {\n    key: \"arrowDown\",\n    value: function arrowDown(e) {\n      e.preventDefault();\n      this.moveByList(1);\n      this.keyAction = true;\n\n      if (document.activeElement.classList.contains(FILTERINPUT) || this.mode === 'CheckBox' && !this.allowFiltering && document.activeElement !== this.list) {\n        this.list.focus();\n        EventHandler.add(this.list, 'keydown', this.onKeyDown, this);\n      }\n\n      this.updateAriaAttribute();\n    }\n  }, {\n    key: \"arrowUp\",\n    value: function arrowUp(e) {\n      e.preventDefault();\n      this.keyAction = true;\n      var list = this.list.querySelectorAll('li.' + dropDownBaseClasses.li + ':not(.' + HIDE_LIST + ')' + ':not(.e-reorder-hide)');\n\n      if (this.enableGroupCheckBox && this.mode === 'CheckBox' && !isNullOrUndefined(this.fields.groupBy)) {\n        list = this.list.querySelectorAll('li.' + dropDownBaseClasses.li + ',li.' + dropDownBaseClasses.group + ':not(.' + HIDE_LIST + ')' + ':not(.e-reorder-hide)');\n      }\n\n      var focuseElem = this.list.querySelector('li.' + dropDownBaseClasses.focus);\n      var index = Array.prototype.slice.call(list).indexOf(focuseElem);\n\n      if (index <= 0 && this.mode === 'CheckBox' && this.allowFiltering) {\n        this.keyAction = false;\n        this.notify('inputFocus', {\n          module: 'CheckBoxSelection',\n          enable: this.mode === 'CheckBox',\n          value: 'focus'\n        });\n      }\n\n      this.moveByList(-1);\n      this.updateAriaAttribute();\n    }\n  }, {\n    key: \"spaceKeySelection\",\n    value: function spaceKeySelection(e) {\n      if (this.mode === 'CheckBox') {\n        if (!document.activeElement.classList.contains(FILTERINPUT)) {\n          e.preventDefault();\n          this.keyAction = true;\n          this.list.focus();\n        }\n\n        this.selectByKey(e);\n      }\n\n      this.checkPlaceholderSize();\n    }\n  }, {\n    key: \"checkBackCommand\",\n    value: function checkBackCommand(e) {\n      if (e.keyCode === 8 && this.targetElement() === '') {\n        this.backCommand = false;\n      } else {\n        this.backCommand = true;\n      }\n    }\n  }, {\n    key: \"keyNavigation\",\n    value: function keyNavigation(e) {\n      if (this.mode !== 'Delimiter' && this.mode !== 'CheckBox' && this.value && this.value.length) {\n        switch (e.keyCode) {\n          case 37:\n            //left arrow\n            e.preventDefault();\n            this.moveBy(-1, e);\n            break;\n\n          case 39:\n            //right arrow\n            e.preventDefault();\n            this.moveBy(1, e);\n            break;\n\n          case 8:\n            this.removelastSelection(e);\n            break;\n\n          case 46:\n            //del\n            this.removeSelectedChip(e);\n            break;\n        }\n      } else if (e.keyCode === 8 && this.mode === 'Delimiter') {\n        if (this.value && this.value.length) {\n          e.preventDefault();\n          var temp = this.value[this.value.length - 1];\n          this.removeValue(temp, e);\n          this.updateDelimeter(this.delimiterChar, e);\n          this.focusAtLastListItem(temp);\n        }\n      }\n    }\n  }, {\n    key: \"selectByKey\",\n    value: function selectByKey(e) {\n      this.removeChipSelection();\n      this.selectListByKey(e);\n\n      if (this.hideSelectedItem) {\n        this.focusAtFirstListItem();\n      }\n    }\n  }, {\n    key: \"escapeAction\",\n    value: function escapeAction() {\n      var temp = this.tempValues ? this.tempValues.slice() : [];\n\n      if (this.value && this.validateValues(this.value, temp)) {\n        if (this.mode !== 'CheckBox') {\n          this.value = temp;\n          this.initialValueUpdate();\n        }\n\n        if (this.mode !== 'Delimiter' && this.mode !== 'CheckBox') {\n          this.chipCollectionWrapper.style.display = '';\n        } else {\n          this.showDelimWrapper();\n        }\n\n        this.refreshPlaceHolder();\n\n        if (this.value.length) {\n          this.showOverAllClear();\n        } else {\n          this.hideOverAllClear();\n        }\n      }\n\n      this.makeTextBoxEmpty();\n    }\n  }, {\n    key: \"scrollBottom\",\n    value: function scrollBottom(selectedLI, activeIndex) {\n      var currentOffset = this.list.offsetHeight;\n      var nextBottom = selectedLI.offsetTop + selectedLI.offsetHeight - this.list.scrollTop;\n      var nextOffset = this.list.scrollTop + nextBottom - currentOffset;\n      var boxRange = selectedLI.offsetTop + selectedLI.offsetHeight - this.list.scrollTop;\n      boxRange = this.fields.groupBy && !isNullOrUndefined(this.fixedHeaderElement) ? boxRange - this.fixedHeaderElement.offsetHeight : boxRange;\n\n      if (activeIndex === 0) {\n        this.list.scrollTop = 0;\n      } else if (nextBottom > currentOffset) {\n        this.list.scrollTop = nextOffset;\n      } else if (!(boxRange > 0 && this.list.offsetHeight > boxRange)) {\n        this.list.scrollTop = nextOffset;\n      }\n    }\n  }, {\n    key: \"scrollTop\",\n    value: function scrollTop(selectedLI, activeIndex) {\n      var nextOffset = selectedLI.offsetTop - this.list.scrollTop;\n      nextOffset = this.fields.groupBy && !isUndefined(this.fixedHeaderElement) ? nextOffset - this.fixedHeaderElement.offsetHeight : nextOffset;\n      var boxRange = selectedLI.offsetTop + selectedLI.offsetHeight - this.list.scrollTop;\n\n      if (activeIndex === 0) {\n        this.list.scrollTop = 0;\n      } else if (nextOffset < 0) {\n        this.list.scrollTop = this.list.scrollTop + nextOffset;\n      } else if (!(boxRange > 0 && this.list.offsetHeight > boxRange)) {\n        this.list.scrollTop = selectedLI.offsetTop - (this.fields.groupBy && !isUndefined(this.fixedHeaderElement) ? this.fixedHeaderElement.offsetHeight : 0);\n      }\n    }\n  }, {\n    key: \"selectListByKey\",\n    value: function selectListByKey(e) {\n      var li = this.list.querySelector('li.' + dropDownBaseClasses.focus);\n      var limit = this.value && this.value.length ? this.value.length : 0;\n      var target;\n\n      if (li !== null) {\n        if (li.classList.contains('e-active')) {\n          limit = limit - 1;\n        }\n\n        if (this.isValidLI(li) && limit < this.maximumSelectionLength) {\n          this.updateListSelection(li, e);\n          this.addListFocus(li);\n\n          if (this.mode === 'CheckBox') {\n            this.updateDelimView();\n            this.updateDelimeter(this.delimiterChar, e);\n            this.refreshInputHight();\n            this.checkPlaceholderSize();\n\n            if (this.enableGroupCheckBox && !isNullOrUndefined(this.fields.groupBy)) {\n              target = li.firstElementChild.lastElementChild;\n              this.findGroupStart(target);\n              this.deselectHeader();\n            }\n          } else {\n            this.updateDelimeter(this.delimiterChar, e);\n          }\n\n          this.makeTextBoxEmpty();\n\n          if (this.mode !== 'CheckBox') {\n            this.refreshListItems(li.textContent);\n          }\n\n          if (!this.changeOnBlur) {\n            this.updateValueState(e, this.value, this.tempValues);\n          }\n\n          this.refreshPopup();\n        } else {\n          if (!this.isValidLI(li) && limit < this.maximumSelectionLength) {\n            target = li.firstElementChild.lastElementChild;\n\n            if (target.classList.contains('e-check')) {\n              this.selectAllItem(false, e, li);\n            } else {\n              this.selectAllItem(true, e, li);\n            }\n          }\n        }\n\n        this.refreshSelection();\n\n        if (this.closePopupOnSelect) {\n          this.hidePopup();\n        }\n      }\n\n      this.refreshPlaceHolder();\n    }\n  }, {\n    key: \"refreshListItems\",\n    value: function refreshListItems(data) {\n      if ((this.allowFiltering || this.mode === 'CheckBox' && this.enableSelectionOrder === true || this.allowCustomValue) && this.mainList && this.listData) {\n        var list = this.mainList.cloneNode ? this.mainList.cloneNode(true) : this.mainList;\n        this.onActionComplete(list, this.mainData);\n        this.focusAtLastListItem(data);\n\n        if (this.value && this.value.length) {\n          this.refreshSelection();\n        }\n      }\n    }\n  }, {\n    key: \"removeSelectedChip\",\n    value: function removeSelectedChip(e) {\n      var selectedElem = this.chipCollectionWrapper.querySelector('span.' + CHIP_SELECTED);\n      var temp;\n\n      if (selectedElem !== null) {\n        if (!isNullOrUndefined(this.value)) {\n          this.tempValues = this.value.slice();\n        }\n\n        temp = selectedElem.nextElementSibling;\n\n        if (temp !== null) {\n          this.removeChipSelection();\n          this.addChipSelection(temp, e);\n        }\n\n        this.removeValue(selectedElem.getAttribute('data-value'), e);\n        this.makeTextBoxEmpty();\n      }\n\n      if (this.closePopupOnSelect) {\n        this.hidePopup();\n      }\n\n      this.checkPlaceholderSize();\n    }\n  }, {\n    key: \"moveByTop\",\n    value: function moveByTop(state) {\n      var elements = this.list.querySelectorAll('li.' + dropDownBaseClasses.li);\n      var index;\n\n      if (elements.length > 1) {\n        this.removeFocus();\n        index = state ? 0 : elements.length - 1;\n        this.addListFocus(elements[index]);\n        this.scrollBottom(elements[index], index);\n      }\n\n      this.updateAriaAttribute();\n    }\n  }, {\n    key: \"moveByList\",\n    value: function moveByList(position) {\n      if (this.list) {\n        var elements = this.list.querySelectorAll('li.' + dropDownBaseClasses.li + ':not(.' + HIDE_LIST + ')' + ':not(.e-reorder-hide)');\n\n        if (this.mode === 'CheckBox' && this.enableGroupCheckBox && !isNullOrUndefined(this.fields.groupBy)) {\n          elements = this.list.querySelectorAll('li.' + dropDownBaseClasses.li + ',li.' + dropDownBaseClasses.group + ':not(.' + HIDE_LIST + ')' + ':not(.e-reorder-hide)');\n        }\n\n        var selectedElem = this.list.querySelector('li.' + dropDownBaseClasses.focus);\n        var temp = -1;\n\n        if (elements.length) {\n          for (var index = 0; index < elements.length; index++) {\n            if (elements[index] === selectedElem) {\n              temp = index;\n              break;\n            }\n          }\n\n          if (position > 0) {\n            if (temp < elements.length - 1) {\n              this.removeFocus();\n              this.addListFocus(elements[++temp]);\n              this.updateCheck(elements[temp]);\n              this.scrollBottom(elements[temp], temp);\n            }\n          } else {\n            if (temp > 0) {\n              this.removeFocus();\n              this.addListFocus(elements[--temp]);\n              this.updateCheck(elements[temp]);\n              this.scrollTop(elements[temp], temp);\n            }\n          }\n        }\n      }\n    }\n  }, {\n    key: \"updateCheck\",\n    value: function updateCheck(element) {\n      if (this.mode === 'CheckBox' && this.enableGroupCheckBox && !isNullOrUndefined(this.fields.groupBy)) {\n        var checkElement = element.firstElementChild.lastElementChild;\n\n        if (checkElement.classList.contains('e-check')) {\n          element.classList.add('e-active');\n        } else {\n          element.classList.remove('e-active');\n        }\n      }\n    }\n  }, {\n    key: \"moveBy\",\n    value: function moveBy(position, e) {\n      var temp;\n      var elements = this.chipCollectionWrapper.querySelectorAll('span.' + CHIP$1);\n      var selectedElem = this.chipCollectionWrapper.querySelector('span.' + CHIP_SELECTED);\n\n      if (selectedElem === null) {\n        if (position < 0) {\n          this.addChipSelection(elements[elements.length - 1], e);\n        }\n      } else {\n        if (position < 0) {\n          temp = selectedElem.previousElementSibling;\n\n          if (temp !== null) {\n            this.removeChipSelection();\n            this.addChipSelection(temp, e);\n          }\n        } else {\n          temp = selectedElem.nextElementSibling;\n          this.removeChipSelection();\n\n          if (temp !== null) {\n            this.addChipSelection(temp, e);\n          }\n        }\n      }\n    }\n  }, {\n    key: \"chipClick\",\n    value: function chipClick(e) {\n      if (this.enabled) {\n        var elem = closest(e.target, '.' + CHIP$1);\n        this.removeChipSelection();\n        this.addChipSelection(elem, e);\n      }\n    }\n  }, {\n    key: \"removeChipSelection\",\n    value: function removeChipSelection() {\n      if (this.chipCollectionWrapper) {\n        this.removeChipFocus();\n      }\n    }\n  }, {\n    key: \"addChipSelection\",\n    value: function addChipSelection(element, e) {\n      addClass([element], CHIP_SELECTED);\n      this.trigger('chipSelection', e);\n    }\n  }, {\n    key: \"onChipRemove\",\n    value: function onChipRemove(e) {\n      if (e.which === 3 || e.button === 2) {\n        return;\n      }\n\n      if (this.enabled && !this.readonly) {\n        var element = e.target.parentElement;\n        var customVal = element.getAttribute('data-value');\n        var value = this.getFormattedValue(customVal);\n\n        if (this.allowCustomValue && (customVal !== 'false' && value === false || !isNullOrUndefined(value) && value.toString() === 'NaN')) {\n          value = customVal;\n        }\n\n        if (this.isPopupOpen() && this.mode !== 'CheckBox') {\n          this.hidePopup();\n        }\n\n        if (!this.inputFocus) {\n          this.inputElement.focus();\n        }\n\n        this.removeValue(value, e);\n\n        if (isNullOrUndefined(this.findListElement(this.list, 'li', 'data-value', value)) && this.mainList && this.listData) {\n          var list = this.mainList.cloneNode ? this.mainList.cloneNode(true) : this.mainList;\n          this.onActionComplete(list, this.mainData);\n        }\n\n        this.updateDelimeter(this.delimiterChar, e);\n\n        if (this.placeholder && this.floatLabelType === 'Never') {\n          this.makeTextBoxEmpty();\n          this.checkPlaceholderSize();\n        } else {\n          this.inputElement.value = '';\n        }\n\n        e.preventDefault();\n      }\n    }\n  }, {\n    key: \"makeTextBoxEmpty\",\n    value: function makeTextBoxEmpty() {\n      this.inputElement.value = '';\n      this.refreshPlaceHolder();\n    }\n  }, {\n    key: \"refreshPlaceHolder\",\n    value: function refreshPlaceHolder() {\n      if (this.placeholder && this.floatLabelType === 'Never') {\n        if (this.value && this.value.length || !isNullOrUndefined(this.text) && this.text !== '') {\n          this.inputElement.placeholder = '';\n        } else {\n          this.inputElement.placeholder = encodePlaceholder(this.placeholder);\n        }\n      } else {\n        this.setFloatLabelType();\n      }\n\n      this.expandTextbox();\n    }\n  }, {\n    key: \"removeAllItems\",\n    value: function removeAllItems(value, eve, isClearAll, element, mainElement) {\n      var index = this.value.indexOf(value);\n      var removeVal = this.value.slice(0);\n      removeVal.splice(index, 1);\n      this.setProperties({\n        value: [].concat([], removeVal)\n      }, true);\n      element.setAttribute('aria-selected', 'false');\n      var className = this.hideSelectedItem ? HIDE_LIST : dropDownBaseClasses.selected;\n      removeClass([element], className);\n      this.notify('activeList', {\n        module: 'CheckBoxSelection',\n        enable: this.mode === 'CheckBox',\n        li: element,\n        e: this,\n        index: index\n      });\n      this.invokeCheckboxSelection(element, eve, isClearAll);\n      this.updateMainList(true, value, mainElement);\n      this.updateChipStatus();\n    }\n  }, {\n    key: \"invokeCheckboxSelection\",\n    value: function invokeCheckboxSelection(element, eve, isClearAll) {\n      this.notify('updatelist', {\n        module: 'CheckBoxSelection',\n        enable: this.mode === 'CheckBox',\n        li: element,\n        e: eve\n      });\n      attributes(this.inputElement, {\n        'aria-activedescendant': element.id\n      });\n\n      if (this.value && this.value.length !== this.mainData.length && this.mode === 'CheckBox' && this.showSelectAll && !(this.isSelectAll || isClearAll)) {\n        this.notify('checkSelectAll', {\n          module: 'CheckBoxSelection',\n          enable: this.mode === 'CheckBox',\n          value: 'uncheck'\n        });\n      }\n    }\n  }, {\n    key: \"removeValue\",\n    value: function removeValue(value, eve, length, isClearAll) {\n      var _this30 = this;\n\n      var index = this.value.indexOf(this.getFormattedValue(value));\n\n      if (index === -1 && this.allowCustomValue && !isNullOrUndefined(value)) {\n        index = this.value.indexOf(value.toString());\n      }\n\n      var targetEle = eve && eve.target;\n      isClearAll = isClearAll || targetEle && targetEle.classList.contains('e-close-hooker') ? true : null;\n      var className = this.hideSelectedItem ? HIDE_LIST : dropDownBaseClasses.selected;\n\n      if (index !== -1) {\n        var element = this.findListElement(this.list, 'li', 'data-value', value);\n        var val = this.getDataByValue(value);\n        var eventArgs = {\n          e: eve,\n          item: element,\n          itemData: val,\n          isInteracted: eve ? true : false,\n          cancel: false\n        };\n        this.trigger('removing', eventArgs, function (eventArgs) {\n          if (eventArgs.cancel) {\n            _this30.removeIndex++;\n          } else {\n            var removeVal = _this30.value.slice(0);\n\n            removeVal.splice(index, 1);\n\n            _this30.setProperties({\n              value: [].concat([], removeVal)\n            }, true);\n\n            if (element !== null) {\n              var hideElement = _this30.findListElement(_this30.mainList, 'li', 'data-value', value);\n\n              element.setAttribute('aria-selected', 'false');\n              removeClass([element], className);\n\n              if (hideElement) {\n                hideElement.setAttribute('aria-selected', 'false');\n                removeClass([element, hideElement], className);\n              }\n\n              _this30.notify('activeList', {\n                module: 'CheckBoxSelection',\n                enable: _this30.mode === 'CheckBox',\n                li: element,\n                e: _this30,\n                index: index\n              });\n\n              _this30.invokeCheckboxSelection(element, eve, isClearAll);\n            }\n\n            if (_this30.hideSelectedItem && _this30.fields.groupBy) {\n              _this30.hideGroupItem(value);\n            }\n\n            if (_this30.hideSelectedItem && _this30.fixedHeaderElement && _this30.fields.groupBy && _this30.mode !== 'CheckBox' && _this30.isPopupOpen()) {\n              _get(_getPrototypeOf(MultiSelect.prototype), \"scrollStop\", _this30).call(_this30);\n            }\n\n            _this30.updateMainList(true, value);\n\n            _this30.removeChip(value);\n\n            _this30.updateChipStatus();\n\n            var limit = _this30.value && _this30.value.length ? _this30.value.length : 0;\n\n            if (limit < _this30.maximumSelectionLength) {\n              var collection = _this30.list.querySelectorAll('li.' + dropDownBaseClasses.li + ':not(.e-active)');\n\n              removeClass(collection, 'e-disable');\n            }\n\n            _this30.trigger('removed', eventArgs);\n\n            var _targetEle = eve && eve.currentTarget;\n\n            var isSelectAll = _targetEle && _targetEle.classList.contains('e-selectall-parent') ? true : null;\n\n            if (!_this30.changeOnBlur && !isClearAll && eve && length && !isSelectAll) {\n              _this30.updateValueState(eve, _this30.value, _this30.tempValues);\n            }\n\n            if (length) {\n              _this30.selectAllEventData.push(val);\n\n              _this30.selectAllEventEle.push(element);\n            }\n\n            if (length === 1) {\n              if (!_this30.changeOnBlur) {\n                _this30.updateValueState(eve, _this30.value, _this30.tempValues);\n              }\n\n              var args = {\n                event: eve,\n                items: _this30.selectAllEventEle,\n                itemData: _this30.selectAllEventData,\n                isInteracted: eve ? true : false,\n                isChecked: false\n              };\n\n              _this30.trigger('selectedAll', args);\n\n              _this30.selectAllEventData = [];\n              _this30.selectAllEventEle = [];\n            }\n\n            if (isClearAll && (length === 1 || length === null)) {\n              _this30.clearAllCallback(eve, isClearAll);\n            }\n          }\n        });\n      }\n    }\n  }, {\n    key: \"updateMainList\",\n    value: function updateMainList(state, value, mainElement) {\n      if (this.allowFiltering || this.mode === 'CheckBox') {\n        var element2 = mainElement ? mainElement : this.findListElement(this.mainList, 'li', 'data-value', value);\n\n        if (element2) {\n          if (state) {\n            element2.setAttribute('aria-selected', 'false');\n            removeClass([element2], this.hideSelectedItem ? HIDE_LIST : dropDownBaseClasses.selected);\n\n            if (this.mode === 'CheckBox') {\n              element2.firstElementChild.setAttribute('aria-checked', 'false');\n              removeClass([element2.firstElementChild.lastElementChild], 'e-check');\n            }\n          } else {\n            element2.setAttribute('aria-selected', 'true');\n            addClass([element2], this.hideSelectedItem ? HIDE_LIST : dropDownBaseClasses.selected);\n\n            if (this.mode === 'CheckBox') {\n              element2.firstElementChild.setAttribute('aria-checked', 'true');\n              addClass([element2.firstElementChild.lastElementChild], 'e-check');\n            }\n          }\n        }\n      }\n    }\n  }, {\n    key: \"removeChip\",\n    value: function removeChip(value) {\n      if (this.chipCollectionWrapper) {\n        var element = this.findListElement(this.chipCollectionWrapper, 'span', 'data-value', value);\n\n        if (element) {\n          remove(element);\n        }\n      }\n    }\n  }, {\n    key: \"setWidth\",\n    value: function setWidth(width) {\n      if (!isNullOrUndefined(width)) {\n        if (typeof width === 'number') {\n          this.overAllWrapper.style.width = formatUnit(width);\n        } else if (typeof width === 'string') {\n          this.overAllWrapper.style.width = width.match(/px|%|em/) ? width : formatUnit(width);\n        }\n      }\n    }\n  }, {\n    key: \"updateChipStatus\",\n    value: function updateChipStatus() {\n      if (this.value && this.value.length) {\n        if (!isNullOrUndefined(this.chipCollectionWrapper)) {\n          this.chipCollectionWrapper.style.display = '';\n        }\n\n        if (this.mode === 'Delimiter' || this.mode === 'CheckBox') {\n          this.showDelimWrapper();\n        }\n\n        this.showOverAllClear();\n      } else {\n        if (!isNullOrUndefined(this.chipCollectionWrapper)) {\n          this.chipCollectionWrapper.style.display = 'none';\n        }\n\n        if (!isNullOrUndefined(this.delimiterWrapper)) {\n          this.delimiterWrapper.style.display = 'none';\n        }\n\n        this.hideOverAllClear();\n      }\n    }\n  }, {\n    key: \"addValue\",\n    value: function addValue(value, text, eve) {\n      if (!this.value) {\n        this.value = [];\n      }\n\n      if (this.value.indexOf(value) < 0) {\n        this.setProperties({\n          value: [].concat([], this.value, [value])\n        }, true);\n      }\n\n      var element = this.findListElement(this.list, 'li', 'data-value', value);\n      this.removeFocus();\n\n      if (element) {\n        this.addListFocus(element);\n        this.addListSelection(element);\n      }\n\n      if (this.mode !== 'Delimiter' && this.mode !== 'CheckBox') {\n        this.addChip(text, value, eve);\n      }\n\n      if (this.hideSelectedItem && this.fields.groupBy) {\n        this.hideGroupItem(value);\n      }\n\n      this.updateChipStatus();\n      this.checkMaxSelection();\n    }\n  }, {\n    key: \"checkMaxSelection\",\n    value: function checkMaxSelection() {\n      var limit = this.value && this.value.length ? this.value.length : 0;\n\n      if (limit === this.maximumSelectionLength) {\n        var collection = this.list.querySelectorAll('li.' + dropDownBaseClasses.li + ':not(.e-active)');\n        addClass(collection, 'e-disable');\n      }\n    }\n  }, {\n    key: \"dispatchSelect\",\n    value: function dispatchSelect(value, eve, element, isNotTrigger, length) {\n      var _this31 = this;\n\n      var list = this.listData;\n\n      if (this.initStatus && !isNotTrigger) {\n        var val = this.getDataByValue(value);\n        var eventArgs = {\n          e: eve,\n          item: element,\n          itemData: val,\n          isInteracted: eve ? true : false,\n          cancel: false\n        };\n        this.trigger('select', eventArgs, function (eventArgs) {\n          if (!eventArgs.cancel) {\n            if (length) {\n              _this31.selectAllEventData.push(val);\n\n              _this31.selectAllEventEle.push(element);\n            }\n\n            if (length === 1) {\n              var args = {\n                event: eve,\n                items: _this31.selectAllEventEle,\n                itemData: _this31.selectAllEventData,\n                isInteracted: eve ? true : false,\n                isChecked: true\n              };\n\n              _this31.trigger('selectedAll', args);\n\n              _this31.selectAllEventData = [];\n            }\n\n            if (_this31.allowCustomValue && _this31.isServerRendered && _this31.listData !== list) {\n              _this31.listData = list;\n            }\n\n            _this31.updateListSelectEventCallback(value, element, eve);\n\n            if (_this31.hideSelectedItem && _this31.fixedHeaderElement && _this31.fields.groupBy && _this31.mode !== 'CheckBox') {\n              _get(_getPrototypeOf(MultiSelect.prototype), \"scrollStop\", _this31).call(_this31);\n            }\n          }\n        });\n      }\n    }\n  }, {\n    key: \"addChip\",\n    value: function addChip(text, value, e) {\n      if (this.chipCollectionWrapper) {\n        this.getChip(text, value, e);\n      }\n    }\n  }, {\n    key: \"removeChipFocus\",\n    value: function removeChipFocus() {\n      var elements = this.chipCollectionWrapper.querySelectorAll('span.' + CHIP$1);\n      var closeElements = this.chipCollectionWrapper.querySelectorAll('span.' + CHIP_CLOSE$1.split(' ')[0]);\n      removeClass(elements, CHIP_SELECTED);\n\n      if (Browser.isDevice) {\n        for (var index = 0; index < closeElements.length; index++) {\n          closeElements[index].style.display = 'none';\n        }\n      }\n    }\n  }, {\n    key: \"onMobileChipInteraction\",\n    value: function onMobileChipInteraction(e) {\n      var chipElem = closest(e.target, '.' + CHIP$1);\n      var chipClose = chipElem.querySelector('span.' + CHIP_CLOSE$1.split(' ')[0]);\n\n      if (this.enabled && !this.readonly) {\n        if (!chipElem.classList.contains(CHIP_SELECTED)) {\n          this.removeChipFocus();\n          chipClose.style.display = '';\n          chipElem.classList.add(CHIP_SELECTED);\n        }\n\n        this.refreshPopup();\n        e.preventDefault();\n      }\n    }\n  }, {\n    key: \"multiCompiler\",\n    value: function multiCompiler(multiselectTemplate) {\n      var checkTemplate = false;\n\n      if (multiselectTemplate) {\n        try {\n          checkTemplate = selectAll(multiselectTemplate, document).length ? true : false;\n        } catch (exception) {\n          checkTemplate = false;\n        }\n      }\n\n      return checkTemplate;\n    }\n  }, {\n    key: \"getChip\",\n    value: function getChip(data, value, e) {\n      var _this32 = this;\n\n      var itemData = {\n        text: value,\n        value: value\n      };\n      var chip = this.createElement('span', {\n        className: CHIP$1,\n        attrs: {\n          'data-value': value,\n          'title': data\n        }\n      });\n      var compiledString;\n      var chipContent = this.createElement('span', {\n        className: CHIP_CONTENT$1\n      });\n      var chipClose = this.createElement('span', {\n        className: CHIP_CLOSE$1\n      });\n\n      if (this.mainData) {\n        itemData = this.getDataByValue(value);\n      }\n\n      if (this.valueTemplate && !isNullOrUndefined(itemData)) {\n        var valuecheck = this.multiCompiler(this.valueTemplate);\n\n        if (valuecheck) {\n          compiledString = compile(select(this.valueTemplate, document).innerHTML.trim());\n        } else {\n          compiledString = compile(this.valueTemplate);\n        } // eslint-disable-next-line\n\n\n        var valueCompTemp = compiledString(itemData, this, 'valueTemplate', this.valueTemplateId, this.isStringTemplate, null, chipContent);\n\n        if (valueCompTemp && valueCompTemp.length > 0) {\n          for (var i = 0; i < valueCompTemp.length; i++) {\n            chipContent.appendChild(valueCompTemp[i]);\n          }\n        }\n\n        this.renderReactTemplates();\n      } else if (this.enableHtmlSanitizer) {\n        chipContent.innerText = data;\n      } else {\n        chipContent.innerHTML = data;\n      }\n\n      chip.appendChild(chipContent);\n      var eventArgs = {\n        isInteracted: e ? true : false,\n        itemData: itemData,\n        e: e,\n        setClass: function setClass(classes) {\n          addClass([chip], classes);\n        },\n        cancel: false\n      };\n      this.isPreventChange = this.isAngular && this.preventChange;\n      this.trigger('tagging', eventArgs, function (eventArgs) {\n        if (!eventArgs.cancel) {\n          if (Browser.isDevice) {\n            chip.classList.add(MOBILE_CHIP);\n            append([chipClose], chip);\n            chipClose.style.display = 'none';\n            EventHandler.add(chip, 'click', _this32.onMobileChipInteraction, _this32);\n          } else {\n            EventHandler.add(chip, 'mousedown', _this32.chipClick, _this32);\n\n            if (_this32.showClearButton) {\n              chip.appendChild(chipClose);\n            }\n          }\n\n          EventHandler.add(chipClose, 'mousedown', _this32.onChipRemove, _this32);\n\n          _this32.chipCollectionWrapper.appendChild(chip);\n\n          if (!_this32.changeOnBlur && e) {\n            _this32.updateValueState(e, _this32.value, _this32.tempValues);\n          }\n        }\n      });\n    }\n  }, {\n    key: \"calcPopupWidth\",\n    value: function calcPopupWidth() {\n      var width = formatUnit(this.popupWidth);\n\n      if (width.indexOf('%') > -1) {\n        var inputWidth = this.componentWrapper.offsetWidth * parseFloat(width) / 100;\n        width = inputWidth.toString() + 'px';\n      }\n\n      return width;\n    }\n  }, {\n    key: \"mouseIn\",\n    value: function mouseIn() {\n      if (this.enabled && !this.readonly) {\n        this.showOverAllClear();\n      }\n    }\n  }, {\n    key: \"mouseOut\",\n    value: function mouseOut() {\n      if (!this.inputFocus) {\n        this.overAllClear.style.display = 'none';\n      }\n    }\n  }, {\n    key: \"listOption\",\n    value: function listOption(dataSource, fields) {\n      var iconCss = isNullOrUndefined(fields.iconCss) ? false : true;\n      var fieldProperty = isNullOrUndefined(fields.properties) ? fields : fields.properties;\n      this.listCurrentOptions = fields.text !== null || fields.value !== null ? {\n        fields: fieldProperty,\n        showIcon: iconCss,\n        ariaAttributes: {\n          groupItemRole: 'presentation'\n        }\n      } : {\n        fields: {\n          value: 'text'\n        }\n      };\n      extend(this.listCurrentOptions, this.listCurrentOptions, fields, true);\n\n      if (this.mode === 'CheckBox') {\n        this.notify('listoption', {\n          module: 'CheckBoxSelection',\n          enable: this.mode === 'CheckBox',\n          dataSource: dataSource,\n          fieldProperty: fieldProperty\n        });\n      }\n\n      return this.listCurrentOptions;\n    }\n  }, {\n    key: \"renderPopup\",\n    value: function renderPopup() {\n      var _this33 = this;\n\n      if (!this.list) {\n        _get(_getPrototypeOf(MultiSelect.prototype), \"render\", this).call(this);\n      }\n\n      if (!this.popupObj) {\n        document.body.appendChild(this.popupWrapper);\n        var checkboxFilter = this.popupWrapper.querySelector('.' + FILTERPARENT);\n\n        if (this.mode === 'CheckBox' && !this.allowFiltering && checkboxFilter && this.filterParent) {\n          checkboxFilter.remove();\n          this.filterParent = null;\n        }\n\n        var overAllHeight = parseInt(this.popupHeight, 10);\n        this.popupWrapper.style.visibility = 'hidden';\n\n        if (this.headerTemplate) {\n          this.setHeaderTemplate();\n          overAllHeight -= this.header.offsetHeight;\n        }\n\n        append([this.list], this.popupWrapper);\n\n        if (this.footerTemplate) {\n          this.setFooterTemplate();\n          overAllHeight -= this.footer.offsetHeight;\n        }\n\n        if (this.mode === 'CheckBox' && this.showSelectAll) {\n          this.notify('selectAll', {\n            module: 'CheckBoxSelection',\n            enable: this.mode === 'CheckBox'\n          });\n          overAllHeight -= this.selectAllHeight;\n        } else if (this.mode === 'CheckBox' && !this.showSelectAll && !this.headerTemplate && !this.footerTemplate) {\n          this.notify('selectAll', {\n            module: 'CheckBoxSelection',\n            enable: this.mode === 'CheckBox'\n          });\n          overAllHeight = parseInt(this.popupHeight, 10);\n        } else if (this.mode === 'CheckBox' && !this.showSelectAll) {\n          this.notify('selectAll', {\n            module: 'CheckBoxSelection',\n            enable: this.mode === 'CheckBox'\n          });\n          overAllHeight = parseInt(this.popupHeight, 10);\n\n          if (this.headerTemplate && this.header) {\n            overAllHeight -= this.header.offsetHeight;\n          }\n\n          if (this.footerTemplate && this.footer) {\n            overAllHeight -= this.footer.offsetHeight;\n          }\n        }\n\n        if (this.mode === 'CheckBox') {\n          var args = {\n            module: 'CheckBoxSelection',\n            enable: this.mode === 'CheckBox',\n            popupElement: this.popupWrapper\n          };\n\n          if (this.allowFiltering) {\n            this.notify('searchBox', args);\n            overAllHeight -= this.searchBoxHeight;\n          }\n\n          addClass([this.popupWrapper], 'e-checkbox');\n        }\n\n        if (this.popupHeight !== 'auto') {\n          this.list.style.maxHeight = formatUnit(overAllHeight);\n          this.popupWrapper.style.maxHeight = formatUnit(this.popupHeight);\n        } else {\n          this.list.style.maxHeight = formatUnit(this.popupHeight);\n        }\n\n        this.popupObj = new Popup(this.popupWrapper, {\n          width: this.calcPopupWidth(),\n          targetType: 'relative',\n          position: {\n            X: 'left',\n            Y: 'bottom'\n          },\n          relateTo: this.overAllWrapper,\n          collision: {\n            X: 'flip',\n            Y: 'flip'\n          },\n          offsetY: 1,\n          enableRtl: this.enableRtl,\n          zIndex: this.zIndex,\n          close: function close() {\n            if (_this33.popupObj.element.parentElement) {\n              _this33.popupObj.unwireScrollEvents(); // For restrict the page scrolling in safari browser\n\n\n              var checkboxFilterInput = _this33.popupWrapper.querySelector('.' + FILTERINPUT);\n\n              if (_this33.mode === 'CheckBox' && checkboxFilterInput && document.activeElement === checkboxFilterInput) {\n                checkboxFilterInput.blur();\n              }\n\n              detach(_this33.popupObj.element);\n            }\n          },\n          open: function open() {\n            _this33.popupObj.resolveCollision();\n\n            if (!_this33.isFirstClick) {\n              var ulElement = _this33.list.querySelector('ul');\n\n              if (ulElement) {\n                if (!(_this33.mode !== 'CheckBox' && (_this33.allowFiltering || _this33.allowCustomValue) && _this33.targetElement().trim() !== '')) {\n                  _this33.mainList = ulElement.cloneNode ? ulElement.cloneNode(true) : ulElement;\n                }\n              }\n\n              _this33.isFirstClick = true;\n            }\n\n            _this33.popupObj.wireScrollEvents();\n\n            if (!(_this33.mode !== 'CheckBox' && (_this33.allowFiltering || _this33.allowCustomValue) && _this33.targetElement().trim() !== '')) {\n              _this33.loadTemplate();\n            }\n\n            _this33.setScrollPosition();\n\n            if (_this33.allowFiltering) {\n              _this33.notify('inputFocus', {\n                module: 'CheckBoxSelection',\n                enable: _this33.mode === 'CheckBox',\n                value: 'focus'\n              });\n            }\n          },\n          targetExitViewport: function targetExitViewport() {\n            if (!Browser.isDevice) {\n              _this33.hidePopup();\n            }\n          }\n        });\n\n        if (this.mode === 'CheckBox' && Browser.isDevice && this.allowFiltering) {\n          this.notify('deviceSearchBox', {\n            module: 'CheckBoxSelection',\n            enable: this.mode === 'CheckBox'\n          });\n        }\n\n        this.popupObj.close();\n        this.popupWrapper.style.visibility = '';\n      }\n    }\n  }, {\n    key: \"setHeaderTemplate\",\n    value: function setHeaderTemplate() {\n      var compiledString;\n\n      if (this.header) {\n        this.header.remove();\n      }\n\n      this.header = this.createElement('div');\n      addClass([this.header], HEADER$1);\n      var headercheck = this.multiCompiler(this.headerTemplate);\n\n      if (headercheck) {\n        compiledString = compile(select(this.headerTemplate, document).innerHTML.trim());\n      } else {\n        compiledString = compile(this.headerTemplate);\n      } // eslint-disable-next-line\n\n\n      var elements = compiledString({}, this, 'headerTemplate', this.headerTemplateId, this.isStringTemplate, null, this.header);\n\n      if (elements && elements.length > 0) {\n        for (var temp = 0; temp < elements.length; temp++) {\n          this.header.appendChild(elements[temp]);\n        }\n      }\n\n      if (this.mode === 'CheckBox' && this.showSelectAll) {\n        prepend([this.header], this.popupWrapper);\n      } else {\n        append([this.header], this.popupWrapper);\n      }\n\n      EventHandler.add(this.header, 'mousedown', this.onListMouseDown, this);\n    }\n  }, {\n    key: \"setFooterTemplate\",\n    value: function setFooterTemplate() {\n      var compiledString;\n\n      if (this.footer) {\n        this.footer.remove();\n      }\n\n      this.footer = this.createElement('div');\n      addClass([this.footer], FOOTER$1);\n      var footercheck = this.multiCompiler(this.footerTemplate);\n\n      if (footercheck) {\n        compiledString = compile(select(this.footerTemplate, document).innerHTML.trim());\n      } else {\n        compiledString = compile(this.footerTemplate);\n      } // eslint-disable-next-line\n\n\n      var elements = compiledString({}, this, 'footerTemplate', this.footerTemplateId, this.isStringTemplate, null, this.footer);\n\n      if (elements && elements.length > 0) {\n        for (var temp = 0; temp < elements.length; temp++) {\n          this.footer.appendChild(elements[temp]);\n        }\n      }\n\n      append([this.footer], this.popupWrapper);\n      EventHandler.add(this.footer, 'mousedown', this.onListMouseDown, this);\n    }\n  }, {\n    key: \"clearAll\",\n    value: function clearAll(e) {\n      if (this.enabled && !this.readonly) {\n        var temp;\n\n        if (this.value && this.value.length > 0) {\n          var liElement = this.list && this.list.querySelectorAll('li.e-list-item');\n\n          if (liElement && liElement.length > 0) {\n            this.selectAllItems(false, e);\n          } else {\n            this.removeIndex = 0;\n\n            for (temp = this.value[this.removeIndex]; this.removeIndex < this.value.length; temp = this.value[this.removeIndex]) {\n              this.removeValue(temp, e, null, true);\n            }\n          }\n        } else {\n          this.clearAllCallback(e);\n        }\n      }\n    }\n  }, {\n    key: \"clearAllCallback\",\n    value: function clearAllCallback(e, isClearAll) {\n      var tempValues = this.value ? this.value.slice() : [];\n\n      if (this.mainList && this.listData && (this.allowFiltering && this.mode !== 'CheckBox' || this.allowCustomValue)) {\n        var list = this.mainList.cloneNode ? this.mainList.cloneNode(true) : this.mainList;\n        this.onActionComplete(list, this.mainData);\n      }\n\n      this.focusAtFirstListItem();\n      this.updateDelimeter(this.delimiterChar, e);\n\n      if (this.mode !== 'Box' && (!this.inputFocus || this.mode === 'CheckBox')) {\n        this.updateDelimView();\n      }\n\n      if (this.inputElement.value !== '') {\n        this.makeTextBoxEmpty();\n        this.search(null);\n      }\n\n      this.checkPlaceholderSize();\n\n      if (this.isPopupOpen()) {\n        this.refreshPopup();\n      }\n\n      if (!this.inputFocus) {\n        if (this.changeOnBlur) {\n          this.updateValueState(e, this.value, tempValues);\n        }\n\n        if (this.mode !== 'CheckBox') {\n          this.inputElement.focus();\n        }\n      }\n\n      if (this.mode === 'CheckBox') {\n        this.refreshPlaceHolder();\n        this.refreshInputHight();\n\n        if (this.changeOnBlur && isClearAll && (isNullOrUndefined(this.value) || this.value.length === 0)) {\n          this.updateValueState(e, this.value, this.tempValues);\n        }\n      }\n\n      if (!this.changeOnBlur && isClearAll && (isNullOrUndefined(this.value) || this.value.length === 0)) {\n        this.updateValueState(e, this.value, this.tempValues);\n      }\n\n      if (this.mode === 'CheckBox' && this.enableGroupCheckBox && !isNullOrUndefined(this.fields.groupBy)) {\n        this.updateListItems(this.list.querySelectorAll('li.e-list-item'), this.mainList.querySelectorAll('li.e-list-item'));\n      }\n\n      e.preventDefault();\n    }\n  }, {\n    key: \"windowResize\",\n    value: function windowResize() {\n      this.refreshPopup();\n\n      if ((!this.inputFocus || this.mode === 'CheckBox') && this.viewWrapper && this.viewWrapper.parentElement) {\n        this.updateDelimView();\n      }\n    }\n  }, {\n    key: \"resetValueHandler\",\n    value: function resetValueHandler(e) {\n      var formElement = closest(this.inputElement, 'form');\n\n      if (formElement && e.target === formElement) {\n        var textVal = this.element.tagName === this.getNgDirective() ? null : this.element.getAttribute('data-initial-value');\n        this.text = textVal;\n      }\n    }\n  }, {\n    key: \"wireEvent\",\n    value: function wireEvent() {\n      EventHandler.add(this.componentWrapper, 'mousedown', this.wrapperClick, this);\n      EventHandler.add(window, 'resize', this.windowResize, this);\n      EventHandler.add(this.inputElement, 'focus', this.focusInHandler, this);\n      EventHandler.add(this.inputElement, 'keydown', this.onKeyDown, this);\n      EventHandler.add(this.inputElement, 'keyup', this.keyUp, this);\n\n      if (this.mode !== 'CheckBox') {\n        EventHandler.add(this.inputElement, 'input', this.onInput, this);\n      }\n\n      EventHandler.add(this.inputElement, 'blur', this.onBlurHandler, this);\n      EventHandler.add(this.componentWrapper, 'mousemove', this.mouseIn, this);\n      var formElement = closest(this.inputElement, 'form');\n\n      if (formElement) {\n        EventHandler.add(formElement, 'reset', this.resetValueHandler, this);\n      }\n\n      EventHandler.add(this.componentWrapper, 'mouseout', this.mouseOut, this);\n      EventHandler.add(this.overAllClear, 'mouseup', this.clearAll, this);\n      EventHandler.add(this.inputElement, 'paste', this.pasteHandler, this);\n    }\n  }, {\n    key: \"onInput\",\n    value: function onInput(e) {\n      if (this.keyDownStatus) {\n        this.isValidKey = true;\n      } else {\n        this.isValidKey = false;\n      }\n\n      this.keyDownStatus = false; // For Filtering works in mobile firefox\n\n      if (Browser.isDevice && Browser.info.name === 'mozilla') {\n        this.search(e);\n      }\n    }\n  }, {\n    key: \"pasteHandler\",\n    value: function pasteHandler(event) {\n      var _this34 = this;\n\n      setTimeout(function () {\n        _this34.expandTextbox();\n\n        _this34.search(event);\n      });\n    }\n  }, {\n    key: \"search\",\n    value: function search(e) {\n      var _this35 = this;\n\n      if (!isNullOrUndefined(e)) {\n        this.keyCode = e.keyCode;\n      }\n\n      if (!this.isPopupOpen() && this.openOnClick) {\n        this.showPopup();\n      }\n\n      this.openClick(e);\n\n      if (this.checkTextLength() && !this.allowFiltering && !isNullOrUndefined(e) && e.keyCode !== 8) {\n        this.focusAtFirstListItem();\n      } else {\n        var text = this.targetElement();\n\n        if (this.allowFiltering) {\n          var eventArgs = {\n            preventDefaultAction: false,\n            text: this.targetElement(),\n            updateData: function updateData(dataSource, query, fields) {\n              if (eventArgs.cancel) {\n                return;\n              }\n\n              _this35.isFiltered = true;\n              _this35.remoteFilterAction = true;\n\n              _this35.dataUpdater(dataSource, query, fields);\n            },\n            event: e,\n            cancel: false\n          };\n          this.trigger('filtering', eventArgs, function (eventArgs) {\n            if (!eventArgs.cancel) {\n              if (!_this35.isFiltered && !eventArgs.preventDefaultAction) {\n                _this35.filterAction = true;\n\n                _this35.dataUpdater(_this35.dataSource, null, _this35.fields);\n              }\n            }\n          });\n        } else if (this.allowCustomValue) {\n          var query = new Query();\n          query = text !== '' ? query.where(this.fields.text, 'startswith', text, this.ignoreCase, this.ignoreAccent) : query;\n          this.dataUpdater(this.mainData, query, this.fields);\n        } else {\n          var liCollections = this.list.querySelectorAll('li.' + dropDownBaseClasses.li + ':not(.e-hide-listitem)');\n          var activeElement = Search(this.targetElement(), liCollections, 'StartsWith', this.ignoreCase);\n\n          if (activeElement && activeElement.item !== null) {\n            this.addListFocus(activeElement.item);\n            this.list.scrollTop = activeElement.item.offsetHeight * activeElement.index;\n          } else if (this.targetElement() !== '') {\n            this.removeFocus();\n          } else {\n            this.focusAtFirstListItem();\n          }\n        }\n      }\n    }\n  }, {\n    key: \"preRender\",\n    value: function preRender() {\n      if (this.allowFiltering === null) {\n        this.allowFiltering = this.mode === 'CheckBox' ? true : false;\n      }\n\n      this.initializeData();\n      this.updateDataAttribute(this.htmlAttributes);\n\n      _get(_getPrototypeOf(MultiSelect.prototype), \"preRender\", this).call(this);\n    }\n  }, {\n    key: \"getLocaleName\",\n    value: function getLocaleName() {\n      return 'multi-select';\n    }\n  }, {\n    key: \"initializeData\",\n    value: function initializeData() {\n      this.mainListCollection = [];\n      this.beforePopupOpen = false;\n      this.filterAction = false;\n      this.remoteFilterAction = false;\n      this.isFirstClick = false;\n      this.mobFilter = true;\n      this.isFiltered = false;\n      this.focused = true;\n      this.initial = true;\n      this.backCommand = true;\n    }\n  }, {\n    key: \"updateData\",\n    value: function updateData(delimiterChar, e) {\n      var data = '';\n      var delim = this.mode === 'Delimiter' || this.mode === 'CheckBox';\n      var text = [];\n      var temp;\n      var tempData = this.listData;\n      this.listData = this.mainData;\n      this.hiddenElement.innerHTML = '';\n\n      if (!isNullOrUndefined(this.value)) {\n        for (var index = 0; !isNullOrUndefined(this.value[index]); index++) {\n          var listValue = this.findListElement(!isNullOrUndefined(this.mainList) ? this.mainList : this.ulElement, 'li', 'data-value', this.value[index]);\n\n          if (isNullOrUndefined(listValue) && !this.allowCustomValue) {\n            this.value.splice(index, 1);\n            index -= 1;\n          } else {\n            if (this.listData) {\n              temp = this.getTextByValue(this.value[index]);\n            } else {\n              temp = this.value[index];\n            }\n\n            data += temp + delimiterChar + ' ';\n            text.push(temp);\n          }\n\n          this.hiddenElement.innerHTML += '<option selected value =\"' + this.value[index] + '\">' + index + '</option>';\n        }\n      }\n\n      this.setProperties({\n        text: text.toString()\n      }, true);\n\n      if (delim) {\n        this.updateWrapperText(this.delimiterWrapper, data);\n        this.delimiterWrapper.setAttribute('id', getUniqueID('delim_val'));\n        this.inputElement.setAttribute('aria-describedby', this.delimiterWrapper.id);\n        this.inputElement.setAttribute('aria-labelledby', this.delimiterWrapper.id);\n      }\n\n      var targetEle = e && e.target;\n      var isClearAll = targetEle && targetEle.classList.contains('e-close-hooker') ? true : null;\n\n      if (!this.changeOnBlur && e && !isClearAll || this.isSelectAll) {\n        this.isSelectAll = false;\n        this.updateValueState(e, this.value, this.tempValues);\n      }\n\n      this.listData = tempData;\n      this.addValidInputClass();\n    }\n  }, {\n    key: \"initialTextUpdate\",\n    value: function initialTextUpdate() {\n      if (!isNullOrUndefined(this.text)) {\n        var textArr = this.text.split(this.delimiterChar);\n        var textVal = [];\n\n        for (var index = 0; textArr.length > index; index++) {\n          var val = this.getValueByText(textArr[index]);\n\n          if (!isNullOrUndefined(val)) {\n            textVal.push(val);\n          } else if (this.allowCustomValue) {\n            textVal.push(textArr[index]);\n          }\n        }\n\n        if (textVal && textVal.length) {\n          this.setProperties({\n            value: textVal\n          }, true);\n        }\n      } else {\n        this.setProperties({\n          value: null\n        }, true);\n      }\n    }\n  }, {\n    key: \"renderList\",\n    value: function renderList(isEmptyData) {\n      if (!isEmptyData && this.allowCustomValue && this.list && (this.list.textContent === this.noRecordsTemplate || this.list.querySelector('.e-ul') && this.list.querySelector('.e-ul').childElementCount === 0)) {\n        isEmptyData = true;\n      }\n\n      _get(_getPrototypeOf(MultiSelect.prototype), \"render\", this).call(this, isEmptyData);\n\n      this.unwireListEvents();\n      this.wireListEvents();\n    }\n  }, {\n    key: \"initialValueUpdate\",\n    value: function initialValueUpdate() {\n      if (this.list) {\n        var text;\n        var element;\n        var value;\n\n        if (this.chipCollectionWrapper) {\n          this.chipCollectionWrapper.innerHTML = '';\n        }\n\n        this.removeListSelection();\n\n        if (!isNullOrUndefined(this.value)) {\n          for (var index = 0; !isNullOrUndefined(this.value[index]); index++) {\n            value = this.value[index];\n            element = this.findListElement(this.hideSelectedItem ? this.ulElement : this.list, 'li', 'data-value', value);\n            text = this.getTextByValue(value);\n\n            if (element && element.getAttribute('aria-selected') !== 'true' || element && element.getAttribute('aria-selected') === 'true' && this.hideSelectedItem && (this.mode === 'Box' || this.mode === 'Default')) {\n              this.addChip(text, value);\n              this.addListSelection(element);\n            } else if (value && this.allowCustomValue) {\n              var indexItem = this.listData.length;\n              var newValue = {};\n              setValue(this.fields.text, value, newValue);\n              setValue(this.fields.value, value, newValue);\n              var noDataEle = this.popupWrapper.querySelector('.' + dropDownBaseClasses.noData);\n              this.addItem(newValue, indexItem);\n              element = element ? element : this.findListElement(this.hideSelectedItem ? this.ulElement : this.list, 'li', 'data-value', value);\n\n              if (this.popupWrapper.contains(noDataEle)) {\n                this.list.setAttribute('style', noDataEle.getAttribute('style'));\n                this.popupWrapper.replaceChild(this.list, noDataEle);\n                this.wireListEvents();\n              }\n\n              this.addChip(text, value);\n              this.addListSelection(element);\n            }\n          }\n        }\n\n        if (this.mode === 'CheckBox') {\n          this.updateDelimView();\n\n          if (this.changeOnBlur) {\n            this.updateValueState(null, this.value, this.tempValues);\n          }\n\n          this.updateDelimeter(this.delimiterChar);\n          this.refreshInputHight();\n        } else {\n          this.updateDelimeter(this.delimiterChar);\n        }\n\n        if (this.mode === 'CheckBox' && this.showSelectAll && (isNullOrUndefined(this.value) || !this.value.length)) {\n          this.notify('checkSelectAll', {\n            module: 'CheckBoxSelection',\n            enable: this.mode === 'CheckBox',\n            value: 'uncheck'\n          });\n        }\n\n        if (this.mode === 'Box' || this.mode === 'Default' && this.inputFocus) {\n          this.chipCollectionWrapper.style.display = '';\n        } else if (this.mode === 'Delimiter' || this.mode === 'CheckBox') {\n          this.showDelimWrapper();\n        }\n      }\n    } // eslint-disable-next-line @typescript-eslint/no-unused-vars\n\n  }, {\n    key: \"updateActionCompleteData\",\n    value: function updateActionCompleteData(li, item) {\n      if (this.value && this.value.indexOf(li.getAttribute('data-value')) > -1) {\n        this.mainList = this.ulElement;\n        addClass([li], HIDE_LIST);\n      }\n    } // eslint-disable-next-line @typescript-eslint/no-unused-vars\n\n  }, {\n    key: \"updateAddItemList\",\n    value: function updateAddItemList(list, itemCount) {\n      if (this.popupObj && this.popupObj.element && this.popupObj.element.querySelector('.' + dropDownBaseClasses.noData) && list) {\n        this.list = list;\n        this.mainList = this.ulElement = list.querySelector('ul');\n        remove(this.popupWrapper.querySelector('.e-content'));\n        this.popupObj = null;\n        this.renderPopup();\n      } else if (this.allowCustomValue) {\n        this.list = list;\n        this.mainList = this.ulElement = list.querySelector('ul');\n      }\n    }\n  }, {\n    key: \"updateDataList\",\n    value: function updateDataList() {\n      if (this.mainList && this.ulElement && this.mainList.childElementCount < this.ulElement.childElementCount) {\n        this.mainList = this.ulElement.cloneNode ? this.ulElement.cloneNode(true) : this.ulElement;\n      }\n    }\n  }, {\n    key: \"isValidLI\",\n    value: function isValidLI(li) {\n      return li && !li.classList.contains(dropDownBaseClasses.disabled) && !li.classList.contains(dropDownBaseClasses.group) && li.classList.contains(dropDownBaseClasses.li);\n    }\n  }, {\n    key: \"updateListSelection\",\n    value: function updateListSelection(li, e, length) {\n      var customVal = li.getAttribute('data-value');\n      var value = this.getFormattedValue(customVal);\n\n      if (this.allowCustomValue && (customVal !== 'false' && value === false || !isNullOrUndefined(value) && value.toString() === 'NaN')) {\n        value = customVal;\n      }\n\n      this.removeHover();\n\n      if (!this.value || this.value.indexOf(value) === -1) {\n        this.dispatchSelect(value, e, li, li.getAttribute('aria-selected') === 'true', length);\n      } else {\n        this.removeValue(value, e, length);\n      }\n    }\n  }, {\n    key: \"updateListSelectEventCallback\",\n    value: function updateListSelectEventCallback(value, li, e) {\n      var _this36 = this;\n\n      var text = this.getTextByValue(value);\n\n      if ((this.allowCustomValue || this.allowFiltering) && !this.findListElement(this.mainList, 'li', 'data-value', value)) {\n        var temp = li.cloneNode(true);\n        var fieldValue = this.fields.value ? this.fields.value : 'value';\n\n        if (this.allowCustomValue && this.mainData.length && typeof getValue(fieldValue, this.mainData[0]) === 'number') {\n          value = !isNaN(parseFloat(value.toString())) ? parseFloat(value.toString()) : value;\n        }\n\n        var data = this.getDataByValue(value);\n        var eventArgs = {\n          newData: data,\n          cancel: false\n        };\n        this.trigger('customValueSelection', eventArgs, function (eventArgs) {\n          if (!eventArgs.cancel) {\n            append([temp], _this36.mainList);\n\n            _this36.mainData.push(data);\n\n            _this36.remoteCustomValue = false;\n\n            _this36.addValue(value, text, e);\n          }\n        });\n      } else {\n        this.remoteCustomValue = false;\n        this.addValue(value, text, e);\n      }\n    }\n  }, {\n    key: \"removeListSelection\",\n    value: function removeListSelection() {\n      var className = this.hideSelectedItem ? HIDE_LIST : dropDownBaseClasses.selected;\n      var selectedItems = this.list.querySelectorAll('.' + className);\n      var temp = selectedItems.length;\n\n      if (selectedItems && selectedItems.length) {\n        removeClass(selectedItems, className);\n\n        while (temp > 0) {\n          selectedItems[temp - 1].setAttribute('aria-selected', 'false');\n          temp--;\n        }\n      }\n\n      if (!isNullOrUndefined(this.mainList)) {\n        var selectItems = this.mainList.querySelectorAll('.' + className);\n        var temp1 = selectItems.length;\n\n        if (selectItems && selectItems.length) {\n          removeClass(selectItems, className);\n\n          while (temp1 > 0) {\n            selectItems[temp1 - 1].setAttribute('aria-selected', 'false');\n\n            if (this.mode === 'CheckBox') {\n              if (selectedItems && selectedItems.length > temp1 - 1) {\n                selectedItems[temp1 - 1].firstElementChild.setAttribute('aria-checked', 'false');\n                removeClass([selectedItems[temp1 - 1].firstElementChild.lastElementChild], 'e-check');\n              }\n\n              selectItems[temp1 - 1].firstElementChild.setAttribute('aria-checked', 'false');\n              removeClass([selectItems[temp1 - 1].firstElementChild.lastElementChild], 'e-check');\n            }\n\n            temp1--;\n          }\n        }\n      }\n    }\n  }, {\n    key: \"removeHover\",\n    value: function removeHover() {\n      var hoveredItem = this.list.querySelectorAll('.' + dropDownBaseClasses.hover);\n\n      if (hoveredItem && hoveredItem.length) {\n        removeClass(hoveredItem, dropDownBaseClasses.hover);\n      }\n    }\n  }, {\n    key: \"removeFocus\",\n    value: function removeFocus() {\n      if (this.list && this.mainList) {\n        var hoveredItem = this.list.querySelectorAll('.' + dropDownBaseClasses.focus);\n        var mainlist = this.mainList.querySelectorAll('.' + dropDownBaseClasses.focus);\n\n        if (hoveredItem && hoveredItem.length) {\n          removeClass(hoveredItem, dropDownBaseClasses.focus);\n          removeClass(mainlist, dropDownBaseClasses.focus);\n        }\n      }\n    }\n  }, {\n    key: \"addListHover\",\n    value: function addListHover(li) {\n      if (this.enabled && this.isValidLI(li)) {\n        this.removeHover();\n        addClass([li], dropDownBaseClasses.hover);\n      } else {\n        if (li !== null && li.classList.contains('e-list-group-item') && this.enableGroupCheckBox && this.mode === 'CheckBox' && !isNullOrUndefined(this.fields.groupBy)) {\n          this.removeHover();\n          addClass([li], dropDownBaseClasses.hover);\n        }\n      }\n    }\n  }, {\n    key: \"addListFocus\",\n    value: function addListFocus(element) {\n      if (this.enabled && this.isValidLI(element)) {\n        this.removeFocus();\n        addClass([element], dropDownBaseClasses.focus);\n      } else {\n        if (this.enableGroupCheckBox && this.mode === 'CheckBox' && !isNullOrUndefined(this.fields.groupBy)) {\n          addClass([element], dropDownBaseClasses.focus);\n        }\n      }\n    }\n  }, {\n    key: \"addListSelection\",\n    value: function addListSelection(element, mainElement) {\n      var className = this.hideSelectedItem ? HIDE_LIST : dropDownBaseClasses.selected;\n\n      if (this.isValidLI(element) && !element.classList.contains(dropDownBaseClasses.hover)) {\n        addClass([element], className);\n        this.updateMainList(false, element.getAttribute('data-value'), mainElement);\n        element.setAttribute('aria-selected', 'true');\n\n        if (this.mode === 'CheckBox') {\n          var ariaCheck = element.firstElementChild.getAttribute('aria-checked');\n\n          if (ariaCheck === 'false' || isNullOrUndefined(ariaCheck)) {\n            this.notify('updatelist', {\n              module: 'CheckBoxSelection',\n              enable: this.mode === 'CheckBox',\n              li: element,\n              e: this\n            });\n          }\n        }\n\n        this.notify('activeList', {\n          module: 'CheckBoxSelection',\n          enable: this.mode === 'CheckBox',\n          li: element,\n          e: this\n        });\n\n        if (this.chipCollectionWrapper) {\n          this.removeChipSelection();\n        }\n\n        attributes(this.inputElement, {\n          'aria-activedescendant': element.id\n        });\n      }\n    }\n  }, {\n    key: \"updateDelimeter\",\n    value: function updateDelimeter(delimChar, e) {\n      this.updateData(delimChar, e);\n    }\n  }, {\n    key: \"onMouseClick\",\n    value: function onMouseClick(e) {\n      var _this37 = this;\n\n      this.keyCode = null;\n      this.scrollFocusStatus = false;\n      var target = e.target;\n      var li = closest(target, '.' + dropDownBaseClasses.li);\n      var headerLi = closest(target, '.' + dropDownBaseClasses.group);\n\n      if (headerLi && this.enableGroupCheckBox && this.mode === 'CheckBox' && this.fields.groupBy) {\n        target = target.classList.contains('e-list-group-item') ? target.firstElementChild.lastElementChild : e.target;\n\n        if (target.classList.contains('e-check')) {\n          this.selectAllItem(false, e);\n          target.classList.remove('e-check');\n          target.classList.remove('e-stop');\n          closest(target, '.' + 'e-list-group-item').classList.remove('e-active');\n          target.setAttribute('aria-selected', 'false');\n        } else {\n          this.selectAllItem(true, e);\n          target.classList.remove('e-stop');\n          target.classList.add('e-check');\n          closest(target, '.' + 'e-list-group-item').classList.add('e-active');\n          target.setAttribute('aria-selected', 'true');\n        }\n\n        this.refreshSelection();\n        this.checkSelectAll();\n      } else {\n        if (this.isValidLI(li)) {\n          var limit = this.value && this.value.length ? this.value.length : 0;\n\n          if (li.classList.contains('e-active')) {\n            limit = limit - 1;\n          }\n\n          if (limit < this.maximumSelectionLength) {\n            this.updateListSelection(li, e);\n            this.checkPlaceholderSize();\n            this.addListFocus(li);\n\n            if ((this.allowCustomValue || this.allowFiltering) && this.mainList && this.listData) {\n              if (this.mode !== 'CheckBox') {\n                this.focusAtLastListItem(li.getAttribute('data-value'));\n                this.refreshSelection();\n              }\n            } else {\n              this.makeTextBoxEmpty();\n            }\n          }\n\n          if (this.mode === 'CheckBox') {\n            this.updateDelimView();\n\n            if (this.value && this.value.length > 50) {\n              setTimeout(function () {\n                _this37.updateDelimeter(_this37.delimiterChar, e);\n              }, 0);\n            } else {\n              this.updateDelimeter(this.delimiterChar, e);\n            }\n\n            this.refreshInputHight();\n          } else {\n            this.updateDelimeter(this.delimiterChar, e);\n          }\n\n          this.checkSelectAll();\n          this.refreshPopup();\n\n          if (this.hideSelectedItem) {\n            this.focusAtFirstListItem();\n          }\n\n          if (this.closePopupOnSelect) {\n            this.hidePopup();\n          } else {\n            e.preventDefault();\n          }\n\n          this.makeTextBoxEmpty();\n          this.findGroupStart(target);\n\n          if (this.mode !== 'CheckBox') {\n            this.refreshListItems(isNullOrUndefined(li) ? null : li.textContent);\n          }\n        } else {\n          e.preventDefault();\n        }\n\n        this.refreshPlaceHolder();\n        this.deselectHeader();\n      }\n    }\n  }, {\n    key: \"findGroupStart\",\n    value: function findGroupStart(target) {\n      if (this.enableGroupCheckBox && this.mode === 'CheckBox' && !isNullOrUndefined(this.fields.groupBy)) {\n        var count = 0;\n        var liChecked = 0;\n        var liUnchecked = 0;\n        var groupValues;\n\n        if (this.itemTemplate && !target.getElementsByClassName('e-frame').length) {\n          while (!target.getElementsByClassName('e-frame').length) {\n            target = target.parentElement;\n          }\n        }\n\n        if (target.classList.contains('e-frame')) {\n          target = target.parentElement.parentElement;\n        }\n\n        groupValues = this.findGroupAttrtibutes(target, liChecked, liUnchecked, count, 0);\n        groupValues = this.findGroupAttrtibutes(target, groupValues[0], groupValues[1], groupValues[2], 1);\n\n        while (!target.classList.contains('e-list-group-item')) {\n          if (target.classList.contains('e-list-icon')) {\n            target = target.parentElement;\n          }\n\n          target = target.previousElementSibling;\n\n          if (target == null) {\n            break;\n          }\n        }\n\n        this.updateCheckBox(target, groupValues[0], groupValues[1], groupValues[2]);\n      }\n    }\n  }, {\n    key: \"findGroupAttrtibutes\",\n    value: function findGroupAttrtibutes(listElement, checked, unChecked, count, position) {\n      while (!listElement.classList.contains('e-list-group-item')) {\n        if (listElement.classList.contains('e-list-icon')) {\n          listElement = listElement.parentElement;\n        }\n\n        if (listElement.getElementsByClassName('e-frame')[0].classList.contains('e-check') && listElement.classList.contains('e-list-item')) {\n          checked++;\n        } else if (listElement.classList.contains('e-list-item')) {\n          unChecked++;\n        }\n\n        count++;\n        listElement = position ? listElement.nextElementSibling : listElement.previousElementSibling;\n\n        if (listElement == null) {\n          break;\n        }\n      }\n\n      return [checked, unChecked, count];\n    }\n  }, {\n    key: \"updateCheckBox\",\n    value: function updateCheckBox(groupHeader, checked, unChecked, count) {\n      if (groupHeader === null) {\n        return;\n      }\n\n      var checkBoxElement = groupHeader.getElementsByClassName('e-frame')[0];\n\n      if (count === checked) {\n        checkBoxElement.classList.remove('e-stop');\n        checkBoxElement.classList.add('e-check');\n        closest(checkBoxElement, '.' + 'e-list-group-item').classList.add('e-active');\n        groupHeader.setAttribute('aria-selected', 'true');\n      } else if (count === unChecked) {\n        checkBoxElement.classList.remove('e-check');\n        checkBoxElement.classList.remove('e-stop');\n        closest(checkBoxElement, '.' + 'e-list-group-item').classList.remove('e-active');\n        groupHeader.setAttribute('aria-selected', 'false');\n      } else if (this.maximumSelectionLength === checked - 1) {\n        checkBoxElement.classList.remove('e-stop');\n        groupHeader.setAttribute('aria-selected', 'true');\n        closest(checkBoxElement, '.' + 'e-list-group-item').classList.add('e-active');\n        checkBoxElement.classList.add('e-check');\n      } else {\n        checkBoxElement.classList.remove('e-check');\n        checkBoxElement.classList.add('e-stop');\n        closest(checkBoxElement, '.' + 'e-list-group-item').classList.add('e-active');\n        groupHeader.setAttribute('aria-selected', 'false');\n      }\n    }\n  }, {\n    key: \"deselectHeader\",\n    value: function deselectHeader() {\n      var limit = this.value && this.value.length ? this.value.length : 0;\n      var collection = this.list.querySelectorAll('li.e-list-group-item:not(.e-active)');\n\n      if (limit < this.maximumSelectionLength) {\n        removeClass(collection, 'e-disable');\n      }\n\n      if (limit === this.maximumSelectionLength) {\n        addClass(collection, 'e-disable');\n      }\n    }\n  }, {\n    key: \"onMouseOver\",\n    value: function onMouseOver(e) {\n      var currentLi = closest(e.target, '.' + dropDownBaseClasses.li);\n\n      if (currentLi === null && this.mode === 'CheckBox' && !isNullOrUndefined(this.fields.groupBy) && this.enableGroupCheckBox) {\n        currentLi = closest(e.target, '.' + dropDownBaseClasses.group);\n      }\n\n      this.addListHover(currentLi);\n    }\n  }, {\n    key: \"onMouseLeave\",\n    value: function onMouseLeave() {\n      this.removeHover();\n    }\n  }, {\n    key: \"onListMouseDown\",\n    value: function onListMouseDown(e) {\n      e.preventDefault();\n      this.scrollFocusStatus = true;\n    }\n  }, {\n    key: \"onDocumentClick\",\n    value: function onDocumentClick(e) {\n      if (this.mode !== 'CheckBox') {\n        var target = e.target;\n\n        if (!(!isNullOrUndefined(this.popupObj) && closest(target, '[id=\"' + this.popupObj.element.id + '\"]')) && !this.overAllWrapper.contains(e.target)) {\n          this.scrollFocusStatus = false;\n        } else {\n          this.scrollFocusStatus = (Browser.isIE || Browser.info.name === 'edge') && document.activeElement === this.inputElement;\n        }\n      }\n    }\n  }, {\n    key: \"wireListEvents\",\n    value: function wireListEvents() {\n      EventHandler.add(document, 'mousedown', this.onDocumentClick, this);\n      EventHandler.add(this.list, 'mousedown', this.onListMouseDown, this);\n      EventHandler.add(this.list, 'mouseup', this.onMouseClick, this);\n      EventHandler.add(this.list, 'mouseover', this.onMouseOver, this);\n      EventHandler.add(this.list, 'mouseout', this.onMouseLeave, this);\n    }\n  }, {\n    key: \"unwireListEvents\",\n    value: function unwireListEvents() {\n      EventHandler.remove(document, 'mousedown', this.onDocumentClick);\n\n      if (this.list) {\n        EventHandler.remove(this.list, 'mousedown', this.onListMouseDown);\n        EventHandler.remove(this.list, 'mouseup', this.onMouseClick);\n        EventHandler.remove(this.list, 'mouseover', this.onMouseOver);\n        EventHandler.remove(this.list, 'mouseout', this.onMouseLeave);\n      }\n    }\n  }, {\n    key: \"hideOverAllClear\",\n    value: function hideOverAllClear() {\n      if (!this.value || !this.value.length || this.inputElement.value === '') {\n        this.overAllClear.style.display = 'none';\n      }\n    }\n  }, {\n    key: \"showOverAllClear\",\n    value: function showOverAllClear() {\n      if ((this.value && this.value.length || this.inputElement.value !== '') && this.showClearButton && this.readonly !== true) {\n        this.overAllClear.style.display = '';\n      } else {\n        this.overAllClear.style.display = 'none';\n      }\n    }\n    /**\n     * Sets the focus to widget for interaction.\n     *\n     * @returns {void}\n     */\n\n  }, {\n    key: \"focusIn\",\n    value: function focusIn() {\n      if (document.activeElement !== this.inputElement && this.enabled) {\n        this.inputElement.focus();\n      }\n    }\n    /**\n     * Remove the focus from widget, if the widget is in focus state.\n     *\n     * @returns {void}\n     */\n\n  }, {\n    key: \"focusOut\",\n    value: function focusOut() {\n      if (document.activeElement === this.inputElement && this.enabled) {\n        this.inputElement.blur();\n      }\n    }\n    /**\n     * Shows the spinner loader.\n     *\n     * @returns {void}\n     */\n\n  }, {\n    key: \"showSpinner\",\n    value: function showSpinner() {\n      if (isNullOrUndefined(this.spinnerElement)) {\n        var filterClear = this.filterParent && this.filterParent.querySelector('.e-clear-icon.e-icons');\n\n        if (this.overAllClear.style.display !== 'none' || filterClear) {\n          this.spinnerElement = filterClear ? filterClear : this.overAllClear;\n        } else {\n          this.spinnerElement = this.createElement('span', {\n            className: CLOSEICON_CLASS$1 + ' ' + SPINNER_CLASS$1\n          });\n          this.componentWrapper.appendChild(this.spinnerElement);\n        }\n\n        createSpinner({\n          target: this.spinnerElement,\n          width: Browser.isDevice ? '16px' : '14px'\n        }, this.createElement);\n        addClass([this.spinnerElement], DISABLE_ICON);\n\n        _showSpinner(this.spinnerElement);\n      }\n    }\n    /**\n     * Hides the spinner loader.\n     *\n     * @returns {void}\n     */\n\n  }, {\n    key: \"hideSpinner\",\n    value: function hideSpinner() {\n      if (!isNullOrUndefined(this.spinnerElement)) {\n        _hideSpinner(this.spinnerElement);\n\n        removeClass([this.spinnerElement], DISABLE_ICON);\n\n        if (this.spinnerElement.classList.contains(SPINNER_CLASS$1)) {\n          detach(this.spinnerElement);\n        } else {\n          this.spinnerElement.innerHTML = '';\n        }\n\n        this.spinnerElement = null;\n      }\n    }\n  }, {\n    key: \"updateWrapperText\",\n    value: function updateWrapperText(wrapperType, wrapperData) {\n      if (this.valueTemplate || !this.enableHtmlSanitizer) {\n        wrapperType.innerHTML = wrapperData;\n      } else {\n        wrapperType.innerText = SanitizeHtmlHelper.sanitize(wrapperData);\n      }\n    }\n  }, {\n    key: \"updateDelimView\",\n    value: function updateDelimView() {\n      if (this.delimiterWrapper) {\n        this.hideDelimWrapper();\n      }\n\n      if (this.chipCollectionWrapper) {\n        this.chipCollectionWrapper.style.display = 'none';\n      }\n\n      this.viewWrapper.style.display = '';\n      this.viewWrapper.style.width = '';\n      this.viewWrapper.classList.remove(TOTAL_COUNT_WRAPPER$1);\n\n      if (this.value && this.value.length) {\n        var data = '';\n        var temp;\n        var tempData;\n        var tempIndex = 1;\n        var wrapperleng;\n        var remaining;\n        var downIconWidth = 0;\n        var overAllContainer;\n        this.updateWrapperText(this.viewWrapper, data);\n        var l10nLocale = {\n          noRecordsTemplate: 'No records found',\n          actionFailureTemplate: 'Request failed',\n          overflowCountTemplate: '+${count} more..',\n          totalCountTemplate: '${count} selected'\n        };\n        var l10n = new L10n(this.getLocaleName(), l10nLocale, this.locale);\n\n        if (l10n.getConstant('actionFailureTemplate') === '') {\n          l10n = new L10n('dropdowns', l10nLocale, this.locale);\n        }\n\n        if (l10n.getConstant('noRecordsTemplate') === '') {\n          l10n = new L10n('dropdowns', l10nLocale, this.locale);\n        }\n\n        var remainContent = l10n.getConstant('overflowCountTemplate');\n        var totalContent = l10n.getConstant('totalCountTemplate');\n        var raminElement = this.createElement('span', {\n          className: REMAIN_WRAPPER$1\n        });\n        var remainCompildTemp = remainContent.replace('${count}', this.value.length.toString());\n        raminElement.innerText = remainCompildTemp;\n        this.viewWrapper.appendChild(raminElement);\n        this.renderReactTemplates();\n        var remainSize = raminElement.offsetWidth;\n        remove(raminElement);\n\n        if (this.showDropDownIcon) {\n          downIconWidth = this.dropIcon.offsetWidth + parseInt(window.getComputedStyle(this.dropIcon).marginRight, 10);\n        }\n\n        this.checkClearIconWidth();\n\n        if (!isNullOrUndefined(this.value)) {\n          for (var index = 0; !isNullOrUndefined(this.value[index]); index++) {\n            data += index === 0 ? '' : this.delimiterChar + ' ';\n            temp = this.getOverflowVal(index);\n            data += temp;\n            temp = this.viewWrapper.innerHTML;\n            this.updateWrapperText(this.viewWrapper, data);\n            wrapperleng = this.viewWrapper.offsetWidth + parseInt(window.getComputedStyle(this.viewWrapper).paddingRight, 10);\n            overAllContainer = this.componentWrapper.offsetWidth - parseInt(window.getComputedStyle(this.componentWrapper).paddingLeft, 10) - parseInt(window.getComputedStyle(this.componentWrapper).paddingRight, 10);\n\n            if (wrapperleng + downIconWidth + this.clearIconWidth > overAllContainer) {\n              if (tempData !== undefined && tempData !== '') {\n                temp = tempData;\n                index = tempIndex + 1;\n              }\n\n              this.updateWrapperText(this.viewWrapper, temp);\n              remaining = this.value.length - index;\n              wrapperleng = this.viewWrapper.offsetWidth + parseInt(window.getComputedStyle(this.viewWrapper).paddingRight, 10);\n\n              while (wrapperleng + remainSize + downIconWidth + this.clearIconWidth > overAllContainer && wrapperleng !== 0 && this.viewWrapper.innerHTML !== '') {\n                var textArr = [];\n                this.viewWrapper.innerHTML = textArr.join(this.delimiterChar);\n                remaining = this.value.length;\n                wrapperleng = this.viewWrapper.offsetWidth + parseInt(window.getComputedStyle(this.viewWrapper).paddingRight, 10);\n              }\n\n              break;\n            } else if (wrapperleng + remainSize + downIconWidth + this.clearIconWidth <= overAllContainer) {\n              tempData = data;\n              tempIndex = index;\n            } else if (index === 0) {\n              tempData = '';\n              tempIndex = -1;\n            }\n          }\n        }\n\n        if (remaining > 0) {\n          var totalWidth = overAllContainer - downIconWidth - this.clearIconWidth;\n          this.viewWrapper.appendChild(this.updateRemainTemplate(raminElement, this.viewWrapper, remaining, remainContent, totalContent, totalWidth));\n          this.updateRemainWidth(this.viewWrapper, totalWidth);\n          this.updateRemainingText(raminElement, downIconWidth, remaining, remainContent, totalContent);\n        }\n      } else {\n        this.viewWrapper.innerHTML = '';\n        this.viewWrapper.style.display = 'none';\n      }\n    }\n  }, {\n    key: \"checkClearIconWidth\",\n    value: function checkClearIconWidth() {\n      if (this.showClearButton) {\n        this.clearIconWidth = this.overAllClear.offsetWidth;\n      }\n    }\n  }, {\n    key: \"updateRemainWidth\",\n    value: function updateRemainWidth(viewWrapper, totalWidth) {\n      if (viewWrapper.classList.contains(TOTAL_COUNT_WRAPPER$1) && totalWidth < viewWrapper.offsetWidth + parseInt(window.getComputedStyle(viewWrapper).paddingLeft, 10) + parseInt(window.getComputedStyle(viewWrapper).paddingLeft, 10)) {\n        viewWrapper.style.width = totalWidth + 'px';\n      }\n    }\n  }, {\n    key: \"updateRemainTemplate\",\n    value: function updateRemainTemplate(raminElement, viewWrapper, remaining, remainContent, totalContent, totalWidth) {\n      if (viewWrapper.firstChild && viewWrapper.firstChild.nodeType === 3 && viewWrapper.firstChild.nodeValue === '') {\n        viewWrapper.removeChild(viewWrapper.firstChild);\n      }\n\n      raminElement.innerHTML = '';\n      var remainTemp = remainContent.replace('${count}', remaining.toString());\n      var totalTemp = totalContent.replace('${count}', remaining.toString());\n      raminElement.innerText = viewWrapper.firstChild && viewWrapper.firstChild.nodeType === 3 ? remainTemp : totalTemp;\n\n      if (viewWrapper.firstChild && viewWrapper.firstChild.nodeType === 3) {\n        viewWrapper.classList.remove(TOTAL_COUNT_WRAPPER$1);\n      } else {\n        viewWrapper.classList.add(TOTAL_COUNT_WRAPPER$1);\n        this.updateRemainWidth(viewWrapper, totalWidth);\n      }\n\n      return raminElement;\n    }\n  }, {\n    key: \"updateRemainingText\",\n    value: function updateRemainingText(raminElement, downIconWidth, remaining, remainContent, totalContent) {\n      var overAllContainer = this.componentWrapper.offsetWidth - parseInt(window.getComputedStyle(this.componentWrapper).paddingLeft, 10) - parseInt(window.getComputedStyle(this.componentWrapper).paddingRight, 10);\n      var wrapperleng = this.viewWrapper.offsetWidth + parseInt(window.getComputedStyle(this.viewWrapper).paddingRight, 10);\n\n      if (wrapperleng + downIconWidth >= overAllContainer && wrapperleng !== 0 && this.viewWrapper.firstChild && this.viewWrapper.firstChild.nodeType === 3) {\n        while (wrapperleng + downIconWidth > overAllContainer && wrapperleng !== 0 && this.viewWrapper.firstChild && this.viewWrapper.firstChild.nodeType === 3) {\n          var textArr = this.viewWrapper.firstChild.nodeValue.split(this.delimiterChar);\n          textArr.pop();\n          this.viewWrapper.firstChild.nodeValue = textArr.join(this.delimiterChar);\n\n          if (this.viewWrapper.firstChild.nodeValue === '') {\n            this.viewWrapper.removeChild(this.viewWrapper.firstChild);\n          }\n\n          remaining++;\n          wrapperleng = this.viewWrapper.offsetWidth;\n        }\n\n        var totalWidth = overAllContainer - downIconWidth;\n        this.updateRemainTemplate(raminElement, this.viewWrapper, remaining, remainContent, totalContent, totalWidth);\n      }\n    }\n  }, {\n    key: \"getOverflowVal\",\n    value: function getOverflowVal(index) {\n      var temp;\n\n      if (this.mainData && this.mainData.length) {\n        if (this.mode === 'CheckBox') {\n          var newTemp = this.listData;\n          this.listData = this.mainData;\n          temp = this.getTextByValue(this.value[index]);\n          this.listData = newTemp;\n        } else {\n          temp = this.getTextByValue(this.value[index]);\n        }\n      } else {\n        temp = this.value[index];\n      }\n\n      return temp;\n    }\n  }, {\n    key: \"unWireEvent\",\n    value: function unWireEvent() {\n      EventHandler.remove(this.componentWrapper, 'mousedown', this.wrapperClick);\n      EventHandler.remove(window, 'resize', this.windowResize);\n      EventHandler.remove(this.inputElement, 'focus', this.focusInHandler);\n      EventHandler.remove(this.inputElement, 'keydown', this.onKeyDown);\n\n      if (this.mode !== 'CheckBox') {\n        EventHandler.remove(this.inputElement, 'input', this.onInput);\n      }\n\n      EventHandler.remove(this.inputElement, 'keyup', this.keyUp);\n      var formElement = closest(this.inputElement, 'form');\n\n      if (formElement) {\n        EventHandler.remove(formElement, 'reset', this.resetValueHandler);\n      }\n\n      EventHandler.remove(this.inputElement, 'blur', this.onBlurHandler);\n      EventHandler.remove(this.componentWrapper, 'mousemove', this.mouseIn);\n      EventHandler.remove(this.componentWrapper, 'mouseout', this.mouseOut);\n      EventHandler.remove(this.overAllClear, 'mousedown', this.clearAll);\n      EventHandler.remove(this.inputElement, 'paste', this.pasteHandler);\n    }\n  }, {\n    key: \"selectAllItem\",\n    value: function selectAllItem(state, event, list) {\n      var li;\n      li = this.list.querySelectorAll(state ? 'li.e-list-item:not([aria-selected=\"true\"]):not(.e-reorder-hide)' : 'li.e-list-item[aria-selected=\"true\"]:not(.e-reorder-hide)');\n\n      if (this.value && this.value.length && event && event.target && closest(event.target, '.e-close-hooker') && this.allowFiltering) {\n        li = this.mainList.querySelectorAll(state ? 'li.e-list-item:not([aria-selected=\"true\"]):not(.e-reorder-hide)' : 'li.e-list-item[aria-selected=\"true\"]:not(.e-reorder-hide)');\n      }\n\n      if (this.enableGroupCheckBox && this.mode === 'CheckBox' && !isNullOrUndefined(this.fields.groupBy)) {\n        var target = event ? event.target : null;\n        target = event && event.keyCode === 32 ? list : target;\n        target = target && target.classList.contains('e-frame') ? target.parentElement.parentElement : target;\n\n        if (target && target.classList.contains('e-list-group-item')) {\n          var listElement = target.nextElementSibling;\n\n          if (isNullOrUndefined(listElement)) {\n            return;\n          }\n\n          while (listElement.classList.contains('e-list-item')) {\n            if (state) {\n              if (!listElement.firstElementChild.lastElementChild.classList.contains('e-check')) {\n                var selectionLimit = this.value && this.value.length ? this.value.length : 0;\n\n                if (listElement.classList.contains('e-active')) {\n                  selectionLimit -= 1;\n                }\n\n                if (selectionLimit < this.maximumSelectionLength) {\n                  this.updateListSelection(listElement, event);\n                }\n              }\n            } else {\n              if (listElement.firstElementChild.lastElementChild.classList.contains('e-check')) {\n                this.updateListSelection(listElement, event);\n              }\n            }\n\n            listElement = listElement.nextElementSibling;\n\n            if (listElement == null) {\n              break;\n            }\n          }\n\n          if (target.classList.contains('e-list-group-item')) {\n            var focusedElement = this.list.getElementsByClassName('e-item-focus')[0];\n\n            if (focusedElement) {\n              focusedElement.classList.remove('e-item-focus');\n            }\n\n            if (state) {\n              target.classList.add('e-active');\n            } else {\n              target.classList.remove('e-active');\n            }\n\n            target.classList.add('e-item-focus');\n          }\n\n          this.textboxValueUpdate();\n          this.checkPlaceholderSize();\n\n          if (!this.changeOnBlur && event) {\n            this.updateValueState(event, this.value, this.tempValues);\n          }\n        } else {\n          this.updateValue(event, li, state);\n        }\n      } else {\n        this.updateValue(event, li, state);\n      }\n    }\n  }, {\n    key: \"updateValue\",\n    value: function updateValue(event, li, state) {\n      var _this38 = this;\n\n      var length = li.length;\n      var beforeSelectArgs = {\n        event: event,\n        items: state ? li : [],\n        itemData: state ? this.listData : [],\n        isInteracted: event ? true : false,\n        isChecked: state,\n        preventSelectEvent: false\n      };\n      this.trigger('beforeSelectAll', beforeSelectArgs);\n\n      if (li && li.length) {\n        var index = 0;\n        var count = 0;\n\n        if (this.enableGroupCheckBox) {\n          count = state ? this.maximumSelectionLength - (this.value ? this.value.length : 0) : li.length;\n        } else {\n          count = state ? this.maximumSelectionLength - (this.value ? this.value.length : 0) : this.maximumSelectionLength;\n        }\n\n        if (!beforeSelectArgs.preventSelectEvent) {\n          while (index < length && index <= 50 && index < count) {\n            this.updateListSelection(li[index], event, length - index);\n\n            if (this.enableGroupCheckBox) {\n              this.findGroupStart(li[index]);\n            }\n\n            index++;\n          }\n\n          if (length > 50) {\n            setTimeout(function () {\n              while (index < length && index < count) {\n                _this38.updateListSelection(li[index], event, length - index);\n\n                if (_this38.enableGroupCheckBox) {\n                  _this38.findGroupStart(li[index]);\n                }\n\n                index++;\n              }\n\n              _this38.updatedataValueItems(event);\n\n              if (!_this38.changeOnBlur) {\n                _this38.updateValueState(event, _this38.value, _this38.tempValues);\n\n                _this38.isSelectAll = _this38.isSelectAll ? !_this38.isSelectAll : _this38.isSelectAll;\n              }\n\n              _this38.updateHiddenElement();\n            }, 0);\n          }\n        } else {\n          for (var i = 0; i < li.length && i < count; i++) {\n            this.removeHover();\n            var customVal = li[i].getAttribute('data-value');\n            var value = this.getFormattedValue(customVal);\n            var mainElement = this.mainList ? this.mainList.querySelectorAll(state ? 'li.e-list-item:not([aria-selected=\"true\"]):not(.e-reorder-hide)' : 'li.e-list-item[aria-selected=\"true\"]:not(.e-reorder-hide)')[i] : null;\n\n            if (state) {\n              this.value = !this.value ? [] : this.value;\n\n              if (this.value.indexOf(value) < 0) {\n                this.setProperties({\n                  value: [].concat([], this.value, [value])\n                }, true);\n              }\n\n              this.removeFocus();\n              this.addListSelection(li[i], mainElement);\n              this.updateChipStatus();\n              this.checkMaxSelection();\n            } else {\n              this.removeAllItems(value, event, false, li[i], mainElement);\n            }\n\n            if (this.enableGroupCheckBox) {\n              this.findGroupStart(li[i]);\n            }\n          }\n\n          if (!state) {\n            var limit = this.value && this.value.length ? this.value.length : 0;\n\n            if (limit < this.maximumSelectionLength) {\n              var collection = this.list.querySelectorAll('li.' + dropDownBaseClasses.li + ':not(.e-active)');\n              removeClass(collection, 'e-disable');\n            }\n          }\n\n          var args = {\n            event: event,\n            items: state ? li : [],\n            itemData: state ? this.listData : [],\n            isInteracted: event ? true : false,\n            isChecked: state\n          };\n          this.trigger('selectedAll', args);\n        }\n      }\n\n      this.updatedataValueItems(event);\n      this.checkPlaceholderSize();\n\n      if (length <= 50 && !beforeSelectArgs.preventSelectEvent) {\n        if (!this.changeOnBlur) {\n          this.updateValueState(event, this.value, this.tempValues);\n          this.isSelectAll = this.isSelectAll ? !this.isSelectAll : this.isSelectAll;\n        }\n\n        this.updateHiddenElement();\n      }\n    }\n  }, {\n    key: \"updateHiddenElement\",\n    value: function updateHiddenElement() {\n      var _this39 = this;\n\n      var hiddenValue = '';\n      var wrapperText = '';\n      var data = '';\n      var text = [];\n\n      if (this.mode === 'CheckBox') {\n        this.value.map(function (value, index) {\n          hiddenValue += '<option selected value =\"' + value + '\">' + index + '</option>';\n\n          if (_this39.listData) {\n            data = _this39.getTextByValue(value);\n          } else {\n            data = value;\n          }\n\n          wrapperText += data + _this39.delimiterChar + ' ';\n          text.push(data);\n        });\n        this.hiddenElement.innerHTML = hiddenValue;\n        this.updateWrapperText(this.delimiterWrapper, wrapperText);\n        this.delimiterWrapper.setAttribute('id', getUniqueID('delim_val'));\n        this.inputElement.setAttribute('aria-describedby', this.delimiterWrapper.id);\n        this.inputElement.setAttribute('aria-labelledby', this.delimiterWrapper.id);\n        this.setProperties({\n          text: text.toString()\n        }, true);\n        this.refreshInputHight();\n        this.refreshPlaceHolder();\n      }\n    }\n  }, {\n    key: \"updatedataValueItems\",\n    value: function updatedataValueItems(event) {\n      this.deselectHeader();\n      this.textboxValueUpdate(event);\n    }\n  }, {\n    key: \"textboxValueUpdate\",\n    value: function textboxValueUpdate(event) {\n      var isRemoveAll = event && event.target && (closest(event.target, '.e-selectall-parent') || closest(event.target, '.e-close-hooker'));\n\n      if (this.mode !== 'Box' && !this.isPopupOpen() && !(this.mode === 'CheckBox' && (this.isSelectAll || isRemoveAll))) {\n        this.updateDelimView();\n      } else {\n        this.searchWrapper.classList.remove(ZERO_SIZE);\n      }\n\n      if (this.mode === 'CheckBox') {\n        this.updateDelimView();\n\n        if (!(isRemoveAll || this.isSelectAll)) {\n          this.updateDelimeter(this.delimiterChar, event);\n        }\n\n        this.refreshInputHight();\n      } else {\n        this.updateDelimeter(this.delimiterChar, event);\n      }\n\n      this.refreshPlaceHolder();\n    }\n  }, {\n    key: \"setZIndex\",\n    value: function setZIndex() {\n      if (this.popupObj) {\n        this.popupObj.setProperties({\n          'zIndex': this.zIndex\n        });\n      }\n    } // eslint-disable-next-line @typescript-eslint/no-unused-vars\n\n  }, {\n    key: \"updateDataSource\",\n    value: function updateDataSource(prop) {\n      if (isNullOrUndefined(this.list)) {\n        this.renderPopup();\n      } else {\n        this.resetList(this.dataSource);\n      }\n\n      if (this.value && this.value.length) {\n        this.setProperties({\n          'value': this.value\n        });\n        this.refreshSelection();\n      }\n    }\n  }, {\n    key: \"onLoadSelect\",\n    value: function onLoadSelect() {\n      this.setDynValue = true;\n      this.renderPopup();\n    }\n  }, {\n    key: \"selectAllItems\",\n    value: function selectAllItems(state, event) {\n      var _this40 = this;\n\n      if (isNullOrUndefined(this.list)) {\n        this.selectAllAction = function () {\n          if (_this40.mode === 'CheckBox' && _this40.showSelectAll) {\n            var args = {\n              module: 'CheckBoxSelection',\n              enable: _this40.mode === 'CheckBox',\n              value: state ? 'check' : 'uncheck'\n            };\n\n            _this40.notify('checkSelectAll', args);\n          }\n\n          _this40.selectAllItem(state, event);\n\n          _this40.selectAllAction = null;\n        };\n\n        _get(_getPrototypeOf(MultiSelect.prototype), \"render\", this).call(this);\n      } else {\n        this.selectAllAction = null;\n\n        if (this.mode === 'CheckBox' && this.showSelectAll) {\n          var args = {\n            value: state ? 'check' : 'uncheck',\n            enable: this.mode === 'CheckBox',\n            module: 'CheckBoxSelection'\n          };\n          this.notify('checkSelectAll', args);\n        }\n\n        this.selectAllItem(state, event);\n      }\n    }\n    /**\n     * Get the properties to be maintained in the persisted state.\n     *\n     * @returns {string} Returns the persisted data of the component.\n     */\n\n  }, {\n    key: \"getPersistData\",\n    value: function getPersistData() {\n      return this.addOnPersist(['value']);\n    }\n    /**\n     * Dynamically change the value of properties.\n     *\n     * @param {MultiSelectModel} newProp - Returns the dynamic property value of the component.\n     * @param {MultiSelectModel} oldProp - Returns the previous property value of the component.\n     * @private\n     * @returns {void}\n     */\n\n  }, {\n    key: \"onPropertyChanged\",\n    value: function onPropertyChanged(newProp, oldProp) {\n      if (newProp.dataSource && !isNullOrUndefined(Object.keys(newProp.dataSource)) || newProp.query && !isNullOrUndefined(Object.keys(newProp.query))) {\n        this.mainList = null;\n        this.mainData = null;\n        this.isFirstClick = false;\n        this.isDynamicDataChange = true;\n      }\n\n      if (this.getModuleName() === 'multiselect') {\n        this.filterAction = false;\n        this.setUpdateInitial(['fields', 'query', 'dataSource'], newProp);\n      }\n\n      for (var _i13 = 0, _Object$keys9 = Object.keys(newProp); _i13 < _Object$keys9.length; _i13++) {\n        var prop = _Object$keys9[_i13];\n\n        switch (prop) {\n          case 'query':\n          case 'dataSource':\n            if (this.mode === 'CheckBox' && this.showSelectAll) {\n              if (!isNullOrUndefined(this.popupObj)) {\n                this.popupObj.destroy();\n                this.popupObj = null;\n              }\n\n              this.renderPopup();\n            }\n\n            break;\n\n          case 'htmlAttributes':\n            this.updateHTMLAttribute();\n            break;\n\n          case 'showClearButton':\n            this.updateClearButton(newProp.showClearButton);\n            break;\n\n          case 'text':\n            this.updateVal(this.value, this.value, 'text');\n            break;\n\n          case 'value':\n            this.updateVal(this.value, oldProp.value, 'value');\n            this.addValidInputClass();\n\n            if (!this.closePopupOnSelect && this.isPopupOpen()) {\n              this.refreshPopup();\n            }\n\n            this.preventChange = this.isAngular && this.preventChange ? !this.preventChange : this.preventChange;\n            break;\n\n          case 'width':\n            this.setWidth(newProp.width);\n            this.popupObj.setProperties({\n              width: this.calcPopupWidth()\n            });\n            break;\n\n          case 'placeholder':\n            this.refreshPlaceHolder();\n            break;\n\n          case 'filterBarPlaceholder':\n            if (this.allowFiltering) {\n              this.notify('filterBarPlaceholder', {\n                filterBarPlaceholder: newProp.filterBarPlaceholder\n              });\n            }\n\n            break;\n\n          case 'delimiterChar':\n            if (this.mode !== 'Box') {\n              this.updateDelimView();\n            }\n\n            this.updateData(newProp.delimiterChar);\n            break;\n\n          case 'cssClass':\n            this.updateOldPropCssClass(oldProp.cssClass);\n            this.updateCssClass();\n            break;\n\n          case 'enableRtl':\n            this.enableRTL(newProp.enableRtl);\n\n            _get(_getPrototypeOf(MultiSelect.prototype), \"onPropertyChanged\", this).call(this, newProp, oldProp);\n\n            break;\n\n          case 'readonly':\n            this.updateReadonly(newProp.readonly);\n            this.hidePopup();\n            break;\n\n          case 'enabled':\n            this.hidePopup();\n            this.enable(newProp.enabled);\n            break;\n\n          case 'showSelectAll':\n            if (this.popupObj) {\n              this.popupObj.destroy();\n              this.popupObj = null;\n            }\n\n            this.renderPopup();\n            break;\n\n          case 'showDropDownIcon':\n            this.dropDownIcon();\n            break;\n\n          case 'floatLabelType':\n            this.setFloatLabelType();\n            this.addValidInputClass();\n            break;\n\n          case 'enableSelectionOrder':\n            break;\n\n          case 'selectAllText':\n            this.notify('selectAllText', false);\n            break;\n\n          case 'popupHeight':\n          case 'headerTemplate':\n          case 'footerTemplate':\n            this.reInitializePoup();\n            break;\n\n          case 'allowFiltering':\n            if (this.mode === 'CheckBox' && this.popupObj) {\n              this.reInitializePoup();\n            }\n\n            this.updateSelectElementData(this.allowFiltering);\n            break;\n\n          default:\n            {\n              // eslint-disable-next-line max-len\n              var msProps = this.getPropObject(prop, newProp, oldProp);\n\n              _get(_getPrototypeOf(MultiSelect.prototype), \"onPropertyChanged\", this).call(this, msProps.newProperty, msProps.oldProperty);\n            }\n            break;\n        }\n      }\n    }\n  }, {\n    key: \"reInitializePoup\",\n    value: function reInitializePoup() {\n      if (this.popupObj) {\n        this.popupObj.destroy();\n        this.popupObj = null;\n      }\n\n      this.renderPopup();\n    }\n  }, {\n    key: \"updateVal\",\n    value: function updateVal(newProp, oldProp, prop) {\n      if (!this.list) {\n        this.onLoadSelect();\n      } else if (this.dataSource instanceof DataManager && (!this.listData || !(this.mainList && this.mainData))) {\n        this.onLoadSelect();\n      } else {\n        if (prop === 'text') {\n          this.initialTextUpdate();\n          newProp = this.value;\n        }\n\n        if (isNullOrUndefined(this.value) || this.value.length === 0) {\n          this.tempValues = oldProp;\n        } // eslint-disable-next-line\n\n\n        if (this.allowCustomValue && (this.mode === 'Default' || this.mode === 'Box') && this.isReact && this.inputFocus && this.isPopupOpen() && this.mainData !== this.listData) {\n          var list = this.mainList.cloneNode ? this.mainList.cloneNode(true) : this.mainList;\n          this.onActionComplete(list, this.mainData);\n        }\n\n        this.initialValueUpdate();\n\n        if (this.mode !== 'Box' && !this.inputFocus) {\n          this.updateDelimView();\n        }\n\n        if (!this.inputFocus) {\n          this.refreshInputHight();\n        }\n\n        this.refreshPlaceHolder();\n\n        if (this.mode !== 'CheckBox' && this.changeOnBlur) {\n          this.updateValueState(null, newProp, oldProp);\n        }\n\n        this.checkPlaceholderSize();\n      }\n\n      if (!this.changeOnBlur) {\n        this.updateValueState(null, newProp, oldProp);\n      }\n    }\n    /**\n     * Adds a new item to the multiselect popup list. By default, new item appends to the list as the last item,\n     * but you can insert based on the index parameter.\n     *\n     * @param  { Object[] } items - Specifies an array of JSON data or a JSON data.\n     * @param { number } itemIndex - Specifies the index to place the newly added item in the popup list.\n     * @returns {void}\n     */\n\n  }, {\n    key: \"addItem\",\n    value: function addItem(items, itemIndex) {\n      _get(_getPrototypeOf(MultiSelect.prototype), \"addItem\", this).call(this, items, itemIndex);\n    }\n    /**\n     * Hides the popup, if the popup in a open state.\n     *\n     * @returns {void}\n     */\n\n  }, {\n    key: \"hidePopup\",\n    value: function hidePopup() {\n      var _this41 = this;\n\n      var delay = 100;\n\n      if (this.isPopupOpen()) {\n        var animModel = {\n          name: 'FadeOut',\n          duration: 100,\n          delay: delay ? delay : 0\n        };\n        var eventArgs = {\n          popup: this.popupObj,\n          cancel: false,\n          animation: animModel\n        };\n        this.trigger('close', eventArgs, function (eventArgs) {\n          if (!eventArgs.cancel) {\n            if (_this41.fields.groupBy && _this41.mode !== 'CheckBox' && _this41.fixedHeaderElement) {\n              remove(_this41.fixedHeaderElement);\n              _this41.fixedHeaderElement = null;\n            }\n\n            _this41.beforePopupOpen = false;\n\n            _this41.overAllWrapper.classList.remove(iconAnimation);\n\n            _this41.popupObj.hide(new Animation(eventArgs.animation));\n\n            attributes(_this41.inputElement, {\n              'aria-expanded': 'false'\n            });\n\n            if (_this41.allowFiltering) {\n              _this41.notify('inputFocus', {\n                module: 'CheckBoxSelection',\n                enable: _this41.mode === 'CheckBox',\n                value: 'clear'\n              });\n            }\n\n            _this41.popupObj.hide();\n\n            removeClass([document.body, _this41.popupObj.element], 'e-popup-full-page');\n            EventHandler.remove(_this41.list, 'keydown', _this41.onKeyDown);\n          }\n        });\n      }\n    }\n    /**\n     * Shows the popup, if the popup in a closed state.\n     *\n     * @returns {void}\n     */\n\n  }, {\n    key: \"showPopup\",\n    value: function showPopup() {\n      var _this42 = this;\n\n      if (!this.enabled) {\n        return;\n      }\n\n      var args = {\n        cancel: false\n      };\n      this.trigger('beforeOpen', args, function (args) {\n        if (!args.cancel) {\n          if (!_this42.ulElement) {\n            _this42.beforePopupOpen = true;\n\n            _get(_getPrototypeOf(MultiSelect.prototype), \"render\", _this42).call(_this42);\n\n            if (_this42.mode === 'CheckBox' && Browser.isDevice && _this42.allowFiltering) {\n              _this42.notify('popupFullScreen', {\n                module: 'CheckBoxSelection',\n                enable: _this42.mode === 'CheckBox'\n              });\n            }\n\n            return;\n          }\n\n          if (_this42.mode === 'CheckBox' && Browser.isDevice && _this42.allowFiltering) {\n            _this42.notify('popupFullScreen', {\n              module: 'CheckBoxSelection',\n              enable: _this42.mode === 'CheckBox'\n            });\n          }\n\n          var mainLiLength = _this42.ulElement.querySelectorAll('li.' + 'e-list-item').length;\n\n          var liLength = _this42.ulElement.querySelectorAll('li.' + dropDownBaseClasses.li + '.' + HIDE_LIST).length;\n\n          if (mainLiLength > 0 && mainLiLength === liLength && liLength === _this42.mainData.length) {\n            _this42.beforePopupOpen = false;\n            return;\n          }\n\n          _this42.onPopupShown();\n        }\n      });\n    }\n    /**\n     * Based on the state parameter, entire list item will be selected/deselected.\n     * parameter\n     * `true`   - Selects entire list items.\n     * `false`  - Un Selects entire list items.\n     *\n     * @param {boolean} state - if its true then Selects the entire list items. If its false the Unselects entire list items.\n     * @returns {void}\n     */\n\n  }, {\n    key: \"selectAll\",\n    value: function selectAll(state) {\n      this.isSelectAll = true;\n      this.selectAllItems(state);\n    }\n    /**\n     * Return the module name of this component.\n     *\n     * @private\n     * @returns {string} Return the module name of this component.\n     */\n\n  }, {\n    key: \"getModuleName\",\n    value: function getModuleName() {\n      return 'multiselect';\n    }\n    /**\n     * Allows you to clear the selected values from the Multiselect component.\n     *\n     * @returns {void}\n     */\n\n  }, {\n    key: \"clear\",\n    value: function clear() {\n      var _this43 = this;\n\n      this.selectAll(false);\n\n      if (this.value && this.value.length) {\n        setTimeout(function () {\n          _this43.setProperties({\n            value: null\n          }, true);\n        }, 0);\n      } else {\n        this.setProperties({\n          value: null\n        }, true);\n      }\n    }\n    /**\n     * To Initialize the control rendering\n     *\n     * @private\n     * @returns {void}\n     */\n\n  }, {\n    key: \"render\",\n    value: function render() {\n      this.setDynValue = this.initStatus = false;\n      this.isSelectAll = false;\n      this.searchWrapper = this.createElement('span', {\n        className: SEARCHBOX_WRAPPER + ' ' + (this.mode === 'Box' ? BOX_ELEMENT : '')\n      });\n      this.viewWrapper = this.createElement('span', {\n        className: DELIMITER_VIEW + ' ' + DELIMITER_WRAPPER,\n        styles: 'display:none;'\n      });\n      this.overAllClear = this.createElement('span', {\n        className: CLOSEICON_CLASS$1,\n        styles: 'display:none;'\n      });\n      this.componentWrapper = this.createElement('div', {\n        className: ELEMENT_WRAPPER\n      });\n      this.overAllWrapper = this.createElement('div', {\n        className: OVER_ALL_WRAPPER\n      });\n\n      if (this.mode === 'CheckBox') {\n        addClass([this.overAllWrapper], 'e-checkbox');\n      }\n\n      if (Browser.isDevice) {\n        this.componentWrapper.classList.add(ELEMENT_MOBILE_WRAPPER);\n      }\n\n      this.setWidth(this.width);\n      this.overAllWrapper.appendChild(this.componentWrapper);\n      this.popupWrapper = this.createElement('div', {\n        id: this.element.id + '_popup',\n        className: POPUP_WRAPPER\n      });\n\n      if (this.mode === 'Delimiter' || this.mode === 'CheckBox') {\n        this.delimiterWrapper = this.createElement('span', {\n          className: DELIMITER_WRAPPER,\n          styles: 'display:none'\n        });\n        this.componentWrapper.appendChild(this.delimiterWrapper);\n      } else {\n        this.chipCollectionWrapper = this.createElement('span', {\n          className: CHIP_WRAPPER$1,\n          styles: 'display:none'\n        });\n\n        if (this.mode === 'Default') {\n          this.chipCollectionWrapper.setAttribute('id', getUniqueID('chip_default'));\n        } else if (this.mode === 'Box') {\n          this.chipCollectionWrapper.setAttribute('id', getUniqueID('chip_box'));\n        }\n\n        this.componentWrapper.appendChild(this.chipCollectionWrapper);\n      }\n\n      if (this.mode !== 'Box') {\n        this.componentWrapper.appendChild(this.viewWrapper);\n      }\n\n      this.componentWrapper.appendChild(this.searchWrapper);\n\n      if (this.showClearButton && !Browser.isDevice) {\n        this.componentWrapper.appendChild(this.overAllClear);\n      } else {\n        this.componentWrapper.classList.add(CLOSE_ICON_HIDE);\n      }\n\n      this.dropDownIcon();\n      this.inputElement = this.createElement('input', {\n        className: INPUT_ELEMENT,\n        attrs: {\n          spellcheck: 'false',\n          type: 'text',\n          autocomplete: 'off',\n          tabindex: '0'\n        }\n      });\n\n      if (this.mode === 'Default' || this.mode === 'Box') {\n        this.inputElement.setAttribute('aria-describedby', this.chipCollectionWrapper.id);\n        this.inputElement.setAttribute('aria-labelledby', this.chipCollectionWrapper.id);\n      }\n\n      if (this.element.tagName !== this.getNgDirective()) {\n        this.element.style.display = 'none';\n      }\n\n      if (this.element.tagName === this.getNgDirective()) {\n        this.element.appendChild(this.overAllWrapper);\n        this.searchWrapper.appendChild(this.inputElement);\n      } else {\n        this.element.parentElement.insertBefore(this.overAllWrapper, this.element);\n        this.searchWrapper.appendChild(this.inputElement);\n        this.searchWrapper.appendChild(this.element);\n        this.element.removeAttribute('tabindex');\n      }\n\n      if (this.floatLabelType !== 'Never') {\n        createFloatLabel(this.overAllWrapper, this.searchWrapper, this.element, this.inputElement, this.value, this.floatLabelType, this.placeholder);\n      } else if (this.floatLabelType === 'Never') {\n        this.refreshPlaceHolder();\n      }\n\n      this.addValidInputClass();\n      this.element.style.opacity = '';\n      var id = this.element.getAttribute('id') ? this.element.getAttribute('id') : getUniqueID('ej2_dropdownlist');\n      this.element.id = id;\n      this.hiddenElement = this.createElement('select', {\n        attrs: {\n          'aria-hidden': 'true',\n          'class': HIDDEN_ELEMENT,\n          'tabindex': '-1',\n          'multiple': ''\n        }\n      });\n      this.componentWrapper.appendChild(this.hiddenElement);\n      this.validationAttribute(this.element, this.hiddenElement);\n\n      if (this.mode !== 'CheckBox') {\n        this.hideOverAllClear();\n      }\n\n      this.wireEvent();\n      this.enable(this.enabled);\n      this.enableRTL(this.enableRtl);\n      this.checkInitialValue();\n\n      if (this.element.hasAttribute('data-val')) {\n        this.element.setAttribute('data-val', 'false');\n      }\n\n      this.renderComplete();\n    }\n  }, {\n    key: \"checkInitialValue\",\n    value: function checkInitialValue() {\n      var _this44 = this;\n\n      var isData = this.dataSource instanceof Array ? this.dataSource.length > 0 : !isNullOrUndefined(this.dataSource);\n\n      if (!(this.value && this.value.length) && isNullOrUndefined(this.text) && !isData && this.element.tagName === 'SELECT' && this.element.options.length > 0) {\n        var optionsElement = this.element.options;\n        var valueCol = [];\n        var textCol = '';\n\n        for (var index = 0, optionsLen = optionsElement.length; index < optionsLen; index++) {\n          var opt = optionsElement[index];\n\n          if (!isNullOrUndefined(opt.getAttribute('selected'))) {\n            if (opt.getAttribute('value')) {\n              valueCol.push(opt.getAttribute('value'));\n            } else {\n              textCol += opt.text + this.delimiterChar;\n            }\n          }\n        }\n\n        if (valueCol.length > 0) {\n          this.setProperties({\n            value: valueCol\n          }, true);\n        } else if (textCol !== '') {\n          this.setProperties({\n            text: textCol\n          }, true);\n        }\n\n        if (valueCol.length > 0 || textCol !== '') {\n          this.refreshInputHight();\n          this.refreshPlaceHolder();\n        }\n      }\n\n      if (this.value && this.value.length || !isNullOrUndefined(this.text)) {\n        if (!this.list) {\n          _get(_getPrototypeOf(MultiSelect.prototype), \"render\", this).call(this);\n        }\n      }\n\n      if (!isNullOrUndefined(this.text) && (isNullOrUndefined(this.value) || this.value.length === 0)) {\n        this.initialTextUpdate();\n      }\n\n      if (this.value && this.value.length) {\n        if (!(this.dataSource instanceof DataManager)) {\n          this.initialValueUpdate();\n          this.initialUpdate();\n        } else {\n          this.setInitialValue = function () {\n            _this44.initStatus = false;\n\n            _this44.initialValueUpdate();\n\n            _this44.initialUpdate();\n\n            _this44.setInitialValue = null;\n            _this44.initStatus = true;\n          };\n        }\n\n        this.updateTempValue();\n      } else {\n        this.initialUpdate();\n      }\n\n      this.initStatus = true;\n      this.checkAutoFocus();\n\n      if (!isNullOrUndefined(this.text)) {\n        this.element.setAttribute('data-initial-value', this.text);\n      }\n    }\n  }, {\n    key: \"checkAutoFocus\",\n    value: function checkAutoFocus() {\n      if (this.element.hasAttribute('autofocus')) {\n        this.inputElement.focus();\n      }\n    }\n  }, {\n    key: \"setFloatLabelType\",\n    value: function setFloatLabelType() {\n      removeFloating(this.overAllWrapper, this.componentWrapper, this.searchWrapper, this.inputElement, this.value, this.floatLabelType, this.placeholder);\n\n      if (this.floatLabelType !== 'Never') {\n        createFloatLabel(this.overAllWrapper, this.searchWrapper, this.element, this.inputElement, this.value, this.floatLabelType, this.placeholder);\n      }\n    }\n  }, {\n    key: \"addValidInputClass\",\n    value: function addValidInputClass() {\n      if (!isNullOrUndefined(this.value) && this.value.length || this.floatLabelType === 'Always') {\n        addClass([this.overAllWrapper], 'e-valid-input');\n      } else {\n        removeClass([this.overAllWrapper], 'e-valid-input');\n      }\n    }\n  }, {\n    key: \"dropDownIcon\",\n    value: function dropDownIcon() {\n      if (this.showDropDownIcon) {\n        this.dropIcon = this.createElement('span', {\n          className: dropdownIcon\n        });\n        this.componentWrapper.appendChild(this.dropIcon);\n        addClass([this.componentWrapper], ['e-down-icon']);\n      } else {\n        if (!isNullOrUndefined(this.dropIcon)) {\n          this.dropIcon.parentElement.removeChild(this.dropIcon);\n          removeClass([this.componentWrapper], ['e-down-icon']);\n        }\n      }\n    }\n  }, {\n    key: \"initialUpdate\",\n    value: function initialUpdate() {\n      if (this.mode !== 'Box' && !(this.setDynValue && this.mode === 'Default' && this.inputFocus)) {\n        this.updateDelimView();\n      }\n\n      this.updateCssClass();\n      this.updateHTMLAttribute();\n      this.updateReadonly(this.readonly);\n      this.refreshInputHight();\n      this.checkPlaceholderSize();\n    }\n    /**\n     * Removes the component from the DOM and detaches all its related event handlers. Also it removes the attributes and classes.\n     *\n     * @method destroy\n     * @returns {void}\n     */\n\n  }, {\n    key: \"destroy\",\n    value: function destroy() {\n      // eslint-disable-next-line\n      if (this.isReact) {\n        this.clearTemplate();\n      }\n\n      if (this.popupObj) {\n        this.popupObj.hide();\n      }\n\n      this.notify(_destroy, {});\n      this.unwireListEvents();\n      this.unWireEvent();\n      this.list = null;\n      this.popupObj = null;\n      this.mainList = null;\n      this.mainData = null;\n      this.filterParent = null;\n      this.ulElement = null;\n\n      _get(_getPrototypeOf(MultiSelect.prototype), \"destroy\", this).call(this);\n\n      var temp = ['readonly', 'aria-disabled', 'aria-placeholder', 'placeholder'];\n      var length = temp.length;\n\n      while (length > 0) {\n        this.inputElement.removeAttribute(temp[length - 1]);\n        length--;\n      }\n\n      this.element.removeAttribute('data-initial-value');\n      this.element.style.display = 'block';\n\n      if (this.overAllWrapper.parentElement) {\n        if (this.overAllWrapper.parentElement.tagName === this.getNgDirective()) {\n          remove(this.overAllWrapper);\n        } else {\n          this.overAllWrapper.parentElement.insertBefore(this.element, this.overAllWrapper);\n          remove(this.overAllWrapper);\n        }\n      }\n    }\n  }]);\n\n  return MultiSelect;\n}(DropDownBase);\n\n__decorate$5([Complex({\n  text: null,\n  value: null,\n  iconCss: null,\n  groupBy: null\n}, FieldSettings)], MultiSelect.prototype, \"fields\", void 0);\n\n__decorate$5([Property(false)], MultiSelect.prototype, \"enablePersistence\", void 0);\n\n__decorate$5([Property(null)], MultiSelect.prototype, \"groupTemplate\", void 0);\n\n__decorate$5([Property('No records found')], MultiSelect.prototype, \"noRecordsTemplate\", void 0);\n\n__decorate$5([Property('Request failed')], MultiSelect.prototype, \"actionFailureTemplate\", void 0);\n\n__decorate$5([Property('None')], MultiSelect.prototype, \"sortOrder\", void 0);\n\n__decorate$5([Property(true)], MultiSelect.prototype, \"enabled\", void 0);\n\n__decorate$5([Property(false)], MultiSelect.prototype, \"enableHtmlSanitizer\", void 0);\n\n__decorate$5([Property([])], MultiSelect.prototype, \"dataSource\", void 0);\n\n__decorate$5([Property(null)], MultiSelect.prototype, \"query\", void 0);\n\n__decorate$5([Property('StartsWith')], MultiSelect.prototype, \"filterType\", void 0);\n\n__decorate$5([Property(1000)], MultiSelect.prototype, \"zIndex\", void 0);\n\n__decorate$5([Property(false)], MultiSelect.prototype, \"ignoreAccent\", void 0);\n\n__decorate$5([Property()], MultiSelect.prototype, \"locale\", void 0);\n\n__decorate$5([Property(false)], MultiSelect.prototype, \"enableGroupCheckBox\", void 0);\n\n__decorate$5([Property(null)], MultiSelect.prototype, \"cssClass\", void 0);\n\n__decorate$5([Property('100%')], MultiSelect.prototype, \"width\", void 0);\n\n__decorate$5([Property('300px')], MultiSelect.prototype, \"popupHeight\", void 0);\n\n__decorate$5([Property('100%')], MultiSelect.prototype, \"popupWidth\", void 0);\n\n__decorate$5([Property(null)], MultiSelect.prototype, \"placeholder\", void 0);\n\n__decorate$5([Property(null)], MultiSelect.prototype, \"filterBarPlaceholder\", void 0);\n\n__decorate$5([Property({})], MultiSelect.prototype, \"htmlAttributes\", void 0);\n\n__decorate$5([Property(null)], MultiSelect.prototype, \"valueTemplate\", void 0);\n\n__decorate$5([Property(null)], MultiSelect.prototype, \"headerTemplate\", void 0);\n\n__decorate$5([Property(null)], MultiSelect.prototype, \"footerTemplate\", void 0);\n\n__decorate$5([Property(null)], MultiSelect.prototype, \"itemTemplate\", void 0);\n\n__decorate$5([Property(null)], MultiSelect.prototype, \"allowFiltering\", void 0);\n\n__decorate$5([Property(true)], MultiSelect.prototype, \"changeOnBlur\", void 0);\n\n__decorate$5([Property(false)], MultiSelect.prototype, \"allowCustomValue\", void 0);\n\n__decorate$5([Property(true)], MultiSelect.prototype, \"showClearButton\", void 0);\n\n__decorate$5([Property(1000)], MultiSelect.prototype, \"maximumSelectionLength\", void 0);\n\n__decorate$5([Property(false)], MultiSelect.prototype, \"readonly\", void 0);\n\n__decorate$5([Property(null)], MultiSelect.prototype, \"text\", void 0);\n\n__decorate$5([Property(null)], MultiSelect.prototype, \"value\", void 0);\n\n__decorate$5([Property(true)], MultiSelect.prototype, \"hideSelectedItem\", void 0);\n\n__decorate$5([Property(true)], MultiSelect.prototype, \"closePopupOnSelect\", void 0);\n\n__decorate$5([Property('Default')], MultiSelect.prototype, \"mode\", void 0);\n\n__decorate$5([Property(',')], MultiSelect.prototype, \"delimiterChar\", void 0);\n\n__decorate$5([Property(true)], MultiSelect.prototype, \"ignoreCase\", void 0);\n\n__decorate$5([Property(false)], MultiSelect.prototype, \"showDropDownIcon\", void 0);\n\n__decorate$5([Property('Never')], MultiSelect.prototype, \"floatLabelType\", void 0);\n\n__decorate$5([Property(false)], MultiSelect.prototype, \"showSelectAll\", void 0);\n\n__decorate$5([Property('Select All')], MultiSelect.prototype, \"selectAllText\", void 0);\n\n__decorate$5([Property('Unselect All')], MultiSelect.prototype, \"unSelectAllText\", void 0);\n\n__decorate$5([Property(true)], MultiSelect.prototype, \"enableSelectionOrder\", void 0);\n\n__decorate$5([Property(true)], MultiSelect.prototype, \"openOnClick\", void 0);\n\n__decorate$5([Property(false)], MultiSelect.prototype, \"addTagOnBlur\", void 0);\n\n__decorate$5([Event()], MultiSelect.prototype, \"change\", void 0);\n\n__decorate$5([Event()], MultiSelect.prototype, \"removing\", void 0);\n\n__decorate$5([Event()], MultiSelect.prototype, \"removed\", void 0);\n\n__decorate$5([Event()], MultiSelect.prototype, \"beforeSelectAll\", void 0);\n\n__decorate$5([Event()], MultiSelect.prototype, \"selectedAll\", void 0);\n\n__decorate$5([Event()], MultiSelect.prototype, \"beforeOpen\", void 0);\n\n__decorate$5([Event()], MultiSelect.prototype, \"open\", void 0);\n\n__decorate$5([Event()], MultiSelect.prototype, \"close\", void 0);\n\n__decorate$5([Event()], MultiSelect.prototype, \"blur\", void 0);\n\n__decorate$5([Event()], MultiSelect.prototype, \"focus\", void 0);\n\n__decorate$5([Event()], MultiSelect.prototype, \"chipSelection\", void 0);\n\n__decorate$5([Event()], MultiSelect.prototype, \"filtering\", void 0);\n\n__decorate$5([Event()], MultiSelect.prototype, \"tagging\", void 0);\n\n__decorate$5([Event()], MultiSelect.prototype, \"customValueSelection\", void 0);\n\nMultiSelect = __decorate$5([NotifyPropertyChanges], MultiSelect);\nvar ICON = 'e-icons';\nvar CHECKBOXFRAME$1 = 'e-frame';\nvar CHECK$1 = 'e-check';\nvar CHECKBOXWRAP$1 = 'e-checkbox-wrapper';\nvar INDETERMINATE = 'e-stop';\nvar checkAllParent = 'e-selectall-parent';\nvar searchBackIcon = 'e-input-group-icon e-back-icon e-icons';\nvar filterBarClearIcon = 'e-input-group-icon e-clear-icon e-icons';\nvar filterInput = 'e-input-filter';\nvar filterParent = 'e-filter-parent';\nvar mobileFilter = 'e-ddl-device-filter';\nvar clearIcon = 'e-clear-icon';\nvar popupFullScreen = 'e-popup-full-page';\nvar device = 'e-ddl-device';\nvar FOCUS$1 = 'e-input-focus';\n/**\n * The Multiselect enable CheckBoxSelection call this inject module.\n */\n\nvar CheckBoxSelection = /*#__PURE__*/function () {\n  function CheckBoxSelection(parent) {\n    _classCallCheck(this, CheckBoxSelection);\n\n    this.activeLi = [];\n    this.activeEle = [];\n    this.parent = parent;\n    this.removeEventListener();\n    this.addEventListener();\n  }\n\n  _createClass(CheckBoxSelection, [{\n    key: \"getModuleName\",\n    value: function getModuleName() {\n      return 'CheckBoxSelection';\n    }\n  }, {\n    key: \"addEventListener\",\n    value: function addEventListener() {\n      if (this.parent.isDestroyed) {\n        return;\n      }\n\n      this.parent.on('updatelist', this.listSelection, this);\n      this.parent.on('listoption', this.listOption, this);\n      this.parent.on('selectAll', this.setSelectAll, this);\n      this.parent.on('checkSelectAll', this.checkSelectAll, this);\n      this.parent.on('searchBox', this.setSearchBox, this);\n      this.parent.on('blur', this.onBlurHandler, this);\n      this.parent.on('targetElement', this.targetElement, this);\n      this.parent.on('deviceSearchBox', this.setDeviceSearchBox, this);\n      this.parent.on('inputFocus', this.getFocus, this);\n      this.parent.on('reOrder', this.setReorder, this);\n      this.parent.on('activeList', this.getActiveList, this);\n      this.parent.on('selectAllText', this.setLocale, this);\n      this.parent.on('filterBarPlaceholder', this.setPlaceholder, this);\n      EventHandler.add(document, 'mousedown', this.onDocumentClick, this);\n      this.parent.on('addItem', this.checboxCreate, this);\n      this.parent.on('popupFullScreen', this.setPopupFullScreen, this);\n    }\n  }, {\n    key: \"removeEventListener\",\n    value: function removeEventListener() {\n      if (this.parent.isDestroyed) {\n        return;\n      }\n\n      this.parent.off('updatelist', this.listSelection);\n      this.parent.off('listoption', this.listOption);\n      this.parent.off('selectAll', this.setSelectAll);\n      this.parent.off('checkSelectAll', this.checkSelectAll);\n      this.parent.off('searchBox', this.setSearchBox);\n      this.parent.off('blur', this.onBlurHandler);\n      this.parent.off('targetElement', this.targetElement);\n      this.parent.off('deviceSearchBox', this.setDeviceSearchBox);\n      this.parent.off('inputFocus', this.getFocus);\n      this.parent.off('reOrder', this.setReorder);\n      this.parent.off('activeList', this.getActiveList);\n      this.parent.off('selectAllText', this.setLocale);\n      this.parent.off('filterBarPlaceholder', this.setPlaceholder);\n      this.parent.off('addItem', this.checboxCreate);\n      this.parent.off('popupFullScreen', this.setPopupFullScreen);\n    } // eslint-disable-next-line @typescript-eslint/no-unused-vars\n\n  }, {\n    key: \"listOption\",\n    value: function listOption(args) {\n      var _this45 = this;\n\n      if (isNullOrUndefined(this.parent.listCurrentOptions.itemCreated)) {\n        this.parent.listCurrentOptions.itemCreated = function (e) {\n          _this45.checboxCreate(e);\n        };\n      } else {\n        var itemCreated = this.parent.listCurrentOptions.itemCreated;\n\n        this.parent.listCurrentOptions.itemCreated = function (e) {\n          _this45.checboxCreate(e);\n\n          itemCreated.apply(_this45, [e]);\n        };\n      }\n    }\n  }, {\n    key: \"setPlaceholder\",\n    value: function setPlaceholder(props) {\n      Input.setPlaceholder(props.filterBarPlaceholder, this.filterInput);\n    }\n  }, {\n    key: \"checboxCreate\",\n    value: function checboxCreate(e) {\n      var item;\n\n      if (!isNullOrUndefined(e.item)) {\n        item = e.item;\n      } else {\n        item = e;\n      }\n\n      if (this.parent.enableGroupCheckBox || item.className !== 'e-list-group-item ' && item.className !== 'e-list-group-item') {\n        var checkboxEle = createCheckBox(this.parent.createElement, true);\n        var icon = select('div.' + ICON, item);\n        item.insertBefore(checkboxEle, item.childNodes[isNullOrUndefined(icon) ? 0 : 1]);\n        select('.' + CHECKBOXFRAME$1, checkboxEle);\n\n        if (this.parent.enableGroupCheckBox) {\n          this.parent.popupWrapper.classList.add('e-multiselect-group');\n        }\n\n        return item;\n      } else {\n        return item;\n      }\n    }\n  }, {\n    key: \"setSelectAll\",\n    value: function setSelectAll() {\n      if (this.parent.showSelectAll) {\n        if (isNullOrUndefined(this.checkAllParent)) {\n          this.checkAllParent = this.parent.createElement('div', {\n            className: checkAllParent\n          });\n          this.selectAllSpan = this.parent.createElement('span', {\n            className: 'e-all-text'\n          });\n          this.selectAllSpan.textContent = '';\n          this.checkAllParent.appendChild(this.selectAllSpan);\n          this.setLocale();\n          this.checboxCreate(this.checkAllParent);\n\n          if (this.parent.headerTemplate) {\n            if (!isNullOrUndefined(this.parent.filterParent)) {\n              append([this.checkAllParent], this.parent.filterParent);\n            } else {\n              append([this.checkAllParent], this.parent.popupWrapper);\n            }\n          }\n\n          if (!this.parent.headerTemplate) {\n            if (!isNullOrUndefined(this.parent.filterParent)) {\n              this.parent.filterParent.parentNode.insertBefore(this.checkAllParent, this.parent.filterParent.nextSibling);\n            } else {\n              prepend([this.checkAllParent], this.parent.popupWrapper);\n            }\n          }\n\n          EventHandler.add(this.checkAllParent, 'mousedown', this.clickHandler, this);\n        }\n\n        if (this.parent.list.classList.contains('e-nodata') || this.parent.listData && this.parent.listData.length <= 1 && !this.parent.isDynamicDataChange || this.parent.isDynamicDataChange && this.parent.listData && this.parent.listData.length <= 1) {\n          this.checkAllParent.style.display = 'none';\n        } else {\n          this.checkAllParent.style.display = 'block';\n        }\n\n        this.parent.selectAllHeight = this.checkAllParent.getBoundingClientRect().height;\n      } else if (!isNullOrUndefined(this.checkAllParent)) {\n        this.checkAllParent.parentElement.removeChild(this.checkAllParent);\n        this.checkAllParent = null;\n      }\n    }\n  }, {\n    key: \"destroy\",\n    value: function destroy() {\n      this.removeEventListener();\n      EventHandler.remove(document, 'mousedown', this.onDocumentClick);\n    }\n  }, {\n    key: \"listSelection\",\n    value: function listSelection(args) {\n      var target;\n\n      if (!isNullOrUndefined(args.e)) {\n        var frameElm = args.li.querySelector('.e-checkbox-wrapper .e-frame');\n        target = !isNullOrUndefined(args.e.target) ? args.e.target.classList.contains('e-frame') && (!this.parent.showSelectAll || this.checkAllParent && !this.checkAllParent.contains(args.e.target)) ? args.e.target : args.li.querySelector('.e-checkbox-wrapper').childNodes[1] : args.li.querySelector('.e-checkbox-wrapper').childNodes[1];\n      } else {\n        var checkboxWrapper = args.li.querySelector('.e-checkbox-wrapper');\n        target = checkboxWrapper ? checkboxWrapper.childNodes[1] : args.li.lastElementChild.childNodes[1];\n      }\n\n      if (this.parent.itemTemplate || this.parent.enableGroupCheckBox) {\n        target = args.li.firstElementChild.childNodes[1];\n      }\n\n      if (!isNullOrUndefined(target)) {\n        this.checkWrapper = closest(target, '.' + CHECKBOXWRAP$1);\n      }\n\n      if (!isNullOrUndefined(this.checkWrapper)) {\n        var checkElement = select('.' + CHECKBOXFRAME$1, this.checkWrapper);\n        var selectAll$$1 = false;\n        this.validateCheckNode(this.checkWrapper, checkElement.classList.contains(CHECK$1), args.li, args.e, selectAll$$1);\n      }\n    }\n  }, {\n    key: \"validateCheckNode\",\n    value: function validateCheckNode(checkWrap, isCheck, li, e, selectAll$$1) {\n      this.changeState(checkWrap, isCheck ? 'uncheck' : 'check', e, true, selectAll$$1);\n    }\n  }, {\n    key: \"clickHandler\",\n    value: function clickHandler(e) {\n      var target;\n\n      if (e.currentTarget.classList.contains(this.checkAllParent.className)) {\n        target = e.currentTarget.firstElementChild.lastElementChild;\n      } else {\n        target = e.currentTarget;\n      }\n\n      this.checkWrapper = closest(target, '.' + CHECKBOXWRAP$1);\n      var selectAll$$1 = true;\n\n      if (!isNullOrUndefined(this.checkWrapper)) {\n        var checkElement = select('.' + CHECKBOXFRAME$1, this.checkWrapper);\n        this.validateCheckNode(this.checkWrapper, checkElement.classList.contains(CHECK$1), null, e, selectAll$$1);\n      }\n\n      e.preventDefault();\n    }\n  }, {\n    key: \"changeState\",\n    value: function changeState(wrapper, state, e, isPrevent, selectAll$$1) {\n      var ariaState;\n      var frameSpan = wrapper.getElementsByClassName(CHECKBOXFRAME$1)[0];\n\n      if (state === 'check' && !frameSpan.classList.contains(CHECK$1)) {\n        frameSpan.classList.remove(INDETERMINATE);\n        frameSpan.classList.add(CHECK$1);\n        ariaState = 'true';\n\n        if (selectAll$$1) {\n          this.parent.selectAllItems(true, e);\n          this.setLocale(true);\n        }\n      } else if (state === 'uncheck' && (frameSpan.classList.contains(CHECK$1) || frameSpan.classList.contains(INDETERMINATE))) {\n        removeClass([frameSpan], [CHECK$1, INDETERMINATE]);\n        ariaState = 'false';\n\n        if (selectAll$$1) {\n          this.parent.selectAllItems(false, e);\n          this.setLocale();\n        }\n      } else if (state === 'indeterminate' && !frameSpan.classList.contains(INDETERMINATE)) {\n        removeClass([frameSpan], [CHECK$1]);\n        frameSpan.classList.add(INDETERMINATE);\n        ariaState = 'false';\n\n        if (selectAll$$1) {\n          this.parent.selectAllItems(false, e);\n          this.setLocale();\n        }\n      }\n\n      ariaState = state === 'check' ? 'true' : state === 'uncheck' ? 'false' : ariaState;\n\n      if (!isNullOrUndefined(ariaState)) {\n        wrapper.setAttribute('aria-checked', ariaState);\n      }\n    }\n  }, {\n    key: \"setSearchBox\",\n    value: function setSearchBox(args) {\n      if (isNullOrUndefined(this.parent.filterParent)) {\n        this.parent.filterParent = this.parent.createElement('span', {\n          className: filterParent\n        });\n        this.filterInput = this.parent.createElement('input', {\n          attrs: {\n            type: 'text'\n          },\n          className: filterInput\n        });\n        this.parent.element.parentNode.insertBefore(this.filterInput, this.parent.element);\n        var backIcon = false;\n\n        if (Browser.isDevice) {\n          backIcon = true;\n          this.parent.mobFilter = false;\n        }\n\n        this.filterInputObj = Input.createInput({\n          element: this.filterInput,\n          buttons: backIcon ? [searchBackIcon, filterBarClearIcon] : [filterBarClearIcon],\n          properties: {\n            placeholder: this.parent.filterBarPlaceholder\n          }\n        }, this.parent.createElement);\n\n        if (!isNullOrUndefined(this.parent.cssClass)) {\n          if (this.parent.cssClass.split(' ').indexOf('e-outline') !== -1) {\n            addClass([this.filterInputObj.container], 'e-outline');\n          } else if (this.parent.cssClass.split(' ').indexOf('e-filled') !== -1) {\n            addClass([this.filterInputObj.container], 'e-filled');\n          }\n        }\n\n        append([this.filterInputObj.container], this.parent.filterParent);\n        prepend([this.parent.filterParent], args.popupElement);\n        attributes(this.filterInput, {\n          'aria-disabled': 'false',\n          'aria-owns': this.parent.element.id + '_options',\n          'role': 'listbox',\n          'aria-activedescendant': null,\n          'autocomplete': 'off',\n          'autocorrect': 'off',\n          'autocapitalize': 'off',\n          'spellcheck': 'false'\n        });\n        this.clearIconElement = this.filterInput.parentElement.querySelector('.' + clearIcon);\n\n        if (!Browser.isDevice && this.clearIconElement) {\n          EventHandler.add(this.clearIconElement, 'mousedown', this.clearText, this);\n          this.clearIconElement.style.visibility = 'hidden';\n        }\n\n        EventHandler.add(this.filterInput, 'input', this.parent.onInput, this.parent);\n        EventHandler.add(this.filterInput, 'keyup', this.parent.keyUp, this.parent);\n        EventHandler.add(this.filterInput, 'keydown', this.parent.onKeyDown, this.parent);\n        EventHandler.add(this.filterInput, 'blur', this.onBlurHandler, this);\n        EventHandler.add(this.filterInput, 'paste', this.parent.pasteHandler, this.parent);\n        this.parent.searchBoxHeight = this.filterInputObj.container.parentElement.getBoundingClientRect().height;\n        return this.filterInputObj;\n      }\n    } // eslint-disable-next-line @typescript-eslint/no-unused-vars\n\n  }, {\n    key: \"clickOnBackIcon\",\n    value: function clickOnBackIcon(e) {\n      this.parent.hidePopup();\n      removeClass([document.body, this.parent.popupObj.element], popupFullScreen);\n      this.parent.inputElement.focus();\n    }\n  }, {\n    key: \"clearText\",\n    value: function clearText(e) {\n      this.parent.targetInputElement.value = '';\n\n      if (this.parent.allowFiltering && this.parent.targetInputElement.value === '') {\n        this.parent.search(null);\n      }\n\n      this.parent.refreshPopup();\n      this.parent.refreshListItems(null);\n      this.clearIconElement.style.visibility = 'hidden';\n      this.filterInput.focus();\n      this.setReorder(e);\n      e.preventDefault();\n    }\n  }, {\n    key: \"setDeviceSearchBox\",\n    value: function setDeviceSearchBox() {\n      this.parent.popupObj.element.classList.add(device);\n      this.parent.popupObj.element.classList.add(mobileFilter);\n      this.parent.popupObj.position = {\n        X: 0,\n        Y: 0\n      };\n      this.parent.popupObj.dataBind();\n      this.setSearchBoxPosition();\n      this.backIconElement = this.filterInputObj.container.querySelector('.e-back-icon');\n      this.clearIconElement = this.filterInputObj.container.querySelector('.' + clearIcon);\n      this.clearIconElement.style.visibility = 'hidden';\n      EventHandler.add(this.backIconElement, 'click', this.clickOnBackIcon, this);\n      EventHandler.add(this.clearIconElement, 'click', this.clearText, this);\n    }\n  }, {\n    key: \"setSearchBoxPosition\",\n    value: function setSearchBoxPosition() {\n      var searchBoxHeight = this.filterInput.parentElement.getBoundingClientRect().height;\n      var selectAllHeight = 0;\n\n      if (this.checkAllParent) {\n        selectAllHeight = this.checkAllParent.getBoundingClientRect().height;\n      }\n\n      this.parent.popupObj.element.style.maxHeight = '100%';\n      this.parent.popupObj.element.style.width = '100%';\n      this.parent.list.style.maxHeight = window.innerHeight - searchBoxHeight - selectAllHeight + 'px';\n      this.parent.list.style.height = window.innerHeight - searchBoxHeight - selectAllHeight + 'px';\n      var clearElement = this.filterInput.parentElement.querySelector('.' + clearIcon);\n      detach(this.filterInput);\n      clearElement.parentElement.insertBefore(this.filterInput, clearElement);\n    }\n  }, {\n    key: \"setPopupFullScreen\",\n    value: function setPopupFullScreen() {\n      attributes(this.parent.popupObj.element, {\n        style: 'left:0px;right:0px;top:0px;bottom:0px;'\n      });\n      addClass([document.body, this.parent.popupObj.element], popupFullScreen);\n      this.parent.popupObj.element.style.maxHeight = '100%';\n      this.parent.popupObj.element.style.width = '100%';\n    }\n  }, {\n    key: \"targetElement\",\n    value: function targetElement() {\n      if (!isNullOrUndefined(this.clearIconElement)) {\n        this.parent.targetInputElement = this.filterInput;\n        this.clearIconElement.style.visibility = this.parent.targetInputElement.value === '' ? 'hidden' : 'visible';\n      }\n\n      return this.parent.targetInputElement.value;\n    }\n  }, {\n    key: \"onBlurHandler\",\n    value: function onBlurHandler(e) {\n      if (!this.parent.element.classList.contains('e-listbox')) {\n        var target;\n\n        if (this.parent.keyAction) {\n          return;\n        }\n\n        if (Browser.isIE) {\n          target = !isNullOrUndefined(e) && e.target;\n        }\n\n        if (!Browser.isIE) {\n          target = !isNullOrUndefined(e) && e.relatedTarget;\n        } // eslint-disable-next-line max-len\n\n\n        if (this.parent.popupObj && document.body.contains(this.parent.popupObj.element) && this.parent.popupObj.element.contains(target) && !Browser.isIE && this.filterInput) {\n          this.filterInput.focus();\n          return;\n        }\n\n        if (this.parent.scrollFocusStatus && this.filterInput) {\n          e.preventDefault();\n          this.filterInput.focus();\n          this.parent.scrollFocusStatus = false;\n          return;\n        }\n\n        if (this.parent.popupObj && document.body.contains(this.parent.popupObj.element) && !this.parent.popupObj.element.classList.contains('e-popup-close')) {\n          this.parent.inputFocus = false;\n          this.parent.updateValueState(e, this.parent.value, this.parent.tempValues);\n          this.parent.dispatchEvent(this.parent.hiddenElement, 'change');\n        }\n\n        if (this.parent.popupObj && document.body.contains(this.parent.popupObj.element) && !this.parent.popupObj.element.classList.contains('e-popup-close')) {\n          this.parent.inputFocus = false;\n          this.parent.overAllWrapper.classList.remove(FOCUS$1);\n          this.parent.trigger('blur');\n          this.parent.focused = true;\n        }\n\n        if (this.parent.popupObj && document.body.contains(this.parent.popupObj.element) && !this.parent.popupObj.element.classList.contains('e-popup-close') && !Browser.isDevice) {\n          this.parent.hidePopup();\n        }\n      }\n    }\n  }, {\n    key: \"onDocumentClick\",\n    value: function onDocumentClick(e) {\n      if (this.parent.getLocaleName() !== 'listbox') {\n        var target = e.target;\n\n        if (!isNullOrUndefined(this.parent.popupObj) && closest(target, '[id=\"' + this.parent.popupObj.element.id + '\"]')) {\n          if (!(this.filterInput && this.filterInput.value !== '')) {\n            e.preventDefault();\n          }\n        }\n\n        if (!(!isNullOrUndefined(this.parent.popupObj) && closest(target, '[id=\"' + this.parent.popupObj.element.id + '\"]')) && !this.parent.overAllWrapper.contains(e.target)) {\n          if (this.parent.overAllWrapper.classList.contains(dropDownBaseClasses.focus) || this.parent.isPopupOpen()) {\n            this.parent.inputFocus = false;\n            this.parent.scrollFocusStatus = false;\n            this.parent.hidePopup();\n            this.parent.onBlurHandler(e, true);\n            this.parent.focused = true;\n          }\n        } else {\n          this.parent.scrollFocusStatus = (Browser.isIE || Browser.info.name === 'edge') && document.activeElement === this.filterInput;\n        }\n\n        if (!this.parent.overAllWrapper.contains(e.target) && this.parent.overAllWrapper.classList.contains('e-input-focus') && !this.parent.isPopupOpen()) {\n          if (Browser.isIE) {\n            this.parent.onBlurHandler();\n          } else {\n            this.parent.onBlurHandler(e);\n          }\n        }\n\n        if (this.filterInput === target) {\n          this.filterInput.focus();\n        }\n      }\n    }\n  }, {\n    key: \"getFocus\",\n    value: function getFocus(e) {\n      this.parent.overAllWrapper.classList.remove(FOCUS$1);\n\n      if (this.parent.keyAction && e.value !== 'clear' && e.value !== 'focus') {\n        this.parent.keyAction = false;\n        return;\n      }\n\n      if (e.value === 'focus') {\n        this.filterInput.focus();\n        this.parent.removeFocus();\n        EventHandler.remove(this.parent.list, 'keydown', this.parent.onKeyDown);\n      }\n\n      if (e.value === 'clear') {\n        this.filterInput.value = '';\n        this.clearIconElement.style.visibility = 'hidden';\n      }\n    }\n  }, {\n    key: \"checkSelectAll\",\n    value: function checkSelectAll(e) {\n      if (e.value === 'check' && this.checkAllParent.getAttribute('aria-checked') !== 'true') {\n        this.changeState(this.checkAllParent, e.value, null, null, false);\n        this.setLocale(true);\n      }\n\n      if (e.value === 'uncheck') {\n        this.changeState(this.checkAllParent, e.value, null, null, false);\n        this.setLocale();\n      }\n\n      if (e.value === 'indeterminate') {\n        this.changeState(this.checkAllParent, e.value, null, null, false);\n        this.setLocale();\n      }\n    }\n  }, {\n    key: \"setLocale\",\n    value: function setLocale(unSelect) {\n      if (this.parent.selectAllText !== 'Select All' || this.parent.unSelectAllText !== 'Unselect All') {\n        var template = unSelect ? this.parent.unSelectAllText : this.parent.selectAllText;\n        this.selectAllSpan.textContent = '';\n        var compiledString = compile(template);\n        var templateName = unSelect ? 'unSelectAllText' : 'selectAllText';\n\n        var _iterator9 = _createForOfIteratorHelper(compiledString({}, this.parent, templateName, null, !this.parent.isStringTemplate)),\n            _step9;\n\n        try {\n          for (_iterator9.s(); !(_step9 = _iterator9.n()).done;) {\n            var item = _step9.value;\n            this.selectAllSpan.textContent = item.textContent;\n          }\n        } catch (err) {\n          _iterator9.e(err);\n        } finally {\n          _iterator9.f();\n        }\n      } else {\n        var l10nLocale = {\n          selectAllText: 'Select All',\n          unSelectAllText: 'Unselect All'\n        };\n        var l10n = new L10n(this.parent.getLocaleName(), {}, this.parent.locale);\n\n        if (l10n.getConstant('selectAllText') === '') {\n          l10n = new L10n('dropdowns', l10nLocale, this.parent.locale);\n        }\n\n        this.selectAllSpan.textContent = unSelect ? l10n.getConstant('unSelectAllText') : l10n.getConstant('selectAllText');\n      }\n    }\n  }, {\n    key: \"getActiveList\",\n    value: function getActiveList(args) {\n      if (args.li.classList.contains('e-active')) {\n        this.activeLi.push(args.li.cloneNode(true));\n      } else {\n        this.activeLi.splice(args.index, 1);\n      }\n    } // eslint-disable-next-line @typescript-eslint/no-unused-vars\n\n  }, {\n    key: \"setReorder\",\n    value: function setReorder(args) {\n      if (this.parent.enableSelectionOrder && !isNullOrUndefined(this.parent.value)) {\n        var activeLiCount = this.parent.ulElement.querySelectorAll('li.e-active').length;\n        var remLi;\n        var ulEle = this.parent.createElement('ul', {\n          className: 'e-list-parent e-ul e-reorder'\n        });\n\n        if (activeLiCount > 0) {\n          append(this.parent.ulElement.querySelectorAll('li.e-active'), ulEle);\n          remLi = this.parent.ulElement.querySelectorAll('li.e-active');\n          addClass(remLi, 'e-reorder-hide');\n          prepend([ulEle], this.parent.list);\n        }\n\n        this.parent.focusAtFirstListItem();\n      }\n    }\n  }]);\n\n  return CheckBoxSelection;\n}();\n/**\n * export all modules from current location\n */\n\n\nvar __decorate$6 = undefined && undefined.__decorate || function (decorators, target, key, desc) {\n  var c = arguments.length,\n      r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc,\n      d;\n  if (typeof Reflect === \"object\" && typeof Reflect.decorate === \"function\") r = Reflect.decorate(decorators, target, key, desc);else for (var i = decorators.length - 1; i >= 0; i--) {\n    if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;\n  }\n  return c > 3 && r && Object.defineProperty(target, key, r), r;\n};\n\nvar ListBox_1; // eslint-disable-next-line @typescript-eslint/triple-slash-reference\n/// <reference path='../drop-down-base/drop-down-base-model.d.ts'/>\n\n/**\n * Defines the Selection settings of List Box.\n */\n\nvar SelectionSettings = /*#__PURE__*/function (_ChildProperty4) {\n  _inherits(SelectionSettings, _ChildProperty4);\n\n  var _super10 = _createSuper(SelectionSettings);\n\n  function SelectionSettings() {\n    _classCallCheck(this, SelectionSettings);\n\n    return _super10.apply(this, arguments);\n  }\n\n  return SelectionSettings;\n}(ChildProperty);\n\n__decorate$6([Property('Multiple')], SelectionSettings.prototype, \"mode\", void 0);\n\n__decorate$6([Property(false)], SelectionSettings.prototype, \"showCheckbox\", void 0);\n\n__decorate$6([Property(false)], SelectionSettings.prototype, \"showSelectAll\", void 0);\n\n__decorate$6([Property('Left')], SelectionSettings.prototype, \"checkboxPosition\", void 0);\n/**\n * Defines the toolbar settings of List Box.\n */\n\n\nvar ToolbarSettings = /*#__PURE__*/function (_ChildProperty5) {\n  _inherits(ToolbarSettings, _ChildProperty5);\n\n  var _super11 = _createSuper(ToolbarSettings);\n\n  function ToolbarSettings() {\n    _classCallCheck(this, ToolbarSettings);\n\n    return _super11.apply(this, arguments);\n  }\n\n  return ToolbarSettings;\n}(ChildProperty);\n\n__decorate$6([Property([])], ToolbarSettings.prototype, \"items\", void 0);\n\n__decorate$6([Property('Right')], ToolbarSettings.prototype, \"position\", void 0);\n/**\n * The ListBox is a graphical user interface component used to display a list of items.\n * Users can select one or more items in the list using a checkbox or by keyboard selection.\n * It supports sorting, grouping, reordering and drag and drop of items.\n * ```html\n * <select id=\"listbox\">\n *      <option value='1'>Badminton</option>\n *      <option value='2'>Basketball</option>\n *      <option value='3'>Cricket</option>\n *      <option value='4'>Football</option>\n *      <option value='5'>Tennis</option>\n * </select>\n * ```\n * ```typescript\n * <script>\n *   var listObj = new ListBox();\n *   listObj.appendTo(\"#listbox\");\n * </script>\n * ```\n */\n\n\nvar ListBox = ListBox_1 = /*#__PURE__*/function (_DropDownBase3) {\n  _inherits(ListBox, _DropDownBase3);\n\n  var _super12 = _createSuper(ListBox);\n\n  /**\n   * Constructor for creating the ListBox component.\n   *\n   * @param {ListBoxModel} options - Specifies ListBox model\n   * @param {string | HTMLElement} element - Specifies the element.\n   */\n  function ListBox(options, element) {\n    var _this46;\n\n    _classCallCheck(this, ListBox);\n\n    _this46 = _super12.call(this, options, element);\n    _this46.isValidKey = false;\n    _this46.isDataSourceUpdate = false;\n    _this46.keyDownStatus = false;\n    return _this46;\n  }\n  /**\n   * Adds a new item to the popup list. By default, new item appends to the list as the last item,\n   * but you can insert based on the index parameter.\n   *\n   * @param  { Object[] } items - Specifies an array of JSON data or a JSON data.\n   * @param { number } itemIndex - Specifies the index to place the newly added item in the popup list.\n   * @returns {void}.\n   * @private\n   */\n\n\n  _createClass(ListBox, [{\n    key: \"addItem\",\n    value: function addItem(items, itemIndex) {\n      _get(_getPrototypeOf(ListBox.prototype), \"addItem\", this).call(this, items, itemIndex);\n    }\n    /**\n     * Build and render the component.\n     *\n     * @private\n     * @returns {void}\n     */\n\n  }, {\n    key: \"render\",\n    value: function render() {\n      this.inputString = '';\n      this.initLoad = true;\n      this.isCustomFiltering = false;\n      this.initialSelectedOptions = this.value;\n\n      _get(_getPrototypeOf(ListBox.prototype), \"render\", this).call(this);\n\n      this.renderComplete();\n    }\n  }, {\n    key: \"initWrapper\",\n    value: function initWrapper() {\n      var hiddenSelect = this.createElement('select', {\n        className: 'e-hidden-select',\n        attrs: {\n          'multiple': ''\n        }\n      });\n      this.list.classList.add('e-listbox-wrapper');\n\n      if (this.itemTemplate) {\n        this.list.classList.add('e-list-template');\n      }\n\n      this.list.classList.add('e-wrapper');\n      this.list.classList.add('e-lib');\n\n      if (this.element.tagName === 'EJS-LISTBOX') {\n        this.element.setAttribute('tabindex', '0');\n\n        if (this.initLoad) {\n          this.element.appendChild(this.list);\n        }\n      } else {\n        if (this.initLoad) {\n          this.element.parentElement.insertBefore(this.list, this.element);\n        }\n\n        this.list.insertBefore(this.element, this.list.firstChild);\n        this.element.style.display = 'none';\n      }\n\n      this.list.insertBefore(hiddenSelect, this.list.firstChild);\n\n      if (this.list.getElementsByClassName('e-list-item')[0]) {\n        this.list.getElementsByClassName('e-list-item')[0].classList.remove(dropDownBaseClasses.focus);\n      }\n\n      if (this.itemTemplate) {\n        this.renderReactTemplates();\n      }\n\n      removeClass([this.list], [dropDownBaseClasses.content, dropDownBaseClasses.root]);\n      this.validationAttribute(this.element, hiddenSelect);\n      this.list.setAttribute('role', 'listbox');\n      attributes(this.list, {\n        'role': 'listbox',\n        'aria-multiselectable': this.selectionSettings.mode === 'Multiple' ? 'true' : 'false'\n      });\n      this.updateSelectionSettings();\n    }\n  }, {\n    key: \"updateSelectionSettings\",\n    value: function updateSelectionSettings() {\n      if (this.selectionSettings.showCheckbox && this.selectionSettings.showSelectAll && this.liCollections.length) {\n        var l10nSelect = new L10n(this.getModuleName(), {\n          selectAllText: 'Select All',\n          unSelectAllText: 'Unselect All'\n        }, this.locale);\n        this.showSelectAll = true;\n        this.selectAllText = l10nSelect.getConstant('selectAllText');\n        this.unSelectAllText = l10nSelect.getConstant('unSelectAllText');\n        this.popupWrapper = this.list;\n        this.checkBoxSelectionModule.checkAllParent = null;\n        this.notify('selectAll', {});\n      }\n    }\n  }, {\n    key: \"initDraggable\",\n    value: function initDraggable() {\n      var _this47 = this;\n\n      if (this.ulElement) {\n        this.ulElement.id = this.element.id + '_parent';\n      }\n\n      if (this.allowDragAndDrop) {\n        new Sortable(this.ulElement, {\n          scope: this.scope,\n          itemClass: 'e-list-item',\n          dragStart: this.triggerDragStart.bind(this),\n          drag: this.triggerDrag.bind(this),\n          beforeDrop: this.beforeDragEnd.bind(this),\n          drop: this.dragEnd.bind(this),\n          placeHolder: function placeHolder() {\n            return _this47.createElement('span', {\n              className: 'e-placeholder'\n            });\n          },\n          helper: function helper(e) {\n            var wrapper = _this47.list.cloneNode();\n\n            var ele = e.sender.cloneNode(true);\n            wrapper.appendChild(ele);\n\n            var refEle = _this47.getItems()[0];\n\n            wrapper.style.width = refEle.offsetWidth + 'px';\n            wrapper.style.height = refEle.offsetHeight + 'px';\n\n            if ((_this47.value && _this47.value.length) > 1 && _this47.isSelected(ele)) {\n              ele.appendChild(_this47.createElement('span', {\n                className: 'e-list-badge',\n                innerHTML: _this47.value.length + ''\n              }));\n            }\n\n            wrapper.style.zIndex = getZindexPartial(_this47.element) + '';\n            return wrapper;\n          }\n        });\n      }\n    }\n  }, {\n    key: \"updateActionCompleteData\",\n    value: function updateActionCompleteData(li, item) {\n      this.jsonData.push(item);\n    }\n  }, {\n    key: \"initToolbar\",\n    value: function initToolbar() {\n      var pos = this.toolbarSettings.position;\n      var prevScope = this.element.getAttribute('data-value');\n\n      if (this.toolbarSettings.items.length) {\n        var toolElem = this.createElement('div', {\n          className: 'e-listbox-tool',\n          attrs: {\n            'role': 'toolbar'\n          }\n        });\n        var wrapper = this.createElement('div', {\n          className: 'e-listboxtool-wrapper e-lib e-' + pos.toLowerCase()\n        });\n        this.list.parentElement.insertBefore(wrapper, this.list);\n        wrapper.appendChild(pos === 'Right' ? this.list : toolElem);\n        wrapper.appendChild(pos === 'Right' ? toolElem : this.list);\n        this.createButtons(toolElem);\n\n        if (!this.element.id) {\n          this.element.id = getUniqueID('e-' + this.getModuleName());\n        }\n\n        if (this.scope) {\n          document.querySelector(this.scope).setAttribute('data-value', this.element.id);\n        } else {\n          this.updateToolBarState();\n        }\n      }\n\n      var scope = this.element.getAttribute('data-value');\n\n      if (prevScope && scope && prevScope !== scope) {\n        this.tBListBox = _getComponent(document.getElementById(prevScope), this.getModuleName());\n        this.tBListBox.updateToolBarState();\n      } else if (scope) {\n        this.tBListBox = _getComponent(document.getElementById(scope), this.getModuleName());\n        this.tBListBox.updateToolBarState();\n      }\n    }\n  }, {\n    key: \"createButtons\",\n    value: function createButtons(toolElem) {\n      var _this48 = this;\n\n      var btn;\n      var ele;\n      var title;\n      var l10n = new L10n(this.getModuleName(), {\n        moveUp: 'Move Up',\n        moveDown: 'Move Down',\n        moveTo: 'Move To',\n        moveFrom: 'Move From',\n        moveAllTo: 'Move All To',\n        moveAllFrom: 'Move All From'\n      }, this.locale);\n      this.toolbarSettings.items.forEach(function (value) {\n        title = l10n.getConstant(value);\n        ele = _this48.createElement('button', {\n          attrs: {\n            'type': 'button',\n            'data-value': value,\n            'title': title,\n            'aria-label': title\n          }\n        });\n        toolElem.appendChild(ele);\n        btn = new Button({\n          iconCss: 'e-icons e-' + value.toLowerCase()\n        }, ele);\n        btn.createElement = _this48.createElement;\n      });\n    }\n  }, {\n    key: \"validationAttribute\",\n    value: function validationAttribute(input, hiddenSelect) {\n      _get(_getPrototypeOf(ListBox.prototype), \"validationAttribute\", this).call(this, input, hiddenSelect);\n\n      hiddenSelect.required = input.required;\n      input.required = false;\n    }\n  }, {\n    key: \"setHeight\",\n    value: function setHeight() {\n      var ele = this.toolbarSettings.items.length ? this.list.parentElement : this.list;\n      ele.style.height = formatUnit(this.height);\n\n      if (this.allowFiltering && this.height.toString().indexOf('%') < 0) {\n        addClass([this.list], 'e-filter-list');\n      } else {\n        removeClass([this.list], 'e-filter-list');\n      }\n    }\n  }, {\n    key: \"setCssClass\",\n    value: function setCssClass() {\n      var wrap = this.toolbarSettings.items.length ? this.list.parentElement : this.list;\n\n      if (this.cssClass) {\n        addClass([wrap], this.cssClass.split(' '));\n      }\n\n      if (this.enableRtl) {\n        addClass([this.list], 'e-rtl');\n      }\n    }\n  }, {\n    key: \"setEnable\",\n    value: function setEnable() {\n      var ele = this.toolbarSettings.items.length ? this.list.parentElement : this.list;\n\n      if (this.enabled) {\n        removeClass([ele], cssClass.disabled);\n      } else {\n        addClass([ele], cssClass.disabled);\n      }\n    }\n  }, {\n    key: \"showSpinner\",\n    value: function showSpinner() {\n      if (!this.spinner) {\n        this.spinner = this.createElement('div', {\n          className: 'e-listbox-wrapper'\n        });\n      }\n\n      this.spinner.style.height = formatUnit(this.height);\n      this.element.parentElement.insertBefore(this.spinner, this.element.nextSibling);\n      createSpinner({\n        target: this.spinner\n      }, this.createElement);\n\n      _showSpinner(this.spinner);\n    }\n  }, {\n    key: \"hideSpinner\",\n    value: function hideSpinner() {\n      if (this.spinner.querySelector('.e-spinner-pane')) {\n        _hideSpinner(this.spinner);\n      }\n\n      if (this.spinner.parentElement) {\n        detach(this.spinner);\n      }\n    }\n  }, {\n    key: \"onInput\",\n    value: function onInput() {\n      this.isDataSourceUpdate = false;\n\n      if (this.keyDownStatus) {\n        this.isValidKey = true;\n      } else {\n        this.isValidKey = false;\n      }\n\n      this.keyDownStatus = false;\n      this.refreshClearIcon();\n    }\n  }, {\n    key: \"clearText\",\n    value: function clearText() {\n      this.filterInput.value = '';\n      this.refreshClearIcon();\n      var event = document.createEvent('KeyboardEvent');\n      this.isValidKey = true;\n      this.KeyUp(event);\n    }\n  }, {\n    key: \"refreshClearIcon\",\n    value: function refreshClearIcon() {\n      if (this.filterInput.parentElement.querySelector('.' + listBoxClasses.clearIcon)) {\n        var clearElement = this.filterInput.parentElement.querySelector('.' + listBoxClasses.clearIcon);\n        clearElement.style.visibility = this.filterInput.value === '' ? 'hidden' : 'visible';\n      }\n    }\n  }, {\n    key: \"onActionComplete\",\n    value: function onActionComplete(ulElement, list, e) {\n      var searchEle;\n\n      if (this.allowFiltering && this.list.getElementsByClassName('e-filter-parent')[0]) {\n        searchEle = this.list.getElementsByClassName('e-filter-parent')[0].cloneNode(true);\n      }\n\n      if (list.length === 0) {\n        var noRecElem = ulElement.childNodes[0];\n\n        if (noRecElem) {\n          ulElement.removeChild(noRecElem);\n        }\n      }\n\n      _get(_getPrototypeOf(ListBox.prototype), \"onActionComplete\", this).call(this, ulElement, list, e);\n\n      if (this.allowFiltering && !isNullOrUndefined(searchEle)) {\n        this.list.insertBefore(searchEle, this.list.firstElementChild);\n        this.filterParent = this.list.getElementsByClassName('e-filter-parent')[0];\n        this.filterWireEvents(searchEle);\n      }\n\n      this.initWrapper();\n      this.setSelection();\n      this.initDraggable();\n      this.mainList = this.ulElement;\n\n      if (this.initLoad) {\n        this.jsonData = [];\n        extend(this.jsonData, list, []);\n        this.initToolbarAndStyles();\n        this.wireEvents();\n\n        if (this.showCheckbox) {\n          this.setCheckboxPosition();\n        }\n\n        if (this.allowFiltering) {\n          this.setFiltering();\n        }\n      } else {\n        if (this.isDataSourceUpdate) {\n          this.jsonData = [];\n          extend(this.jsonData, list, []);\n          this.isDataSourceUpdate = false;\n        }\n\n        if (this.allowFiltering) {\n          var filterElem = this.list.getElementsByClassName('e-input-filter')[0];\n          var txtLength = this.filterInput.value.length;\n          filterElem.selectionStart = txtLength;\n          filterElem.selectionEnd = txtLength;\n          filterElem.focus();\n        }\n      }\n\n      if (this.toolbarSettings.items.length && this.scope && this.scope.indexOf('#') > -1 && !isNullOrUndefined(e)) {\n        var scope = this.scope.replace('#', '');\n\n        var scopedLB = _getComponent(document.getElementById(scope), this.getModuleName());\n\n        scopedLB.initToolbar();\n      }\n\n      this.initLoad = false;\n    }\n  }, {\n    key: \"initToolbarAndStyles\",\n    value: function initToolbarAndStyles() {\n      this.initToolbar();\n      this.setCssClass();\n      this.setEnable();\n      this.setHeight();\n    }\n  }, {\n    key: \"triggerDragStart\",\n    value: function triggerDragStart(args) {\n      var _this49 = this;\n\n      var badge;\n      args = extend(this.getDragArgs(args), {\n        dragSelected: true\n      });\n\n      if (Browser.isIos) {\n        this.list.style.overflow = 'hidden';\n      }\n\n      this.trigger('dragStart', args, function (dragEventArgs) {\n        _this49.allowDragAll = dragEventArgs.dragSelected;\n\n        if (!_this49.allowDragAll) {\n          badge = _this49.ulElement.getElementsByClassName('e-list-badge')[0];\n\n          if (badge) {\n            detach(badge);\n          }\n        }\n      });\n    }\n  }, {\n    key: \"triggerDrag\",\n    value: function triggerDrag(args) {\n      this.trigger('drag', this.getDragArgs(args));\n      var listObj = this.getComponent(args.target);\n\n      if (listObj && listObj.listData.length === 0) {\n        var noRecElem = listObj.ulElement.childNodes[0];\n\n        if (noRecElem) {\n          listObj.ulElement.removeChild(noRecElem);\n        }\n      }\n    }\n  }, {\n    key: \"beforeDragEnd\",\n    value: function beforeDragEnd(args) {\n      var dragValue = this.getFormattedValue(args.droppedElement.getAttribute('data-value'));\n\n      if (this.value.indexOf(dragValue) > -1) {\n        args.items = this.getDataByValues(this.value);\n      } else {\n        args.items = this.getDataByValues([dragValue]);\n      }\n\n      this.trigger('beforeDrop', args);\n\n      if (args.isDragAll !== null) {\n        this.allowDragAll = args.isDragAll;\n      }\n    }\n  }, {\n    key: \"dragEnd\",\n    value: function dragEnd(args) {\n      var _this50 = this;\n\n      var listData;\n      var liColl;\n      var jsonData;\n      var droppedData;\n      var selectedOptions;\n      var sortedData;\n      var dropValue = this.getFormattedValue(args.droppedElement.getAttribute('data-value'));\n      var listObj = this.getComponent(args.droppedElement);\n      var getArgs = this.getDragArgs({\n        target: args.droppedElement\n      }, true);\n      var sourceArgs = {\n        previousData: this.dataSource\n      };\n      var destArgs = {\n        previousData: listObj.dataSource\n      };\n      var dragArgs = extend({}, getArgs, {\n        target: args.target,\n        source: {\n          previousData: this.dataSource\n        },\n        previousIndex: args.previousIndex,\n        currentIndex: args.currentIndex\n      });\n\n      if (listObj !== this) {\n        var sourceArgs1 = extend(sourceArgs, {\n          currentData: this.listData\n        });\n        dragArgs = extend(dragArgs, {\n          source: sourceArgs1,\n          destination: destArgs\n        });\n      }\n\n      if (Browser.isIos) {\n        this.list.style.overflow = '';\n      }\n\n      if (listObj === this) {\n        var ul = this.ulElement;\n        listData = [].slice.call(this.listData);\n        liColl = [].slice.call(this.liCollections);\n        jsonData = [].slice.call(this.jsonData);\n        sortedData = [].slice.call(this.sortedData);\n        var toSortIdx = args.currentIndex;\n        var toIdx = args.currentIndex = this.getCurIdx(this, args.currentIndex);\n        var rIdx = listData.indexOf(this.getDataByValue(dropValue));\n        var jsonIdx = jsonData.indexOf(this.getDataByValue(dropValue));\n        var sIdx = sortedData.indexOf(this.getDataByValue(dropValue));\n        listData.splice(toIdx, 0, listData.splice(rIdx, 1)[0]);\n        sortedData.splice(toSortIdx, 0, sortedData.splice(sIdx, 1)[0]);\n        jsonData.splice(toIdx, 0, jsonData.splice(jsonIdx, 1)[0]);\n        liColl.splice(toIdx, 0, liColl.splice(rIdx, 1)[0]);\n\n        if (this.allowDragAll) {\n          selectedOptions = this.value && Array.prototype.indexOf.call(this.value, dropValue) > -1 ? this.value : [dropValue];\n          selectedOptions.forEach(function (value) {\n            if (value !== dropValue) {\n              var idx = listData.indexOf(_this50.getDataByValue(value));\n\n              var _jsonIdx = jsonData.indexOf(_this50.getDataByValue(value));\n\n              var _sIdx = sortedData.indexOf(_this50.getDataByValue(value));\n\n              if (idx > toIdx) {\n                toIdx++;\n              }\n\n              jsonData.splice(toIdx, 0, jsonData.splice(_jsonIdx, 1)[0]);\n              listData.splice(toIdx, 0, listData.splice(idx, 1)[0]);\n              sortedData.splice(toSortIdx, 0, sortedData.splice(_sIdx, 1)[0]);\n              liColl.splice(toIdx, 0, liColl.splice(idx, 1)[0]);\n              ul.insertBefore(_this50.getItems()[_this50.getIndexByValue(value)], ul.getElementsByClassName('e-placeholder')[0]);\n            }\n          });\n        }\n\n        this.listData = listData;\n        this.jsonData = jsonData;\n        this.sortedData = sortedData;\n        this.liCollections = liColl;\n      } else {\n        var li;\n        var fLiColl = [].slice.call(this.liCollections);\n        var currIdx = args.currentIndex = this.getCurIdx(listObj, args.currentIndex);\n        var _ul = listObj.ulElement;\n        listData = [].slice.call(listObj.listData);\n        liColl = [].slice.call(listObj.liCollections);\n        jsonData = [].slice.call(listObj.jsonData);\n        sortedData = [].slice.call(listObj.sortedData);\n        selectedOptions = this.value && Array.prototype.indexOf.call(this.value, dropValue) > -1 && this.allowDragAll ? this.value : [dropValue];\n        var fListData = [].slice.call(this.listData);\n        var fSortData = [].slice.call(this.sortedData);\n        selectedOptions.forEach(function (value, index) {\n          droppedData = _this50.getDataByValue(value);\n\n          var srcIdx = _this50.listData.indexOf(droppedData);\n\n          var jsonSrcIdx = _this50.jsonData.indexOf(droppedData);\n\n          var sortIdx = _this50.sortedData.indexOf(droppedData);\n\n          fListData.splice(srcIdx, 1);\n\n          _this50.jsonData.splice(jsonSrcIdx, 1);\n\n          fSortData.splice(sortIdx, 1);\n          _this50.listData = fListData;\n          _this50.sortedData = fSortData;\n          var destIdx = value === dropValue ? args.currentIndex : currIdx;\n          listData.splice(destIdx, 0, droppedData);\n          jsonData.splice(destIdx, 0, droppedData);\n          sortedData.splice(destIdx, 0, droppedData);\n          liColl.splice(destIdx, 0, fLiColl.splice(srcIdx, 1)[0]);\n\n          if (!value) {\n            var liCollElem = _this50.getItems();\n\n            for (var i = 0; i < liCollElem.length; i++) {\n              if (liCollElem[i].getAttribute('data-value') === null && liCollElem[i].classList.contains('e-list-item')) {\n                li = liCollElem[i];\n                break;\n              }\n            }\n          } else {\n            li = _this50.getItems()[_this50.getIndexByValue(value)];\n          }\n\n          if (!li) {\n            li = args.helper;\n          }\n\n          _this50.removeSelected(_this50, value === dropValue ? [args.droppedElement] : [li]);\n\n          _ul.insertBefore(li, _ul.getElementsByClassName('e-placeholder')[0]);\n\n          currIdx++;\n        });\n\n        if (this.fields.groupBy) {\n          var sourceElem = this.renderItems(this.listData, this.fields);\n          this.updateListItems(sourceElem, this.ulElement);\n          this.setSelection();\n        }\n\n        if (listObj.sortOrder !== 'None' || this.selectionSettings.showCheckbox !== listObj.selectionSettings.showCheckbox || listObj.fields.groupBy || listObj.itemTemplate || this.itemTemplate) {\n          var sortable = _getComponent(_ul, 'sortable');\n\n          var _sourceElem = listObj.renderItems(listData, listObj.fields);\n\n          listObj.updateListItems(_sourceElem, _ul);\n          this.setSelection();\n\n          if (sortable.placeHolderElement) {\n            _ul.appendChild(sortable.placeHolderElement);\n          }\n\n          _ul.appendChild(args.helper);\n\n          listObj.setSelection();\n        }\n\n        this.liCollections = fLiColl;\n        listObj.liCollections = liColl;\n        listObj.jsonData = extend([], [], jsonData, false);\n        listObj.listData = extend([], [], listData, false);\n        listObj.sortedData = extend([], [], sortedData, false);\n\n        if (this.listData.length === 0) {\n          this.l10nUpdate();\n        }\n      }\n\n      if (this === listObj) {\n        var _sourceArgs = extend(sourceArgs, {\n          currentData: listData\n        });\n\n        dragArgs = extend(dragArgs, {\n          source: _sourceArgs\n        });\n      } else {\n        var dragArgs1 = extend(destArgs, {\n          currentData: listData\n        });\n        dragArgs = extend(dragArgs, {\n          destination: dragArgs1\n        });\n      }\n\n      this.trigger('drop', dragArgs);\n    }\n  }, {\n    key: \"updateListItems\",\n    value: function updateListItems(sourceElem, destElem) {\n      var i = 0;\n      destElem.innerHTML = \"\";\n\n      while (i < sourceElem.childNodes.length) {\n        destElem.appendChild(sourceElem.childNodes[i]);\n      }\n    }\n  }, {\n    key: \"removeSelected\",\n    value: function removeSelected(listObj, elems) {\n      if (listObj.selectionSettings.showCheckbox) {\n        elems.forEach(function (ele) {\n          ele.getElementsByClassName('e-frame')[0].classList.remove('e-check');\n        });\n      } else {\n        removeClass(elems, cssClass.selected);\n      }\n    }\n  }, {\n    key: \"getCurIdx\",\n    value: function getCurIdx(listObj, idx) {\n      if (listObj.fields.groupBy) {\n        idx -= [].slice.call(listObj.ulElement.children).slice(0, idx).filter(function (ele) {\n          return ele.classList.contains(cssClass.group);\n        }).length;\n      }\n\n      return idx;\n    }\n  }, {\n    key: \"getComponent\",\n    value: function getComponent(li) {\n      var listObj;\n      var ele = this.element.tagName === 'EJS-LISTBOX' ? closest(li, '.e-listbox') : closest(li, '.e-listbox-wrapper') && closest(li, '.e-listbox-wrapper').querySelector('.e-listbox');\n\n      if (ele) {\n        listObj = _getComponent(ele, this.getModuleName());\n      }\n\n      return listObj;\n    }\n  }, {\n    key: \"listOption\",\n    value: function listOption(dataSource, fields) {\n      this.listCurrentOptions = _get(_getPrototypeOf(ListBox.prototype), \"listOption\", this).call(this, dataSource, fields);\n      this.listCurrentOptions = extend({}, this.listCurrentOptions, {\n        itemCreated: this.triggerBeforeItemRender.bind(this)\n      }, true);\n      this.notify('listoption', {\n        module: 'CheckBoxSelection'\n      });\n      return this.listCurrentOptions;\n    }\n  }, {\n    key: \"triggerBeforeItemRender\",\n    value: function triggerBeforeItemRender(e) {\n      e.item.setAttribute('tabindex', '-1');\n      this.trigger('beforeItemRender', {\n        element: e.item,\n        item: e.curData\n      });\n    }\n  }, {\n    key: \"requiredModules\",\n    value: function requiredModules() {\n      var modules = [];\n\n      if (this.selectionSettings.showCheckbox) {\n        modules.push({\n          member: 'CheckBoxSelection',\n          args: [this]\n        });\n      }\n\n      return modules;\n    }\n    /**\n     * This method is used to enable or disable the items in the ListBox based on the items and enable argument.\n     *\n     * @param {string[]} items - Text items that needs to be enabled/disabled.\n     * @param {boolean} enable - Set `true`/`false` to enable/disable the list items.\n     * @param {boolean} isValue - Set `true` if `items` parameter is a array of unique values.\n     * @returns {void}\n     */\n\n  }, {\n    key: \"enableItems\",\n    value: function enableItems(items) {\n      var _this51 = this;\n\n      var enable = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : true;\n      var isValue = arguments.length > 2 ? arguments[2] : undefined;\n      var li;\n      items.forEach(function (item) {\n        var text = item;\n        li = _this51.findListElement(_this51.list, 'li', 'data-value', isValue ? text : _this51.getValueByText(text));\n\n        if (!li) {\n          return;\n        }\n\n        if (enable) {\n          removeClass([li], cssClass.disabled);\n          li.removeAttribute('aria-disabled');\n        } else {\n          addClass([li], cssClass.disabled);\n          li.setAttribute('aria-disabled', 'true');\n        }\n      });\n    }\n    /**\n     * Based on the state parameter, specified list item will be selected/deselected.\n     *\n     * @param {string[]} items - Array of text value of the item.\n     * @param {boolean} state - Set `true`/`false` to select/un select the list items.\n     * @param {boolean} isValue - Set `true` if `items` parameter is a array of unique values.\n     * @returns {void}\n     */\n\n  }, {\n    key: \"selectItems\",\n    value: function selectItems(items) {\n      var state = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : true;\n      var isValue = arguments.length > 2 ? arguments[2] : undefined;\n      this.setSelection(items, state, !isValue);\n      this.updateSelectedOptions();\n    }\n    /**\n     * Based on the state parameter, entire list item will be selected/deselected.\n     *\n     * @param {boolean} state - Set `true`/`false` to select/un select the entire list items.\n     * @returns {void}\n     */\n\n  }, {\n    key: \"selectAll\",\n    value: function selectAll() {\n      var state = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : true;\n      this.selectAllItems(state);\n    }\n    /**\n     * Adds a new item to the list. By default, new item appends to the list as the last item,\n     * but you can insert based on the index parameter.\n     *\n     * @param  { Object[] } items - Specifies an array of JSON data or a JSON data.\n     * @param { number } itemIndex - Specifies the index to place the newly added item in the list.\n     * @returns {void}.\n     */\n\n  }, {\n    key: \"addItems\",\n    value: function addItems(items, itemIndex) {\n      _get(_getPrototypeOf(ListBox.prototype), \"addItem\", this).call(this, items, itemIndex);\n    }\n    /**\n     * Removes a item from the list. By default, removed the last item in the list,\n     * but you can remove based on the index parameter.\n     *\n     * @param  { Object[] } items - Specifies an array of JSON data or a JSON data.\n     * @param { number } itemIndex - Specifies the index to remove the item from the list.\n     * @returns {void}.\n     */\n\n  }, {\n    key: \"removeItems\",\n    value: function removeItems(items, itemIndex) {\n      this.removeItem(items, itemIndex);\n    }\n    /**\n     * Removes a item from the list. By default, removed the last item in the list,\n     * but you can remove based on the index parameter.\n     *\n     * @param  { Object[] } items - Specifies an array of JSON data or a JSON data.\n     * @param { number } itemIndex - Specifies the index to remove the item from the list.\n     * @returns {void}.\n     */\n\n  }, {\n    key: \"removeItem\",\n    value: function removeItem(items, itemIndex) {\n      var liCollections = [];\n      var liElement = this.list.querySelectorAll('.' + dropDownBaseClasses.li);\n\n      if (items) {\n        items = items instanceof Array ? items : [items];\n        var fields = this.fields;\n        var dataValue;\n        var objValue;\n        var dupData = [];\n        var itemIdx;\n        extend(dupData, [], this.listData);\n        var removeIdxes = [];\n        var removeLiIdxes = [];\n\n        for (var j = 0; j < items.length; j++) {\n          if (items[j] instanceof Object) {\n            dataValue = getValue(fields.value, items[j]);\n          } else {\n            dataValue = items[j].toString();\n          }\n\n          for (var i = 0, len = dupData.length; i < len; i++) {\n            if (dupData[i] instanceof Object) {\n              objValue = getValue(fields.value, dupData[i]);\n            } else {\n              objValue = dupData[i].toString();\n            }\n\n            if (objValue === dataValue) {\n              itemIdx = this.getIndexByValue(dataValue);\n              liCollections.push(liElement[itemIdx]);\n              removeIdxes.push(i);\n              removeLiIdxes.push(itemIdx);\n            }\n          }\n        }\n\n        for (var k = removeIdxes.length - 1; k >= 0; k--) {\n          this.listData.splice(removeIdxes[k], 1);\n        }\n\n        for (var _k = removeIdxes.length - 1; _k >= 0; _k--) {\n          this.jsonData.splice(removeIdxes[_k], 1);\n        }\n\n        for (var _k2 = removeLiIdxes.length - 1; _k2 >= 0; _k2--) {\n          this.updateLiCollection(removeLiIdxes[_k2]);\n        }\n      } else {\n        itemIndex = itemIndex ? itemIndex : 0;\n        liCollections.push(liElement[itemIndex]);\n        this.listData.splice(itemIndex, 1);\n        this.jsonData.splice(itemIndex, 1);\n        this.updateLiCollection(itemIndex);\n      }\n\n      for (var _i14 = 0; _i14 < liCollections.length; _i14++) {\n        this.ulElement.removeChild(liCollections[_i14]);\n      }\n\n      if (this.listData.length === 0) {\n        this.l10nUpdate();\n      }\n    }\n    /**\n     * Gets the array of data Object that matches the given array of values.\n     *\n     * @param  { string[] | number[] | boolean[] } value - Specifies the array value of the list item.\n     * @returns {object[]}.\n     */\n\n  }, {\n    key: \"getDataByValues\",\n    value: function getDataByValues(value) {\n      var data = [];\n\n      for (var i = 0; i < value.length; i++) {\n        data.push(this.getDataByValue(value[i]));\n      }\n\n      return data;\n    }\n    /**\n     * Moves the given value(s) / selected value(s) upwards.\n     *\n     * @param  { string[] | number[] | boolean[] } value - Specifies the value(s).\n     * @returns {void}\n     */\n\n  }, {\n    key: \"moveUp\",\n    value: function moveUp(value) {\n      var elem = value ? this.getElemByValue(value) : this.getSelectedItems();\n      this.moveUpDown(true, false, elem);\n    }\n    /**\n     * Moves the given value(s) / selected value(s) downwards.\n     *\n     * @param  { string[] | number[] | boolean[] } value - Specifies the value(s).\n     * @returns {void}\n     */\n\n  }, {\n    key: \"moveDown\",\n    value: function moveDown(value) {\n      var elem = value ? this.getElemByValue(value) : this.getSelectedItems();\n      this.moveUpDown(false, false, elem);\n    }\n    /**\n     * Moves the given value(s) / selected value(s) to the given / default scoped ListBox.\n     *\n     * @param  { string[] | number[] | boolean[] } value - Specifies the value or array value of the list item.\n     * @param {number} index - Specifies the index.\n     * @param {string} targetId - Specifies the target id.\n     * @returns {void}\n     */\n\n  }, {\n    key: \"moveTo\",\n    value: function moveTo(value, index, targetId) {\n      var elem = value ? this.getElemByValue(value) : this.getSelectedItems();\n      var tlistbox = targetId ? _getComponent(targetId, ListBox_1) : this.getScopedListBox();\n      this.moveData(this, tlistbox, false, elem, index);\n    }\n    /**\n     * Moves all the values from one ListBox to the scoped ListBox.\n     *\n     * @param  { string } targetId - Specifies the scoped ListBox ID.\n     * @param  { string } index - Specifies the index to where the items moved.\n     * @returns {void}\n     */\n\n  }, {\n    key: \"moveAllTo\",\n    value: function moveAllTo(targetId, index) {\n      if (this.listData.length > 0) {\n        var tlistbox = targetId ? _getComponent(targetId, ListBox_1) : this.getScopedListBox();\n        this.moveAllData(this, tlistbox, false, index);\n      }\n    }\n    /* eslint-disable */\n\n    /**\n     * Gets the updated dataSource in ListBox.\n     *\n     * @returns {{ [key: string]: Object }[] | string[] | boolean[] | number[]} - Updated DataSource.\n     */\n\n    /* eslint-enable */\n\n  }, {\n    key: \"getDataList\",\n    value: function getDataList() {\n      return this.jsonData;\n    }\n    /* eslint-disable */\n\n    /**\n     * Returns the sorted Data in ListBox.\n     *\n     * @returns {{ [key: string]: Object }[] | string[] | boolean[] | number[]} - Sorted data\n     */\n\n    /* eslint-enable */\n\n  }, {\n    key: \"getSortedList\",\n    value: function getSortedList() {\n      var sortData;\n      var tempData;\n      sortData = tempData = this.sortedData;\n\n      if (this.fields.groupBy) {\n        sortData = [];\n\n        for (var i = 0; i < tempData.length; i++) {\n          if (tempData[i].isHeader) {\n            continue;\n          }\n\n          sortData.push(tempData[i]);\n        }\n      }\n\n      return sortData;\n    }\n  }, {\n    key: \"getElemByValue\",\n    value: function getElemByValue(value) {\n      var elem = [];\n\n      for (var i = 0; i < value.length; i++) {\n        elem.push(this.ulElement.querySelector('[data-value =\"' + value[i] + '\"]'));\n      }\n\n      return elem;\n    }\n  }, {\n    key: \"updateLiCollection\",\n    value: function updateLiCollection(index) {\n      var tempLi = [].slice.call(this.liCollections);\n      tempLi.splice(index, 1);\n      this.liCollections = tempLi;\n    }\n  }, {\n    key: \"selectAllItems\",\n    value: function selectAllItems(state, event) {\n      var _this52 = this;\n\n      [].slice.call(this.getItems()).forEach(function (li) {\n        if (!li.classList.contains(cssClass.disabled)) {\n          if (_this52.selectionSettings.showCheckbox) {\n            var ele = li.getElementsByClassName('e-check')[0];\n\n            if (!ele && state || ele && !state) {\n              _this52.notify('updatelist', {\n                li: li,\n                module: 'listbox'\n              });\n\n              if (_this52.maximumSelectionLength >= _this52.list.querySelectorAll('.e-list-item span.e-check').length) {\n                _this52.checkMaxSelection();\n              }\n            }\n          } else {\n            if (state) {\n              li.classList.add(cssClass.selected);\n            } else {\n              li.classList.remove(cssClass.selected);\n            }\n          }\n        }\n      });\n      this.updateSelectedOptions();\n\n      if (this.allowFiltering && this.selectionSettings.showCheckbox) {\n        var liEle = this.list.getElementsByTagName('li');\n        var index = 0;\n\n        if (state) {\n          var _loop = function _loop() {\n            var dataValue1 = _this52.getFormattedValue(liEle[index].getAttribute('data-value'));\n\n            if (!_this52.value.some(function (e) {\n              return e === dataValue1;\n            })) {\n              _this52.value.push(_this52.getFormattedValue(liEle[index].getAttribute('data-value')));\n            }\n          };\n\n          for (index = 0; index < liEle.length; index++) {\n            _loop();\n          }\n        } else {\n          var _loop2 = function _loop2() {\n            var dataValue2 = _this52.getFormattedValue(liEle[index].getAttribute('data-value'));\n\n            _this52.value = _this52.value.filter(function (e) {\n              return e !== dataValue2;\n            });\n          };\n\n          for (index = 0; index < liEle.length; index++) {\n            _loop2();\n          }\n        }\n\n        if (document.querySelectorAll('ul').length < 2) {\n          this.updateMainList();\n        }\n      }\n\n      this.triggerChange(this.getSelectedItems(), event);\n    }\n  }, {\n    key: \"updateMainList\",\n    value: function updateMainList() {\n      var mainList = this.mainList.querySelectorAll('.e-list-item');\n      var ulList = this.ulElement.querySelectorAll('.e-list-item');\n      var mainCount = mainList.length;\n      var ulEleCount = ulList.length;\n\n      if (this.selectionSettings.showCheckbox || document.querySelectorAll('ul').length > 1 || mainCount !== ulEleCount) {\n        var listindex = 0;\n        var valueindex = 0;\n        var count = 0;\n\n        for (listindex; listindex < mainCount;) {\n          if (this.value) {\n            for (valueindex; valueindex < this.value.length; valueindex++) {\n              if (mainList[listindex].getAttribute('data-value') === this.value[valueindex]) {\n                count++;\n              }\n            }\n          }\n\n          if (!count && this.selectionSettings.showCheckbox) {\n            mainList[listindex].getElementsByClassName('e-frame')[0].classList.remove('e-check');\n          }\n\n          if (document.querySelectorAll('ul').length > 1 && count && mainCount !== ulEleCount) {\n            this.mainList.removeChild(this.mainList.getElementsByTagName('li')[listindex]);\n            listindex = 0;\n          } else {\n            listindex++;\n          }\n\n          count = 0;\n          valueindex = 0;\n        }\n      }\n    }\n  }, {\n    key: \"wireEvents\",\n    value: function wireEvents() {\n      var form = closest(this.element, 'form');\n      var wrapper = this.element.tagName === 'EJS-LISTBOX' ? this.element : this.list;\n      EventHandler.add(this.list, 'click', this.clickHandler, this);\n      EventHandler.add(wrapper, 'keydown', this.keyDownHandler, this);\n      EventHandler.add(wrapper, 'focusout', this.focusOutHandler, this);\n      this.wireToolbarEvent();\n\n      if (this.selectionSettings.showCheckbox) {\n        EventHandler.remove(document, 'mousedown', this.checkBoxSelectionModule.onDocumentClick);\n      }\n\n      if (this.fields.groupBy || this.element.querySelector('select>optgroup')) {\n        EventHandler.remove(this.list, 'scroll', this.setFloatingHeader);\n      }\n\n      if (form) {\n        EventHandler.add(form, 'reset', this.formResetHandler, this);\n      }\n    }\n  }, {\n    key: \"wireToolbarEvent\",\n    value: function wireToolbarEvent() {\n      if (this.toolbarSettings.items.length) {\n        EventHandler.add(this.getToolElem(), 'click', this.toolbarClickHandler, this);\n      }\n    }\n  }, {\n    key: \"unwireEvents\",\n    value: function unwireEvents() {\n      var form = closest(this.element, 'form');\n      var wrapper = this.element.tagName === 'EJS-LISTBOX' ? this.element : this.list;\n      EventHandler.remove(this.list, 'click', this.clickHandler);\n      EventHandler.remove(wrapper, 'keydown', this.keyDownHandler);\n      EventHandler.remove(wrapper, 'focusout', this.focusOutHandler);\n\n      if (this.allowFiltering && this.clearFilterIconElem) {\n        EventHandler.remove(this.clearFilterIconElem, 'click', this.clearText);\n      }\n\n      if (this.toolbarSettings.items.length) {\n        EventHandler.remove(this.getToolElem(), 'click', this.toolbarClickHandler);\n      }\n\n      if (form) {\n        EventHandler.remove(form, 'reset', this.formResetHandler);\n      }\n    }\n  }, {\n    key: \"clickHandler\",\n    value: function clickHandler(e) {\n      this.selectHandler(e);\n    }\n  }, {\n    key: \"checkSelectAll\",\n    value: function checkSelectAll() {\n      var searchCount = 0;\n      var liItems = this.list.querySelectorAll('li.' + dropDownBaseClasses.li);\n\n      for (var i = 0; i < liItems.length; i++) {\n        if (!liItems[i].classList.contains('e-disabled')) {\n          searchCount++;\n        }\n      }\n\n      var len = this.getSelectedItems().length;\n\n      if (this.showSelectAll && searchCount) {\n        this.notify('checkSelectAll', {\n          module: 'CheckBoxSelection',\n          value: searchCount === len ? 'check' : len === 0 ? 'uncheck' : 'indeterminate'\n        });\n      }\n    }\n  }, {\n    key: \"getQuery\",\n    value: function getQuery(query) {\n      var filterQuery = query ? query.clone() : this.query ? this.query.clone() : new Query();\n\n      if (this.allowFiltering) {\n        var filterType = this.inputString === '' ? 'contains' : this.filterType;\n        var dataType = this.typeOfData(this.dataSource).typeof;\n\n        if (!(this.dataSource instanceof DataManager) && dataType === 'string' || dataType === 'number') {\n          filterQuery.where('', filterType, this.inputString, this.ignoreCase, this.ignoreAccent);\n        } else {\n          var fields = this.fields.text ? this.fields.text : '';\n          filterQuery.where(fields, filterType, this.inputString, this.ignoreCase, this.ignoreAccent);\n        }\n      } else {\n        filterQuery = query ? query : this.query ? this.query : new Query();\n      }\n\n      return filterQuery;\n    }\n  }, {\n    key: \"setFiltering\",\n    value: function setFiltering() {\n      var filterInputObj;\n\n      if (this.initLoad || isNullOrUndefined(this.filterParent)) {\n        this.filterParent = this.createElement('span', {\n          className: listBoxClasses.filterParent\n        });\n        this.filterInput = this.createElement('input', {\n          attrs: {\n            type: 'text'\n          },\n          className: listBoxClasses.filterInput\n        });\n        this.element.parentNode.insertBefore(this.filterInput, this.element);\n        filterInputObj = Input.createInput({\n          element: this.filterInput,\n          buttons: [listBoxClasses.filterBarClearIcon],\n          properties: {\n            placeholder: this.filterBarPlaceholder\n          }\n        }, this.createElement);\n        append([filterInputObj.container], this.filterParent);\n        prepend([this.filterParent], this.list);\n        attributes(this.filterInput, {\n          'aria-disabled': 'false',\n          'aria-owns': this.element.id + '_options',\n          'role': 'listbox',\n          'aria-activedescendant': null,\n          'autocomplete': 'off',\n          'autocorrect': 'off',\n          'autocapitalize': 'off',\n          'spellcheck': 'false'\n        });\n\n        if (this.height.toString().indexOf('%') < 0) {\n          addClass([this.list], 'e-filter-list');\n        }\n\n        this.inputString = this.filterInput.value;\n        this.filterWireEvents();\n        return filterInputObj;\n      }\n    }\n  }, {\n    key: \"filterWireEvents\",\n    value: function filterWireEvents(filterElem) {\n      if (filterElem) {\n        this.filterInput = filterElem.querySelector('.e-input-filter');\n      }\n\n      this.clearFilterIconElem = this.filterInput.parentElement.querySelector('.' + listBoxClasses.clearIcon);\n\n      if (this.clearFilterIconElem) {\n        EventHandler.add(this.clearFilterIconElem, 'click', this.clearText, this);\n\n        if (!filterElem) {\n          this.clearFilterIconElem.style.visibility = 'hidden';\n        }\n      }\n\n      EventHandler.add(this.filterInput, 'input', this.onInput, this);\n      EventHandler.add(this.filterInput, 'keyup', this.KeyUp, this);\n      EventHandler.add(this.filterInput, 'keydown', this.onKeyDown, this);\n    }\n  }, {\n    key: \"selectHandler\",\n    value: function selectHandler(e, isKey) {\n      var isSelect = true;\n      var currSelIdx;\n      var li = closest(e.target, '.' + 'e-list-item');\n      var selectedLi = [li];\n\n      if (li && li.parentElement) {\n        currSelIdx = [].slice.call(li.parentElement.children).indexOf(li);\n\n        if (!this.selectionSettings.showCheckbox) {\n          if ((e.ctrlKey || Browser.isDevice) && this.isSelected(li)) {\n            li.classList.remove(cssClass.selected);\n            li.removeAttribute('aria-selected');\n            isSelect = false;\n          } else if (!(this.selectionSettings.mode === 'Multiple' && (e.ctrlKey || Browser.isDevice))) {\n            this.getSelectedItems().forEach(function (ele) {\n              ele.removeAttribute('aria-selected');\n            });\n            removeClass(this.getSelectedItems(), cssClass.selected);\n          }\n        } else {\n          isSelect = !li.getElementsByClassName('e-frame')[0].classList.contains('e-check');\n        }\n\n        if (e.shiftKey && !this.selectionSettings.showCheckbox && this.selectionSettings.mode !== 'Single') {\n          selectedLi = [].slice.call(li.parentElement.children).slice(Math.min(currSelIdx, this.prevSelIdx), Math.max(currSelIdx, this.prevSelIdx) + 1).filter(function (ele) {\n            return ele.classList.contains('e-list-item');\n          });\n        } else {\n          this.prevSelIdx = [].slice.call(li.parentElement.children).indexOf(li);\n        }\n\n        if (isSelect) {\n          if (!this.selectionSettings.showCheckbox) {\n            addClass(selectedLi, cssClass.selected);\n          }\n\n          selectedLi.forEach(function (ele) {\n            ele.setAttribute('aria-selected', 'true');\n          });\n          this.list.setAttribute('aria-activedescendant', li.id);\n        }\n\n        if (!isKey && (this.maximumSelectionLength > (this.value && this.value.length) || !isSelect) && (this.maximumSelectionLength >= (this.value && this.value.length) || !isSelect) && !(this.maximumSelectionLength < (this.value && this.value.length))) {\n          this.notify('updatelist', {\n            li: li,\n            e: e,\n            module: 'listbox'\n          });\n        }\n\n        if (this.allowFiltering && !isKey) {\n          var liDataValue = this.getFormattedValue(li.getAttribute('data-value'));\n\n          if (!isSelect) {\n            this.value = this.value.filter(function (value1) {\n              return value1 !== liDataValue;\n            });\n          } else {\n            var values = [];\n            extend(values, this.value);\n            values.push(liDataValue);\n            this.value = values;\n          }\n\n          if (document.querySelectorAll('ul').length < 2) {\n            this.updateMainList();\n          }\n        }\n\n        this.updateSelectedOptions();\n        this.triggerChange(this.getSelectedItems(), e);\n        this.checkMaxSelection();\n      }\n    }\n  }, {\n    key: \"triggerChange\",\n    value: function triggerChange(selectedLis, event) {\n      this.trigger('change', {\n        elements: selectedLis,\n        items: this.getDataByElements(selectedLis),\n        value: this.value,\n        event: event\n      });\n    }\n  }, {\n    key: \"getDataByElems\",\n    value: function getDataByElems(elems) {\n      var data = [];\n\n      for (var i = 0, len = elems.length; i < len; i++) {\n        data.push(this.getDataByValue(this.getFormattedValue(elems[i].getAttribute('data-value'))));\n      }\n\n      return data;\n    }\n  }, {\n    key: \"getDataByElements\",\n    value: function getDataByElements(elems) {\n      var data = [];\n      var value;\n      var sIdx = 0;\n\n      if (!isNullOrUndefined(this.listData)) {\n        var type = this.typeOfData(this.listData).typeof;\n\n        if (type === 'string' || type === 'number' || type === 'boolean') {\n          var _iterator10 = _createForOfIteratorHelper(this.listData),\n              _step10;\n\n          try {\n            for (_iterator10.s(); !(_step10 = _iterator10.n()).done;) {\n              var item = _step10.value;\n\n              for (var i = sIdx, len = elems.length; i < len; i++) {\n                value = this.getFormattedValue(elems[i].getAttribute('data-value'));\n\n                if (!isNullOrUndefined(item) && item === value) {\n                  sIdx = i;\n                  data.push(item);\n                  break;\n                }\n              }\n\n              if (elems.length === data.length) {\n                break;\n              }\n            }\n          } catch (err) {\n            _iterator10.e(err);\n          } finally {\n            _iterator10.f();\n          }\n        } else {\n          var _iterator11 = _createForOfIteratorHelper(this.listData),\n              _step11;\n\n          try {\n            for (_iterator11.s(); !(_step11 = _iterator11.n()).done;) {\n              var _item2 = _step11.value;\n\n              for (var _i15 = sIdx, _len = elems.length; _i15 < _len; _i15++) {\n                value = this.getFormattedValue(elems[_i15].getAttribute('data-value'));\n\n                if (!isNullOrUndefined(_item2) && getValue(this.fields.value ? this.fields.value : 'value', _item2) === value) {\n                  sIdx = _i15;\n                  data.push(_item2);\n                  break;\n                }\n              }\n\n              if (elems.length === data.length) {\n                break;\n              }\n            }\n          } catch (err) {\n            _iterator11.e(err);\n          } finally {\n            _iterator11.f();\n          }\n        }\n\n        return data;\n      }\n\n      return null;\n    }\n  }, {\n    key: \"checkMaxSelection\",\n    value: function checkMaxSelection() {\n      var limit = this.list.querySelectorAll('.e-list-item span.e-check').length;\n\n      if (this.selectionSettings.showCheckbox) {\n        var index = 0;\n        var liCollElem = this.list.getElementsByClassName('e-list-item');\n\n        for (index; index < liCollElem.length; index++) {\n          if (!liCollElem[index].querySelector('.e-frame.e-check')) {\n            if (limit === this.maximumSelectionLength) {\n              liCollElem[index].classList.add('e-disable');\n            } else if (liCollElem[index].classList.contains('e-disable')) {\n              liCollElem[index].classList.remove('e-disable');\n            }\n          }\n        }\n      }\n    }\n  }, {\n    key: \"toolbarClickHandler\",\n    value: function toolbarClickHandler(e) {\n      var btn = closest(e.target, 'button');\n\n      if (btn) {\n        this.toolbarAction = btn.getAttribute('data-value');\n\n        if (btn.disabled) {\n          return;\n        }\n\n        switch (this.toolbarAction) {\n          case 'moveUp':\n            this.moveUpDown(true);\n            break;\n\n          case 'moveDown':\n            this.moveUpDown();\n            break;\n\n          case 'moveTo':\n            this.moveItemTo();\n            break;\n\n          case 'moveFrom':\n            this.moveItemFrom();\n            break;\n\n          case 'moveAllTo':\n            this.moveAllItemTo();\n            break;\n\n          case 'moveAllFrom':\n            this.moveAllItemFrom();\n            break;\n\n          default:\n            this.trigger('actionBegin', {\n              cancel: false,\n              items: this.getDataByElems(this.getSelectedItems()),\n              eventName: this.toolbarAction\n            });\n            break;\n        }\n      }\n    }\n  }, {\n    key: \"moveUpDown\",\n    value: function moveUpDown(isUp, isKey, value) {\n      var _this53 = this;\n\n      var elems = this.getSelectedItems();\n\n      if (value) {\n        elems = value;\n      }\n\n      if ((isUp && this.isSelected(this.ulElement.firstElementChild) || !isUp && this.isSelected(this.ulElement.lastElementChild)) && !value) {\n        return;\n      }\n\n      var tempItems = this.getDataByElems(elems);\n      var localDataArgs = {\n        cancel: false,\n        items: tempItems,\n        eventName: this.toolbarAction\n      };\n      this.trigger('actionBegin', localDataArgs);\n\n      if (localDataArgs.cancel) {\n        return;\n      }\n\n      (isUp ? elems : elems.reverse()).forEach(function (ele) {\n        var jsonToIdx = Array.prototype.indexOf.call(_this53.ulElement.querySelectorAll('.e-list-item'), ele);\n        var idx = Array.prototype.indexOf.call(_this53.ulElement.children, ele);\n        moveTo(_this53.ulElement, _this53.ulElement, [idx], isUp ? idx - 1 : idx + 2);\n\n        _this53.changeData(idx, isUp ? idx - 1 : idx + 1, isUp ? jsonToIdx - 1 : jsonToIdx + 1, ele);\n      });\n      this.trigger('actionComplete', {\n        items: tempItems,\n        eventName: this.toolbarAction\n      });\n      elems[0].focus();\n\n      if (!isKey && this.toolbarSettings.items.length) {\n        this.getToolElem().querySelector('[data-value=' + (isUp ? 'moveUp' : 'moveDown') + ']').focus();\n      }\n\n      this.updateToolBarState();\n    }\n  }, {\n    key: \"moveItemTo\",\n    value: function moveItemTo() {\n      this.moveData(this, this.getScopedListBox());\n    }\n  }, {\n    key: \"moveItemFrom\",\n    value: function moveItemFrom() {\n      this.moveData(this.getScopedListBox(), this);\n    }\n    /**\n     * Called internally if any of the property value changed.\n     *\n     * @param {ListBox} fListBox - Specifies the from listbox.\n     * @param {ListBox} tListBox - Specifies the to listbox.\n     * @param {boolean} isKey - Specifies the key.\n     * @param {Element[]} value - Specifies the value.\n     * @param {number} index - Specifies the index.\n     * @returns {void}\n     * @private\n     */\n\n  }, {\n    key: \"moveData\",\n    value: function moveData(fListBox, tListBox, isKey, value, index) {\n      var idx = [];\n      var dataIdx = [];\n      var jsonIdx = [];\n      var sortIdx = [];\n      var listData = [].slice.call(fListBox.listData);\n      var tListData = [].slice.call(tListBox.listData);\n      var sortData = [].slice.call(fListBox.sortedData);\n      var tSortData = [].slice.call(tListBox.sortedData);\n      var fliCollections = [].slice.call(fListBox.liCollections);\n      var dataLiIdx = [];\n      var tliCollections = [].slice.call(tListBox.liCollections);\n      var tempItems = [];\n      var data = [];\n      var elems = fListBox.getSelectedItems();\n\n      if (value) {\n        elems = value;\n      }\n\n      var isRefresh = tListBox.sortOrder !== 'None' || tListBox.selectionSettings.showCheckbox !== fListBox.selectionSettings.showCheckbox || tListBox.fields.groupBy || tListBox.itemTemplate || fListBox.itemTemplate;\n      fListBox.value = [];\n\n      if (elems.length) {\n        this.removeSelected(fListBox, elems);\n        elems.forEach(function (ele) {\n          idx.push(Array.prototype.indexOf.call(fListBox.ulElement.children, ele)); // update sortable elem\n          // To update lb view data\n\n          dataLiIdx.push(Array.prototype.indexOf.call(fListBox.ulElement.querySelectorAll('.e-list-item'), ele)); // To update lb listdata data\n\n          dataIdx.push(Array.prototype.indexOf.call(fListBox.listData, fListBox.getDataByElems([ele])[0])); // To update lb sorted data\n\n          sortIdx.push(Array.prototype.indexOf.call(fListBox.sortedData, fListBox.getDataByElems([ele])[0])); // To update lb original data\n\n          jsonIdx.push(Array.prototype.indexOf.call(fListBox.jsonData, fListBox.getDataByElems([ele])[0]));\n        });\n\n        if (this.sortOrder !== 'None') {\n          sortIdx.forEach(function (i) {\n            tempItems.push(fListBox.sortedData[i]);\n          });\n        } else {\n          jsonIdx.forEach(function (i) {\n            tempItems.push(fListBox.jsonData[i]);\n          });\n        }\n\n        var localDataArgs = {\n          cancel: false,\n          items: tempItems,\n          eventName: this.toolbarAction\n        };\n        fListBox.trigger('actionBegin', localDataArgs);\n\n        if (localDataArgs.cancel) {\n          return;\n        }\n\n        var rLiCollection = [];\n        dataLiIdx.sort(function (n1, n2) {\n          return n1 - n2;\n        }).reverse().forEach(function (i) {\n          rLiCollection.push(fliCollections.splice(i, 1)[0]);\n        });\n        fListBox.liCollections = fliCollections;\n\n        if (index) {\n          var toColl = tliCollections.splice(0, index);\n          tListBox.liCollections = toColl.concat(rLiCollection.reverse()).concat(tliCollections);\n        } else {\n          tListBox.liCollections = tliCollections.concat(rLiCollection.reverse());\n        }\n\n        if (tListBox.listData.length === 0) {\n          var noRecElem = tListBox.ulElement.childNodes[0];\n\n          if (noRecElem) {\n            tListBox.ulElement.removeChild(noRecElem);\n          }\n        }\n\n        dataIdx.sort(function (n1, n2) {\n          return n2 - n1;\n        }).forEach(function (i) {\n          // eslint-disable-next-line @typescript-eslint/no-unused-expressions\n          listData.splice(i, 1)[0];\n        });\n        sortIdx.sort(function (n1, n2) {\n          return n2 - n1;\n        }).forEach(function (i) {\n          // eslint-disable-next-line @typescript-eslint/no-unused-expressions\n          sortData.splice(i, 1)[0];\n        });\n        jsonIdx.slice().reverse().forEach(function (i) {\n          data.push(fListBox.jsonData.splice(i, 1)[0]);\n        });\n\n        if (isRefresh) {\n          if (fListBox.fields.groupBy) {\n            var sourceElem = fListBox.renderItems(listData, fListBox.fields);\n            fListBox.updateListItems(sourceElem, fListBox.ulElement);\n          } else {\n            elems.forEach(function (ele) {\n              detach(ele);\n            });\n          }\n        } else {\n          moveTo(fListBox.ulElement, tListBox.ulElement, idx, index);\n          fListBox.trigger('actionComplete', {\n            items: tempItems,\n            eventName: this.toolbarAction\n          });\n        }\n\n        if (tListBox.mainList.childElementCount !== tListBox.jsonData.length) {\n          tListBox.mainList = tListBox.ulElement;\n        }\n\n        fListBox.updateMainList();\n        var tJsonData = [].slice.call(tListBox.jsonData);\n        tSortData = [].slice.call(tListBox.sortedData);\n        this.selectNextList(elems, dataLiIdx, dataIdx, fListBox);\n\n        if (isKey) {\n          this.list.focus();\n        }\n\n        fListBox.listData = listData;\n        fListBox.sortedData = sortData;\n        index = index ? index : tListData.length;\n\n        for (var i = tempItems.length - 1; i >= 0; i--) {\n          tListData.splice(index, 0, tempItems[i]);\n          tJsonData.splice(index, 0, tempItems[i]);\n          tSortData.splice(index, 0, tempItems[i]);\n        }\n\n        tListBox.listData = tListData;\n        tListBox.jsonData = tJsonData;\n        tListBox.sortedData = tSortData;\n\n        if (isRefresh) {\n          var _sourceElem2 = tListBox.renderItems(tListData, tListBox.fields);\n\n          tListBox.updateListItems(_sourceElem2, tListBox.ulElement);\n          tListBox.setSelection();\n          fListBox.trigger('actionComplete', {\n            items: tempItems,\n            eventName: this.toolbarAction\n          });\n        }\n\n        fListBox.updateSelectedOptions();\n\n        if (fListBox.listData.length === 0) {\n          fListBox.l10nUpdate();\n        }\n      }\n\n      if (fListBox.value.length === 1 && fListBox.getSelectedItems().length) {\n        fListBox.value[0] = fListBox.getFormattedValue(fListBox.getSelectedItems()[0].getAttribute('data-value'));\n      }\n    }\n  }, {\n    key: \"selectNextList\",\n    value: function selectNextList(elems, dataLiIdx, dataIdx, inst) {\n      var childCnt = inst.ulElement.querySelectorAll('.e-list-item').length;\n      var ele;\n      var liIdx;\n      var validIdx = -1;\n\n      if (elems.length === 1 && childCnt && !inst.selectionSettings.showCheckbox) {\n        liIdx = childCnt <= dataLiIdx[0] ? childCnt - 1 : dataLiIdx[0];\n        ele = inst.ulElement.querySelectorAll('.e-list-item')[liIdx];\n        validIdx = inst.getValidIndex(ele, liIdx, childCnt === dataIdx[0] ? 38 : 40);\n\n        if (validIdx > -1) {\n          inst.ulElement.querySelectorAll('.e-list-item')[validIdx].classList.add(cssClass.selected);\n        }\n      }\n    }\n  }, {\n    key: \"moveAllItemTo\",\n    value: function moveAllItemTo() {\n      this.moveAllData(this, this.getScopedListBox());\n    }\n  }, {\n    key: \"moveAllItemFrom\",\n    value: function moveAllItemFrom() {\n      this.moveAllData(this.getScopedListBox(), this);\n    }\n  }, {\n    key: \"moveAllData\",\n    value: function moveAllData(fListBox, tListBox, isKey, index) {\n      var listData = [].slice.call(tListBox.listData);\n      var jsonData = [].slice.call(tListBox.jsonData);\n      var isRefresh = tListBox.sortOrder !== 'None' || tListBox.selectionSettings.showCheckbox !== fListBox.selectionSettings.showCheckbox || tListBox.fields.groupBy || tListBox.itemTemplate || fListBox.itemTemplate;\n      this.removeSelected(fListBox, fListBox.getSelectedItems());\n      var tempItems = [].slice.call(fListBox.jsonData);\n      var localDataArgs = {\n        cancel: false,\n        items: tempItems,\n        eventName: this.toolbarAction\n      };\n      fListBox.trigger('actionBegin', localDataArgs);\n\n      if (localDataArgs.cancel) {\n        return;\n      }\n\n      if (tListBox.listData.length === 0) {\n        var noRecElem = tListBox.ulElement.childNodes[0];\n\n        if (noRecElem) {\n          tListBox.ulElement.removeChild(noRecElem);\n        }\n      }\n\n      if (isRefresh) {\n        var _noRecElem = fListBox.ulElement.childNodes[0];\n\n        if (_noRecElem) {\n          fListBox.ulElement.removeChild(_noRecElem);\n        }\n      }\n\n      moveTo(fListBox.ulElement, tListBox.ulElement, // eslint-disable-next-line prefer-spread\n      Array.apply(null, {\n        length: fListBox.ulElement.childElementCount\n      }).map(Number.call, Number), index);\n      this.trigger('actionComplete', {\n        items: tempItems,\n        eventName: this.toolbarAction\n      });\n\n      if (isKey) {\n        this.list.focus();\n      }\n\n      index = index ? index : listData.length;\n\n      for (var i = 0; i < fListBox.listData.length; i++) {\n        listData.splice(index + i, 0, fListBox.listData[i]);\n      }\n\n      for (var _i16 = 0; _i16 < fListBox.jsonData.length; _i16++) {\n        jsonData.splice(index + _i16, 0, fListBox.jsonData[_i16]);\n      }\n\n      var fliCollections = [].slice.call(fListBox.liCollections);\n      var tliCollections = [].slice.call(tListBox.liCollections);\n      fListBox.liCollections = [];\n\n      if (index) {\n        var toColl = tliCollections.splice(0, index);\n        tListBox.liCollections = toColl.concat(fliCollections).concat(tliCollections);\n      } else {\n        tListBox.liCollections = tliCollections.concat(fliCollections);\n      }\n\n      fListBox.value = [];\n      listData = listData.filter(function (data) {\n        return data.isHeader !== true;\n      });\n      tListBox.listData = listData;\n      tListBox.jsonData = jsonData;\n      fListBox.listData = fListBox.sortedData = fListBox.jsonData = [];\n\n      if (isRefresh) {\n        var sourceElem = tListBox.renderItems(listData, tListBox.fields);\n        tListBox.updateListItems(sourceElem, tListBox.ulElement);\n        this.trigger('actionComplete', {\n          items: tempItems,\n          eventName: this.toolbarAction\n        });\n      } else {\n        tListBox.sortedData = listData;\n      }\n\n      fListBox.updateSelectedOptions();\n\n      if (fListBox.listData.length === 0) {\n        fListBox.l10nUpdate();\n      }\n    }\n  }, {\n    key: \"changeData\",\n    value: function changeData(fromIdx, toIdx, jsonToIdx, ele) {\n      var listData = [].slice.call(this.listData);\n      var jsonData = [].slice.call(this.jsonData);\n      var sortData = [].slice.call(this.sortedData);\n      var jsonIdx = Array.prototype.indexOf.call(this.jsonData, this.getDataByElems([ele])[0]);\n      var sortIdx = Array.prototype.indexOf.call(this.sortedData, this.getDataByElems([ele])[0]);\n      var liColl = [].slice.call(this.liCollections);\n      listData.splice(toIdx, 0, listData.splice(fromIdx, 1)[0]);\n      jsonData.splice(jsonToIdx, 0, jsonData.splice(jsonIdx, 1)[0]);\n      sortData.splice(toIdx, 0, sortData.splice(sortIdx, 1)[0]);\n      liColl.splice(toIdx, 0, liColl.splice(fromIdx, 1)[0]);\n      this.listData = listData;\n      this.jsonData = jsonData;\n      this.liCollections = liColl;\n      this.sortedData = sortData;\n    }\n  }, {\n    key: \"getSelectedItems\",\n    value: function getSelectedItems() {\n      var ele = [];\n\n      if (this.selectionSettings.showCheckbox) {\n        [].slice.call(this.ulElement.getElementsByClassName('e-check')).forEach(function (cbox) {\n          ele.push(closest(cbox, '.' + 'e-list-item'));\n        });\n      } else {\n        ele = [].slice.call(this.ulElement.getElementsByClassName(cssClass.selected));\n      }\n\n      return ele;\n    }\n  }, {\n    key: \"getScopedListBox\",\n    value: function getScopedListBox() {\n      var _this54 = this;\n\n      var listObj;\n\n      if (this.scope) {\n        [].slice.call(document.querySelectorAll(this.scope)).forEach(function (ele) {\n          if (_getComponent(ele, _this54.getModuleName())) {\n            listObj = _getComponent(ele, _this54.getModuleName());\n          }\n        });\n      }\n\n      return listObj;\n    }\n  }, {\n    key: \"getGrabbedItems\",\n    value: function getGrabbedItems() {\n      var elems = Array.prototype.slice.call(this.element.querySelectorAll('.e-grabbed'));\n      return elems;\n    }\n  }, {\n    key: \"getDragArgs\",\n    value: function getDragArgs(args, isDragEnd) {\n      var elems = this.getGrabbedItems();\n\n      if (elems.length) {\n        if (isDragEnd) {\n          elems.push(args.target);\n        }\n      } else {\n        elems = [args.target];\n      }\n\n      return {\n        elements: elems,\n        items: this.getDataByElems(elems)\n      };\n    }\n  }, {\n    key: \"onKeyDown\",\n    value: function onKeyDown(e) {\n      this.keyDownHandler(e);\n      e.stopPropagation();\n    }\n  }, {\n    key: \"keyDownHandler\",\n    value: function keyDownHandler(e) {\n      if ([32, 35, 36, 37, 38, 39, 40, 65].indexOf(e.keyCode) > -1 && !this.allowFiltering) {\n        if (e.target && e.target.className.indexOf('e-edit-template') > -1) {\n          return;\n        }\n\n        e.preventDefault();\n\n        if (e.keyCode === 32 && this.ulElement.children.length) {\n          this.selectHandler({\n            target: this.ulElement.getElementsByClassName('e-focused')[0],\n            ctrlKey: e.ctrlKey,\n            shiftKey: e.shiftKey\n          });\n        } else if (e.keyCode === 65 && e.ctrlKey) {\n          this.selectAll();\n        } else if ((e.keyCode === 38 || e.keyCode === 40) && e.ctrlKey && e.shiftKey) {\n          this.moveUpDown(e.keyCode === 38 ? true : false, true);\n        } else if ((this.toolbarSettings.items.length || this.tBListBox) && (e.keyCode === 39 || e.keyCode === 37) && e.ctrlKey) {\n          var listObj = this.tBListBox || this.getScopedListBox();\n\n          if (e.keyCode === 39) {\n            if (e.shiftKey) {\n              this.moveAllData(this, listObj, true);\n            } else {\n              this.moveData(this, listObj, true);\n            }\n          } else {\n            if (e.shiftKey) {\n              this.moveAllData(listObj, this, true);\n            } else {\n              this.moveData(listObj, this, true);\n            }\n          }\n        } else if (e.keyCode !== 37 && e.keyCode !== 39) {\n          this.upDownKeyHandler(e);\n        }\n      } else if (this.allowFiltering) {\n        if (e.keyCode === 40 || e.keyCode === 38) {\n          this.upDownKeyHandler(e);\n        }\n      }\n    }\n  }, {\n    key: \"upDownKeyHandler\",\n    value: function upDownKeyHandler(e) {\n      var ul = this.ulElement;\n      var defaultIdx = e.keyCode === 40 || e.keyCode === 36 ? 0 : ul.childElementCount - 1;\n      var fliIdx = defaultIdx;\n      var fli = ul.getElementsByClassName('e-focused')[0] || ul.getElementsByClassName(cssClass.selected)[0];\n\n      if (fli) {\n        if (e.keyCode !== 35 && e.keyCode !== 36) {\n          fliIdx = Array.prototype.indexOf.call(ul.children, fli);\n\n          if (e.keyCode === 40) {\n            fliIdx++;\n          } else {\n            fliIdx--;\n          }\n\n          if (fliIdx < 0 || fliIdx > ul.childElementCount - 1) {\n            return;\n          }\n        }\n\n        removeClass([fli], 'e-focused');\n      }\n\n      var cli = ul.children[fliIdx];\n\n      if (cli) {\n        fliIdx = this.getValidIndex(cli, fliIdx, e.keyCode);\n\n        if (fliIdx === -1) {\n          addClass([fli], 'e-focused');\n          return;\n        }\n\n        ul.children[fliIdx].focus();\n        ul.children[fliIdx].classList.add('e-focused');\n\n        if (!e.ctrlKey) {\n          this.selectHandler({\n            target: ul.children[fliIdx],\n            ctrlKey: e.ctrlKey,\n            shiftKey: e.shiftKey\n          }, true);\n        }\n      }\n    }\n  }, {\n    key: \"KeyUp\",\n    value: function KeyUp(e) {\n      var _this55 = this;\n\n      var char = String.fromCharCode(e.keyCode);\n      var isWordCharacter = char.match(/\\w/);\n\n      if (!isNullOrUndefined(isWordCharacter)) {\n        this.isValidKey = true;\n      }\n\n      this.isValidKey = e.keyCode === 8 || e.keyCode === 46 || this.isValidKey;\n\n      if (this.isValidKey) {\n        this.isValidKey = false;\n\n        switch (e.keyCode) {\n          default:\n            if (this.allowFiltering) {\n              var eventArgsData = {\n                preventDefaultAction: false,\n                text: this.targetElement(),\n                updateData: function updateData(dataSource, query, fields) {\n                  if (eventArgsData.cancel) {\n                    return;\n                  }\n\n                  _this55.isFiltered = true;\n                  _this55.remoteFilterAction = true;\n\n                  _this55.dataUpdater(dataSource, query, fields);\n                },\n                event: e,\n                cancel: false\n              };\n              this.trigger('filtering', eventArgsData, function (args) {\n                _this55.isDataFetched = false;\n\n                if (args.cancel || _this55.filterInput.value !== '' && _this55.isFiltered) {\n                  return;\n                }\n\n                if (!args.cancel && !_this55.isCustomFiltering && !args.preventDefaultAction) {\n                  _this55.inputString = _this55.filterInput.value;\n\n                  _this55.filteringAction(_this55.jsonData, new Query(), _this55.fields);\n                }\n\n                if (!_this55.isFiltered && !_this55.isCustomFiltering && !args.preventDefaultAction) {\n                  _this55.dataUpdater(_this55.jsonData, new Query(), _this55.fields);\n                }\n              });\n            }\n\n        }\n      }\n    }\n    /**\n     * To filter the data from given data source by using query.\n     *\n     * @param  {Object[] | DataManager } dataSource - Set the data source to filter.\n     * @param  {Query} query - Specify the query to filter the data.\n     * @param  {FieldSettingsModel} fields - Specify the fields to map the column in the data table.\n     * @returns {void}.\n     */\n\n  }, {\n    key: \"filter\",\n    value: function filter(dataSource, query, fields) {\n      this.isCustomFiltering = true;\n      this.filteringAction(dataSource, query, fields);\n    }\n  }, {\n    key: \"filteringAction\",\n    value: function filteringAction(dataSource, query, fields) {\n      this.resetList(dataSource, fields, query);\n    }\n  }, {\n    key: \"targetElement\",\n    value: function targetElement() {\n      this.targetInputElement = this.list.getElementsByClassName('e-input-filter')[0];\n      return this.targetInputElement.value;\n    }\n  }, {\n    key: \"dataUpdater\",\n    value: function dataUpdater(dataSource, query, fields) {\n      this.isDataFetched = false;\n      var backCommand = true;\n\n      if (this.targetElement().trim() === '') {\n        var list = this.mainList.cloneNode ? this.mainList.cloneNode(true) : this.mainList;\n\n        if (backCommand) {\n          this.remoteCustomValue = false;\n          this.onActionComplete(list, this.jsonData);\n          this.notify('reOrder', {\n            module: 'CheckBoxSelection',\n            enable: this.selectionSettings.showCheckbox,\n            e: this\n          });\n        }\n      } else {\n        this.resetList(dataSource, fields, query);\n      }\n    }\n  }, {\n    key: \"focusOutHandler\",\n    value: function focusOutHandler() {\n      var ele = this.list.getElementsByClassName('e-focused')[0];\n\n      if (ele) {\n        ele.classList.remove('e-focused');\n      }\n\n      if (this.allowFiltering) {\n        this.refreshClearIcon();\n      }\n    }\n  }, {\n    key: \"getValidIndex\",\n    value: function getValidIndex(cli, index, keyCode) {\n      var cul = this.ulElement;\n\n      if (cli.classList.contains('e-disabled') || cli.classList.contains(cssClass.group)) {\n        if (keyCode === 40 || keyCode === 36) {\n          index++;\n        } else {\n          index--;\n        }\n      }\n\n      if (index < 0 || index === cul.childElementCount) {\n        return -1;\n      }\n\n      cli = cul.querySelectorAll('.e-list-item')[index];\n\n      if (cli.classList.contains('e-disabled') || cli.classList.contains(cssClass.group)) {\n        index = this.getValidIndex(cli, index, keyCode);\n      }\n\n      return index;\n    }\n  }, {\n    key: \"updateSelectedOptions\",\n    value: function updateSelectedOptions() {\n      var _this56 = this;\n\n      var selectedOptions = [];\n      var values = [];\n      extend(values, this.value);\n      this.getSelectedItems().forEach(function (ele) {\n        if (!ele.classList.contains('e-grabbed')) {\n          selectedOptions.push(_this56.getFormattedValue(ele.getAttribute('data-value')));\n        }\n      });\n\n      if (this.mainList.childElementCount === this.ulElement.childElementCount) {\n        if (this.allowFiltering && this.selectionSettings.showCheckbox) {\n          for (var i = 0; i < selectedOptions.length; i++) {\n            if (values.indexOf(selectedOptions[i]) > -1) {\n              continue;\n            } else {\n              values.push(selectedOptions[i]);\n            }\n          }\n\n          this.setProperties({\n            value: values\n          }, true);\n        } else {\n          this.setProperties({\n            value: selectedOptions\n          }, true);\n        }\n      }\n\n      this.updateSelectTag();\n      this.updateToolBarState();\n\n      if (this.tBListBox) {\n        this.tBListBox.updateToolBarState();\n      }\n    }\n  }, {\n    key: \"clearSelection\",\n    value: function clearSelection() {\n      var _this57 = this;\n\n      var values = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : this.value;\n\n      if (this.selectionSettings.showCheckbox) {\n        var dvalue;\n        this.getSelectedItems().forEach(function (li) {\n          dvalue = _this57.getFormattedValue(li.getAttribute('data-value'));\n\n          if (values.indexOf(dvalue) < 0) {\n            li.getElementsByClassName('e-check')[0].classList.remove('e-check');\n            li.getElementsByClassName('e-checkbox-wrapper')[0].removeAttribute('aria-checked');\n            li.removeAttribute('aria-selected');\n          }\n        });\n      }\n    }\n  }, {\n    key: \"setSelection\",\n    value: function setSelection() {\n      var _this58 = this;\n\n      var values = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : this.value;\n      var isSelect = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : true;\n      var isText = arguments.length > 2 && arguments[2] !== undefined ? arguments[2] : false;\n      var li;\n      var liselect;\n\n      if (values) {\n        values.forEach(function (value) {\n          var text;\n\n          if (isText) {\n            text = _this58.getValueByText(value);\n          } else {\n            text = value;\n          }\n\n          li = _this58.list.querySelector('[data-value=\"' + text + '\"]');\n\n          if (li) {\n            if (_this58.selectionSettings.showCheckbox) {\n              liselect = li.getElementsByClassName('e-frame')[0].classList.contains('e-check');\n            } else {\n              liselect = li.classList.contains('e-selected');\n            }\n\n            if (!isSelect && liselect || isSelect && !liselect && li) {\n              if (_this58.selectionSettings.showCheckbox) {\n                _this58.notify('updatelist', {\n                  li: li,\n                  module: 'listbox'\n                });\n              } else {\n                if (isSelect) {\n                  li.classList.add(cssClass.selected);\n                  li.setAttribute('aria-selected', 'true');\n                } else {\n                  li.classList.remove(cssClass.selected);\n                  li.removeAttribute('aria-selected');\n                }\n              }\n            }\n          }\n        });\n      }\n\n      this.updateSelectTag();\n    }\n  }, {\n    key: \"updateSelectTag\",\n    value: function updateSelectTag() {\n      var ele = this.getSelectTag();\n      var innerHTML = '';\n      ele.innerHTML = '';\n\n      if (this.value) {\n        for (var i = 0, len = this.value.length; i < len; i++) {\n          innerHTML += '<option selected value=\"' + this.value[i] + '\"></option>';\n        }\n\n        ele.innerHTML += innerHTML;\n      }\n\n      this.checkSelectAll();\n    }\n  }, {\n    key: \"checkDisabledState\",\n    value: function checkDisabledState(inst) {\n      return inst.ulElement.querySelectorAll('.' + cssClass.li).length === 0;\n    }\n  }, {\n    key: \"updateToolBarState\",\n    value: function updateToolBarState() {\n      var _this59 = this;\n\n      if (this.toolbarSettings.items.length) {\n        var listObj = this.getScopedListBox();\n        var wrap = this.list.parentElement.getElementsByClassName('e-listbox-tool')[0];\n        this.toolbarSettings.items.forEach(function (value) {\n          var btn = wrap.querySelector('[data-value=\"' + value + '\"]');\n\n          switch (value) {\n            case 'moveAllTo':\n              btn.disabled = _this59.checkDisabledState(_this59);\n              break;\n\n            case 'moveAllFrom':\n              btn.disabled = _this59.checkDisabledState(listObj);\n              break;\n\n            case 'moveFrom':\n              btn.disabled = listObj.value && listObj.value.length ? false : true;\n              break;\n\n            case 'moveUp':\n              btn.disabled = _this59.value && _this59.value.length && !_this59.isSelected(_this59.ulElement.children[0]) ? false : true;\n              break;\n\n            case 'moveDown':\n              btn.disabled = _this59.value && _this59.value.length && !_this59.isSelected(_this59.ulElement.children[_this59.ulElement.childElementCount - 1]) ? false : true;\n              break;\n\n            default:\n              btn.disabled = _this59.value && _this59.value.length ? false : true;\n              break;\n          }\n        });\n      }\n    }\n  }, {\n    key: \"setCheckboxPosition\",\n    value: function setCheckboxPosition() {\n      var listWrap = this.list;\n\n      if (!this.initLoad && this.selectionSettings.checkboxPosition === 'Left') {\n        listWrap.classList.remove('e-right');\n      }\n\n      if (this.selectionSettings.checkboxPosition === 'Right') {\n        listWrap.classList.add('e-right');\n      }\n    }\n  }, {\n    key: \"showCheckbox\",\n    value: function showCheckbox(_showCheckbox) {\n      var index = 0;\n      var liColl = this.list.lastElementChild.querySelectorAll('li');\n      var liCollLen = this.list.lastElementChild.getElementsByClassName('e-list-item').length;\n\n      if (_showCheckbox) {\n        this.ulElement = this.renderItems(this.listData, this.fields);\n        this.mainList = this.ulElement;\n        this.list.removeChild(this.list.getElementsByTagName('ul')[0]);\n        this.list.appendChild(this.ulElement);\n\n        if (this.selectionSettings.showSelectAll && !this.list.getElementsByClassName('e-selectall-parent')[0]) {\n          var l10nShow = new L10n(this.getModuleName(), {\n            selectAllText: 'Select All',\n            unSelectAllText: 'Unselect All'\n          }, this.locale);\n          this.showSelectAll = true;\n          this.selectAllText = l10nShow.getConstant('selectAllText');\n          this.unSelectAllText = l10nShow.getConstant('unSelectAllText');\n          this.popupWrapper = this.list;\n          this.checkBoxSelectionModule.checkAllParent = null;\n          this.notify('selectAll', {});\n          this.checkSelectAll();\n        }\n      } else {\n        if (this.list.getElementsByClassName('e-selectall-parent')[0]) {\n          this.list.removeChild(this.list.getElementsByClassName('e-selectall-parent')[0]);\n        }\n\n        for (index; index < liCollLen; index++) {\n          if (liColl[index].classList.contains('e-list-item')) {\n            liColl[index].removeChild(liColl[index].getElementsByClassName('e-checkbox-wrapper')[0]);\n          }\n\n          if (liColl[index].hasAttribute('aria-selected')) {\n            liColl[index].removeAttribute('aria-selected');\n          }\n        }\n\n        this.mainList = this.ulElement;\n      }\n\n      this.value = [];\n    }\n  }, {\n    key: \"isSelected\",\n    value: function isSelected(ele) {\n      if (!isNullOrUndefined(ele)) {\n        return ele.classList.contains(cssClass.selected) || ele.querySelector('.e-check') !== null;\n      } else {\n        return false;\n      }\n    }\n  }, {\n    key: \"getSelectTag\",\n    value: function getSelectTag() {\n      return this.list.getElementsByClassName('e-hidden-select')[0];\n    }\n  }, {\n    key: \"getToolElem\",\n    value: function getToolElem() {\n      return this.list.parentElement.getElementsByClassName('e-listbox-tool')[0];\n    }\n  }, {\n    key: \"formResetHandler\",\n    value: function formResetHandler() {\n      this.value = this.initialSelectedOptions;\n    }\n    /**\n     * Return the module name.\n     *\n     * @private\n     * @returns {string} - Module name\n     */\n\n  }, {\n    key: \"getModuleName\",\n    value: function getModuleName() {\n      return 'listbox';\n    }\n    /**\n     * Get the properties to be maintained in the persisted state.\n     *\n     * @returns {string} - Persist data\n     */\n\n  }, {\n    key: \"getPersistData\",\n    value: function getPersistData() {\n      return this.addOnPersist(['value']);\n    }\n  }, {\n    key: \"getLocaleName\",\n    value: function getLocaleName() {\n      return 'listbox';\n    }\n  }, {\n    key: \"destroy\",\n    value: function destroy() {\n      this.unwireEvents();\n\n      if (this.element.tagName === 'EJS-LISTBOX') {\n        this.element.innerHTML = '';\n      } else {\n        this.element.style.display = 'inline-block';\n\n        if (this.toolbarSettings.items.length) {\n          this.list.parentElement.parentElement.insertBefore(this.list, this.list.parentElement);\n          detach(this.list.nextElementSibling);\n        }\n\n        this.list.parentElement.insertBefore(this.element, this.list);\n      }\n\n      _get(_getPrototypeOf(ListBox.prototype), \"destroy\", this).call(this);\n\n      if (this.itemTemplate) {\n        this.clearTemplate();\n      }\n    }\n    /**\n     * Called internally if any of the property value changed.\n     *\n     * @param {ListBoxModel} newProp - Specifies the new properties.\n     * @param {ListBoxModel} oldProp - Specifies the old properties.\n     * @returns {void}\n     * @private\n     */\n\n  }, {\n    key: \"onPropertyChanged\",\n    value: function onPropertyChanged(newProp, oldProp) {\n      var wrap = this.toolbarSettings.items.length ? this.list.parentElement : this.list;\n\n      _get(_getPrototypeOf(ListBox.prototype), \"onPropertyChanged\", this).call(this, newProp, oldProp);\n\n      this.setUpdateInitial(['fields', 'query', 'dataSource'], newProp);\n\n      for (var _i17 = 0, _Object$keys10 = Object.keys(newProp); _i17 < _Object$keys10.length; _i17++) {\n        var prop = _Object$keys10[_i17];\n\n        switch (prop) {\n          case 'cssClass':\n            if (oldProp.cssClass) {\n              removeClass([wrap], oldProp.cssClass.split(' '));\n            }\n\n            if (newProp.cssClass) {\n              addClass([wrap], newProp.cssClass.split(' '));\n            }\n\n            break;\n\n          case 'enableRtl':\n            if (newProp.enableRtl) {\n              this.list.classList.add('e-rtl');\n            } else {\n              this.list.classList.remove('e-rtl');\n            }\n\n            break;\n\n          case 'value':\n            removeClass(this.list.querySelectorAll('.' + cssClass.selected), cssClass.selected);\n            this.clearSelection(this.value);\n            this.setSelection();\n            break;\n\n          case 'height':\n            this.setHeight();\n            break;\n\n          case 'enabled':\n            this.setEnable();\n            break;\n\n          case 'allowDragAndDrop':\n            if (newProp.allowDragAndDrop) {\n              this.initDraggable();\n            } else {\n              _getComponent(this.ulElement, 'sortable').destroy();\n            }\n\n            break;\n\n          case 'allowFiltering':\n            if (this.allowFiltering) {\n              this.setFiltering();\n            } else {\n              this.list.removeChild(this.list.getElementsByClassName('e-filter-parent')[0]);\n              this.filterParent = null;\n              removeClass([this.list], 'e-filter-list');\n            }\n\n            break;\n\n          case 'filterBarPlaceholder':\n            if (this.allowFiltering) {\n              if (this.filterInput) {\n                Input.setPlaceholder(newProp.filterBarPlaceholder, this.filterInput);\n              }\n            }\n\n            break;\n\n          case 'scope':\n            if (this.allowDragAndDrop) {\n              _getComponent(this.ulElement, 'sortable').scope = newProp.scope;\n            }\n\n            if (this.toolbarSettings.items.length) {\n              if (oldProp.scope) {\n                _getComponent(document.querySelector(oldProp.scope), this.getModuleName()).tBListBox = null;\n              }\n\n              if (newProp.scope) {\n                _getComponent(document.querySelector(newProp.scope), this.getModuleName()).tBListBox = this;\n              }\n            }\n\n            break;\n\n          case 'toolbarSettings':\n            {\n              var ele = void 0;\n              var pos = newProp.toolbarSettings.position;\n              var toolElem = this.getToolElem();\n\n              if (pos) {\n                removeClass([wrap], ['e-right', 'e-left']);\n                wrap.classList.add('e-' + pos.toLowerCase());\n\n                if (pos === 'Left') {\n                  wrap.insertBefore(toolElem, this.list);\n                } else {\n                  wrap.appendChild(toolElem);\n                }\n              }\n\n              if (newProp.toolbarSettings.items) {\n                if (oldProp.toolbarSettings && oldProp.toolbarSettings.items.length) {\n                  ele = this.list.parentElement;\n                  ele.parentElement.insertBefore(this.list, ele);\n                  detach(ele);\n                }\n\n                this.initToolbarAndStyles();\n                this.wireToolbarEvent();\n              }\n\n              break;\n            }\n\n          case 'selectionSettings':\n            {\n              var showSelectAll = newProp.selectionSettings.showSelectAll;\n              var showCheckbox = newProp.selectionSettings.showCheckbox;\n\n              if (!isNullOrUndefined(showSelectAll)) {\n                this.showSelectAll = showSelectAll;\n\n                if (this.showSelectAll) {\n                  var l10nSel = new L10n(this.getModuleName(), {\n                    selectAllText: 'Select All',\n                    unSelectAllText: 'Unselect All'\n                  }, this.locale);\n                  this.checkBoxSelectionModule.checkAllParent = null;\n                  this.showSelectAll = true;\n                  this.selectAllText = l10nSel.getConstant('selectAllText');\n                  this.unSelectAllText = l10nSel.getConstant('selectAllText');\n                  this.popupWrapper = this.list;\n                }\n\n                this.notify('selectAll', {});\n                this.checkSelectAll();\n              }\n\n              if (!isNullOrUndefined(showCheckbox)) {\n                this.showCheckbox(showCheckbox);\n              }\n\n              if (this.selectionSettings.showCheckbox) {\n                this.setCheckboxPosition();\n              }\n\n              break;\n            }\n\n          case 'dataSource':\n            this.isDataSourceUpdate = true;\n            this.jsonData = [].slice.call(this.dataSource);\n            break;\n        }\n      }\n    }\n  }]);\n\n  return ListBox;\n}(DropDownBase);\n\n__decorate$6([Property('')], ListBox.prototype, \"cssClass\", void 0);\n\n__decorate$6([Property([])], ListBox.prototype, \"value\", void 0);\n\n__decorate$6([Property('')], ListBox.prototype, \"height\", void 0);\n\n__decorate$6([Property(false)], ListBox.prototype, \"allowDragAndDrop\", void 0);\n\n__decorate$6([Property(1000)], ListBox.prototype, \"maximumSelectionLength\", void 0);\n\n__decorate$6([Property(false)], ListBox.prototype, \"allowFiltering\", void 0);\n\n__decorate$6([Property('')], ListBox.prototype, \"scope\", void 0);\n\n__decorate$6([Property(true)], ListBox.prototype, \"ignoreCase\", void 0);\n\n__decorate$6([Property(null)], ListBox.prototype, \"filterBarPlaceholder\", void 0);\n\n__decorate$6([Event()], ListBox.prototype, \"beforeItemRender\", void 0);\n\n__decorate$6([Event()], ListBox.prototype, \"filtering\", void 0);\n\n__decorate$6([Event()], ListBox.prototype, \"select\", void 0);\n\n__decorate$6([Event()], ListBox.prototype, \"change\", void 0);\n\n__decorate$6([Event()], ListBox.prototype, \"beforeDrop\", void 0);\n\n__decorate$6([Event()], ListBox.prototype, \"dragStart\", void 0);\n\n__decorate$6([Event()], ListBox.prototype, \"drag\", void 0);\n\n__decorate$6([Event()], ListBox.prototype, \"drop\", void 0);\n\n__decorate$6([Event()], ListBox.prototype, \"dataBound\", void 0);\n\n__decorate$6([Property(null)], ListBox.prototype, \"groupTemplate\", void 0);\n\n__decorate$6([Property('Request failed')], ListBox.prototype, \"actionFailureTemplate\", void 0);\n\n__decorate$6([Property(1000)], ListBox.prototype, \"zIndex\", void 0);\n\n__decorate$6([Property(false)], ListBox.prototype, \"ignoreAccent\", void 0);\n\n__decorate$6([Complex({}, ToolbarSettings)], ListBox.prototype, \"toolbarSettings\", void 0);\n\n__decorate$6([Complex({}, SelectionSettings)], ListBox.prototype, \"selectionSettings\", void 0);\n\nListBox = ListBox_1 = __decorate$6([NotifyPropertyChanges], ListBox);\nvar listBoxClasses = {\n  backIcon: 'e-input-group-icon e-back-icon e-icons',\n  filterBarClearIcon: 'e-input-group-icon e-clear-icon e-icons',\n  filterInput: 'e-input-filter',\n  filterParent: 'e-filter-parent',\n  clearIcon: 'e-clear-icon'\n};\n/**\n * export all modules from current location\n */\n\n/**\n * export all modules from current location\n */\n\nexport { _incrementalSearch as incrementalSearch, Search, resetIncrementalSearchValues, highlightSearch, revertHighlightSearch, FieldSettings, dropDownBaseClasses, DropDownBase, dropDownListClasses, DropDownList, Fields, TreeSettings, DropDownTree, ComboBox, AutoComplete, MultiSelect, CheckBoxSelection, createFloatLabel, updateFloatLabelState, removeFloating, setPlaceHolder, floatLabelFocus, floatLabelBlur, encodePlaceholder, SelectionSettings, ToolbarSettings, ListBox };","map":{"version":3,"sources":["D:/angularStarter/11-24/syncfusion-mytemplate/template-v1/node_modules/@syncfusion/ej2-dropdowns/dist/es6/ej2-dropdowns.es2015.js"],"names":["Animation","Browser","ChildProperty","Complex","Component","Event","EventHandler","KeyboardEvents","L10n","NotifyPropertyChanges","Property","SanitizeHtmlHelper","addClass","append","attributes","classList","closest","compile","createElement","detach","extend","formatUnit","getComponent","getUniqueID","getValue","isNullOrUndefined","isUndefined","matches","prepend","remove","removeClass","rippleEffect","select","selectAll","setStyleAttribute","setValue","DataManager","DataUtil","Predicate","Query","ListBase","Sortable","cssClass","moveTo","Popup","createSpinner","getZindexPartial","hideSpinner","isCollide","showSpinner","Input","TextBox","Button","createCheckBox","TreeView","queryString","prevString","matches$1","activeClass","prevElementId","incrementalSearch","keyCode","items","selectedIndex","ignoreCase","elementId","String","fromCharCode","setTimeout","index","toLowerCase","i","length","contains","listItems","strLength","text","item","innerText","substr","push","Search","inputVal","searchType","undefined","itemData","queryStr","toLocaleLowerCase","itemsData","textContent","replace","resetIncrementalSearchValues","highlightSearch","element","query","type","ignoreRegex","test","replaceQuery","findTextNode","RegExp","pattern","childNodes","nodeType","trim","value","nodeValue","innerHTML","revertHighlightSearch","content","contentElement","querySelectorAll","parent","parentNode","document","createTextNode","replaceChild","__decorate","decorators","target","key","desc","c","arguments","r","Object","getOwnPropertyDescriptor","d","Reflect","decorate","defineProperty","FieldSettings","prototype","dropDownBaseClasses","root","rtl","selected","hover","noData","fixedHead","focus","li","group","disabled","grouping","ITEMTEMPLATE_PROPERTY","VALUETEMPLATE_PROPERTY","GROUPTEMPLATE_PROPERTY","HEADERTEMPLATE_PROPERTY","FOOTERTEMPLATE_PROPERTY","NORECORDSTEMPLATE_PROPERTY","ACTIONFAILURETEMPLATE_PROPERTY","DropDownBase","options","preventChange","isAngular","isPreventChange","isDynamicDataChange","prop","newProp","oldProp","newProperty","oldProperty","propName","data","ignoreAccent","listData","checkValueCase","isTextByValue","dataSource","fields","typeOfData","typeof","checkingAccent","checkIgnoreCase","getItemValue","checkNonIgnoreCase","filter","itemValue","toString","compareValue","dataItem","ignoreDiacritics","textItem","typedText","getFormattedValue","baseTemplate","checkTemplate","exception","actionFailure","ele","getModuleName","ulElement","list","noRecordsTemplate","actionFailureTemplate","template","compiledString","templateId","actionFailureTemplateId","noRecordsTemplateId","tempaltecheck","templateCompiler","templateName","noDataCompTemp","isStringTemplate","appendChild","renderReactTemplates","l10nLocale","componentLocale","getLocaleName","locale","getConstant","l10n","liElem","add","parseFloat","enableRtlElements","enableRtl","bindEvent","id","tagName","jsonElement","createJsonFromElement","setProperties","resetList","Array","renderItemsBySelect","setListData","addOnPersist","setAttribute","enabled","invalidAttr","attr","a","indexOf","name","getAttribute","htmlAttributes","option","getJSONfromOption","optionGroup","label","isHeader","child","updateFields","groupBy","iconCss","field","json","scrollTimer","isRequested","isDataFetched","itemTemplateId","valueTemplateId","groupTemplateId","headerTemplateId","footerTemplateId","isActive","eventArgs","cancel","trigger","emptyDataRequest","executeQuery","getQuery","then","e","result","renderItems","onActionComplete","groupTemplate","renderGroupTemplate","bindChildItems","catch","onActionFailure","dataManager","executeLocal","localDataArgs","childNode","remainingItems","sortedData","liCollections","updateListValues","raiseDataBound","findNode","attribute","liElement","listArr","slice","call","dataBoundEventArgs","spliceData","skip","itemTemplate","listElements","templateListItem","createListItemFromArray","listOption","createListItemFromJson","l10nUpdate","isReact","clearTemplate","fixedHeaderElement","querySelector","postRender","listElement","focusItem","selectedItem","listEle","groupTemplateID","headerItems","groupcheck","groupValue","tempHeaders","properties","sortOrder","getSortedDataSource","groupDataSource","take","createList","fieldValues","showIcon","ariaAttributes","groupItemRole","className","style","display","setFixedHeader","zIndex","scrollStop","liHeight","parseInt","getComputedStyle","getValidLi","getPropertyValue","topIndex","Math","round","scrollTop","currentLi","top","createListItems","templateID","itemcheck","renderContentTemplate","listDataType","isNullData","parentElement","borderWidth","defaultView","isNaN","borderTopWidth","borderBottomWidth","borderLeftWidth","borderRightWidth","liWidth","offsetWidth","width","firstLi","textField","getDataSource","addSorting","getItems","evt","createEvent","initEvent","dispatchEvent","selectData","isFiltering","render","props","updateData","j","setFields","keys","updateDataSource","setUpdateInitial","setEnableRtl","setEnabled","setZIndex","isEmptyData","attrs","rippleModel","duration","selector","rippleFun","isGroupChecking","setFloatingHeader","wrapperElement","insertBefore","initialize","itemIndex","renderList","newList","itemsCount","selectedItemValue","itemText","addItemTemplate","notify","module","updateActionCompleteData","updateAddItemList","listGroupItem","tempLi","splice","updateDataList","updateSelection","hidden","removeAttribute","attributes$$1","itemCount","body","__decorate$1","dropDownListClasses","disable","base","input","inputFocus","icon","iconAnimation","device","backIcon","filterBarClearIcon","filterInput","filterParent","mobileFilter","footer","header","clearIcon","clearIconHide","popupFullScreen","disableIcon","hiddenElement","inputObject","container","buttons","DropDownList","isListSearched","valueTempElement","opacity","initializeData","activeIndex","isPopupOpen","isDocumentClick","isInteracted","isFilterFocus","beforePopupOpen","initial","initRemoteRender","isNotSearchList","isTyped","isSelected","preventFocus","preventAutoFill","isValidKey","typedString","isEscapeKey","isPreventBlur","isTabKey","actionCompleteData","isUpdated","actionData","prevSelectPoints","isSelectCustom","isDropDownClick","preventAltUp","isCustomFilter","isSecondClick","previousValue","keyConfigure","tab","enter","escape","end","home","down","up","pageUp","pageDown","open","close","hide","space","popupObj","unWireListEvents","wireListEvents","floatLabelType","floatElement","inputWrapper","inputElement","preventDefault","clearAll","removeHover","removeSelection","removeFocus","resetSelection","getItemData","onChangeEvent","selectedLI","allowFiltering","cloneNode","resetFocusElement","setSelection","updateIconState","cloneElements","htmlAttr","updatedClassValue","split","setEnable","readonly","dataBind","defaultAttr","validateAttr","setPlaceholder","targetElement","tabIndex","hidePopup","getElementByValue","getValueByText","liItem","updateValues","getElementByText","setHiddenValue","showClearButton","relatedTarget","currentTarget","isFilterLayout","activeElement","focusOutAction","focusOut","onFocusOut","floatLabelChange","clearButton","args","event","formElement","val","getNgDirective","dropDownClick","focusIn","onSearch","bindCommonEvent","onBlurHandler","resetValueHandler","isDevice","keyboardModule","keyAction","keyActionHandler","bind","keyConfigs","eventName","mobileKeyActionHandler","bindClearEvent","resetHandler","destroy","onMouseClick","onMouseOver","onMouseLeave","charCode","searchKeyEvent","onServerIncrementalSearch","isValidLI","history","back","delay","closePopup","setHover","hoveredItem","hasAttribute","setScrollPosition","spinnerElement","filterInputObj","preventAction","action","preventHomeEnd","isNavAction","isNavigation","isEditTextBox","isTabAction","updateUpDownAction","pageUpSelection","getPageCount","pageDownSelection","updateHomeEndAction","showPopup","focusDropDown","selectCurrentItem","selectCurrentValueOnTab","focusEle","isSelectFocusItem","startIndex","nextItem","findLi","getBoundingClientRect","height","steps","previousItem","unBindCommonEvent","checkSelector","isIE","info","which","button","proxy","preventSelect","isSelection","selectedData","getDataByValue","detachChanges","selectEventCallback","setSelectOptions","previousItemData","focusedItem","getIndexByValue","valueTemplate","setValueTemplate","previousSibling","isFilterElement","clearElement","removeProperty","updateSelectedItem","previousSelectedLI","dropdownTemplate","valuecheck","dropdownCompiler","valueCompTemp","selectedItems","dataValue","dataText","eve","detachChangeEvent","defineProperties","enumerable","preItems","selectedElement","ctrlKey","searchLists","getSelectionPoints","selection","setSelectionRange","filterQuery","clone","filterType","dataType","where","start","abs","selectionStart","selectionEnd","visibility","preventDefaultAction","filteringAction","baseEventArgs","focusIndexItem","popupElement","createInput","placeholder","filterBarPlaceholder","clearIconElement","clearText","searchKeyModule","onInput","onFilterUp","onFilterDown","pasteHandler","renderPopup","updateSelectElementData","checkField","checkVal","some","x","addItem","updateActionCompleteDataValues","addNewItem","newElement","isExist","actionCompleteDataUpdate","findListElement","activeItem","highlightedItem","refreshPopup","popupEle","searchBox","setSearchBox","listHeight","popupHeight","headerTemplate","setHeaderTemplate","footerTemplate","setFooterTemplate","searchBoxHeight","maxHeight","offsetValue","left","getOffsetValue","firstItem","isEmptyList","textIndent","paddingLeft","getFocusElement","createPopup","checkCollision","collision","X","Y","position","setSearchBoxPosition","backIconElement","clickOnBackIcon","scrollParentElements","getScrollableParent","scrollHandler","listScroll","inputParent","animModel","popupInstance","popup","animation","show","destroyPopup","marginTop","resolveCollision","popupStyles","borderTop","borderBottom","setPopupPosition","setWidth","targetType","relateTo","offsetY","offsetX","isResetItem","onDocumentClick","actionList","activeStateChange","targetExitViewport","window","innerHeight","border","popupOffset","lastItem","offsetHeight","offsetTop","lastItemOffsetValue","count","paddingBottom","inputHeight","popupWidth","inputWidth","isInitial","currentOffset","nextBottom","nextOffset","paddingTop","boxRange","scrollBottom","blur","match","scrollableParentElements","fixedHeader","removeChild","role","preventTabIndex","updatedCssClassValues","isPopupButton","validationAttribute","setReadOnly","wireEvent","getAriaAttributes","updateDataAttribute","setHTMLAttributes","initValue","selectElement","onselect","stopImmediatePropagation","onchange","renderComplete","footercheck","footerCompTemp","headercheck","headerCompTemp","contentEle","refreshPosition","isChangeValue","isChangeText","checkCustomValue","checkData","setEleWidth","setReadonly","setCssClass","checkValidLi","setSelectionData","setOldText","updateInputFields","setOldValue","removeFloating","addFloating","setClearButton","ddlProps","getPropObject","newClass","oldClass","invokeRenderPopup","onpopstate","pushState","children","isSelectVal","isFocused","onFocus","unWireEvent","attrArray","__decorate$2","RTL","DROPDOWNTREE","HIDDENELEMENT","DROPDOWNICON","SHOW_CHIP","SHOW_CLEAR","SHOW_DD_ICON","CHIP_INPUT","INPUTFOCUS","INPUTGROUP","ICONANIMATION","CLOSEICON_CLASS","CHIP_WRAPPER","CHIP_COLLECTION","CHIP","CHIP_CONTENT","CHIP_CLOSE","HIDEICON","DDTHIDEICON","POPUP_CLASS","PARENTITEM","CONTENT","DROPDOWN","DISABLED","ICONS","CHECKALLPARENT","CHECKALLHIDE","BIGGER","SMALL","ALLTEXT","CHECKBOXFRAME","CHECK","CHECKBOXWRAP","FILTERWRAP","DDTICON","FOOTER","HEADER","NODATACONTAINER","NODATA","HEADERTEMPLATE","FOOTERTEMPLATE","NORECORDSTEMPLATE","ACTIONFAILURETEMPLATE","CUSTOMTEMPLATE","REMAIN_WRAPPER","OVERFLOW_VIEW","SHOW_TEXT","TOTAL_COUNT_WRAPPER","REMAIN_COUNT","Fields","TreeSettings","DropDownTree","filterTimer","isFilteredData","isFilterRestore","filterDelayTime","isClicked","keyEntity","isFirstRender","isInitialized","currentText","currentValue","oldValue","removeValue","selectedText","treeItems","isNodeSelected","isDynamicChange","clearIconWidth","customTemplateId","altUp","altDown","shiftTab","moveDown","moveLeft","moveRight","moveUp","ctrlDown","ctrlUp","ctrlEnter","ctrlHome","ctrlEnd","shiftDown","shiftUp","shiftEnter","shiftHome","shiftEnd","csDown","csUp","csEnter","csHome","csEnd","ctrlA","isTree","popupDiv","ensureAutoCheck","inputEle","inputObj","showDropDownIcon","getDirective","createHiddenElement","createClearIcon","setElementWidth","setAttributes","tree","wireTreeEvents","renderTree","isRemoteData","allowMultiSelection","showCheckBox","mode","createChip","wrapText","overFlowWrapper","setTreeValue","setTreeText","updateHiddenValue","setSelectedValue","updateView","wireEvents","firstUl","treeObj","hasTemplate","customTemplate","treeSettings","autoCheck","flag","checkAllEle","filterContainer","autocomplete","filterObj","filterChangeHandler","appendTo","clearTimeout","filterHandler","treeData","getTreeData","filterFields","cloneFields","treeDataType","selfReferencefilter","nestedFilter","hideCheckAll","getTreeFields","filteredFields","matchedDataSource","filteredChild","nestedChildFilter","node","isMatchedNode","matchedChildren","matchedData","parentId","parentValue","checkValue","mouseIn","overAllClear","windowResize","treeAction","checkAllParent","checkAllAction","isClearButtonClick","showOverAllClear","isValue","chipWrapper","changeOnBlur","triggerChangeEvent","updateOverFlowView","ensurePlaceHolder","isEqual","ddtCompareValues","isChipDelete","newValue","isValid","observedArgs","isValueChange","keyEventArgs","showSelectAll","clickHandler","resetValue","overAllContainer","temp","tempData","tempIndex","wrapperleng","remaining","downIconWidth","overflowCountTemplate","totalCountTemplate","remainContent","remainElement","totalCompiledString","remainSize","delimiterChar","getOverflowVal","textArr","pop","join","chips","lastChild","updateRemainTemplate","updateDelimMode","firstChild","getSelectedData","loadOnDemand","chipCollection","getValidMode","selectAllSpan","touchClass","checkBoxElement","setLocale","wireCheckAllWrapperEvents","firstElementChild","lastElementChild","checkWrapper","checkElement","changeState","wrapper","state","ariaState","frameSpan","getElementsByClassName","isReverseUpdate","checkAll","uncheckAll","setMultiSelect","unSelect","selectAllText","unSelectAllText","setValidValue","valArr","selectedNodes","updateMode","checkedNodes","updateSelectedValues","givenText","getNestedItems","newData","objlen","dataId","childData","getChildType","mapper","nodeSelected","onNodeSelected","nodeChecked","onNodeChecked","nodeChecking","beforeCheck","nodeClicked","onNodeClicked","dataBound","OnDataBound","expandOn","nodeSelecting","onBeforeSelect","nodeTemplate","isCancelled","renderFilter","createSelectAllWrapper","portals","concat","updatePopupHeight","checkSelectAll","wrap","getHeight","ddElement","documentElement","clientHeight","isFilter","isFooter","isScroller","getTreeDataType","expandAll","restoreFilterSelection","elements","clonedField","cloneChildField","hasChildren","expanded","imageUrl","tableName","tooltip","treeFields","parentID","getTreeChildren","isChecked","getActualProperties","childFields","ds","len","updateTemplate","nodeData","getNode","getEventArgs","getNodeDetails","removeSelectedData","nodes","nextSibling","chipClose","spinIcon","appendSpan","newValues","selectedValues","setMultiSelectValue","ddtValue","checkSelection","getNodeData","childItems","getChildNodeData","obj","newChildItems","childNodeData","getChildMapperFields","muteOnChange","textValue","hiddenInputValue","setChipValues","setTagValues","chip","chipContent","removeChip","templatestring","templateComplier","tempArr","updateOverflowWrapper","clearCheckAll","arr","updateValue","checkBox","setSelectAllWrapper","noRecord","updateOption","destroyFilter","validMode","overFlow","setEnableRTL","ensureClearIconPosition","updateClearButton","updateAllowFiltering","updateFilterPlaceHolder","updateText","updateMultiSelection","updateModelMode","updateCheckBoxState","updateTreeSettings","updateDropDownIconState","updateRecordTemplate","unWireEvents","ensureVisible","selectAllItems","__decorate$3","SPINNER_CLASS","inputObject$1","ComboBox","preventBlur","targetFocus","inputValue","customValue","allowCustom","valueMuteChange","setHoverList","inlineSearch","removeFillSelection","autofill","isHover","getTextByValue","currentFillValue","isAndroidAutoFill","setAutoFillSelection","isAndroid","currentPoints","prevEnd","curEnd","prevStart","curStart","property","isKeyNavigate","setAutoFill","updateCustomValueCallback","changeData","comboProps","isEscape","searchItem","__decorate$4","AutoComplete","isFiltered","searchList","mapping","suggestionCount","queryElements","queries","fn","filterAction","minLength","postBackAction","fieldsSettings","itemCreated","highlight","apply","showPopupButton","atcProps","isHighlight","FLOATLINE","FLOATTEXT","LABELTOP","LABELBOTTOM","createFloatLabel","overAllWrapper","searchWrapper","floatLinelement","floatLabelElement","encodePlaceholder","updateFloatLabelState","componentWrapper","placeholderElement","floatLine","placeholderText","setPlaceHolder","floatLabelFocus","floatLabelBlur","spanElement","hiddenInput","__decorate$5","FOCUS","DISABLED$1","OVER_ALL_WRAPPER","ELEMENT_WRAPPER","ELEMENT_MOBILE_WRAPPER","HIDE_LIST","DELIMITER_VIEW","CHIP_WRAPPER$1","CHIP$1","CHIP_CONTENT$1","CHIP_CLOSE$1","CHIP_SELECTED","SEARCHBOX_WRAPPER","DELIMITER_VIEW_WRAPPER","ZERO_SIZE","REMAIN_WRAPPER$1","CLOSEICON_CLASS$1","DELIMITER_WRAPPER","POPUP_WRAPPER","INPUT_ELEMENT","RTL_CLASS","CLOSE_ICON_HIDE","MOBILE_CHIP","FOOTER$1","HEADER$1","DISABLE_ICON","SPINNER_CLASS$1","HIDDEN_ELEMENT","dropdownIcon","TOTAL_COUNT_WRAPPER$1","BOX_ELEMENT","FILTERPARENT","CUSTOM_WIDTH","FILTERINPUT","MultiSelect","selectAllEventData","selectAllEventEle","scrollFocusStatus","keyDownStatus","modules","enableGroupCheckBox","prevOnChange","isProtectedOnChange","enableSelectionOrder","allowCustomValue","hideSelectedItem","closePopupOnSelect","member","popupWrapper","enable","refreshPlaceHolder","containerAttr","focusAtFirstListItem","updateListItems","mainList","isFirstClick","loadTemplate","mainListItems","findGroupStart","deselectHeader","refreshListItems","valueEle","addListFocus","disableStatus","ensureAriaDisabled","status","chipCollectionWrapper","tempValues","removeChipSelection","updateDelimeter","makeTextBoxEmpty","refreshSelection","checkPlaceholderSize","onPopupShown","targetInputElement","predicate","or","checkEle","updateActionList","mainData","mainListCollection","remoteCustomValue","checkForCustomValue","tempQuery","updateListARIA","unwireListEvents","setInitialValue","selectAllAction","setDynValue","initialTextUpdate","initialValueUpdate","initialUpdate","updateValueState","previousElementSibling","nextElementSibling","hideGroupItem","ariaValue","checkMaxSelection","element1","temp1","groupItemLength","listItem","searchCount","searchActiveCount","maximumSelectionLength","openOnClick","char","isWordCharacter","expandTextbox","search","remoteFilterAction","dataUpdater","backCommand","dataChecks","customData","random","JSON","parse","stringify","isDocClickFromCheck","addTagOnBlur","listLiElement","allowChipAddition","updateListSelection","updateDelimView","focused","removeChipFocus","refreshInputHight","dropIcon","marginRight","setPlaceholderSize","sort","newVal","oldVal","initStatus","validateValues","updateTempValue","collection","showDelimWrapper","viewWrapper","delimiterWrapper","size","mobFilter","calcPopupWidth","isHome","scrollEle","altKey","popupKeyActions","homeNavigation","getPagingCount","updateAriaAttribute","arrowUp","arrowDown","selectByKey","spaceKeySelection","escapeAction","checkTextLength","keyNavigation","checkBackCommand","moveByList","onKeyDown","focuseElem","moveBy","removelastSelection","removeSelectedChip","focusAtLastListItem","selectListByKey","hideOverAllClear","limit","selectAllItem","selectedElem","addChipSelection","updateCheck","elem","customVal","setFloatLabelType","isClearAll","mainElement","removeVal","invokeCheckboxSelection","updateMainList","updateChipStatus","isSelectAll","targetEle","removeIndex","hideElement","clearAllCallback","element2","addListSelection","addChip","isNotTrigger","isServerRendered","updateListSelectEventCallback","getChip","closeElements","chipElem","multiselectTemplate","multiCompiler","enableHtmlSanitizer","setClass","classes","onMobileChipInteraction","chipClick","onChipRemove","fieldProperty","listCurrentOptions","checkboxFilter","overAllHeight","selectAllHeight","unwireScrollEvents","checkboxFilterInput","wireScrollEvents","onListMouseDown","textVal","wrapperClick","focusInHandler","keyUp","mouseOut","openClick","delim","listValue","updateWrapperText","addValidInputClass","childElementCount","removeListSelection","indexItem","noDataEle","dispatchSelect","fieldValue","addValue","selectItems","mainlist","ariaCheck","delimChar","headerLi","liChecked","liUnchecked","groupValues","findGroupAttrtibutes","updateCheckBox","checked","unChecked","groupHeader","addListHover","filterClear","wrapperType","wrapperData","sanitize","hideDelimWrapper","totalContent","raminElement","remainCompildTemp","checkClearIconWidth","paddingRight","totalWidth","updateRemainWidth","updateRemainingText","remainTemp","totalTemp","newTemp","selectionLimit","focusedElement","textboxValueUpdate","beforeSelectArgs","preventSelectEvent","updatedataValueItems","updateHiddenElement","removeAllItems","hiddenValue","wrapperText","map","isRemoveAll","updateHTMLAttribute","updateVal","updateOldPropCssClass","updateCssClass","enableRTL","updateReadonly","dropDownIcon","reInitializePoup","msProps","onLoadSelect","mainLiLength","liLength","styles","spellcheck","tabindex","checkInitialValue","isData","optionsElement","valueCol","textCol","optionsLen","opt","checkAutoFocus","ICON","CHECKBOXFRAME$1","CHECK$1","CHECKBOXWRAP$1","INDETERMINATE","searchBackIcon","FOCUS$1","CheckBoxSelection","activeLi","activeEle","removeEventListener","addEventListener","isDestroyed","on","listSelection","setSelectAll","setDeviceSearchBox","getFocus","setReorder","getActiveList","checboxCreate","setPopupFullScreen","off","checkboxEle","frameElm","checkboxWrapper","selectAll$$1","validateCheckNode","checkWrap","isCheck","isPrevent","activeLiCount","remLi","ulEle","__decorate$6","ListBox_1","SelectionSettings","ToolbarSettings","ListBox","isDataSourceUpdate","inputString","initLoad","isCustomFiltering","initialSelectedOptions","hiddenSelect","selectionSettings","updateSelectionSettings","showCheckbox","l10nSelect","checkBoxSelectionModule","allowDragAndDrop","scope","itemClass","dragStart","triggerDragStart","drag","triggerDrag","beforeDrop","beforeDragEnd","drop","dragEnd","placeHolder","helper","sender","refEle","jsonData","pos","toolbarSettings","prevScope","toolElem","createButtons","updateToolBarState","tBListBox","getElementById","btn","title","moveFrom","moveAllTo","moveAllFrom","forEach","required","spinner","refreshClearIcon","KeyUp","listBoxClasses","searchEle","noRecElem","filterWireEvents","initWrapper","initDraggable","initToolbarAndStyles","setCheckboxPosition","setFiltering","filterElem","txtLength","scopedLB","initToolbar","setHeight","badge","getDragArgs","dragSelected","isIos","overflow","dragEventArgs","allowDragAll","listObj","dragValue","droppedElement","getDataByValues","isDragAll","liColl","droppedData","selectedOptions","dropValue","getArgs","sourceArgs","previousData","destArgs","dragArgs","source","previousIndex","currentIndex","sourceArgs1","currentData","destination","ul","toSortIdx","toIdx","getCurIdx","rIdx","jsonIdx","sIdx","idx","fLiColl","currIdx","fListData","fSortData","srcIdx","jsonSrcIdx","sortIdx","destIdx","liCollElem","removeSelected","sourceElem","sortable","placeHolderElement","dragArgs1","destElem","elems","triggerBeforeItemRender","curData","updateSelectedOptions","removeItem","objValue","dupData","itemIdx","removeIdxes","removeLiIdxes","k","updateLiCollection","getElemByValue","getSelectedItems","moveUpDown","targetId","tlistbox","getScopedListBox","moveData","moveAllData","sortData","liEle","getElementsByTagName","dataValue1","dataValue2","triggerChange","ulList","mainCount","ulEleCount","listindex","valueindex","form","keyDownHandler","focusOutHandler","wireToolbarEvent","formResetHandler","getToolElem","toolbarClickHandler","clearFilterIconElem","selectHandler","liItems","isKey","isSelect","currSelIdx","selectedLi","shiftKey","min","prevSelIdx","max","liDataValue","value1","values","selectedLis","getDataByElements","toolbarAction","moveItemTo","moveItemFrom","moveAllItemTo","moveAllItemFrom","getDataByElems","isUp","tempItems","reverse","jsonToIdx","fListBox","tListBox","dataIdx","tListData","tSortData","fliCollections","dataLiIdx","tliCollections","isRefresh","rLiCollection","n1","n2","toColl","tJsonData","selectNextList","inst","childCnt","liIdx","validIdx","getValidIndex","Number","fromIdx","cbox","isDragEnd","getGrabbedItems","stopPropagation","upDownKeyHandler","defaultIdx","fliIdx","fli","cli","eventArgsData","cul","updateSelectTag","dvalue","isText","liselect","getSelectTag","checkDisabledState","listWrap","checkboxPosition","liCollLen","l10nShow","unwireEvents","clearSelection","l10nSel"],"mappings":"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","sourcesContent":["import { Animation, Browser, ChildProperty, Complex, Component, Event, EventHandler, KeyboardEvents, L10n, NotifyPropertyChanges, Property, SanitizeHtmlHelper, addClass, append, attributes, classList, closest, compile, createElement, detach, extend, formatUnit, getComponent, getUniqueID, getValue, isNullOrUndefined, isUndefined, matches, prepend, remove, removeClass, rippleEffect, select, selectAll, setStyleAttribute, setValue } from '@syncfusion/ej2-base';\nimport { DataManager, DataUtil, Predicate, Query } from '@syncfusion/ej2-data';\nimport { ListBase, Sortable, cssClass, moveTo } from '@syncfusion/ej2-lists';\nimport { Popup, createSpinner, getZindexPartial, hideSpinner, isCollide, showSpinner } from '@syncfusion/ej2-popups';\nimport { Input, TextBox } from '@syncfusion/ej2-inputs';\nimport { Button, createCheckBox } from '@syncfusion/ej2-buttons';\nimport { TreeView } from '@syncfusion/ej2-navigations';\n\n/**\n * IncrementalSearch module file\n */\nlet queryString = '';\nlet prevString = '';\nlet matches$1 = [];\nconst activeClass = 'e-active';\nlet prevElementId = '';\n/**\n * Search and focus the list item based on key code matches with list text content\n *\n * @param  { number } keyCode - Specifies the key code which pressed on keyboard events.\n * @param  { HTMLElement[]} items - Specifies an array of HTMLElement, from which matches find has done.\n * @param { number } selectedIndex - Specifies the selected item in list item, so that search will happen\n * after selected item otherwise it will do from initial.\n * @param  { boolean } ignoreCase - Specifies the case consideration when search has done.\n * @param {string} elementId - Specifies the list element ID.\n * @returns {Element} Returns list item based on key code matches with list text content.\n */\nfunction incrementalSearch(keyCode, items, selectedIndex, ignoreCase, elementId) {\n    queryString += String.fromCharCode(keyCode);\n    setTimeout(() => {\n        queryString = '';\n    }, 1000);\n    let index;\n    queryString = ignoreCase ? queryString.toLowerCase() : queryString;\n    if (prevElementId === elementId && prevString === queryString) {\n        for (let i = 0; i < matches$1.length; i++) {\n            if (matches$1[i].classList.contains(activeClass)) {\n                index = i;\n                break;\n            }\n        }\n        index = index + 1;\n        return matches$1[index] ? matches$1[index] : matches$1[0];\n    }\n    else {\n        const listItems = items;\n        const strLength = queryString.length;\n        let text;\n        let item;\n        selectedIndex = selectedIndex ? selectedIndex + 1 : 0;\n        let i = selectedIndex;\n        matches$1 = [];\n        do {\n            if (i === listItems.length) {\n                i = -1;\n            }\n            if (i === -1) {\n                index = 0;\n            }\n            else {\n                index = i;\n            }\n            item = listItems[index];\n            text = ignoreCase ? item.innerText.toLowerCase() : item.innerText;\n            if (text.substr(0, strLength) === queryString) {\n                matches$1.push(listItems[index]);\n            }\n            i++;\n        } while (i !== selectedIndex);\n        prevString = queryString;\n        prevElementId = elementId;\n        return matches$1[0];\n    }\n}\n/**\n * Search the list item based on given input value matches with search type.\n *\n * @param {string} inputVal - Specifies the given input value.\n * @param {HTMLElement[]} items - Specifies the list items.\n * @param {SearchType} searchType - Specifies the filter type.\n * @param {boolean} ignoreCase - Specifies the case sensitive option for search operation.\n * @returns {Element | number} Returns the search matched items.\n */\nfunction Search(inputVal, items, searchType, ignoreCase) {\n    const listItems = items;\n    ignoreCase = ignoreCase !== undefined && ignoreCase !== null ? ignoreCase : true;\n    const itemData = { item: null, index: null };\n    if (inputVal && inputVal.length) {\n        const strLength = inputVal.length;\n        const queryStr = ignoreCase ? inputVal.toLocaleLowerCase() : inputVal;\n        for (let i = 0, itemsData = listItems; i < itemsData.length; i++) {\n            const item = itemsData[i];\n            const text = (ignoreCase ? item.textContent.toLocaleLowerCase() : item.textContent).replace(/^\\s+|\\s+$/g, '');\n            if ((searchType === 'Equal' && text === queryStr) || (searchType === 'StartsWith' && text.substr(0, strLength) === queryStr)) {\n                itemData.item = item;\n                itemData.index = i;\n                return { item: item, index: i };\n            }\n        }\n        return itemData;\n    }\n    return itemData;\n}\nfunction resetIncrementalSearchValues(elementId) {\n    if (prevElementId === elementId) {\n        prevElementId = '';\n        prevString = '';\n        queryString = '';\n        matches$1 = [];\n    }\n}\n\n/* eslint-disable jsdoc/require-param, valid-jsdoc */\n/**\n * Function helps to find which highlightSearch is to call based on your data.\n *\n * @param  {HTMLElement} element - Specifies an li element.\n * @param  {string} query - Specifies the string to be highlighted.\n * @param  {boolean} ignoreCase - Specifies the ignoreCase option.\n * @param  {HightLightType} type - Specifies the type of highlight.\n * @returns {void}\n */\nfunction highlightSearch(element, query, ignoreCase, type) {\n    if (query === '') {\n        return;\n    }\n    else {\n        const ignoreRegex = ignoreCase ? 'gim' : 'gm';\n        // eslint-disable-next-line\n        query = /^[a-zA-Z0-9- ]*$/.test(query) ? query : query.replace(/[\\-\\[\\]\\/\\{\\}\\(\\)\\*\\+\\?\\.\\\\\\^\\$\\|]/g, '\\\\$&');\n        const replaceQuery = type === 'StartsWith' ? '^(' + query + ')' : type === 'EndsWith' ?\n            '(' + query + ')$' : '(' + query + ')';\n        findTextNode(element, new RegExp(replaceQuery, ignoreRegex));\n    }\n}\n/* eslint-enable jsdoc/require-param, valid-jsdoc */\n/**\n *\n * @param {HTMLElement} element - Specifies the element.\n * @param {RegExp} pattern - Specifies the regex to match the searched text.\n * @returns {void}\n */\nfunction findTextNode(element, pattern) {\n    for (let index = 0; element.childNodes && (index < element.childNodes.length); index++) {\n        if (element.childNodes[index].nodeType === 3 && element.childNodes[index].textContent.trim() !== '') {\n            const value = element.childNodes[index].nodeValue.trim().replace(pattern, '<span class=\"e-highlight\">$1</span>');\n            element.childNodes[index].nodeValue = '';\n            element.innerHTML = element.innerHTML.trim() + value;\n            break;\n        }\n        else {\n            findTextNode(element.childNodes[index], pattern);\n        }\n    }\n}\n/**\n * Function helps to remove highlighted element based on your data.\n *\n * @param  {HTMLElement} content - Specifies an content element.\n * @returns {void}\n */\nfunction revertHighlightSearch(content) {\n    const contentElement = content.querySelectorAll('.e-highlight');\n    for (let i = contentElement.length - 1; i >= 0; i--) {\n        const parent = contentElement[i].parentNode;\n        const text = document.createTextNode(contentElement[i].textContent);\n        parent.replaceChild(text, contentElement[i]);\n    }\n}\n\n/**\n * Common source\n */\n\nvar __decorate = (undefined && undefined.__decorate) || function (decorators, target, key, desc) {\n    var c = arguments.length, r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d;\n    if (typeof Reflect === \"object\" && typeof Reflect.decorate === \"function\") r = Reflect.decorate(decorators, target, key, desc);\n    else for (var i = decorators.length - 1; i >= 0; i--) if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;\n    return c > 3 && r && Object.defineProperty(target, key, r), r;\n};\nclass FieldSettings extends ChildProperty {\n}\n__decorate([\n    Property()\n], FieldSettings.prototype, \"text\", void 0);\n__decorate([\n    Property()\n], FieldSettings.prototype, \"value\", void 0);\n__decorate([\n    Property()\n], FieldSettings.prototype, \"iconCss\", void 0);\n__decorate([\n    Property()\n], FieldSettings.prototype, \"groupBy\", void 0);\n__decorate([\n    Property()\n], FieldSettings.prototype, \"htmlAttributes\", void 0);\nconst dropDownBaseClasses = {\n    root: 'e-dropdownbase',\n    rtl: 'e-rtl',\n    content: 'e-content',\n    selected: 'e-active',\n    hover: 'e-hover',\n    noData: 'e-nodata',\n    fixedHead: 'e-fixed-head',\n    focus: 'e-item-focus',\n    li: 'e-list-item',\n    group: 'e-list-group-item',\n    disabled: 'e-disabled',\n    grouping: 'e-dd-group'\n};\nconst ITEMTEMPLATE_PROPERTY = 'ItemTemplate';\nconst VALUETEMPLATE_PROPERTY = 'ValueTemplate';\nconst GROUPTEMPLATE_PROPERTY = 'GroupTemplate';\nconst HEADERTEMPLATE_PROPERTY = 'HeaderTemplate';\nconst FOOTERTEMPLATE_PROPERTY = 'FooterTemplate';\nconst NORECORDSTEMPLATE_PROPERTY = 'NoRecordsTemplate';\nconst ACTIONFAILURETEMPLATE_PROPERTY = 'ActionFailureTemplate';\n/**\n * DropDownBase component will generate the list items based on given data and act as base class to drop-down related components\n */\nlet DropDownBase = class DropDownBase extends Component {\n    /**\n     * * Constructor for DropDownBase class\n     *\n     * @param {DropDownBaseModel} options - Specifies the DropDownBase model.\n     * @param {string | HTMLElement} element - Specifies the element to render as component.\n     * @private\n     */\n    constructor(options, element) {\n        super(options, element);\n        this.preventChange = false;\n        this.isAngular = false;\n        this.isPreventChange = false;\n        this.isDynamicDataChange = false;\n    }\n    getPropObject(prop, newProp, oldProp) {\n        const newProperty = new Object();\n        const oldProperty = new Object();\n        const propName = (prop) => {\n            return prop;\n        };\n        newProperty[propName(prop)] = newProp[propName(prop)];\n        oldProperty[propName(prop)] = oldProp[propName(prop)];\n        const data = new Object();\n        data.newProperty = newProperty;\n        data.oldProperty = oldProperty;\n        return data;\n    }\n    getValueByText(text, ignoreCase, ignoreAccent) {\n        let value = null;\n        if (!isNullOrUndefined(this.listData)) {\n            if (ignoreCase) {\n                value = this.checkValueCase(text, true, ignoreAccent);\n            }\n            else {\n                value = this.checkValueCase(text, false, ignoreAccent);\n            }\n        }\n        return value;\n    }\n    checkValueCase(text, ignoreCase, ignoreAccent, isTextByValue) {\n        let value = null;\n        if (isTextByValue) {\n            value = text;\n        }\n        const dataSource = this.listData;\n        const fields = this.fields;\n        const type = this.typeOfData(dataSource).typeof;\n        if (type === 'string' || type === 'number' || type === 'boolean') {\n            for (const item of dataSource) {\n                if (!isNullOrUndefined(item)) {\n                    if (ignoreAccent) {\n                        value = this.checkingAccent(String(item), text, ignoreCase);\n                    }\n                    else {\n                        if (ignoreCase) {\n                            if (this.checkIgnoreCase(String(item), text)) {\n                                value = this.getItemValue(String(item), text, ignoreCase);\n                            }\n                        }\n                        else {\n                            if (this.checkNonIgnoreCase(String(item), text)) {\n                                value = this.getItemValue(String(item), text, ignoreCase, isTextByValue);\n                            }\n                        }\n                    }\n                }\n            }\n        }\n        else {\n            if (ignoreCase) {\n                dataSource.filter((item) => {\n                    const itemValue = getValue(fields.value, item);\n                    if (!isNullOrUndefined(itemValue) && this.checkIgnoreCase(getValue(fields.text, item).toString(), text)) {\n                        value = getValue(fields.value, item);\n                    }\n                });\n            }\n            else {\n                if (isTextByValue) {\n                    let compareValue = null;\n                    compareValue = value;\n                    dataSource.filter((item) => {\n                        const itemValue = getValue(fields.value, item);\n                        if (!isNullOrUndefined(itemValue) && !isNullOrUndefined(value) && itemValue.toString() === compareValue.toString()) {\n                            value = getValue(fields.text, item);\n                        }\n                    });\n                }\n                else {\n                    dataSource.filter((item) => {\n                        if (this.checkNonIgnoreCase(getValue(fields.text, item), text)) {\n                            value = getValue(fields.value, item);\n                        }\n                    });\n                }\n            }\n        }\n        return value;\n    }\n    checkingAccent(item, text, ignoreCase) {\n        const dataItem = DataUtil.ignoreDiacritics(String(item));\n        const textItem = DataUtil.ignoreDiacritics(text.toString());\n        let value = null;\n        if (ignoreCase) {\n            if (this.checkIgnoreCase(dataItem, textItem)) {\n                value = this.getItemValue(String(item), text, ignoreCase);\n            }\n        }\n        else {\n            if (this.checkNonIgnoreCase(String(item), text)) {\n                value = this.getItemValue(String(item), text, ignoreCase);\n            }\n        }\n        return value;\n    }\n    checkIgnoreCase(item, text) {\n        return String(item).toLowerCase() === text.toString().toLowerCase() ? true : false;\n    }\n    checkNonIgnoreCase(item, text) {\n        return String(item) === text.toString() ? true : false;\n    }\n    getItemValue(dataItem, typedText, ignoreCase, isTextByValue) {\n        let value = null;\n        const dataSource = this.listData;\n        const type = this.typeOfData(dataSource).typeof;\n        if (isTextByValue) {\n            value = dataItem.toString();\n        }\n        else {\n            if (ignoreCase) {\n                value = type === 'string' ? String(dataItem) : this.getFormattedValue(String(dataItem));\n            }\n            else {\n                value = type === 'string' ? typedText : this.getFormattedValue(typedText);\n            }\n        }\n        return value;\n    }\n    templateCompiler(baseTemplate) {\n        let checkTemplate = false;\n        if (baseTemplate) {\n            try {\n                checkTemplate = (selectAll(baseTemplate, document).length) ? true : false;\n            }\n            catch (exception) {\n                checkTemplate = false;\n            }\n        }\n        return checkTemplate;\n    }\n    l10nUpdate(actionFailure) {\n        const ele = this.getModuleName() === 'listbox' ? this.ulElement : this.list;\n        if (this.noRecordsTemplate !== 'No records found' || this.actionFailureTemplate !== 'Request failed') {\n            const template = actionFailure ? this.actionFailureTemplate : this.noRecordsTemplate;\n            let compiledString;\n            const templateId = actionFailure ? this.actionFailureTemplateId : this.noRecordsTemplateId;\n            ele.innerHTML = '';\n            const tempaltecheck = this.templateCompiler(template);\n            if (tempaltecheck) {\n                compiledString = compile(select(template, document).innerHTML.trim());\n            }\n            else {\n                compiledString = compile(template);\n            }\n            const templateName = actionFailure ? 'actionFailureTemplate' : 'noRecordsTemplate';\n            // eslint-disable-next-line @typescript-eslint/no-explicit-any\n            const noDataCompTemp = compiledString({}, this, templateName, templateId, this.isStringTemplate, null, ele);\n            if (noDataCompTemp && noDataCompTemp.length > 0) {\n                for (let i = 0; i < noDataCompTemp.length; i++) {\n                    ele.appendChild(noDataCompTemp[i]);\n                }\n            }\n            this.renderReactTemplates();\n        }\n        else {\n            const l10nLocale = { noRecordsTemplate: 'No records found', actionFailureTemplate: 'Request failed' };\n            const componentLocale = new L10n(this.getLocaleName(), {}, this.locale);\n            if (componentLocale.getConstant('actionFailureTemplate') !== '') {\n                this.l10n = componentLocale;\n            }\n            else {\n                this.l10n = new L10n(this.getModuleName() === 'listbox' ? 'listbox' : 'dropdowns', l10nLocale, this.locale);\n            }\n            const content = actionFailure ?\n                this.l10n.getConstant('actionFailureTemplate') : this.l10n.getConstant('noRecordsTemplate');\n            if (this.getModuleName() === 'listbox') {\n                const liElem = this.createElement('li');\n                liElem.textContent = content;\n                ele.appendChild(liElem);\n                liElem.classList.add('e-list-nrt');\n            }\n            else {\n                ele.innerHTML = content;\n            }\n        }\n    }\n    getLocaleName() {\n        return 'drop-down-base';\n    }\n    getTextByValue(value) {\n        const text = this.checkValueCase(value, false, false, true);\n        return text;\n    }\n    getFormattedValue(value) {\n        if (this.listData && this.listData.length) {\n            const item = this.typeOfData(this.listData);\n            if (typeof getValue((this.fields.value ? this.fields.value : 'value'), item.item) === 'number'\n                || item.typeof === 'number') {\n                return parseFloat(value);\n            }\n            if (typeof getValue((this.fields.value ? this.fields.value : 'value'), item.item) === 'boolean'\n                || item.typeof === 'boolean') {\n                return ((value === 'true') || ('' + value === 'true'));\n            }\n        }\n        return value;\n    }\n    /**\n     * Sets RTL to dropdownbase wrapper\n     *\n     * @returns {void}\n     */\n    setEnableRtl() {\n        if (this.list) {\n            this.enableRtlElements.push(this.list);\n        }\n        if (this.enableRtl) {\n            addClass(this.enableRtlElements, dropDownBaseClasses.rtl);\n        }\n        else {\n            removeClass(this.enableRtlElements, dropDownBaseClasses.rtl);\n        }\n    }\n    /**\n     * Initialize the Component.\n     *\n     * @returns {void}\n     */\n    initialize() {\n        this.bindEvent = true;\n        this.actionFailureTemplateId = `${this.element.id}${ACTIONFAILURETEMPLATE_PROPERTY}`;\n        if (this.element.tagName === 'UL') {\n            const jsonElement = ListBase.createJsonFromElement(this.element);\n            this.setProperties({ fields: { text: 'text', value: 'text' } }, true);\n            this.resetList(jsonElement, this.fields);\n        }\n        else if (this.element.tagName === 'SELECT') {\n            const dataSource = this.dataSource instanceof Array ? (this.dataSource.length > 0 ? true : false)\n                : !isNullOrUndefined(this.dataSource) ? true : false;\n            if (!dataSource) {\n                this.renderItemsBySelect();\n            }\n            else if (this.isDynamicDataChange) {\n                this.setListData(this.dataSource, this.fields, this.query);\n            }\n        }\n        else {\n            this.setListData(this.dataSource, this.fields, this.query);\n        }\n    }\n    /**\n     * Get the properties to be maintained in persisted state.\n     *\n     * @returns {string} Returns the persisted data of the component.\n     */\n    getPersistData() {\n        return this.addOnPersist([]);\n    }\n    /**\n     * Sets the enabled state to DropDownBase.\n     *\n     * @returns {void}\n     */\n    setEnabled() {\n        this.element.setAttribute('aria-disabled', (this.enabled) ? 'false' : 'true');\n    }\n    /**\n     * Sets the enabled state to DropDownBase.\n     *\n     * @param {string} value - Specifies the attribute values to add on the input element.\n     * @returns {void}\n     */\n    updateDataAttribute(value) {\n        const invalidAttr = ['class', 'style', 'id', 'type'];\n        const attr = {};\n        for (let a = 0; a < this.element.attributes.length; a++) {\n            if (invalidAttr.indexOf(this.element.attributes[a].name) === -1 &&\n                !(this.getModuleName() === 'dropdownlist' && this.element.attributes[a].name === 'readonly')) {\n                attr[this.element.attributes[a].name] = this.element.getAttribute(this.element.attributes[a].name);\n            }\n        }\n        extend(attr, value, attr);\n        this.setProperties({ htmlAttributes: attr }, true);\n    }\n    renderItemsBySelect() {\n        const element = this.element;\n        const fields = { value: 'value', text: 'text' };\n        const jsonElement = [];\n        const group = element.querySelectorAll('select>optgroup');\n        const option = element.querySelectorAll('select>option');\n        this.getJSONfromOption(jsonElement, option, fields);\n        if (group.length) {\n            for (let i = 0; i < group.length; i++) {\n                const item = group[i];\n                const optionGroup = {};\n                optionGroup[fields.text] = item.label;\n                optionGroup.isHeader = true;\n                const child = item.querySelectorAll('option');\n                jsonElement.push(optionGroup);\n                this.getJSONfromOption(jsonElement, child, fields);\n            }\n            element.querySelectorAll('select>option');\n        }\n        this.updateFields(fields.text, fields.value, this.fields.groupBy, this.fields.htmlAttributes, this.fields.iconCss);\n        this.resetList(jsonElement, fields);\n    }\n    updateFields(text, value, groupBy, htmlAttributes, iconCss) {\n        const field = {\n            'fields': {\n                text: text,\n                value: value,\n                groupBy: !isNullOrUndefined(groupBy) ? groupBy : this.fields && this.fields.groupBy,\n                htmlAttributes: !isNullOrUndefined(htmlAttributes) ? htmlAttributes : this.fields && this.fields.htmlAttributes,\n                iconCss: !isNullOrUndefined(iconCss) ? iconCss : this.fields && this.fields.iconCss\n            }\n        };\n        this.setProperties(field, true);\n    }\n    getJSONfromOption(items, options, fields) {\n        for (const option of options) {\n            const json = {};\n            json[fields.text] = option.innerText;\n            json[fields.value] = !isNullOrUndefined(option.getAttribute(fields.value)) ?\n                option.getAttribute(fields.value) : option.innerText;\n            items.push(json);\n        }\n    }\n    /**\n     * Execute before render the list items\n     *\n     * @private\n     * @returns {void}\n     */\n    preRender() {\n        // there is no event handler\n        this.scrollTimer = -1;\n        this.enableRtlElements = [];\n        this.isRequested = false;\n        this.isDataFetched = false;\n        this.itemTemplateId = `${this.element.id}${ITEMTEMPLATE_PROPERTY}`;\n        this.valueTemplateId = `${this.element.id}${VALUETEMPLATE_PROPERTY}`;\n        this.groupTemplateId = `${this.element.id}${GROUPTEMPLATE_PROPERTY}`;\n        this.headerTemplateId = `${this.element.id}${HEADERTEMPLATE_PROPERTY}`;\n        this.footerTemplateId = `${this.element.id}${FOOTERTEMPLATE_PROPERTY}`;\n        this.noRecordsTemplateId = `${this.element.id}${NORECORDSTEMPLATE_PROPERTY}`;\n    }\n    /**\n     * Creates the list items of DropDownBase component.\n     *\n     * @param {Object[] | string[] | number[] | DataManager | boolean[]} dataSource - Specifies the data to generate the list.\n     * @param {FieldSettingsModel} fields - Maps the columns of the data table and binds the data to the component.\n     * @param {Query} query - Accepts the external Query that execute along with data processing.\n     * @returns {void}\n     */\n    setListData(dataSource, fields, query) {\n        fields = fields ? fields : this.fields;\n        let ulElement;\n        this.isActive = true;\n        const eventArgs = { cancel: false, data: dataSource, query: query };\n        this.isPreventChange = this.isAngular && this.preventChange ? true : this.isPreventChange;\n        this.trigger('actionBegin', eventArgs, (eventArgs) => {\n            if (!eventArgs.cancel) {\n                this.showSpinner();\n                if (dataSource instanceof DataManager) {\n                    this.isRequested = true;\n                    if (this.isDataFetched) {\n                        this.emptyDataRequest(fields);\n                        return;\n                    }\n                    eventArgs.data.executeQuery(this.getQuery(eventArgs.query)).then((e) => {\n                        this.isPreventChange = this.isAngular && this.preventChange ? true : this.isPreventChange;\n                        this.trigger('actionComplete', e, (e) => {\n                            if (!e.cancel) {\n                                const listItems = e.result;\n                                if (listItems.length === 0) {\n                                    this.isDataFetched = true;\n                                }\n                                ulElement = this.renderItems(listItems, fields);\n                                this.onActionComplete(ulElement, listItems, e);\n                                if (this.groupTemplate) {\n                                    this.renderGroupTemplate(ulElement);\n                                }\n                                this.isRequested = false;\n                                this.bindChildItems(listItems, ulElement, fields, e);\n                            }\n                        });\n                    }).catch((e) => {\n                        this.isRequested = false;\n                        this.onActionFailure(e);\n                        this.hideSpinner();\n                    });\n                }\n                else {\n                    const dataManager = new DataManager(eventArgs.data);\n                    const listItems = (this.getQuery(eventArgs.query)).executeLocal(dataManager);\n                    const localDataArgs = { cancel: false, result: listItems };\n                    this.isPreventChange = this.isAngular && this.preventChange ? true : this.isPreventChange;\n                    this.trigger('actionComplete', localDataArgs, (localDataArgs) => {\n                        if (!localDataArgs.cancel) {\n                            ulElement = this.renderItems(localDataArgs.result, fields);\n                            this.onActionComplete(ulElement, localDataArgs.result);\n                            if (this.groupTemplate) {\n                                this.renderGroupTemplate(ulElement);\n                            }\n                            this.bindChildItems(localDataArgs.result, ulElement, fields);\n                        }\n                    });\n                }\n            }\n        });\n    }\n    bindChildItems(listItems, ulElement, fields, e) {\n        if (listItems.length >= 100 && this.getModuleName() === 'autocomplete') {\n            setTimeout(() => {\n                const childNode = this.remainingItems(this.sortedData, fields);\n                append(childNode, ulElement);\n                this.liCollections = this.list.querySelectorAll('.' + dropDownBaseClasses.li);\n                this.updateListValues();\n                this.raiseDataBound(listItems, e);\n            }, 0);\n        }\n        else {\n            this.raiseDataBound(listItems, e);\n        }\n    }\n    updateListValues() {\n        // Used this method in component side.\n    }\n    findListElement(list, findNode, attribute, value) {\n        let liElement = null;\n        if (list) {\n            const listArr = [].slice.call(list.querySelectorAll(findNode));\n            for (let index = 0; index < listArr.length; index++) {\n                if (listArr[index].getAttribute(attribute) === (value + '')) {\n                    liElement = listArr[index];\n                    break;\n                }\n            }\n        }\n        return liElement;\n    }\n    raiseDataBound(listItems, e) {\n        this.hideSpinner();\n        const dataBoundEventArgs = {\n            items: listItems,\n            e: e\n        };\n        this.trigger('dataBound', dataBoundEventArgs);\n    }\n    remainingItems(dataSource, fields) {\n        const spliceData = new DataManager(dataSource).executeLocal(new Query().skip(100));\n        if (this.itemTemplate) {\n            const listElements = this.templateListItem(spliceData, fields);\n            return [].slice.call(listElements.childNodes);\n        }\n        const type = this.typeOfData(spliceData).typeof;\n        if (type === 'string' || type === 'number' || type === 'boolean') {\n            return ListBase.createListItemFromArray(this.createElement, spliceData, true, this.listOption(spliceData, fields), this);\n        }\n        return ListBase.createListItemFromJson(this.createElement, spliceData, this.listOption(spliceData, fields), 1, true, this);\n    }\n    emptyDataRequest(fields) {\n        const listItems = [];\n        this.onActionComplete(this.renderItems(listItems, fields), listItems);\n        this.isRequested = false;\n        this.hideSpinner();\n    }\n    showSpinner() {\n        // Used this method in component side.\n    }\n    hideSpinner() {\n        // Used this method in component side.\n    }\n    onActionFailure(e) {\n        this.liCollections = [];\n        this.trigger('actionFailure', e);\n        this.l10nUpdate(true);\n        addClass([this.list], dropDownBaseClasses.noData);\n    }\n    /* eslint-disable @typescript-eslint/no-unused-vars */\n    onActionComplete(ulElement, list, e) {\n        /* eslint-enable @typescript-eslint/no-unused-vars */\n        this.listData = list;\n        // eslint-disable-next-line @typescript-eslint/no-explicit-any\n        if (this.isReact) {\n            this.clearTemplate(['itemTemplate', 'groupTemplate', 'actionFailureTemplate', 'noRecordsTemplate']);\n        }\n        this.list.innerHTML = '';\n        this.fixedHeaderElement = isNullOrUndefined(this.fixedHeaderElement) ? this.fixedHeaderElement : null;\n        this.list.appendChild(ulElement);\n        this.liCollections = this.list.querySelectorAll('.' + dropDownBaseClasses.li);\n        this.ulElement = this.list.querySelector('ul');\n        this.postRender(this.list, list, this.bindEvent);\n    }\n    /* eslint-disable @typescript-eslint/no-unused-vars */\n    postRender(listElement, list, bindEvent) {\n        /* eslint-enable @typescript-eslint/no-unused-vars */\n        const focusItem = listElement.querySelector('.' + dropDownBaseClasses.li);\n        const selectedItem = listElement.querySelector('.' + dropDownBaseClasses.selected);\n        if (focusItem && !selectedItem) {\n            focusItem.classList.add(dropDownBaseClasses.focus);\n        }\n        if (list.length <= 0) {\n            this.l10nUpdate();\n            addClass([listElement], dropDownBaseClasses.noData);\n        }\n        else {\n            listElement.classList.remove(dropDownBaseClasses.noData);\n        }\n    }\n    /**\n     * Get the query to do the data operation before list item generation.\n     *\n     * @param {Query} query - Accepts the external Query that execute along with data processing.\n     * @returns {Query} Returns the query to do the data query operation.\n     */\n    getQuery(query) {\n        return query ? query : this.query ? this.query : new Query();\n    }\n    /**\n     * To render the template content for group header element.\n     *\n     * @param {HTMLElement} listEle - Specifies the group list elements.\n     * @returns {void}\n     */\n    renderGroupTemplate(listEle) {\n        if (this.fields.groupBy !== null && this.dataSource || this.element.querySelector('.' + dropDownBaseClasses.group)) {\n            const dataSource = this.dataSource;\n            const option = { groupTemplateID: this.groupTemplateId, isStringTemplate: this.isStringTemplate };\n            const headerItems = listEle.querySelectorAll('.' + dropDownBaseClasses.group);\n            const groupcheck = this.templateCompiler(this.groupTemplate);\n            if (groupcheck) {\n                const groupValue = select(this.groupTemplate, document).innerHTML.trim();\n                // eslint-disable-next-line @typescript-eslint/no-unused-vars\n                const tempHeaders = ListBase.renderGroupTemplate(groupValue, dataSource, this.fields.properties, headerItems, option, this);\n            }\n            else {\n                // eslint-disable-next-line @typescript-eslint/no-unused-vars\n                const tempHeaders = ListBase.renderGroupTemplate(this.groupTemplate, dataSource, this.fields.properties, headerItems, option, this);\n            }\n            this.renderReactTemplates();\n        }\n    }\n    /**\n     * To create the ul li list items\n     *\n     * @param {object []} dataSource - Specifies the data to generate the list.\n     * @param {FieldSettingsModel} fields - Maps the columns of the data table and binds the data to the component.\n     * @returns {HTMLElement} Return the ul li list items.\n     */\n    createListItems(dataSource, fields) {\n        if (dataSource && fields.groupBy || this.element.querySelector('optgroup')) {\n            if (fields.groupBy) {\n                if (this.sortOrder !== 'None') {\n                    dataSource = this.getSortedDataSource(dataSource);\n                }\n                dataSource = ListBase.groupDataSource(dataSource, fields.properties, this.sortOrder);\n            }\n            addClass([this.list], dropDownBaseClasses.grouping);\n        }\n        else {\n            dataSource = this.getSortedDataSource(dataSource);\n        }\n        const options = this.listOption(dataSource, fields);\n        const spliceData = (dataSource.length > 100) ?\n            new DataManager(dataSource).executeLocal(new Query().take(100))\n            : dataSource;\n        this.sortedData = dataSource;\n        return ListBase.createList(this.createElement, (this.getModuleName() === 'autocomplete') ? spliceData : dataSource, options, true, this);\n    }\n    listOption(dataSource, fields) {\n        const iconCss = isNullOrUndefined(fields.iconCss) ? false : true;\n        const fieldValues = !isNullOrUndefined(fields.properties) ?\n            fields.properties : fields;\n        const options = (fields.text !== null || fields.value !== null) ? {\n            fields: fieldValues,\n            showIcon: iconCss, ariaAttributes: { groupItemRole: 'presentation' }\n        } : { fields: { value: 'text' } };\n        return extend({}, options, fields, true);\n    }\n    setFloatingHeader(e) {\n        if (isNullOrUndefined(this.fixedHeaderElement)) {\n            this.fixedHeaderElement = this.createElement('div', { className: dropDownBaseClasses.fixedHead });\n            if (!this.list.querySelector('li').classList.contains(dropDownBaseClasses.group)) {\n                this.fixedHeaderElement.style.display = 'none';\n            }\n            prepend([this.fixedHeaderElement], this.list);\n            this.setFixedHeader();\n        }\n        if (!isNullOrUndefined(this.fixedHeaderElement) && this.fixedHeaderElement.style.zIndex === '0') {\n            this.setFixedHeader();\n        }\n        this.scrollStop(e);\n    }\n    scrollStop(e) {\n        let target = !isNullOrUndefined(e) ? e.target : this.list;\n        let liHeight = parseInt(getComputedStyle(this.getValidLi(), null).getPropertyValue('height'), 10);\n        const topIndex = Math.round(target.scrollTop / liHeight);\n        const liCollections = this.list.querySelectorAll('li' + ':not(.e-hide-listitem)');\n        for (let i = topIndex; i > -1; i--) {\n            if (!isNullOrUndefined(liCollections[i]) && liCollections[i].classList.contains(dropDownBaseClasses.group)) {\n                const currentLi = liCollections[i];\n                this.fixedHeaderElement.innerHTML = currentLi.innerHTML;\n                this.fixedHeaderElement.style.top = target.scrollTop + 'px';\n                this.fixedHeaderElement.style.display = 'block';\n                break;\n            }\n            else {\n                this.fixedHeaderElement.style.display = 'none';\n                this.fixedHeaderElement.style.top = 'none';\n            }\n        }\n    }\n    getValidLi() {\n        return this.liCollections[0];\n    }\n    /**\n     * To render the list items\n     *\n     * @param {object[]} listData - Specifies the list of array of data.\n     * @param {FieldSettingsModel} fields - Maps the columns of the data table and binds the data to the component.\n     * @returns {HTMLElement} Return the list items.\n     */\n    renderItems(listData, fields) {\n        let ulElement;\n        if (this.itemTemplate && listData) {\n            let dataSource = listData;\n            if (dataSource && fields.groupBy) {\n                if (this.sortOrder !== 'None') {\n                    dataSource = this.getSortedDataSource(dataSource);\n                }\n                dataSource = ListBase.groupDataSource(dataSource, fields.properties, this.sortOrder);\n            }\n            else {\n                dataSource = this.getSortedDataSource(dataSource);\n            }\n            this.sortedData = dataSource;\n            const spliceData = (dataSource.length > 100) ?\n                new DataManager(dataSource).executeLocal(new Query().take(100))\n                : dataSource;\n            ulElement = this.templateListItem((this.getModuleName() === 'autocomplete') ? spliceData : dataSource, fields);\n        }\n        else {\n            ulElement = this.createListItems(listData, fields);\n        }\n        return ulElement;\n    }\n    templateListItem(dataSource, fields) {\n        const option = this.listOption(dataSource, fields);\n        option.templateID = this.itemTemplateId;\n        option.isStringTemplate = this.isStringTemplate;\n        const itemcheck = this.templateCompiler(this.itemTemplate);\n        if (itemcheck) {\n            const itemValue = select(this.itemTemplate, document).innerHTML.trim();\n            return ListBase.renderContentTemplate(this.createElement, itemValue, dataSource, fields.properties, option, this);\n        }\n        else {\n            return ListBase.renderContentTemplate(this.createElement, this.itemTemplate, dataSource, fields.properties, option, this);\n        }\n    }\n    typeOfData(items) {\n        let item = { typeof: null, item: null };\n        for (let i = 0; (!isNullOrUndefined(items) && i < items.length); i++) {\n            if (!isNullOrUndefined(items[i])) {\n                const listDataType = typeof (items[i]) === 'string' ||\n                    typeof (items[i]) === 'number' || typeof (items[i]) === 'boolean';\n                const isNullData = listDataType ? isNullOrUndefined(items[i]) :\n                    isNullOrUndefined(getValue((this.fields.value ? this.fields.value : 'value'), items[i]));\n                if (!isNullData) {\n                    return item = { typeof: typeof items[i], item: items[i] };\n                }\n            }\n        }\n        return item;\n    }\n    setFixedHeader() {\n        this.list.parentElement.style.display = 'block';\n        let borderWidth = 0;\n        if (this.list && this.list.parentElement) {\n            borderWidth = parseInt(document.defaultView.getComputedStyle(this.list.parentElement, null).getPropertyValue('border-width'), 10);\n            /*Shorthand property not working in Firefox for getComputedStyle method.\n            Refer bug report https://bugzilla.mozilla.org/show_bug.cgi?id=137688\n            Refer alternate solution https://stackoverflow.com/a/41696234/9133493*/\n            if (isNaN(borderWidth)) {\n                let borderTopWidth = parseInt(document.defaultView.getComputedStyle(this.list.parentElement, null).getPropertyValue('border-top-width'), 10);\n                let borderBottomWidth = parseInt(document.defaultView.getComputedStyle(this.list.parentElement, null).getPropertyValue('border-bottom-width'), 10);\n                let borderLeftWidth = parseInt(document.defaultView.getComputedStyle(this.list.parentElement, null).getPropertyValue('border-left-width'), 10);\n                let borderRightWidth = parseInt(document.defaultView.getComputedStyle(this.list.parentElement, null).getPropertyValue('border-right-width'), 10);\n                borderWidth = (borderTopWidth + borderBottomWidth + borderLeftWidth + borderRightWidth);\n            }\n        }\n        const liWidth = this.getValidLi().offsetWidth - borderWidth;\n        this.fixedHeaderElement.style.width = liWidth.toString() + 'px';\n        setStyleAttribute(this.fixedHeaderElement, { zIndex: 10 });\n        const firstLi = this.ulElement.querySelector('.' + dropDownBaseClasses.group + ':not(.e-hide-listitem)');\n        this.fixedHeaderElement.innerHTML = firstLi.innerHTML;\n    }\n    getSortedDataSource(dataSource) {\n        if (dataSource && this.sortOrder !== 'None') {\n            let textField = this.fields.text ? this.fields.text : 'text';\n            if (this.typeOfData(dataSource).typeof === 'string' || this.typeOfData(dataSource).typeof === 'number'\n                || this.typeOfData(dataSource).typeof === 'boolean') {\n                textField = '';\n            }\n            dataSource = ListBase.getDataSource(dataSource, ListBase.addSorting(this.sortOrder, textField));\n        }\n        return dataSource;\n    }\n    /**\n     * Return the index of item which matched with given value in data source\n     *\n     * @param {string | number | boolean} value - Specifies given value.\n     * @returns {number} Returns the index of the item.\n     */\n    getIndexByValue(value) {\n        let index;\n        const listItems = this.getItems();\n        for (let i = 0; i < listItems.length; i++) {\n            if (!isNullOrUndefined(value) && listItems[i].getAttribute('data-value') === value.toString()) {\n                index = i;\n                break;\n            }\n        }\n        return index;\n    }\n    /**\n     * To dispatch the event manually\n     *\n     * @param {HTMLElement} element - Specifies the element to dispatch the event.\n     * @param {string} type - Specifies the name of the event.\n     * @returns {void}\n     */\n    dispatchEvent(element, type) {\n        const evt = document.createEvent('HTMLEvents');\n        evt.initEvent(type, false, true);\n        element.dispatchEvent(evt);\n    }\n    /**\n     * To set the current fields\n     *\n     * @returns {void}\n     */\n    setFields() {\n        if (this.fields.value && !this.fields.text) {\n            this.updateFields(this.fields.value, this.fields.value);\n        }\n        else if (!this.fields.value && this.fields.text) {\n            this.updateFields(this.fields.text, this.fields.text);\n        }\n        else if (!this.fields.value && !this.fields.text) {\n            this.updateFields('text', 'text');\n        }\n    }\n    /**\n     * reset the items list.\n     *\n     * @param {Object[] | string[] | number[] | DataManager | boolean[]} dataSource - Specifies the data to generate the list.\n     * @param {FieldSettingsModel} fields - Maps the columns of the data table and binds the data to the component.\n     * @param {Query} query - Accepts the external Query that execute along with data processing.\n     * @returns {void}\n     */\n    resetList(dataSource, fields, query) {\n        if (this.list) {\n            if ((this.element.tagName === 'SELECT' && this.element.options.length > 0)\n                || (this.element.tagName === 'UL' && this.element.childNodes.length > 0)) {\n                const data = dataSource instanceof Array ? (dataSource.length > 0)\n                    : !isNullOrUndefined(dataSource);\n                if (!data && this.selectData && this.selectData.length > 0) {\n                    dataSource = this.selectData;\n                }\n            }\n            this.setListData(dataSource, fields, query);\n        }\n    }\n    updateSelectElementData(isFiltering) {\n        if (isFiltering && isNullOrUndefined(this.selectData) && this.listData && this.listData.length > 0) {\n            this.selectData = this.listData;\n        }\n    }\n    updateSelection() {\n        // This is for after added the item, need to update the selected index values.\n    }\n    renderList() {\n        // This is for render the list items.\n        this.render();\n    }\n    // eslint-disable-next-line @typescript-eslint/no-unused-vars\n    updateDataSource(props) {\n        this.resetList(this.dataSource);\n    }\n    setUpdateInitial(props, newProp) {\n        this.isDataFetched = false;\n        const updateData = {};\n        for (let j = 0; props.length > j; j++) {\n            if (newProp[props[j]] && props[j] === 'fields') {\n                this.setFields();\n                updateData[props[j]] = newProp[props[j]];\n            }\n            else if (newProp[props[j]]) {\n                updateData[props[j]] = newProp[props[j]];\n            }\n        }\n        if (Object.keys(updateData).length > 0) {\n            if (Object.keys(updateData).indexOf('dataSource') === -1) {\n                updateData.dataSource = this.dataSource;\n            }\n            this.updateDataSource(updateData);\n        }\n    }\n    /**\n     * When property value changes happened, then onPropertyChanged method will execute the respective changes in this component.\n     *\n     * @param {DropDownBaseModel} newProp - Returns the dynamic property value of the component.\n     * @param {DropDownBaseModel} oldProp - Returns the previous property value of the component.\n     * @private\n     * @returns {void}\n     */\n    // eslint-disable-next-line @typescript-eslint/no-unused-vars\n    onPropertyChanged(newProp, oldProp) {\n        if (this.getModuleName() === 'dropdownbase') {\n            this.setUpdateInitial(['fields', 'query', 'dataSource'], newProp);\n        }\n        this.setUpdateInitial(['sortOrder', 'itemTemplate'], newProp);\n        for (const prop of Object.keys(newProp)) {\n            switch (prop) {\n                case 'query':\n                case 'sortOrder':\n                case 'dataSource':\n                case 'itemTemplate':\n                    break;\n                case 'enableRtl':\n                    this.setEnableRtl();\n                    break;\n                case 'enabled':\n                    this.setEnabled();\n                    break;\n                case 'groupTemplate':\n                    this.renderGroupTemplate(this.list);\n                    if (this.ulElement && this.fixedHeaderElement) {\n                        const firstLi = this.ulElement.querySelector('.' + dropDownBaseClasses.group);\n                        this.fixedHeaderElement.innerHTML = firstLi.innerHTML;\n                    }\n                    break;\n                case 'locale':\n                    if (this.list && (!isNullOrUndefined(this.liCollections) && this.liCollections.length === 0)) {\n                        this.l10nUpdate();\n                    }\n                    break;\n                case 'zIndex':\n                    this.setProperties({ zIndex: newProp.zIndex }, true);\n                    this.setZIndex();\n                    break;\n            }\n        }\n    }\n    /**\n     * Build and render the component\n     *\n     * @param {boolean} isEmptyData - Specifies the component to initialize with list data or not.\n     * @private\n     * @returns {void}\n     */\n    render(isEmptyData) {\n        this.list = this.createElement('div', { className: dropDownBaseClasses.content, attrs: { 'tabindex': '0' } });\n        this.list.classList.add(dropDownBaseClasses.root);\n        this.setFields();\n        const rippleModel = { duration: 300, selector: '.' + dropDownBaseClasses.li };\n        this.rippleFun = rippleEffect(this.list, rippleModel);\n        const group = this.element.querySelector('select>optgroup');\n        if ((this.fields.groupBy || !isNullOrUndefined(group)) && !this.isGroupChecking) {\n            EventHandler.add(this.list, 'scroll', this.setFloatingHeader, this);\n        }\n        if (this.getModuleName() === 'dropdownbase') {\n            if (this.element.getAttribute('tabindex')) {\n                this.list.setAttribute('tabindex', this.element.getAttribute('tabindex'));\n            }\n            removeClass([this.element], dropDownBaseClasses.root);\n            this.element.style.display = 'none';\n            const wrapperElement = this.createElement('div');\n            this.element.parentElement.insertBefore(wrapperElement, this.element);\n            wrapperElement.appendChild(this.element);\n            wrapperElement.appendChild(this.list);\n        }\n        this.setEnableRtl();\n        this.setEnabled();\n        if (!isEmptyData) {\n            this.initialize();\n        }\n    }\n    /**\n     * Return the module name of this component.\n     *\n     * @private\n     * @returns {string} Return the module name of this component.\n     */\n    getModuleName() {\n        return 'dropdownbase';\n    }\n    /* eslint-disable valid-jsdoc, jsdoc/require-returns-description */\n    /**\n     * Gets all the list items bound on this component.\n     *\n     * @returns {Element[]}\n     */\n    getItems() {\n        return this.ulElement.querySelectorAll('.' + dropDownBaseClasses.li);\n    }\n    /* eslint-enable valid-jsdoc, jsdoc/require-returns-description */\n    /**\n     * Adds a new item to the popup list. By default, new item appends to the list as the last item,\n     * but you can insert based on the index parameter.\n     *\n     * @param  { Object[] } items - Specifies an array of JSON data or a JSON data.\n     * @param { number } itemIndex - Specifies the index to place the newly added item in the popup list.\n     * @returns {void}\n     * @deprecated\n     */\n    addItem(items, itemIndex) {\n        if (!this.list || (this.list.textContent === this.noRecordsTemplate && this.getModuleName() !== 'listbox')) {\n            this.renderList();\n        }\n        if (this.sortOrder !== 'None' && isNullOrUndefined(itemIndex)) {\n            let newList = [].slice.call(this.listData);\n            newList.push(items);\n            newList = this.getSortedDataSource(newList);\n            if (this.fields.groupBy) {\n                newList = ListBase.groupDataSource(newList, this.fields.properties, this.sortOrder);\n                itemIndex = newList.indexOf(items);\n            }\n            else {\n                itemIndex = newList.indexOf(items);\n            }\n        }\n        const itemsCount = this.getItems().length;\n        const selectedItemValue = this.list.querySelector('.' + dropDownBaseClasses.selected);\n        items = (items instanceof Array ? items : [items]);\n        let index;\n        index = (isNullOrUndefined(itemIndex) || itemIndex < 0 || itemIndex > itemsCount - 1) ? itemsCount : itemIndex;\n        const fields = this.fields;\n        if (items && fields.groupBy) {\n            items = ListBase.groupDataSource(items, fields.properties);\n        }\n        const liCollections = [];\n        for (let i = 0; i < items.length; i++) {\n            const item = items[i];\n            const isHeader = item.isHeader;\n            const li = this.createElement('li', { className: isHeader ? dropDownBaseClasses.group : dropDownBaseClasses.li, id: 'option-add-' + i });\n            const itemText = item instanceof Object ? getValue(fields.text, item) : item;\n            if (isHeader) {\n                li.innerText = itemText;\n            }\n            if (this.itemTemplate && !isHeader) {\n                const compiledString = compile(this.itemTemplate);\n                // eslint-disable-next-line @typescript-eslint/no-explicit-any\n                const addItemTemplate = compiledString(item, this, 'itemTemplate', this.itemTemplateId, this.isStringTemplate, null, li);\n                if (addItemTemplate) {\n                    append(addItemTemplate, li);\n                }\n            }\n            else if (!isHeader) {\n                li.appendChild(document.createTextNode(itemText));\n            }\n            li.setAttribute('data-value', item instanceof Object ? getValue(fields.value, item) : item);\n            li.setAttribute('role', 'option');\n            this.notify('addItem', { module: 'CheckBoxSelection', item: li });\n            liCollections.push(li);\n            this.listData.push(item);\n            if (this.sortOrder === 'None' && isNullOrUndefined(itemIndex) && index === 0) {\n                index = null;\n            }\n            this.updateActionCompleteData(li, item, index);\n            //Listbox event\n            this.trigger('beforeItemRender', { element: li, item: item });\n        }\n        if (itemsCount === 0 && isNullOrUndefined(this.list.querySelector('ul'))) {\n            this.list.innerHTML = '';\n            this.list.classList.remove(dropDownBaseClasses.noData);\n            this.list.appendChild(this.ulElement);\n            this.liCollections = liCollections;\n            append(liCollections, this.ulElement);\n            this.updateAddItemList(this.list, itemsCount);\n        }\n        else {\n            if (this.getModuleName() === 'listbox' && itemsCount === 0) {\n                this.ulElement.innerHTML = '';\n            }\n            const attr = [];\n            for (let i = 0; i < items.length; i++) {\n                const listGroupItem = this.ulElement.querySelectorAll('.e-list-group-item');\n                for (let j = 0; j < listGroupItem.length; j++) {\n                    attr[j] = listGroupItem[j].innerText;\n                }\n                if (attr.indexOf(liCollections[i].innerText) > -1 && fields.groupBy) {\n                    for (let j = 0; j < listGroupItem.length; j++) {\n                        if (attr[j] === liCollections[i].innerText) {\n                            if (this.sortOrder === 'None') {\n                                this.ulElement.insertBefore(liCollections[i + 1], listGroupItem[j + 1]);\n                            }\n                            else {\n                                this.ulElement.insertBefore(liCollections[i + 1], this.ulElement.childNodes[itemIndex]);\n                            }\n                            i = i + 1;\n                            break;\n                        }\n                    }\n                }\n                else {\n                    if (this.liCollections[index]) {\n                        this.liCollections[index].parentNode.insertBefore(liCollections[i], this.liCollections[index]);\n                    }\n                    else {\n                        this.ulElement.appendChild(liCollections[i]);\n                    }\n                }\n                const tempLi = [].slice.call(this.liCollections);\n                tempLi.splice(index, 0, liCollections[i]);\n                this.liCollections = tempLi;\n                index += 1;\n                if (this.getModuleName() === 'multiselect') {\n                    this.updateDataList();\n                }\n            }\n        }\n        if (selectedItemValue || itemIndex === 0) {\n            this.updateSelection();\n        }\n    }\n    validationAttribute(target, hidden) {\n        const name = target.getAttribute('name') ? target.getAttribute('name') : target.getAttribute('id');\n        hidden.setAttribute('name', name);\n        target.removeAttribute('name');\n        const attributes$$1 = ['required', 'aria-required', 'form'];\n        for (let i = 0; i < attributes$$1.length; i++) {\n            if (!target.getAttribute(attributes$$1[i])) {\n                continue;\n            }\n            const attr = target.getAttribute(attributes$$1[i]);\n            hidden.setAttribute(attributes$$1[i], attr);\n            target.removeAttribute(attributes$$1[i]);\n        }\n    }\n    setZIndex() {\n        // this is for component wise\n    }\n    // eslint-disable-next-line @typescript-eslint/no-unused-vars\n    updateActionCompleteData(li, item, index) {\n        // this is for ComboBox custom value\n    }\n    // eslint-disable-next-line @typescript-eslint/no-unused-vars\n    updateAddItemList(list, itemCount) {\n        // this is for multiselect add item\n    }\n    updateDataList() {\n        // this is for multiselect update list items\n    }\n    /* eslint-disable valid-jsdoc, jsdoc/require-returns-description */\n    /**\n     * Gets the data Object that matches the given value.\n     *\n     * @param { string | number } value - Specifies the value of the list item.\n     * @returns {Object}\n     */\n    getDataByValue(value) {\n        if (!isNullOrUndefined(this.listData)) {\n            const type = this.typeOfData(this.listData).typeof;\n            if (type === 'string' || type === 'number' || type === 'boolean') {\n                for (const item of this.listData) {\n                    if (!isNullOrUndefined(item) && item === value) {\n                        return item;\n                    }\n                }\n            }\n            else {\n                for (const item of this.listData) {\n                    if (!isNullOrUndefined(item) && getValue((this.fields.value ? this.fields.value : 'value'), item) === value) {\n                        return item;\n                    }\n                }\n            }\n        }\n        return null;\n    }\n    /* eslint-enable valid-jsdoc, jsdoc/require-returns-description */\n    /**\n     * Removes the component from the DOM and detaches all its related event handlers. It also removes the attributes and classes.\n     *\n     * @method destroy\n     * @returns {void}\n     */\n    destroy() {\n        if (document.body.contains(this.list)) {\n            EventHandler.remove(this.list, 'scroll', this.setFloatingHeader);\n            if (!isNullOrUndefined(this.rippleFun)) {\n                this.rippleFun();\n            }\n            detach(this.list);\n        }\n        super.destroy();\n    }\n};\n__decorate([\n    Complex({ text: null, value: null, iconCss: null, groupBy: null }, FieldSettings)\n], DropDownBase.prototype, \"fields\", void 0);\n__decorate([\n    Property(false)\n], DropDownBase.prototype, \"enablePersistence\", void 0);\n__decorate([\n    Property(null)\n], DropDownBase.prototype, \"itemTemplate\", void 0);\n__decorate([\n    Property(null)\n], DropDownBase.prototype, \"groupTemplate\", void 0);\n__decorate([\n    Property('No records found')\n], DropDownBase.prototype, \"noRecordsTemplate\", void 0);\n__decorate([\n    Property('Request failed')\n], DropDownBase.prototype, \"actionFailureTemplate\", void 0);\n__decorate([\n    Property('None')\n], DropDownBase.prototype, \"sortOrder\", void 0);\n__decorate([\n    Property(true)\n], DropDownBase.prototype, \"enabled\", void 0);\n__decorate([\n    Property([])\n], DropDownBase.prototype, \"dataSource\", void 0);\n__decorate([\n    Property(null)\n], DropDownBase.prototype, \"query\", void 0);\n__decorate([\n    Property('StartsWith')\n], DropDownBase.prototype, \"filterType\", void 0);\n__decorate([\n    Property(true)\n], DropDownBase.prototype, \"ignoreCase\", void 0);\n__decorate([\n    Property(1000)\n], DropDownBase.prototype, \"zIndex\", void 0);\n__decorate([\n    Property(false)\n], DropDownBase.prototype, \"ignoreAccent\", void 0);\n__decorate([\n    Property()\n], DropDownBase.prototype, \"locale\", void 0);\n__decorate([\n    Event()\n], DropDownBase.prototype, \"actionBegin\", void 0);\n__decorate([\n    Event()\n], DropDownBase.prototype, \"actionComplete\", void 0);\n__decorate([\n    Event()\n], DropDownBase.prototype, \"actionFailure\", void 0);\n__decorate([\n    Event()\n], DropDownBase.prototype, \"select\", void 0);\n__decorate([\n    Event()\n], DropDownBase.prototype, \"dataBound\", void 0);\n__decorate([\n    Event()\n], DropDownBase.prototype, \"created\", void 0);\n__decorate([\n    Event()\n], DropDownBase.prototype, \"destroyed\", void 0);\nDropDownBase = __decorate([\n    NotifyPropertyChanges\n], DropDownBase);\n\n/**\n * export all modules from current location\n */\n\nvar __decorate$1 = (undefined && undefined.__decorate) || function (decorators, target, key, desc) {\n    var c = arguments.length, r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d;\n    if (typeof Reflect === \"object\" && typeof Reflect.decorate === \"function\") r = Reflect.decorate(decorators, target, key, desc);\n    else for (var i = decorators.length - 1; i >= 0; i--) if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;\n    return c > 3 && r && Object.defineProperty(target, key, r), r;\n};\n// eslint-disable-next-line @typescript-eslint/triple-slash-reference\n/// <reference path='../drop-down-base/drop-down-base-model.d.ts'/>\n// don't use space in classnames\nconst dropDownListClasses = {\n    root: 'e-dropdownlist',\n    hover: dropDownBaseClasses.hover,\n    selected: dropDownBaseClasses.selected,\n    rtl: dropDownBaseClasses.rtl,\n    li: dropDownBaseClasses.li,\n    disable: dropDownBaseClasses.disabled,\n    base: dropDownBaseClasses.root,\n    focus: dropDownBaseClasses.focus,\n    input: 'e-input-group',\n    inputFocus: 'e-input-focus',\n    icon: 'e-input-group-icon e-ddl-icon',\n    iconAnimation: 'e-icon-anim',\n    value: 'e-input-value',\n    device: 'e-ddl-device',\n    backIcon: 'e-input-group-icon e-back-icon e-icons',\n    filterBarClearIcon: 'e-input-group-icon e-clear-icon e-icons',\n    filterInput: 'e-input-filter',\n    filterParent: 'e-filter-parent',\n    mobileFilter: 'e-ddl-device-filter',\n    footer: 'e-ddl-footer',\n    header: 'e-ddl-header',\n    clearIcon: 'e-clear-icon',\n    clearIconHide: 'e-clear-icon-hide',\n    popupFullScreen: 'e-popup-full-page',\n    disableIcon: 'e-ddl-disable-icon',\n    hiddenElement: 'e-ddl-hidden'\n};\nconst inputObject = {\n    container: null,\n    buttons: []\n};\n/**\n * The DropDownList component contains a list of predefined values from which you can\n * choose a single value.\n * ```html\n * <input type=\"text\" tabindex=\"1\" id=\"list\"> </input>\n * ```\n * ```typescript\n *   let dropDownListObj:DropDownList = new DropDownList();\n *   dropDownListObj.appendTo(\"#list\");\n * ```\n */\nlet DropDownList = class DropDownList extends DropDownBase {\n    /**\n     * * Constructor for creating the DropDownList component.\n     *\n     * @param {DropDownListModel} options - Specifies the DropDownList model.\n     * @param {string | HTMLElement} element - Specifies the element to render as component.\n     * @private\n     */\n    constructor(options, element) {\n        super(options, element);\n        this.isListSearched = false;\n        this.preventChange = false;\n        this.isAngular = false;\n    }\n    /**\n     * Initialize the event handler.\n     *\n     * @private\n     * @returns {void}\n     */\n    preRender() {\n        this.valueTempElement = null;\n        this.element.style.opacity = '0';\n        this.initializeData();\n        super.preRender();\n        this.activeIndex = this.index;\n        this.queryString = '';\n    }\n    initializeData() {\n        this.isPopupOpen = false;\n        this.isDocumentClick = false;\n        this.isInteracted = false;\n        this.isFilterFocus = false;\n        this.beforePopupOpen = false;\n        this.initial = true;\n        this.initRemoteRender = false;\n        this.isNotSearchList = false;\n        this.isTyped = false;\n        this.isSelected = false;\n        this.preventFocus = false;\n        this.preventAutoFill = false;\n        this.isValidKey = false;\n        this.typedString = '';\n        this.isEscapeKey = false;\n        this.isPreventBlur = false;\n        this.isTabKey = false;\n        this.actionCompleteData = { isUpdated: false };\n        this.actionData = { isUpdated: false };\n        this.prevSelectPoints = {};\n        this.isSelectCustom = false;\n        this.isDropDownClick = false;\n        this.preventAltUp = false;\n        this.isCustomFilter = false;\n        this.isSecondClick = false;\n        this.previousValue = null;\n        this.keyConfigure = {\n            tab: 'tab',\n            enter: '13',\n            escape: '27',\n            end: '35',\n            home: '36',\n            down: '40',\n            up: '38',\n            pageUp: '33',\n            pageDown: '34',\n            open: 'alt+40',\n            close: 'shift+tab',\n            hide: 'alt+38',\n            space: '32'\n        };\n    }\n    setZIndex() {\n        if (this.popupObj) {\n            this.popupObj.setProperties({ 'zIndex': this.zIndex });\n        }\n    }\n    renderList(isEmptyData) {\n        super.render(isEmptyData);\n        this.unWireListEvents();\n        this.wireListEvents();\n    }\n    floatLabelChange() {\n        if (this.getModuleName() === 'dropdownlist' && this.floatLabelType === 'Auto') {\n            const floatElement = this.inputWrapper.container.querySelector('.e-float-text');\n            if (this.inputElement.value !== '' || this.isInteracted) {\n                classList(floatElement, ['e-label-top'], ['e-label-bottom']);\n            }\n            else {\n                classList(floatElement, ['e-label-bottom'], ['e-label-top']);\n            }\n        }\n    }\n    resetHandler(e) {\n        e.preventDefault();\n        this.clearAll(e);\n    }\n    resetFocusElement() {\n        this.removeHover();\n        this.removeSelection();\n        this.removeFocus();\n        this.list.scrollTop = 0;\n        if (this.getModuleName() !== 'autocomplete' && !isNullOrUndefined(this.ulElement)) {\n            const li = this.ulElement.querySelector('.' + dropDownListClasses.li);\n            if (li) {\n                li.classList.add(dropDownListClasses.focus);\n            }\n        }\n    }\n    clearAll(e, properties) {\n        if (isNullOrUndefined(properties) || (!isNullOrUndefined(properties) &&\n            (isNullOrUndefined(properties.dataSource) ||\n                (!(properties.dataSource instanceof DataManager) && properties.dataSource.length === 0)))) {\n            this.isActive = true;\n            this.resetSelection(properties);\n        }\n        const dataItem = this.getItemData();\n        if (this.previousValue === dataItem.value) {\n            return;\n        }\n        this.onChangeEvent(e);\n    }\n    resetSelection(properties) {\n        if (this.list) {\n            if ((!isNullOrUndefined(properties) &&\n                (isNullOrUndefined(properties.dataSource) ||\n                    (!(properties.dataSource instanceof DataManager) && properties.dataSource.length === 0)))) {\n                this.selectedLI = null;\n                this.actionCompleteData.isUpdated = false;\n                this.actionCompleteData.ulElement = null;\n                this.actionCompleteData.list = null;\n                this.resetList(properties.dataSource);\n            }\n            else {\n                if (this.allowFiltering && this.getModuleName() !== 'autocomplete'\n                    && !isNullOrUndefined(this.actionCompleteData.ulElement) && !isNullOrUndefined(this.actionCompleteData.list)) {\n                    this.onActionComplete(this.actionCompleteData.ulElement.cloneNode(true), this.actionCompleteData.list);\n                }\n                this.resetFocusElement();\n            }\n        }\n        this.hiddenElement.innerHTML = '';\n        this.inputElement.value = '';\n        this.value = null;\n        this.itemData = null;\n        this.text = null;\n        this.index = null;\n        this.activeIndex = null;\n        this.item = null;\n        this.queryString = '';\n        if (this.valueTempElement) {\n            detach(this.valueTempElement);\n            this.inputElement.style.display = 'block';\n            this.valueTempElement = null;\n        }\n        this.setSelection(null, null);\n        this.isSelectCustom = false;\n        this.updateIconState();\n        this.cloneElements();\n    }\n    setHTMLAttributes() {\n        if (Object.keys(this.htmlAttributes).length) {\n            for (const htmlAttr of Object.keys(this.htmlAttributes)) {\n                if (htmlAttr === 'class') {\n                    const updatedClassValue = (this.htmlAttributes[htmlAttr].replace(/\\s+/g, ' ')).trim();\n                    if (updatedClassValue !== '') {\n                        addClass([this.inputWrapper.container], updatedClassValue.split(' '));\n                    }\n                }\n                else if (htmlAttr === 'disabled' && this.htmlAttributes[htmlAttr] === 'disabled') {\n                    this.enabled = false;\n                    this.setEnable();\n                }\n                else if (htmlAttr === 'readonly' && !isNullOrUndefined(this.htmlAttributes[htmlAttr])) {\n                    this.readonly = true;\n                    this.dataBind();\n                }\n                else if (htmlAttr === 'style') {\n                    this.inputWrapper.container.setAttribute('style', this.htmlAttributes[htmlAttr]);\n                }\n                else {\n                    const defaultAttr = ['title', 'id', 'placeholder', 'aria-placeholder',\n                        'role', 'autocorrect', 'autocomplete', 'autocapitalize', 'spellcheck', 'minlength', 'maxlength'];\n                    const validateAttr = ['name', 'required'];\n                    if (this.getModuleName() === 'autocomplete' || this.getModuleName() === 'combobox') {\n                        defaultAttr.push('tabindex');\n                    }\n                    if (validateAttr.indexOf(htmlAttr) > -1 || htmlAttr.indexOf('data') === 0) {\n                        this.hiddenElement.setAttribute(htmlAttr, this.htmlAttributes[htmlAttr]);\n                    }\n                    else if (defaultAttr.indexOf(htmlAttr) > -1) {\n                        if (htmlAttr === 'placeholder') {\n                            Input.setPlaceholder(this.htmlAttributes[htmlAttr], this.inputElement);\n                        }\n                        else {\n                            this.inputElement.setAttribute(htmlAttr, this.htmlAttributes[htmlAttr]);\n                        }\n                    }\n                    else {\n                        this.inputWrapper.container.setAttribute(htmlAttr, this.htmlAttributes[htmlAttr]);\n                    }\n                }\n            }\n        }\n        if (this.getModuleName() === 'autocomplete' || this.getModuleName() === 'combobox') {\n            this.inputWrapper.container.removeAttribute('tabindex');\n        }\n    }\n    getAriaAttributes() {\n        return {\n            'aria-disabled': 'false',\n            'aria-owns': this.element.id + '_options',\n            'role': 'listbox',\n            'aria-haspopup': 'true',\n            'aria-expanded': 'false',\n            'aria-activedescendant': 'null',\n            'aria-live': 'polite',\n            'aria-labelledby': this.hiddenElement.id\n        };\n    }\n    setEnableRtl() {\n        Input.setEnableRtl(this.enableRtl, [this.inputElement.parentElement]);\n        if (this.popupObj) {\n            this.popupObj.enableRtl = this.enableRtl;\n            this.popupObj.dataBind();\n        }\n    }\n    setEnable() {\n        Input.setEnabled(this.enabled, this.inputElement);\n        if (this.enabled) {\n            removeClass([this.inputWrapper.container], dropDownListClasses.disable);\n            this.inputElement.setAttribute('aria-disabled', 'false');\n            this.targetElement().setAttribute('tabindex', this.tabIndex);\n        }\n        else {\n            this.hidePopup();\n            addClass([this.inputWrapper.container], dropDownListClasses.disable);\n            this.inputElement.setAttribute('aria-disabled', 'true');\n            this.targetElement().tabIndex = -1;\n        }\n    }\n    /**\n     * Get the properties to be maintained in the persisted state.\n     *\n     * @returns {string} Returns the persisted data of the component.\n     */\n    getPersistData() {\n        return this.addOnPersist(['value']);\n    }\n    getLocaleName() {\n        return 'drop-down-list';\n    }\n    preventTabIndex(element) {\n        if (this.getModuleName() === 'dropdownlist') {\n            element.tabIndex = -1;\n        }\n    }\n    targetElement() {\n        return this.inputWrapper.container;\n    }\n    getNgDirective() {\n        return 'EJS-DROPDOWNLIST';\n    }\n    getElementByText(text) {\n        return this.getElementByValue(this.getValueByText(text));\n    }\n    getElementByValue(value) {\n        let item;\n        const listItems = this.getItems();\n        for (const liItem of listItems) {\n            if (this.getFormattedValue(liItem.getAttribute('data-value')) === value) {\n                item = liItem;\n                break;\n            }\n        }\n        return item;\n    }\n    initValue() {\n        this.renderList();\n        if (this.dataSource instanceof DataManager) {\n            this.initRemoteRender = true;\n        }\n        else {\n            this.updateValues();\n        }\n    }\n    updateValues() {\n        if (!isNullOrUndefined(this.value)) {\n            this.setSelection(this.getElementByValue(this.value), null);\n        }\n        else if (this.text && isNullOrUndefined(this.value)) {\n            const element = this.getElementByText(this.text);\n            if (isNullOrUndefined(element)) {\n                this.setProperties({ text: null });\n                return;\n            }\n            else {\n                this.setSelection(element, null);\n            }\n        }\n        else {\n            this.setSelection(this.liCollections[this.activeIndex], null);\n        }\n        this.setHiddenValue();\n        Input.setValue(this.text, this.inputElement, this.floatLabelType, this.showClearButton);\n    }\n    onBlurHandler(e) {\n        if (!this.enabled) {\n            return;\n        }\n        const target = e.relatedTarget;\n        const currentTarget = e.target;\n        const isPreventBlur = this.isPreventBlur;\n        this.isPreventBlur = false;\n        //IE 11 - issue\n        if (isPreventBlur && !this.isDocumentClick && this.isPopupOpen && (!isNullOrUndefined(currentTarget) ||\n            !this.isFilterLayout() && isNullOrUndefined(target))) {\n            if (this.getModuleName() === 'dropdownlist' && this.allowFiltering && this.isPopupOpen) {\n                this.filterInput.focus();\n            }\n            else {\n                this.targetElement().focus();\n            }\n            return;\n        }\n        if (this.isDocumentClick || (!isNullOrUndefined(this.popupObj)\n            && document.body.contains(this.popupObj.element) &&\n            this.popupObj.element.classList.contains(dropDownListClasses.mobileFilter))) {\n            if (!this.beforePopupOpen) {\n                this.isDocumentClick = false;\n            }\n            return;\n        }\n        if (((this.getModuleName() === 'dropdownlist' && !this.isFilterFocus && target !== this.inputElement)\n            && (document.activeElement !== target || (document.activeElement === target &&\n                currentTarget.classList.contains(dropDownListClasses.inputFocus)))) ||\n            (isNullOrUndefined(target) && this.getModuleName() === 'dropdownlist' && this.allowFiltering &&\n                currentTarget !== this.inputWrapper.container) || this.getModuleName() !== 'dropdownlist' &&\n            !this.inputWrapper.container.contains(target) || this.isTabKey) {\n            this.isDocumentClick = this.isPopupOpen ? true : false;\n            this.focusOutAction(e);\n            this.isTabKey = false;\n        }\n        if (this.isRequested && !this.isPopupOpen && !this.isPreventBlur) {\n            this.isActive = false;\n            this.beforePopupOpen = false;\n        }\n    }\n    focusOutAction(e) {\n        this.isInteracted = false;\n        this.focusOut(e);\n        this.onFocusOut();\n    }\n    onFocusOut() {\n        if (!this.enabled) {\n            return;\n        }\n        if (this.isSelected) {\n            this.isSelectCustom = false;\n            this.onChangeEvent(null);\n        }\n        this.floatLabelChange();\n        this.dispatchEvent(this.hiddenElement, 'change');\n        if (this.getModuleName() === 'dropdownlist' && this.element.tagName !== 'INPUT') {\n            this.dispatchEvent(this.inputElement, 'blur');\n        }\n        if (this.inputWrapper.clearButton) {\n            addClass([this.inputWrapper.clearButton], dropDownListClasses.clearIconHide);\n        }\n        this.trigger('blur');\n    }\n    onFocus(e) {\n        if (!this.isInteracted) {\n            this.isInteracted = true;\n            const args = { isInteracted: e ? true : false, event: e };\n            this.trigger('focus', args);\n        }\n        this.updateIconState();\n    }\n    resetValueHandler(e) {\n        const formElement = closest(this.inputElement, 'form');\n        if (formElement && e.target === formElement) {\n            const val = (this.element.tagName === this.getNgDirective()) ? null : this.inputElement.getAttribute('value');\n            this.text = val;\n        }\n    }\n    wireEvent() {\n        EventHandler.add(this.inputWrapper.container, 'mousedown', this.dropDownClick, this);\n        EventHandler.add(this.inputWrapper.container, 'focus', this.focusIn, this);\n        EventHandler.add(this.inputWrapper.container, 'keypress', this.onSearch, this);\n        this.bindCommonEvent();\n    }\n    bindCommonEvent() {\n        EventHandler.add(this.targetElement(), 'blur', this.onBlurHandler, this);\n        const formElement = closest(this.inputElement, 'form');\n        if (formElement) {\n            EventHandler.add(formElement, 'reset', this.resetValueHandler, this);\n        }\n        if (!Browser.isDevice) {\n            this.keyboardModule = new KeyboardEvents(this.targetElement(), {\n                keyAction: this.keyActionHandler.bind(this), keyConfigs: this.keyConfigure, eventName: 'keydown'\n            });\n        }\n        else {\n            this.keyboardModule = new KeyboardEvents(this.targetElement(), {\n                keyAction: this.mobileKeyActionHandler.bind(this), keyConfigs: this.keyConfigure, eventName: 'keydown'\n            });\n        }\n        this.bindClearEvent();\n    }\n    bindClearEvent() {\n        if (this.showClearButton) {\n            EventHandler.add(this.inputWrapper.clearButton, 'mousedown', this.resetHandler, this);\n        }\n    }\n    unBindCommonEvent() {\n        if (this.targetElement()) {\n            EventHandler.remove(this.targetElement(), 'blur', this.onBlurHandler);\n        }\n        const formElement = this.inputElement && closest(this.inputElement, 'form');\n        if (formElement) {\n            EventHandler.remove(formElement, 'reset', this.resetValueHandler);\n        }\n        if (!Browser.isDevice) {\n            this.keyboardModule.destroy();\n        }\n        if (this.showClearButton) {\n            EventHandler.remove(this.inputWrapper.clearButton, 'mousedown', this.resetHandler);\n        }\n    }\n    updateIconState() {\n        if (this.showClearButton) {\n            if (this.inputElement.value !== '' && !this.readonly) {\n                removeClass([this.inputWrapper.clearButton], dropDownListClasses.clearIconHide);\n            }\n            else {\n                addClass([this.inputWrapper.clearButton], dropDownListClasses.clearIconHide);\n            }\n        }\n    }\n    /**\n     * Event binding for list\n     *\n     * @returns {void}\n     */\n    wireListEvents() {\n        EventHandler.add(this.list, 'click', this.onMouseClick, this);\n        EventHandler.add(this.list, 'mouseover', this.onMouseOver, this);\n        EventHandler.add(this.list, 'mouseout', this.onMouseLeave, this);\n    }\n    onSearch(e) {\n        if (e.charCode !== 32 && e.charCode !== 13) {\n            if (this.list === undefined) {\n                this.renderList();\n            }\n            this.searchKeyEvent = e;\n            this.onServerIncrementalSearch(e);\n        }\n    }\n    onServerIncrementalSearch(e) {\n        if (!this.isRequested && !isNullOrUndefined(this.list) &&\n            !isNullOrUndefined(this.list.querySelector('li')) && this.enabled && !this.readonly) {\n            this.incrementalSearch(e);\n        }\n    }\n    onMouseClick(e) {\n        const target = e.target;\n        const li = closest(target, '.' + dropDownBaseClasses.li);\n        if (!this.isValidLI(li)) {\n            return;\n        }\n        this.setSelection(li, e);\n        if (Browser.isDevice && this.isFilterLayout()) {\n            history.back();\n        }\n        else {\n            const delay = 100;\n            this.closePopup(delay);\n        }\n    }\n    onMouseOver(e) {\n        const currentLi = closest(e.target, '.' + dropDownBaseClasses.li);\n        this.setHover(currentLi);\n    }\n    setHover(li) {\n        if (this.enabled && this.isValidLI(li) && !li.classList.contains(dropDownBaseClasses.hover)) {\n            this.removeHover();\n            addClass([li], dropDownBaseClasses.hover);\n        }\n    }\n    onMouseLeave() {\n        this.removeHover();\n    }\n    removeHover() {\n        if (this.list) {\n            const hoveredItem = this.list.querySelectorAll('.' + dropDownBaseClasses.hover);\n            if (hoveredItem && hoveredItem.length) {\n                removeClass(hoveredItem, dropDownBaseClasses.hover);\n            }\n        }\n    }\n    isValidLI(li) {\n        return (li && li.hasAttribute('role') && li.getAttribute('role') === 'option');\n    }\n    incrementalSearch(e) {\n        if (this.liCollections.length > 0) {\n            const li = incrementalSearch(e.charCode, this.liCollections, this.activeIndex, true, this.element.id);\n            if (!isNullOrUndefined(li)) {\n                this.setSelection(li, e);\n                this.setScrollPosition();\n            }\n        }\n    }\n    /**\n     * Hides the spinner loader.\n     *\n     * @returns {void}\n     */\n    hideSpinner() {\n        if (!isNullOrUndefined(this.spinnerElement)) {\n            hideSpinner(this.spinnerElement);\n            removeClass([this.spinnerElement], dropDownListClasses.disableIcon);\n            this.spinnerElement.innerHTML = '';\n            this.spinnerElement = null;\n        }\n    }\n    /**\n     * Shows the spinner loader.\n     *\n     * @returns {void}\n     */\n    showSpinner() {\n        if (isNullOrUndefined(this.spinnerElement)) {\n            this.spinnerElement = Browser.isDevice && !isNullOrUndefined(this.filterInputObj) && this.filterInputObj.buttons[1] ||\n                !isNullOrUndefined(this.filterInputObj) && this.filterInputObj.buttons[0] || this.inputWrapper.buttons[0];\n            addClass([this.spinnerElement], dropDownListClasses.disableIcon);\n            createSpinner({\n                target: this.spinnerElement,\n                width: Browser.isDevice ? '16px' : '14px'\n            }, this.createElement);\n            showSpinner(this.spinnerElement);\n        }\n    }\n    keyActionHandler(e) {\n        if (!this.enabled) {\n            return;\n        }\n        const preventAction = e.action === 'pageUp' || e.action === 'pageDown';\n        const preventHomeEnd = this.getModuleName() !== 'dropdownlist' && (e.action === 'home' || e.action === 'end');\n        this.isEscapeKey = e.action === 'escape';\n        this.isTabKey = !this.isPopupOpen && e.action === 'tab';\n        const isNavAction = e.action === 'down' || e.action === 'up' || e.action === 'home' || e.action === 'end';\n        const isNavigation = (e.action === 'down' || e.action === 'up' || e.action === 'pageUp' || e.action === 'pageDown'\n            || e.action === 'home' || e.action === 'end');\n        if ((this.isEditTextBox() || preventAction || preventHomeEnd) && !this.isPopupOpen) {\n            return;\n        }\n        if (!this.readonly) {\n            const isTabAction = e.action === 'tab' || e.action === 'close';\n            if (this.list === undefined && !this.isRequested && !isTabAction && e.action !== 'escape') {\n                this.searchKeyEvent = e;\n                this.renderList();\n            }\n            if (isNullOrUndefined(this.list) || (!isNullOrUndefined(this.liCollections) &&\n                isNavigation && this.liCollections.length === 0) || this.isRequested) {\n                return;\n            }\n            if ((isTabAction && this.getModuleName() !== 'autocomplete') && this.isPopupOpen\n                || e.action === 'escape') {\n                e.preventDefault();\n            }\n            this.isSelected = e.action === 'escape' ? false : this.isSelected;\n            this.isTyped = (isNavigation || e.action === 'escape') ? false : this.isTyped;\n            switch (e.action) {\n                case 'down':\n                case 'up':\n                    this.updateUpDownAction(e);\n                    break;\n                case 'pageUp':\n                    this.pageUpSelection(this.activeIndex - this.getPageCount(), e);\n                    e.preventDefault();\n                    break;\n                case 'pageDown':\n                    this.pageDownSelection(this.activeIndex + this.getPageCount(), e);\n                    e.preventDefault();\n                    break;\n                case 'home':\n                    this.updateHomeEndAction(e);\n                    break;\n                case 'end':\n                    this.updateHomeEndAction(e);\n                    break;\n                case 'space':\n                    if (this.getModuleName() === 'dropdownlist') {\n                        if (!this.beforePopupOpen) {\n                            this.showPopup();\n                        }\n                    }\n                    break;\n                case 'open':\n                    this.showPopup();\n                    break;\n                case 'hide':\n                    this.preventAltUp = this.isPopupOpen;\n                    this.hidePopup(e);\n                    this.focusDropDown(e);\n                    break;\n                case 'enter':\n                    this.selectCurrentItem(e);\n                    break;\n                case 'tab':\n                    this.selectCurrentValueOnTab(e);\n                    break;\n                case 'escape':\n                case 'close':\n                    if (this.isPopupOpen) {\n                        this.hidePopup(e);\n                        this.focusDropDown(e);\n                    }\n                    break;\n            }\n        }\n    }\n    updateUpDownAction(e) {\n        const focusEle = this.list.querySelector('.' + dropDownListClasses.focus);\n        if (this.isSelectFocusItem(focusEle)) {\n            this.setSelection(focusEle, e);\n        }\n        else if (!isNullOrUndefined(this.liCollections)) {\n            let index = e.action === 'down' ? this.activeIndex + 1 : this.activeIndex - 1;\n            let startIndex = 0;\n            if (this.getModuleName() === 'autocomplete') {\n                startIndex = e.action === 'down' && isNullOrUndefined(this.activeIndex) ? 0 : this.liCollections.length - 1;\n                index = index < 0 ? this.liCollections.length - 1 : index === this.liCollections.length ? 0 : index;\n            }\n            const nextItem = isNullOrUndefined(this.activeIndex) ? this.liCollections[startIndex] : this.liCollections[index];\n            if (!isNullOrUndefined(nextItem)) {\n                this.setSelection(nextItem, e);\n            }\n        }\n        e.preventDefault();\n    }\n    updateHomeEndAction(e) {\n        if (this.getModuleName() === 'dropdownlist') {\n            let findLi = 0;\n            if (e.action === 'home') {\n                findLi = 0;\n            }\n            else {\n                findLi = this.getItems().length - 1;\n            }\n            e.preventDefault();\n            if (this.activeIndex === findLi) {\n                return;\n            }\n            this.setSelection(this.liCollections[findLi], e);\n        }\n    }\n    selectCurrentValueOnTab(e) {\n        if (this.getModuleName() === 'autocomplete') {\n            this.selectCurrentItem(e);\n        }\n        else {\n            if (this.isPopupOpen) {\n                this.hidePopup(e);\n                this.focusDropDown(e);\n            }\n        }\n    }\n    mobileKeyActionHandler(e) {\n        if (!this.enabled) {\n            return;\n        }\n        if ((this.isEditTextBox()) && !this.isPopupOpen) {\n            return;\n        }\n        if (!this.readonly) {\n            if (this.list === undefined && !this.isRequested) {\n                this.searchKeyEvent = e;\n                this.renderList();\n            }\n            if (isNullOrUndefined(this.list) || (!isNullOrUndefined(this.liCollections) &&\n                this.liCollections.length === 0) || this.isRequested) {\n                return;\n            }\n            if (e.action === 'enter') {\n                this.selectCurrentItem(e);\n            }\n        }\n    }\n    selectCurrentItem(e) {\n        if (this.isPopupOpen) {\n            const li = this.list.querySelector('.' + dropDownListClasses.focus);\n            if (li) {\n                this.setSelection(li, e);\n                this.isTyped = false;\n            }\n            if (this.isSelected) {\n                this.isSelectCustom = false;\n                this.onChangeEvent(e);\n            }\n            this.hidePopup();\n            this.focusDropDown(e);\n        }\n        else {\n            this.showPopup();\n        }\n    }\n    isSelectFocusItem(element) {\n        return !isNullOrUndefined(element);\n    }\n    getPageCount() {\n        const liHeight = this.list.classList.contains(dropDownBaseClasses.noData) ? null :\n            getComputedStyle(this.getItems()[0], null).getPropertyValue('height');\n        return Math.round(this.list.getBoundingClientRect().height / parseInt(liHeight, 10));\n    }\n    pageUpSelection(steps, event) {\n        const previousItem = steps >= 0 ? this.liCollections[steps + 1] : this.liCollections[0];\n        this.setSelection(previousItem, event);\n    }\n    pageDownSelection(steps, event) {\n        const list = this.getItems();\n        const previousItem = steps <= list.length ? this.liCollections[steps - 1] : this.liCollections[list.length - 1];\n        this.setSelection(previousItem, event);\n    }\n    unWireEvent() {\n        EventHandler.remove(this.inputWrapper.container, 'mousedown', this.dropDownClick);\n        EventHandler.remove(this.inputWrapper.container, 'keypress', this.onSearch);\n        EventHandler.remove(this.inputWrapper.container, 'focus', this.focusIn);\n        this.unBindCommonEvent();\n    }\n    /**\n     * Event un binding for list items.\n     *\n     * @returns {void}\n     */\n    unWireListEvents() {\n        EventHandler.remove(this.list, 'click', this.onMouseClick);\n        EventHandler.remove(this.list, 'mouseover', this.onMouseOver);\n        EventHandler.remove(this.list, 'mouseout', this.onMouseLeave);\n    }\n    checkSelector(id) {\n        return '[id=\"' + id.replace(/(:|\\.|\\[|\\]|,|=|@|\\\\|\\/|#)/g, '\\\\$1') + '\"]';\n    }\n    onDocumentClick(e) {\n        const target = e.target;\n        if (!(!isNullOrUndefined(this.popupObj) && closest(target, this.checkSelector(this.popupObj.element.id))) &&\n            !this.inputWrapper.container.contains(e.target)) {\n            if (this.inputWrapper.container.classList.contains(dropDownListClasses.inputFocus) || this.isPopupOpen) {\n                this.isDocumentClick = true;\n                const isActive = this.isRequested;\n                this.isInteracted = false;\n                this.hidePopup(e);\n                if (!isActive) {\n                    this.onFocusOut();\n                    this.inputWrapper.container.classList.remove(dropDownListClasses.inputFocus);\n                }\n            }\n        }\n        else if (target !== this.inputElement && !(this.allowFiltering && target === this.filterInput)\n            && !(this.getModuleName() === 'combobox' &&\n                !this.allowFiltering && Browser.isDevice && target === this.inputWrapper.buttons[0])) {\n            this.isPreventBlur = (Browser.isIE || Browser.info.name === 'edge') && (document.activeElement === this.targetElement() ||\n                document.activeElement === this.filterInput);\n            e.preventDefault();\n        }\n    }\n    activeStateChange() {\n        if (this.isDocumentClick) {\n            this.hidePopup();\n            this.onFocusOut();\n            this.inputWrapper.container.classList.remove(dropDownListClasses.inputFocus);\n        }\n    }\n    focusDropDown(e) {\n        if (!this.initial && this.isFilterLayout()) {\n            this.focusIn(e);\n        }\n    }\n    dropDownClick(e) {\n        if (e.which === 3 || e.button === 2) {\n            return;\n        }\n        if (this.targetElement().classList.contains(dropDownListClasses.disable) || this.inputWrapper.clearButton === e.target) {\n            return;\n        }\n        const target = e.target;\n        if (target !== this.inputElement && !(this.allowFiltering && target === this.filterInput) && this.getModuleName() !== 'combobox') {\n            e.preventDefault();\n        }\n        if (!this.readonly) {\n            if (this.isPopupOpen) {\n                this.hidePopup();\n                if (this.isFilterLayout()) {\n                    this.focusDropDown(e);\n                }\n            }\n            else {\n                this.focusIn(e);\n                this.floatLabelChange();\n                this.queryString = this.inputElement.value.trim() === '' ? null : this.inputElement.value;\n                this.isDropDownClick = true;\n                this.showPopup();\n            }\n            // eslint-disable-next-line @typescript-eslint/no-this-alias\n            const proxy = this;\n            // eslint-disable-next-line max-len\n            const duration = (this.element.tagName === this.getNgDirective() && this.itemTemplate) ? 500 : 100;\n            if (!this.isSecondClick) {\n                setTimeout(() => {\n                    proxy.cloneElements();\n                    proxy.isSecondClick = true;\n                }, duration);\n            }\n        }\n        else {\n            this.focusIn(e);\n        }\n    }\n    cloneElements() {\n        if (this.list) {\n            let ulElement = this.list.querySelector('ul');\n            if (ulElement) {\n                ulElement = ulElement.cloneNode ? ulElement.cloneNode(true) : ulElement;\n                this.actionCompleteData.ulElement = ulElement;\n            }\n        }\n    }\n    updateSelectedItem(li, e, preventSelect, isSelection) {\n        this.removeSelection();\n        li.classList.add(dropDownBaseClasses.selected);\n        this.removeHover();\n        const value = this.getFormattedValue(li.getAttribute('data-value'));\n        const selectedData = this.getDataByValue(value);\n        if (!this.initial && !preventSelect && !isNullOrUndefined(e)) {\n            const items = this.detachChanges(selectedData);\n            this.isSelected = true;\n            const eventArgs = {\n                e: e,\n                item: li,\n                itemData: items,\n                isInteracted: e ? true : false,\n                cancel: false\n            };\n            this.trigger('select', eventArgs, (eventArgs) => {\n                if (eventArgs.cancel) {\n                    li.classList.remove(dropDownBaseClasses.selected);\n                }\n                else {\n                    this.selectEventCallback(li, e, preventSelect, selectedData, value);\n                    if (isSelection) {\n                        this.setSelectOptions(li, e);\n                    }\n                }\n            });\n        }\n        else {\n            this.selectEventCallback(li, e, preventSelect, selectedData, value);\n            if (isSelection) {\n                this.setSelectOptions(li, e);\n            }\n        }\n    }\n    selectEventCallback(li, e, preventSelect, selectedData, value) {\n        this.previousItemData = (!isNullOrUndefined(this.itemData)) ? this.itemData : null;\n        this.item = li;\n        this.itemData = selectedData;\n        const focusedItem = this.list.querySelector('.' + dropDownBaseClasses.focus);\n        if (focusedItem) {\n            removeClass([focusedItem], dropDownBaseClasses.focus);\n        }\n        li.setAttribute('aria-selected', 'true');\n        this.activeIndex = this.getIndexByValue(value);\n    }\n    activeItem(li) {\n        if (this.isValidLI(li) && !li.classList.contains(dropDownBaseClasses.selected)) {\n            this.removeSelection();\n            li.classList.add(dropDownBaseClasses.selected);\n            this.removeHover();\n            li.setAttribute('aria-selected', 'true');\n        }\n    }\n    // eslint-disable-next-line @typescript-eslint/no-unused-vars\n    setValue(e) {\n        const dataItem = this.getItemData();\n        if (dataItem.value === null) {\n            Input.setValue(null, this.inputElement, this.floatLabelType, this.showClearButton);\n        }\n        else {\n            Input.setValue(dataItem.text, this.inputElement, this.floatLabelType, this.showClearButton);\n        }\n        if (this.valueTemplate && this.itemData !== null) {\n            this.setValueTemplate();\n        }\n        else if (!isNullOrUndefined(this.valueTempElement) && this.inputElement.previousSibling === this.valueTempElement) {\n            detach(this.valueTempElement);\n            this.inputElement.style.display = 'block';\n        }\n        let clearIcon = dropDownListClasses.clearIcon;\n        let isFilterElement = this.isFiltering() && this.filterInput && (this.getModuleName() === 'combobox');\n        let clearElement = isFilterElement && this.filterInput.parentElement.querySelector('.' + clearIcon);\n        if (this.isFiltering() && clearElement) {\n            clearElement.style.removeProperty('visibility');\n        }\n        if (this.previousValue === dataItem.value) {\n            this.isSelected = false;\n            return true;\n        }\n        else {\n            this.isSelected = !this.initial ? true : false;\n            this.isSelectCustom = false;\n            if (this.getModuleName() === 'dropdownlist') {\n                this.updateIconState();\n            }\n            return false;\n        }\n    }\n    setSelection(li, e) {\n        if (this.isValidLI(li) && (!li.classList.contains(dropDownBaseClasses.selected) || (this.isPopupOpen && this.isSelected\n            && li.classList.contains(dropDownBaseClasses.selected)))) {\n            this.updateSelectedItem(li, e, false, true);\n        }\n        else {\n            this.setSelectOptions(li, e);\n        }\n    }\n    setSelectOptions(li, e) {\n        if (this.list) {\n            this.removeHover();\n        }\n        this.previousSelectedLI = (!isNullOrUndefined(this.selectedLI)) ? this.selectedLI : null;\n        this.selectedLI = li;\n        if (this.setValue(e)) {\n            return;\n        }\n        if (this.isPopupOpen) {\n            attributes(this.targetElement(), { 'aria-activedescendant': this.selectedLI ? this.selectedLI.id : null });\n            if (this.isFilterLayout() && this.filterInput) {\n                attributes(this.filterInput, { 'aria-activedescendant': this.selectedLI ? this.selectedLI.id : null });\n            }\n        }\n        if ((!this.isPopupOpen && !isNullOrUndefined(li)) || (this.isPopupOpen && !isNullOrUndefined(e) &&\n            (e.type !== 'keydown' || e.type === 'keydown' && e.action === 'enter'))) {\n            this.isSelectCustom = false;\n            this.onChangeEvent(e);\n        }\n        if (this.isPopupOpen && !isNullOrUndefined(this.selectedLI) && this.itemData !== null && (!e || e.type !== 'click')) {\n            this.setScrollPosition(e);\n        }\n        if (Browser.info.name !== 'mozilla') {\n            attributes(this.inputElement, { 'aria-label': this.inputElement.value });\n            attributes(this.targetElement(), { 'aria-describedby': this.inputElement.id });\n            this.targetElement().removeAttribute('aria-live');\n        }\n    }\n    dropdownCompiler(dropdownTemplate) {\n        let checkTemplate = false;\n        if (dropdownTemplate) {\n            try {\n                checkTemplate = (document.querySelectorAll(dropdownTemplate).length) ? true : false;\n            }\n            catch (exception) {\n                checkTemplate = false;\n            }\n        }\n        return checkTemplate;\n    }\n    setValueTemplate() {\n        let compiledString;\n        // eslint-disable-next-line @typescript-eslint/no-explicit-any\n        if (this.isReact) {\n            this.clearTemplate(['valueTemplate']);\n        }\n        if (!this.valueTempElement) {\n            this.valueTempElement = this.createElement('span', { className: dropDownListClasses.value });\n            this.inputElement.parentElement.insertBefore(this.valueTempElement, this.inputElement);\n            this.inputElement.style.display = 'none';\n        }\n        this.valueTempElement.innerHTML = '';\n        const valuecheck = this.dropdownCompiler(this.valueTemplate);\n        if (valuecheck) {\n            compiledString = compile(document.querySelector(this.valueTemplate).innerHTML.trim());\n        }\n        else {\n            compiledString = compile(this.valueTemplate);\n        }\n        // eslint-disable-next-line @typescript-eslint/no-explicit-any\n        const valueCompTemp = compiledString(this.itemData, this, 'valueTemplate', this.valueTemplateId, this.isStringTemplate, null, this.valueTempElement);\n        if (valueCompTemp && valueCompTemp.length > 0) {\n            for (let i = 0; i < valueCompTemp.length; i++) {\n                this.valueTempElement.appendChild(valueCompTemp[i]);\n            }\n        }\n        this.renderReactTemplates();\n    }\n    removeSelection() {\n        if (this.list) {\n            const selectedItems = this.list.querySelectorAll('.' + dropDownBaseClasses.selected);\n            if (selectedItems.length) {\n                removeClass(selectedItems, dropDownBaseClasses.selected);\n                selectedItems[0].removeAttribute('aria-selected');\n            }\n        }\n    }\n    getItemData() {\n        const fields = this.fields;\n        let dataItem = null;\n        dataItem = this.itemData;\n        let dataValue;\n        let dataText;\n        if (!isNullOrUndefined(dataItem)) {\n            dataValue = getValue(fields.value, dataItem);\n            dataText = getValue(fields.text, dataItem);\n        }\n        const value = (!isNullOrUndefined(dataItem) &&\n            !isUndefined(dataValue) ? dataValue : dataItem);\n        const text = (!isNullOrUndefined(dataItem) &&\n            !isUndefined(dataValue) ? dataText : dataItem);\n        return { value: value, text: text };\n    }\n    /**\n     * To trigger the change event for list.\n     *\n     * @param {MouseEvent | KeyboardEvent | TouchEvent} eve - Specifies the event arguments.\n     * @returns {void}\n     */\n    onChangeEvent(eve) {\n        const dataItem = this.getItemData();\n        const index = this.isSelectCustom ? null : this.activeIndex;\n        this.setProperties({ 'index': index, 'text': dataItem.text, 'value': dataItem.value }, true);\n        this.detachChangeEvent(eve);\n    }\n    detachChanges(value) {\n        let items;\n        if (typeof value === 'string' ||\n            typeof value === 'boolean' ||\n            typeof value === 'number') {\n            items = Object.defineProperties({}, {\n                value: {\n                    value: value,\n                    enumerable: true\n                },\n                text: {\n                    value: value,\n                    enumerable: true\n                }\n            });\n        }\n        else {\n            items = value;\n        }\n        return items;\n    }\n    detachChangeEvent(eve) {\n        this.isSelected = false;\n        this.previousValue = this.value;\n        this.activeIndex = this.index;\n        this.typedString = !isNullOrUndefined(this.text) ? this.text : '';\n        if (!this.initial) {\n            const items = this.detachChanges(this.itemData);\n            let preItems;\n            if (typeof this.previousItemData === 'string' ||\n                typeof this.previousItemData === 'boolean' ||\n                typeof this.previousItemData === 'number') {\n                preItems = Object.defineProperties({}, {\n                    value: {\n                        value: this.previousItemData,\n                        enumerable: true\n                    },\n                    text: {\n                        value: this.previousItemData,\n                        enumerable: true\n                    }\n                });\n            }\n            else {\n                preItems = this.previousItemData;\n            }\n            this.setHiddenValue();\n            const eventArgs = {\n                e: eve,\n                item: this.item,\n                itemData: items,\n                previousItem: this.previousSelectedLI,\n                previousItemData: preItems,\n                isInteracted: eve ? true : false,\n                value: this.value,\n                element: this.element,\n                event: eve\n            };\n            if (this.isAngular && this.preventChange) {\n                this.preventChange = false;\n            }\n            else {\n                this.trigger('change', eventArgs);\n            }\n        }\n        if ((isNullOrUndefined(this.value) || this.value === '') && this.floatLabelType !== 'Always') {\n            removeClass([this.inputWrapper.container], 'e-valid-input');\n        }\n    }\n    setHiddenValue() {\n        if (!isNullOrUndefined(this.value)) {\n            if (this.hiddenElement.querySelector('option')) {\n                const selectedElement = this.hiddenElement.querySelector('option');\n                selectedElement.textContent = this.text;\n                selectedElement.setAttribute('value', this.value.toString());\n            }\n            else {\n                this.hiddenElement.innerHTML = '<option selected>' + this.text + '</option>';\n                const selectedElement = this.hiddenElement.querySelector('option');\n                selectedElement.setAttribute('value', this.value.toString());\n            }\n        }\n        else {\n            this.hiddenElement.innerHTML = '';\n        }\n    }\n    /**\n     * Filter bar implementation\n     *\n     * @param {KeyboardEventArgs} e - Specifies the event arguments.\n     * @returns {void}\n     */\n    onFilterUp(e) {\n        if (!(e.ctrlKey && e.keyCode === 86) && (this.isValidKey || e.keyCode === 40 || e.keyCode === 38)) {\n            this.isValidKey = false;\n            switch (e.keyCode) {\n                case 38: //up arrow\n                case 40: //down arrow\n                    if (this.getModuleName() === 'autocomplete' && !this.isPopupOpen && !this.preventAltUp && !this.isRequested) {\n                        this.preventAutoFill = true;\n                        this.searchLists(e);\n                    }\n                    else {\n                        this.preventAutoFill = false;\n                    }\n                    this.preventAltUp = false;\n                    e.preventDefault();\n                    break;\n                case 46: //delete\n                case 8: //backspace\n                    this.typedString = this.filterInput.value;\n                    if (!this.isPopupOpen && this.typedString !== '' || this.isPopupOpen && this.queryString.length > 0) {\n                        this.preventAutoFill = true;\n                        this.searchLists(e);\n                    }\n                    else if (this.typedString === '' && this.queryString === '' && this.getModuleName() !== 'autocomplete') {\n                        this.preventAutoFill = true;\n                        this.searchLists(e);\n                    }\n                    else if (this.typedString === '') {\n                        if (this.list) {\n                            this.resetFocusElement();\n                        }\n                        this.activeIndex = null;\n                        if (this.getModuleName() !== 'dropdownlist') {\n                            this.preventAutoFill = true;\n                            this.searchLists(e);\n                            if (this.getModuleName() === 'autocomplete') {\n                                this.hidePopup();\n                            }\n                        }\n                    }\n                    e.preventDefault();\n                    break;\n                default:\n                    this.typedString = this.filterInput.value;\n                    this.preventAutoFill = false;\n                    this.searchLists(e);\n                    break;\n            }\n        }\n        else {\n            this.isValidKey = false;\n        }\n    }\n    onFilterDown(e) {\n        switch (e.keyCode) {\n            case 13: //enter\n                break;\n            case 40: //down arrow\n            case 38: //up arrow\n                this.queryString = this.filterInput.value;\n                e.preventDefault();\n                break;\n            case 9: //tab\n                if (this.isPopupOpen && this.getModuleName() !== 'autocomplete') {\n                    e.preventDefault();\n                }\n                break;\n            default:\n                this.prevSelectPoints = this.getSelectionPoints();\n                this.queryString = this.filterInput.value;\n                break;\n        }\n    }\n    removeFillSelection() {\n        if (this.isInteracted) {\n            const selection = this.getSelectionPoints();\n            this.inputElement.setSelectionRange(selection.end, selection.end);\n        }\n    }\n    getQuery(query) {\n        let filterQuery;\n        if (!this.isCustomFilter && this.allowFiltering && this.filterInput) {\n            filterQuery = query ? query.clone() : this.query ? this.query.clone() : new Query();\n            const filterType = this.typedString === '' ? 'contains' : this.filterType;\n            const dataType = this.typeOfData(this.dataSource).typeof;\n            if (!(this.dataSource instanceof DataManager) && dataType === 'string' || dataType === 'number') {\n                filterQuery.where('', filterType, this.typedString, this.ignoreCase, this.ignoreAccent);\n            }\n            else {\n                const fields = (this.fields.text) ? this.fields.text : '';\n                filterQuery.where(fields, filterType, this.typedString, this.ignoreCase, this.ignoreAccent);\n            }\n        }\n        else {\n            filterQuery = query ? query.clone() : this.query ? this.query.clone() : new Query();\n        }\n        return filterQuery;\n    }\n    getSelectionPoints() {\n        const input = this.inputElement;\n        return { start: Math.abs(input.selectionStart), end: Math.abs(input.selectionEnd) };\n    }\n    searchLists(e) {\n        this.isTyped = true;\n        this.activeIndex = null;\n        this.isListSearched = true;\n        if (this.filterInput.parentElement.querySelector('.' + dropDownListClasses.clearIcon)) {\n            const clearElement = this.filterInput.parentElement.querySelector('.' + dropDownListClasses.clearIcon);\n            clearElement.style.visibility = this.filterInput.value === '' ? 'hidden' : 'visible';\n        }\n        this.isDataFetched = false;\n        if (this.isFiltering()) {\n            const eventArgs = {\n                preventDefaultAction: false,\n                text: this.filterInput.value,\n                updateData: (dataSource, query, fields) => {\n                    if (eventArgs.cancel) {\n                        return;\n                    }\n                    this.isCustomFilter = true;\n                    this.filteringAction(dataSource, query, fields);\n                },\n                baseEventArgs: e,\n                cancel: false\n            };\n            this.trigger('filtering', eventArgs, (eventArgs) => {\n                if (!eventArgs.cancel && !this.isCustomFilter && !eventArgs.preventDefaultAction) {\n                    this.filteringAction(this.dataSource, null, this.fields);\n                }\n            });\n        }\n    }\n    /**\n     * To filter the data from given data source by using query\n     *\n     * @param  {Object[] | DataManager } dataSource - Set the data source to filter.\n     * @param  {Query} query - Specify the query to filter the data.\n     * @param  {FieldSettingsModel} fields - Specify the fields to map the column in the data table.\n     * @returns {void}\n     * @deprecated\n     */\n    filter(dataSource, query, fields) {\n        this.isCustomFilter = true;\n        this.filteringAction(dataSource, query, fields);\n    }\n    filteringAction(dataSource, query, fields) {\n        if (!isNullOrUndefined(this.filterInput)) {\n            this.beforePopupOpen = (!this.isPopupOpen && this.getModuleName() === 'combobox' && this.filterInput.value === '') ?\n                false : true;\n            if (this.filterInput.value.trim() === '' && !this.itemTemplate) {\n                this.actionCompleteData.isUpdated = false;\n                this.isTyped = false;\n                if (!isNullOrUndefined(this.actionCompleteData.ulElement) && !isNullOrUndefined(this.actionCompleteData.list)) {\n                    this.onActionComplete(this.actionCompleteData.ulElement, this.actionCompleteData.list);\n                }\n                this.isTyped = true;\n                if (!isNullOrUndefined(this.itemData) && this.getModuleName() === 'dropdownlist') {\n                    this.focusIndexItem();\n                    this.setScrollPosition();\n                }\n                this.isNotSearchList = true;\n            }\n            else {\n                this.isNotSearchList = false;\n                query = (this.filterInput.value.trim() === '') ? null : query;\n                this.resetList(dataSource, fields, query);\n            }\n            this.renderReactTemplates();\n        }\n    }\n    setSearchBox(popupElement) {\n        if (this.isFiltering()) {\n            const parentElement = popupElement.querySelector('.' + dropDownListClasses.filterParent) ?\n                popupElement.querySelector('.' + dropDownListClasses.filterParent) : this.createElement('span', {\n                className: dropDownListClasses.filterParent\n            });\n            this.filterInput = this.createElement('input', {\n                attrs: { type: 'text' },\n                className: dropDownListClasses.filterInput\n            });\n            this.element.parentNode.insertBefore(this.filterInput, this.element);\n            let backIcon = false;\n            if (Browser.isDevice) {\n                backIcon = true;\n            }\n            this.filterInputObj = Input.createInput({\n                element: this.filterInput,\n                buttons: backIcon ?\n                    [dropDownListClasses.backIcon, dropDownListClasses.filterBarClearIcon] : [dropDownListClasses.filterBarClearIcon],\n                properties: { placeholder: this.filterBarPlaceholder }\n            }, this.createElement);\n            if (!isNullOrUndefined(this.cssClass)) {\n                if (this.cssClass.split(' ').indexOf('e-outline') !== -1) {\n                    addClass([this.filterInputObj.container], 'e-outline');\n                }\n                else if (this.cssClass.split(' ').indexOf('e-filled') !== -1) {\n                    addClass([this.filterInputObj.container], 'e-filled');\n                }\n            }\n            append([this.filterInputObj.container], parentElement);\n            prepend([parentElement], popupElement);\n            attributes(this.filterInput, {\n                'aria-disabled': 'false',\n                'aria-owns': this.element.id + '_options',\n                'role': 'listbox',\n                'aria-activedescendant': this.selectedLI ? this.selectedLI.id : null,\n                'autocomplete': 'off',\n                'autocorrect': 'off',\n                'autocapitalize': 'off',\n                'spellcheck': 'false'\n            });\n            this.clearIconElement = this.filterInput.parentElement.querySelector('.' + dropDownListClasses.clearIcon);\n            if (!Browser.isDevice && this.clearIconElement) {\n                EventHandler.add(this.clearIconElement, 'click', this.clearText, this);\n                this.clearIconElement.style.visibility = 'hidden';\n            }\n            if (!Browser.isDevice) {\n                this.searchKeyModule = new KeyboardEvents(this.filterInput, {\n                    keyAction: this.keyActionHandler.bind(this),\n                    keyConfigs: this.keyConfigure,\n                    eventName: 'keydown'\n                });\n            }\n            else {\n                this.searchKeyModule = new KeyboardEvents(this.filterInput, {\n                    keyAction: this.mobileKeyActionHandler.bind(this),\n                    keyConfigs: this.keyConfigure,\n                    eventName: 'keydown'\n                });\n            }\n            EventHandler.add(this.filterInput, 'input', this.onInput, this);\n            EventHandler.add(this.filterInput, 'keyup', this.onFilterUp, this);\n            EventHandler.add(this.filterInput, 'keydown', this.onFilterDown, this);\n            EventHandler.add(this.filterInput, 'blur', this.onBlurHandler, this);\n            EventHandler.add(this.filterInput, 'paste', this.pasteHandler, this);\n            return this.filterInputObj;\n        }\n        else {\n            return inputObject;\n        }\n    }\n    onInput(e) {\n        this.isValidKey = true;\n        // For filtering works in mobile firefox.\n        if (Browser.isDevice && Browser.info.name === 'mozilla') {\n            this.typedString = this.filterInput.value;\n            this.preventAutoFill = true;\n            this.searchLists(e);\n        }\n    }\n    pasteHandler(e) {\n        setTimeout(() => {\n            this.typedString = this.filterInput.value;\n            this.searchLists(e);\n        });\n    }\n    onActionFailure(e) {\n        super.onActionFailure(e);\n        if (this.beforePopupOpen) {\n            this.renderPopup();\n        }\n    }\n    // eslint-disable-next-line @typescript-eslint/no-unused-vars\n    onActionComplete(ulElement, list, e, isUpdated) {\n        if (this.isNotSearchList) {\n            this.isNotSearchList = false;\n            return;\n        }\n        if (this.isActive) {\n            const selectedItem = this.selectedLI ? this.selectedLI.cloneNode(true) : null;\n            super.onActionComplete(ulElement, list, e);\n            this.updateSelectElementData(this.allowFiltering);\n            if (this.isRequested && !isNullOrUndefined(this.searchKeyEvent) && this.searchKeyEvent.type === 'keydown') {\n                this.isRequested = false;\n                this.keyActionHandler(this.searchKeyEvent);\n                this.searchKeyEvent = null;\n            }\n            if (this.isRequested && !isNullOrUndefined(this.searchKeyEvent)) {\n                this.incrementalSearch(this.searchKeyEvent);\n                this.searchKeyEvent = null;\n            }\n            this.list.scrollTop = 0;\n            if (!isNullOrUndefined(ulElement)) {\n                attributes(ulElement, { 'id': this.element.id + '_options', 'role': 'listbox', 'aria-hidden': 'false' });\n            }\n            if (this.initRemoteRender) {\n                this.initial = true;\n                this.activeIndex = this.index;\n                this.updateValues();\n                this.initRemoteRender = false;\n                this.initial = false;\n                if (this.value && this.dataSource instanceof DataManager) {\n                    const checkField = isNullOrUndefined(this.fields.value) ? this.fields.text : this.fields.value;\n                    const checkVal = list.some((x) => x[checkField] === this.value);\n                    if (!checkVal) {\n                        this.dataSource.executeQuery(this.getQuery(this.query).where(new Predicate(checkField, 'equal', this.value)))\n                            .then((e) => {\n                            if (e.result.length > 0) {\n                                this.addItem(e.result, list.length);\n                                this.updateValues();\n                            }\n                        });\n                    }\n                }\n            }\n            if (this.getModuleName() !== 'autocomplete' && this.isFiltering() && !this.isTyped) {\n                if (!this.actionCompleteData.isUpdated || ((!this.isCustomFilter\n                    && !this.isFilterFocus) || (isNullOrUndefined(this.itemData) && this.allowFiltering)\n                    && ((this.dataSource instanceof DataManager)\n                        || (!isNullOrUndefined(this.dataSource) && !isNullOrUndefined(this.dataSource.length) &&\n                            this.dataSource.length !== 0)))) {\n                    if (this.itemTemplate && this.element.tagName === 'EJS-COMBOBOX' && this.allowFiltering) {\n                        setTimeout(() => {\n                            this.updateActionCompleteDataValues(ulElement, list);\n                        }, 0);\n                    }\n                    else {\n                        this.updateActionCompleteDataValues(ulElement, list);\n                    }\n                }\n                this.addNewItem(list, selectedItem);\n                if (!isNullOrUndefined(this.itemData)) {\n                    this.focusIndexItem();\n                }\n            }\n            if (this.beforePopupOpen) {\n                this.renderPopup();\n            }\n        }\n    }\n    updateActionCompleteDataValues(ulElement, list) {\n        this.actionCompleteData = { ulElement: ulElement.cloneNode(true), list: list, isUpdated: true };\n        if (isNullOrUndefined(this.actionData.ulElement) && isNullOrUndefined(this.actionData.list)) {\n            this.actionData = this.actionCompleteData;\n        }\n    }\n    addNewItem(listData, newElement) {\n        if (!isNullOrUndefined(this.itemData) && !isNullOrUndefined(newElement)) {\n            const value = this.getItemData().value;\n            const isExist = listData.some((data) => {\n                return (((typeof data === 'string' || typeof data === 'number') && data === value) ||\n                    (getValue(this.fields.value, data) === value));\n            });\n            if (!isExist) {\n                this.addItem(this.itemData);\n            }\n        }\n    }\n    updateActionCompleteData(li, item, index) {\n        if (this.getModuleName() !== 'autocomplete' && this.actionCompleteData.ulElement) {\n            if (this.itemTemplate && this.element.tagName === 'EJS-COMBOBOX' && this.allowFiltering) {\n                setTimeout(() => {\n                    this.actionCompleteDataUpdate(li, item, index);\n                }, 0);\n            }\n            else {\n                this.actionCompleteDataUpdate(li, item, index);\n            }\n        }\n    }\n    actionCompleteDataUpdate(li, item, index) {\n        if (index != null) {\n            this.actionCompleteData.ulElement.insertBefore(li.cloneNode(true), this.actionCompleteData.ulElement.childNodes[index]);\n        }\n        else {\n            this.actionCompleteData.ulElement.appendChild(li.cloneNode(true));\n        }\n        if (this.isFiltering() && this.actionCompleteData.list.indexOf(item) < 0) {\n            this.actionCompleteData.list.push(item);\n        }\n    }\n    focusIndexItem() {\n        const value = this.getItemData().value;\n        this.activeIndex = this.getIndexByValue(value);\n        const element = this.findListElement(this.list, 'li', 'data-value', value);\n        this.selectedLI = element;\n        this.activeItem(element);\n        this.removeFocus();\n    }\n    updateSelection() {\n        const selectedItem = this.list.querySelector('.' + dropDownBaseClasses.selected);\n        if (selectedItem) {\n            this.setProperties({ 'index': this.getIndexByValue(selectedItem.getAttribute('data-value')) });\n            this.activeIndex = this.index;\n        }\n        else {\n            this.removeFocus();\n            this.list.querySelector('.' + dropDownBaseClasses.li).classList.add(dropDownListClasses.focus);\n        }\n    }\n    removeFocus() {\n        const highlightedItem = this.list.querySelectorAll('.' + dropDownListClasses.focus);\n        if (highlightedItem && highlightedItem.length) {\n            removeClass(highlightedItem, dropDownListClasses.focus);\n        }\n    }\n    renderPopup() {\n        if (this.popupObj && document.body.contains(this.popupObj.element)) {\n            this.refreshPopup();\n            return;\n        }\n        const args = { cancel: false };\n        this.trigger('beforeOpen', args, (args) => {\n            if (!args.cancel) {\n                const popupEle = this.createElement('div', {\n                    id: this.element.id + '_popup', className: 'e-ddl e-popup ' + (this.cssClass != null ? this.cssClass : '')\n                });\n                const searchBox = this.setSearchBox(popupEle);\n                this.listHeight = formatUnit(this.popupHeight);\n                if (this.headerTemplate) {\n                    this.setHeaderTemplate(popupEle);\n                }\n                append([this.list], popupEle);\n                if (this.footerTemplate) {\n                    this.setFooterTemplate(popupEle);\n                }\n                document.body.appendChild(popupEle);\n                popupEle.style.visibility = 'hidden';\n                if (this.popupHeight !== 'auto') {\n                    this.searchBoxHeight = 0;\n                    if (!isNullOrUndefined(searchBox.container)) {\n                        this.searchBoxHeight = (searchBox.container.parentElement).getBoundingClientRect().height;\n                        this.listHeight = (parseInt(this.listHeight, 10) - (this.searchBoxHeight)).toString() + 'px';\n                    }\n                    if (this.headerTemplate) {\n                        this.header = this.header ? this.header : popupEle.querySelector('.e-ddl-header');\n                        const height = Math.round(this.header.getBoundingClientRect().height);\n                        this.listHeight = (parseInt(this.listHeight, 10) - (height + this.searchBoxHeight)).toString() + 'px';\n                    }\n                    if (this.footerTemplate) {\n                        this.footer = this.footer ? this.footer : popupEle.querySelector('.e-ddl-footer');\n                        const height = Math.round(this.footer.getBoundingClientRect().height);\n                        this.listHeight = (parseInt(this.listHeight, 10) - (height + this.searchBoxHeight)).toString() + 'px';\n                    }\n                    this.list.style.maxHeight = (parseInt(this.listHeight, 10) - 2).toString() + 'px'; // due to box-sizing property\n                    popupEle.style.maxHeight = formatUnit(this.popupHeight);\n                }\n                else {\n                    popupEle.style.height = 'auto';\n                }\n                let offsetValue = 0;\n                let left;\n                if (!isNullOrUndefined(this.selectedLI) && (!isNullOrUndefined(this.activeIndex) && this.activeIndex >= 0)) {\n                    this.setScrollPosition();\n                }\n                else {\n                    this.list.scrollTop = 0;\n                }\n                if (Browser.isDevice && (!this.allowFiltering && (this.getModuleName() === 'dropdownlist' ||\n                    (this.isDropDownClick && this.getModuleName() === 'combobox')))) {\n                    offsetValue = this.getOffsetValue(popupEle);\n                    const firstItem = this.isEmptyList() ? this.list : this.liCollections[0];\n                    left = -(parseInt(getComputedStyle(firstItem).textIndent, 10) -\n                        parseInt(getComputedStyle(this.inputElement).paddingLeft, 10) +\n                        parseInt(getComputedStyle(this.inputElement.parentElement).borderLeftWidth, 10));\n                }\n                this.getFocusElement();\n                this.createPopup(popupEle, offsetValue, left);\n                this.checkCollision(popupEle);\n                if (Browser.isDevice) {\n                    this.popupObj.element.classList.add(dropDownListClasses.device);\n                    if (this.getModuleName() === 'dropdownlist' || (this.getModuleName() === 'combobox'\n                        && !this.allowFiltering && this.isDropDownClick)) {\n                        this.popupObj.collision = { X: 'fit', Y: 'fit' };\n                    }\n                    if (this.isFilterLayout()) {\n                        this.popupObj.element.classList.add(dropDownListClasses.mobileFilter);\n                        this.popupObj.position = { X: 0, Y: 0 };\n                        this.popupObj.dataBind();\n                        attributes(this.popupObj.element, { style: 'left:0px;right:0px;top:0px;bottom:0px;' });\n                        addClass([document.body, this.popupObj.element], dropDownListClasses.popupFullScreen);\n                        this.setSearchBoxPosition();\n                        this.backIconElement = searchBox.container.querySelector('.e-back-icon');\n                        this.clearIconElement = searchBox.container.querySelector('.' + dropDownListClasses.clearIcon);\n                        EventHandler.add(this.backIconElement, 'click', this.clickOnBackIcon, this);\n                        EventHandler.add(this.clearIconElement, 'click', this.clearText, this);\n                    }\n                }\n                popupEle.style.visibility = 'visible';\n                addClass([popupEle], 'e-popup-close');\n                const scrollParentElements = this.popupObj.getScrollableParent(this.inputWrapper.container);\n                for (const element of scrollParentElements) {\n                    EventHandler.add(element, 'scroll', this.scrollHandler, this);\n                }\n                if (Browser.isDevice && this.isFilterLayout()) {\n                    EventHandler.add(this.list, 'scroll', this.listScroll, this);\n                }\n                if (!isNullOrUndefined(this.list)) {\n                    this.unWireListEvents();\n                    this.wireListEvents();\n                }\n                attributes(this.targetElement(), { 'aria-expanded': 'true' });\n                const inputParent = this.isFiltering() ? this.filterInput.parentElement : this.inputWrapper.container;\n                addClass([inputParent], [dropDownListClasses.inputFocus]);\n                const animModel = { name: 'FadeIn', duration: 100 };\n                this.beforePopupOpen = true;\n                const popupInstance = this.popupObj;\n                const eventArgs = { popup: popupInstance, cancel: false, animation: animModel };\n                this.trigger('open', eventArgs, (eventArgs) => {\n                    if (!eventArgs.cancel) {\n                        addClass([this.inputWrapper.container], [dropDownListClasses.iconAnimation]);\n                        this.renderReactTemplates();\n                        this.popupObj.show(new Animation(eventArgs.animation), (this.zIndex === 1000) ? this.element : null);\n                    }\n                    else {\n                        this.beforePopupOpen = false;\n                        this.destroyPopup();\n                    }\n                });\n            }\n            else {\n                this.beforePopupOpen = false;\n            }\n        });\n    }\n    checkCollision(popupEle) {\n        if (!Browser.isDevice || (Browser.isDevice && !(this.getModuleName() === 'dropdownlist' || this.isDropDownClick))) {\n            const collision = isCollide(popupEle);\n            if (collision.length > 0) {\n                popupEle.style.marginTop = -parseInt(getComputedStyle(popupEle).marginTop, 10) + 'px';\n            }\n            this.popupObj.resolveCollision();\n        }\n    }\n    getOffsetValue(popupEle) {\n        const popupStyles = getComputedStyle(popupEle);\n        const borderTop = parseInt(popupStyles.borderTopWidth, 10);\n        const borderBottom = parseInt(popupStyles.borderBottomWidth, 10);\n        return this.setPopupPosition(borderTop + borderBottom);\n    }\n    createPopup(element, offsetValue, left) {\n        this.popupObj = new Popup(element, {\n            width: this.setWidth(), targetType: 'relative',\n            relateTo: this.inputWrapper.container, collision: { X: 'flip', Y: 'flip' }, offsetY: offsetValue,\n            enableRtl: this.enableRtl, offsetX: left, position: { X: 'left', Y: 'bottom' },\n            zIndex: this.zIndex,\n            close: () => {\n                if (!this.isDocumentClick) {\n                    this.focusDropDown();\n                }\n                // eslint-disable-next-line\n                if (this.isReact) {\n                    this.clearTemplate(['headerTemplate', 'footerTemplate']);\n                }\n                const isResetItem = (this.getModuleName() === 'autocomplete') ? true : false;\n                this.isNotSearchList = false;\n                this.isDocumentClick = false;\n                this.destroyPopup();\n                if (this.isFiltering() && this.actionCompleteData.list && this.actionCompleteData.list[0]) {\n                    this.isActive = true;\n                    this.onActionComplete(this.actionCompleteData.ulElement, this.actionCompleteData.list, null, true);\n                }\n            },\n            open: () => {\n                EventHandler.add(document, 'mousedown', this.onDocumentClick, this);\n                this.isPopupOpen = true;\n                const actionList = this.actionCompleteData && this.actionCompleteData.ulElement &&\n                    this.actionCompleteData.ulElement.querySelector('li');\n                const ulElement = this.list.querySelector('ul li');\n                if (this.isFiltering() && this.itemTemplate && (this.element.tagName === this.getNgDirective()) &&\n                    (actionList && ulElement && actionList.textContent !== ulElement.textContent) &&\n                    this.element.tagName !== 'EJS-COMBOBOX') {\n                    this.cloneElements();\n                }\n                if (this.isFilterLayout()) {\n                    removeClass([this.inputWrapper.container], [dropDownListClasses.inputFocus]);\n                    this.isFilterFocus = true;\n                    this.filterInput.focus();\n                    if (this.inputWrapper.clearButton) {\n                        addClass([this.inputWrapper.clearButton], dropDownListClasses.clearIconHide);\n                    }\n                }\n                this.activeStateChange();\n            },\n            targetExitViewport: () => {\n                if (!Browser.isDevice) {\n                    this.hidePopup();\n                }\n            }\n        });\n    }\n    isEmptyList() {\n        return !isNullOrUndefined(this.liCollections) && this.liCollections.length === 0;\n    }\n    getFocusElement() {\n        // combo-box used this method\n    }\n    isFilterLayout() {\n        return this.getModuleName() === 'dropdownlist' && this.allowFiltering;\n    }\n    scrollHandler() {\n        if (Browser.isDevice && ((this.getModuleName() === 'dropdownlist' &&\n            !this.isFilterLayout()) || (this.getModuleName() === 'combobox' && !this.allowFiltering && this.isDropDownClick))) {\n            this.hidePopup();\n        }\n    }\n    setSearchBoxPosition() {\n        const searchBoxHeight = this.filterInput.parentElement.getBoundingClientRect().height;\n        this.popupObj.element.style.maxHeight = '100%';\n        this.popupObj.element.style.width = '100%';\n        this.list.style.maxHeight = (window.innerHeight - searchBoxHeight) + 'px';\n        this.list.style.height = (window.innerHeight - searchBoxHeight) + 'px';\n        const clearElement = this.filterInput.parentElement.querySelector('.' + dropDownListClasses.clearIcon);\n        detach(this.filterInput);\n        clearElement.parentElement.insertBefore(this.filterInput, clearElement);\n    }\n    setPopupPosition(border) {\n        let offsetValue;\n        const popupOffset = border;\n        const selectedLI = this.list.querySelector('.' + dropDownListClasses.focus) || this.selectedLI;\n        const firstItem = this.isEmptyList() ? this.list : this.liCollections[0];\n        const lastItem = this.isEmptyList() ? this.list : this.liCollections[this.getItems().length - 1];\n        const liHeight = firstItem.getBoundingClientRect().height;\n        const listHeight = this.list.offsetHeight / 2;\n        const height = isNullOrUndefined(selectedLI) ? firstItem.offsetTop : selectedLI.offsetTop;\n        const lastItemOffsetValue = lastItem.offsetTop;\n        if (lastItemOffsetValue - listHeight < height && !isNullOrUndefined(this.liCollections) &&\n            this.liCollections.length > 0 && !isNullOrUndefined(selectedLI)) {\n            const count = this.list.offsetHeight / liHeight;\n            const paddingBottom = parseInt(getComputedStyle(this.list).paddingBottom, 10);\n            offsetValue = (count - (this.liCollections.length - this.activeIndex)) * liHeight - popupOffset + paddingBottom;\n            this.list.scrollTop = selectedLI.offsetTop;\n        }\n        else if (height > listHeight) {\n            offsetValue = listHeight - liHeight / 2;\n            this.list.scrollTop = height - listHeight + liHeight / 2;\n        }\n        else {\n            offsetValue = height;\n        }\n        const inputHeight = this.inputWrapper.container.offsetHeight;\n        offsetValue = offsetValue + liHeight + popupOffset - ((liHeight - inputHeight) / 2);\n        return -offsetValue;\n    }\n    setWidth() {\n        let width = formatUnit(this.popupWidth);\n        if (width.indexOf('%') > -1) {\n            const inputWidth = this.inputWrapper.container.offsetWidth * parseFloat(width) / 100;\n            width = inputWidth.toString() + 'px';\n        }\n        if (Browser.isDevice && (!this.allowFiltering && (this.getModuleName() === 'dropdownlist' ||\n            (this.isDropDownClick && this.getModuleName() === 'combobox')))) {\n            const firstItem = this.isEmptyList() ? this.list : this.liCollections[0];\n            width = (parseInt(width, 10) + (parseInt(getComputedStyle(firstItem).textIndent, 10) -\n                parseInt(getComputedStyle(this.inputElement).paddingLeft, 10) +\n                parseInt(getComputedStyle(this.inputElement.parentElement).borderLeftWidth, 10)) * 2) + 'px';\n        }\n        return width;\n    }\n    scrollBottom(isInitial) {\n        if (!isNullOrUndefined(this.selectedLI)) {\n            const currentOffset = this.list.offsetHeight;\n            const nextBottom = this.selectedLI.offsetTop + this.selectedLI.offsetHeight - this.list.scrollTop;\n            let nextOffset = this.list.scrollTop + nextBottom - currentOffset;\n            nextOffset = isInitial ? nextOffset + parseInt(getComputedStyle(this.list).paddingTop, 10) * 2 : nextOffset;\n            let boxRange = this.selectedLI.offsetTop + this.selectedLI.offsetHeight - this.list.scrollTop;\n            boxRange = this.fields.groupBy && !isNullOrUndefined(this.fixedHeaderElement) ?\n                boxRange - this.fixedHeaderElement.offsetHeight : boxRange;\n            if (this.activeIndex === 0) {\n                this.list.scrollTop = 0;\n            }\n            else if (nextBottom > currentOffset || !(boxRange > 0 && this.list.offsetHeight > boxRange)) {\n                this.list.scrollTop = nextOffset;\n            }\n        }\n    }\n    scrollTop() {\n        if (!isNullOrUndefined(this.selectedLI)) {\n            let nextOffset = this.selectedLI.offsetTop - this.list.scrollTop;\n            nextOffset = this.fields.groupBy && !isNullOrUndefined(this.fixedHeaderElement) ?\n                nextOffset - this.fixedHeaderElement.offsetHeight : nextOffset;\n            const boxRange = (this.selectedLI.offsetTop + this.selectedLI.offsetHeight - this.list.scrollTop);\n            if (this.activeIndex === 0) {\n                this.list.scrollTop = 0;\n            }\n            else if (nextOffset < 0) {\n                this.list.scrollTop = this.list.scrollTop + nextOffset;\n            }\n            else if (!(boxRange > 0 && this.list.offsetHeight > boxRange)) {\n                this.list.scrollTop = this.selectedLI.offsetTop - (this.fields.groupBy && !isNullOrUndefined(this.fixedHeaderElement) ?\n                    this.fixedHeaderElement.offsetHeight : 0);\n            }\n        }\n    }\n    isEditTextBox() {\n        return false;\n    }\n    isFiltering() {\n        return this.allowFiltering;\n    }\n    isPopupButton() {\n        return true;\n    }\n    setScrollPosition(e) {\n        if (!isNullOrUndefined(e)) {\n            switch (e.action) {\n                case 'pageDown':\n                case 'down':\n                case 'end':\n                    this.scrollBottom();\n                    break;\n                default:\n                    this.scrollTop();\n                    break;\n            }\n        }\n        else {\n            this.scrollBottom(true);\n        }\n    }\n    clearText() {\n        this.filterInput.value = this.typedString = '';\n        this.searchLists(null);\n    }\n    listScroll() {\n        this.filterInput.blur();\n    }\n    setEleWidth(width) {\n        if (!isNullOrUndefined(width)) {\n            if (typeof width === 'number') {\n                this.inputWrapper.container.style.width = formatUnit(width);\n            }\n            else if (typeof width === 'string') {\n                this.inputWrapper.container.style.width = (width.match(/px|%|em/)) ? (width) : (formatUnit(width));\n            }\n        }\n    }\n    closePopup(delay) {\n        this.isTyped = false;\n        if (!(this.popupObj && document.body.contains(this.popupObj.element) && this.beforePopupOpen)) {\n            return;\n        }\n        EventHandler.remove(document, 'mousedown', this.onDocumentClick);\n        this.isActive = false;\n        this.filterInputObj = null;\n        this.isDropDownClick = false;\n        this.preventAutoFill = false;\n        const scrollableParentElements = this.popupObj.getScrollableParent(this.inputWrapper.container);\n        for (const element of scrollableParentElements) {\n            EventHandler.remove(element, 'scroll', this.scrollHandler);\n        }\n        if (Browser.isDevice && this.isFilterLayout()) {\n            removeClass([document.body, this.popupObj.element], dropDownListClasses.popupFullScreen);\n            EventHandler.remove(this.list, 'scroll', this.listScroll);\n        }\n        if (this.isFilterLayout()) {\n            if (!Browser.isDevice) {\n                this.searchKeyModule.destroy();\n                if (this.clearIconElement) {\n                    EventHandler.remove(this.clearIconElement, 'click', this.clearText);\n                }\n            }\n            if (this.backIconElement) {\n                EventHandler.remove(this.backIconElement, 'click', this.clickOnBackIcon);\n                EventHandler.remove(this.clearIconElement, 'click', this.clearText);\n            }\n            EventHandler.remove(this.filterInput, 'input', this.onInput);\n            EventHandler.remove(this.filterInput, 'keyup', this.onFilterUp);\n            EventHandler.remove(this.filterInput, 'keydown', this.onFilterDown);\n            EventHandler.remove(this.filterInput, 'blur', this.onBlurHandler);\n            EventHandler.remove(this.filterInput, 'paste', this.pasteHandler);\n            this.filterInput = null;\n        }\n        attributes(this.targetElement(), { 'aria-expanded': 'false', 'aria-activedescendant': null });\n        this.inputWrapper.container.classList.remove(dropDownListClasses.iconAnimation);\n        if (this.isFiltering()) {\n            this.actionCompleteData.isUpdated = false;\n        }\n        this.beforePopupOpen = false;\n        const animModel = {\n            name: 'FadeOut',\n            duration: 100,\n            delay: delay ? delay : 0\n        };\n        const popupInstance = this.popupObj;\n        const eventArgs = { popup: popupInstance, cancel: false, animation: animModel };\n        this.trigger('close', eventArgs, (eventArgs) => {\n            if (!isNullOrUndefined(this.popupObj) &&\n                !isNullOrUndefined(this.popupObj.element.querySelector('.e-fixed-head'))) {\n                const fixedHeader = this.popupObj.element.querySelector('.e-fixed-head');\n                fixedHeader.parentNode.removeChild(fixedHeader);\n                this.fixedHeaderElement = null;\n            }\n            if (!eventArgs.cancel) {\n                if (this.getModuleName() === 'autocomplete') {\n                    this.rippleFun();\n                }\n                if (this.isPopupOpen) {\n                    this.popupObj.hide(new Animation(eventArgs.animation));\n                }\n                else {\n                    this.destroyPopup();\n                }\n            }\n        });\n    }\n    destroyPopup() {\n        this.isPopupOpen = false;\n        this.isFilterFocus = false;\n        this.popupObj.destroy();\n        detach(this.popupObj.element);\n    }\n    clickOnBackIcon() {\n        this.hidePopup();\n        this.focusIn();\n    }\n    /**\n     * To Initialize the control rendering\n     *\n     * @private\n     * @returns {void}\n     */\n    render() {\n        if (this.element.tagName === 'INPUT') {\n            this.inputElement = this.element;\n            if (isNullOrUndefined(this.inputElement.getAttribute('role'))) {\n                this.inputElement.setAttribute('role', 'textbox');\n            }\n            if (isNullOrUndefined(this.inputElement.getAttribute('type'))) {\n                this.inputElement.setAttribute('type', 'text');\n            }\n        }\n        else {\n            this.inputElement = this.createElement('input', { attrs: { role: 'textbox', type: 'text' } });\n            if (this.element.tagName !== this.getNgDirective()) {\n                this.element.style.display = 'none';\n            }\n            this.element.parentElement.insertBefore(this.inputElement, this.element);\n            this.preventTabIndex(this.inputElement);\n        }\n        let updatedCssClassValues = this.cssClass;\n        if (!isNullOrUndefined(this.cssClass) && this.cssClass !== '') {\n            updatedCssClassValues = (this.cssClass.replace(/\\s+/g, ' ')).trim();\n        }\n        this.inputWrapper = Input.createInput({\n            element: this.inputElement,\n            buttons: this.isPopupButton() ? [dropDownListClasses.icon] : null,\n            floatLabelType: this.floatLabelType,\n            properties: {\n                readonly: this.getModuleName() === 'dropdownlist' ? true : this.readonly,\n                placeholder: this.placeholder,\n                cssClass: updatedCssClassValues,\n                enabled: this.enabled,\n                enableRtl: this.enableRtl,\n                showClearButton: this.showClearButton\n            }\n        }, this.createElement);\n        if (this.element.tagName === this.getNgDirective()) {\n            this.element.appendChild(this.inputWrapper.container);\n        }\n        else {\n            this.inputElement.parentElement.insertBefore(this.element, this.inputElement);\n        }\n        this.hiddenElement = this.createElement('select', {\n            attrs: { 'aria-hidden': 'true', 'tabindex': '-1', 'class': dropDownListClasses.hiddenElement }\n        });\n        prepend([this.hiddenElement], this.inputWrapper.container);\n        this.validationAttribute(this.element, this.hiddenElement);\n        this.setReadOnly();\n        this.setFields();\n        this.inputWrapper.container.style.width = formatUnit(this.width);\n        this.inputWrapper.container.classList.add('e-ddl');\n        this.wireEvent();\n        this.tabIndex = this.element.hasAttribute('tabindex') ? this.element.getAttribute('tabindex') : '0';\n        this.element.removeAttribute('tabindex');\n        const id = this.element.getAttribute('id') ? this.element.getAttribute('id') : getUniqueID('ej2_dropdownlist');\n        this.element.id = id;\n        this.hiddenElement.id = id + '_hidden';\n        this.targetElement().setAttribute('tabindex', this.tabIndex);\n        attributes(this.targetElement(), this.getAriaAttributes());\n        this.updateDataAttribute(this.htmlAttributes);\n        this.setHTMLAttributes();\n        if (this.value !== null || this.activeIndex !== null || this.text !== null) {\n            this.initValue();\n        }\n        else if (this.element.tagName === 'SELECT' && this.element.options[0]) {\n            const selectElement = this.element;\n            this.value = selectElement.options[selectElement.selectedIndex].value;\n            this.text = isNullOrUndefined(this.value) ? null : selectElement.options[selectElement.selectedIndex].textContent;\n            this.initValue();\n        }\n        this.preventTabIndex(this.element);\n        if (!this.enabled) {\n            this.targetElement().tabIndex = -1;\n        }\n        this.initial = false;\n        this.element.style.opacity = '';\n        this.inputElement.onselect = (e) => {\n            e.stopImmediatePropagation();\n        };\n        this.inputElement.onchange = (e) => {\n            e.stopImmediatePropagation();\n        };\n        if (this.element.hasAttribute('autofocus')) {\n            this.focusIn();\n        }\n        if (!isNullOrUndefined(this.text)) {\n            this.inputElement.setAttribute('value', this.text);\n        }\n        if (this.element.hasAttribute('data-val')) {\n            this.element.setAttribute('data-val', 'false');\n        }\n        this.renderComplete();\n    }\n    setFooterTemplate(popupEle) {\n        let compiledString;\n        if (this.footer) {\n            this.footer.innerHTML = '';\n        }\n        else {\n            this.footer = this.createElement('div');\n            addClass([this.footer], dropDownListClasses.footer);\n        }\n        const footercheck = this.dropdownCompiler(this.footerTemplate);\n        if (footercheck) {\n            compiledString = compile(select(this.footerTemplate, document).innerHTML.trim());\n        }\n        else {\n            compiledString = compile(this.footerTemplate);\n        }\n        // eslint-disable-next-line @typescript-eslint/no-explicit-any\n        const footerCompTemp = compiledString({}, this, 'footerTemplate', this.footerTemplateId, this.isStringTemplate, null, this.footer);\n        if (footerCompTemp && footerCompTemp.length > 0) {\n            for (let i = 0; i < footerCompTemp.length; i++) {\n                this.footer.appendChild(footerCompTemp[i]);\n            }\n        }\n        append([this.footer], popupEle);\n    }\n    setHeaderTemplate(popupEle) {\n        let compiledString;\n        if (this.header) {\n            this.header.innerHTML = '';\n        }\n        else {\n            this.header = this.createElement('div');\n            addClass([this.header], dropDownListClasses.header);\n        }\n        const headercheck = this.dropdownCompiler(this.headerTemplate);\n        if (headercheck) {\n            compiledString = compile(select(this.headerTemplate, document).innerHTML.trim());\n        }\n        else {\n            compiledString = compile(this.headerTemplate);\n        }\n        // eslint-disable-next-line @typescript-eslint/no-explicit-any\n        const headerCompTemp = compiledString({}, this, 'headerTemplate', this.headerTemplateId, this.isStringTemplate, null, this.header);\n        if (headerCompTemp && headerCompTemp.length) {\n            for (let i = 0; i < headerCompTemp.length; i++) {\n                this.header.appendChild(headerCompTemp[i]);\n            }\n        }\n        const contentEle = popupEle.querySelector('div.e-content');\n        popupEle.insertBefore(this.header, contentEle);\n    }\n    setOldText(text) {\n        this.text = text;\n    }\n    setOldValue(value) {\n        this.value = value;\n    }\n    refreshPopup() {\n        if (!isNullOrUndefined(this.popupObj) && document.body.contains(this.popupObj.element) &&\n            ((this.allowFiltering && !(Browser.isDevice && this.isFilterLayout())) || this.getModuleName() === 'autocomplete')) {\n            removeClass([this.popupObj.element], 'e-popup-close');\n            this.popupObj.refreshPosition(this.inputWrapper.container);\n            this.popupObj.resolveCollision();\n        }\n    }\n    checkData(newProp) {\n        if (newProp.dataSource && !isNullOrUndefined(Object.keys(newProp.dataSource)) && this.itemTemplate && this.allowFiltering &&\n            !(this.isListSearched && (newProp.dataSource instanceof DataManager))) {\n            this.list = null;\n            this.actionCompleteData = { ulElement: null, list: null, isUpdated: false };\n        }\n        this.isListSearched = false;\n        const isChangeValue = Object.keys(newProp).indexOf('value') !== -1 && isNullOrUndefined(newProp.value);\n        const isChangeText = Object.keys(newProp).indexOf('text') !== -1 && isNullOrUndefined(newProp.text);\n        if (this.getModuleName() !== 'autocomplete' && this.allowFiltering && (isChangeValue || isChangeText)) {\n            this.itemData = null;\n        }\n        if (this.allowFiltering && newProp.dataSource && !isNullOrUndefined(Object.keys(newProp.dataSource))) {\n            this.actionCompleteData = { ulElement: null, list: null, isUpdated: false };\n            this.actionData = this.actionCompleteData;\n        }\n        else if (this.allowFiltering && newProp.query && !isNullOrUndefined(Object.keys(newProp.query))) {\n            this.actionCompleteData = this.getModuleName() === 'combobox' ?\n                { ulElement: null, list: null, isUpdated: false } : this.actionCompleteData;\n            this.actionData = this.actionCompleteData;\n        }\n    }\n    updateDataSource(props) {\n        if (this.inputElement.value !== '' || (!isNullOrUndefined(props) && (isNullOrUndefined(props.dataSource)\n            || (!(props.dataSource instanceof DataManager) && props.dataSource.length === 0)))) {\n            this.clearAll(null, props);\n        }\n        if ((this.fields.groupBy && props.fields) && !this.isGroupChecking) {\n            EventHandler.remove(this.list, 'scroll', this.setFloatingHeader);\n            EventHandler.add(this.list, 'scroll', this.setFloatingHeader, this);\n        }\n        if (!(!isNullOrUndefined(props) && (isNullOrUndefined(props.dataSource)\n            || (!(props.dataSource instanceof DataManager) && props.dataSource.length === 0))) || !(props.dataSource === [])) {\n            this.typedString = '';\n            this.resetList(this.dataSource);\n        }\n        if (!this.isCustomFilter && !this.isFilterFocus && document.activeElement !== this.filterInput) {\n            this.checkCustomValue();\n        }\n    }\n    checkCustomValue() {\n        this.itemData = this.getDataByValue(this.value);\n        const dataItem = this.getItemData();\n        this.setProperties({ 'value': dataItem.value, 'text': dataItem.text });\n    }\n    updateInputFields() {\n        if (this.getModuleName() === 'dropdownlist') {\n            Input.setValue(this.text, this.inputElement, this.floatLabelType, this.showClearButton);\n        }\n    }\n    /**\n     * Dynamically change the value of properties.\n     *\n     * @private\n     * @param {DropDownListModel} newProp - Returns the dynamic property value of the component.\n     * @param {DropDownListModel} oldProp - Returns the previous previous value of the component.\n     * @returns {void}\n     */\n    onPropertyChanged(newProp, oldProp) {\n        if (this.getModuleName() === 'dropdownlist') {\n            this.checkData(newProp);\n            this.setUpdateInitial(['fields', 'query', 'dataSource'], newProp);\n        }\n        for (const prop of Object.keys(newProp)) {\n            switch (prop) {\n                case 'query':\n                case 'dataSource': break;\n                case 'htmlAttributes':\n                    this.setHTMLAttributes();\n                    break;\n                case 'width':\n                    this.setEleWidth(newProp.width);\n                    break;\n                case 'placeholder':\n                    Input.setPlaceholder(newProp.placeholder, this.inputElement);\n                    break;\n                case 'filterBarPlaceholder':\n                    if (this.filterInput) {\n                        Input.setPlaceholder(newProp.filterBarPlaceholder, this.filterInput);\n                    }\n                    break;\n                case 'readonly':\n                    if (this.getModuleName() !== 'dropdownlist') {\n                        Input.setReadonly(newProp.readonly, this.inputElement);\n                    }\n                    this.setReadOnly();\n                    break;\n                case 'cssClass':\n                    this.setCssClass(newProp.cssClass, oldProp.cssClass);\n                    break;\n                case 'enableRtl':\n                    this.setEnableRtl();\n                    break;\n                case 'enabled':\n                    this.setEnable();\n                    break;\n                case 'text':\n                    if (newProp.text === null) {\n                        this.clearAll();\n                        break;\n                    }\n                    if (!this.list) {\n                        if (this.dataSource instanceof DataManager) {\n                            this.initRemoteRender = true;\n                        }\n                        this.renderList();\n                    }\n                    if (!this.initRemoteRender) {\n                        const li = this.getElementByText(newProp.text);\n                        if (!this.checkValidLi(li)) {\n                            if (this.liCollections && this.liCollections.length === 100 &&\n                                this.getModuleName() === 'autocomplete' && this.listData.length > 100) {\n                                this.setSelectionData(newProp.text, oldProp.text, 'text');\n                            }\n                            else {\n                                this.setOldText(oldProp.text);\n                            }\n                        }\n                        this.updateInputFields();\n                    }\n                    break;\n                case 'value':\n                    if (newProp.value === null) {\n                        this.clearAll();\n                        break;\n                    }\n                    this.notify('beforeValueChange', { newProp: newProp }); // gird component value type change\n                    if (!this.list) {\n                        if (this.dataSource instanceof DataManager) {\n                            this.initRemoteRender = true;\n                        }\n                        this.renderList();\n                    }\n                    if (!this.initRemoteRender) {\n                        const item = this.getElementByValue(newProp.value);\n                        if (!this.checkValidLi(item)) {\n                            if (this.liCollections && this.liCollections.length === 100 &&\n                                this.getModuleName() === 'autocomplete' && this.listData.length > 100) {\n                                this.setSelectionData(newProp.value, oldProp.value, 'value');\n                            }\n                            else {\n                                this.setOldValue(oldProp.value);\n                            }\n                        }\n                        this.updateInputFields();\n                        this.preventChange = this.isAngular && this.preventChange ? !this.preventChange : this.preventChange;\n                    }\n                    break;\n                case 'index':\n                    if (newProp.index === null) {\n                        this.clearAll();\n                        break;\n                    }\n                    if (!this.list) {\n                        if (this.dataSource instanceof DataManager) {\n                            this.initRemoteRender = true;\n                        }\n                        this.renderList();\n                    }\n                    if (!this.initRemoteRender && this.liCollections) {\n                        const element = this.liCollections[newProp.index];\n                        if (!this.checkValidLi(element)) {\n                            if (this.liCollections && this.liCollections.length === 100 &&\n                                this.getModuleName() === 'autocomplete' && this.listData.length > 100) {\n                                this.setSelectionData(newProp.index, oldProp.index, 'index');\n                            }\n                            else {\n                                this.index = oldProp.index;\n                            }\n                        }\n                        this.updateInputFields();\n                    }\n                    break;\n                case 'footerTemplate':\n                    if (this.popupObj) {\n                        this.setFooterTemplate(this.popupObj.element);\n                    }\n                    break;\n                case 'headerTemplate':\n                    if (this.popupObj) {\n                        this.setHeaderTemplate(this.popupObj.element);\n                    }\n                    break;\n                case 'valueTemplate':\n                    if (!isNullOrUndefined(this.itemData) && this.valueTemplate != null) {\n                        this.setValueTemplate();\n                    }\n                    break;\n                case 'allowFiltering':\n                    if (this.allowFiltering) {\n                        this.actionCompleteData = { ulElement: this.ulElement,\n                            list: this.listData, isUpdated: true };\n                        this.actionData = this.actionCompleteData;\n                        this.updateSelectElementData(this.allowFiltering);\n                    }\n                    break;\n                case 'floatLabelType':\n                    Input.removeFloating(this.inputWrapper);\n                    Input.addFloating(this.inputElement, newProp.floatLabelType, this.placeholder, this.createElement);\n                    break;\n                case 'showClearButton':\n                    Input.setClearButton(newProp.showClearButton, this.inputElement, this.inputWrapper, null, this.createElement);\n                    this.bindClearEvent();\n                    break;\n                default:\n                    {\n                        // eslint-disable-next-line max-len\n                        const ddlProps = this.getPropObject(prop, newProp, oldProp);\n                        super.onPropertyChanged(ddlProps.newProperty, ddlProps.oldProperty);\n                    }\n                    break;\n            }\n        }\n    }\n    checkValidLi(element) {\n        if (this.isValidLI(element)) {\n            this.setSelection(element, null);\n            return true;\n        }\n        return false;\n    }\n    setSelectionData(newProp, oldProp, prop) {\n        let li;\n        this.updateListValues = () => {\n            if (prop === 'text') {\n                li = this.getElementByText(newProp);\n                if (!this.checkValidLi(li)) {\n                    this.setOldText(oldProp);\n                }\n            }\n            else if (prop === 'value') {\n                li = this.getElementByValue(newProp);\n                if (!this.checkValidLi(li)) {\n                    this.setOldValue(oldProp);\n                }\n            }\n            else if (prop === 'index') {\n                li = this.liCollections[newProp];\n                if (!this.checkValidLi(li)) {\n                    this.index = oldProp;\n                }\n            }\n        };\n    }\n    setReadOnly() {\n        if (this.readonly) {\n            addClass([this.inputWrapper.container], ['e-readonly']);\n        }\n        else {\n            removeClass([this.inputWrapper.container], ['e-readonly']);\n        }\n    }\n    setCssClass(newClass, oldClass) {\n        if (!isNullOrUndefined(oldClass)) {\n            oldClass = (oldClass.replace(/\\s+/g, ' ')).trim();\n        }\n        if (!isNullOrUndefined(newClass)) {\n            newClass = (newClass.replace(/\\s+/g, ' ')).trim();\n        }\n        Input.setCssClass(newClass, [this.inputWrapper.container], oldClass);\n        if (this.popupObj) {\n            Input.setCssClass(newClass, [this.popupObj.element], oldClass);\n        }\n    }\n    /**\n     * Return the module name of this component.\n     *\n     * @private\n     * @returns {string} Return the module name of this component.\n     */\n    getModuleName() {\n        return 'dropdownlist';\n    }\n    /**\n     * Opens the popup that displays the list of items.\n     *\n     * @returns {void}\n     */\n    showPopup() {\n        if (!this.enabled) {\n            return;\n        }\n        if (this.isFiltering() && this.dataSource instanceof DataManager && (this.actionData.list != this.actionCompleteData.list) &&\n            this.actionData.list && this.actionData.ulElement) {\n            this.actionCompleteData = this.actionData;\n            this.onActionComplete(this.actionCompleteData.ulElement, this.actionCompleteData.list, null, true);\n        }\n        if (this.beforePopupOpen) {\n            this.refreshPopup();\n            return;\n        }\n        this.beforePopupOpen = true;\n        if (this.isFiltering() && !this.isActive && this.actionCompleteData.list && this.actionCompleteData.list[0]) {\n            this.isActive = true;\n            this.onActionComplete(this.actionCompleteData.ulElement, this.actionCompleteData.list, null, true);\n        }\n        else if (isNullOrUndefined(this.list) || !isUndefined(this.list) && (this.list.classList.contains(dropDownBaseClasses.noData) ||\n            this.list.querySelectorAll('.' + dropDownBaseClasses.li).length <= 0)) {\n            this.renderList();\n        }\n        this.invokeRenderPopup();\n    }\n    invokeRenderPopup() {\n        if (Browser.isDevice && this.isFilterLayout()) {\n            // eslint-disable-next-line @typescript-eslint/no-this-alias\n            const proxy = this;\n            window.onpopstate = () => {\n                proxy.hidePopup();\n            };\n            history.pushState({}, '');\n        }\n        if (!isNullOrUndefined(this.list.children[0]) || this.list.classList.contains(dropDownBaseClasses.noData)) {\n            this.renderPopup();\n        }\n        attributes(this.targetElement(), { 'aria-activedescendant': this.selectedLI ? this.selectedLI.id : null });\n    }\n    renderHightSearch() {\n        // update high light search\n    }\n    /* eslint-disable valid-jsdoc, jsdoc/require-param */\n    /**\n     * Hides the popup if it is in an open state.\n     *\n     * @returns {void}\n     */\n    hidePopup(e) {\n        /* eslint-enable valid-jsdoc, jsdoc/require-param */\n        if (this.isEscapeKey && this.getModuleName() === 'dropdownlist') {\n            Input.setValue(this.text, this.inputElement, this.floatLabelType, this.showClearButton);\n            this.isEscapeKey = false;\n            if (!isNullOrUndefined(this.index)) {\n                const element = this.findListElement(this.ulElement, 'li', 'data-value', this.value);\n                this.selectedLI = this.liCollections[this.index] || element;\n                if (this.selectedLI) {\n                    this.updateSelectedItem(this.selectedLI, null, true);\n                    if (this.valueTemplate && this.itemData !== null) {\n                        this.setValueTemplate();\n                    }\n                }\n            }\n            else {\n                this.resetSelection();\n            }\n        }\n        this.closePopup();\n        const dataItem = this.getItemData();\n        const isSelectVal = !isNullOrUndefined(this.selectedLI);\n        if (this.inputElement && this.inputElement.value.trim() === '' && !this.isInteracted && (this.isSelectCustom ||\n            isSelectVal && this.inputElement.value !== dataItem.text)) {\n            this.isSelectCustom = false;\n            this.clearAll(e);\n        }\n    }\n    /* eslint-disable valid-jsdoc, jsdoc/require-param */\n    /**\n     * Sets the focus on the component for interaction.\n     *\n     * @returns {void}\n     */\n    focusIn(e) {\n        if (!this.enabled) {\n            return;\n        }\n        if (this.targetElement().classList.contains(dropDownListClasses.disable)) {\n            return;\n        }\n        let isFocused = false;\n        if (this.preventFocus && Browser.isDevice) {\n            this.inputWrapper.container.tabIndex = 1;\n            this.inputWrapper.container.focus();\n            this.preventFocus = false;\n            isFocused = true;\n        }\n        if (!isFocused) {\n            this.targetElement().focus();\n        }\n        addClass([this.inputWrapper.container], [dropDownListClasses.inputFocus]);\n        this.onFocus(e);\n    }\n    /**\n     * Moves the focus from the component if the component is already focused.\n     *\n     * @returns {void}\n     */\n    focusOut(e) {\n        /* eslint-enable valid-jsdoc, jsdoc/require-param */\n        if (!this.enabled) {\n            return;\n        }\n        this.isTyped = true;\n        this.hidePopup(e);\n        if (this.targetElement()) {\n            this.targetElement().blur();\n        }\n        removeClass([this.inputWrapper.container], [dropDownListClasses.inputFocus]);\n    }\n    /**\n     * Removes the component from the DOM and detaches all its related event handlers. Also it removes the attributes and classes.\n     *\n     * @method destroy\n     * @returns {void}\n     */\n    destroy() {\n        this.isActive = false;\n        resetIncrementalSearchValues(this.element.id);\n        // eslint-disable-next-line @typescript-eslint/no-explicit-any\n        if (this.isReact) {\n            this.clearTemplate();\n        }\n        this.hidePopup();\n        this.unWireEvent();\n        if (this.list) {\n            this.unWireListEvents();\n        }\n        if (this.element && !this.element.classList.contains('e-' + this.getModuleName())) {\n            return;\n        }\n        if (this.inputElement) {\n            const attrArray = ['readonly', 'aria-disabled', 'aria-placeholder',\n                'placeholder', 'aria-owns', 'aria-labelledby', 'aria-haspopup', 'aria-expanded',\n                'aria-activedescendant', 'autocomplete', 'aria-readonly', 'autocorrect',\n                'autocapitalize', 'spellcheck', 'aria-autocomplete', 'aria-live', 'aria-describedby', 'aria-label'];\n            for (let i = 0; i < attrArray.length; i++) {\n                this.inputElement.removeAttribute(attrArray[i]);\n            }\n            this.inputElement.setAttribute('tabindex', this.tabIndex);\n            this.inputElement.classList.remove('e-input');\n            Input.setValue('', this.inputElement, this.floatLabelType, this.showClearButton);\n        }\n        this.element.style.display = 'block';\n        if (this.inputWrapper.container.parentElement.tagName === this.getNgDirective()) {\n            detach(this.inputWrapper.container);\n        }\n        else {\n            this.inputWrapper.container.parentElement.insertBefore(this.element, this.inputWrapper.container);\n            detach(this.inputWrapper.container);\n        }\n        super.destroy();\n    }\n    /* eslint-disable valid-jsdoc, jsdoc/require-returns-description */\n    /**\n     * Gets all the list items bound on this component.\n     *\n     * @returns {Element[]}\n     */\n    getItems() {\n        if (!this.list) {\n            if (this.dataSource instanceof DataManager) {\n                this.initRemoteRender = true;\n            }\n            this.renderList();\n        }\n        return this.ulElement ? super.getItems() : [];\n    }\n    /**\n     * Gets the data Object that matches the given value.\n     *\n     * @param { string | number } value - Specifies the value of the list item.\n     * @returns {Object}\n     */\n    getDataByValue(value) {\n        return super.getDataByValue(value);\n    }\n    /* eslint-enable valid-jsdoc, jsdoc/require-returns-description */\n    /**\n     * Allows you to clear the selected values from the component.\n     *\n     * @returns {void}\n     */\n    clear() {\n        this.value = null;\n    }\n};\n__decorate$1([\n    Property(null)\n], DropDownList.prototype, \"cssClass\", void 0);\n__decorate$1([\n    Property('100%')\n], DropDownList.prototype, \"width\", void 0);\n__decorate$1([\n    Property('300px')\n], DropDownList.prototype, \"popupHeight\", void 0);\n__decorate$1([\n    Property('100%')\n], DropDownList.prototype, \"popupWidth\", void 0);\n__decorate$1([\n    Property(null)\n], DropDownList.prototype, \"placeholder\", void 0);\n__decorate$1([\n    Property(null)\n], DropDownList.prototype, \"filterBarPlaceholder\", void 0);\n__decorate$1([\n    Property({})\n], DropDownList.prototype, \"htmlAttributes\", void 0);\n__decorate$1([\n    Property(null)\n], DropDownList.prototype, \"query\", void 0);\n__decorate$1([\n    Property(null)\n], DropDownList.prototype, \"valueTemplate\", void 0);\n__decorate$1([\n    Property(null)\n], DropDownList.prototype, \"headerTemplate\", void 0);\n__decorate$1([\n    Property(null)\n], DropDownList.prototype, \"footerTemplate\", void 0);\n__decorate$1([\n    Property(false)\n], DropDownList.prototype, \"allowFiltering\", void 0);\n__decorate$1([\n    Property(false)\n], DropDownList.prototype, \"readonly\", void 0);\n__decorate$1([\n    Property(null)\n], DropDownList.prototype, \"text\", void 0);\n__decorate$1([\n    Property(null)\n], DropDownList.prototype, \"value\", void 0);\n__decorate$1([\n    Property(null)\n], DropDownList.prototype, \"index\", void 0);\n__decorate$1([\n    Property('Never')\n], DropDownList.prototype, \"floatLabelType\", void 0);\n__decorate$1([\n    Property(false)\n], DropDownList.prototype, \"showClearButton\", void 0);\n__decorate$1([\n    Event()\n], DropDownList.prototype, \"filtering\", void 0);\n__decorate$1([\n    Event()\n], DropDownList.prototype, \"change\", void 0);\n__decorate$1([\n    Event()\n], DropDownList.prototype, \"beforeOpen\", void 0);\n__decorate$1([\n    Event()\n], DropDownList.prototype, \"open\", void 0);\n__decorate$1([\n    Event()\n], DropDownList.prototype, \"close\", void 0);\n__decorate$1([\n    Event()\n], DropDownList.prototype, \"blur\", void 0);\n__decorate$1([\n    Event()\n], DropDownList.prototype, \"focus\", void 0);\nDropDownList = __decorate$1([\n    NotifyPropertyChanges\n], DropDownList);\n\n/**\n * export all modules from current location\n */\n\nvar __decorate$2 = (undefined && undefined.__decorate) || function (decorators, target, key, desc) {\n    var c = arguments.length, r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d;\n    if (typeof Reflect === \"object\" && typeof Reflect.decorate === \"function\") r = Reflect.decorate(decorators, target, key, desc);\n    else for (var i = decorators.length - 1; i >= 0; i--) if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;\n    return c > 3 && r && Object.defineProperty(target, key, r), r;\n};\nconst RTL = 'e-rtl';\nconst DROPDOWNTREE = 'e-ddt';\nconst HIDDENELEMENT = 'e-ddt-hidden';\nconst DROPDOWNICON = 'e-input-group-icon e-ddt-icon e-icons';\nconst SHOW_CHIP = 'e-show-chip';\nconst SHOW_CLEAR = 'e-show-clear';\nconst SHOW_DD_ICON = 'e-show-dd-icon';\nconst CHIP_INPUT = 'e-chip-input';\nconst INPUTFOCUS = 'e-input-focus';\nconst INPUTGROUP = 'e-input-group';\nconst ICONANIMATION = 'e-icon-anim';\nconst CLOSEICON_CLASS = 'e-clear-icon e-icons';\nconst CHIP_WRAPPER = 'e-chips-wrapper';\nconst CHIP_COLLECTION = 'e-chips-collection';\nconst CHIP = 'e-chips';\nconst CHIP_CONTENT = 'e-chipcontent';\nconst CHIP_CLOSE = 'e-chips-close';\nconst HIDEICON = 'e-icon-hide';\nconst DDTHIDEICON = 'e-ddt-icon-hide';\nconst POPUP_CLASS = 'e-ddt e-popup';\nconst PARENTITEM = 'e-list-parent';\nconst CONTENT = 'e-popup-content';\nconst DROPDOWN = 'e-dropdown';\nconst DISABLED = 'e-disabled';\nconst ICONS = 'e-icons';\nconst CHECKALLPARENT = 'e-selectall-parent';\nconst CHECKALLHIDE = 'e-hide-selectall';\nconst BIGGER = 'e-bigger';\nconst SMALL = 'e-small';\nconst ALLTEXT = 'e-all-text';\nconst CHECKBOXFRAME = 'e-frame';\nconst CHECK = 'e-check';\nconst CHECKBOXWRAP = 'e-checkbox-wrapper';\nconst FILTERWRAP = 'e-filter-wrap';\nconst DDTICON = 'e-ddt-icon';\nconst FOOTER = 'e-ddt-footer';\nconst HEADER = 'e-ddt-header';\nconst NODATACONTAINER = 'e-ddt-nodata';\nconst NODATA = 'e-no-data';\nconst HEADERTEMPLATE = 'HeaderTemplate';\nconst FOOTERTEMPLATE = 'FooterTemplate';\nconst NORECORDSTEMPLATE = 'NoRecordsTemplate';\nconst ACTIONFAILURETEMPLATE = 'ActionFailureTemplate';\nconst CUSTOMTEMPLATE = 'CustomTemplate';\nconst REMAIN_WRAPPER = 'e-remain';\nconst OVERFLOW_VIEW = 'e-overflow';\nconst SHOW_TEXT = 'e-show-text';\nconst TOTAL_COUNT_WRAPPER = 'e-total-count';\nconst REMAIN_COUNT = 'e-wrap-count';\nclass Fields extends ChildProperty {\n}\n__decorate$2([\n    Property('child')\n], Fields.prototype, \"child\", void 0);\n__decorate$2([\n    Property([])\n], Fields.prototype, \"dataSource\", void 0);\n__decorate$2([\n    Property('expanded')\n], Fields.prototype, \"expanded\", void 0);\n__decorate$2([\n    Property('hasChildren')\n], Fields.prototype, \"hasChildren\", void 0);\n__decorate$2([\n    Property('htmlAttributes')\n], Fields.prototype, \"htmlAttributes\", void 0);\n__decorate$2([\n    Property('iconCss')\n], Fields.prototype, \"iconCss\", void 0);\n__decorate$2([\n    Property('imageUrl')\n], Fields.prototype, \"imageUrl\", void 0);\n__decorate$2([\n    Property('parentValue')\n], Fields.prototype, \"parentValue\", void 0);\n__decorate$2([\n    Property(null)\n], Fields.prototype, \"query\", void 0);\n__decorate$2([\n    Property('selected')\n], Fields.prototype, \"selected\", void 0);\n__decorate$2([\n    Property(null)\n], Fields.prototype, \"tableName\", void 0);\n__decorate$2([\n    Property('text')\n], Fields.prototype, \"text\", void 0);\n__decorate$2([\n    Property('tooltip')\n], Fields.prototype, \"tooltip\", void 0);\n__decorate$2([\n    Property('value')\n], Fields.prototype, \"value\", void 0);\nclass TreeSettings extends ChildProperty {\n}\n__decorate$2([\n    Property(false)\n], TreeSettings.prototype, \"autoCheck\", void 0);\n__decorate$2([\n    Property('Auto')\n], TreeSettings.prototype, \"expandOn\", void 0);\n__decorate$2([\n    Property(false)\n], TreeSettings.prototype, \"loadOnDemand\", void 0);\n/**\n * The Dropdown Tree control allows you to select single or multiple values from hierarchical data in a tree-like structure.\n * It has several out-of-the-box features, such as data binding, check boxes, templates, filter,\n * UI customization, accessibility, and preselected values.\n * ```html\n *  <input type=\"text\" id=\"tree\"></input>\n * ```\n * ```typescript\n *  let ddtObj: DropDownTree = new DropDownTree();\n *  ddtObj.appendTo(\"#tree\");\n * ```\n */\nlet DropDownTree = class DropDownTree extends Component {\n    constructor(options, element) {\n        super(options, element);\n        this.filterTimer = null;\n        this.isFilteredData = false;\n        this.isFilterRestore = false;\n        // eslint-disable-next-line\n        this.selectedData = [];\n        this.filterDelayTime = 300;\n        this.isClicked = false;\n    }\n    /**\n     * Get the properties to be maintained in the persisted state.\n     *\n     * @returns {string}\n     * @hidden\n     */\n    getPersistData() {\n        const keyEntity = ['value'];\n        return this.addOnPersist(keyEntity);\n    }\n    getLocaleName() {\n        return 'drop-down-tree';\n    }\n    /**\n     * Initialize the event handler.\n     *\n     * @returns {void}\n     * @private\n     */\n    preRender() {\n        this.inputFocus = false;\n        this.isPopupOpen = false;\n        this.isFirstRender = true;\n        this.isInitialized = false;\n        this.currentText = null;\n        this.currentValue = null;\n        this.oldValue = null;\n        this.removeValue = false;\n        this.selectedText = [];\n        this.treeItems = [];\n        this.dataValue = null;\n        this.isNodeSelected = false;\n        this.isDynamicChange = false;\n        this.clearIconWidth = 0;\n        this.headerTemplateId = `${this.element.id}${HEADERTEMPLATE}`;\n        this.footerTemplateId = `${this.element.id}${FOOTERTEMPLATE}`;\n        this.actionFailureTemplateId = `${this.element.id}${ACTIONFAILURETEMPLATE}`;\n        this.noRecordsTemplateId = `${this.element.id}${NORECORDSTEMPLATE}`;\n        this.customTemplateId = `${this.element.id}${CUSTOMTEMPLATE}`;\n        this.keyConfigs = {\n            escape: 'escape',\n            altUp: 'alt+uparrow',\n            altDown: 'alt+downarrow',\n            tab: 'tab',\n            shiftTab: 'shift+tab',\n            end: 'end',\n            enter: 'enter',\n            home: 'home',\n            moveDown: 'downarrow',\n            moveLeft: 'leftarrow',\n            moveRight: 'rightarrow',\n            moveUp: 'uparrow',\n            ctrlDown: 'ctrl+downarrow',\n            ctrlUp: 'ctrl+uparrow',\n            ctrlEnter: 'ctrl+enter',\n            ctrlHome: 'ctrl+home',\n            ctrlEnd: 'ctrl+end',\n            shiftDown: 'shift+downarrow',\n            shiftUp: 'shift+uparrow',\n            shiftEnter: 'shift+enter',\n            shiftHome: 'shift+home',\n            shiftEnd: 'shift+end',\n            csDown: 'ctrl+shift+downarrow',\n            csUp: 'ctrl+shift+uparrow',\n            csEnter: 'ctrl+shift+enter',\n            csHome: 'ctrl+shift+home',\n            csEnd: 'ctrl+shift+end',\n            space: 'space',\n            ctrlA: 'ctrl+A'\n        };\n    }\n    /**\n     * To Initialize the control rendering\n     *\n     * @private\n     * @returns {void}\n     */\n    render() {\n        const isTree = select('#' + this.element.id + '_tree', document);\n        if (isTree) {\n            const popupDiv = select('#' + this.element.id + '_popup', document);\n            detach(popupDiv ? popupDiv : isTree.parentElement);\n        }\n        this.ensureAutoCheck();\n        if (this.element.tagName === 'INPUT') {\n            this.inputEle = this.element;\n            if (isNullOrUndefined(this.inputEle.getAttribute('role'))) {\n                this.inputEle.setAttribute('role', 'textbox');\n            }\n            if (isNullOrUndefined(this.inputEle.getAttribute('type'))) {\n                this.inputEle.setAttribute('type', 'text');\n            }\n        }\n        else {\n            this.inputEle = this.createElement('input', { attrs: { role: 'textbox', type: 'text' } });\n            this.element.parentElement.insertBefore(this.inputEle, this.element);\n        }\n        this.inputObj = Input.createInput({\n            element: this.inputEle,\n            floatLabelType: this.floatLabelType,\n            buttons: this.showDropDownIcon ? [DROPDOWNICON] : null,\n            properties: {\n                readonly: true,\n                placeholder: this.placeholder,\n                enabled: this.enabled,\n                cssClass: this.cssClass,\n                enableRtl: this.enableRtl\n            }\n        }, this.createElement);\n        this.inputWrapper = this.inputObj.container;\n        if (!this.inputWrapper.classList.contains(INPUTGROUP)) {\n            this.inputWrapper.classList.add(INPUTGROUP);\n        }\n        if (this.showDropDownIcon) {\n            this.inputWrapper.classList.add(SHOW_DD_ICON);\n        }\n        if (this.element.tagName === this.getDirective()) {\n            this.element.appendChild(this.inputWrapper);\n        }\n        this.createHiddenElement();\n        this.createClearIcon();\n        this.inputWrapper.classList.add(DROPDOWNTREE);\n        this.setElementWidth(this.width);\n        this.updateDataAttribute();\n        this.setHTMLAttributes();\n        this.setAttributes();\n        this.popupDiv = this.createElement('div', { className: CONTENT, attrs: { 'tabindex': '0' } });\n        this.popupDiv.classList.add(DROPDOWN);\n        this.tree = this.createElement('div', { id: this.element.id + '_tree' });\n        this.popupDiv.appendChild(this.tree);\n        document.body.appendChild(this.popupDiv);\n        this.wireTreeEvents();\n        addClass([this.popupDiv], DDTHIDEICON);\n        this.renderTree();\n        this.isRemoteData = this.fields.dataSource instanceof DataManager;\n        if (this.allowMultiSelection || this.showCheckBox) {\n            if (this.mode !== 'Delimiter') {\n                this.createChip();\n            }\n            if (!this.wrapText && this.mode !== 'Custom') {\n                this.overFlowWrapper = this.createElement('span', { className: OVERFLOW_VIEW + ' ' + HIDEICON });\n                this.inputWrapper.insertBefore(this.overFlowWrapper, this.hiddenElement);\n                if (this.mode !== 'Box') {\n                    addClass([this.overFlowWrapper], SHOW_TEXT);\n                }\n            }\n        }\n        if (!this.isRemoteData) {\n            this.setTreeValue();\n            this.setTreeText();\n            this.updateHiddenValue();\n            this.setSelectedValue();\n            if (!this.wrapText) {\n                this.updateView();\n            }\n        }\n        this.wireEvents();\n        const firstUl = select('.' + PARENTITEM, this.treeObj.element);\n        if (firstUl && firstUl.getAttribute('aria-multiselectable')) {\n            firstUl.removeAttribute('aria-multiselectable');\n        }\n        this.oldValue = this.value;\n        this.isInitialized = true;\n        this.hasTemplate = this.itemTemplate || this.headerTemplate || this.footerTemplate || this.actionFailureTemplate\n            || this.noRecordsTemplate || this.customTemplate;\n        this.renderComplete();\n    }\n    ensureAutoCheck() {\n        if (this.allowFiltering && this.treeSettings.autoCheck) {\n            this.setProperties({ treeSettings: { autoCheck: false } }, true);\n        }\n    }\n    hideCheckAll(flag) {\n        const checkAllEle = !isNullOrUndefined(this.popupEle) ? this.popupEle.querySelector('.' + CHECKALLPARENT) : null;\n        if (!isNullOrUndefined(checkAllEle)) {\n            if (flag && !checkAllEle.classList.contains(CHECKALLHIDE)) {\n                addClass([checkAllEle], CHECKALLHIDE);\n            }\n            else if (!flag && checkAllEle.classList.contains(CHECKALLHIDE)) {\n                removeClass([checkAllEle], CHECKALLHIDE);\n            }\n        }\n    }\n    renderFilter() {\n        this.filterContainer = this.createElement('div', {\n            id: this.element.id + '_filter_wrap',\n            className: FILTERWRAP\n        });\n        const filterInput = this.createElement('input', {\n            id: this.element.id + '_filter',\n            attrs: { autocomplete: 'off', 'aria-label': this.filterBarPlaceholder }\n        });\n        this.filterContainer.appendChild(filterInput);\n        prepend([this.filterContainer], this.popupEle);\n        this.filterObj = new TextBox({\n            value: '',\n            showClearButton: true,\n            placeholder: this.filterBarPlaceholder,\n            input: this.filterChangeHandler.bind(this)\n        });\n        this.filterObj.appendTo('#' + this.element.id + '_filter');\n    }\n    filterChangeHandler(args) {\n        if (!isNullOrUndefined(args.value)) {\n            window.clearTimeout(this.filterTimer);\n            this.filterTimer = window.setTimeout(() => { this.filterHandler(args.value, args.event); }, this.filterDelayTime);\n        }\n    }\n    filterHandler(value, event) {\n        if (!this.isFilteredData) {\n            this.treeData = this.treeObj.getTreeData();\n        }\n        const filterFields = this.cloneFields(this.fields);\n        const args = {\n            cancel: false,\n            preventDefaultAction: false,\n            event: event,\n            text: value,\n            fields: filterFields\n        };\n        this.trigger('filtering', args, (args) => {\n            if (!args.cancel) {\n                let flag = false;\n                let fields;\n                this.isFilteredData = true;\n                if (value === '') {\n                    this.isFilteredData = false;\n                    this.isFilterRestore = true;\n                    fields = this.cloneFields(this.fields);\n                }\n                else if (args.preventDefaultAction) {\n                    fields = args.fields;\n                }\n                else {\n                    if (this.treeDataType === 1) {\n                        fields = this.selfReferencefilter(value, args.fields);\n                    }\n                    else {\n                        if (this.fields.dataSource instanceof DataManager) {\n                            flag = true;\n                        }\n                        else {\n                            fields = this.nestedFilter(value, args.fields);\n                        }\n                    }\n                }\n                this.hideCheckAll(this.isFilteredData);\n                if (flag) {\n                    return;\n                }\n                this.treeObj.fields = this.getTreeFields(fields);\n                this.treeObj.dataBind();\n            }\n        });\n    }\n    nestedFilter(value, filteredFields) {\n        // eslint-disable-next-line\n        const matchedDataSource = [];\n        for (let i = 0; i < this.treeData.length; i++) {\n            // eslint-disable-next-line\n            const filteredChild = this.nestedChildFilter(value, this.treeData[i]);\n            if (!isNullOrUndefined(filteredChild)) {\n                matchedDataSource.push(filteredChild);\n            }\n        }\n        filteredFields.dataSource = matchedDataSource;\n        return filteredFields;\n    }\n    // eslint-disable-next-line\n    nestedChildFilter(value, node) {\n        // eslint-disable-next-line\n        const children = node[this.fields.child];\n        if (isNullOrUndefined(children)) {\n            return (this.isMatchedNode(value, node)) ? node : null;\n        }\n        else {\n            // eslint-disable-next-line\n            const matchedChildren = [];\n            for (let i = 0; i < children.length; i++) {\n                // eslint-disable-next-line\n                const filteredChild = this.nestedChildFilter(value, children[i]);\n                if (!isNullOrUndefined(filteredChild)) {\n                    matchedChildren.push(filteredChild);\n                }\n            }\n            if (matchedChildren.length !== 0) {\n                node[this.fields.child] = matchedChildren;\n                return node;\n            }\n            else {\n                node[this.fields.child] = null;\n                return (this.isMatchedNode(value, node)) ? node : null;\n            }\n        }\n    }\n    selfReferencefilter(value, filteredFields) {\n        // eslint-disable-next-line\n        const matchedData = [];\n        // eslint-disable-next-line\n        const matchedDataSource = [];\n        for (let i = 0; i < this.treeData.length; i++) {\n            if (this.isMatchedNode(value, this.treeData[i])) {\n                matchedData.push(this.treeData[i]);\n            }\n        }\n        for (let i = 0; i < matchedData.length; i++) {\n            if (matchedDataSource.indexOf(matchedData[i]) === -1) {\n                matchedDataSource.push(matchedData[i]);\n                // eslint-disable-next-line\n                let parentId = matchedData[i][this.fields.parentValue];\n                while (!isNullOrUndefined(parentId)) {\n                    // eslint-disable-next-line\n                    let parent = null;\n                    for (let j = 0; j < this.treeData.length; j++) {\n                        // eslint-disable-next-line\n                        const value = this.treeData[j][this.fields.value];\n                        if (!isNullOrUndefined(value) && (value === parentId)) {\n                            parent = this.treeData[j];\n                            break;\n                        }\n                    }\n                    if (!isNullOrUndefined(parent) && (matchedDataSource.indexOf(parent) === -1)) {\n                        matchedDataSource.push(parent);\n                        parentId = parent[this.fields.parentValue];\n                    }\n                    else {\n                        break;\n                    }\n                }\n            }\n        }\n        filteredFields.dataSource = matchedDataSource;\n        return filteredFields;\n    }\n    // eslint-disable-next-line\n    isMatchedNode(value, node) {\n        let checkValue = node[this.fields.text];\n        if (this.ignoreCase) {\n            checkValue = checkValue.toLowerCase();\n            value = value.toLowerCase();\n        }\n        if (this.ignoreAccent) {\n            checkValue = DataUtil.ignoreDiacritics(checkValue);\n            value = DataUtil.ignoreDiacritics(value);\n        }\n        if (this.filterType === 'StartsWith') {\n            return checkValue.slice(0, value.length) === value;\n        }\n        else if (this.filterType === 'EndsWith') {\n            return checkValue.slice(-value.length) === value;\n        }\n        else {\n            return checkValue.indexOf(value) !== -1;\n        }\n    }\n    /* To wire events for the dropdown tree */\n    wireEvents() {\n        EventHandler.add(this.inputWrapper, 'mouseup', this.dropDownClick, this);\n        EventHandler.add(this.inputWrapper, 'focus', this.focusIn, this);\n        EventHandler.add(this.inputWrapper, 'blur', this.focusOut, this);\n        EventHandler.add(this.inputWrapper, 'mousemove', this.mouseIn, this);\n        EventHandler.add(this.inputWrapper, 'mouseout', this.onMouseLeave, this);\n        EventHandler.add(this.overAllClear, 'mousedown', this.clearAll, this);\n        EventHandler.add(window, 'resize', this.windowResize, this);\n        const formElement = closest(this.inputWrapper, 'form');\n        if (formElement) {\n            EventHandler.add(formElement, 'reset', this.resetValueHandler, this);\n        }\n        this.keyboardModule = new KeyboardEvents(this.inputWrapper, {\n            keyAction: this.keyActionHandler.bind(this),\n            keyConfigs: this.keyConfigs,\n            eventName: 'keydown'\n        });\n    }\n    wireTreeEvents() {\n        this.keyboardModule = new KeyboardEvents(this.tree, {\n            keyAction: this.treeAction.bind(this),\n            keyConfigs: this.keyConfigs,\n            eventName: 'keydown'\n        });\n    }\n    wireCheckAllWrapperEvents() {\n        this.keyboardModule = new KeyboardEvents(this.checkAllParent, {\n            keyAction: this.checkAllAction.bind(this),\n            keyConfigs: this.keyConfigs,\n            eventName: 'keydown'\n        });\n    }\n    /* To unwire events for the dropdown tree */\n    unWireEvents() {\n        EventHandler.remove(this.inputWrapper, 'mouseup', this.dropDownClick);\n        EventHandler.remove(this.inputWrapper, 'focus', this.focusIn);\n        EventHandler.remove(this.inputWrapper, 'blur', this.focusOut);\n        EventHandler.remove(this.inputWrapper, 'mousemove', this.mouseIn);\n        EventHandler.remove(this.inputWrapper, 'mouseout', this.onMouseLeave);\n        EventHandler.remove(this.overAllClear, 'mousedown', this.clearAll);\n        EventHandler.remove(window, 'resize', this.windowResize);\n        const formElement = closest(this.inputWrapper, 'form');\n        if (formElement) {\n            EventHandler.remove(formElement, 'reset', this.resetValueHandler);\n        }\n    }\n    /* Trigger when the dropdown is clicked */\n    dropDownClick(e) {\n        if (!this.enabled || this.readonly) {\n            return;\n        }\n        if (this.isClearButtonClick) {\n            this.isClearButtonClick = false;\n            return;\n        }\n        if (this.isPopupOpen) {\n            this.hidePopup();\n        }\n        else {\n            this.focusIn(e);\n            this.renderPopup();\n        }\n        this.showOverAllClear();\n    }\n    mouseIn() {\n        if (this.enabled || !this.readonly) {\n            this.showOverAllClear();\n        }\n    }\n    onMouseLeave() {\n        if (!this.inputFocus) {\n            addClass([this.overAllClear], HIDEICON);\n            removeClass([this.inputWrapper], SHOW_CLEAR);\n        }\n    }\n    getDirective() {\n        return 'EJS-DROPDOWNTREE';\n    }\n    focusOut(e) {\n        if (!this.enabled || this.readonly || !this.inputFocus) {\n            return;\n        }\n        if ((Browser.isIE || Browser.info.name === 'edge') && (e.target === this.inputWrapper)) {\n            return;\n        }\n        const target = e.relatedTarget;\n        if ((target !== this.inputEle) && (isNullOrUndefined(target)) && (e.target !== this.inputWrapper || !this.isPopupOpen)) {\n            this.onFocusOut(e);\n        }\n    }\n    onFocusOut(event) {\n        this.inputFocus = false;\n        if (this.isPopupOpen) {\n            this.hidePopup();\n        }\n        if (this.isClearButtonClick) {\n            this.isClearButtonClick = false;\n        }\n        if (this.showClearButton) {\n            this.clearIconWidth = select('.e-clear-icon', this.inputWrapper).offsetWidth;\n            addClass([this.overAllClear], HIDEICON);\n            removeClass([this.inputWrapper], SHOW_CLEAR);\n        }\n        removeClass([this.inputWrapper], [INPUTFOCUS]);\n        if ((this.allowMultiSelection || this.showCheckBox)) {\n            const isValue = this.value ? (this.value.length ? true : false) : false;\n            if (this.mode !== 'Delimiter' && this.mode !== 'Custom') {\n                if (this.chipWrapper && (this.mode === 'Default')) {\n                    addClass([this.chipWrapper], HIDEICON);\n                    removeClass([this.inputWrapper], SHOW_CHIP);\n                    removeClass([this.inputEle], CHIP_INPUT);\n                }\n            }\n            if (!this.wrapText && isValue) {\n                this.updateView();\n            }\n        }\n        if (this.changeOnBlur) {\n            this.triggerChangeEvent(event);\n        }\n        this.removeValue = false;\n        this.oldValue = this.value;\n        this.trigger('blur');\n    }\n    updateView() {\n        if ((!this.showCheckBox && !this.allowMultiSelection) || this.mode === 'Custom' || this.inputFocus) {\n            return;\n        }\n        if (this.mode !== 'Box') {\n            addClass([this.inputWrapper, this.overFlowWrapper], SHOW_TEXT);\n        }\n        else {\n            addClass([this.inputWrapper], SHOW_CHIP);\n        }\n        if (this.value && this.value.length !== 0) {\n            if (this.inputWrapper.contains(this.chipWrapper)) {\n                addClass([this.chipWrapper], HIDEICON);\n            }\n            addClass([this.inputEle], CHIP_INPUT);\n            this.updateOverFlowView();\n            this.ensurePlaceHolder();\n        }\n    }\n    triggerChangeEvent(event) {\n        const isEqual = this.ddtCompareValues(this.oldValue, this.value);\n        if ((!isEqual || this.isChipDelete) && !this.removeValue) {\n            const eventArgs = {\n                e: event,\n                oldValue: this.oldValue,\n                value: this.value,\n                isInteracted: event ? true : false,\n                element: this.element\n            };\n            this.trigger('change', eventArgs);\n            this.oldValue = this.value;\n        }\n    }\n    ddtCompareValues(oldValue, newValue) {\n        if (oldValue === null || newValue === null) {\n            const isValid = oldValue === null ? ((newValue === oldValue) ? true : false) :\n                (oldValue.length === 0 ? (newValue === oldValue) : false);\n            return isValid;\n        }\n        else if (oldValue.length !== newValue.length) {\n            return false;\n        }\n        for (let i = 0; i < oldValue.length; i++) {\n            if (oldValue[i] !== newValue[i]) {\n                return false;\n            }\n        }\n        return true;\n    }\n    focusIn(e) {\n        if (!this.enabled || this.readonly || this.inputFocus) {\n            return;\n        }\n        this.showOverAllClear();\n        this.inputFocus = true;\n        addClass([this.inputWrapper], [INPUTFOCUS]);\n        if (this.allowMultiSelection || this.showCheckBox) {\n            if (this.mode !== 'Delimiter' && this.inputFocus) {\n                if (this.chipWrapper && (this.value && this.value.length !== 0)) {\n                    removeClass([this.chipWrapper], HIDEICON);\n                    addClass([this.inputEle], CHIP_INPUT);\n                }\n                addClass([this.inputWrapper], SHOW_CHIP);\n                if (this.popupObj) {\n                    this.popupObj.refreshPosition();\n                }\n            }\n            if (!this.wrapText && this.mode !== 'Custom') {\n                if (this.inputWrapper.contains(this.overFlowWrapper)) {\n                    addClass([this.overFlowWrapper], HIDEICON);\n                }\n                if (this.mode === 'Delimiter') {\n                    removeClass([this.inputWrapper], SHOW_CHIP);\n                    removeClass([this.inputEle], CHIP_INPUT);\n                }\n                else {\n                    addClass([this.inputWrapper], SHOW_CHIP);\n                }\n                removeClass([this.inputWrapper], SHOW_TEXT);\n                this.ensurePlaceHolder();\n            }\n        }\n        const args = { isInteracted: e ? true : false, event: e };\n        this.trigger('focus', args);\n    }\n    treeAction(e) {\n        const eventArgs = {\n            cancel: false,\n            event: e\n        };\n        this.trigger('keyPress', eventArgs, (observedArgs) => {\n            if (!observedArgs.cancel) {\n                switch (e.action) {\n                    case 'escape':\n                    case 'altUp':\n                        this.inputWrapper.focus();\n                        e.preventDefault();\n                        if (this.isPopupOpen) {\n                            this.hidePopup();\n                        }\n                        break;\n                    case 'tab':\n                    case 'shiftTab':\n                        if (this.isPopupOpen) {\n                            this.hidePopup();\n                        }\n                        break;\n                    case 'enter':\n                    case 'ctrlEnter':\n                    case 'shiftEnter':\n                    case 'csEnter':\n                        if (!this.showCheckBox) {\n                            this.isValueChange = true;\n                            this.keyEventArgs = e;\n                        }\n                        break;\n                    case 'space':\n                        this.isValueChange = true;\n                        this.keyEventArgs = e;\n                        break;\n                    case 'ctrlA':\n                        if (this.allowMultiSelection) {\n                            this.selectAll(true);\n                        }\n                        break;\n                    case 'moveRight':\n                    case 'moveLeft':\n                    case 'shiftDown':\n                    case 'moveDown':\n                    case 'ctrlDown':\n                    case 'csDown':\n                    case 'shiftUp':\n                    case 'moveUp':\n                    case 'ctrlUp':\n                    case 'csUp':\n                    case 'home':\n                    case 'shiftHome':\n                    case 'ctrlHome':\n                    case 'csHome':\n                    case 'end':\n                    case 'shiftEnd':\n                    case 'ctrlEnd':\n                    case 'csEnd':\n                }\n            }\n            else {\n                e.stopImmediatePropagation();\n            }\n        });\n    }\n    keyActionHandler(e) {\n        const eventArgs = {\n            cancel: false,\n            event: e\n        };\n        this.trigger('keyPress', eventArgs, (observedArgs) => {\n            if (!observedArgs.cancel) {\n                switch (e.action) {\n                    case 'escape':\n                    case 'altUp':\n                        if (this.isPopupOpen) {\n                            this.hidePopup();\n                        }\n                        break;\n                    case 'shiftTab':\n                    case 'tab':\n                        if (this.isPopupOpen) {\n                            this.hidePopup();\n                        }\n                        if (this.inputFocus) {\n                            this.onFocusOut();\n                        }\n                        break;\n                    case 'altDown':\n                        if (!this.isPopupOpen) {\n                            this.showPopup();\n                            e.preventDefault();\n                        }\n                        break;\n                    case 'moveDown':\n                        if (this.showSelectAll && this.showCheckBox) {\n                            this.checkAllParent.focus();\n                        }\n                        break;\n                }\n            }\n        });\n    }\n    checkAllAction(e) {\n        const eventArgs = {\n            cancel: false,\n            event: e\n        };\n        this.trigger('keyPress', eventArgs, (observedArgs) => {\n            if (!observedArgs.cancel) {\n                switch (e.action) {\n                    case 'space':\n                        this.clickHandler(e);\n                        break;\n                    case 'moveDown':\n                        this.treeObj.element.focus();\n                }\n            }\n        });\n    }\n    windowResize() {\n        if (this.popupObj) {\n            this.popupObj.setProperties({ width: this.setWidth() });\n            this.popupObj.refreshPosition();\n        }\n    }\n    resetValueHandler(e) {\n        const formElement = closest(this.inputWrapper, 'form');\n        if (formElement && e.target === formElement) {\n            this.isDynamicChange = true;\n            this.setProperties({ value: null }, true);\n            this.resetValue(true);\n            this.isDynamicChange = false;\n        }\n    }\n    getAriaAttributes() {\n        const disable = this.enabled ? 'false' : 'true';\n        return {\n            'aria-disabled': disable,\n            'aria-owns': this.element.id + '_options',\n            'role': 'listbox',\n            'aria-haspopup': 'true',\n            'aria-expanded': 'false',\n            'aria-activedescendant': 'null',\n            'aria-labelledby': this.hiddenElement.id\n        };\n    }\n    updateOverFlowView() {\n        this.overFlowWrapper.classList.remove(TOTAL_COUNT_WRAPPER);\n        removeClass([this.overFlowWrapper], HIDEICON);\n        if (this.value && this.value.length) {\n            let data = '';\n            let overAllContainer;\n            let temp;\n            let tempData;\n            let tempIndex = 1;\n            let wrapperleng;\n            let remaining;\n            let downIconWidth = 0;\n            this.overFlowWrapper.innerHTML = '';\n            // eslint-disable-next-line\n            const l10nLocale = { overflowCountTemplate: '+${count} more..', totalCountTemplate: '${count} selected' };\n            this.l10n = new L10n(this.getLocaleName(), l10nLocale, this.locale);\n            const remainContent = this.l10n.getConstant('overflowCountTemplate');\n            const remainElement = this.createElement('span', { className: REMAIN_WRAPPER });\n            // eslint-disable-next-line\n            const compiledString = compile(remainContent);\n            // eslint-disable-next-line\n            const totalCompiledString = compile(this.l10n.getConstant('totalCountTemplate'));\n            remainElement.appendChild(compiledString({ 'count': this.value.length }, this, 'overflowCountTemplate', null, !this.isStringTemplate)[0]);\n            this.overFlowWrapper.appendChild(remainElement);\n            const remainSize = remainElement.offsetWidth;\n            remove(remainElement);\n            if (this.showDropDownIcon) {\n                downIconWidth = select('.' + DDTICON, this.inputWrapper).offsetWidth;\n            }\n            if (!isNullOrUndefined(this.value)) {\n                if (this.mode !== 'Box') {\n                    for (let index = 0; !isNullOrUndefined(this.value[index]); index++) {\n                        data += (index === 0) ? '' : this.delimiterChar + ' ';\n                        temp = this.getOverflowVal(index);\n                        data += temp;\n                        temp = this.overFlowWrapper.innerHTML;\n                        this.overFlowWrapper.innerHTML = data;\n                        wrapperleng = this.overFlowWrapper.offsetWidth;\n                        overAllContainer = this.inputWrapper.offsetWidth;\n                        if ((wrapperleng + downIconWidth + this.clearIconWidth) > overAllContainer) {\n                            if (tempData !== undefined && tempData !== '') {\n                                temp = tempData;\n                                index = tempIndex + 1;\n                            }\n                            this.overFlowWrapper.innerHTML = temp;\n                            remaining = this.value.length - index;\n                            wrapperleng = this.overFlowWrapper.offsetWidth;\n                            while (((wrapperleng + remainSize + downIconWidth + this.clearIconWidth) >= overAllContainer)\n                                && wrapperleng !== 0 && this.overFlowWrapper.innerHTML !== '') {\n                                const textArr = this.overFlowWrapper.innerHTML.split(this.delimiterChar);\n                                textArr.pop();\n                                this.overFlowWrapper.innerHTML = textArr.join(this.delimiterChar);\n                                remaining++;\n                                wrapperleng = this.overFlowWrapper.offsetWidth;\n                            }\n                            break;\n                        }\n                        else if ((wrapperleng + remainSize + downIconWidth + this.clearIconWidth) <= overAllContainer) {\n                            tempData = data;\n                            tempIndex = index;\n                        }\n                        else if (index === 0) {\n                            tempData = '';\n                            tempIndex = -1;\n                        }\n                    }\n                }\n                else {\n                    addClass([this.chipWrapper], HIDEICON);\n                    const ele = this.chipWrapper.cloneNode(true);\n                    const chips = selectAll('.' + CHIP, ele);\n                    for (let i = 0; i < chips.length; i++) {\n                        temp = this.overFlowWrapper.innerHTML;\n                        this.overFlowWrapper.appendChild(chips[i]);\n                        data = this.overFlowWrapper.innerHTML;\n                        wrapperleng = this.overFlowWrapper.offsetWidth;\n                        overAllContainer = this.inputWrapper.offsetWidth;\n                        if ((wrapperleng + downIconWidth + this.clearIconWidth) > overAllContainer) {\n                            if (tempData !== undefined && tempData !== '') {\n                                temp = tempData;\n                                i = tempIndex + 1;\n                            }\n                            this.overFlowWrapper.innerHTML = temp;\n                            remaining = this.value.length - i;\n                            wrapperleng = this.overFlowWrapper.offsetWidth;\n                            while (((wrapperleng + remainSize + downIconWidth + this.clearIconWidth) >= overAllContainer)\n                                && wrapperleng !== 0 && this.overFlowWrapper.innerHTML !== '') {\n                                this.overFlowWrapper.removeChild(this.overFlowWrapper.lastChild);\n                                remaining++;\n                                wrapperleng = this.overFlowWrapper.offsetWidth;\n                            }\n                            break;\n                        }\n                        else if ((wrapperleng + remainSize + downIconWidth + this.clearIconWidth) <= overAllContainer) {\n                            tempData = data;\n                            tempIndex = i;\n                        }\n                        else if (i === 0) {\n                            tempData = '';\n                            tempIndex = -1;\n                        }\n                    }\n                }\n            }\n            if (remaining > 0) {\n                this.overFlowWrapper.appendChild(this.updateRemainTemplate(remainElement, remaining, compiledString, totalCompiledString));\n            }\n            if (this.mode === 'Box' && !this.overFlowWrapper.classList.contains(TOTAL_COUNT_WRAPPER)) {\n                addClass([remainElement], REMAIN_COUNT);\n            }\n        }\n        else {\n            this.overFlowWrapper.innerHTML = '';\n            addClass([this.overFlowWrapper], HIDEICON);\n        }\n        this.updateDelimMode();\n    }\n    updateRemainTemplate(remainElement, remaining, \n    // eslint-disable-next-line\n    compiledString, \n    // eslint-disable-next-line\n    totalCompiledString) {\n        if (this.overFlowWrapper.firstChild && this.overFlowWrapper.firstChild.nodeType === 3 &&\n            this.overFlowWrapper.firstChild.nodeValue === '') {\n            this.overFlowWrapper.removeChild(this.overFlowWrapper.firstChild);\n        }\n        remainElement.innerHTML = '';\n        remainElement.appendChild((this.overFlowWrapper.firstChild && (this.overFlowWrapper.firstChild.nodeType === 3 || this.mode === 'Box')) ?\n            compiledString({ 'count': remaining }, this, 'overflowCountTemplate', null, !this.isStringTemplate)[0] :\n            totalCompiledString({ 'count': remaining }, this, 'totalCountTemplate', null, !this.isStringTemplate)[0]);\n        if (this.overFlowWrapper.firstChild && (this.overFlowWrapper.firstChild.nodeType === 3 || this.mode === 'Box')) {\n            removeClass([this.overFlowWrapper], TOTAL_COUNT_WRAPPER);\n        }\n        else {\n            addClass([this.overFlowWrapper], TOTAL_COUNT_WRAPPER);\n            removeClass([this.overFlowWrapper], REMAIN_COUNT);\n        }\n        return remainElement;\n    }\n    getOverflowVal(index) {\n        // eslint-disable-next-line\n        const selectedData = this.getSelectedData(this.value[index]);\n        return getValue(this.treeSettings.loadOnDemand ? this.fields.text : 'text', selectedData);\n    }\n    updateDelimMode() {\n        if (this.mode !== 'Box') {\n            if (select('.' + REMAIN_WRAPPER, this.overFlowWrapper) && !this.overFlowWrapper.classList.contains(TOTAL_COUNT_WRAPPER)) {\n                addClass([this.overFlowWrapper], REMAIN_COUNT);\n                addClass([this.overFlowWrapper], SHOW_TEXT);\n            }\n            else {\n                this.overFlowWrapper.classList.remove(REMAIN_COUNT);\n                removeClass([this.overFlowWrapper], REMAIN_COUNT);\n            }\n        }\n        else if (select('.' + REMAIN_WRAPPER, this.overFlowWrapper)) {\n            this.overFlowWrapper.classList.remove(REMAIN_COUNT);\n        }\n    }\n    createHiddenElement() {\n        if (this.allowMultiSelection || this.showCheckBox) {\n            this.hiddenElement = this.createElement('select', {\n                attrs: { 'aria-hidden': 'true', 'class': HIDDENELEMENT, 'tabindex': '-1', 'multiple': '' }\n            });\n        }\n        else {\n            this.hiddenElement = this.createElement('select', {\n                attrs: { 'aria-hidden': 'true', 'tabindex': '-1', 'class': HIDDENELEMENT }\n            });\n        }\n        prepend([this.hiddenElement], this.inputWrapper);\n        this.validationAttribute();\n    }\n    createClearIcon() {\n        this.overAllClear = this.createElement('span', {\n            className: CLOSEICON_CLASS\n        });\n        addClass([this.overAllClear], HIDEICON);\n        removeClass([this.inputWrapper], SHOW_CLEAR);\n        if (this.showClearButton) {\n            this.inputWrapper.insertBefore(this.overAllClear, this.inputObj.buttons[0]);\n        }\n    }\n    validationAttribute() {\n        const name = this.inputEle.getAttribute('name') ? this.inputEle.getAttribute('name') : this.inputEle.getAttribute('id');\n        this.hiddenElement.setAttribute('name', name);\n        this.inputEle.removeAttribute('name');\n        const attributes$$1 = ['required', 'aria-required', 'form'];\n        for (let i = 0; i < attributes$$1.length; i++) {\n            const attr = this.inputEle.getAttribute(attributes$$1[i]);\n            if (attr) {\n                this.hiddenElement.setAttribute(attributes$$1[i], attr);\n                this.inputEle.removeAttribute(attributes$$1[i]);\n            }\n        }\n    }\n    createChip() {\n        if (!this.inputWrapper.contains(this.chipWrapper)) {\n            this.chipWrapper = this.createElement('span', {\n                className: CHIP_WRAPPER\n            });\n            this.chipCollection = this.createElement('span', {\n                className: CHIP_COLLECTION\n            });\n            this.chipWrapper.appendChild(this.chipCollection);\n            this.inputWrapper.insertBefore(this.chipWrapper, this.hiddenElement);\n            addClass([this.inputWrapper], SHOW_CHIP);\n            const isValid = this.getValidMode();\n            if (isValid && this.value !== null && (this.value && this.value.length !== 0)) {\n                addClass([this.inputEle], CHIP_INPUT);\n            }\n            else if (this.value === null || (this.value && this.value.length === 0)) {\n                addClass([this.chipWrapper], HIDEICON);\n            }\n        }\n    }\n    getValidMode() {\n        if (this.allowMultiSelection || this.showCheckBox) {\n            return this.mode === 'Box' ? true : (this.mode === 'Default' && this.inputFocus) ? true : false;\n        }\n        else {\n            return false;\n        }\n    }\n    createSelectAllWrapper() {\n        this.checkAllParent = this.createElement('div', {\n            className: CHECKALLPARENT, attrs: { 'tabindex': '0' }\n        });\n        this.selectAllSpan = this.createElement('span', {\n            className: ALLTEXT\n        });\n        this.selectAllSpan.textContent = '';\n        const ele = closest(this.element, '.' + BIGGER);\n        const touchClass = isNullOrUndefined(ele) ? '' : SMALL;\n        this.checkBoxElement = createCheckBox(this.createElement, true, { cssClass: touchClass });\n        this.checkBoxElement.setAttribute('role', 'checkbox');\n        this.checkAllParent.appendChild(this.checkBoxElement);\n        this.checkAllParent.appendChild(this.selectAllSpan);\n        this.setLocale();\n        EventHandler.add(this.checkAllParent, 'mouseup', this.clickHandler, this);\n        this.wireCheckAllWrapperEvents();\n    }\n    clickHandler(e) {\n        let target;\n        if ((e.currentTarget && e.currentTarget.classList.contains(CHECKALLPARENT))) {\n            target = e.currentTarget.firstElementChild.lastElementChild;\n        }\n        else {\n            target = e.target;\n        }\n        this.checkWrapper = closest(target, '.' + CHECKBOXWRAP);\n        if (!isNullOrUndefined(this.checkWrapper)) {\n            this.isClicked = true;\n            const checkElement = select('.' + CHECKBOXFRAME, this.checkWrapper);\n            this.changeState(this.checkWrapper, checkElement.classList.contains(CHECK) ? 'uncheck' : 'check', e);\n            this.isClicked = false;\n        }\n        e.preventDefault();\n    }\n    changeState(wrapper, state, e) {\n        let ariaState;\n        const frameSpan = wrapper.getElementsByClassName(CHECKBOXFRAME)[0];\n        if (state === 'check' && !frameSpan.classList.contains(CHECK)) {\n            frameSpan.classList.add(CHECK);\n            ariaState = 'true';\n            if (!this.isReverseUpdate) {\n                this.treeObj.checkAll();\n                if (!this.changeOnBlur) {\n                    this.triggerChangeEvent(e);\n                }\n            }\n            this.setLocale(true);\n        }\n        else if (state === 'uncheck' && (frameSpan.classList.contains(CHECK))) {\n            frameSpan.classList.remove(CHECK);\n            ariaState = 'false';\n            if (!this.isReverseUpdate) {\n                this.treeObj.uncheckAll();\n                if (!this.changeOnBlur) {\n                    this.triggerChangeEvent(e);\n                }\n            }\n            this.setLocale(false);\n        }\n        this.setMultiSelect();\n        this.ensurePlaceHolder();\n        ariaState = state === 'check' ? 'true' : 'false';\n        if (!isNullOrUndefined(ariaState)) {\n            wrapper.setAttribute('aria-checked', ariaState);\n        }\n    }\n    setLocale(unSelect) {\n        if (!this.selectAllSpan) {\n            return;\n        }\n        if (this.selectAllText !== 'Select All' || this.unSelectAllText !== 'Unselect All') {\n            const template = unSelect ? this.unSelectAllText : this.selectAllText;\n            this.selectAllSpan.textContent = '';\n            // eslint-disable-next-line\n            const compiledString = compile(template);\n            const templateName = unSelect ? 'unSelectAllText' : 'selectAllText';\n            for (const item of compiledString({}, this, templateName, null, !this.isStringTemplate)) {\n                this.selectAllSpan.textContent = item.textContent;\n            }\n        }\n        else {\n            this.selectAllSpan.textContent = unSelect ? this.unSelectAllText : this.selectAllText;\n        }\n    }\n    setAttributes() {\n        this.inputEle.setAttribute('tabindex', '-1');\n        const id = this.element.getAttribute('id');\n        this.hiddenElement.id = id + '_hidden';\n        this.inputWrapper.setAttribute('tabindex', '0');\n        attributes(this.inputWrapper, this.getAriaAttributes());\n    }\n    setHTMLAttributes() {\n        if (Object.keys(this.htmlAttributes).length) {\n            for (const htmlAttr of Object.keys(this.htmlAttributes)) {\n                if (htmlAttr === 'class') {\n                    this.inputWrapper.classList.add(this.htmlAttributes[htmlAttr]);\n                }\n                else if (htmlAttr === 'disabled' && this.htmlAttributes[htmlAttr] === 'disabled') {\n                    this.setProperties({ enabled: false }, true);\n                    this.setEnable();\n                }\n                else if (htmlAttr === 'readonly' && !isNullOrUndefined(this.htmlAttributes[htmlAttr])) {\n                    this.setProperties({ readonly: true }, true);\n                    this.dataBind();\n                }\n                else if (htmlAttr === 'style') {\n                    this.inputWrapper.setAttribute('style', this.htmlAttributes[htmlAttr]);\n                }\n                else {\n                    const defaultAttr = ['title', 'id', 'placeholder', 'aria-placeholder',\n                        'role', 'autocorrect', 'autocomplete', 'autocapitalize', 'spellcheck', 'minlength', 'maxlength'];\n                    const validateAttr = ['name', 'required'];\n                    if (htmlAttr.indexOf('data') === 0 || validateAttr.indexOf(htmlAttr) > -1) {\n                        this.hiddenElement.setAttribute(htmlAttr, this.htmlAttributes[htmlAttr]);\n                    }\n                    else if (defaultAttr.indexOf(htmlAttr) > -1) {\n                        if (htmlAttr === 'placeholder') {\n                            Input.setPlaceholder(this.htmlAttributes[htmlAttr], this.inputEle);\n                        }\n                        else {\n                            this.inputEle.setAttribute(htmlAttr, this.htmlAttributes[htmlAttr]);\n                        }\n                    }\n                    else {\n                        this.inputWrapper.setAttribute(htmlAttr, this.htmlAttributes[htmlAttr]);\n                    }\n                }\n            }\n        }\n    }\n    updateDataAttribute() {\n        const value = this.htmlAttributes;\n        const invalidAttr = ['class', 'style', 'id', 'type'];\n        const attr = {};\n        for (let a = 0; a < this.element.attributes.length; a++) {\n            if (invalidAttr.indexOf(this.element.attributes[a].name) === -1 &&\n                !(this.element.attributes[a].name === 'readonly')) {\n                attr[this.element.attributes[a].name] = this.element.getAttribute(this.element.attributes[a].name);\n            }\n        }\n        extend(attr, value, attr);\n        this.setProperties({ htmlAttributes: attr }, true);\n    }\n    showOverAllClear() {\n        if (!this.enabled || this.readonly) {\n            return;\n        }\n        if (this.overAllClear) {\n            const isValue = this.value ? (this.value.length ? true : false) : false;\n            if (isValue && this.showClearButton) {\n                removeClass([this.overAllClear], HIDEICON);\n                addClass([this.inputWrapper], SHOW_CLEAR);\n            }\n            else {\n                addClass([this.overAllClear], HIDEICON);\n                removeClass([this.inputWrapper], SHOW_CLEAR);\n            }\n        }\n    }\n    setTreeValue() {\n        if (this.value !== null && this.value.length !== 0) {\n            // eslint-disable-next-line\n            let data;\n            if (this.showCheckBox || this.allowMultiSelection) {\n                for (let i = 0; i < this.value.length; i++) {\n                    data = this.treeObj.getTreeData(this.value[i])[0];\n                    if (isNullOrUndefined(data)) {\n                        this.value.splice(this.value.indexOf(this.value[i]), 1);\n                    }\n                }\n                if (this.value.length !== 0) {\n                    this.setValidValue();\n                }\n            }\n            else {\n                data = this.treeObj.getTreeData(this.value[0])[0];\n                if (!isNullOrUndefined(data)) {\n                    this.setProperties({ text: data[this.fields.text] }, true);\n                    this.setValidValue();\n                }\n                else {\n                    this.setProperties({ value: this.currentValue }, true);\n                }\n            }\n        }\n    }\n    setTreeText() {\n        if (this.value !== null && !this.isInitialized) {\n            return;\n        }\n        if (this.text !== null) {\n            // eslint-disable-next-line\n            let data;\n            const valArr = [];\n            if (this.showCheckBox || this.allowMultiSelection) {\n                const textArr = this.text.split(this.delimiterChar);\n                for (let i = 0; i < textArr.length; i++) {\n                    data = this.getItems(textArr[i]);\n                    if (!isNullOrUndefined(data)) {\n                        valArr.push(data[this.fields.value].toString());\n                    }\n                }\n                if (valArr.length !== 0) {\n                    this.oldValue = this.value;\n                    this.setProperties({ value: valArr }, true);\n                    this.setValidValue();\n                }\n                else {\n                    this.setProperties({ text: this.currentText }, true);\n                }\n            }\n            else {\n                data = this.getItems(this.text);\n                if (!isNullOrUndefined(data)) {\n                    this.oldValue = this.value;\n                    this.setProperties({ value: [data[this.fields.value].toString()] }, true);\n                    this.setValidValue();\n                }\n                else {\n                    this.setProperties({ text: this.currentText }, true);\n                }\n            }\n        }\n    }\n    setSelectedValue() {\n        if (this.value != null) {\n            return;\n        }\n        if (!this.isInitialized) {\n            this.oldValue = this.value;\n            if (this.treeObj.selectedNodes.length > 0 && !this.showCheckBox) {\n                this.setProperties({ value: this.treeObj.selectedNodes }, true);\n                if (this.allowMultiSelection) {\n                    this.updateMode();\n                }\n            }\n            else if (this.showCheckBox && this.treeObj.checkedNodes) {\n                if (this.treeObj.checkedNodes.length > 0) {\n                    this.setProperties({ value: this.treeObj.checkedNodes }, true);\n                    setValue('selectedNodes', [], this.treeObj);\n                    this.treeObj.dataBind();\n                    this.updateMode();\n                }\n            }\n            this.updateSelectedValues();\n            this.currentText = this.text;\n            this.currentValue = this.value;\n        }\n    }\n    setValidValue() {\n        if (!this.showCheckBox && !this.allowMultiSelection) {\n            Input.setValue(this.text, this.inputEle, this.floatLabelType);\n            const id = this.value[0].toString();\n            if (this.treeObj.selectedNodes[0] !== id) {\n                setValue('selectedNodes', [id], this.treeObj);\n            }\n        }\n        else {\n            if (this.showCheckBox) {\n                this.treeObj.checkedNodes = this.value.slice();\n                this.treeObj.dataBind();\n                this.setMultiSelect();\n            }\n            else {\n                this.treeObj.selectedNodes = this.value.slice();\n                this.selectedText = [];\n                this.updateSelectedValues();\n            }\n            this.treeObj.dataBind();\n        }\n        this.currentText = this.text;\n        this.currentValue = this.value;\n        if (this.isInitialized) {\n            this.triggerChangeEvent();\n        }\n    }\n    // eslint-disable-next-line\n    getItems(givenText) {\n        // eslint-disable-next-line\n        let data;\n        if (this.treeDataType === 1) {\n            for (let i = 0; i < this.treeItems.length; i++) {\n                // eslint-disable-next-line\n                const text = getValue(this.fields.text, this.treeItems[i]);\n                if (!isNullOrUndefined(this.treeItems[i]) && !isNullOrUndefined(text) && text === givenText) {\n                    data = this.treeItems[i];\n                    break;\n                }\n            }\n        }\n        else {\n            data = this.getNestedItems(this.treeItems, this.fields, givenText);\n        }\n        return data;\n    }\n    // eslint-disable-next-line\n    getNestedItems(data, field, givenText) {\n        // eslint-disable-next-line\n        let newData;\n        for (let i = 0, objlen = data.length; i < objlen; i++) {\n            // eslint-disable-next-line\n            const dataId = getValue(this.fields.text, data[i]);\n            if (data[i] && dataId && dataId.toString() === givenText) {\n                return data[i];\n            }\n            else if (typeof field.child === 'string' && !isNullOrUndefined(getValue(field.child, data[i]))) {\n                // eslint-disable-next-line\n                const childData = getValue(field.child, data[i]);\n                // eslint-disable-next-line\n                newData = this.getNestedItems(childData, this.getChildType(field), givenText);\n                if (newData !== undefined) {\n                    break;\n                }\n            }\n            else if (this.fields.dataSource instanceof DataManager && !isNullOrUndefined(getValue('child', data[i]))) {\n                const child = 'child';\n                // eslint-disable-next-line\n                newData = this.getNestedItems(getValue(child, data[i]), this.getChildType(field), givenText);\n                if (newData !== undefined) {\n                    break;\n                }\n            }\n        }\n        return newData;\n    }\n    getChildType(mapper) {\n        return (typeof mapper.child === 'string' || isNullOrUndefined(mapper.child)) ? mapper : mapper.child;\n    }\n    /* To render the treeview */\n    renderTree() {\n        this.treeObj = new TreeView({\n            fields: this.getTreeFields(this.fields),\n            enableRtl: this.enableRtl,\n            nodeSelected: this.onNodeSelected.bind(this),\n            nodeChecked: this.onNodeChecked.bind(this),\n            nodeChecking: this.beforeCheck.bind(this),\n            actionFailure: this.onActionFailure.bind(this),\n            nodeClicked: this.onNodeClicked.bind(this),\n            dataBound: this.OnDataBound.bind(this),\n            allowMultiSelection: this.allowMultiSelection,\n            showCheckBox: this.showCheckBox,\n            autoCheck: this.treeSettings.autoCheck,\n            sortOrder: this.sortOrder,\n            expandOn: this.treeSettings.expandOn,\n            loadOnDemand: this.treeSettings.loadOnDemand,\n            nodeSelecting: this.onBeforeSelect.bind(this),\n            nodeTemplate: this.itemTemplate\n        });\n        this.treeObj.appendTo('#' + this.tree.id);\n    }\n    /* To render the popup element */\n    renderPopup() {\n        if (this.isFilteredData) {\n            this.filterObj.value = '';\n            this.treeObj.fields = this.getTreeFields(this.fields);\n            this.isFilterRestore = true;\n            this.isFilteredData = false;\n            this.hideCheckAll(false);\n        }\n        let isCancelled = false;\n        const args = { cancel: false };\n        this.trigger('beforeOpen', args, (args) => {\n            if (!args.cancel) {\n                addClass([this.inputWrapper], [ICONANIMATION]);\n                if (this.isFirstRender) {\n                    this.popupEle = this.createElement('div', {\n                        id: this.element.id + '_popup', className: POPUP_CLASS + ' ' + (this.cssClass != null ? this.cssClass : '')\n                    });\n                    document.body.appendChild(this.popupEle);\n                    this.createPopup(this.popupEle);\n                }\n                else {\n                    this.popupEle = this.popupObj.element;\n                }\n            }\n            else {\n                isCancelled = true;\n            }\n            if (this.isFirstRender && !isCancelled) {\n                prepend([this.popupDiv], this.popupEle);\n                removeClass([this.popupDiv], DDTHIDEICON);\n                if (this.allowFiltering) {\n                    this.renderFilter();\n                }\n                if (this.showCheckBox && this.showSelectAll && (!this.popupDiv.classList.contains(NODATA))) {\n                    this.createSelectAllWrapper();\n                    this.popupEle.insertBefore(this.checkAllParent, this.popupDiv);\n                }\n                if (this.headerTemplate) {\n                    this.setHeaderTemplate();\n                }\n                if (this.footerTemplate) {\n                    this.setFooterTemplate();\n                }\n                this.isFirstRender = false;\n                /* eslint-disable */\n                if (this.hasTemplate && this.portals) {\n                    this.portals = this.portals.concat(this.treeObj.portals);\n                    /* eslint-enable */\n                    this.renderReactTemplates();\n                }\n            }\n            if (!isCancelled) {\n                attributes(this.inputWrapper, { 'aria-expanded': 'true' });\n                this.popupObj.show(null, (this.zIndex === 1000) ? this.inputEle : null);\n                removeClass([this.popupEle], DDTHIDEICON);\n                this.updatePopupHeight();\n                this.popupObj.refreshPosition();\n                if (!(this.showCheckBox && this.showSelectAll) && (!this.popupDiv.classList.contains(NODATA)\n                    && this.treeItems.length > 0)) {\n                    this.treeObj.element.focus();\n                }\n                if (this.checkSelectAll && this.checkBoxElement) {\n                    const wrap = closest(this.checkBoxElement, '.' + CHECKBOXWRAP);\n                    this.changeState(wrap, 'check');\n                    this.checkSelectAll = false;\n                }\n                if (this.allowFiltering) {\n                    removeClass([this.inputWrapper], [INPUTFOCUS]);\n                    this.filterObj.element.focus();\n                }\n                const eventArgs = { popup: this.popupObj };\n                this.trigger('open', eventArgs);\n            }\n        });\n    }\n    updatePopupHeight() {\n        if (this.isFirstRender) {\n            return;\n        }\n        let popupHeight = this.getHeight();\n        this.popupEle.style.maxHeight = popupHeight;\n        if (this.allowFiltering) {\n            const height = Math.round(this.filterContainer.getBoundingClientRect().height);\n            popupHeight = formatUnit(parseInt(popupHeight, 10) - height + 'px');\n        }\n        if (this.headerTemplate) {\n            const height = Math.round(this.header.getBoundingClientRect().height);\n            popupHeight = formatUnit(parseInt(popupHeight, 10) - height + 'px');\n        }\n        if (this.showCheckBox && this.showSelectAll) {\n            const height = Math.round(this.checkAllParent.getBoundingClientRect().height);\n            popupHeight = formatUnit(parseInt(popupHeight, 10) - height + 'px');\n        }\n        if (this.footerTemplate) {\n            const height = Math.round(this.footer.getBoundingClientRect().height);\n            popupHeight = formatUnit(parseInt(popupHeight, 10) - height + 'px');\n        }\n        let border = parseInt(window.getComputedStyle(this.popupEle).borderTopWidth, 10);\n        border = border + parseInt(window.getComputedStyle(this.popupEle).borderBottomWidth, 10);\n        popupHeight = formatUnit(parseInt(popupHeight, 10) - border + 'px');\n        this.popupDiv.style.maxHeight = popupHeight;\n    }\n    createPopup(element) {\n        if (this.isFirstRender) {\n            this.popupObj = new Popup(element, {\n                width: this.setWidth(),\n                targetType: 'relative',\n                collision: { X: 'flip', Y: 'flip' },\n                relateTo: this.inputWrapper,\n                zIndex: this.zIndex,\n                enableRtl: this.enableRtl,\n                position: { X: 'left', Y: 'bottom' },\n                close: () => {\n                    this.isPopupOpen = false;\n                },\n                open: () => {\n                    EventHandler.add(document, 'mousedown', this.onDocumentClick, this);\n                    this.isPopupOpen = true;\n                },\n                targetExitViewport: () => {\n                    if (!Browser.isDevice) {\n                        this.hidePopup();\n                    }\n                }\n            });\n        }\n    }\n    /* To calculate the width when change via set model */\n    setElementWidth(inputWidth) {\n        const ddElement = this.inputWrapper;\n        if (!isNullOrUndefined(inputWidth)) {\n            if (typeof inputWidth === 'number') {\n                ddElement.style.width = formatUnit(inputWidth);\n            }\n            else if (typeof inputWidth === 'string') {\n                ddElement.style.width = (inputWidth.match(/px|%|em/)) ? (inputWidth) :\n                    (formatUnit(inputWidth));\n            }\n        }\n    }\n    /* To calculate the width of the popup */\n    setWidth() {\n        let width = formatUnit(this.popupWidth);\n        if (width.indexOf('%') > -1) {\n            width = (this.inputWrapper.offsetWidth * parseFloat(width) / 100).toString() + 'px';\n        }\n        else if (typeof this.popupWidth === 'string') {\n            width = (this.popupWidth.match(/px|em/)) ? (this.popupWidth) : width;\n        }\n        return width;\n    }\n    /* To calculate the height of the popup */\n    getHeight() {\n        let height = formatUnit(this.popupHeight);\n        if (height.indexOf('%') > -1) {\n            // Will set the height of the popup according to the view port height\n            height = (document.documentElement.clientHeight * parseFloat(height) / 100).toString() + 'px';\n        }\n        else if (typeof this.popupHeight === 'string') {\n            height = (this.popupHeight.match(/px|em/)) ? (this.popupHeight) : height;\n        }\n        return height;\n    }\n    onDocumentClick(e) {\n        const target = e.target;\n        const isTree = closest(target, '.' + PARENTITEM);\n        const isFilter = closest(target, '.' + FILTERWRAP);\n        const isHeader = closest(target, '.' + HEADER);\n        const isFooter = closest(target, '.' + FOOTER);\n        const isScroller = target.classList.contains(DROPDOWN) ? true :\n            (matches(target, '.e-ddt .e-popup') || matches(target, '.e-ddt .e-treeview'));\n        if ((this.isPopupOpen && (this.inputWrapper.contains(target) || isTree || isFilter || isScroller || isHeader || isFooter)) ||\n            ((this.allowMultiSelection || this.showCheckBox) && (this.isPopupOpen && target.classList.contains(CHIP_CLOSE) ||\n                (this.isPopupOpen && (target.classList.contains(CHECKALLPARENT) || target.classList.contains(ALLTEXT)\n                    || target.classList.contains(CHECKBOXFRAME)))))) {\n            this.isDocumentClick = false;\n            e.preventDefault();\n        }\n        else if (!this.inputWrapper.contains(target) && this.inputFocus) {\n            this.focusOut(e);\n        }\n    }\n    onActionFailure(e) {\n        this.trigger('actionFailure', e);\n        this.l10nUpdate(true);\n        addClass([this.popupDiv], NODATA);\n    }\n    OnDataBound(args) {\n        this.treeItems = args.data;\n        if (this.treeItems.length <= 0) {\n            this.l10nUpdate();\n            addClass([this.popupDiv], NODATA);\n            this.hideCheckAll(true);\n        }\n        else if (this.popupDiv.classList.contains(NODATA) && this.treeItems.length >= 1) {\n            removeClass([this.popupDiv], NODATA);\n            this.hideCheckAll(false);\n        }\n        this.treeDataType = this.getTreeDataType(this.treeItems, this.fields);\n        if (this.isFirstRender && this.isRemoteData) {\n            this.setTreeValue();\n            this.setTreeText();\n            this.updateHiddenValue();\n            this.setSelectedValue();\n            if (!this.wrapText) {\n                this.updateView();\n            }\n            this.treeObj.element.focus();\n        }\n        const eventArgs = { data: args.data };\n        this.trigger('dataBound', eventArgs);\n        if (this.isFilteredData) {\n            this.treeObj.expandAll();\n        }\n        if (this.isFilterRestore) {\n            this.restoreFilterSelection();\n            this.isFilterRestore = false;\n        }\n    }\n    restoreFilterSelection() {\n        if (this.showCheckBox) {\n            this.treeObj.checkedNodes = this.value ? this.value : [];\n        }\n        else {\n            this.treeObj.selectedNodes = this.value ? this.value : [];\n        }\n    }\n    /* To set cssclass for the dropdowntree */\n    setCssClass(newClass, oldClass) {\n        const elements = this.popupObj ? [this.inputWrapper, this.popupObj.element] : [this.inputWrapper];\n        if (!isNullOrUndefined(oldClass) && oldClass !== '') {\n            removeClass(elements, oldClass.split(' '));\n        }\n        if (!isNullOrUndefined(newClass) && newClass !== '') {\n            addClass(elements, newClass.split(' '));\n        }\n    }\n    setEnableRTL(state) {\n        if (state) {\n            this.inputWrapper.classList.add(RTL);\n        }\n        else {\n            this.inputWrapper.classList.remove(RTL);\n        }\n        if (this.popupObj) {\n            this.popupObj.enableRtl = state;\n            this.popupObj.dataBind();\n        }\n        if (this.treeObj) {\n            this.treeObj.enableRtl = state;\n            this.treeObj.dataBind();\n        }\n    }\n    /* To set enable property */\n    setEnable() {\n        Input.setEnabled(this.enabled, this.inputEle);\n        if (this.enabled) {\n            removeClass([this.inputWrapper], DISABLED);\n            this.inputEle.setAttribute('aria-disabled', 'false');\n            this.inputWrapper.setAttribute('aria-disabled', 'false');\n        }\n        else {\n            if (this.isPopupOpen) {\n                this.hidePopup();\n            }\n            addClass([this.inputWrapper], DISABLED);\n            if (this.inputWrapper && this.inputWrapper.classList.contains(INPUTFOCUS)) {\n                removeClass([this.inputWrapper], [INPUTFOCUS]);\n            }\n            this.inputEle.setAttribute('aria-disabled', 'true');\n            this.inputWrapper.setAttribute('aria-disabled', 'true');\n        }\n    }\n    cloneFields(fields) {\n        const clonedField = {\n            dataSource: fields.dataSource, value: fields.value, text: fields.text, parentValue: fields.parentValue,\n            child: this.cloneChildField(fields.child), hasChildren: fields.hasChildren, expanded: fields.expanded,\n            iconCss: fields.iconCss, imageUrl: fields.imageUrl, htmlAttributes: fields.htmlAttributes, query: fields.query,\n            selected: fields.selected, tableName: fields.tableName, tooltip: fields.tooltip\n        };\n        return clonedField;\n    }\n    cloneChildField(fields) {\n        if (typeof fields === 'string') {\n            return fields;\n        }\n        else {\n            const clonedField = {\n                dataSource: fields.dataSource, value: fields.value, text: fields.text, parentValue: fields.parentValue,\n                child: (fields.child ? this.cloneChildField(fields.child) : null), hasChildren: fields.hasChildren,\n                expanded: fields.expanded, iconCss: fields.iconCss, imageUrl: fields.imageUrl, htmlAttributes: fields.htmlAttributes,\n                query: fields.query, selected: fields.selected, tableName: fields.tableName, tooltip: fields.tooltip\n            };\n            return clonedField;\n        }\n    }\n    getTreeFields(fields) {\n        const treeFields = {\n            dataSource: fields.dataSource, id: fields.value, text: fields.text, parentID: fields.parentValue,\n            child: this.getTreeChildren(fields.child), hasChildren: fields.hasChildren, expanded: fields.expanded,\n            iconCss: fields.iconCss, imageUrl: fields.imageUrl, isChecked: fields.selected,\n            htmlAttributes: fields.htmlAttributes, query: fields.query, selected: fields.selected,\n            tableName: fields.tableName, tooltip: fields.tooltip\n        };\n        return treeFields;\n    }\n    getTreeChildren(mapper) {\n        if (typeof mapper === 'string') {\n            return mapper;\n        }\n        else if (!isNullOrUndefined(mapper)) {\n            mapper = this.getActualProperties(mapper);\n            const childFields = mapper;\n            if (mapper.value) {\n                childFields.id = mapper.value;\n            }\n            if (mapper.parentValue) {\n                childFields.parentID = mapper.parentValue;\n            }\n            if (mapper.child) {\n                childFields.child = this.getTreeChildren(mapper.child);\n            }\n            if (mapper.selected && this.showCheckBox) {\n                childFields.isChecked = mapper.selected;\n            }\n            return childFields;\n        }\n        return null;\n    }\n    // eslint-disable-next-line\n    getTreeDataType(ds, field) {\n        if (this.fields.dataSource instanceof DataManager) {\n            for (let i = 0; i < ds.length; i++) {\n                if ((typeof field.child === 'string') && isNullOrUndefined(getValue(field.child, ds[i]))) {\n                    return 1;\n                }\n            }\n            return 2;\n        }\n        for (let i = 0, len = ds.length; i < len; i++) {\n            if ((typeof field.child === 'string') && !isNullOrUndefined(getValue(field.child, ds[i]))) {\n                return 2;\n            }\n            if (!isNullOrUndefined(getValue(field.parentValue, ds[i])) || !isNullOrUndefined(getValue(field.hasChildren, ds[i]))) {\n                return 1;\n            }\n        }\n        return 1;\n    }\n    /* Triggers when the tree fields is changed dynamically */\n    setFields() {\n        this.resetValue();\n        if (this.hasTemplate) {\n            this.updateTemplate();\n        }\n        this.treeObj.fields = this.getTreeFields(this.fields);\n        this.treeObj.dataBind();\n    }\n    getEventArgs(args) {\n        // eslint-disable-next-line\n        const checkData = args.data;\n        // eslint-disable-next-line\n        const selectData = args.nodeData;\n        let state;\n        if (this.showCheckBox) {\n            if (args.action === 'check') {\n                state = 'select';\n            }\n            else if (args.action === 'uncheck') {\n                state = 'un-select';\n            }\n        }\n        const eventArgs = {\n            action: this.showCheckBox ? state : args.action,\n            isInteracted: this.isClicked ? true : args.isInteracted,\n            item: args.node,\n            itemData: this.showCheckBox ? checkData[0] : selectData\n        };\n        return eventArgs;\n    }\n    onBeforeSelect(args) {\n        if (args.isInteracted) {\n            this.oldValue = this.value ? this.value.slice() : this.value;\n            if (this.value === null) {\n                this.setProperties({ value: [] }, true);\n            }\n        }\n    }\n    updateHiddenValue() {\n        if (this.allowMultiSelection || this.showCheckBox) {\n            return;\n        }\n        if (this.value && this.value.length) {\n            this.hiddenElement.innerHTML = '<option selected value =\"' + this.value[0] + '\">' + this.text + '</option>';\n        }\n        else {\n            this.hiddenElement.innerHTML = '';\n        }\n    }\n    /* Triggers when the tree node is selected */\n    onNodeSelected(args) {\n        if (this.showCheckBox) {\n            return;\n        }\n        let selectedText;\n        if (args.isInteracted) {\n            const id = getValue('id', args.nodeData).toString();\n            if (!this.allowMultiSelection) {\n                this.hiddenElement.innerHTML = '';\n                this.setProperties({ value: [id] }, true);\n                if (this.itemTemplate) {\n                    selectedText = getValue('text', this.treeObj.getNode(id));\n                }\n                else {\n                    selectedText = getValue('text', args.nodeData).toString();\n                }\n                Input.setValue(selectedText, this.inputEle, this.floatLabelType);\n                this.setProperties({ text: selectedText }, true);\n                this.currentText = this.text;\n                this.currentValue = this.value;\n                attributes(this.inputWrapper, { 'aria-describedby': this.element.id });\n                attributes(this.inputWrapper, { 'aria-activedescendant': id.toString() });\n                this.updateHiddenValue();\n                this.showOverAllClear();\n                this.hidePopup();\n                this.isNodeSelected = true;\n            }\n            else if (this.allowMultiSelection) {\n                this.setMultiSelect();\n            }\n        }\n        const eventArgs = this.getEventArgs(args);\n        this.trigger('select', eventArgs);\n        if (this.isValueChange && !this.changeOnBlur) {\n            this.triggerChangeEvent(this.keyEventArgs);\n            this.isValueChange = false;\n        }\n    }\n    onNodeClicked(args) {\n        if (!this.changeOnBlur && this.isNodeSelected) {\n            this.triggerChangeEvent(args.event);\n            this.isNodeSelected = false;\n        }\n        const target = args.event.target;\n        if ((target.classList.contains('e-fullrow') || target.classList.contains('e-list-text')) && this.showCheckBox) {\n            this.isClicked = true;\n            // eslint-disable-next-line\n            const getNodeDetails = this.treeObj.getNode(args.node);\n            if (getNodeDetails.isChecked === 'true') {\n                this.treeObj.uncheckAll([args.node]);\n            }\n            else {\n                this.treeObj.checkAll([args.node]);\n            }\n            this.isClicked = false;\n            this.setMultiSelect();\n            this.ensurePlaceHolder();\n        }\n        if (!this.changeOnBlur && (this.allowMultiSelection || this.showCheckBox)) {\n            this.triggerChangeEvent(args.event);\n        }\n    }\n    onNodeChecked(args) {\n        const eventArgs = this.getEventArgs(args);\n        this.trigger('select', eventArgs);\n        if (this.isFilteredData && args.action === 'uncheck') {\n            const id = getValue('id', args.data[0]).toString();\n            this.removeSelectedData(id, true);\n        }\n        if (!this.isChipDelete && args.isInteracted) {\n            this.setMultiSelect();\n            this.ensurePlaceHolder();\n        }\n        if (this.showSelectAll && this.checkBoxElement) {\n            const nodes = this.treeObj.element.querySelectorAll('li');\n            const checkedNodes = this.treeObj.element.querySelectorAll('li .e-checkbox-wrapper[aria-checked=true]');\n            const wrap = closest(this.checkBoxElement, '.' + CHECKBOXWRAP);\n            if (wrap && args.action === 'uncheck') {\n                this.isReverseUpdate = true;\n                this.changeState(wrap, 'uncheck');\n                this.isReverseUpdate = false;\n            }\n            else if (wrap && args.action === 'check' && checkedNodes.length === nodes.length) {\n                this.isReverseUpdate = true;\n                this.changeState(wrap, 'check');\n                this.isReverseUpdate = false;\n            }\n        }\n    }\n    beforeCheck(args) {\n        if (args.isInteracted) {\n            this.oldValue = this.value ? this.value.slice() : this.value;\n        }\n    }\n    updateClearButton(state) {\n        if (state) {\n            if (!this.inputWrapper.contains(this.overAllClear)) {\n                this.inputEle.parentElement.insertBefore(this.overAllClear, this.inputEle.nextSibling);\n            }\n            else {\n                removeClass([this.overAllClear], HIDEICON);\n                addClass([this.inputWrapper], SHOW_CLEAR);\n            }\n        }\n        else {\n            addClass([this.overAllClear], HIDEICON);\n            removeClass([this.inputWrapper], SHOW_CLEAR);\n        }\n        if ((this.allowMultiSelection || this.showCheckBox) && this.chipWrapper) {\n            const chipClose = selectAll('.' + CHIP_CLOSE, this.chipWrapper);\n            for (let i = 0; i < chipClose.length; i++) {\n                if (!state) {\n                    addClass([chipClose[i]], HIDEICON);\n                }\n                else {\n                    removeClass([chipClose[i]], HIDEICON);\n                }\n            }\n        }\n    }\n    updateDropDownIconState(state) {\n        const spinIcon = select('.' + DDTICON, this.inputWrapper);\n        if (state) {\n            if (!spinIcon) {\n                Input.appendSpan(DROPDOWNICON, this.inputWrapper, this.createElement);\n            }\n            else {\n                removeClass([spinIcon], HIDEICON);\n            }\n            addClass([this.inputWrapper], SHOW_DD_ICON);\n        }\n        else {\n            addClass([spinIcon], HIDEICON);\n            removeClass([this.inputWrapper], SHOW_DD_ICON);\n        }\n    }\n    updateMode() {\n        if (this.mode === 'Custom') {\n            return;\n        }\n        if (this.mode !== 'Delimiter') {\n            if (!this.inputWrapper.contains(this.chipWrapper)) {\n                this.createChip();\n            }\n            const isValid = this.getValidMode();\n            if (this.chipWrapper.classList.contains(HIDEICON) && isValid) {\n                removeClass([this.chipWrapper], HIDEICON);\n                addClass([this.inputWrapper], SHOW_CHIP);\n            }\n            else if (!isValid) {\n                addClass([this.chipWrapper], HIDEICON);\n                removeClass([this.inputWrapper], SHOW_CHIP);\n            }\n            const isValue = this.value !== null ? (this.value.length !== 0 ? true : false) : false;\n            if (isValid && isValue) {\n                addClass([this.inputEle], CHIP_INPUT);\n            }\n            else {\n                removeClass([this.inputEle], CHIP_INPUT);\n            }\n        }\n        else if (this.inputEle.classList.contains(CHIP_INPUT)) {\n            removeClass([this.inputEle], CHIP_INPUT);\n            if (this.chipWrapper) {\n                addClass([this.chipWrapper], HIDEICON);\n                removeClass([this.inputWrapper], SHOW_CHIP);\n            }\n        }\n    }\n    ensurePlaceHolder() {\n        if (this.value && this.value.length === 0) {\n            removeClass([this.inputEle], CHIP_INPUT);\n            if (this.chipWrapper) {\n                addClass([this.chipWrapper], HIDEICON);\n            }\n        }\n    }\n    ensureClearIconPosition(floatLabelType) {\n        if (floatLabelType !== 'Never') {\n            this.inputWrapper.insertBefore(this.overAllClear, this.inputObj.buttons[0]);\n        }\n    }\n    setMultiSelectValue(newValues) {\n        if (!this.isFilteredData) {\n            this.setProperties({ value: newValues }, true);\n            if (newValues && newValues.length !== 0 && !this.showCheckBox) {\n                this.treeObj.selectedNodes = this.value.slice();\n                this.treeObj.dataBind();\n            }\n        }\n        else {\n            const selectedValues = isNullOrUndefined(this.value) ? [] : this.value;\n            for (let i = 0; i < newValues.length; i++) {\n                if (isNullOrUndefined(this.value) || this.value.indexOf(newValues[i]) === -1) {\n                    selectedValues.push(newValues[i]);\n                }\n            }\n            this.setProperties({ value: selectedValues }, true);\n        }\n    }\n    setMultiSelect() {\n        if (this.showCheckBox && !this.isDynamicChange) {\n            this.setMultiSelectValue(this.treeObj.checkedNodes.slice());\n        }\n        else {\n            const ddtValue = this.allowMultiSelection ? (this.showCheckBox ? this.treeObj.checkedNodes\n                : this.treeObj.selectedNodes) : (this.value ? (this.showCheckBox ? this.value : [this.value[0]]) : null);\n            this.setMultiSelectValue(ddtValue);\n            if (this.showCheckBox && this.value !== null) {\n                this.treeObj.checkedNodes = this.value;\n                this.treeObj.dataBind();\n            }\n        }\n        this.selectedText = [];\n        const checkSelection = this.allowMultiSelection ? true : (this.showCheckBox ? true : false);\n        if (this.inputWrapper.contains(this.chipWrapper) && !checkSelection) {\n            removeClass([this.inputEle], CHIP_INPUT);\n            detach(this.chipWrapper);\n        }\n        const isValid = this.getValidMode();\n        if (isValid && this.value !== null) {\n            addClass([this.inputEle], CHIP_INPUT);\n            if (this.chipWrapper) {\n                removeClass([this.chipWrapper], HIDEICON);\n            }\n        }\n        const isValue = this.value ? (this.value.length ? true : false) : false;\n        if (this.chipWrapper && (this.mode === 'Box' && !isValue)) {\n            addClass([this.chipWrapper], HIDEICON);\n            removeClass([this.inputEle], CHIP_INPUT);\n        }\n        this.updateSelectedValues();\n    }\n    // eslint-disable-next-line\n    getSelectedData(value) {\n        // eslint-disable-next-line\n        let data = null;\n        if (this.isFilteredData) {\n            for (let i = 0; i < this.selectedData.length; i++) {\n                if (getValue(this.treeSettings.loadOnDemand ? this.fields.value : 'id', this.selectedData[i]).toString() === value) {\n                    data = this.selectedData[i];\n                    break;\n                }\n            }\n        }\n        if (isNullOrUndefined(data)) {\n            if (this.treeSettings.loadOnDemand) {\n                data = this.getNodeData(value);\n            }\n            else {\n                data = this.treeObj.getNode(value);\n            }\n            if (!isNullOrUndefined(data)) {\n                this.selectedData.push(data);\n            }\n        }\n        return data;\n    }\n    getNodeData(id) {\n        let childItems;\n        if (isNullOrUndefined(id)) {\n            return childItems;\n        }\n        else if (this.treeDataType === 1) {\n            for (let i = 0, objlen = this.treeItems.length; i < objlen; i++) {\n                let dataId = getValue(this.fields.value, this.treeItems[i]);\n                if (!isNullOrUndefined(this.treeItems[i]) && !isNullOrUndefined(dataId) && dataId.toString() === id) {\n                    return this.treeItems[i];\n                }\n            }\n        }\n        else {\n            return this.getChildNodeData(this.treeItems, this.fields, id);\n        }\n        return childItems;\n    }\n    getChildNodeData(obj, mapper, id) {\n        let newChildItems;\n        if (isNullOrUndefined(obj)) {\n            return newChildItems;\n        }\n        for (let i = 0, objlen = obj.length; i < objlen; i++) {\n            let dataValue = getValue(mapper.value, obj[i]);\n            if (obj[i] && dataValue && dataValue.toString() === id) {\n                return obj[i];\n            }\n            else if (typeof mapper.child === 'string' && !isNullOrUndefined(getValue(mapper.child, obj[i]))) {\n                let childNodeData = getValue(mapper.child, obj[i]);\n                newChildItems = this.getChildNodeData(childNodeData, this.getChildMapperFields(mapper), id);\n                if (newChildItems !== undefined) {\n                    break;\n                }\n            }\n            else if (this.fields.dataSource instanceof DataManager && !isNullOrUndefined(getValue('child', obj[i]))) {\n                let child = 'child';\n                newChildItems = this.getChildNodeData(getValue(child, obj[i]), this.getChildMapperFields(mapper), id);\n                if (newChildItems !== undefined) {\n                    break;\n                }\n            }\n        }\n        return newChildItems;\n    }\n    getChildMapperFields(mapper) {\n        return (typeof mapper.child === 'string' || isNullOrUndefined(mapper.child)) ? mapper : mapper.child;\n    }\n    removeSelectedData(value, muteOnChange) {\n        const selectedValues = isNullOrUndefined(this.value) ? [] : this.value.slice();\n        selectedValues.splice(selectedValues.indexOf(value), 1);\n        this.setProperties({ value: selectedValues }, muteOnChange);\n        for (let i = 0; i < this.selectedData.length; i++) {\n            if (getValue(this.treeSettings.loadOnDemand ? this.fields.value : 'id', this.selectedData[i]).toString() === value) {\n                this.selectedData.splice(i, 1);\n                break;\n            }\n        }\n    }\n    updateSelectedValues() {\n        this.dataValue = '';\n        let temp;\n        let text;\n        let textValue = '';\n        // eslint-disable-next-line\n        let selectedData;\n        this.hiddenElement.innerHTML = '';\n        let hiddenInputValue = '';\n        if ((!this.isChipDelete || this.treeSettings.autoCheck) && (this.inputWrapper.contains(this.chipWrapper))) {\n            this.chipCollection.innerHTML = '';\n        }\n        if (!this.isFilteredData) {\n            this.selectedData = [];\n        }\n        if (!isNullOrUndefined(this.value)) {\n            for (let i = 0, len = this.value.length; i < len; i++) {\n                selectedData = this.getSelectedData(this.value[i]);\n                text = getValue(this.treeSettings.loadOnDemand ? this.fields.text : 'text', selectedData);\n                this.selectedText.push(text);\n                temp = this.selectedText[this.selectedText.length - 1];\n                if (this.selectedText.length > 1) {\n                    this.dataValue += (this.delimiterChar + ' ' + temp);\n                    textValue += (',' + temp);\n                }\n                else {\n                    this.dataValue += temp;\n                    textValue += temp;\n                }\n                if (this.mode !== 'Custom' && this.mode !== 'Delimiter' && (!this.isChipDelete || this.treeSettings.autoCheck) &&\n                    (this.allowMultiSelection || this.showCheckBox)) {\n                    this.setChipValues(temp, this.value[i]);\n                }\n                hiddenInputValue += '<option selected value =\"' + this.value[i] + '\">' +\n                    this.selectedText[this.selectedText.length - 1] + '</option>';\n            }\n            if (this.selectedText.length >= 1) {\n                this.setProperties({ text: textValue }, true);\n            }\n            this.hiddenElement.innerHTML = hiddenInputValue;\n            if (this.mode === 'Custom' && (this.allowMultiSelection || this.showCheckBox)) {\n                this.setTagValues();\n            }\n        }\n        const isValid = this.getValidMode();\n        if (this.mode !== 'Custom' && this.mode !== 'Box' && (this.allowMultiSelection || this.showCheckBox) && !isValid) {\n            if (this.chipWrapper) {\n                addClass([this.chipWrapper], HIDEICON);\n                removeClass([this.inputWrapper], SHOW_CHIP);\n            }\n        }\n        Input.setValue(this.dataValue, this.inputEle, this.floatLabelType);\n        if (textValue === '') {\n            this.setProperties({ text: null }, true);\n        }\n        else {\n            this.setProperties({ text: textValue }, true);\n        }\n        if (this.showClearButton && this.inputFocus) {\n            this.showOverAllClear();\n        }\n        if ((this.allowMultiSelection || this.showCheckBox) && this.popupObj) {\n            this.popupObj.refreshPosition();\n        }\n        this.currentText = this.text;\n        this.currentValue = this.value;\n    }\n    setChipValues(text, value) {\n        if (!this.inputWrapper.contains(this.chipWrapper)) {\n            this.createChip();\n        }\n        const chip = this.createElement('span', {\n            className: CHIP,\n            attrs: { 'data-value': value }\n        });\n        const chipContent = this.createElement('span', { className: CHIP_CONTENT });\n        const chipClose = this.createElement('span', { className: CHIP_CLOSE + ' ' + ICONS });\n        chipContent.innerHTML = text;\n        chip.appendChild(chipContent);\n        this.chipCollection.appendChild(chip);\n        if (this.showClearButton) {\n            chip.appendChild(chipClose);\n            EventHandler.add(chipClose, 'mousedown', this.removeChip, this);\n        }\n    }\n    setTagValues() {\n        if (this.value === null || this.text == null) {\n            return;\n        }\n        if (!this.inputWrapper.contains(this.chipWrapper)) {\n            this.createChip();\n        }\n        if (!this.inputWrapper.classList.contains(SHOW_CHIP)) {\n            addClass([this.inputWrapper], SHOW_CHIP);\n        }\n        const chip = this.createElement('span', {\n            className: CHIP,\n        });\n        if (!this.inputEle.classList.contains(CHIP_INPUT)) {\n            addClass([this.inputEle], CHIP_INPUT);\n        }\n        if (this.chipWrapper.classList.contains(HIDEICON)) {\n            removeClass([this.chipWrapper], HIDEICON);\n        }\n        const chipContent = this.createElement('span', { className: CHIP_CONTENT });\n        const template = this.customTemplate;\n        const templateId = this.customTemplateId;\n        const templatestring = 'customTemplate';\n        const compiledString = this.templateComplier(template);\n        let tempArr = compiledString({ 'value': this.value, 'text': this.text }, this, templatestring, templateId, this.isStringTemplate, undefined, chipContent);\n        if (tempArr) {\n            tempArr = Array.prototype.slice.call(tempArr);\n            append(tempArr, chipContent);\n        }\n        chip.appendChild(chipContent);\n        this.chipCollection.appendChild(chip);\n    }\n    setSelectAllWrapper(state) {\n        if (this.isFirstRender) {\n            return;\n        }\n        if (state && !this.popupEle.contains(this.checkAllParent) && this.showCheckBox) {\n            this.createSelectAllWrapper();\n            this.popupEle.insertBefore(this.checkAllParent, this.popupDiv);\n        }\n        else if (this.popupEle.contains(this.checkAllParent)) {\n            detach(this.checkAllParent);\n            this.checkAllParent = null;\n        }\n    }\n    setHeaderTemplate() {\n        if (this.header) {\n            this.header.innerHTML = '';\n        }\n        else {\n            this.header = this.createElement('div');\n            addClass([this.header], HEADER);\n        }\n        // eslint-disable-next-line\n        const compiledString = this.templateComplier(this.headerTemplate);\n        let tempArr = compiledString({}, this, 'headerTemplate', this.headerTemplateId, this.isStringTemplate, undefined, this.header);\n        if (tempArr) {\n            tempArr = Array.prototype.slice.call(tempArr);\n            append(tempArr, this.header);\n        }\n        this.popupEle.insertBefore(this.header, this.checkAllParent ? this.checkAllParent : this.popupDiv);\n    }\n    // eslint-disable-next-line\n    templateComplier(template) {\n        if (template) {\n            // eslint-disable-next-line\n            try {\n                if (document.querySelectorAll(template).length) {\n                    return compile(document.querySelector(template).innerHTML.trim());\n                }\n            }\n            catch (e) {\n                return compile(template);\n            }\n        }\n        return compile(template);\n    }\n    setFooterTemplate() {\n        if (this.footer) {\n            this.footer.innerHTML = '';\n        }\n        else {\n            this.footer = this.createElement('div');\n            addClass([this.footer], FOOTER);\n        }\n        // eslint-disable-next-line\n        const compiledString = this.templateComplier(this.footerTemplate);\n        let tempArr = compiledString({}, this, 'footerTemplate', this.footerTemplateId, this.isStringTemplate, undefined, this.footer);\n        if (tempArr) {\n            tempArr = Array.prototype.slice.call(tempArr);\n            append(tempArr, this.footer);\n        }\n        append([this.footer], this.popupEle);\n    }\n    clearAll(e) {\n        if (!this.enabled || this.readonly) {\n            return;\n        }\n        this.resetValue();\n        this.showOverAllClear();\n        if ((this.allowMultiSelection || this.showCheckBox)) {\n            if (this.popupObj) {\n                this.popupObj.refreshPosition();\n            }\n            if (!this.wrapText) {\n                this.updateOverflowWrapper(true);\n            }\n        }\n        if (e) {\n            this.isClearButtonClick = true;\n        }\n        if (!this.changeOnBlur) {\n            this.triggerChangeEvent(e);\n        }\n    }\n    removeChip(e) {\n        if (!this.enabled || this.readonly) {\n            return;\n        }\n        const element = e.target.parentElement;\n        const value = element.getAttribute('data-value');\n        if (this.chipCollection) {\n            if (element) {\n                remove(element);\n            }\n        }\n        this.isChipDelete = true;\n        this.isClearButtonClick = true;\n        this.removeSelectedData(value, true);\n        this.selectedText = [];\n        if (this.allowMultiSelection) {\n            this.treeObj.selectedNodes = this.value.slice();\n            this.updateSelectedValues();\n        }\n        if (this.showCheckBox) {\n            this.treeObj.uncheckAll([value]);\n            this.clearCheckAll();\n            this.setMultiSelect();\n        }\n        this.triggerChangeEvent(e);\n        this.isChipDelete = false;\n        this.ensurePlaceHolder();\n    }\n    resetValue(isDynamicChange) {\n        Input.setValue(null, this.inputEle, this.floatLabelType);\n        if (!isDynamicChange) {\n            this.oldValue = this.value;\n            this.setProperties({ value: [] }, true);\n        }\n        this.dataValue = null;\n        this.setProperties({ text: null }, true);\n        this.selectedData = [];\n        setValue('selectedNodes', [], this.treeObj);\n        this.hiddenElement.innerHTML = '';\n        if (this.showCheckBox) {\n            this.treeObj.uncheckAll();\n            this.setMultiSelect();\n            this.clearCheckAll();\n        }\n        if (this.oldValue === null && !isDynamicChange) {\n            this.removeValue = true;\n        }\n        else if (isDynamicChange) {\n            this.triggerChangeEvent();\n        }\n        if ((this.allowMultiSelection || this.showCheckBox) && this.chipWrapper) {\n            this.chipCollection.innerHTML = '';\n            if (!this.wrapText) {\n                this.updateOverflowWrapper(true);\n            }\n            this.ensurePlaceHolder();\n        }\n    }\n    clearCheckAll() {\n        if (this.showSelectAll && this.value && this.value.length === 0) {\n            this.setLocale(false);\n        }\n    }\n    selectAllItems(state) {\n        if (this.showCheckBox) {\n            if (state) {\n                this.treeObj.checkAll();\n            }\n            else {\n                this.treeObj.uncheckAll();\n            }\n            this.checkSelectAll = true;\n        }\n        else if (this.allowMultiSelection) {\n            if (!state) {\n                this.treeObj.selectedNodes = [];\n            }\n            else {\n                const li = selectAll('li', this.treeObj.element);\n                let id;\n                const arr = [];\n                for (let i = 0; i < li.length; i++) {\n                    id = li[i].getAttribute('data-uid').toString();\n                    arr.push(id);\n                }\n                this.treeObj.selectedNodes = arr;\n            }\n        }\n        this.updateMode();\n        this.setMultiSelect();\n        if (!this.wrapText) {\n            if (state) {\n                this.updateView();\n            }\n            else {\n                this.updateOverflowWrapper(true);\n            }\n        }\n    }\n    updateTreeSettings(prop) {\n        const value = Object.keys(prop.treeSettings)[0];\n        if (value === 'autoCheck') {\n            this.ensureAutoCheck();\n            this.treeObj.autoCheck = this.treeSettings.autoCheck;\n        }\n        else if (value === 'loadOnDemand') {\n            this.treeObj.loadOnDemand = this.treeSettings.loadOnDemand;\n        }\n        else if (value === 'expandOn') {\n            this.treeObj.expandOn = this.treeSettings.expandOn;\n            this.treeObj.dataBind();\n            return;\n        }\n        this.treeObj.dataBind();\n        this.setMultiSelect();\n        this.updateValue(this.value);\n    }\n    updateCheckBoxState(checkBox) {\n        if (this.hasTemplate) {\n            this.updateTemplate();\n        }\n        if (!this.wrapText) {\n            this.updateOverflowWrapper(false);\n        }\n        this.treeObj.showCheckBox = checkBox;\n        this.treeObj.dataBind();\n        this.isDynamicChange = true;\n        this.setSelectAllWrapper(this.showSelectAll);\n        if (this.showSelectAll) {\n            this.setLocale();\n        }\n        if (this.showCheckBox) {\n            this.updateMode();\n        }\n        this.setMultiSelect();\n        this.isDynamicChange = false;\n    }\n    updateTemplate() {\n        if (this.popupObj) {\n            this.clearTemplate();\n            /* eslint-disable */\n            this.portals = [];\n            /* eslint-enable */\n            this.popupObj.destroy();\n            if (this.isPopupOpen) {\n                this.hidePopup();\n                this.isFirstRender = true;\n                this.renderPopup();\n            }\n            else {\n                this.isFirstRender = true;\n            }\n        }\n    }\n    l10nUpdate(actionFailure) {\n        if (this.noRecord) {\n            this.noRecord.innerHTML = '';\n        }\n        else {\n            this.noRecord = this.createElement('div');\n            addClass([this.noRecord], NODATACONTAINER);\n            prepend([this.noRecord], this.popupDiv);\n        }\n        if (this.noRecordsTemplate !== 'No Records Found' || this.actionFailureTemplate !== 'The Request Failed') {\n            const template = actionFailure ? this.actionFailureTemplate : this.noRecordsTemplate;\n            const templateId = actionFailure ? this.actionFailureTemplateId : this.noRecordsTemplateId;\n            const templatestring = actionFailure ? 'actionFailureTemplate' : 'noRecordsTemplate';\n            // eslint-disable-next-line\n            const compiledString = this.templateComplier(template);\n            let tempArr = compiledString({}, this, templatestring, templateId, this.isStringTemplate, undefined, this.noRecord);\n            if (tempArr) {\n                tempArr = Array.prototype.slice.call(tempArr);\n                append(tempArr, this.noRecord);\n            }\n        }\n        else {\n            // eslint-disable-next-line\n            const l10nLocale = { noRecordsTemplate: 'No Records Found', actionFailureTemplate: 'The Request Failed' };\n            this.l10n = new L10n(this.getLocaleName(), l10nLocale, this.locale);\n            this.noRecord.innerHTML = actionFailure ?\n                this.l10n.getConstant('actionFailureTemplate') : this.l10n.getConstant('noRecordsTemplate');\n        }\n    }\n    updateRecordTemplate(action) {\n        if (this.treeItems && this.treeItems.length <= 0) {\n            this.l10nUpdate(action);\n            if (this.hasTemplate) {\n                this.updateTemplate();\n            }\n        }\n    }\n    updateOverflowWrapper(state) {\n        if (!state) {\n            if (!this.inputWrapper.contains(this.overFlowWrapper)) {\n                this.overFlowWrapper = this.createElement('span', { className: OVERFLOW_VIEW + ' ' + HIDEICON });\n                this.inputWrapper.insertBefore(this.overFlowWrapper, this.hiddenElement);\n            }\n        }\n        else if (this.inputWrapper.contains(this.overFlowWrapper) && state) {\n            this.overFlowWrapper.innerHTML = '';\n        }\n    }\n    updateMultiSelection(state) {\n        if (!this.wrapText) {\n            this.updateOverflowWrapper(false);\n        }\n        this.treeObj.allowMultiSelection = state;\n        this.treeObj.dataBind();\n        this.updateOption();\n        if (this.allowMultiSelection) {\n            this.updateMode();\n        }\n        this.setMultiSelect();\n    }\n    updateAllowFiltering(state) {\n        if (!this.isFirstRender) {\n            if (state) {\n                this.renderFilter();\n            }\n            else {\n                this.destroyFilter();\n            }\n        }\n        this.ensureAutoCheck();\n    }\n    updateFilterPlaceHolder() {\n        if (this.filterObj) {\n            this.filterObj.placeholder = this.filterBarPlaceholder;\n            this.filterObj.element.setAttribute('aria-label', this.filterBarPlaceholder);\n        }\n    }\n    updateValue(value) {\n        this.isDynamicChange = true;\n        if (isNullOrUndefined(value) || value.length === 0) {\n            this.resetValue(true);\n        }\n        else {\n            this.setTreeValue();\n            if ((this.allowMultiSelection || this.showCheckBox) && !this.wrapText) {\n                this.updateOverflowWrapper(false);\n                this.updateView();\n            }\n        }\n        this.updateHiddenValue();\n        this.isDynamicChange = false;\n    }\n    updateText(text) {\n        if (isNullOrUndefined(text)) {\n            this.resetValue();\n        }\n        else {\n            this.setTreeText();\n            if ((this.allowMultiSelection || this.showCheckBox) && !this.wrapText) {\n                this.updateOverflowWrapper(false);\n                this.updateView();\n            }\n        }\n        this.updateHiddenValue();\n    }\n    updateModelMode() {\n        const validMode = this.allowMultiSelection ? true : (this.showCheckBox ? true : false);\n        if (!validMode) {\n            return;\n        }\n        if (!this.wrapText) {\n            const overFlow = select('.' + OVERFLOW_VIEW, this.inputWrapper);\n            if (overFlow) {\n                overFlow.innerHTML = '';\n            }\n        }\n        this.updateMode();\n        this.setMultiSelect();\n        if (!this.wrapText && (this.value && this.value.length !== 0)) {\n            this.updateOverFlowView();\n            addClass([this.inputEle], CHIP_INPUT);\n            if (this.mode === 'Box') {\n                removeClass([this.overFlowWrapper, this.inputWrapper], SHOW_TEXT);\n            }\n            else {\n                addClass([this.overFlowWrapper, this.inputWrapper], SHOW_TEXT);\n            }\n        }\n    }\n    updateOption() {\n        if (!this.hiddenElement.hasAttribute('multiple') && (this.allowMultiSelection || this.showCheckBox)) {\n            this.hiddenElement.setAttribute('multiple', '');\n        }\n        else if (this.hiddenElement.hasAttribute('multiple') && (!this.allowMultiSelection && !this.showCheckBox)) {\n            this.hiddenElement.removeAttribute('multiple');\n        }\n    }\n    /**\n     * Dynamically change the value of properties.\n     *\n     * @param {DropDownTreeModel} newProp - specifies the newProp value.\n     * @param {DropDownTreeModel} oldProp - specifies the newProp value.\n     * @returns {void}\n     * @private\n     */\n    onPropertyChanged(newProp, oldProp) {\n        for (const prop of Object.keys(newProp)) {\n            switch (prop) {\n                case 'width':\n                    this.setElementWidth(newProp.width);\n                    if (this.popupObj) {\n                        this.popupObj.element.style.width = this.setWidth();\n                    }\n                    break;\n                case 'placeholder':\n                    Input.setPlaceholder(newProp.placeholder, this.inputEle);\n                    break;\n                case 'cssClass':\n                    this.setCssClass(newProp.cssClass, oldProp.cssClass);\n                    break;\n                case 'enableRtl':\n                    this.setEnableRTL(this.enableRtl);\n                    break;\n                case 'fields':\n                    this.setFields();\n                    break;\n                case 'readonly':\n                    Input.setReadonly(newProp.readonly, this.inputEle);\n                    break;\n                case 'enabled':\n                    this.setEnable();\n                    break;\n                case 'floatLabelType':\n                    Input.removeFloating(this.inputObj);\n                    Input.addFloating(this.inputEle, newProp.floatLabelType, this.placeholder, this.createElement);\n                    this.ensureClearIconPosition(newProp.floatLabelType);\n                    break;\n                case 'showClearButton':\n                    this.updateClearButton(newProp.showClearButton);\n                    break;\n                case 'allowFiltering':\n                    this.updateAllowFiltering(newProp.allowFiltering);\n                    break;\n                case 'filterBarPlaceholder':\n                    this.updateFilterPlaceHolder();\n                    break;\n                case 'value':\n                    this.oldValue = oldProp.value;\n                    this.updateValue(newProp.value);\n                    break;\n                case 'text':\n                    this.updateText(newProp.text);\n                    break;\n                case 'allowMultiSelection':\n                    this.updateMultiSelection(newProp.allowMultiSelection);\n                    break;\n                case 'mode':\n                    if (!this.showCheckBox && !this.allowMultiSelection) {\n                        return;\n                    }\n                    if (this.mode === 'Custom') {\n                        if (this.overFlowWrapper) {\n                            detach(this.overFlowWrapper);\n                        }\n                        if (this.chipWrapper) {\n                            detach(this.chipWrapper);\n                        }\n                        this.setTagValues();\n                    }\n                    else {\n                        if (oldProp.mode === 'Custom') {\n                            this.updateOverflowWrapper(this.wrapText);\n                        }\n                        this.updateModelMode();\n                    }\n                    break;\n                case 'delimiterChar':\n                    if (this.mode === 'Box') {\n                        return;\n                    }\n                    if (this.showCheckBox || this.allowMultiSelection) {\n                        this.setMultiSelect();\n                    }\n                    break;\n                case 'selectAllText':\n                    if (this.showCheckBox && this.showSelectAll) {\n                        this.setLocale();\n                    }\n                    break;\n                case 'unSelectAllText':\n                    if (this.showCheckBox && this.showSelectAll) {\n                        this.setLocale(false);\n                    }\n                    break;\n                case 'showSelectAll':\n                    if (this.showCheckBox) {\n                        this.setSelectAllWrapper(newProp.showSelectAll);\n                        this.updatePopupHeight();\n                    }\n                    break;\n                case 'showCheckBox':\n                    this.updateCheckBoxState(newProp.showCheckBox);\n                    if (!this.wrapText) {\n                        this.updateOverflowWrapper(true);\n                    }\n                    this.updatePopupHeight();\n                    this.updateOption();\n                    break;\n                case 'treeSettings':\n                    this.updateTreeSettings(newProp);\n                    break;\n                case 'customTemplate':\n                    if (this.mode !== \"Custom\") {\n                        return;\n                    }\n                    this.chipCollection.innerHTML = \"\";\n                    this.setTagValues();\n                    break;\n                case 'sortOrder':\n                    if (this.hasTemplate) {\n                        this.updateTemplate();\n                    }\n                    this.treeObj.sortOrder = newProp.sortOrder;\n                    this.updateValue(this.value);\n                    this.treeObj.dataBind();\n                    break;\n                case 'showDropDownIcon':\n                    this.updateDropDownIconState(newProp.showDropDownIcon);\n                    break;\n                case 'popupWidth':\n                    if (this.popupObj) {\n                        this.popupObj.element.style.width = this.setWidth();\n                    }\n                    break;\n                case 'popupHeight':\n                    if (this.popupObj) {\n                        this.updatePopupHeight();\n                    }\n                    break;\n                case 'zIndex':\n                    if (this.popupObj) {\n                        this.popupObj.zIndex = newProp.zIndex;\n                        this.popupObj.dataBind();\n                    }\n                    break;\n                case 'headerTemplate':\n                    this.updateTemplate();\n                    break;\n                case 'footerTemplate':\n                    this.updateTemplate();\n                    break;\n                case 'itemTemplate':\n                    this.updateTemplate();\n                    this.treeObj.nodeTemplate = newProp.itemTemplate;\n                    this.treeObj.dataBind();\n                    break;\n                case 'noRecordsTemplate':\n                    this.updateRecordTemplate();\n                    break;\n                case 'actionFailureTemplate':\n                    this.updateRecordTemplate(true);\n                    break;\n                case 'htmlAttributes':\n                    this.setHTMLAttributes();\n                    break;\n                case 'wrapText':\n                    this.updateOverflowWrapper(this.wrapText);\n                    if ((this.allowMultiSelection || this.showCheckBox) && !this.wrapText) {\n                        this.updateView();\n                    }\n                    else {\n                        addClass([this.overFlowWrapper], HIDEICON);\n                        if (this.chipWrapper && this.mode === 'Box') {\n                            removeClass([this.chipWrapper], HIDEICON);\n                        }\n                        else {\n                            removeClass([this.inputWrapper], SHOW_CHIP);\n                            removeClass([this.inputEle], CHIP_INPUT);\n                        }\n                        this.ensurePlaceHolder();\n                    }\n                    break;\n            }\n        }\n    }\n    /**\n     * Allows you to clear the selected values from the Dropdown Tree component.\n     *\n     * @method clear\n     * @returns {void}\n     */\n    clear() {\n        this.clearAll();\n        if (this.inputFocus) {\n            this.onFocusOut();\n        }\n        else {\n            if (this.changeOnBlur) {\n                this.triggerChangeEvent();\n            }\n            this.removeValue = false;\n        }\n    }\n    /**\n     * Removes the component from the DOM and detaches all its related event handlers. Also, it removes the attributes and classes.\n     *\n     * @method destroy\n     * @returns {void}\n     */\n    destroy() {\n        this.clearTemplate();\n        this.unWireEvents();\n        this.setCssClass(null, this.cssClass);\n        this.setProperties({ value: [] }, true);\n        this.setProperties({ text: null }, true);\n        this.treeObj.destroy();\n        this.destroyFilter();\n        if (this.popupObj) {\n            this.popupObj.destroy();\n            detach(this.popupObj.element);\n        }\n        if (this.element.tagName !== this.getDirective()) {\n            this.inputWrapper.parentElement.insertBefore(this.element, this.inputWrapper);\n        }\n        Input.setValue(null, this.inputEle, this.floatLabelType);\n        detach(this.inputWrapper);\n        detach(this.popupDiv);\n        this.element.classList.remove('e-input');\n        if (this.showCheckBox || this.allowMultiSelection) {\n            this.element.classList.remove(CHIP_INPUT);\n        }\n        super.destroy();\n    }\n    destroyFilter() {\n        if (this.filterObj) {\n            this.filterObj.destroy();\n            detach(this.filterObj.element);\n            detach(this.filterContainer);\n            this.filterObj = null;\n        }\n    }\n    /**\n     * Ensures visibility of the Dropdown Tree item by using item value or item element.\n     * If many Dropdown Tree items are present, and we are in need to find a particular item, then the `ensureVisible` property\n     * helps you to bring the item to visibility by expanding the Dropdown Tree and scrolling to the specific item.\n     *\n     * @param  {string | Element} item - Specifies the value of Dropdown Tree item/ Dropdown Tree item element.\n     * @returns {void}\n     */\n    ensureVisible(item) {\n        this.treeObj.ensureVisible(item);\n    }\n    /**\n     * To get the updated data source of the Dropdown Tree.\n     *\n     * @param  {string | Element} item - Specifies the value of Dropdown Tree item/ Dropdown Tree item element\n     * @returns {'{[key: string]: Object }[]'} - returns the updated data source of the Dropdown Tree.\n     */\n    // eslint-disable-next-line\n    getData(item) {\n        return this.treeObj.getTreeData(item);\n    }\n    /**\n     * Close the Dropdown tree pop-up.\n     *\n     * @returns {void}\n     */\n    hidePopup() {\n        const eventArgs = { popup: this.popupObj };\n        this.inputWrapper.classList.remove(ICONANIMATION);\n        if (this.popupEle) {\n            addClass([this.popupEle], DDTHIDEICON);\n        }\n        attributes(this.inputWrapper, { 'aria-expanded': 'false' });\n        if (this.popupObj && this.isPopupOpen) {\n            this.popupObj.hide();\n            if (this.inputFocus) {\n                this.inputWrapper.focus();\n                if (this.allowFiltering) {\n                    addClass([this.inputWrapper], [INPUTFOCUS]);\n                }\n            }\n            this.trigger('close', eventArgs);\n        }\n    }\n    /**\n     * Based on the state parameter, entire list item will be selected or deselected.\n     *\n     * @param {boolean} state - Unselects/Selects entire Dropdown Tree items.\n     * @returns {void}\n     *\n     */\n    selectAll(state) {\n        this.selectAllItems(state);\n    }\n    /**\n     * Opens the popup that displays the Dropdown Tree items.\n     *\n     * @returns {void}\n     */\n    showPopup() {\n        if (!this.enabled || this.readonly || this.isPopupOpen) {\n            return;\n        }\n        this.renderPopup();\n        this.focusIn();\n    }\n    /**\n     * Return the module name.\n     *\n     * @private\n     * @returns {string} - returns the module name.\n     */\n    getModuleName() {\n        return 'dropdowntree';\n    }\n};\n__decorate$2([\n    Property('The Request Failed')\n], DropDownTree.prototype, \"actionFailureTemplate\", void 0);\n__decorate$2([\n    Property(false)\n], DropDownTree.prototype, \"allowFiltering\", void 0);\n__decorate$2([\n    Property(false)\n], DropDownTree.prototype, \"allowMultiSelection\", void 0);\n__decorate$2([\n    Property(true)\n], DropDownTree.prototype, \"changeOnBlur\", void 0);\n__decorate$2([\n    Property('')\n], DropDownTree.prototype, \"cssClass\", void 0);\n__decorate$2([\n    Property(\"${value.length} item(s) selected\")\n], DropDownTree.prototype, \"customTemplate\", void 0);\n__decorate$2([\n    Property(',')\n], DropDownTree.prototype, \"delimiterChar\", void 0);\n__decorate$2([\n    Property(true)\n], DropDownTree.prototype, \"enabled\", void 0);\n__decorate$2([\n    Complex({}, Fields)\n], DropDownTree.prototype, \"fields\", void 0);\n__decorate$2([\n    Property(null)\n], DropDownTree.prototype, \"filterBarPlaceholder\", void 0);\n__decorate$2([\n    Property('StartsWith')\n], DropDownTree.prototype, \"filterType\", void 0);\n__decorate$2([\n    Property('Never')\n], DropDownTree.prototype, \"floatLabelType\", void 0);\n__decorate$2([\n    Property(null)\n], DropDownTree.prototype, \"footerTemplate\", void 0);\n__decorate$2([\n    Property(false)\n], DropDownTree.prototype, \"ignoreAccent\", void 0);\n__decorate$2([\n    Property(true)\n], DropDownTree.prototype, \"ignoreCase\", void 0);\n__decorate$2([\n    Property(null)\n], DropDownTree.prototype, \"headerTemplate\", void 0);\n__decorate$2([\n    Property({})\n], DropDownTree.prototype, \"htmlAttributes\", void 0);\n__decorate$2([\n    Property(null)\n], DropDownTree.prototype, \"itemTemplate\", void 0);\n__decorate$2([\n    Property('Default')\n], DropDownTree.prototype, \"mode\", void 0);\n__decorate$2([\n    Property('No Records Found')\n], DropDownTree.prototype, \"noRecordsTemplate\", void 0);\n__decorate$2([\n    Property(null)\n], DropDownTree.prototype, \"placeholder\", void 0);\n__decorate$2([\n    Property('300px')\n], DropDownTree.prototype, \"popupHeight\", void 0);\n__decorate$2([\n    Property('100%')\n], DropDownTree.prototype, \"popupWidth\", void 0);\n__decorate$2([\n    Property(false)\n], DropDownTree.prototype, \"readonly\", void 0);\n__decorate$2([\n    Property(false)\n], DropDownTree.prototype, \"showSelectAll\", void 0);\n__decorate$2([\n    Property('Select All')\n], DropDownTree.prototype, \"selectAllText\", void 0);\n__decorate$2([\n    Property(false)\n], DropDownTree.prototype, \"showCheckBox\", void 0);\n__decorate$2([\n    Property(true)\n], DropDownTree.prototype, \"showClearButton\", void 0);\n__decorate$2([\n    Property(true)\n], DropDownTree.prototype, \"showDropDownIcon\", void 0);\n__decorate$2([\n    Property('None')\n], DropDownTree.prototype, \"sortOrder\", void 0);\n__decorate$2([\n    Property(null)\n], DropDownTree.prototype, \"text\", void 0);\n__decorate$2([\n    Complex({}, TreeSettings)\n], DropDownTree.prototype, \"treeSettings\", void 0);\n__decorate$2([\n    Property('Unselect All')\n], DropDownTree.prototype, \"unSelectAllText\", void 0);\n__decorate$2([\n    Property(null)\n], DropDownTree.prototype, \"value\", void 0);\n__decorate$2([\n    Property('100%')\n], DropDownTree.prototype, \"width\", void 0);\n__decorate$2([\n    Property(1000)\n], DropDownTree.prototype, \"zIndex\", void 0);\n__decorate$2([\n    Property(false)\n], DropDownTree.prototype, \"wrapText\", void 0);\n__decorate$2([\n    Event()\n], DropDownTree.prototype, \"actionFailure\", void 0);\n__decorate$2([\n    Event()\n], DropDownTree.prototype, \"beforeOpen\", void 0);\n__decorate$2([\n    Event()\n], DropDownTree.prototype, \"change\", void 0);\n__decorate$2([\n    Event()\n], DropDownTree.prototype, \"close\", void 0);\n__decorate$2([\n    Event()\n], DropDownTree.prototype, \"blur\", void 0);\n__decorate$2([\n    Event()\n], DropDownTree.prototype, \"created\", void 0);\n__decorate$2([\n    Event()\n], DropDownTree.prototype, \"dataBound\", void 0);\n__decorate$2([\n    Event()\n], DropDownTree.prototype, \"destroyed\", void 0);\n__decorate$2([\n    Event()\n], DropDownTree.prototype, \"filtering\", void 0);\n__decorate$2([\n    Event()\n], DropDownTree.prototype, \"focus\", void 0);\n__decorate$2([\n    Event()\n], DropDownTree.prototype, \"keyPress\", void 0);\n__decorate$2([\n    Event()\n], DropDownTree.prototype, \"open\", void 0);\n__decorate$2([\n    Event()\n], DropDownTree.prototype, \"select\", void 0);\nDropDownTree = __decorate$2([\n    NotifyPropertyChanges\n], DropDownTree);\n\n/**\n * export all modules from current location\n */\n\nvar __decorate$3 = (undefined && undefined.__decorate) || function (decorators, target, key, desc) {\n    var c = arguments.length, r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d;\n    if (typeof Reflect === \"object\" && typeof Reflect.decorate === \"function\") r = Reflect.decorate(decorators, target, key, desc);\n    else for (var i = decorators.length - 1; i >= 0; i--) if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;\n    return c > 3 && r && Object.defineProperty(target, key, r), r;\n};\n// eslint-disable-next-line @typescript-eslint/triple-slash-reference\n/// <reference path='../drop-down-list/drop-down-list-model.d.ts'/>\nconst SPINNER_CLASS = 'e-atc-spinner-icon';\ndropDownListClasses.root = 'e-combobox';\nconst inputObject$1 = {\n    container: null,\n    buttons: []\n};\n/**\n * The ComboBox component allows the user to type a value or choose an option from the list of predefined options.\n * ```html\n * <select id=\"list\">\n *      <option value='1'>Badminton</option>\n *      <option value='2'>Basketball</option>\n *      <option value='3'>Cricket</option>\n *      <option value='4'>Football</option>\n *      <option value='5'>Tennis</option>\n * </select>\n * ```\n * ```typescript\n *   let games:ComboBox = new ComboBox();\n *   games.appendTo(\"#list\");\n * ```\n */\nlet ComboBox = class ComboBox extends DropDownList {\n    /**\n     * *Constructor for creating the component\n     *\n     * @param {ComboBoxModel} options - Specifies the ComboBox model.\n     * @param {string | HTMLElement} element - Specifies the element to render as component.\n     * @private\n     */\n    constructor(options, element) {\n        super(options, element);\n    }\n    /**\n     * Initialize the event handler\n     *\n     * @private\n     * @returns {void}\n     */\n    preRender() {\n        super.preRender();\n    }\n    getLocaleName() {\n        return 'combo-box';\n    }\n    wireEvent() {\n        if (this.getModuleName() === 'combobox') {\n            EventHandler.add(this.inputWrapper.buttons[0], 'mousedown', this.preventBlur, this);\n            EventHandler.add(this.inputWrapper.container, 'blur', this.onBlurHandler, this);\n        }\n        if (!isNullOrUndefined(this.inputWrapper.buttons[0])) {\n            EventHandler.add(this.inputWrapper.buttons[0], 'mousedown', this.dropDownClick, this);\n        }\n        EventHandler.add(this.inputElement, 'focus', this.targetFocus, this);\n        if (!this.readonly) {\n            EventHandler.add(this.inputElement, 'input', this.onInput, this);\n            EventHandler.add(this.inputElement, 'keyup', this.onFilterUp, this);\n            EventHandler.add(this.inputElement, 'keydown', this.onFilterDown, this);\n            EventHandler.add(this.inputElement, 'paste', this.pasteHandler, this);\n        }\n        this.bindCommonEvent();\n    }\n    preventBlur(e) {\n        if ((!this.allowFiltering && document.activeElement !== this.inputElement &&\n            !document.activeElement.classList.contains(dropDownListClasses.input) && Browser.isDevice || !Browser.isDevice)) {\n            e.preventDefault();\n        }\n    }\n    onBlurHandler(e) {\n        const inputValue = this.inputElement && this.inputElement.value === '' ?\n            null : this.inputElement && this.inputElement.value;\n        if (!isNullOrUndefined(this.listData) && !isNullOrUndefined(inputValue) && inputValue !== this.text) {\n            this.customValue(e);\n        }\n        super.onBlurHandler(e);\n    }\n    targetElement() {\n        return this.inputElement;\n    }\n    // eslint-disable-next-line @typescript-eslint/no-unused-vars\n    setOldText(text) {\n        Input.setValue(this.text, this.inputElement, this.floatLabelType, this.showClearButton);\n        this.customValue();\n        this.removeSelection();\n    }\n    // eslint-disable-next-line @typescript-eslint/no-unused-vars\n    setOldValue(value) {\n        if (this.allowCustom) {\n            this.valueMuteChange(this.value);\n        }\n        else {\n            this.valueMuteChange(null);\n        }\n        this.removeSelection();\n        this.setHiddenValue();\n    }\n    valueMuteChange(value) {\n        const inputValue = isNullOrUndefined(value) ? null : value.toString();\n        Input.setValue(inputValue, this.inputElement, this.floatLabelType, this.showClearButton);\n        this.setProperties({ value: value, text: value, index: null }, true);\n        this.activeIndex = this.index;\n        const fields = this.fields;\n        const dataItem = {};\n        dataItem[fields.text] = isNullOrUndefined(value) ? null : value.toString();\n        dataItem[fields.value] = isNullOrUndefined(value) ? null : value.toString();\n        this.itemData = dataItem;\n        this.item = null;\n        if (this.previousValue !== this.value) {\n            this.detachChangeEvent(null);\n        }\n    }\n    updateValues() {\n        if (!isNullOrUndefined(this.value)) {\n            const li = this.getElementByValue(this.value);\n            if (li) {\n                this.setSelection(li, null);\n            }\n            else if (this.allowCustom) {\n                this.valueMuteChange(this.value);\n            }\n            else {\n                this.valueMuteChange(null);\n            }\n        }\n        else if (this.text && isNullOrUndefined(this.value)) {\n            const li = this.getElementByText(this.text);\n            if (li) {\n                this.setSelection(li, null);\n            }\n            else {\n                Input.setValue(this.text, this.inputElement, this.floatLabelType, this.showClearButton);\n                this.customValue();\n            }\n        }\n        else {\n            this.setSelection(this.liCollections[this.activeIndex], null);\n        }\n        this.setHiddenValue();\n        Input.setValue(this.text, this.inputElement, this.floatLabelType, this.showClearButton);\n    }\n    updateIconState() {\n        if (this.showClearButton) {\n            if (this.inputElement && this.inputElement.value !== '' && !this.readonly) {\n                removeClass([this.inputWrapper.clearButton], dropDownListClasses.clearIconHide);\n            }\n            else {\n                addClass([this.inputWrapper.clearButton], dropDownListClasses.clearIconHide);\n            }\n        }\n    }\n    getAriaAttributes() {\n        const ariaAttributes = {\n            'aria-owns': this.element.id + '_options',\n            'role': 'combobox',\n            'aria-autocomplete': 'both',\n            'aria-labelledby': this.hiddenElement.id,\n            'aria-hasPopup': 'true',\n            'aria-expanded': 'false',\n            'aria-readonly': this.readonly.toString(),\n            'autocomplete': 'off',\n            'autocorrect': 'off',\n            'autocapitalize': 'off',\n            'spellcheck': 'false'\n        };\n        return ariaAttributes;\n    }\n    searchLists(e) {\n        this.isTyped = true;\n        if (this.isFiltering()) {\n            super.searchLists(e);\n            if (this.ulElement && this.filterInput.value.trim() === '') {\n                this.setHoverList(this.ulElement.querySelector('.' + dropDownListClasses.li));\n            }\n        }\n        else {\n            if (this.ulElement && this.inputElement.value === '' && this.preventAutoFill) {\n                this.setHoverList(this.ulElement.querySelector('.' + dropDownListClasses.li));\n            }\n            this.incrementalSearch(e);\n        }\n    }\n    getNgDirective() {\n        return 'EJS-COMBOBOX';\n    }\n    setSearchBox() {\n        this.filterInput = this.inputElement;\n        return (this.isFiltering() ? this.inputWrapper : inputObject$1);\n    }\n    // eslint-disable-next-line @typescript-eslint/no-unused-vars\n    onActionComplete(ulElement, list, e, isUpdated) {\n        super.onActionComplete(ulElement, list, e);\n        if (this.isSelectCustom) {\n            this.removeSelection();\n        }\n        if (!this.preventAutoFill && this.getModuleName() === 'combobox' && this.isTyped) {\n            this.inlineSearch();\n        }\n    }\n    getFocusElement() {\n        const dataItem = this.isSelectCustom ? { text: '' } : this.getItemData();\n        const selected = this.list.querySelector('.' + dropDownListClasses.selected);\n        const isSelected = dataItem.text === this.inputElement.value && !isNullOrUndefined(selected);\n        if (isSelected) {\n            return selected;\n        }\n        if ((Browser.isDevice && !this.isDropDownClick || !Browser.isDevice) &&\n            !isNullOrUndefined(this.liCollections) && this.liCollections.length > 0) {\n            const inputValue = this.inputElement.value;\n            const activeItem = Search(inputValue, this.liCollections, 'StartsWith', true);\n            const activeElement = activeItem.item;\n            if (!isNullOrUndefined(activeElement)) {\n                const count = this.getIndexByValue(activeElement.getAttribute('data-value')) - 1;\n                const height = parseInt(getComputedStyle(this.liCollections[0], null).getPropertyValue('height'), 10);\n                if (!isNaN(height) && this.getModuleName() !== 'autocomplete') {\n                    this.removeFocus();\n                    const fixedHead = this.fields.groupBy ? this.liCollections[0].offsetHeight : 0;\n                    this.list.scrollTop = count * height + fixedHead;\n                    addClass([activeElement], dropDownListClasses.focus);\n                }\n            }\n            else {\n                if (this.isSelectCustom && this.inputElement.value.trim() !== '') {\n                    this.removeFocus();\n                    this.list.scrollTop = 0;\n                }\n            }\n            return activeElement;\n        }\n        else {\n            return null;\n        }\n    }\n    setValue(e) {\n        if (e && e.type === 'keydown' && e.action === 'enter') {\n            this.removeFillSelection();\n        }\n        if (this.autofill && this.getModuleName() === 'combobox' && e && e.type === 'keydown' && e.action !== 'enter') {\n            this.preventAutoFill = false;\n            this.inlineSearch(e);\n            return false;\n        }\n        else {\n            return super.setValue(e);\n        }\n    }\n    checkCustomValue() {\n        this.itemData = this.getDataByValue(this.value);\n        const dataItem = this.getItemData();\n        if (!(this.allowCustom && isNullOrUndefined(dataItem.value) && isNullOrUndefined(dataItem.text))) {\n            this.setProperties({ 'value': dataItem.value, 'text': dataItem.text }, !this.allowCustom);\n        }\n    }\n    /**\n     * Shows the spinner loader.\n     *\n     * @returns {void}\n     * @deprecated\n     */\n    showSpinner() {\n        if (isNullOrUndefined(this.spinnerElement)) {\n            this.spinnerElement = (this.getModuleName() === 'autocomplete') ? (this.inputWrapper.buttons[0] ||\n                this.inputWrapper.clearButton ||\n                Input.appendSpan('e-input-group-icon ' + SPINNER_CLASS, this.inputWrapper.container, this.createElement)) :\n                (this.inputWrapper.buttons[0] || this.inputWrapper.clearButton);\n            addClass([this.spinnerElement], dropDownListClasses.disableIcon);\n            createSpinner({\n                target: this.spinnerElement,\n                width: Browser.isDevice ? '16px' : '14px'\n            }, this.createElement);\n            showSpinner(this.spinnerElement);\n        }\n    }\n    /**\n     * Hides the spinner loader.\n     *\n     * @returns {void}\n     * @deprecated\n     */\n    hideSpinner() {\n        if (!isNullOrUndefined(this.spinnerElement)) {\n            hideSpinner(this.spinnerElement);\n            removeClass([this.spinnerElement], dropDownListClasses.disableIcon);\n            if (this.spinnerElement.classList.contains(SPINNER_CLASS)) {\n                detach(this.spinnerElement);\n            }\n            else {\n                this.spinnerElement.innerHTML = '';\n            }\n            this.spinnerElement = null;\n        }\n    }\n    setAutoFill(activeElement, isHover) {\n        if (!isHover) {\n            this.setHoverList(activeElement);\n        }\n        if (this.autofill && !this.preventAutoFill) {\n            const currentValue = this.getTextByValue(activeElement.getAttribute('data-value')).toString();\n            const currentFillValue = this.getFormattedValue(activeElement.getAttribute('data-value'));\n            if (this.getModuleName() === 'combobox') {\n                if (!this.isSelected && this.previousValue !== currentFillValue) {\n                    this.updateSelectedItem(activeElement, null);\n                    this.isSelected = true;\n                    this.previousValue = this.getFormattedValue(activeElement.getAttribute('data-value'));\n                }\n                else {\n                    this.updateSelectedItem(activeElement, null, true);\n                }\n            }\n            if (!this.isAndroidAutoFill(currentValue)) {\n                this.setAutoFillSelection(currentValue);\n            }\n        }\n    }\n    isAndroidAutoFill(value) {\n        if (Browser.isAndroid) {\n            const currentPoints = this.getSelectionPoints();\n            const prevEnd = this.prevSelectPoints.end;\n            const curEnd = currentPoints.end;\n            const prevStart = this.prevSelectPoints.start;\n            const curStart = currentPoints.start;\n            if (prevEnd !== 0 && ((prevEnd === value.length && prevStart === value.length) ||\n                (prevStart > curStart && prevEnd > curEnd) || (prevEnd === curEnd && prevStart === curStart))) {\n                return true;\n            }\n            else {\n                return false;\n            }\n        }\n        else {\n            return false;\n        }\n    }\n    clearAll(e, property) {\n        if (isNullOrUndefined(property) || (!isNullOrUndefined(property) && isNullOrUndefined(property.dataSource))) {\n            super.clearAll(e);\n        }\n        if (this.isFiltering() && !isNullOrUndefined(e) && e.target === this.inputWrapper.clearButton) {\n            this.searchLists(e);\n        }\n    }\n    isSelectFocusItem(element) {\n        return !isNullOrUndefined(element);\n    }\n    inlineSearch(e) {\n        const isKeyNavigate = (e && (e.action === 'down' || e.action === 'up' ||\n            e.action === 'home' || e.action === 'end' || e.action === 'pageUp' || e.action === 'pageDown'));\n        const activeElement = isKeyNavigate ? this.liCollections[this.activeIndex] : this.getFocusElement();\n        if (!isNullOrUndefined(activeElement)) {\n            if (!isKeyNavigate) {\n                const value = this.getFormattedValue(activeElement.getAttribute('data-value'));\n                this.activeIndex = this.getIndexByValue(value);\n                this.activeIndex = !isNullOrUndefined(this.activeIndex) ? this.activeIndex : null;\n            }\n            this.preventAutoFill = this.inputElement.value === '' ? false : this.preventAutoFill;\n            this.setAutoFill(activeElement, isKeyNavigate);\n        }\n        else if (this.inputElement.value === '') {\n            this.activeIndex = null;\n            this.list.scrollTop = 0;\n            const focusItem = this.list.querySelector('.' + dropDownListClasses.li);\n            this.setHoverList(focusItem);\n        }\n        else {\n            this.activeIndex = null;\n            this.removeSelection();\n            if (this.liCollections && this.liCollections.length < 0) {\n                this.removeFocus();\n            }\n        }\n    }\n    incrementalSearch(e) {\n        this.showPopup();\n        if (!isNullOrUndefined(this.listData)) {\n            this.inlineSearch(e);\n            e.preventDefault();\n        }\n    }\n    setAutoFillSelection(currentValue) {\n        const selection = this.getSelectionPoints();\n        const value = this.inputElement.value.substr(0, selection.start);\n        if (value && (value.toLowerCase() === currentValue.substr(0, selection.start).toLowerCase())) {\n            const inputValue = value + currentValue.substr(value.length, currentValue.length);\n            Input.setValue(inputValue, this.inputElement, this.floatLabelType, this.showClearButton);\n            this.inputElement.setSelectionRange(selection.start, this.inputElement.value.length);\n        }\n        else {\n            Input.setValue(currentValue, this.inputElement, this.floatLabelType, this.showClearButton);\n            this.inputElement.setSelectionRange(0, this.inputElement.value.length);\n        }\n    }\n    getValueByText(text) {\n        return super.getValueByText(text, true, this.ignoreAccent);\n    }\n    unWireEvent() {\n        if (this.getModuleName() === 'combobox') {\n            EventHandler.remove(this.inputWrapper.buttons[0], 'mousedown', this.preventBlur);\n            EventHandler.remove(this.inputWrapper.container, 'blur', this.onBlurHandler);\n        }\n        if (!isNullOrUndefined(this.inputWrapper.buttons[0])) {\n            EventHandler.remove(this.inputWrapper.buttons[0], 'mousedown', this.dropDownClick);\n        }\n        if (this.inputElement) {\n            EventHandler.remove(this.inputElement, 'focus', this.targetFocus);\n            if (!this.readonly) {\n                EventHandler.remove(this.inputElement, 'input', this.onInput);\n                EventHandler.remove(this.inputElement, 'keyup', this.onFilterUp);\n                EventHandler.remove(this.inputElement, 'keydown', this.onFilterDown);\n                EventHandler.remove(this.inputElement, 'paste', this.pasteHandler);\n            }\n        }\n        this.unBindCommonEvent();\n    }\n    setSelection(li, e) {\n        super.setSelection(li, e);\n        if (!isNullOrUndefined(li) && !this.autofill && !this.isDropDownClick) {\n            this.removeFocus();\n        }\n    }\n    selectCurrentItem(e) {\n        let li;\n        if (this.isPopupOpen) {\n            if (this.isSelected) {\n                li = this.list.querySelector('.' + dropDownListClasses.selected);\n            }\n            else {\n                li = this.list.querySelector('.' + dropDownListClasses.focus);\n            }\n            if (li) {\n                this.setSelection(li, e);\n                this.isTyped = false;\n            }\n            if (this.isSelected) {\n                this.isSelectCustom = false;\n                this.onChangeEvent(e);\n            }\n        }\n        if (e.action === 'enter' && this.inputElement.value.trim() === '') {\n            this.clearAll(e);\n        }\n        else if (this.isTyped && !this.isSelected && isNullOrUndefined(li)) {\n            this.customValue(e);\n        }\n        this.hidePopup();\n    }\n    setHoverList(li) {\n        this.removeSelection();\n        if (this.isValidLI(li) && !li.classList.contains(dropDownListClasses.selected)) {\n            this.removeFocus();\n            li.classList.add(dropDownListClasses.focus);\n        }\n    }\n    targetFocus(e) {\n        if (Browser.isDevice && !this.allowFiltering) {\n            this.preventFocus = false;\n        }\n        this.onFocus(e);\n    }\n    dropDownClick(e) {\n        e.preventDefault();\n        if (Browser.isDevice && !this.isFiltering()) {\n            this.preventFocus = true;\n        }\n        super.dropDownClick(e);\n    }\n    customValue(e) {\n        const value = this.getValueByText(this.inputElement.value);\n        if (!this.allowCustom && this.inputElement.value !== '') {\n            const previousValue = this.previousValue;\n            const currentValue = this.value;\n            this.setProperties({ value: value });\n            if (isNullOrUndefined(this.value)) {\n                Input.setValue('', this.inputElement, this.floatLabelType, this.showClearButton);\n            }\n            if (this.autofill && previousValue === this.value && currentValue !== this.value) {\n                this.onChangeEvent(null);\n            }\n        }\n        else if (this.inputElement.value.trim() !== '') {\n            const previousValue = this.value;\n            if (isNullOrUndefined(value)) {\n                const value = this.inputElement.value === '' ? null : this.inputElement.value;\n                // eslint-disable-next-line max-len\n                const eventArgs = { text: value, item: {} };\n                if (!this.initial) {\n                    this.trigger('customValueSpecifier', eventArgs, (eventArgs) => {\n                        this.updateCustomValueCallback(value, eventArgs, previousValue, e);\n                    });\n                }\n                else {\n                    this.updateCustomValueCallback(value, eventArgs, previousValue);\n                }\n            }\n            else {\n                this.isSelectCustom = false;\n                this.setProperties({ value: value });\n                if (previousValue !== this.value) {\n                    this.onChangeEvent(e);\n                }\n            }\n        }\n        else if (this.allowCustom) {\n            this.isSelectCustom = true;\n        }\n    }\n    updateCustomValueCallback(value, eventArgs, previousValue, e) {\n        const fields = this.fields;\n        const item = eventArgs.item;\n        let dataItem = {};\n        if (item && getValue(fields.text, item) && getValue(fields.value, item)) {\n            dataItem = item;\n        }\n        else {\n            setValue(fields.text, value, dataItem);\n            setValue(fields.value, value, dataItem);\n        }\n        this.itemData = dataItem;\n        const changeData = {\n            text: getValue(fields.text, this.itemData),\n            value: getValue(fields.value, this.itemData),\n            index: null\n        };\n        this.setProperties(changeData, true);\n        this.setSelection(null, null);\n        this.isSelectCustom = true;\n        if (previousValue !== this.value) {\n            this.onChangeEvent(e);\n        }\n    }\n    /**\n     * Dynamically change the value of properties.\n     *\n     * @param {ComboBoxModel} newProp - Returns the dynamic property value of the component.\n     * @param {ComboBoxModel} oldProp - Returns the previous property value of the component.\n     * @private\n     * @returns {void}\n     */\n    onPropertyChanged(newProp, oldProp) {\n        if (this.getModuleName() === 'combobox') {\n            this.checkData(newProp);\n            this.setUpdateInitial(['fields', 'query', 'dataSource'], newProp);\n        }\n        for (const prop of Object.keys(newProp)) {\n            switch (prop) {\n                case 'readonly':\n                    Input.setReadonly(this.readonly, this.inputElement);\n                    if (this.readonly) {\n                        EventHandler.remove(this.inputElement, 'input', this.onInput);\n                        EventHandler.remove(this.inputElement, 'keyup', this.onFilterUp);\n                        EventHandler.remove(this.inputElement, 'keydown', this.onFilterDown);\n                    }\n                    else {\n                        EventHandler.add(this.inputElement, 'input', this.onInput, this);\n                        EventHandler.add(this.inputElement, 'keyup', this.onFilterUp, this);\n                        EventHandler.add(this.inputElement, 'keydown', this.onFilterDown, this);\n                    }\n                    this.setReadOnly();\n                    break;\n                case 'allowFiltering':\n                    this.setSearchBox();\n                    if (this.isFiltering() && this.getModuleName() === 'combobox' && isNullOrUndefined(this.list)) {\n                        super.renderList();\n                    }\n                    break;\n                case 'allowCustom':\n                    break;\n                default: {\n                    // eslint-disable-next-line max-len\n                    const comboProps = this.getPropObject(prop, newProp, oldProp);\n                    super.onPropertyChanged(comboProps.newProperty, comboProps.oldProperty);\n                    if (this.isFiltering() && prop === 'dataSource' && isNullOrUndefined(this.list) && this.itemTemplate &&\n                        this.getModuleName() === 'combobox') {\n                        super.renderList();\n                    }\n                    break;\n                }\n            }\n        }\n    }\n    /**\n     * To initialize the control rendering.\n     *\n     * @private\n     * @returns {void}\n     */\n    render() {\n        super.render();\n        this.setSearchBox();\n        if (this.isFiltering() && this.getModuleName() === 'combobox' && isNullOrUndefined(this.list)) {\n            super.renderList();\n        }\n        this.renderComplete();\n    }\n    /**\n     * Return the module name of this component.\n     *\n     * @private\n     * @returns {string} Return the module name of this component.\n     */\n    getModuleName() {\n        return 'combobox';\n    }\n    /**\n     * Adds a new item to the combobox popup list. By default, new item appends to the list as the last item,\n     * but you can insert based on the index parameter.\n     *\n     * @param  { Object[] } items - Specifies an array of JSON data or a JSON data.\n     * @param { number } itemIndex - Specifies the index to place the newly added item in the popup list.\n     * @returns {void}\n     * @deprecated\n     */\n    addItem(items, itemIndex) {\n        super.addItem(items, itemIndex);\n    }\n    /**\n     * To filter the data from given data source by using query\n     *\n     * @param  {Object[] | DataManager } dataSource - Set the data source to filter.\n     * @param  {Query} query - Specify the query to filter the data.\n     * @param  {FieldSettingsModel} fields - Specify the fields to map the column in the data table.\n     * @returns {void}\n     * @deprecated\n     */\n    filter(dataSource, query, fields) {\n        super.filter(dataSource, query, fields);\n    }\n    /**\n     * Opens the popup that displays the list of items.\n     *\n     * @returns {void}\n     * @deprecated\n     */\n    showPopup() {\n        super.showPopup();\n    }\n    /* eslint-disable valid-jsdoc, jsdoc/require-param */\n    /**\n     * Hides the popup if it is in open state.\n     *\n     * @returns {void}\n     * @deprecated\n     */\n    hidePopup(e) {\n        /* eslint-enable valid-jsdoc, jsdoc/require-param */\n        const inputValue = this.inputElement && this.inputElement.value === '' ? null\n            : this.inputElement && this.inputElement.value;\n        if (!isNullOrUndefined(this.listData)) {\n            const isEscape = this.isEscapeKey;\n            if (this.isEscapeKey) {\n                Input.setValue(this.typedString, this.inputElement, this.floatLabelType, this.showClearButton);\n                this.isEscapeKey = false;\n            }\n            if (this.autofill) {\n                this.removeFillSelection();\n            }\n            const dataItem = this.isSelectCustom ? { text: '' } : this.getItemData();\n            const selected = this.list.querySelector('.' + dropDownListClasses.selected);\n            if (this.inputElement && dataItem.text === this.inputElement.value && !isNullOrUndefined(selected)) {\n                if (this.isSelected) {\n                    this.onChangeEvent(e);\n                    this.isSelectCustom = false;\n                }\n                super.hidePopup(e);\n                return;\n            }\n            if (this.getModuleName() === 'combobox' && this.inputElement.value.trim() !== '') {\n                const searchItem = Search(this.inputElement.value, this.liCollections, 'Equal', true);\n                this.selectedLI = searchItem.item;\n                if (isNullOrUndefined(searchItem.index)) {\n                    searchItem.index = Search(this.inputElement.value, this.liCollections, 'StartsWith', true).index;\n                }\n                this.activeIndex = searchItem.index;\n                if (!isNullOrUndefined(this.selectedLI)) {\n                    this.updateSelectedItem(this.selectedLI, null, true);\n                }\n                else if (isEscape) {\n                    this.isSelectCustom = true;\n                    this.removeSelection();\n                }\n            }\n            if (!this.isEscapeKey && this.isTyped && !this.isInteracted) {\n                this.customValue(e);\n            }\n        }\n        if (isNullOrUndefined(this.listData) && this.allowCustom && !isNullOrUndefined(inputValue) && inputValue !== this.value) {\n            this.customValue();\n        }\n        super.hidePopup(e);\n    }\n    /**\n     * Sets the focus to the component for interaction.\n     *\n     * @returns {void}\n     */\n    focusIn() {\n        if (!this.enabled) {\n            return;\n        }\n        if (Browser.isDevice && !this.isFiltering()) {\n            this.preventFocus = true;\n        }\n        super.focusIn();\n    }\n    /**\n     * Allows you to clear the selected values from the component.\n     *\n     * @returns {void}\n     * @deprecated\n     */\n    clear() {\n        this.value = null;\n    }\n    /* eslint-disable valid-jsdoc, jsdoc/require-param */\n    /**\n     * Moves the focus from the component if the component is already focused.\n     *\n     * @returns {void}\n     * @deprecated\n     */\n    focusOut(e) {\n        /* eslint-enable valid-jsdoc, jsdoc/require-param */\n        super.focusOut(e);\n    }\n    /* eslint-disable valid-jsdoc, jsdoc/require-returns-description */\n    /**\n     * Gets all the list items bound on this component.\n     *\n     * @returns {Element[]}\n     * @deprecated\n     */\n    getItems() {\n        return super.getItems();\n    }\n    /**\n     * Gets the data Object that matches the given value.\n     *\n     * @param { string | number } value - Specifies the value of the list item.\n     * @returns {Object}\n     * @deprecated\n     */\n    getDataByValue(value) {\n        return super.getDataByValue(value);\n    }\n    /* eslint-enable valid-jsdoc, jsdoc/require-returns-description */\n    renderHightSearch() {\n        // update high light search\n    }\n};\n__decorate$3([\n    Property(false)\n], ComboBox.prototype, \"autofill\", void 0);\n__decorate$3([\n    Property(true)\n], ComboBox.prototype, \"allowCustom\", void 0);\n__decorate$3([\n    Property({})\n], ComboBox.prototype, \"htmlAttributes\", void 0);\n__decorate$3([\n    Property(false)\n], ComboBox.prototype, \"allowFiltering\", void 0);\n__decorate$3([\n    Property(null)\n], ComboBox.prototype, \"query\", void 0);\n__decorate$3([\n    Property(null)\n], ComboBox.prototype, \"index\", void 0);\n__decorate$3([\n    Property(true)\n], ComboBox.prototype, \"showClearButton\", void 0);\n__decorate$3([\n    Property(false)\n], ComboBox.prototype, \"enableRtl\", void 0);\n__decorate$3([\n    Event()\n], ComboBox.prototype, \"customValueSpecifier\", void 0);\n__decorate$3([\n    Event()\n], ComboBox.prototype, \"filtering\", void 0);\n__decorate$3([\n    Property(null)\n], ComboBox.prototype, \"valueTemplate\", void 0);\n__decorate$3([\n    Property('Never')\n], ComboBox.prototype, \"floatLabelType\", void 0);\n__decorate$3([\n    Property(null)\n], ComboBox.prototype, \"filterBarPlaceholder\", void 0);\n__decorate$3([\n    Property(null)\n], ComboBox.prototype, \"cssClass\", void 0);\n__decorate$3([\n    Property(null)\n], ComboBox.prototype, \"headerTemplate\", void 0);\n__decorate$3([\n    Property(null)\n], ComboBox.prototype, \"footerTemplate\", void 0);\n__decorate$3([\n    Property(null)\n], ComboBox.prototype, \"placeholder\", void 0);\n__decorate$3([\n    Property('100%')\n], ComboBox.prototype, \"width\", void 0);\n__decorate$3([\n    Property('300px')\n], ComboBox.prototype, \"popupHeight\", void 0);\n__decorate$3([\n    Property('100%')\n], ComboBox.prototype, \"popupWidth\", void 0);\n__decorate$3([\n    Property(false)\n], ComboBox.prototype, \"readonly\", void 0);\n__decorate$3([\n    Property(null)\n], ComboBox.prototype, \"text\", void 0);\n__decorate$3([\n    Property(null)\n], ComboBox.prototype, \"value\", void 0);\nComboBox = __decorate$3([\n    NotifyPropertyChanges\n], ComboBox);\n\n/**\n * export all modules from current location\n */\n\nvar __decorate$4 = (undefined && undefined.__decorate) || function (decorators, target, key, desc) {\n    var c = arguments.length, r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d;\n    if (typeof Reflect === \"object\" && typeof Reflect.decorate === \"function\") r = Reflect.decorate(decorators, target, key, desc);\n    else for (var i = decorators.length - 1; i >= 0; i--) if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;\n    return c > 3 && r && Object.defineProperty(target, key, r), r;\n};\n// eslint-disable-next-line @typescript-eslint/triple-slash-reference\n/// <reference path='../combo-box/combo-box-model.d.ts'/>\ndropDownListClasses.root = 'e-autocomplete';\ndropDownListClasses.icon = 'e-input-group-icon e-ddl-icon e-search-icon';\n/**\n * The AutoComplete component provides the matched suggestion list when type into the input,\n * from which the user can select one.\n * ```html\n * <input id=\"list\" type=\"text\"/>\n * ```\n * ```typescript\n *   let atcObj:AutoComplete = new AutoComplete();\n *   atcObj.appendTo(\"#list\");\n * ```\n */\nlet AutoComplete = class AutoComplete extends ComboBox {\n    /**\n     * * Constructor for creating the widget\n     *\n     * @param {AutoCompleteModel} options - Specifies the AutoComplete model.\n     * @param {string | HTMLElement} element - Specifies the element to render as component.\n     * @private\n     */\n    constructor(options, element) {\n        super(options, element);\n        this.isFiltered = false;\n        this.searchList = false;\n    }\n    /**\n     * Initialize the event handler\n     *\n     * @private\n     * @returns {void}\n     */\n    preRender() {\n        super.preRender();\n    }\n    getLocaleName() {\n        return 'auto-complete';\n    }\n    getNgDirective() {\n        return 'EJS-AUTOCOMPLETE';\n    }\n    getQuery(query) {\n        const filterQuery = query ? query.clone() : this.query ? this.query.clone() : new Query();\n        const filterType = (this.queryString === '' && !isNullOrUndefined(this.value)) ? 'equal' : this.filterType;\n        const queryString = (this.queryString === '' && !isNullOrUndefined(this.value)) ? this.value : this.queryString;\n        if (this.isFiltered) {\n            return filterQuery;\n        }\n        if (this.queryString !== null && this.queryString !== '') {\n            const dataType = this.typeOfData(this.dataSource).typeof;\n            if (!(this.dataSource instanceof DataManager) && dataType === 'string' || dataType === 'number') {\n                filterQuery.where('', filterType, queryString, this.ignoreCase, this.ignoreAccent);\n            }\n            else {\n                const mapping = !isNullOrUndefined(this.fields.value) ? this.fields.value : '';\n                filterQuery.where(mapping, filterType, queryString, this.ignoreCase, this.ignoreAccent);\n            }\n        }\n        if (!isNullOrUndefined(this.suggestionCount)) {\n            // Since defualt value of suggestioncount is 20, checked the condition\n            if (this.suggestionCount !== 20) {\n                for (let queryElements = 0; queryElements < filterQuery.queries.length; queryElements++) {\n                    if (filterQuery.queries[queryElements].fn === 'onTake') {\n                        filterQuery.queries.splice(queryElements, 1);\n                    }\n                }\n            }\n            filterQuery.take(this.suggestionCount);\n        }\n        return filterQuery;\n    }\n    searchLists(e) {\n        this.isTyped = true;\n        this.isDataFetched = this.isSelectCustom = false;\n        if (isNullOrUndefined(this.list)) {\n            super.renderList(true);\n        }\n        this.queryString = this.filterInput.value;\n        if (e.type !== 'mousedown' && (e.keyCode === 40 || e.keyCode === 38)) {\n            this.queryString = this.queryString === '' ? null : this.queryString;\n            this.beforePopupOpen = true;\n            this.resetList(this.dataSource, this.fields);\n            return;\n        }\n        this.isSelected = false;\n        this.activeIndex = null;\n        const eventArgs = {\n            preventDefaultAction: false,\n            text: this.filterInput.value,\n            updateData: (dataSource, query, fields) => {\n                if (eventArgs.cancel) {\n                    return;\n                }\n                this.isFiltered = true;\n                this.filterAction(dataSource, query, fields);\n            },\n            cancel: false\n        };\n        this.trigger('filtering', eventArgs, (eventArgs) => {\n            if (!eventArgs.cancel && !this.isFiltered && !eventArgs.preventDefaultAction) {\n                this.searchList = true;\n                this.filterAction(this.dataSource, null, this.fields);\n            }\n        });\n    }\n    /**\n     * To filter the data from given data source by using query\n     *\n     * @param  {Object[] | DataManager } dataSource - Set the data source to filter.\n     * @param  {Query} query - Specify the query to filter the data.\n     * @param  {FieldSettingsModel} fields - Specify the fields to map the column in the data table.\n     * @returns {void}\n     * @deprecated\n     */\n    filter(dataSource, query, fields) {\n        this.isFiltered = true;\n        this.filterAction(dataSource, query, fields);\n    }\n    filterAction(dataSource, query, fields) {\n        this.beforePopupOpen = true;\n        if (this.queryString !== '' && (this.queryString.length >= this.minLength)) {\n            this.resetList(dataSource, fields, query);\n        }\n        else {\n            this.hidePopup();\n            this.beforePopupOpen = false;\n        }\n        this.renderReactTemplates();\n    }\n    clearAll(e, property) {\n        if (isNullOrUndefined(property) || (!isNullOrUndefined(property) && isNullOrUndefined(property.dataSource))) {\n            super.clearAll(e);\n        }\n        if (this.beforePopupOpen) {\n            this.hidePopup();\n        }\n    }\n    // eslint-disable-next-line @typescript-eslint/no-unused-vars\n    onActionComplete(ulElement, list, e, isUpdated) {\n        this.fixedHeaderElement = null;\n        super.onActionComplete(ulElement, list, e);\n        const item = this.list.querySelector('.' + dropDownListClasses.li);\n        if (!isNullOrUndefined(item)) {\n            removeClass([item], dropDownListClasses.focus);\n        }\n        this.postBackAction();\n    }\n    postBackAction() {\n        if (this.autofill && !isNullOrUndefined(this.liCollections[0]) && this.searchList) {\n            const items = [this.liCollections[0]];\n            const searchItem = Search(this.inputElement.value, items, 'StartsWith', this.ignoreCase);\n            this.searchList = false;\n            if (!isNullOrUndefined(searchItem.item)) {\n                super.setAutoFill(this.liCollections[0], true);\n            }\n        }\n    }\n    setSelection(li, e) {\n        if (!this.isValidLI(li)) {\n            return;\n        }\n        if (!isNullOrUndefined(e) && e.type === 'keydown' && e.action !== 'enter'\n            && e.action !== 'tab' && this.isValidLI(li)) {\n            const value = this.getFormattedValue(li.getAttribute('data-value'));\n            this.activeIndex = this.getIndexByValue(value);\n            this.setHoverList(li);\n            this.selectedLI = li;\n            this.setScrollPosition(e);\n            if (this.autofill && this.isPopupOpen) {\n                this.preventAutoFill = false;\n                super.setAutoFill(li);\n            }\n            attributes(this.inputElement, { 'aria-activedescendant': this.selectedLI ? this.selectedLI.id : null });\n        }\n        else {\n            super.setSelection(li, e);\n        }\n    }\n    listOption(dataSource, fieldsSettings) {\n        const fields = super.listOption(dataSource, fieldsSettings);\n        if (isNullOrUndefined(fields.itemCreated)) {\n            fields.itemCreated = (e) => {\n                if (this.highlight) {\n                    if (this.element.tagName === this.getNgDirective() && this.itemTemplate) {\n                        setTimeout(() => {\n                            highlightSearch(e.item, this.queryString, this.ignoreCase, this.filterType);\n                        }, 0);\n                    }\n                    else {\n                        highlightSearch(e.item, this.queryString, this.ignoreCase, this.filterType);\n                    }\n                }\n            };\n        }\n        else {\n            const itemCreated = fields.itemCreated;\n            fields.itemCreated = (e) => {\n                if (this.highlight) {\n                    highlightSearch(e.item, this.queryString, this.ignoreCase, this.filterType);\n                }\n                itemCreated.apply(this, [e]);\n            };\n        }\n        return fields;\n    }\n    isFiltering() {\n        return true;\n    }\n    renderPopup() {\n        this.list.scrollTop = 0;\n        super.renderPopup();\n    }\n    isEditTextBox() {\n        return true && this.inputElement.value.trim() !== '';\n    }\n    isPopupButton() {\n        return this.showPopupButton;\n    }\n    // eslint-disable-next-line @typescript-eslint/no-unused-vars\n    isSelectFocusItem(element) {\n        return false;\n    }\n    /**\n     * Search the entered text and show it in the suggestion list if available.\n     *\n     * @returns {void}\n     * @deprecated\n     */\n    showPopup() {\n        if (!this.enabled) {\n            return;\n        }\n        if (this.beforePopupOpen) {\n            this.refreshPopup();\n            return;\n        }\n        this.beforePopupOpen = true;\n        this.preventAutoFill = true;\n        if (isNullOrUndefined(this.list)) {\n            this.renderList();\n        }\n        else {\n            this.resetList(this.dataSource, this.fields);\n        }\n    }\n    /**\n     * Hides the popup if it is in open state.\n     *\n     * @returns {void}\n     */\n    hidePopup() {\n        super.hidePopup();\n        this.activeIndex = -1;\n    }\n    /**\n     * Dynamically change the value of properties.\n     *\n     * @param {AutoCompleteModel} newProp - Returns the dynamic property value of the component.\n     * @param {AutoCompleteModel} oldProp - Returns the previous property value of the component.\n     * @private\n     * @returns {void}\n     */\n    onPropertyChanged(newProp, oldProp) {\n        if (this.getModuleName() === 'autocomplete') {\n            this.setUpdateInitial(['fields', 'query', 'dataSource'], newProp);\n        }\n        for (const prop of Object.keys(newProp)) {\n            switch (prop) {\n                case 'showPopupButton':\n                    if (this.showPopupButton) {\n                        const button = Input.appendSpan(dropDownListClasses.icon, this.inputWrapper.container, this.createElement);\n                        this.inputWrapper.buttons[0] = button;\n                        if (this.inputWrapper && this.inputWrapper.buttons && this.inputWrapper.buttons[0]) {\n                            EventHandler.add(this.inputWrapper.buttons[0], 'click', this.dropDownClick, this);\n                        }\n                    }\n                    else {\n                        detach(this.inputWrapper.buttons[0]);\n                        this.inputWrapper.buttons[0] = null;\n                    }\n                    break;\n                default: {\n                    // eslint-disable-next-line max-len\n                    const atcProps = this.getPropObject(prop, newProp, oldProp);\n                    super.onPropertyChanged(atcProps.newProperty, atcProps.oldProperty);\n                    break;\n                }\n            }\n        }\n    }\n    renderHightSearch() {\n        if (this.highlight) {\n            for (let i = 0; i < this.liCollections.length; i++) {\n                const isHighlight = this.ulElement.querySelector('.e-active');\n                if (!isHighlight) {\n                    revertHighlightSearch(this.liCollections[i]);\n                    highlightSearch(this.liCollections[i], this.queryString, this.ignoreCase, this.filterType);\n                }\n            }\n        }\n    }\n    /**\n     * Return the module name of this component.\n     *\n     * @private\n     * @returns {string} Return the module name of this component.\n     */\n    getModuleName() {\n        return 'autocomplete';\n    }\n    /**\n     * To initialize the control rendering\n     *\n     * @private\n     * @returns {void}\n     */\n    render() {\n        super.render();\n    }\n};\n__decorate$4([\n    Complex({ value: null, iconCss: null, groupBy: null }, FieldSettings)\n], AutoComplete.prototype, \"fields\", void 0);\n__decorate$4([\n    Property(true)\n], AutoComplete.prototype, \"ignoreCase\", void 0);\n__decorate$4([\n    Property(false)\n], AutoComplete.prototype, \"showPopupButton\", void 0);\n__decorate$4([\n    Property(false)\n], AutoComplete.prototype, \"highlight\", void 0);\n__decorate$4([\n    Property(20)\n], AutoComplete.prototype, \"suggestionCount\", void 0);\n__decorate$4([\n    Property({})\n], AutoComplete.prototype, \"htmlAttributes\", void 0);\n__decorate$4([\n    Property(null)\n], AutoComplete.prototype, \"query\", void 0);\n__decorate$4([\n    Property(1)\n], AutoComplete.prototype, \"minLength\", void 0);\n__decorate$4([\n    Property('Contains')\n], AutoComplete.prototype, \"filterType\", void 0);\n__decorate$4([\n    Event()\n], AutoComplete.prototype, \"filtering\", void 0);\n__decorate$4([\n    Property(null)\n], AutoComplete.prototype, \"index\", void 0);\n__decorate$4([\n    Property('Never')\n], AutoComplete.prototype, \"floatLabelType\", void 0);\n__decorate$4([\n    Property(null)\n], AutoComplete.prototype, \"valueTemplate\", void 0);\n__decorate$4([\n    Property(null)\n], AutoComplete.prototype, \"filterBarPlaceholder\", void 0);\n__decorate$4([\n    Property(false)\n], AutoComplete.prototype, \"allowFiltering\", void 0);\n__decorate$4([\n    Property(null)\n], AutoComplete.prototype, \"text\", void 0);\nAutoComplete = __decorate$4([\n    NotifyPropertyChanges\n], AutoComplete);\n\n/**\n * export all modules from current location\n */\n\n/**\n * FloatLable Moduel\n * Specifies whether to display the floating label above the input element.\n */\nconst FLOATLINE = 'e-float-line';\nconst FLOATTEXT = 'e-float-text';\nconst LABELTOP = 'e-label-top';\nconst LABELBOTTOM = 'e-label-bottom';\n/* eslint-disable valid-jsdoc */\n/**\n * Function to create Float Label element.\n *\n * @param {HTMLDivElement} overAllWrapper - Overall wrapper of multiselect.\n * @param {HTMLElement} searchWrapper - Search wrapper of multiselect.\n * @param {HTMLElement} element - The given html element.\n * @param {HTMLInputElement} inputElement - Specify the input wrapper.\n * @param {number[] | string[] | boolean[]} value - Value of the MultiSelect.\n * @param {FloatLabelType} floatLabelType - Specify the FloatLabel Type.\n * @param {string} placeholder - Specify the PlaceHolder text.\n */\nfunction createFloatLabel(overAllWrapper, searchWrapper, element, inputElement, value, floatLabelType, placeholder) {\n    const floatLinelement = createElement('span', { className: FLOATLINE });\n    const floatLabelElement = createElement('label', { className: FLOATTEXT });\n    if (!isNullOrUndefined(element.id) && element.id !== '') {\n        floatLabelElement.id = 'label_' + element.id.replace(/ /g, '_');\n        attributes(element, { 'aria-labelledby': floatLabelElement.id });\n    }\n    if (!isNullOrUndefined(inputElement.placeholder) && inputElement.placeholder !== '') {\n        floatLabelElement.innerText = encodePlaceholder(inputElement.placeholder);\n        inputElement.removeAttribute('placeholder');\n    }\n    floatLabelElement.innerText = encodePlaceholder(placeholder);\n    searchWrapper.appendChild(floatLinelement);\n    searchWrapper.appendChild(floatLabelElement);\n    overAllWrapper.classList.add('e-float-input');\n    updateFloatLabelState(value, floatLabelElement);\n    if (floatLabelType === 'Always') {\n        if (floatLabelElement.classList.contains(LABELBOTTOM)) {\n            removeClass([floatLabelElement], LABELBOTTOM);\n        }\n        addClass([floatLabelElement], LABELTOP);\n    }\n}\n/**\n * Function to update status of the Float Label element.\n *\n * @param {string[] | number[] | boolean[]} value - Value of the MultiSelect.\n * @param {HTMLElement} label - Float label element.\n */\nfunction updateFloatLabelState(value, label) {\n    if (value && value.length > 0) {\n        addClass([label], LABELTOP);\n        removeClass([label], LABELBOTTOM);\n    }\n    else {\n        removeClass([label], LABELTOP);\n        addClass([label], LABELBOTTOM);\n    }\n}\n/**\n * Function to remove Float Label element.\n *\n * @param {HTMLDivElement} overAllWrapper - Overall wrapper of multiselect.\n * @param {HTMLDivElement} componentWrapper - Wrapper element of multiselect.\n * @param {HTMLElement} searchWrapper - Search wrapper of multiselect.\n * @param {HTMLInputElement} inputElement - Specify the input wrapper.\n * @param {number[] | string[] | boolean[]} value - Value of the MultiSelect.\n * @param {FloatLabelType} floatLabelType - Specify the FloatLabel Type.\n * @param {string} placeholder - Specify the PlaceHolder text.\n */\nfunction removeFloating(overAllWrapper, componentWrapper, searchWrapper, inputElement, value, floatLabelType, placeholder) {\n    const placeholderElement = componentWrapper.querySelector('.' + FLOATTEXT);\n    const floatLine = componentWrapper.querySelector('.' + FLOATLINE);\n    let placeholderText;\n    if (!isNullOrUndefined(placeholderElement)) {\n        placeholderText = placeholderElement.innerText;\n        detach(searchWrapper.querySelector('.' + FLOATTEXT));\n        setPlaceHolder(value, inputElement, placeholderText);\n        if (!isNullOrUndefined(floatLine)) {\n            detach(searchWrapper.querySelector('.' + FLOATLINE));\n        }\n    }\n    else {\n        placeholderText = (placeholder !== null) ? placeholder : '';\n        setPlaceHolder(value, inputElement, placeholderText);\n    }\n    overAllWrapper.classList.remove('e-float-input');\n}\n/**\n * Function to set the placeholder to the element.\n *\n * @param {number[] | string[] | boolean[]} value - Value of the MultiSelect.\n * @param {HTMLInputElement} inputElement - Specify the input wrapper.\n * @param {string} placeholder - Specify the PlaceHolder text.\n */\nfunction setPlaceHolder(value, inputElement, placeholder) {\n    if (value && value.length) {\n        inputElement.placeholder = '';\n    }\n    else {\n        inputElement.placeholder = placeholder;\n    }\n}\n/**\n * Function for focusing the Float Element.\n *\n * @param {HTMLDivElement} overAllWrapper - Overall wrapper of multiselect.\n * @param {HTMLDivElement} componentWrapper - Wrapper element of multiselect.\n */\nfunction floatLabelFocus(overAllWrapper, componentWrapper) {\n    overAllWrapper.classList.add('e-input-focus');\n    const label = componentWrapper.querySelector('.' + FLOATTEXT);\n    if (!isNullOrUndefined(label)) {\n        addClass([label], LABELTOP);\n        if (label.classList.contains(LABELBOTTOM)) {\n            removeClass([label], LABELBOTTOM);\n        }\n    }\n}\n/* eslint-disable @typescript-eslint/no-unused-vars */\n/**\n * Function to focus the Float Label element.\n *\n * @param {HTMLDivElement} overAllWrapper - Overall wrapper of multiselect.\n * @param {HTMLDivElement} componentWrapper - Wrapper element of multiselect.\n * @param {number[] | string[] | boolean[]} value - Value of the MultiSelect.\n * @param {FloatLabelType} floatLabelType - Specify the FloatLabel Type.\n * @param {string} placeholder - Specify the PlaceHolder text.\n */\nfunction floatLabelBlur(overAllWrapper, componentWrapper, value, floatLabelType, placeholder) {\n    /* eslint-enable @typescript-eslint/no-unused-vars */\n    overAllWrapper.classList.remove('e-input-focus');\n    const label = componentWrapper.querySelector('.' + FLOATTEXT);\n    if (value && value.length <= 0 && floatLabelType === 'Auto' && !isNullOrUndefined(label)) {\n        if (label.classList.contains(LABELTOP)) {\n            removeClass([label], LABELTOP);\n        }\n        addClass([label], LABELBOTTOM);\n    }\n}\nfunction encodePlaceholder(placeholder) {\n    let result = '';\n    if (!isNullOrUndefined(placeholder) && placeholder !== '') {\n        const spanElement = document.createElement('span');\n        spanElement.innerHTML = '<input  placeholder=\"' + placeholder + '\"/>';\n        const hiddenInput = (spanElement.children[0]);\n        result = hiddenInput.placeholder;\n    }\n    return result;\n}\n/* eslint-enable valid-jsdoc */\n\nvar __decorate$5 = (undefined && undefined.__decorate) || function (decorators, target, key, desc) {\n    var c = arguments.length, r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d;\n    if (typeof Reflect === \"object\" && typeof Reflect.decorate === \"function\") r = Reflect.decorate(decorators, target, key, desc);\n    else for (var i = decorators.length - 1; i >= 0; i--) if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;\n    return c > 3 && r && Object.defineProperty(target, key, r), r;\n};\n// eslint-disable-next-line @typescript-eslint/triple-slash-reference\n/// <reference path='../drop-down-base/drop-down-base-model.d.ts'/>\nconst FOCUS = 'e-input-focus';\nconst DISABLED$1 = 'e-disabled';\nconst OVER_ALL_WRAPPER = 'e-multiselect e-input-group e-control-wrapper';\nconst ELEMENT_WRAPPER = 'e-multi-select-wrapper';\nconst ELEMENT_MOBILE_WRAPPER = 'e-mob-wrapper';\nconst HIDE_LIST = 'e-hide-listitem';\nconst DELIMITER_VIEW = 'e-delim-view';\nconst CHIP_WRAPPER$1 = 'e-chips-collection';\nconst CHIP$1 = 'e-chips';\nconst CHIP_CONTENT$1 = 'e-chipcontent';\nconst CHIP_CLOSE$1 = 'e-chips-close';\nconst CHIP_SELECTED = 'e-chip-selected';\nconst SEARCHBOX_WRAPPER = 'e-searcher';\nconst DELIMITER_VIEW_WRAPPER = 'e-delimiter';\nconst ZERO_SIZE = 'e-zero-size';\nconst REMAIN_WRAPPER$1 = 'e-remain';\nconst CLOSEICON_CLASS$1 = 'e-chips-close e-close-hooker';\nconst DELIMITER_WRAPPER = 'e-delim-values';\nconst POPUP_WRAPPER = 'e-ddl e-popup e-multi-select-list-wrapper';\nconst INPUT_ELEMENT = 'e-dropdownbase';\nconst RTL_CLASS = 'e-rtl';\nconst CLOSE_ICON_HIDE = 'e-close-icon-hide';\nconst MOBILE_CHIP = 'e-mob-chip';\nconst FOOTER$1 = 'e-ddl-footer';\nconst HEADER$1 = 'e-ddl-header';\nconst DISABLE_ICON = 'e-ddl-disable-icon';\nconst SPINNER_CLASS$1 = 'e-ms-spinner-icon';\nconst HIDDEN_ELEMENT = 'e-multi-hidden';\nconst destroy = 'destroy';\nconst dropdownIcon = 'e-input-group-icon e-ddl-icon';\nconst iconAnimation = 'e-icon-anim';\nconst TOTAL_COUNT_WRAPPER$1 = 'e-delim-total';\nconst BOX_ELEMENT = 'e-multiselect-box';\nconst FILTERPARENT = 'e-filter-parent';\nconst CUSTOM_WIDTH = 'e-search-custom-width';\nconst FILTERINPUT = 'e-input-filter';\n/**\n * The Multiselect allows the user to pick a more than one value from list of predefined values.\n * ```html\n * <select id=\"list\">\n *      <option value='1'>Badminton</option>\n *      <option value='2'>Basketball</option>\n *      <option value='3'>Cricket</option>\n *      <option value='4'>Football</option>\n *      <option value='5'>Tennis</option>\n * </select>\n * ```\n * ```typescript\n * <script>\n *   var multiselectObj = new Multiselect();\n *   multiselectObj.appendTo(\"#list\");\n * </script>\n * ```\n */\nlet MultiSelect = class MultiSelect extends DropDownBase {\n    /**\n     * Constructor for creating the DropDownList widget.\n     *\n     * @param {MultiSelectModel} option - Specifies the MultiSelect model.\n     * @param {string | HTMLElement} element - Specifies the element to render as component.\n     * @private\n     */\n    constructor(option, element) {\n        super(option, element);\n        this.clearIconWidth = 0;\n        this.isValidKey = false;\n        this.selectAllEventData = [];\n        this.selectAllEventEle = [];\n        this.scrollFocusStatus = false;\n        this.keyDownStatus = false;\n    }\n    enableRTL(state) {\n        if (state) {\n            this.overAllWrapper.classList.add(RTL_CLASS);\n        }\n        else {\n            this.overAllWrapper.classList.remove(RTL_CLASS);\n        }\n        if (this.popupObj) {\n            this.popupObj.enableRtl = state;\n            this.popupObj.dataBind();\n        }\n    }\n    requiredModules() {\n        const modules = [];\n        if (this.mode === 'CheckBox') {\n            this.isGroupChecking = this.enableGroupCheckBox;\n            if (this.enableGroupCheckBox) {\n                const prevOnChange = this.isProtectedOnChange;\n                this.isProtectedOnChange = true;\n                this.enableSelectionOrder = false;\n                this.isProtectedOnChange = prevOnChange;\n            }\n            this.allowCustomValue = false;\n            this.hideSelectedItem = false;\n            this.closePopupOnSelect = false;\n            modules.push({\n                member: 'CheckBoxSelection',\n                args: [this]\n            });\n        }\n        return modules;\n    }\n    updateHTMLAttribute() {\n        if (Object.keys(this.htmlAttributes).length) {\n            for (const htmlAttr of Object.keys(this.htmlAttributes)) {\n                switch (htmlAttr) {\n                    case 'class': {\n                        const updatedClassValue = (this.htmlAttributes[htmlAttr].replace(/\\s+/g, ' ')).trim();\n                        if (updatedClassValue !== '') {\n                            addClass([this.overAllWrapper], updatedClassValue.split(' '));\n                            addClass([this.popupWrapper], updatedClassValue.split(' '));\n                        }\n                        break;\n                    }\n                    case 'disabled':\n                        this.enable(false);\n                        break;\n                    case 'placeholder':\n                        if (!this.placeholder) {\n                            this.inputElement.setAttribute(htmlAttr, this.htmlAttributes[htmlAttr]);\n                            this.setProperties({ placeholder: this.inputElement.placeholder }, true);\n                            this.refreshPlaceHolder();\n                        }\n                        break;\n                    default: {\n                        const defaultAttr = ['id'];\n                        const validateAttr = ['name', 'required', 'aria-required', 'form'];\n                        const containerAttr = ['title', 'role', 'style', 'class'];\n                        if (defaultAttr.indexOf(htmlAttr) > -1) {\n                            this.element.setAttribute(htmlAttr, this.htmlAttributes[htmlAttr]);\n                        }\n                        else if (htmlAttr.indexOf('data') === 0 || validateAttr.indexOf(htmlAttr) > -1) {\n                            this.hiddenElement.setAttribute(htmlAttr, this.htmlAttributes[htmlAttr]);\n                        }\n                        else if (containerAttr.indexOf(htmlAttr) > -1) {\n                            this.overAllWrapper.setAttribute(htmlAttr, this.htmlAttributes[htmlAttr]);\n                        }\n                        else {\n                            this.inputElement.setAttribute(htmlAttr, this.htmlAttributes[htmlAttr]);\n                        }\n                        break;\n                    }\n                }\n            }\n        }\n    }\n    updateReadonly(state) {\n        if (state || this.mode === 'CheckBox') {\n            this.inputElement.setAttribute('readonly', 'true');\n        }\n        else {\n            this.inputElement.removeAttribute('readonly');\n        }\n    }\n    updateClearButton(state) {\n        if (state) {\n            if (this.overAllClear.parentNode) {\n                this.overAllClear.style.display = '';\n            }\n            else {\n                this.componentWrapper.appendChild(this.overAllClear);\n            }\n            this.componentWrapper.classList.remove(CLOSE_ICON_HIDE);\n        }\n        else {\n            this.overAllClear.style.display = 'none';\n            this.componentWrapper.classList.add(CLOSE_ICON_HIDE);\n        }\n    }\n    updateCssClass() {\n        if (!isNullOrUndefined(this.cssClass) && this.cssClass !== '') {\n            let updatedCssClassValues = this.cssClass;\n            updatedCssClassValues = (this.cssClass.replace(/\\s+/g, ' ')).trim();\n            if (updatedCssClassValues !== '') {\n                addClass([this.overAllWrapper], updatedCssClassValues.split(' '));\n                addClass([this.popupWrapper], updatedCssClassValues.split(' '));\n            }\n        }\n    }\n    updateOldPropCssClass(oldClass) {\n        if (!isNullOrUndefined(oldClass) && oldClass !== '') {\n            oldClass = (oldClass.replace(/\\s+/g, ' ')).trim();\n            if (oldClass !== '') {\n                removeClass([this.overAllWrapper], oldClass.split(' '));\n                removeClass([this.popupWrapper], oldClass.split(' '));\n            }\n        }\n    }\n    onPopupShown() {\n        if (Browser.isDevice && (this.mode === 'CheckBox' && this.allowFiltering)) {\n            // eslint-disable-next-line @typescript-eslint/no-this-alias\n            const proxy = this;\n            window.onpopstate = () => {\n                proxy.hidePopup();\n                proxy.inputElement.focus();\n            };\n            history.pushState({}, '');\n        }\n        const animModel = { name: 'FadeIn', duration: 100 };\n        const eventArgs = { popup: this.popupObj, cancel: false, animation: animModel };\n        this.trigger('open', eventArgs, (eventArgs) => {\n            if (!eventArgs.cancel) {\n                this.focusAtFirstListItem();\n                document.body.appendChild(this.popupObj.element);\n                if (this.mode === 'CheckBox' && this.enableGroupCheckBox && !isNullOrUndefined(this.fields.groupBy)) {\n                    this.updateListItems(this.list.querySelectorAll('li.e-list-item'), this.mainList.querySelectorAll('li.e-list-item'));\n                }\n                if (this.mode === 'CheckBox' || this.showDropDownIcon) {\n                    addClass([this.overAllWrapper], [iconAnimation]);\n                }\n                this.refreshPopup();\n                this.renderReactTemplates();\n                this.popupObj.show(eventArgs.animation, (this.zIndex === 1000) ? this.element : null);\n                attributes(this.inputElement, { 'aria-expanded': 'true' });\n                if (this.isFirstClick) {\n                    this.loadTemplate();\n                }\n            }\n        });\n    }\n    updateListItems(listItems, mainListItems) {\n        for (let i = 0; i < listItems.length; i++) {\n            this.findGroupStart(listItems[i]);\n            this.findGroupStart(mainListItems[i]);\n        }\n        this.deselectHeader();\n    }\n    loadTemplate() {\n        this.refreshListItems(null);\n        if (this.mode === 'CheckBox') {\n            this.removeFocus();\n        }\n        this.notify('reOrder', { module: 'CheckBoxSelection', enable: this.mode === 'CheckBox', e: this });\n    }\n    setScrollPosition() {\n        if (((!this.hideSelectedItem && this.mode !== 'CheckBox') || (this.mode === 'CheckBox' && !this.enableSelectionOrder)) &&\n            (!isNullOrUndefined(this.value) && (this.value.length > 0))) {\n            const valueEle = this.findListElement((this.hideSelectedItem ? this.ulElement : this.list), 'li', 'data-value', this.value[this.value.length - 1]);\n            if (!isNullOrUndefined(valueEle)) {\n                this.scrollBottom(valueEle);\n            }\n        }\n    }\n    focusAtFirstListItem() {\n        if (this.ulElement && this.ulElement.querySelector('li.'\n            + dropDownBaseClasses.li)) {\n            let element;\n            if (this.mode === 'CheckBox') {\n                this.removeFocus();\n                return;\n            }\n            else {\n                element = this.ulElement.querySelector('li.'\n                    + dropDownBaseClasses.li + ':not(.'\n                    + HIDE_LIST + ')');\n            }\n            if (element !== null) {\n                this.removeFocus();\n                this.addListFocus(element);\n            }\n        }\n    }\n    focusAtLastListItem(data) {\n        let activeElement;\n        if (data) {\n            activeElement = Search(data, this.liCollections, 'StartsWith', this.ignoreCase);\n        }\n        else {\n            if (this.value && this.value.length) {\n                Search(this.value[this.value.length - 1], this.liCollections, 'StartsWith', this.ignoreCase);\n            }\n            else {\n                activeElement = null;\n            }\n        }\n        if (activeElement && activeElement.item !== null) {\n            this.addListFocus(activeElement.item);\n            this.scrollBottom(activeElement.item, activeElement.index);\n        }\n    }\n    getAriaAttributes() {\n        const ariaAttributes = {\n            'aria-disabled': 'false',\n            'aria-owns': this.element.id + '_options',\n            'role': 'listbox',\n            'aria-multiselectable': 'true',\n            'aria-activedescendant': 'null',\n            'aria-haspopup': 'true',\n            'aria-expanded': 'false'\n        };\n        return ariaAttributes;\n    }\n    updateListARIA() {\n        attributes(this.ulElement, { 'id': this.element.id + '_options', 'role': 'listbox', 'aria-hidden': 'false' });\n        const disableStatus = (this.inputElement.disabled) ? true : false;\n        attributes(this.inputElement, this.getAriaAttributes());\n        if (disableStatus) {\n            attributes(this.inputElement, { 'aria-disabled': 'true' });\n        }\n        this.ensureAriaDisabled((disableStatus) ? 'true' : 'false');\n    }\n    ensureAriaDisabled(status) {\n        if (this.htmlAttributes && this.htmlAttributes['aria-disabled']) {\n            const attr = this.htmlAttributes;\n            extend(attr, { 'aria-disabled': status }, attr);\n            this.setProperties({ htmlAttributes: attr }, true);\n        }\n    }\n    removelastSelection(e) {\n        const elements = this.chipCollectionWrapper.querySelectorAll('span.' + CHIP$1);\n        const value = elements[elements.length - 1].getAttribute('data-value');\n        if (!isNullOrUndefined(this.value)) {\n            this.tempValues = this.value.slice();\n        }\n        let customValue = this.getFormattedValue(value);\n        if (this.allowCustomValue && (value !== 'false' && customValue === false || (!isNullOrUndefined(customValue) &&\n            customValue.toString() === 'NaN'))) {\n            customValue = value;\n        }\n        this.removeValue(customValue, e);\n        this.removeChipSelection();\n        this.updateDelimeter(this.delimiterChar, e);\n        this.makeTextBoxEmpty();\n        if (this.mainList && this.listData) {\n            this.refreshSelection();\n        }\n        this.checkPlaceholderSize();\n    }\n    onActionFailure(e) {\n        super.onActionFailure(e);\n        this.renderPopup();\n        this.onPopupShown();\n    }\n    targetElement() {\n        this.targetInputElement = this.inputElement;\n        if (this.mode === 'CheckBox' && this.allowFiltering) {\n            this.notify('targetElement', { module: 'CheckBoxSelection', enable: this.mode === 'CheckBox' });\n        }\n        return this.targetInputElement.value;\n    }\n    getForQuery(valuecheck) {\n        let predicate;\n        const field = isNullOrUndefined(this.fields.value) ? this.fields.text : this.fields.value;\n        for (let i = 0; i < valuecheck.length; i++) {\n            if (i === 0) {\n                predicate = new Predicate(field, 'equal', valuecheck[i]);\n            }\n            else {\n                predicate = predicate.or(field, 'equal', valuecheck[i]);\n            }\n        }\n        return this.getQuery(this.query).where(predicate);\n    }\n    /* eslint-disable @typescript-eslint/no-unused-vars */\n    onActionComplete(ulElement, list, e, isUpdated) {\n        /* eslint-enable @typescript-eslint/no-unused-vars */\n        super.onActionComplete(ulElement, list, e);\n        this.updateSelectElementData(this.allowFiltering);\n        // eslint-disable-next-line @typescript-eslint/no-this-alias\n        const proxy = this;\n        if (!isNullOrUndefined(this.value) && !this.allowCustomValue) {\n            for (let i = 0; i < this.value.length; i++) {\n                const checkEle = this.findListElement(((this.allowFiltering && !isNullOrUndefined(this.mainList)) ? this.mainList : ulElement), 'li', 'data-value', proxy.value[i]);\n                if (!checkEle) {\n                    this.value.splice(i, 1);\n                    i -= 1;\n                }\n            }\n        }\n        this.updateActionList(ulElement, list, e);\n        if (this.dataSource instanceof DataManager && this.mode === 'CheckBox' && this.allowFiltering) {\n            this.removeFocus();\n        }\n    }\n    /* eslint-disable @typescript-eslint/no-unused-vars */\n    updateActionList(ulElement, list, e, isUpdated) {\n        /* eslint-enable @typescript-eslint/no-unused-vars */\n        if (this.mode === 'CheckBox' && this.showSelectAll) {\n            this.notify('selectAll', { module: 'CheckBoxSelection', enable: this.mode === 'CheckBox' });\n        }\n        if (!this.mainList && !this.mainData) {\n            this.mainList = ulElement.cloneNode ? ulElement.cloneNode(true) : ulElement;\n            this.mainData = list;\n            this.mainListCollection = this.liCollections;\n        }\n        else if (!isNullOrUndefined(this.mainData) && this.mainData.length === 0) {\n            this.mainData = list;\n        }\n        if ((this.remoteCustomValue || list.length <= 0) && this.allowCustomValue && this.inputFocus && this.allowFiltering &&\n            this.inputElement.value && this.inputElement.value !== '') {\n            this.checkForCustomValue(this.tempQuery, this.fields);\n            return;\n        }\n        if (this.value && this.value.length && ((this.mode !== 'CheckBox' && this.inputElement.value.trim() !== '') ||\n            this.mode === 'CheckBox' || ((this.keyCode === 8 || this.keyCode === 46) && this.allowFiltering &&\n            this.allowCustomValue && this.dataSource instanceof DataManager && this.inputElement.value === ''))) {\n            this.refreshSelection();\n        }\n        this.updateListARIA();\n        this.unwireListEvents();\n        this.wireListEvents();\n        if (!isNullOrUndefined(this.setInitialValue)) {\n            this.setInitialValue();\n        }\n        if (!isNullOrUndefined(this.selectAllAction)) {\n            this.selectAllAction();\n        }\n        if (this.setDynValue) {\n            if (!isNullOrUndefined(this.text) && (isNullOrUndefined(this.value) || this.value.length === 0)) {\n                this.initialTextUpdate();\n            }\n            this.initialValueUpdate();\n            this.initialUpdate();\n            this.refreshPlaceHolder();\n            if (this.mode !== 'CheckBox' && this.changeOnBlur) {\n                this.updateValueState(null, this.value, null);\n            }\n        }\n        this.renderPopup();\n        if (this.beforePopupOpen) {\n            this.beforePopupOpen = false;\n            this.onPopupShown();\n        }\n    }\n    refreshSelection() {\n        let value;\n        let element;\n        const className = this.hideSelectedItem ?\n            HIDE_LIST :\n            dropDownBaseClasses.selected;\n        if (!isNullOrUndefined(this.value)) {\n            for (let index = 0; !isNullOrUndefined(this.value[index]); index++) {\n                value = this.value[index];\n                element = this.findListElement(this.list, 'li', 'data-value', value);\n                if (element) {\n                    addClass([element], className);\n                    if (this.hideSelectedItem && element.previousSibling\n                        && element.previousElementSibling.classList.contains(dropDownBaseClasses.group)\n                        && (!element.nextElementSibling ||\n                            element.nextElementSibling.classList.contains(dropDownBaseClasses.group))) {\n                        addClass([element.previousElementSibling], className);\n                    }\n                    if (this.hideSelectedItem && this.fields.groupBy && !element.previousElementSibling.classList.contains(HIDE_LIST)) {\n                        this.hideGroupItem(value);\n                    }\n                    if (this.hideSelectedItem && element.classList.contains(dropDownBaseClasses.focus)) {\n                        removeClass([element], dropDownBaseClasses.focus);\n                        const listEle = element.parentElement.querySelectorAll('.' +\n                            dropDownBaseClasses.li + ':not(.' + HIDE_LIST + ')');\n                        if (listEle.length > 0) {\n                            addClass([listEle[0]], dropDownBaseClasses.focus);\n                        }\n                        else {\n                            this.ulElement = this.ulElement.cloneNode ? this.ulElement.cloneNode(true) : this.ulElement;\n                            if (!(this.list && this.list.querySelectorAll('.' + dropDownBaseClasses.li).length > 0)) {\n                                this.l10nUpdate();\n                                addClass([this.list], dropDownBaseClasses.noData);\n                            }\n                        }\n                    }\n                    element.setAttribute('aria-selected', 'true');\n                    if (this.mode === 'CheckBox' && element.classList.contains('e-active')) {\n                        const ariaValue = element.firstElementChild.getAttribute('aria-checked');\n                        if (isNullOrUndefined(ariaValue) || ariaValue === 'false') {\n                            const args = {\n                                module: 'CheckBoxSelection',\n                                enable: this.mode === 'CheckBox',\n                                li: element,\n                                e: null\n                            };\n                            this.notify('updatelist', args);\n                        }\n                    }\n                }\n            }\n        }\n        this.checkSelectAll();\n        this.checkMaxSelection();\n    }\n    hideGroupItem(value) {\n        let element;\n        let element1;\n        const className = this.hideSelectedItem ?\n            HIDE_LIST :\n            dropDownBaseClasses.selected;\n        element1 = element = this.findListElement(this.ulElement, 'li', 'data-value', value);\n        let i = 0;\n        let j = 0;\n        let temp = true;\n        let temp1 = true;\n        do {\n            if (element && element.previousElementSibling\n                && (!element.previousElementSibling.classList.contains(HIDE_LIST) &&\n                    element.previousElementSibling.classList.contains(dropDownBaseClasses.li))) {\n                temp = false;\n            }\n            if (!temp || !element || (element.previousElementSibling\n                && element.previousElementSibling.classList.contains(dropDownBaseClasses.group))) {\n                i = 10;\n            }\n            else {\n                element = element.previousElementSibling;\n            }\n            if (element1 && element1.nextElementSibling\n                && (!element1.nextElementSibling.classList.contains(HIDE_LIST) &&\n                    element1.nextElementSibling.classList.contains(dropDownBaseClasses.li))) {\n                temp1 = false;\n            }\n            if (!temp1 || !element1 || (element1.nextElementSibling\n                && element1.nextElementSibling.classList.contains(dropDownBaseClasses.group))) {\n                j = 10;\n            }\n            else {\n                element1 = element1.nextElementSibling;\n            }\n        } while (i < 10 || j < 10);\n        if (temp && temp1 && !element.previousElementSibling.classList.contains(HIDE_LIST)) {\n            addClass([element.previousElementSibling], className);\n        }\n        else if (temp && temp1 && element.previousElementSibling.classList.contains(HIDE_LIST)) {\n            removeClass([element.previousElementSibling], className);\n        }\n    }\n    getValidLi() {\n        let liElement = this.ulElement.querySelector('li.' + dropDownBaseClasses.li + ':not(.' + HIDE_LIST + ')');\n        return (!isNullOrUndefined(liElement) ? liElement : this.liCollections[0]);\n    }\n    checkSelectAll() {\n        const groupItemLength = this.list.querySelectorAll('li.e-list-group-item.e-active').length;\n        const listItem = this.list.querySelectorAll('li.e-list-item');\n        const searchCount = this.list.querySelectorAll('li.' + dropDownBaseClasses.li).length;\n        let searchActiveCount = this.list.querySelectorAll('li.' + dropDownBaseClasses.selected).length;\n        if (this.enableGroupCheckBox && !isNullOrUndefined(this.fields.groupBy)) {\n            searchActiveCount = searchActiveCount - groupItemLength;\n        }\n        if ((searchCount === searchActiveCount || searchActiveCount === this.maximumSelectionLength)\n            && (this.mode === 'CheckBox' && this.showSelectAll)) {\n            this.notify('checkSelectAll', { module: 'CheckBoxSelection', enable: this.mode === 'CheckBox', value: 'check' });\n        }\n        else if ((searchCount !== searchActiveCount) && (this.mode === 'CheckBox' && this.showSelectAll)) {\n            this.notify('checkSelectAll', { module: 'CheckBoxSelection', enable: this.mode === 'CheckBox', value: 'uncheck' });\n        }\n        if (this.enableGroupCheckBox && this.fields.groupBy && !this.enableSelectionOrder) {\n            for (let i = 0; i < listItem.length; i++) {\n                this.findGroupStart(listItem[i]);\n            }\n            this.deselectHeader();\n        }\n    }\n    // eslint-disable-next-line @typescript-eslint/no-unused-vars\n    openClick(e) {\n        if (!this.openOnClick && this.mode !== 'CheckBox') {\n            if (this.targetElement() !== '') {\n                this.showPopup();\n            }\n            else {\n                this.hidePopup();\n            }\n        }\n        else if (!this.openOnClick && this.mode === 'CheckBox' && !this.isPopupOpen()) {\n            this.showPopup();\n        }\n    }\n    keyUp(e) {\n        if (this.mode === 'CheckBox' && !this.openOnClick) {\n            const char = String.fromCharCode(e.keyCode);\n            const isWordCharacter = char.match(/\\w/);\n            if (!isNullOrUndefined(isWordCharacter)) {\n                this.isValidKey = true;\n            }\n        }\n        this.isValidKey = (this.isPopupOpen() && e.keyCode === 8) || this.isValidKey;\n        this.isValidKey = e.ctrlKey && e.keyCode === 86 ? false : this.isValidKey;\n        if (this.isValidKey) {\n            this.isValidKey = false;\n            this.expandTextbox();\n            this.showOverAllClear();\n            switch (e.keyCode) {\n                default:\n                    // For filtering works in mobile firefox\n                    this.search(e);\n            }\n        }\n    }\n    /**\n     * To filter the multiselect data from given data source by using query\n     *\n     * @param  {Object[] | DataManager } dataSource - Set the data source to filter.\n     * @param  {Query} query - Specify the query to filter the data.\n     * @param  {FieldSettingsModel} fields - Specify the fields to map the column in the data table.\n     * @returns {void}\n     */\n    filter(dataSource, query, fields) {\n        this.isFiltered = true;\n        this.remoteFilterAction = true;\n        this.dataUpdater(dataSource, query, fields);\n    }\n    getQuery(query) {\n        const filterQuery = query ? query.clone() : this.query ? this.query.clone() : new Query();\n        if (this.filterAction) {\n            if (this.targetElement() !== null) {\n                const dataType = this.typeOfData(this.dataSource).typeof;\n                if (!(this.dataSource instanceof DataManager) && dataType === 'string' || dataType === 'number') {\n                    filterQuery.where('', this.filterType, this.targetElement(), this.ignoreCase, this.ignoreAccent);\n                }\n                else {\n                    const fields = this.fields;\n                    filterQuery.where(!isNullOrUndefined(fields.text) ? fields.text : '', this.filterType, this.targetElement(), this.ignoreCase, this.ignoreAccent);\n                }\n            }\n            return filterQuery;\n        }\n        else {\n            return query ? query : this.query ? this.query : new Query();\n        }\n    }\n    dataUpdater(dataSource, query, fields) {\n        this.isDataFetched = false;\n        if (this.targetElement().trim() === '') {\n            const list = this.mainList.cloneNode ? this.mainList.cloneNode(true) : this.mainList;\n            if (this.backCommand) {\n                this.remoteCustomValue = false;\n                if (this.allowCustomValue && list.querySelectorAll('li').length == 0 && this.mainData.length > 0) {\n                    this.mainData = [];\n                }\n                this.onActionComplete(list, this.mainData);\n                if (this.value && this.value.length) {\n                    this.refreshSelection();\n                }\n                if (this.keyCode !== 8) {\n                    this.focusAtFirstListItem();\n                }\n                this.notify('reOrder', { module: 'CheckBoxSelection', enable: this.mode === 'CheckBox', e: this });\n            }\n        }\n        else {\n            this.resetList(dataSource, fields, query);\n            if (this.allowCustomValue) {\n                if (!(dataSource instanceof DataManager)) {\n                    this.checkForCustomValue(query, fields);\n                }\n                else {\n                    this.remoteCustomValue = true;\n                    this.tempQuery = query;\n                }\n            }\n        }\n        this.refreshPopup();\n        if (this.mode === 'CheckBox') {\n            this.removeFocus();\n        }\n    }\n    checkForCustomValue(query, fields) {\n        const dataChecks = !this.getValueByText(this.inputElement.value, this.ignoreCase);\n        if (this.allowCustomValue && dataChecks) {\n            const value = this.inputElement.value;\n            const field = fields ? fields : this.fields;\n            const customData = (!isNullOrUndefined(this.mainData) && this.mainData.length > 0) ?\n                this.mainData[0] : this.mainData;\n            if (typeof (customData) !== 'string' && typeof (customData) !== 'number' && typeof (customData) !== 'boolean') {\n                const dataItem = {};\n                setValue(field.text, value, dataItem);\n                if (typeof getValue((this.fields.value ? this.fields.value : 'value'), customData)\n                    === 'number') {\n                    setValue(field.value, Math.random(), dataItem);\n                }\n                else {\n                    setValue(field.value, value, dataItem);\n                }\n                const tempData = JSON.parse(JSON.stringify(this.listData));\n                tempData.splice(0, 0, dataItem);\n                this.resetList(tempData, field, query);\n            }\n            else {\n                const tempData = [this.inputElement.value];\n                tempData[0] = (typeof customData === 'number' && !isNaN(parseFloat(tempData[0]))) ?\n                    parseFloat(tempData[0]) : tempData[0];\n                tempData[0] = (typeof customData === 'boolean') ?\n                    (tempData[0] === 'true' ? true : (tempData[0] === 'false' ? false : tempData[0])) : tempData[0];\n                this.resetList(tempData, field);\n            }\n        }\n        if (this.value && this.value.length) {\n            this.refreshSelection();\n        }\n    }\n    getNgDirective() {\n        return 'EJS-MULTISELECT';\n    }\n    wrapperClick(e) {\n        this.setDynValue = false;\n        if (!this.enabled) {\n            return;\n        }\n        if (e.target === this.overAllClear) {\n            e.preventDefault();\n            return;\n        }\n        if (!this.inputFocus) {\n            this.inputElement.focus();\n        }\n        if (!this.readonly) {\n            if (e.target && e.target.classList.toString().indexOf(CHIP_CLOSE$1) !== -1) {\n                if (this.isPopupOpen()) {\n                    this.refreshPopup();\n                }\n                return;\n            }\n            if (!this.isPopupOpen() &&\n                (this.openOnClick || (this.showDropDownIcon && e.target && e.target.className === dropdownIcon))) {\n                this.showPopup();\n            }\n            else {\n                this.hidePopup();\n                if (this.mode === 'CheckBox') {\n                    this.showOverAllClear();\n                    this.inputFocus = true;\n                    if (!this.overAllWrapper.classList.contains(FOCUS)) {\n                        this.overAllWrapper.classList.add(FOCUS);\n                    }\n                }\n            }\n        }\n        if (!(this.targetElement() && this.targetElement() !== '')) {\n            e.preventDefault();\n        }\n    }\n    enable(state) {\n        if (state) {\n            this.overAllWrapper.classList.remove(DISABLED$1);\n            this.inputElement.removeAttribute('disabled');\n            attributes(this.inputElement, { 'aria-disabled': 'false' });\n            this.ensureAriaDisabled('false');\n        }\n        else {\n            this.overAllWrapper.classList.add(DISABLED$1);\n            this.inputElement.setAttribute('disabled', 'true');\n            attributes(this.inputElement, { 'aria-disabled': 'true' });\n            this.ensureAriaDisabled('true');\n        }\n        if (this.enabled !== state) {\n            this.enabled = state;\n        }\n        this.hidePopup();\n    }\n    onBlurHandler(eve, isDocClickFromCheck) {\n        let target;\n        if (!isNullOrUndefined(eve)) {\n            target = eve.relatedTarget;\n        }\n        if (this.popupObj && document.body.contains(this.popupObj.element) && this.popupObj.element.contains(target)) {\n            if (this.mode !== 'CheckBox') {\n                this.inputElement.focus();\n            }\n            else if ((this.floatLabelType === 'Auto' &&\n                ((this.overAllWrapper.classList.contains('e-outline')) || (this.overAllWrapper.classList.contains('e-filled'))))) {\n                addClass([this.overAllWrapper], 'e-valid-input');\n            }\n            return;\n        }\n        if (this.floatLabelType === 'Auto' && (this.overAllWrapper.classList.contains('e-outline')) && this.mode === 'CheckBox' &&\n            ((isNullOrUndefined(this.value)) || this.value.length === 0)) {\n            removeClass([this.overAllWrapper], 'e-valid-input');\n        }\n        if (this.mode === 'CheckBox' && Browser.isIE && !isNullOrUndefined(eve) && !isDocClickFromCheck) {\n            this.inputFocus = false;\n            this.overAllWrapper.classList.remove(FOCUS);\n            return;\n        }\n        if (this.scrollFocusStatus) {\n            if (!isNullOrUndefined(eve)) {\n                eve.preventDefault();\n            }\n            this.inputElement.focus();\n            this.scrollFocusStatus = false;\n            return;\n        }\n        this.inputFocus = false;\n        this.overAllWrapper.classList.remove(FOCUS);\n        if (this.addTagOnBlur) {\n            const dataChecks = this.getValueByText(this.inputElement.value, this.ignoreCase, this.ignoreAccent);\n            const listLiElement = this.findListElement(this.list, 'li', 'data-value', dataChecks);\n            const className = this.hideSelectedItem ? HIDE_LIST : dropDownBaseClasses.selected;\n            const allowChipAddition = (listLiElement && !listLiElement.classList.contains(className)) ? true : false;\n            if (allowChipAddition) {\n                this.updateListSelection(listLiElement, eve);\n                if (this.mode === 'Delimiter') {\n                    this.updateDelimeter(this.delimiterChar);\n                }\n            }\n        }\n        this.refreshListItems(null);\n        if (this.mode !== 'Box' && this.mode !== 'CheckBox') {\n            this.updateDelimView();\n        }\n        if (this.changeOnBlur) {\n            this.updateValueState(eve, this.value, this.tempValues);\n            this.dispatchEvent(this.hiddenElement, 'change');\n        }\n        this.overAllClear.style.display = 'none';\n        if (this.isPopupOpen()) {\n            this.hidePopup();\n        }\n        this.makeTextBoxEmpty();\n        this.trigger('blur');\n        this.focused = true;\n        if (Browser.isDevice && this.mode !== 'Delimiter' && this.mode !== 'CheckBox') {\n            this.removeChipFocus();\n        }\n        this.removeChipSelection();\n        this.refreshInputHight();\n        floatLabelBlur(this.overAllWrapper, this.componentWrapper, this.value, this.floatLabelType, this.placeholder);\n        this.refreshPlaceHolder();\n        if ((this.allowFiltering || (this.enableSelectionOrder === true && this.mode === 'CheckBox'))\n            && !isNullOrUndefined(this.mainList)) {\n            this.ulElement = this.mainList;\n        }\n        this.checkPlaceholderSize();\n    }\n    checkPlaceholderSize() {\n        if (this.showDropDownIcon) {\n            const downIconWidth = this.dropIcon.offsetWidth +\n                parseInt(window.getComputedStyle(this.dropIcon).marginRight, 10);\n            this.setPlaceholderSize(downIconWidth);\n        }\n        else {\n            if (!isNullOrUndefined(this.dropIcon)) {\n                this.setPlaceholderSize(this.showDropDownIcon ? this.dropIcon.offsetWidth : 0);\n            }\n        }\n    }\n    setPlaceholderSize(downIconWidth) {\n        if (isNullOrUndefined(this.value) || this.value.length === 0) {\n            if (this.dropIcon.offsetWidth !== 0) {\n                this.searchWrapper.style.width = ('calc(100% - ' + (downIconWidth + 10)) + 'px';\n            }\n            else {\n                addClass([this.searchWrapper], CUSTOM_WIDTH);\n            }\n        }\n        else if (!isNullOrUndefined(this.value)) {\n            this.searchWrapper.removeAttribute('style');\n            removeClass([this.searchWrapper], CUSTOM_WIDTH);\n        }\n    }\n    refreshInputHight() {\n        if ((!this.value || !this.value.length) && (isNullOrUndefined(this.text) || this.text === '')) {\n            this.searchWrapper.classList.remove(ZERO_SIZE);\n        }\n        else {\n            this.searchWrapper.classList.add(ZERO_SIZE);\n        }\n    }\n    validateValues(newValue, oldValue) {\n        return JSON.stringify(newValue.slice().sort()) !== JSON.stringify(oldValue.slice().sort());\n    }\n    updateValueState(event, newVal, oldVal) {\n        const newValue = newVal ? newVal : [];\n        const oldValue = oldVal ? oldVal : [];\n        if (this.initStatus && this.validateValues(newValue, oldValue)) {\n            const eventArgs = {\n                e: event,\n                oldValue: oldVal,\n                value: newVal,\n                isInteracted: event ? true : false,\n                element: this.element,\n                event: event\n            };\n            if (this.isAngular && this.preventChange) {\n                this.preventChange = false;\n            }\n            else {\n                this.trigger('change', eventArgs);\n            }\n            this.updateTempValue();\n            if (!this.changeOnBlur) {\n                this.dispatchEvent(this.hiddenElement, 'change');\n            }\n        }\n    }\n    updateTempValue() {\n        if (!this.value) {\n            this.tempValues = this.value;\n        }\n        else {\n            this.tempValues = this.value.slice();\n        }\n    }\n    getPagingCount() {\n        const height = this.list.classList.contains(dropDownBaseClasses.noData) ? null :\n            getComputedStyle(this.getItems()[0], null).getPropertyValue('height');\n        return Math.round(this.list.offsetHeight / parseInt(height, 10));\n    }\n    pageUpSelection(steps) {\n        const collection = this.list.querySelectorAll('li.'\n            + dropDownBaseClasses.li + ':not(.' + HIDE_LIST + ')' + ':not(.e-reorder-hide)');\n        const previousItem = steps >= 0 ? collection[steps + 1] : collection[0];\n        this.addListFocus(previousItem);\n        this.scrollBottom(previousItem, this.getIndexByValue(previousItem.getAttribute('data-value')));\n    }\n    pageDownSelection(steps) {\n        // eslint-disable-next-line @typescript-eslint/no-unused-vars\n        const list = this.getItems();\n        const collection = this.list.querySelectorAll('li.'\n            + dropDownBaseClasses.li + ':not(.' + HIDE_LIST + ')' + ':not(.e-reorder-hide)');\n        const previousItem = steps <= collection.length ? collection[steps - 1] : collection[collection.length - 1];\n        this.addListFocus(previousItem);\n        this.scrollBottom(previousItem, this.getIndexByValue(previousItem.getAttribute('data-value')));\n    }\n    getItems() {\n        if (!this.list) {\n            super.render();\n        }\n        return this.ulElement && this.ulElement.querySelectorAll('.' + dropDownBaseClasses.li).length > 0 ?\n            this.ulElement.querySelectorAll('.' + dropDownBaseClasses.li\n                + ':not(.' + HIDE_LIST + ')') : [];\n    }\n    focusInHandler(e) {\n        if (this.enabled) {\n            this.showOverAllClear();\n            this.inputFocus = true;\n            if (this.value && this.value.length) {\n                if (this.mode !== 'Delimiter' && this.mode !== 'CheckBox') {\n                    this.chipCollectionWrapper.style.display = '';\n                }\n                else {\n                    this.showDelimWrapper();\n                }\n                if (this.mode !== 'CheckBox') {\n                    this.viewWrapper.style.display = 'none';\n                }\n            }\n            if (this.mode !== 'CheckBox') {\n                this.searchWrapper.classList.remove(ZERO_SIZE);\n            }\n            this.checkPlaceholderSize();\n            if (this.focused) {\n                const args = { isInteracted: e ? true : false, event: e };\n                this.trigger('focus', args);\n                this.focused = false;\n            }\n            if (!this.overAllWrapper.classList.contains(FOCUS)) {\n                this.overAllWrapper.classList.add(FOCUS);\n            }\n            floatLabelFocus(this.overAllWrapper, this.componentWrapper);\n            if (this.isPopupOpen()) {\n                this.refreshPopup();\n            }\n            return true;\n        }\n        else {\n            return false;\n        }\n    }\n    showDelimWrapper() {\n        if (this.mode === 'CheckBox') {\n            this.viewWrapper.style.display = '';\n        }\n        else {\n            this.delimiterWrapper.style.display = '';\n        }\n        this.componentWrapper.classList.add(DELIMITER_VIEW_WRAPPER);\n    }\n    hideDelimWrapper() {\n        this.delimiterWrapper.style.display = 'none';\n        this.componentWrapper.classList.remove(DELIMITER_VIEW_WRAPPER);\n    }\n    expandTextbox() {\n        let size = 5;\n        if (this.placeholder) {\n            size = size > this.inputElement.placeholder.length ? size : this.inputElement.placeholder.length;\n        }\n        if (this.inputElement.value.length > size) {\n            this.inputElement.size = this.inputElement.value.length;\n        }\n        else {\n            this.inputElement.size = size;\n        }\n    }\n    isPopupOpen() {\n        return ((this.popupWrapper !== null) && (this.popupWrapper.parentElement !== null));\n    }\n    refreshPopup() {\n        if (this.popupObj && this.mobFilter) {\n            this.popupObj.setProperties({ width: this.calcPopupWidth() });\n            this.popupObj.refreshPosition(this.overAllWrapper);\n            this.popupObj.resolveCollision();\n        }\n    }\n    checkTextLength() {\n        return this.targetElement().length < 1;\n    }\n    popupKeyActions(e) {\n        switch (e.keyCode) {\n            case 38:\n                this.hidePopup();\n                if (this.mode === 'CheckBox') {\n                    this.inputElement.focus();\n                }\n                e.preventDefault();\n                break;\n            case 40:\n                if (!this.isPopupOpen()) {\n                    this.showPopup();\n                    e.preventDefault();\n                }\n                break;\n        }\n    }\n    updateAriaAttribute() {\n        const focusedItem = this.list.querySelector('.' + dropDownBaseClasses.focus);\n        if (!isNullOrUndefined(focusedItem)) {\n            this.inputElement.setAttribute('aria-activedescendant', focusedItem.id);\n        }\n    }\n    homeNavigation(isHome) {\n        this.removeFocus();\n        const scrollEle = this.ulElement.querySelectorAll('li.' + dropDownBaseClasses.li\n            + ':not(.' + HIDE_LIST + ')' + ':not(.e-reorder-hide)');\n        if (scrollEle.length > 0) {\n            const element = scrollEle[(isHome) ? 0 : (scrollEle.length - 1)];\n            element.classList.add(dropDownBaseClasses.focus);\n            this.scrollBottom(element);\n        }\n    }\n    onKeyDown(e) {\n        if (this.readonly || !this.enabled && this.mode !== 'CheckBox') {\n            return;\n        }\n        this.keyCode = e.keyCode;\n        this.keyDownStatus = true;\n        if (e.keyCode > 111 && e.keyCode < 124) {\n            return;\n        }\n        if (e.altKey) {\n            this.popupKeyActions(e);\n            return;\n        }\n        else if (this.isPopupOpen()) {\n            const focusedItem = this.list.querySelector('.' + dropDownBaseClasses.focus);\n            let activeIndex;\n            switch (e.keyCode) {\n                case 36:\n                case 35:\n                    this.homeNavigation((e.keyCode === 36) ? true : false);\n                    break;\n                case 33:\n                    e.preventDefault();\n                    if (focusedItem) {\n                        this.getIndexByValue(focusedItem.getAttribute('data-value'));\n                        this.pageUpSelection(activeIndex - this.getPagingCount());\n                        this.updateAriaAttribute();\n                    }\n                    return;\n                case 34:\n                    e.preventDefault();\n                    if (focusedItem) {\n                        this.getIndexByValue(focusedItem.getAttribute('data-value'));\n                        this.pageDownSelection(activeIndex + this.getPagingCount());\n                        this.updateAriaAttribute();\n                    }\n                    return;\n                case 38:\n                    this.arrowUp(e);\n                    break;\n                case 40:\n                    this.arrowDown(e);\n                    break;\n                case 27:\n                    e.preventDefault();\n                    this.hidePopup();\n                    if (this.mode === 'CheckBox') {\n                        this.inputElement.focus();\n                    }\n                    return;\n                case 13:\n                    e.preventDefault();\n                    if (this.mode !== 'CheckBox') {\n                        this.selectByKey(e);\n                    }\n                    this.checkPlaceholderSize();\n                    return;\n                case 32:\n                    this.spaceKeySelection(e);\n                    return;\n                case 9:\n                    e.preventDefault();\n                    this.hidePopup();\n                    this.inputElement.focus();\n                    this.overAllWrapper.classList.add(FOCUS);\n            }\n        }\n        else {\n            switch (e.keyCode) {\n                case 13:\n                case 9:\n                case 16:\n                case 17:\n                case 20:\n                    return;\n                case 40:\n                    if (this.openOnClick) {\n                        this.showPopup();\n                    }\n                    break;\n                case 27:\n                    e.preventDefault();\n                    this.escapeAction();\n                    return;\n            }\n        }\n        if (this.checkTextLength()) {\n            this.keyNavigation(e);\n        }\n        if (this.mode === 'CheckBox' && this.enableSelectionOrder) {\n            this.checkBackCommand(e);\n        }\n        this.expandTextbox();\n        if (!(this.mode === 'CheckBox' && this.showSelectAll)) {\n            this.refreshPopup();\n        }\n    }\n    arrowDown(e) {\n        e.preventDefault();\n        this.moveByList(1);\n        this.keyAction = true;\n        if (document.activeElement.classList.contains(FILTERINPUT)\n            || (this.mode === 'CheckBox' && !this.allowFiltering && document.activeElement !== this.list)) {\n            this.list.focus();\n            EventHandler.add(this.list, 'keydown', this.onKeyDown, this);\n        }\n        this.updateAriaAttribute();\n    }\n    arrowUp(e) {\n        e.preventDefault();\n        this.keyAction = true;\n        let list = this.list.querySelectorAll('li.'\n            + dropDownBaseClasses.li\n            + ':not(.' + HIDE_LIST + ')' + ':not(.e-reorder-hide)');\n        if (this.enableGroupCheckBox && this.mode === 'CheckBox' && !isNullOrUndefined(this.fields.groupBy)) {\n            list = this.list.querySelectorAll('li.'\n                + dropDownBaseClasses.li + ',li.' + dropDownBaseClasses.group\n                + ':not(.' + HIDE_LIST + ')' + ':not(.e-reorder-hide)');\n        }\n        const focuseElem = this.list.querySelector('li.' + dropDownBaseClasses.focus);\n        const index = Array.prototype.slice.call(list).indexOf(focuseElem);\n        if (index <= 0 && (this.mode === 'CheckBox' && this.allowFiltering)) {\n            this.keyAction = false;\n            this.notify('inputFocus', { module: 'CheckBoxSelection', enable: this.mode === 'CheckBox', value: 'focus' });\n        }\n        this.moveByList(-1);\n        this.updateAriaAttribute();\n    }\n    spaceKeySelection(e) {\n        if (this.mode === 'CheckBox') {\n            if (!document.activeElement.classList.contains(FILTERINPUT)) {\n                e.preventDefault();\n                this.keyAction = true;\n                this.list.focus();\n            }\n            this.selectByKey(e);\n        }\n        this.checkPlaceholderSize();\n    }\n    checkBackCommand(e) {\n        if (e.keyCode === 8 && this.targetElement() === '') {\n            this.backCommand = false;\n        }\n        else {\n            this.backCommand = true;\n        }\n    }\n    keyNavigation(e) {\n        if ((this.mode !== 'Delimiter' && this.mode !== 'CheckBox') && this.value && this.value.length) {\n            switch (e.keyCode) {\n                case 37: //left arrow\n                    e.preventDefault();\n                    this.moveBy(-1, e);\n                    break;\n                case 39: //right arrow\n                    e.preventDefault();\n                    this.moveBy(1, e);\n                    break;\n                case 8:\n                    this.removelastSelection(e);\n                    break;\n                case 46: //del\n                    this.removeSelectedChip(e);\n                    break;\n            }\n        }\n        else if (e.keyCode === 8 && this.mode === 'Delimiter') {\n            if (this.value && this.value.length) {\n                e.preventDefault();\n                const temp = this.value[this.value.length - 1];\n                this.removeValue(temp, e);\n                this.updateDelimeter(this.delimiterChar, e);\n                this.focusAtLastListItem(temp);\n            }\n        }\n    }\n    selectByKey(e) {\n        this.removeChipSelection();\n        this.selectListByKey(e);\n        if (this.hideSelectedItem) {\n            this.focusAtFirstListItem();\n        }\n    }\n    escapeAction() {\n        const temp = this.tempValues ? this.tempValues.slice() : [];\n        if (this.value && this.validateValues(this.value, temp)) {\n            if (this.mode !== 'CheckBox') {\n                this.value = temp;\n                this.initialValueUpdate();\n            }\n            if (this.mode !== 'Delimiter' && this.mode !== 'CheckBox') {\n                this.chipCollectionWrapper.style.display = '';\n            }\n            else {\n                this.showDelimWrapper();\n            }\n            this.refreshPlaceHolder();\n            if (this.value.length) {\n                this.showOverAllClear();\n            }\n            else {\n                this.hideOverAllClear();\n            }\n        }\n        this.makeTextBoxEmpty();\n    }\n    scrollBottom(selectedLI, activeIndex) {\n        const currentOffset = this.list.offsetHeight;\n        const nextBottom = selectedLI.offsetTop + selectedLI.offsetHeight - this.list.scrollTop;\n        const nextOffset = this.list.scrollTop + nextBottom - currentOffset;\n        let boxRange = (selectedLI.offsetTop + selectedLI.offsetHeight - this.list.scrollTop);\n        boxRange = this.fields.groupBy && !isNullOrUndefined(this.fixedHeaderElement) ?\n            boxRange - this.fixedHeaderElement.offsetHeight : boxRange;\n        if (activeIndex === 0) {\n            this.list.scrollTop = 0;\n        }\n        else if (nextBottom > currentOffset) {\n            this.list.scrollTop = nextOffset;\n        }\n        else if (!(boxRange > 0 && this.list.offsetHeight > boxRange)) {\n            this.list.scrollTop = nextOffset;\n        }\n    }\n    scrollTop(selectedLI, activeIndex) {\n        let nextOffset = selectedLI.offsetTop - this.list.scrollTop;\n        nextOffset = this.fields.groupBy && !isUndefined(this.fixedHeaderElement) ?\n            nextOffset - this.fixedHeaderElement.offsetHeight : nextOffset;\n        const boxRange = (selectedLI.offsetTop + selectedLI.offsetHeight - this.list.scrollTop);\n        if (activeIndex === 0) {\n            this.list.scrollTop = 0;\n        }\n        else if (nextOffset < 0) {\n            this.list.scrollTop = this.list.scrollTop + nextOffset;\n        }\n        else if (!(boxRange > 0 && this.list.offsetHeight > boxRange)) {\n            this.list.scrollTop = selectedLI.offsetTop - (this.fields.groupBy && !isUndefined(this.fixedHeaderElement) ?\n                this.fixedHeaderElement.offsetHeight : 0);\n        }\n    }\n    selectListByKey(e) {\n        const li = this.list.querySelector('li.' + dropDownBaseClasses.focus);\n        let limit = this.value && this.value.length ? this.value.length : 0;\n        let target;\n        if (li !== null) {\n            if (li.classList.contains('e-active')) {\n                limit = limit - 1;\n            }\n            if (this.isValidLI(li) && limit < this.maximumSelectionLength) {\n                this.updateListSelection(li, e);\n                this.addListFocus(li);\n                if (this.mode === 'CheckBox') {\n                    this.updateDelimView();\n                    this.updateDelimeter(this.delimiterChar, e);\n                    this.refreshInputHight();\n                    this.checkPlaceholderSize();\n                    if (this.enableGroupCheckBox && !isNullOrUndefined(this.fields.groupBy)) {\n                        target = li.firstElementChild.lastElementChild;\n                        this.findGroupStart(target);\n                        this.deselectHeader();\n                    }\n                }\n                else {\n                    this.updateDelimeter(this.delimiterChar, e);\n                }\n                this.makeTextBoxEmpty();\n                if (this.mode !== 'CheckBox') {\n                    this.refreshListItems(li.textContent);\n                }\n                if (!this.changeOnBlur) {\n                    this.updateValueState(e, this.value, this.tempValues);\n                }\n                this.refreshPopup();\n            }\n            else {\n                if (!this.isValidLI(li) && limit < this.maximumSelectionLength) {\n                    target = li.firstElementChild.lastElementChild;\n                    if (target.classList.contains('e-check')) {\n                        this.selectAllItem(false, e, li);\n                    }\n                    else {\n                        this.selectAllItem(true, e, li);\n                    }\n                }\n            }\n            this.refreshSelection();\n            if (this.closePopupOnSelect) {\n                this.hidePopup();\n            }\n        }\n        this.refreshPlaceHolder();\n    }\n    refreshListItems(data) {\n        if ((this.allowFiltering || (this.mode === 'CheckBox' && this.enableSelectionOrder === true)\n            || this.allowCustomValue) && this.mainList && this.listData) {\n            const list = this.mainList.cloneNode ? this.mainList.cloneNode(true) : this.mainList;\n            this.onActionComplete(list, this.mainData);\n            this.focusAtLastListItem(data);\n            if (this.value && this.value.length) {\n                this.refreshSelection();\n            }\n        }\n    }\n    removeSelectedChip(e) {\n        const selectedElem = this.chipCollectionWrapper.querySelector('span.' + CHIP_SELECTED);\n        let temp;\n        if (selectedElem !== null) {\n            if (!isNullOrUndefined(this.value)) {\n                this.tempValues = this.value.slice();\n            }\n            temp = selectedElem.nextElementSibling;\n            if (temp !== null) {\n                this.removeChipSelection();\n                this.addChipSelection(temp, e);\n            }\n            this.removeValue(selectedElem.getAttribute('data-value'), e);\n            this.makeTextBoxEmpty();\n        }\n        if (this.closePopupOnSelect) {\n            this.hidePopup();\n        }\n        this.checkPlaceholderSize();\n    }\n    moveByTop(state) {\n        const elements = this.list.querySelectorAll('li.' + dropDownBaseClasses.li);\n        let index;\n        if (elements.length > 1) {\n            this.removeFocus();\n            index = state ? 0 : (elements.length - 1);\n            this.addListFocus(elements[index]);\n            this.scrollBottom(elements[index], index);\n        }\n        this.updateAriaAttribute();\n    }\n    moveByList(position) {\n        if (this.list) {\n            let elements = this.list.querySelectorAll('li.'\n                + dropDownBaseClasses.li\n                + ':not(.' + HIDE_LIST + ')' + ':not(.e-reorder-hide)');\n            if (this.mode === 'CheckBox' && this.enableGroupCheckBox && !isNullOrUndefined(this.fields.groupBy)) {\n                elements = this.list.querySelectorAll('li.'\n                    + dropDownBaseClasses.li + ',li.' + dropDownBaseClasses.group\n                    + ':not(.' + HIDE_LIST + ')' + ':not(.e-reorder-hide)');\n            }\n            const selectedElem = this.list.querySelector('li.' + dropDownBaseClasses.focus);\n            let temp = -1;\n            if (elements.length) {\n                for (let index = 0; index < elements.length; index++) {\n                    if (elements[index] === selectedElem) {\n                        temp = index;\n                        break;\n                    }\n                }\n                if (position > 0) {\n                    if (temp < (elements.length - 1)) {\n                        this.removeFocus();\n                        this.addListFocus(elements[++temp]);\n                        this.updateCheck(elements[temp]);\n                        this.scrollBottom(elements[temp], temp);\n                    }\n                }\n                else {\n                    if (temp > 0) {\n                        this.removeFocus();\n                        this.addListFocus(elements[--temp]);\n                        this.updateCheck(elements[temp]);\n                        this.scrollTop(elements[temp], temp);\n                    }\n                }\n            }\n        }\n    }\n    updateCheck(element) {\n        if (this.mode === 'CheckBox' && this.enableGroupCheckBox &&\n            !isNullOrUndefined(this.fields.groupBy)) {\n            const checkElement = element.firstElementChild.lastElementChild;\n            if (checkElement.classList.contains('e-check')) {\n                element.classList.add('e-active');\n            }\n            else {\n                element.classList.remove('e-active');\n            }\n        }\n    }\n    moveBy(position, e) {\n        let temp;\n        const elements = this.chipCollectionWrapper.querySelectorAll('span.' + CHIP$1);\n        const selectedElem = this.chipCollectionWrapper.querySelector('span.' + CHIP_SELECTED);\n        if (selectedElem === null) {\n            if (position < 0) {\n                this.addChipSelection(elements[elements.length - 1], e);\n            }\n        }\n        else {\n            if (position < 0) {\n                temp = selectedElem.previousElementSibling;\n                if (temp !== null) {\n                    this.removeChipSelection();\n                    this.addChipSelection(temp, e);\n                }\n            }\n            else {\n                temp = selectedElem.nextElementSibling;\n                this.removeChipSelection();\n                if (temp !== null) {\n                    this.addChipSelection(temp, e);\n                }\n            }\n        }\n    }\n    chipClick(e) {\n        if (this.enabled) {\n            const elem = closest(e.target, '.' + CHIP$1);\n            this.removeChipSelection();\n            this.addChipSelection(elem, e);\n        }\n    }\n    removeChipSelection() {\n        if (this.chipCollectionWrapper) {\n            this.removeChipFocus();\n        }\n    }\n    addChipSelection(element, e) {\n        addClass([element], CHIP_SELECTED);\n        this.trigger('chipSelection', e);\n    }\n    onChipRemove(e) {\n        if (e.which === 3 || e.button === 2) {\n            return;\n        }\n        if (this.enabled && !this.readonly) {\n            const element = e.target.parentElement;\n            const customVal = element.getAttribute('data-value');\n            let value = this.getFormattedValue(customVal);\n            if (this.allowCustomValue && ((customVal !== 'false' && value === false) ||\n                (!isNullOrUndefined(value) && value.toString() === 'NaN'))) {\n                value = customVal;\n            }\n            if (this.isPopupOpen() && this.mode !== 'CheckBox') {\n                this.hidePopup();\n            }\n            if (!this.inputFocus) {\n                this.inputElement.focus();\n            }\n            this.removeValue(value, e);\n            if (isNullOrUndefined(this.findListElement(this.list, 'li', 'data-value', value)) && this.mainList && this.listData) {\n                const list = this.mainList.cloneNode ? this.mainList.cloneNode(true) : this.mainList;\n                this.onActionComplete(list, this.mainData);\n            }\n            this.updateDelimeter(this.delimiterChar, e);\n            if (this.placeholder && this.floatLabelType === 'Never') {\n                this.makeTextBoxEmpty();\n                this.checkPlaceholderSize();\n            }\n            else {\n                this.inputElement.value = '';\n            }\n            e.preventDefault();\n        }\n    }\n    makeTextBoxEmpty() {\n        this.inputElement.value = '';\n        this.refreshPlaceHolder();\n    }\n    refreshPlaceHolder() {\n        if (this.placeholder && this.floatLabelType === 'Never') {\n            if ((this.value && this.value.length) || (!isNullOrUndefined(this.text) && this.text !== '')) {\n                this.inputElement.placeholder = '';\n            }\n            else {\n                this.inputElement.placeholder = encodePlaceholder(this.placeholder);\n            }\n        }\n        else {\n            this.setFloatLabelType();\n        }\n        this.expandTextbox();\n    }\n    removeAllItems(value, eve, isClearAll, element, mainElement) {\n        let index = this.value.indexOf(value);\n        const removeVal = this.value.slice(0);\n        removeVal.splice(index, 1);\n        this.setProperties({ value: [].concat([], removeVal) }, true);\n        element.setAttribute('aria-selected', 'false');\n        const className = this.hideSelectedItem ?\n            HIDE_LIST :\n            dropDownBaseClasses.selected;\n        removeClass([element], className);\n        this.notify('activeList', {\n            module: 'CheckBoxSelection',\n            enable: this.mode === 'CheckBox', li: element,\n            e: this, index: index\n        });\n        this.invokeCheckboxSelection(element, eve, isClearAll);\n        this.updateMainList(true, value, mainElement);\n        this.updateChipStatus();\n    }\n    invokeCheckboxSelection(element, eve, isClearAll) {\n        this.notify('updatelist', { module: 'CheckBoxSelection', enable: this.mode === 'CheckBox', li: element, e: eve });\n        attributes(this.inputElement, { 'aria-activedescendant': element.id });\n        if ((this.value && this.value.length !== this.mainData.length)\n            && (this.mode === 'CheckBox' && this.showSelectAll && !(this.isSelectAll || isClearAll))) {\n            this.notify('checkSelectAll', {\n                module: 'CheckBoxSelection',\n                enable: this.mode === 'CheckBox',\n                value: 'uncheck'\n            });\n        }\n    }\n    removeValue(value, eve, length, isClearAll) {\n        let index = this.value.indexOf(this.getFormattedValue(value));\n        if (index === -1 && this.allowCustomValue && !isNullOrUndefined(value)) {\n            index = this.value.indexOf(value.toString());\n        }\n        const targetEle = eve && eve.target;\n        isClearAll = (isClearAll || targetEle && targetEle.classList.contains('e-close-hooker')) ? true : null;\n        const className = this.hideSelectedItem ?\n            HIDE_LIST :\n            dropDownBaseClasses.selected;\n        if (index !== -1) {\n            const element = this.findListElement(this.list, 'li', 'data-value', value);\n            const val = this.getDataByValue(value);\n            const eventArgs = {\n                e: eve,\n                item: element,\n                itemData: val,\n                isInteracted: eve ? true : false,\n                cancel: false\n            };\n            this.trigger('removing', eventArgs, (eventArgs) => {\n                if (eventArgs.cancel) {\n                    this.removeIndex++;\n                }\n                else {\n                    const removeVal = this.value.slice(0);\n                    removeVal.splice(index, 1);\n                    this.setProperties({ value: [].concat([], removeVal) }, true);\n                    if (element !== null) {\n                        const hideElement = this.findListElement(this.mainList, 'li', 'data-value', value);\n                        element.setAttribute('aria-selected', 'false');\n                        removeClass([element], className);\n                        if (hideElement) {\n                            hideElement.setAttribute('aria-selected', 'false');\n                            removeClass([element, hideElement], className);\n                        }\n                        this.notify('activeList', {\n                            module: 'CheckBoxSelection',\n                            enable: this.mode === 'CheckBox', li: element,\n                            e: this, index: index\n                        });\n                        this.invokeCheckboxSelection(element, eve, isClearAll);\n                    }\n                    if (this.hideSelectedItem && this.fields.groupBy) {\n                        this.hideGroupItem(value);\n                    }\n                    if (this.hideSelectedItem && this.fixedHeaderElement && this.fields.groupBy && this.mode !== 'CheckBox' &&\n                        this.isPopupOpen()) {\n                        super.scrollStop();\n                    }\n                    this.updateMainList(true, value);\n                    this.removeChip(value);\n                    this.updateChipStatus();\n                    const limit = this.value && this.value.length ? this.value.length : 0;\n                    if (limit < this.maximumSelectionLength) {\n                        const collection = this.list.querySelectorAll('li.'\n                            + dropDownBaseClasses.li + ':not(.e-active)');\n                        removeClass(collection, 'e-disable');\n                    }\n                    this.trigger('removed', eventArgs);\n                    const targetEle = eve && eve.currentTarget;\n                    const isSelectAll = (targetEle && targetEle.classList.contains('e-selectall-parent')) ? true : null;\n                    if (!this.changeOnBlur && !isClearAll && (eve && length && !isSelectAll)) {\n                        this.updateValueState(eve, this.value, this.tempValues);\n                    }\n                    if (length) {\n                        this.selectAllEventData.push(val);\n                        this.selectAllEventEle.push(element);\n                    }\n                    if (length === 1) {\n                        if (!this.changeOnBlur) {\n                            this.updateValueState(eve, this.value, this.tempValues);\n                        }\n                        const args = {\n                            event: eve,\n                            items: this.selectAllEventEle,\n                            itemData: this.selectAllEventData,\n                            isInteracted: eve ? true : false,\n                            isChecked: false\n                        };\n                        this.trigger('selectedAll', args);\n                        this.selectAllEventData = [];\n                        this.selectAllEventEle = [];\n                    }\n                    if (isClearAll && (length === 1 || length === null)) {\n                        this.clearAllCallback(eve, isClearAll);\n                    }\n                }\n            });\n        }\n    }\n    updateMainList(state, value, mainElement) {\n        if (this.allowFiltering || this.mode === 'CheckBox') {\n            const element2 = mainElement ? mainElement :\n                this.findListElement(this.mainList, 'li', 'data-value', value);\n            if (element2) {\n                if (state) {\n                    element2.setAttribute('aria-selected', 'false');\n                    removeClass([element2], this.hideSelectedItem ?\n                        HIDE_LIST :\n                        dropDownBaseClasses.selected);\n                    if (this.mode === 'CheckBox') {\n                        element2.firstElementChild.setAttribute('aria-checked', 'false');\n                        removeClass([element2.firstElementChild.lastElementChild], 'e-check');\n                    }\n                }\n                else {\n                    element2.setAttribute('aria-selected', 'true');\n                    addClass([element2], this.hideSelectedItem ?\n                        HIDE_LIST :\n                        dropDownBaseClasses.selected);\n                    if (this.mode === 'CheckBox') {\n                        element2.firstElementChild.setAttribute('aria-checked', 'true');\n                        addClass([element2.firstElementChild.lastElementChild], 'e-check');\n                    }\n                }\n            }\n        }\n    }\n    removeChip(value) {\n        if (this.chipCollectionWrapper) {\n            const element = this.findListElement(this.chipCollectionWrapper, 'span', 'data-value', value);\n            if (element) {\n                remove(element);\n            }\n        }\n    }\n    setWidth(width) {\n        if (!isNullOrUndefined(width)) {\n            if (typeof width === 'number') {\n                this.overAllWrapper.style.width = formatUnit(width);\n            }\n            else if (typeof width === 'string') {\n                this.overAllWrapper.style.width = (width.match(/px|%|em/)) ? (width) : (formatUnit(width));\n            }\n        }\n    }\n    updateChipStatus() {\n        if (this.value && this.value.length) {\n            if (!isNullOrUndefined(this.chipCollectionWrapper)) {\n                (this.chipCollectionWrapper.style.display = '');\n            }\n            if (this.mode === 'Delimiter' || this.mode === 'CheckBox') {\n                this.showDelimWrapper();\n            }\n            this.showOverAllClear();\n        }\n        else {\n            if (!isNullOrUndefined(this.chipCollectionWrapper)) {\n                this.chipCollectionWrapper.style.display = 'none';\n            }\n            if (!isNullOrUndefined(this.delimiterWrapper)) {\n                (this.delimiterWrapper.style.display = 'none');\n            }\n            this.hideOverAllClear();\n        }\n    }\n    addValue(value, text, eve) {\n        if (!this.value) {\n            this.value = [];\n        }\n        if (this.value.indexOf(value) < 0) {\n            this.setProperties({ value: [].concat([], this.value, [value]) }, true);\n        }\n        const element = this.findListElement(this.list, 'li', 'data-value', value);\n        this.removeFocus();\n        if (element) {\n            this.addListFocus(element);\n            this.addListSelection(element);\n        }\n        if (this.mode !== 'Delimiter' && this.mode !== 'CheckBox') {\n            this.addChip(text, value, eve);\n        }\n        if (this.hideSelectedItem && this.fields.groupBy) {\n            this.hideGroupItem(value);\n        }\n        this.updateChipStatus();\n        this.checkMaxSelection();\n    }\n    checkMaxSelection() {\n        const limit = this.value && this.value.length ? this.value.length : 0;\n        if (limit === this.maximumSelectionLength) {\n            const collection = this.list.querySelectorAll('li.'\n                + dropDownBaseClasses.li + ':not(.e-active)');\n            addClass(collection, 'e-disable');\n        }\n    }\n    dispatchSelect(value, eve, element, isNotTrigger, length) {\n        const list = this.listData;\n        if (this.initStatus && !isNotTrigger) {\n            const val = this.getDataByValue(value);\n            const eventArgs = {\n                e: eve,\n                item: element,\n                itemData: val,\n                isInteracted: eve ? true : false,\n                cancel: false\n            };\n            this.trigger('select', eventArgs, (eventArgs) => {\n                if (!eventArgs.cancel) {\n                    if (length) {\n                        this.selectAllEventData.push(val);\n                        this.selectAllEventEle.push(element);\n                    }\n                    if (length === 1) {\n                        const args = {\n                            event: eve,\n                            items: this.selectAllEventEle,\n                            itemData: this.selectAllEventData,\n                            isInteracted: eve ? true : false,\n                            isChecked: true\n                        };\n                        this.trigger('selectedAll', args);\n                        this.selectAllEventData = [];\n                    }\n                    if (this.allowCustomValue && this.isServerRendered && this.listData !== list) {\n                        this.listData = list;\n                    }\n                    this.updateListSelectEventCallback(value, element, eve);\n                    if (this.hideSelectedItem && this.fixedHeaderElement && this.fields.groupBy && this.mode !== 'CheckBox') {\n                        super.scrollStop();\n                    }\n                }\n            });\n        }\n    }\n    addChip(text, value, e) {\n        if (this.chipCollectionWrapper) {\n            this.getChip(text, value, e);\n        }\n    }\n    removeChipFocus() {\n        const elements = this.chipCollectionWrapper.querySelectorAll('span.' + CHIP$1);\n        const closeElements = this.chipCollectionWrapper.querySelectorAll('span.' + CHIP_CLOSE$1.split(' ')[0]);\n        removeClass(elements, CHIP_SELECTED);\n        if (Browser.isDevice) {\n            for (let index = 0; index < closeElements.length; index++) {\n                closeElements[index].style.display = 'none';\n            }\n        }\n    }\n    onMobileChipInteraction(e) {\n        const chipElem = closest(e.target, '.' + CHIP$1);\n        const chipClose = chipElem.querySelector('span.' + CHIP_CLOSE$1.split(' ')[0]);\n        if (this.enabled && !this.readonly) {\n            if (!chipElem.classList.contains(CHIP_SELECTED)) {\n                this.removeChipFocus();\n                chipClose.style.display = '';\n                chipElem.classList.add(CHIP_SELECTED);\n            }\n            this.refreshPopup();\n            e.preventDefault();\n        }\n    }\n    multiCompiler(multiselectTemplate) {\n        let checkTemplate = false;\n        if (multiselectTemplate) {\n            try {\n                checkTemplate = (selectAll(multiselectTemplate, document).length) ? true : false;\n            }\n            catch (exception) {\n                checkTemplate = false;\n            }\n        }\n        return checkTemplate;\n    }\n    getChip(data, value, e) {\n        let itemData = { text: value, value: value };\n        const chip = this.createElement('span', {\n            className: CHIP$1,\n            attrs: { 'data-value': value, 'title': data }\n        });\n        let compiledString;\n        const chipContent = this.createElement('span', { className: CHIP_CONTENT$1 });\n        const chipClose = this.createElement('span', { className: CHIP_CLOSE$1 });\n        if (this.mainData) {\n            itemData = this.getDataByValue(value);\n        }\n        if (this.valueTemplate && !isNullOrUndefined(itemData)) {\n            const valuecheck = this.multiCompiler(this.valueTemplate);\n            if (valuecheck) {\n                compiledString = compile(select(this.valueTemplate, document).innerHTML.trim());\n            }\n            else {\n                compiledString = compile(this.valueTemplate);\n            }\n            // eslint-disable-next-line\n            let valueCompTemp = compiledString(itemData, this, 'valueTemplate', this.valueTemplateId, this.isStringTemplate, null, chipContent);\n            if (valueCompTemp && valueCompTemp.length > 0) {\n                for (let i = 0; i < valueCompTemp.length; i++) {\n                    chipContent.appendChild(valueCompTemp[i]);\n                }\n            }\n            this.renderReactTemplates();\n        }\n        else if (this.enableHtmlSanitizer) {\n            chipContent.innerText = data;\n        }\n        else {\n            chipContent.innerHTML = data;\n        }\n        chip.appendChild(chipContent);\n        const eventArgs = {\n            isInteracted: e ? true : false,\n            itemData: itemData,\n            e: e,\n            setClass: (classes) => {\n                addClass([chip], classes);\n            },\n            cancel: false\n        };\n        this.isPreventChange = this.isAngular && this.preventChange;\n        this.trigger('tagging', eventArgs, (eventArgs) => {\n            if (!eventArgs.cancel) {\n                if (Browser.isDevice) {\n                    chip.classList.add(MOBILE_CHIP);\n                    append([chipClose], chip);\n                    chipClose.style.display = 'none';\n                    EventHandler.add(chip, 'click', this.onMobileChipInteraction, this);\n                }\n                else {\n                    EventHandler.add(chip, 'mousedown', this.chipClick, this);\n                    if (this.showClearButton) {\n                        chip.appendChild(chipClose);\n                    }\n                }\n                EventHandler.add(chipClose, 'mousedown', this.onChipRemove, this);\n                this.chipCollectionWrapper.appendChild(chip);\n                if (!this.changeOnBlur && e) {\n                    this.updateValueState(e, this.value, this.tempValues);\n                }\n            }\n        });\n    }\n    calcPopupWidth() {\n        let width = formatUnit(this.popupWidth);\n        if (width.indexOf('%') > -1) {\n            const inputWidth = (this.componentWrapper.offsetWidth) * parseFloat(width) / 100;\n            width = inputWidth.toString() + 'px';\n        }\n        return width;\n    }\n    mouseIn() {\n        if (this.enabled && !this.readonly) {\n            this.showOverAllClear();\n        }\n    }\n    mouseOut() {\n        if (!this.inputFocus) {\n            this.overAllClear.style.display = 'none';\n        }\n    }\n    listOption(dataSource, fields) {\n        const iconCss = isNullOrUndefined(fields.iconCss) ? false : true;\n        const fieldProperty = isNullOrUndefined(fields.properties) ? fields :\n            fields.properties;\n        this.listCurrentOptions = (fields.text !== null || fields.value !== null) ? {\n            fields: fieldProperty, showIcon: iconCss, ariaAttributes: { groupItemRole: 'presentation' }\n        } : { fields: { value: 'text' } };\n        extend(this.listCurrentOptions, this.listCurrentOptions, fields, true);\n        if (this.mode === 'CheckBox') {\n            this.notify('listoption', { module: 'CheckBoxSelection', enable: this.mode === 'CheckBox', dataSource, fieldProperty });\n        }\n        return this.listCurrentOptions;\n    }\n    renderPopup() {\n        if (!this.list) {\n            super.render();\n        }\n        if (!this.popupObj) {\n            document.body.appendChild(this.popupWrapper);\n            const checkboxFilter = this.popupWrapper.querySelector('.' + FILTERPARENT);\n            if (this.mode === 'CheckBox' && !this.allowFiltering && checkboxFilter && this.filterParent) {\n                checkboxFilter.remove();\n                this.filterParent = null;\n            }\n            let overAllHeight = parseInt(this.popupHeight, 10);\n            this.popupWrapper.style.visibility = 'hidden';\n            if (this.headerTemplate) {\n                this.setHeaderTemplate();\n                overAllHeight -= this.header.offsetHeight;\n            }\n            append([this.list], this.popupWrapper);\n            if (this.footerTemplate) {\n                this.setFooterTemplate();\n                overAllHeight -= this.footer.offsetHeight;\n            }\n            if (this.mode === 'CheckBox' && this.showSelectAll) {\n                this.notify('selectAll', { module: 'CheckBoxSelection', enable: this.mode === 'CheckBox' });\n                overAllHeight -= this.selectAllHeight;\n            }\n            else if (this.mode === 'CheckBox' && !this.showSelectAll && (!this.headerTemplate && !this.footerTemplate)) {\n                this.notify('selectAll', { module: 'CheckBoxSelection', enable: this.mode === 'CheckBox' });\n                overAllHeight = parseInt(this.popupHeight, 10);\n            }\n            else if (this.mode === 'CheckBox' && !this.showSelectAll) {\n                this.notify('selectAll', { module: 'CheckBoxSelection', enable: this.mode === 'CheckBox' });\n                overAllHeight = parseInt(this.popupHeight, 10);\n                if (this.headerTemplate && this.header) {\n                    overAllHeight -= this.header.offsetHeight;\n                }\n                if (this.footerTemplate && this.footer) {\n                    overAllHeight -= this.footer.offsetHeight;\n                }\n            }\n            if (this.mode === 'CheckBox') {\n                const args = {\n                    module: 'CheckBoxSelection',\n                    enable: this.mode === 'CheckBox',\n                    popupElement: this.popupWrapper\n                };\n                if (this.allowFiltering) {\n                    this.notify('searchBox', args);\n                    overAllHeight -= this.searchBoxHeight;\n                }\n                addClass([this.popupWrapper], 'e-checkbox');\n            }\n            if (this.popupHeight !== 'auto') {\n                this.list.style.maxHeight = formatUnit(overAllHeight);\n                this.popupWrapper.style.maxHeight = formatUnit(this.popupHeight);\n            }\n            else {\n                this.list.style.maxHeight = formatUnit(this.popupHeight);\n            }\n            this.popupObj = new Popup(this.popupWrapper, {\n                width: this.calcPopupWidth(), targetType: 'relative', position: { X: 'left', Y: 'bottom' },\n                relateTo: this.overAllWrapper, collision: { X: 'flip', Y: 'flip' }, offsetY: 1,\n                enableRtl: this.enableRtl, zIndex: this.zIndex,\n                close: () => {\n                    if (this.popupObj.element.parentElement) {\n                        this.popupObj.unwireScrollEvents();\n                        // For restrict the page scrolling in safari browser\n                        const checkboxFilterInput = this.popupWrapper.querySelector('.' + FILTERINPUT);\n                        if (this.mode === 'CheckBox' && checkboxFilterInput && document.activeElement === checkboxFilterInput) {\n                            checkboxFilterInput.blur();\n                        }\n                        detach(this.popupObj.element);\n                    }\n                },\n                open: () => {\n                    this.popupObj.resolveCollision();\n                    if (!this.isFirstClick) {\n                        const ulElement = this.list.querySelector('ul');\n                        if (ulElement) {\n                            if (!(this.mode !== 'CheckBox' && (this.allowFiltering || this.allowCustomValue) &&\n                                this.targetElement().trim() !== '')) {\n                                this.mainList = ulElement.cloneNode ? ulElement.cloneNode(true) : ulElement;\n                            }\n                        }\n                        this.isFirstClick = true;\n                    }\n                    this.popupObj.wireScrollEvents();\n                    if (!(this.mode !== 'CheckBox' && (this.allowFiltering || this.allowCustomValue) &&\n                        this.targetElement().trim() !== '')) {\n                        this.loadTemplate();\n                    }\n                    this.setScrollPosition();\n                    if (this.allowFiltering) {\n                        this.notify('inputFocus', {\n                            module: 'CheckBoxSelection', enable: this.mode === 'CheckBox', value: 'focus'\n                        });\n                    }\n                }, targetExitViewport: () => {\n                    if (!Browser.isDevice) {\n                        this.hidePopup();\n                    }\n                }\n            });\n            if (this.mode === 'CheckBox' && Browser.isDevice && this.allowFiltering) {\n                this.notify('deviceSearchBox', { module: 'CheckBoxSelection', enable: this.mode === 'CheckBox' });\n            }\n            this.popupObj.close();\n            this.popupWrapper.style.visibility = '';\n        }\n    }\n    setHeaderTemplate() {\n        let compiledString;\n        if (this.header) {\n            this.header.remove();\n        }\n        this.header = this.createElement('div');\n        addClass([this.header], HEADER$1);\n        const headercheck = this.multiCompiler(this.headerTemplate);\n        if (headercheck) {\n            compiledString = compile(select(this.headerTemplate, document).innerHTML.trim());\n        }\n        else {\n            compiledString = compile(this.headerTemplate);\n        }\n        // eslint-disable-next-line\n        let elements = compiledString({}, this, 'headerTemplate', this.headerTemplateId, this.isStringTemplate, null, this.header);\n        if (elements && elements.length > 0) {\n            for (let temp = 0; temp < elements.length; temp++) {\n                this.header.appendChild(elements[temp]);\n            }\n        }\n        if (this.mode === 'CheckBox' && this.showSelectAll) {\n            prepend([this.header], this.popupWrapper);\n        }\n        else {\n            append([this.header], this.popupWrapper);\n        }\n        EventHandler.add(this.header, 'mousedown', this.onListMouseDown, this);\n    }\n    setFooterTemplate() {\n        let compiledString;\n        if (this.footer) {\n            this.footer.remove();\n        }\n        this.footer = this.createElement('div');\n        addClass([this.footer], FOOTER$1);\n        const footercheck = this.multiCompiler(this.footerTemplate);\n        if (footercheck) {\n            compiledString = compile(select(this.footerTemplate, document).innerHTML.trim());\n        }\n        else {\n            compiledString = compile(this.footerTemplate);\n        }\n        // eslint-disable-next-line\n        let elements = compiledString({}, this, 'footerTemplate', this.footerTemplateId, this.isStringTemplate, null, this.footer);\n        if (elements && elements.length > 0) {\n            for (let temp = 0; temp < elements.length; temp++) {\n                this.footer.appendChild(elements[temp]);\n            }\n        }\n        append([this.footer], this.popupWrapper);\n        EventHandler.add(this.footer, 'mousedown', this.onListMouseDown, this);\n    }\n    clearAll(e) {\n        if (this.enabled && !this.readonly) {\n            let temp;\n            if (this.value && this.value.length > 0) {\n                const liElement = this.list && this.list.querySelectorAll('li.e-list-item');\n                if (liElement && liElement.length > 0) {\n                    this.selectAllItems(false, e);\n                }\n                else {\n                    this.removeIndex = 0;\n                    for (temp = this.value[this.removeIndex]; this.removeIndex < this.value.length; temp = this.value[this.removeIndex]) {\n                        this.removeValue(temp, e, null, true);\n                    }\n                }\n            }\n            else {\n                this.clearAllCallback(e);\n            }\n        }\n    }\n    clearAllCallback(e, isClearAll) {\n        const tempValues = this.value ? this.value.slice() : [];\n        if (this.mainList && this.listData && ((this.allowFiltering && this.mode !== 'CheckBox') || this.allowCustomValue)) {\n            const list = this.mainList.cloneNode ? this.mainList.cloneNode(true) : this.mainList;\n            this.onActionComplete(list, this.mainData);\n        }\n        this.focusAtFirstListItem();\n        this.updateDelimeter(this.delimiterChar, e);\n        if (this.mode !== 'Box' && (!this.inputFocus || this.mode === 'CheckBox')) {\n            this.updateDelimView();\n        }\n        if (this.inputElement.value !== '') {\n            this.makeTextBoxEmpty();\n            this.search(null);\n        }\n        this.checkPlaceholderSize();\n        if (this.isPopupOpen()) {\n            this.refreshPopup();\n        }\n        if (!this.inputFocus) {\n            if (this.changeOnBlur) {\n                this.updateValueState(e, this.value, tempValues);\n            }\n            if (this.mode !== 'CheckBox') {\n                this.inputElement.focus();\n            }\n        }\n        if (this.mode === 'CheckBox') {\n            this.refreshPlaceHolder();\n            this.refreshInputHight();\n            if (this.changeOnBlur && isClearAll && (isNullOrUndefined(this.value) || this.value.length === 0)) {\n                this.updateValueState(e, this.value, this.tempValues);\n            }\n        }\n        if (!this.changeOnBlur && isClearAll && (isNullOrUndefined(this.value) || this.value.length === 0)) {\n            this.updateValueState(e, this.value, this.tempValues);\n        }\n        if (this.mode === 'CheckBox' && this.enableGroupCheckBox && !isNullOrUndefined(this.fields.groupBy)) {\n            this.updateListItems(this.list.querySelectorAll('li.e-list-item'), this.mainList.querySelectorAll('li.e-list-item'));\n        }\n        e.preventDefault();\n    }\n    windowResize() {\n        this.refreshPopup();\n        if ((!this.inputFocus || this.mode === 'CheckBox') && this.viewWrapper && this.viewWrapper.parentElement) {\n            this.updateDelimView();\n        }\n    }\n    resetValueHandler(e) {\n        const formElement = closest(this.inputElement, 'form');\n        if (formElement && e.target === formElement) {\n            const textVal = (this.element.tagName === this.getNgDirective()) ?\n                null : this.element.getAttribute('data-initial-value');\n            this.text = textVal;\n        }\n    }\n    wireEvent() {\n        EventHandler.add(this.componentWrapper, 'mousedown', this.wrapperClick, this);\n        EventHandler.add(window, 'resize', this.windowResize, this);\n        EventHandler.add(this.inputElement, 'focus', this.focusInHandler, this);\n        EventHandler.add(this.inputElement, 'keydown', this.onKeyDown, this);\n        EventHandler.add(this.inputElement, 'keyup', this.keyUp, this);\n        if (this.mode !== 'CheckBox') {\n            EventHandler.add(this.inputElement, 'input', this.onInput, this);\n        }\n        EventHandler.add(this.inputElement, 'blur', this.onBlurHandler, this);\n        EventHandler.add(this.componentWrapper, 'mousemove', this.mouseIn, this);\n        const formElement = closest(this.inputElement, 'form');\n        if (formElement) {\n            EventHandler.add(formElement, 'reset', this.resetValueHandler, this);\n        }\n        EventHandler.add(this.componentWrapper, 'mouseout', this.mouseOut, this);\n        EventHandler.add(this.overAllClear, 'mouseup', this.clearAll, this);\n        EventHandler.add(this.inputElement, 'paste', this.pasteHandler, this);\n    }\n    onInput(e) {\n        if (this.keyDownStatus) {\n            this.isValidKey = true;\n        }\n        else {\n            this.isValidKey = false;\n        }\n        this.keyDownStatus = false;\n        // For Filtering works in mobile firefox\n        if (Browser.isDevice && Browser.info.name === 'mozilla') {\n            this.search(e);\n        }\n    }\n    pasteHandler(event) {\n        setTimeout(() => {\n            this.expandTextbox();\n            this.search(event);\n        });\n    }\n    search(e) {\n        if (!isNullOrUndefined(e)) {\n            this.keyCode = e.keyCode;\n        }\n        if (!this.isPopupOpen() && this.openOnClick) {\n            this.showPopup();\n        }\n        this.openClick(e);\n        if (this.checkTextLength() && !this.allowFiltering && !isNullOrUndefined(e) && (e.keyCode !== 8)) {\n            this.focusAtFirstListItem();\n        }\n        else {\n            const text = this.targetElement();\n            if (this.allowFiltering) {\n                const eventArgs = {\n                    preventDefaultAction: false,\n                    text: this.targetElement(),\n                    updateData: (dataSource, query, fields) => {\n                        if (eventArgs.cancel) {\n                            return;\n                        }\n                        this.isFiltered = true;\n                        this.remoteFilterAction = true;\n                        this.dataUpdater(dataSource, query, fields);\n                    },\n                    event: e,\n                    cancel: false\n                };\n                this.trigger('filtering', eventArgs, (eventArgs) => {\n                    if (!eventArgs.cancel) {\n                        if (!this.isFiltered && !eventArgs.preventDefaultAction) {\n                            this.filterAction = true;\n                            this.dataUpdater(this.dataSource, null, this.fields);\n                        }\n                    }\n                });\n            }\n            else if (this.allowCustomValue) {\n                let query = new Query();\n                query = (text !== '') ? query.where(this.fields.text, 'startswith', text, this.ignoreCase, this.ignoreAccent) : query;\n                this.dataUpdater(this.mainData, query, this.fields);\n            }\n            else {\n                const liCollections = this.list.querySelectorAll('li.' + dropDownBaseClasses.li + ':not(.e-hide-listitem)');\n                const activeElement = Search(this.targetElement(), liCollections, 'StartsWith', this.ignoreCase);\n                if (activeElement && activeElement.item !== null) {\n                    this.addListFocus(activeElement.item);\n                    this.list.scrollTop =\n                        activeElement.item.offsetHeight * activeElement.index;\n                }\n                else if (this.targetElement() !== '') {\n                    this.removeFocus();\n                }\n                else {\n                    this.focusAtFirstListItem();\n                }\n            }\n        }\n    }\n    preRender() {\n        if (this.allowFiltering === null) {\n            this.allowFiltering = (this.mode === 'CheckBox') ? true : false;\n        }\n        this.initializeData();\n        this.updateDataAttribute(this.htmlAttributes);\n        super.preRender();\n    }\n    getLocaleName() {\n        return 'multi-select';\n    }\n    initializeData() {\n        this.mainListCollection = [];\n        this.beforePopupOpen = false;\n        this.filterAction = false;\n        this.remoteFilterAction = false;\n        this.isFirstClick = false;\n        this.mobFilter = true;\n        this.isFiltered = false;\n        this.focused = true;\n        this.initial = true;\n        this.backCommand = true;\n    }\n    updateData(delimiterChar, e) {\n        let data = '';\n        const delim = this.mode === 'Delimiter' || this.mode === 'CheckBox';\n        const text = [];\n        let temp;\n        const tempData = this.listData;\n        this.listData = this.mainData;\n        this.hiddenElement.innerHTML = '';\n        if (!isNullOrUndefined(this.value)) {\n            for (let index = 0; !isNullOrUndefined(this.value[index]); index++) {\n                const listValue = this.findListElement(((!isNullOrUndefined(this.mainList)) ? this.mainList : this.ulElement), 'li', 'data-value', this.value[index]);\n                if (isNullOrUndefined(listValue) && !this.allowCustomValue) {\n                    this.value.splice(index, 1);\n                    index -= 1;\n                }\n                else {\n                    if (this.listData) {\n                        temp = this.getTextByValue(this.value[index]);\n                    }\n                    else {\n                        temp = this.value[index];\n                    }\n                    data += temp + delimiterChar + ' ';\n                    text.push(temp);\n                }\n                this.hiddenElement.innerHTML += '<option selected value =\"' + this.value[index] + '\">' + index + '</option>';\n            }\n        }\n        this.setProperties({ text: text.toString() }, true);\n        if (delim) {\n            this.updateWrapperText(this.delimiterWrapper, data);\n            this.delimiterWrapper.setAttribute('id', getUniqueID('delim_val'));\n            this.inputElement.setAttribute('aria-describedby', this.delimiterWrapper.id);\n            this.inputElement.setAttribute('aria-labelledby', this.delimiterWrapper.id);\n        }\n        const targetEle = e && e.target;\n        const isClearAll = (targetEle && targetEle.classList.contains('e-close-hooker')) ? true : null;\n        if (!this.changeOnBlur && ((e && !isClearAll)) || this.isSelectAll) {\n            this.isSelectAll = false;\n            this.updateValueState(e, this.value, this.tempValues);\n        }\n        this.listData = tempData;\n        this.addValidInputClass();\n    }\n    initialTextUpdate() {\n        if (!isNullOrUndefined(this.text)) {\n            const textArr = this.text.split(this.delimiterChar);\n            const textVal = [];\n            for (let index = 0; textArr.length > index; index++) {\n                const val = this.getValueByText(textArr[index]);\n                if (!isNullOrUndefined(val)) {\n                    textVal.push(val);\n                }\n                else if (this.allowCustomValue) {\n                    textVal.push(textArr[index]);\n                }\n            }\n            if (textVal && textVal.length) {\n                this.setProperties({ value: textVal }, true);\n            }\n        }\n        else {\n            this.setProperties({ value: null }, true);\n        }\n    }\n    renderList(isEmptyData) {\n        if (!isEmptyData && this.allowCustomValue && this.list && (this.list.textContent === this.noRecordsTemplate\n            || this.list.querySelector('.e-ul') && this.list.querySelector('.e-ul').childElementCount === 0)) {\n            isEmptyData = true;\n        }\n        super.render(isEmptyData);\n        this.unwireListEvents();\n        this.wireListEvents();\n    }\n    initialValueUpdate() {\n        if (this.list) {\n            let text;\n            let element;\n            let value;\n            if (this.chipCollectionWrapper) {\n                this.chipCollectionWrapper.innerHTML = '';\n            }\n            this.removeListSelection();\n            if (!isNullOrUndefined(this.value)) {\n                for (let index = 0; !isNullOrUndefined(this.value[index]); index++) {\n                    value = this.value[index];\n                    element = this.findListElement(this.hideSelectedItem ? this.ulElement : this.list, 'li', 'data-value', value);\n                    text = this.getTextByValue(value);\n                    if ((element && (element.getAttribute('aria-selected') !== 'true')) ||\n                        (element && (element.getAttribute('aria-selected') === 'true' && this.hideSelectedItem) &&\n                            (this.mode === 'Box' || this.mode === 'Default'))) {\n                        this.addChip(text, value);\n                        this.addListSelection(element);\n                    }\n                    else if (value && this.allowCustomValue) {\n                        const indexItem = this.listData.length;\n                        const newValue = {};\n                        setValue(this.fields.text, value, newValue);\n                        setValue(this.fields.value, value, newValue);\n                        const noDataEle = this.popupWrapper.querySelector('.' + dropDownBaseClasses.noData);\n                        this.addItem(newValue, indexItem);\n                        element = element ? element : this.findListElement(this.hideSelectedItem ? this.ulElement : this.list, 'li', 'data-value', value);\n                        if (this.popupWrapper.contains(noDataEle)) {\n                            this.list.setAttribute('style', noDataEle.getAttribute('style'));\n                            this.popupWrapper.replaceChild(this.list, noDataEle);\n                            this.wireListEvents();\n                        }\n                        this.addChip(text, value);\n                        this.addListSelection(element);\n                    }\n                }\n            }\n            if (this.mode === 'CheckBox') {\n                this.updateDelimView();\n                if (this.changeOnBlur) {\n                    this.updateValueState(null, this.value, this.tempValues);\n                }\n                this.updateDelimeter(this.delimiterChar);\n                this.refreshInputHight();\n            }\n            else {\n                this.updateDelimeter(this.delimiterChar);\n            }\n            if (this.mode === 'CheckBox' && this.showSelectAll && (isNullOrUndefined(this.value) || !this.value.length)) {\n                this.notify('checkSelectAll', { module: 'CheckBoxSelection', enable: this.mode === 'CheckBox', value: 'uncheck' });\n            }\n            if (this.mode === 'Box' || (this.mode === 'Default' && this.inputFocus)) {\n                this.chipCollectionWrapper.style.display = '';\n            }\n            else if (this.mode === 'Delimiter' || this.mode === 'CheckBox') {\n                this.showDelimWrapper();\n            }\n        }\n    }\n    // eslint-disable-next-line @typescript-eslint/no-unused-vars\n    updateActionCompleteData(li, item) {\n        if (this.value && this.value.indexOf(li.getAttribute('data-value')) > -1) {\n            this.mainList = this.ulElement;\n            addClass([li], HIDE_LIST);\n        }\n    }\n    // eslint-disable-next-line @typescript-eslint/no-unused-vars\n    updateAddItemList(list, itemCount) {\n        if (this.popupObj && this.popupObj.element && this.popupObj.element.querySelector('.' + dropDownBaseClasses.noData) && list) {\n            this.list = list;\n            this.mainList = this.ulElement = list.querySelector('ul');\n            remove(this.popupWrapper.querySelector('.e-content'));\n            this.popupObj = null;\n            this.renderPopup();\n        }\n        else if (this.allowCustomValue) {\n            this.list = list;\n            this.mainList = this.ulElement = list.querySelector('ul');\n        }\n    }\n    updateDataList() {\n        if (this.mainList && this.ulElement && this.mainList.childElementCount < this.ulElement.childElementCount) {\n            this.mainList = this.ulElement.cloneNode ? this.ulElement.cloneNode(true) : this.ulElement;\n        }\n    }\n    isValidLI(li) {\n        return (li && !li.classList.contains(dropDownBaseClasses.disabled) && !li.classList.contains(dropDownBaseClasses.group) &&\n            li.classList.contains(dropDownBaseClasses.li));\n    }\n    updateListSelection(li, e, length) {\n        const customVal = li.getAttribute('data-value');\n        let value = this.getFormattedValue(customVal);\n        if (this.allowCustomValue && ((customVal !== 'false' && value === false) ||\n            (!isNullOrUndefined(value) && value.toString() === 'NaN'))) {\n            value = customVal;\n        }\n        this.removeHover();\n        if (!this.value || this.value.indexOf(value) === -1) {\n            this.dispatchSelect(value, e, li, (li.getAttribute('aria-selected') === 'true'), length);\n        }\n        else {\n            this.removeValue(value, e, length);\n        }\n    }\n    updateListSelectEventCallback(value, li, e) {\n        const text = this.getTextByValue(value);\n        if ((this.allowCustomValue || this.allowFiltering) && !this.findListElement(this.mainList, 'li', 'data-value', value)) {\n            const temp = li.cloneNode(true);\n            const fieldValue = this.fields.value ? this.fields.value : 'value';\n            if (this.allowCustomValue && this.mainData.length && typeof getValue(fieldValue, this.mainData[0]) === 'number') {\n                value = !isNaN(parseFloat(value.toString())) ? parseFloat(value.toString()) : value;\n            }\n            const data = this.getDataByValue(value);\n            const eventArgs = {\n                newData: data,\n                cancel: false\n            };\n            this.trigger('customValueSelection', eventArgs, (eventArgs) => {\n                if (!eventArgs.cancel) {\n                    append([temp], this.mainList);\n                    this.mainData.push(data);\n                    this.remoteCustomValue = false;\n                    this.addValue(value, text, e);\n                }\n            });\n        }\n        else {\n            this.remoteCustomValue = false;\n            this.addValue(value, text, e);\n        }\n    }\n    removeListSelection() {\n        const className = this.hideSelectedItem ?\n            HIDE_LIST :\n            dropDownBaseClasses.selected;\n        const selectedItems = this.list.querySelectorAll('.' + className);\n        let temp = selectedItems.length;\n        if (selectedItems && selectedItems.length) {\n            removeClass(selectedItems, className);\n            while (temp > 0) {\n                selectedItems[temp - 1].setAttribute('aria-selected', 'false');\n                temp--;\n            }\n        }\n        if (!isNullOrUndefined(this.mainList)) {\n            const selectItems = this.mainList.querySelectorAll('.' + className);\n            let temp1 = selectItems.length;\n            if (selectItems && selectItems.length) {\n                removeClass(selectItems, className);\n                while (temp1 > 0) {\n                    selectItems[temp1 - 1].setAttribute('aria-selected', 'false');\n                    if (this.mode === 'CheckBox') {\n                        if (selectedItems && (selectedItems.length > (temp1 - 1))) {\n                            selectedItems[temp1 - 1].firstElementChild.setAttribute('aria-checked', 'false');\n                            removeClass([selectedItems[temp1 - 1].firstElementChild.lastElementChild], 'e-check');\n                        }\n                        selectItems[temp1 - 1].firstElementChild.setAttribute('aria-checked', 'false');\n                        removeClass([selectItems[temp1 - 1].firstElementChild.lastElementChild], 'e-check');\n                    }\n                    temp1--;\n                }\n            }\n        }\n    }\n    removeHover() {\n        const hoveredItem = this.list.querySelectorAll('.' + dropDownBaseClasses.hover);\n        if (hoveredItem && hoveredItem.length) {\n            removeClass(hoveredItem, dropDownBaseClasses.hover);\n        }\n    }\n    removeFocus() {\n        if (this.list && this.mainList) {\n            const hoveredItem = this.list.querySelectorAll('.' + dropDownBaseClasses.focus);\n            const mainlist = this.mainList.querySelectorAll('.' + dropDownBaseClasses.focus);\n            if (hoveredItem && hoveredItem.length) {\n                removeClass(hoveredItem, dropDownBaseClasses.focus);\n                removeClass(mainlist, dropDownBaseClasses.focus);\n            }\n        }\n    }\n    addListHover(li) {\n        if (this.enabled && this.isValidLI(li)) {\n            this.removeHover();\n            addClass([li], dropDownBaseClasses.hover);\n        }\n        else {\n            if ((li !== null && li.classList.contains('e-list-group-item')) && this.enableGroupCheckBox && this.mode === 'CheckBox'\n                && !isNullOrUndefined(this.fields.groupBy)) {\n                this.removeHover();\n                addClass([li], dropDownBaseClasses.hover);\n            }\n        }\n    }\n    addListFocus(element) {\n        if (this.enabled && this.isValidLI(element)) {\n            this.removeFocus();\n            addClass([element], dropDownBaseClasses.focus);\n        }\n        else {\n            if (this.enableGroupCheckBox && this.mode === 'CheckBox' && !isNullOrUndefined(this.fields.groupBy)) {\n                addClass([element], dropDownBaseClasses.focus);\n            }\n        }\n    }\n    addListSelection(element, mainElement) {\n        const className = this.hideSelectedItem ?\n            HIDE_LIST :\n            dropDownBaseClasses.selected;\n        if (this.isValidLI(element) && !element.classList.contains(dropDownBaseClasses.hover)) {\n            addClass([element], className);\n            this.updateMainList(false, element.getAttribute('data-value'), mainElement);\n            element.setAttribute('aria-selected', 'true');\n            if (this.mode === 'CheckBox') {\n                const ariaCheck = element.firstElementChild.getAttribute('aria-checked');\n                if (ariaCheck === 'false' || isNullOrUndefined(ariaCheck)) {\n                    this.notify('updatelist', { module: 'CheckBoxSelection', enable: this.mode === 'CheckBox', li: element, e: this });\n                }\n            }\n            this.notify('activeList', { module: 'CheckBoxSelection', enable: this.mode === 'CheckBox', li: element, e: this });\n            if (this.chipCollectionWrapper) {\n                this.removeChipSelection();\n            }\n            attributes(this.inputElement, { 'aria-activedescendant': element.id });\n        }\n    }\n    updateDelimeter(delimChar, e) {\n        this.updateData(delimChar, e);\n    }\n    onMouseClick(e) {\n        this.keyCode = null;\n        this.scrollFocusStatus = false;\n        let target = e.target;\n        const li = closest(target, '.' + dropDownBaseClasses.li);\n        const headerLi = closest(target, '.' + dropDownBaseClasses.group);\n        if (headerLi && this.enableGroupCheckBox && this.mode === 'CheckBox' && this.fields.groupBy) {\n            target = target.classList.contains('e-list-group-item') ? target.firstElementChild.lastElementChild\n                : e.target;\n            if (target.classList.contains('e-check')) {\n                this.selectAllItem(false, e);\n                target.classList.remove('e-check');\n                target.classList.remove('e-stop');\n                closest(target, '.' + 'e-list-group-item').classList.remove('e-active');\n                target.setAttribute('aria-selected', 'false');\n            }\n            else {\n                this.selectAllItem(true, e);\n                target.classList.remove('e-stop');\n                target.classList.add('e-check');\n                closest(target, '.' + 'e-list-group-item').classList.add('e-active');\n                target.setAttribute('aria-selected', 'true');\n            }\n            this.refreshSelection();\n            this.checkSelectAll();\n        }\n        else {\n            if (this.isValidLI(li)) {\n                let limit = this.value && this.value.length ? this.value.length : 0;\n                if (li.classList.contains('e-active')) {\n                    limit = limit - 1;\n                }\n                if (limit < this.maximumSelectionLength) {\n                    this.updateListSelection(li, e);\n                    this.checkPlaceholderSize();\n                    this.addListFocus(li);\n                    if ((this.allowCustomValue || this.allowFiltering) && this.mainList && this.listData) {\n                        if (this.mode !== 'CheckBox') {\n                            this.focusAtLastListItem(li.getAttribute('data-value'));\n                            this.refreshSelection();\n                        }\n                    }\n                    else {\n                        this.makeTextBoxEmpty();\n                    }\n                }\n                if (this.mode === 'CheckBox') {\n                    this.updateDelimView();\n                    if (this.value && this.value.length > 50) {\n                        setTimeout(() => {\n                            this.updateDelimeter(this.delimiterChar, e);\n                        }, 0);\n                    }\n                    else {\n                        this.updateDelimeter(this.delimiterChar, e);\n                    }\n                    this.refreshInputHight();\n                }\n                else {\n                    this.updateDelimeter(this.delimiterChar, e);\n                }\n                this.checkSelectAll();\n                this.refreshPopup();\n                if (this.hideSelectedItem) {\n                    this.focusAtFirstListItem();\n                }\n                if (this.closePopupOnSelect) {\n                    this.hidePopup();\n                }\n                else {\n                    e.preventDefault();\n                }\n                this.makeTextBoxEmpty();\n                this.findGroupStart(target);\n                if (this.mode !== 'CheckBox') {\n                    this.refreshListItems(isNullOrUndefined(li) ? null : li.textContent);\n                }\n            }\n            else {\n                e.preventDefault();\n            }\n            this.refreshPlaceHolder();\n            this.deselectHeader();\n        }\n    }\n    findGroupStart(target) {\n        if (this.enableGroupCheckBox && this.mode === 'CheckBox' && !isNullOrUndefined(this.fields.groupBy)) {\n            const count = 0;\n            const liChecked = 0;\n            const liUnchecked = 0;\n            let groupValues;\n            if (this.itemTemplate && !target.getElementsByClassName('e-frame').length) {\n                while (!target.getElementsByClassName('e-frame').length) {\n                    target = target.parentElement;\n                }\n            }\n            if (target.classList.contains('e-frame')) {\n                target = target.parentElement.parentElement;\n            }\n            groupValues = this.findGroupAttrtibutes(target, liChecked, liUnchecked, count, 0);\n            groupValues = this.findGroupAttrtibutes(target, groupValues[0], groupValues[1], groupValues[2], 1);\n            while (!target.classList.contains('e-list-group-item')) {\n                if (target.classList.contains('e-list-icon')) {\n                    target = target.parentElement;\n                }\n                target = target.previousElementSibling;\n                if (target == null) {\n                    break;\n                }\n            }\n            this.updateCheckBox(target, groupValues[0], groupValues[1], groupValues[2]);\n        }\n    }\n    findGroupAttrtibutes(listElement, checked, unChecked, count, position) {\n        while (!listElement.classList.contains('e-list-group-item')) {\n            if (listElement.classList.contains('e-list-icon')) {\n                listElement = listElement.parentElement;\n            }\n            if (listElement.getElementsByClassName('e-frame')[0].classList.contains('e-check') &&\n                listElement.classList.contains('e-list-item')) {\n                checked++;\n            }\n            else if (listElement.classList.contains('e-list-item')) {\n                unChecked++;\n            }\n            count++;\n            listElement = position ? listElement.nextElementSibling : listElement.previousElementSibling;\n            if (listElement == null) {\n                break;\n            }\n        }\n        return [checked, unChecked, count];\n    }\n    updateCheckBox(groupHeader, checked, unChecked, count) {\n        if (groupHeader === null) {\n            return;\n        }\n        const checkBoxElement = groupHeader.getElementsByClassName('e-frame')[0];\n        if (count === checked) {\n            checkBoxElement.classList.remove('e-stop');\n            checkBoxElement.classList.add('e-check');\n            closest(checkBoxElement, '.' + 'e-list-group-item').classList.add('e-active');\n            groupHeader.setAttribute('aria-selected', 'true');\n        }\n        else if (count === unChecked) {\n            checkBoxElement.classList.remove('e-check');\n            checkBoxElement.classList.remove('e-stop');\n            closest(checkBoxElement, '.' + 'e-list-group-item').classList.remove('e-active');\n            groupHeader.setAttribute('aria-selected', 'false');\n        }\n        else if (this.maximumSelectionLength === checked - 1) {\n            checkBoxElement.classList.remove('e-stop');\n            groupHeader.setAttribute('aria-selected', 'true');\n            closest(checkBoxElement, '.' + 'e-list-group-item').classList.add('e-active');\n            checkBoxElement.classList.add('e-check');\n        }\n        else {\n            checkBoxElement.classList.remove('e-check');\n            checkBoxElement.classList.add('e-stop');\n            closest(checkBoxElement, '.' + 'e-list-group-item').classList.add('e-active');\n            groupHeader.setAttribute('aria-selected', 'false');\n        }\n    }\n    deselectHeader() {\n        const limit = this.value && this.value.length ? this.value.length : 0;\n        const collection = this.list.querySelectorAll('li.e-list-group-item:not(.e-active)');\n        if (limit < this.maximumSelectionLength) {\n            removeClass(collection, 'e-disable');\n        }\n        if (limit === this.maximumSelectionLength) {\n            addClass(collection, 'e-disable');\n        }\n    }\n    onMouseOver(e) {\n        let currentLi = closest(e.target, '.' + dropDownBaseClasses.li);\n        if (currentLi === null && this.mode === 'CheckBox' && !isNullOrUndefined(this.fields.groupBy)\n            && this.enableGroupCheckBox) {\n            currentLi = closest(e.target, '.' + dropDownBaseClasses.group);\n        }\n        this.addListHover(currentLi);\n    }\n    onMouseLeave() {\n        this.removeHover();\n    }\n    onListMouseDown(e) {\n        e.preventDefault();\n        this.scrollFocusStatus = true;\n    }\n    onDocumentClick(e) {\n        if (this.mode !== 'CheckBox') {\n            const target = e.target;\n            if (!(!isNullOrUndefined(this.popupObj) && closest(target, '[id=\"' + this.popupObj.element.id + '\"]')) &&\n                !this.overAllWrapper.contains(e.target)) {\n                this.scrollFocusStatus = false;\n            }\n            else {\n                this.scrollFocusStatus = (Browser.isIE || Browser.info.name === 'edge') && (document.activeElement === this.inputElement);\n            }\n        }\n    }\n    wireListEvents() {\n        EventHandler.add(document, 'mousedown', this.onDocumentClick, this);\n        EventHandler.add(this.list, 'mousedown', this.onListMouseDown, this);\n        EventHandler.add(this.list, 'mouseup', this.onMouseClick, this);\n        EventHandler.add(this.list, 'mouseover', this.onMouseOver, this);\n        EventHandler.add(this.list, 'mouseout', this.onMouseLeave, this);\n    }\n    unwireListEvents() {\n        EventHandler.remove(document, 'mousedown', this.onDocumentClick);\n        if (this.list) {\n            EventHandler.remove(this.list, 'mousedown', this.onListMouseDown);\n            EventHandler.remove(this.list, 'mouseup', this.onMouseClick);\n            EventHandler.remove(this.list, 'mouseover', this.onMouseOver);\n            EventHandler.remove(this.list, 'mouseout', this.onMouseLeave);\n        }\n    }\n    hideOverAllClear() {\n        if (!this.value || !this.value.length || this.inputElement.value === '') {\n            this.overAllClear.style.display = 'none';\n        }\n    }\n    showOverAllClear() {\n        if (((this.value && this.value.length) || this.inputElement.value !== '') && this.showClearButton && this.readonly !== true) {\n            this.overAllClear.style.display = '';\n        }\n        else {\n            this.overAllClear.style.display = 'none';\n        }\n    }\n    /**\n     * Sets the focus to widget for interaction.\n     *\n     * @returns {void}\n     */\n    focusIn() {\n        if (document.activeElement !== this.inputElement && this.enabled) {\n            this.inputElement.focus();\n        }\n    }\n    /**\n     * Remove the focus from widget, if the widget is in focus state.\n     *\n     * @returns {void}\n     */\n    focusOut() {\n        if (document.activeElement === this.inputElement && this.enabled) {\n            this.inputElement.blur();\n        }\n    }\n    /**\n     * Shows the spinner loader.\n     *\n     * @returns {void}\n     */\n    showSpinner() {\n        if (isNullOrUndefined(this.spinnerElement)) {\n            let filterClear = this.filterParent && this.filterParent.querySelector('.e-clear-icon.e-icons');\n            if (this.overAllClear.style.display !== 'none' || filterClear) {\n                this.spinnerElement = filterClear ? filterClear : this.overAllClear;\n            }\n            else {\n                this.spinnerElement = this.createElement('span', { className: CLOSEICON_CLASS$1 + ' ' + SPINNER_CLASS$1 });\n                this.componentWrapper.appendChild(this.spinnerElement);\n            }\n            createSpinner({ target: this.spinnerElement, width: Browser.isDevice ? '16px' : '14px' }, this.createElement);\n            addClass([this.spinnerElement], DISABLE_ICON);\n            showSpinner(this.spinnerElement);\n        }\n    }\n    /**\n     * Hides the spinner loader.\n     *\n     * @returns {void}\n     */\n    hideSpinner() {\n        if (!isNullOrUndefined(this.spinnerElement)) {\n            hideSpinner(this.spinnerElement);\n            removeClass([this.spinnerElement], DISABLE_ICON);\n            if (this.spinnerElement.classList.contains(SPINNER_CLASS$1)) {\n                detach(this.spinnerElement);\n            }\n            else {\n                this.spinnerElement.innerHTML = '';\n            }\n            this.spinnerElement = null;\n        }\n    }\n    updateWrapperText(wrapperType, wrapperData) {\n        if (this.valueTemplate || !this.enableHtmlSanitizer) {\n            wrapperType.innerHTML = wrapperData;\n        }\n        else {\n            wrapperType.innerText = SanitizeHtmlHelper.sanitize(wrapperData);\n        }\n    }\n    updateDelimView() {\n        if (this.delimiterWrapper) {\n            this.hideDelimWrapper();\n        }\n        if (this.chipCollectionWrapper) {\n            this.chipCollectionWrapper.style.display = 'none';\n        }\n        this.viewWrapper.style.display = '';\n        this.viewWrapper.style.width = '';\n        this.viewWrapper.classList.remove(TOTAL_COUNT_WRAPPER$1);\n        if (this.value && this.value.length) {\n            let data = '';\n            let temp;\n            let tempData;\n            let tempIndex = 1;\n            let wrapperleng;\n            let remaining;\n            let downIconWidth = 0;\n            let overAllContainer;\n            this.updateWrapperText(this.viewWrapper, data);\n            const l10nLocale = {\n                noRecordsTemplate: 'No records found',\n                actionFailureTemplate: 'Request failed',\n                overflowCountTemplate: '+${count} more..',\n                totalCountTemplate: '${count} selected'\n            };\n            let l10n = new L10n(this.getLocaleName(), l10nLocale, this.locale);\n            if (l10n.getConstant('actionFailureTemplate') === '') {\n                l10n = new L10n('dropdowns', l10nLocale, this.locale);\n            }\n            if (l10n.getConstant('noRecordsTemplate') === '') {\n                l10n = new L10n('dropdowns', l10nLocale, this.locale);\n            }\n            const remainContent = l10n.getConstant('overflowCountTemplate');\n            const totalContent = l10n.getConstant('totalCountTemplate');\n            const raminElement = this.createElement('span', {\n                className: REMAIN_WRAPPER$1\n            });\n            let remainCompildTemp = remainContent.replace('${count}', this.value.length.toString());\n            raminElement.innerText = remainCompildTemp;\n            this.viewWrapper.appendChild(raminElement);\n            this.renderReactTemplates();\n            const remainSize = raminElement.offsetWidth;\n            remove(raminElement);\n            if (this.showDropDownIcon) {\n                downIconWidth = this.dropIcon.offsetWidth + parseInt(window.getComputedStyle(this.dropIcon).marginRight, 10);\n            }\n            this.checkClearIconWidth();\n            if (!isNullOrUndefined(this.value)) {\n                for (let index = 0; !isNullOrUndefined(this.value[index]); index++) {\n                    data += (index === 0) ? '' : this.delimiterChar + ' ';\n                    temp = this.getOverflowVal(index);\n                    data += temp;\n                    temp = this.viewWrapper.innerHTML;\n                    this.updateWrapperText(this.viewWrapper, data);\n                    wrapperleng = this.viewWrapper.offsetWidth +\n                        parseInt(window.getComputedStyle(this.viewWrapper).paddingRight, 10);\n                    overAllContainer = this.componentWrapper.offsetWidth -\n                        parseInt(window.getComputedStyle(this.componentWrapper).paddingLeft, 10) -\n                        parseInt(window.getComputedStyle(this.componentWrapper).paddingRight, 10);\n                    if ((wrapperleng + downIconWidth + this.clearIconWidth) > overAllContainer) {\n                        if (tempData !== undefined && tempData !== '') {\n                            temp = tempData;\n                            index = tempIndex + 1;\n                        }\n                        this.updateWrapperText(this.viewWrapper, temp);\n                        remaining = this.value.length - index;\n                        wrapperleng = this.viewWrapper.offsetWidth +\n                            parseInt(window.getComputedStyle(this.viewWrapper).paddingRight, 10);\n                        while (((wrapperleng + remainSize + downIconWidth + this.clearIconWidth) > overAllContainer) && wrapperleng !== 0\n                            && this.viewWrapper.innerHTML !== '') {\n                            const textArr = [];\n                            this.viewWrapper.innerHTML = textArr.join(this.delimiterChar);\n                            remaining = this.value.length;\n                            wrapperleng = this.viewWrapper.offsetWidth +\n                                parseInt(window.getComputedStyle(this.viewWrapper).paddingRight, 10);\n                        }\n                        break;\n                    }\n                    else if ((wrapperleng + remainSize + downIconWidth + this.clearIconWidth) <= overAllContainer) {\n                        tempData = data;\n                        tempIndex = index;\n                    }\n                    else if (index === 0) {\n                        tempData = '';\n                        tempIndex = -1;\n                    }\n                }\n            }\n            if (remaining > 0) {\n                const totalWidth = overAllContainer - downIconWidth - this.clearIconWidth;\n                this.viewWrapper.appendChild(this.updateRemainTemplate(raminElement, this.viewWrapper, remaining, remainContent, totalContent, totalWidth));\n                this.updateRemainWidth(this.viewWrapper, totalWidth);\n                this.updateRemainingText(raminElement, downIconWidth, remaining, remainContent, totalContent);\n            }\n        }\n        else {\n            this.viewWrapper.innerHTML = '';\n            this.viewWrapper.style.display = 'none';\n        }\n    }\n    checkClearIconWidth() {\n        if (this.showClearButton) {\n            this.clearIconWidth = this.overAllClear.offsetWidth;\n        }\n    }\n    updateRemainWidth(viewWrapper, totalWidth) {\n        if (viewWrapper.classList.contains(TOTAL_COUNT_WRAPPER$1) && totalWidth < (viewWrapper.offsetWidth +\n            parseInt(window.getComputedStyle(viewWrapper).paddingLeft, 10)\n            + parseInt(window.getComputedStyle(viewWrapper).paddingLeft, 10))) {\n            viewWrapper.style.width = totalWidth + 'px';\n        }\n    }\n    updateRemainTemplate(raminElement, viewWrapper, remaining, remainContent, totalContent, totalWidth) {\n        if (viewWrapper.firstChild && viewWrapper.firstChild.nodeType === 3 && viewWrapper.firstChild.nodeValue === '') {\n            viewWrapper.removeChild(viewWrapper.firstChild);\n        }\n        raminElement.innerHTML = '';\n        let remainTemp = remainContent.replace('${count}', remaining.toString());\n        let totalTemp = totalContent.replace('${count}', remaining.toString());\n        raminElement.innerText = (viewWrapper.firstChild && viewWrapper.firstChild.nodeType === 3) ? remainTemp : totalTemp;\n        if (viewWrapper.firstChild && viewWrapper.firstChild.nodeType === 3) {\n            viewWrapper.classList.remove(TOTAL_COUNT_WRAPPER$1);\n        }\n        else {\n            viewWrapper.classList.add(TOTAL_COUNT_WRAPPER$1);\n            this.updateRemainWidth(viewWrapper, totalWidth);\n        }\n        return raminElement;\n    }\n    updateRemainingText(raminElement, downIconWidth, remaining, remainContent, totalContent) {\n        const overAllContainer = this.componentWrapper.offsetWidth -\n            parseInt(window.getComputedStyle(this.componentWrapper).paddingLeft, 10) -\n            parseInt(window.getComputedStyle(this.componentWrapper).paddingRight, 10);\n        let wrapperleng = this.viewWrapper.offsetWidth + parseInt(window.getComputedStyle(this.viewWrapper).paddingRight, 10);\n        if (((wrapperleng + downIconWidth) >= overAllContainer) && wrapperleng !== 0 && this.viewWrapper.firstChild &&\n            this.viewWrapper.firstChild.nodeType === 3) {\n            while (((wrapperleng + downIconWidth) > overAllContainer) && wrapperleng !== 0 && this.viewWrapper.firstChild &&\n                this.viewWrapper.firstChild.nodeType === 3) {\n                const textArr = this.viewWrapper.firstChild.nodeValue.split(this.delimiterChar);\n                textArr.pop();\n                this.viewWrapper.firstChild.nodeValue = textArr.join(this.delimiterChar);\n                if (this.viewWrapper.firstChild.nodeValue === '') {\n                    this.viewWrapper.removeChild(this.viewWrapper.firstChild);\n                }\n                remaining++;\n                wrapperleng = this.viewWrapper.offsetWidth;\n            }\n            const totalWidth = overAllContainer - downIconWidth;\n            this.updateRemainTemplate(raminElement, this.viewWrapper, remaining, remainContent, totalContent, totalWidth);\n        }\n    }\n    getOverflowVal(index) {\n        let temp;\n        if (this.mainData && this.mainData.length) {\n            if (this.mode === 'CheckBox') {\n                const newTemp = this.listData;\n                this.listData = this.mainData;\n                temp = this.getTextByValue(this.value[index]);\n                this.listData = newTemp;\n            }\n            else {\n                temp = this.getTextByValue(this.value[index]);\n            }\n        }\n        else {\n            temp = this.value[index];\n        }\n        return temp;\n    }\n    unWireEvent() {\n        EventHandler.remove(this.componentWrapper, 'mousedown', this.wrapperClick);\n        EventHandler.remove(window, 'resize', this.windowResize);\n        EventHandler.remove(this.inputElement, 'focus', this.focusInHandler);\n        EventHandler.remove(this.inputElement, 'keydown', this.onKeyDown);\n        if (this.mode !== 'CheckBox') {\n            EventHandler.remove(this.inputElement, 'input', this.onInput);\n        }\n        EventHandler.remove(this.inputElement, 'keyup', this.keyUp);\n        const formElement = closest(this.inputElement, 'form');\n        if (formElement) {\n            EventHandler.remove(formElement, 'reset', this.resetValueHandler);\n        }\n        EventHandler.remove(this.inputElement, 'blur', this.onBlurHandler);\n        EventHandler.remove(this.componentWrapper, 'mousemove', this.mouseIn);\n        EventHandler.remove(this.componentWrapper, 'mouseout', this.mouseOut);\n        EventHandler.remove(this.overAllClear, 'mousedown', this.clearAll);\n        EventHandler.remove(this.inputElement, 'paste', this.pasteHandler);\n    }\n    selectAllItem(state, event, list) {\n        let li;\n        li = this.list.querySelectorAll(state ?\n            'li.e-list-item:not([aria-selected=\"true\"]):not(.e-reorder-hide)' :\n            'li.e-list-item[aria-selected=\"true\"]:not(.e-reorder-hide)');\n        if (this.value && this.value.length && event && event.target\n            && closest(event.target, '.e-close-hooker') && this.allowFiltering) {\n            li = this.mainList.querySelectorAll(state ?\n                'li.e-list-item:not([aria-selected=\"true\"]):not(.e-reorder-hide)' :\n                'li.e-list-item[aria-selected=\"true\"]:not(.e-reorder-hide)');\n        }\n        if (this.enableGroupCheckBox && this.mode === 'CheckBox' && !isNullOrUndefined(this.fields.groupBy)) {\n            let target = (event ? event.target : null);\n            target = (event && event.keyCode === 32) ? list : target;\n            target = (target && target.classList.contains('e-frame')) ? target.parentElement.parentElement : target;\n            if (target && target.classList.contains('e-list-group-item')) {\n                let listElement = target.nextElementSibling;\n                if (isNullOrUndefined(listElement)) {\n                    return;\n                }\n                while (listElement.classList.contains('e-list-item')) {\n                    if (state) {\n                        if (!listElement.firstElementChild.lastElementChild.classList.contains('e-check')) {\n                            let selectionLimit = this.value && this.value.length ? this.value.length : 0;\n                            if (listElement.classList.contains('e-active')) {\n                                selectionLimit -= 1;\n                            }\n                            if (selectionLimit < this.maximumSelectionLength) {\n                                this.updateListSelection(listElement, event);\n                            }\n                        }\n                    }\n                    else {\n                        if (listElement.firstElementChild.lastElementChild.classList.contains('e-check')) {\n                            this.updateListSelection(listElement, event);\n                        }\n                    }\n                    listElement = listElement.nextElementSibling;\n                    if (listElement == null) {\n                        break;\n                    }\n                }\n                if (target.classList.contains('e-list-group-item')) {\n                    const focusedElement = this.list.getElementsByClassName('e-item-focus')[0];\n                    if (focusedElement) {\n                        focusedElement.classList.remove('e-item-focus');\n                    }\n                    if (state) {\n                        target.classList.add('e-active');\n                    }\n                    else {\n                        target.classList.remove('e-active');\n                    }\n                    target.classList.add('e-item-focus');\n                }\n                this.textboxValueUpdate();\n                this.checkPlaceholderSize();\n                if (!this.changeOnBlur && event) {\n                    this.updateValueState(event, this.value, this.tempValues);\n                }\n            }\n            else {\n                this.updateValue(event, li, state);\n            }\n        }\n        else {\n            this.updateValue(event, li, state);\n        }\n    }\n    updateValue(event, li, state) {\n        const length = li.length;\n        const beforeSelectArgs = {\n            event: event,\n            items: state ? li : [],\n            itemData: state ? this.listData : [],\n            isInteracted: event ? true : false,\n            isChecked: state,\n            preventSelectEvent: false\n        };\n        this.trigger('beforeSelectAll', beforeSelectArgs);\n        if (li && li.length) {\n            let index = 0;\n            let count = 0;\n            if (this.enableGroupCheckBox) {\n                count = state ? this.maximumSelectionLength - (this.value ? this.value.length : 0) : li.length;\n            }\n            else {\n                count = state ? this.maximumSelectionLength - (this.value ? this.value.length : 0) : this.maximumSelectionLength;\n            }\n            if (!beforeSelectArgs.preventSelectEvent) {\n                while (index < length && index <= 50 && index < count) {\n                    this.updateListSelection(li[index], event, length - index);\n                    if (this.enableGroupCheckBox) {\n                        this.findGroupStart(li[index]);\n                    }\n                    index++;\n                }\n                if (length > 50) {\n                    setTimeout(() => {\n                        while (index < length && index < count) {\n                            this.updateListSelection(li[index], event, length - index);\n                            if (this.enableGroupCheckBox) {\n                                this.findGroupStart(li[index]);\n                            }\n                            index++;\n                        }\n                        this.updatedataValueItems(event);\n                        if (!this.changeOnBlur) {\n                            this.updateValueState(event, this.value, this.tempValues);\n                            this.isSelectAll = this.isSelectAll ? !this.isSelectAll : this.isSelectAll;\n                        }\n                        this.updateHiddenElement();\n                    }, 0);\n                }\n            }\n            else {\n                for (let i = 0; i < li.length && i < count; i++) {\n                    this.removeHover();\n                    let customVal = li[i].getAttribute('data-value');\n                    let value = this.getFormattedValue(customVal);\n                    let mainElement = this.mainList ? this.mainList.querySelectorAll(state ?\n                        'li.e-list-item:not([aria-selected=\"true\"]):not(.e-reorder-hide)' :\n                        'li.e-list-item[aria-selected=\"true\"]:not(.e-reorder-hide)')[i] : null;\n                    if (state) {\n                        this.value = !this.value ? [] : this.value;\n                        if (this.value.indexOf(value) < 0) {\n                            this.setProperties({ value: [].concat([], this.value, [value]) }, true);\n                        }\n                        this.removeFocus();\n                        this.addListSelection(li[i], mainElement);\n                        this.updateChipStatus();\n                        this.checkMaxSelection();\n                    }\n                    else {\n                        this.removeAllItems(value, event, false, li[i], mainElement);\n                    }\n                    if (this.enableGroupCheckBox) {\n                        this.findGroupStart(li[i]);\n                    }\n                }\n                if (!state) {\n                    const limit = this.value && this.value.length ? this.value.length : 0;\n                    if (limit < this.maximumSelectionLength) {\n                        const collection = this.list.querySelectorAll('li.'\n                            + dropDownBaseClasses.li + ':not(.e-active)');\n                        removeClass(collection, 'e-disable');\n                    }\n                }\n                const args = {\n                    event: event,\n                    items: state ? li : [],\n                    itemData: state ? this.listData : [],\n                    isInteracted: event ? true : false,\n                    isChecked: state\n                };\n                this.trigger('selectedAll', args);\n            }\n        }\n        this.updatedataValueItems(event);\n        this.checkPlaceholderSize();\n        if (length <= 50 && !beforeSelectArgs.preventSelectEvent) {\n            if (!this.changeOnBlur) {\n                this.updateValueState(event, this.value, this.tempValues);\n                this.isSelectAll = this.isSelectAll ? !this.isSelectAll : this.isSelectAll;\n            }\n            this.updateHiddenElement();\n        }\n    }\n    updateHiddenElement() {\n        let hiddenValue = '';\n        let wrapperText = '';\n        let data = '';\n        const text = [];\n        if (this.mode === 'CheckBox') {\n            this.value.map((value, index) => {\n                hiddenValue += '<option selected value =\"' + value + '\">' + index + '</option>';\n                if (this.listData) {\n                    data = this.getTextByValue(value);\n                }\n                else {\n                    data = value;\n                }\n                wrapperText += data + this.delimiterChar + ' ';\n                text.push(data);\n            });\n            this.hiddenElement.innerHTML = hiddenValue;\n            this.updateWrapperText(this.delimiterWrapper, wrapperText);\n            this.delimiterWrapper.setAttribute('id', getUniqueID('delim_val'));\n            this.inputElement.setAttribute('aria-describedby', this.delimiterWrapper.id);\n            this.inputElement.setAttribute('aria-labelledby', this.delimiterWrapper.id);\n            this.setProperties({ text: text.toString() }, true);\n            this.refreshInputHight();\n            this.refreshPlaceHolder();\n        }\n    }\n    updatedataValueItems(event) {\n        this.deselectHeader();\n        this.textboxValueUpdate(event);\n    }\n    textboxValueUpdate(event) {\n        const isRemoveAll = event && event.target && (closest(event.target, '.e-selectall-parent')\n            || closest(event.target, '.e-close-hooker'));\n        if (this.mode !== 'Box' && !this.isPopupOpen() && !(this.mode === 'CheckBox' && (this.isSelectAll || isRemoveAll))) {\n            this.updateDelimView();\n        }\n        else {\n            this.searchWrapper.classList.remove(ZERO_SIZE);\n        }\n        if (this.mode === 'CheckBox') {\n            this.updateDelimView();\n            if (!(isRemoveAll || this.isSelectAll)) {\n                this.updateDelimeter(this.delimiterChar, event);\n            }\n            this.refreshInputHight();\n        }\n        else {\n            this.updateDelimeter(this.delimiterChar, event);\n        }\n        this.refreshPlaceHolder();\n    }\n    setZIndex() {\n        if (this.popupObj) {\n            this.popupObj.setProperties({ 'zIndex': this.zIndex });\n        }\n    }\n    // eslint-disable-next-line @typescript-eslint/no-unused-vars\n    updateDataSource(prop) {\n        if (isNullOrUndefined(this.list)) {\n            this.renderPopup();\n        }\n        else {\n            this.resetList(this.dataSource);\n        }\n        if (this.value && this.value.length) {\n            this.setProperties({ 'value': this.value });\n            this.refreshSelection();\n        }\n    }\n    onLoadSelect() {\n        this.setDynValue = true;\n        this.renderPopup();\n    }\n    selectAllItems(state, event) {\n        if (isNullOrUndefined(this.list)) {\n            this.selectAllAction = () => {\n                if (this.mode === 'CheckBox' && this.showSelectAll) {\n                    const args = {\n                        module: 'CheckBoxSelection',\n                        enable: this.mode === 'CheckBox',\n                        value: state ? 'check' : 'uncheck'\n                    };\n                    this.notify('checkSelectAll', args);\n                }\n                this.selectAllItem(state, event);\n                this.selectAllAction = null;\n            };\n            super.render();\n        }\n        else {\n            this.selectAllAction = null;\n            if (this.mode === 'CheckBox' && this.showSelectAll) {\n                const args = {\n                    value: state ? 'check' : 'uncheck',\n                    enable: this.mode === 'CheckBox',\n                    module: 'CheckBoxSelection'\n                };\n                this.notify('checkSelectAll', args);\n            }\n            this.selectAllItem(state, event);\n        }\n    }\n    /**\n     * Get the properties to be maintained in the persisted state.\n     *\n     * @returns {string} Returns the persisted data of the component.\n     */\n    getPersistData() {\n        return this.addOnPersist(['value']);\n    }\n    /**\n     * Dynamically change the value of properties.\n     *\n     * @param {MultiSelectModel} newProp - Returns the dynamic property value of the component.\n     * @param {MultiSelectModel} oldProp - Returns the previous property value of the component.\n     * @private\n     * @returns {void}\n     */\n    onPropertyChanged(newProp, oldProp) {\n        if (newProp.dataSource && !isNullOrUndefined(Object.keys(newProp.dataSource))\n            || newProp.query && !isNullOrUndefined(Object.keys(newProp.query))) {\n            this.mainList = null;\n            this.mainData = null;\n            this.isFirstClick = false;\n            this.isDynamicDataChange = true;\n        }\n        if (this.getModuleName() === 'multiselect') {\n            this.filterAction = false;\n            this.setUpdateInitial(['fields', 'query', 'dataSource'], newProp);\n        }\n        for (const prop of Object.keys(newProp)) {\n            switch (prop) {\n                case 'query':\n                case 'dataSource':\n                    if (this.mode === 'CheckBox' && this.showSelectAll) {\n                        if (!isNullOrUndefined(this.popupObj)) {\n                            this.popupObj.destroy();\n                            this.popupObj = null;\n                        }\n                        this.renderPopup();\n                    }\n                    break;\n                case 'htmlAttributes':\n                    this.updateHTMLAttribute();\n                    break;\n                case 'showClearButton':\n                    this.updateClearButton(newProp.showClearButton);\n                    break;\n                case 'text':\n                    this.updateVal(this.value, this.value, 'text');\n                    break;\n                case 'value':\n                    this.updateVal(this.value, oldProp.value, 'value');\n                    this.addValidInputClass();\n                    if (!this.closePopupOnSelect && this.isPopupOpen()) {\n                        this.refreshPopup();\n                    }\n                    this.preventChange = this.isAngular && this.preventChange ? !this.preventChange : this.preventChange;\n                    break;\n                case 'width':\n                    this.setWidth(newProp.width);\n                    this.popupObj.setProperties({ width: this.calcPopupWidth() });\n                    break;\n                case 'placeholder':\n                    this.refreshPlaceHolder();\n                    break;\n                case 'filterBarPlaceholder':\n                    if (this.allowFiltering) {\n                        this.notify('filterBarPlaceholder', { filterBarPlaceholder: newProp.filterBarPlaceholder });\n                    }\n                    break;\n                case 'delimiterChar':\n                    if (this.mode !== 'Box') {\n                        this.updateDelimView();\n                    }\n                    this.updateData(newProp.delimiterChar);\n                    break;\n                case 'cssClass':\n                    this.updateOldPropCssClass(oldProp.cssClass);\n                    this.updateCssClass();\n                    break;\n                case 'enableRtl':\n                    this.enableRTL(newProp.enableRtl);\n                    super.onPropertyChanged(newProp, oldProp);\n                    break;\n                case 'readonly':\n                    this.updateReadonly(newProp.readonly);\n                    this.hidePopup();\n                    break;\n                case 'enabled':\n                    this.hidePopup();\n                    this.enable(newProp.enabled);\n                    break;\n                case 'showSelectAll':\n                    if (this.popupObj) {\n                        this.popupObj.destroy();\n                        this.popupObj = null;\n                    }\n                    this.renderPopup();\n                    break;\n                case 'showDropDownIcon':\n                    this.dropDownIcon();\n                    break;\n                case 'floatLabelType':\n                    this.setFloatLabelType();\n                    this.addValidInputClass();\n                    break;\n                case 'enableSelectionOrder':\n                    break;\n                case 'selectAllText':\n                    this.notify('selectAllText', false);\n                    break;\n                case 'popupHeight':\n                case 'headerTemplate':\n                case 'footerTemplate':\n                    this.reInitializePoup();\n                    break;\n                case 'allowFiltering':\n                    if (this.mode === 'CheckBox' && this.popupObj) {\n                        this.reInitializePoup();\n                    }\n                    this.updateSelectElementData(this.allowFiltering);\n                    break;\n                default:\n                    {\n                        // eslint-disable-next-line max-len\n                        const msProps = this.getPropObject(prop, newProp, oldProp);\n                        super.onPropertyChanged(msProps.newProperty, msProps.oldProperty);\n                    }\n                    break;\n            }\n        }\n    }\n    reInitializePoup() {\n        if (this.popupObj) {\n            this.popupObj.destroy();\n            this.popupObj = null;\n        }\n        this.renderPopup();\n    }\n    updateVal(newProp, oldProp, prop) {\n        if (!this.list) {\n            this.onLoadSelect();\n        }\n        else if ((this.dataSource instanceof DataManager) && (!this.listData || !(this.mainList && this.mainData))) {\n            this.onLoadSelect();\n        }\n        else {\n            if (prop === 'text') {\n                this.initialTextUpdate();\n                newProp = this.value;\n            }\n            if (isNullOrUndefined(this.value) || this.value.length === 0) {\n                this.tempValues = oldProp;\n            }\n            // eslint-disable-next-line\n            if (this.allowCustomValue && (this.mode === 'Default' || this.mode === 'Box') && this.isReact && this.inputFocus\n                && this.isPopupOpen() && this.mainData !== this.listData) {\n                const list = this.mainList.cloneNode ? this.mainList.cloneNode(true) : this.mainList;\n                this.onActionComplete(list, this.mainData);\n            }\n            this.initialValueUpdate();\n            if (this.mode !== 'Box' && !this.inputFocus) {\n                this.updateDelimView();\n            }\n            if (!this.inputFocus) {\n                this.refreshInputHight();\n            }\n            this.refreshPlaceHolder();\n            if (this.mode !== 'CheckBox' && this.changeOnBlur) {\n                this.updateValueState(null, newProp, oldProp);\n            }\n            this.checkPlaceholderSize();\n        }\n        if (!this.changeOnBlur) {\n            this.updateValueState(null, newProp, oldProp);\n        }\n    }\n    /**\n     * Adds a new item to the multiselect popup list. By default, new item appends to the list as the last item,\n     * but you can insert based on the index parameter.\n     *\n     * @param  { Object[] } items - Specifies an array of JSON data or a JSON data.\n     * @param { number } itemIndex - Specifies the index to place the newly added item in the popup list.\n     * @returns {void}\n     */\n    addItem(items, itemIndex) {\n        super.addItem(items, itemIndex);\n    }\n    /**\n     * Hides the popup, if the popup in a open state.\n     *\n     * @returns {void}\n     */\n    hidePopup() {\n        const delay = 100;\n        if (this.isPopupOpen()) {\n            const animModel = {\n                name: 'FadeOut',\n                duration: 100,\n                delay: delay ? delay : 0\n            };\n            const eventArgs = { popup: this.popupObj, cancel: false, animation: animModel };\n            this.trigger('close', eventArgs, (eventArgs) => {\n                if (!eventArgs.cancel) {\n                    if (this.fields.groupBy && this.mode !== 'CheckBox' && this.fixedHeaderElement) {\n                        remove(this.fixedHeaderElement);\n                        this.fixedHeaderElement = null;\n                    }\n                    this.beforePopupOpen = false;\n                    this.overAllWrapper.classList.remove(iconAnimation);\n                    this.popupObj.hide(new Animation(eventArgs.animation));\n                    attributes(this.inputElement, { 'aria-expanded': 'false' });\n                    if (this.allowFiltering) {\n                        this.notify('inputFocus', { module: 'CheckBoxSelection', enable: this.mode === 'CheckBox', value: 'clear' });\n                    }\n                    this.popupObj.hide();\n                    removeClass([document.body, this.popupObj.element], 'e-popup-full-page');\n                    EventHandler.remove(this.list, 'keydown', this.onKeyDown);\n                }\n            });\n        }\n    }\n    /**\n     * Shows the popup, if the popup in a closed state.\n     *\n     * @returns {void}\n     */\n    showPopup() {\n        if (!this.enabled) {\n            return;\n        }\n        const args = { cancel: false };\n        this.trigger('beforeOpen', args, (args) => {\n            if (!args.cancel) {\n                if (!this.ulElement) {\n                    this.beforePopupOpen = true;\n                    super.render();\n                    if (this.mode === 'CheckBox' && Browser.isDevice && this.allowFiltering) {\n                        this.notify('popupFullScreen', { module: 'CheckBoxSelection', enable: this.mode === 'CheckBox' });\n                    }\n                    return;\n                }\n                if (this.mode === 'CheckBox' && Browser.isDevice && this.allowFiltering) {\n                    this.notify('popupFullScreen', { module: 'CheckBoxSelection', enable: this.mode === 'CheckBox' });\n                }\n                const mainLiLength = this.ulElement.querySelectorAll('li.' + 'e-list-item').length;\n                const liLength = this.ulElement.querySelectorAll('li.'\n                    + dropDownBaseClasses.li + '.' + HIDE_LIST).length;\n                if (mainLiLength > 0 && (mainLiLength === liLength) && (liLength === this.mainData.length)) {\n                    this.beforePopupOpen = false;\n                    return;\n                }\n                this.onPopupShown();\n            }\n        });\n    }\n    /**\n     * Based on the state parameter, entire list item will be selected/deselected.\n     * parameter\n     * `true`   - Selects entire list items.\n     * `false`  - Un Selects entire list items.\n     *\n     * @param {boolean} state - if its true then Selects the entire list items. If its false the Unselects entire list items.\n     * @returns {void}\n     */\n    selectAll(state) {\n        this.isSelectAll = true;\n        this.selectAllItems(state);\n    }\n    /**\n     * Return the module name of this component.\n     *\n     * @private\n     * @returns {string} Return the module name of this component.\n     */\n    getModuleName() {\n        return 'multiselect';\n    }\n    /**\n     * Allows you to clear the selected values from the Multiselect component.\n     *\n     * @returns {void}\n     */\n    clear() {\n        this.selectAll(false);\n        if (this.value && this.value.length) {\n            setTimeout(() => {\n                this.setProperties({ value: null }, true);\n            }, 0);\n        }\n        else {\n            this.setProperties({ value: null }, true);\n        }\n    }\n    /**\n     * To Initialize the control rendering\n     *\n     * @private\n     * @returns {void}\n     */\n    render() {\n        this.setDynValue = this.initStatus = false;\n        this.isSelectAll = false;\n        this.searchWrapper = this.createElement('span', { className: SEARCHBOX_WRAPPER + ' ' + ((this.mode === 'Box') ? BOX_ELEMENT : '') });\n        this.viewWrapper = this.createElement('span', { className: DELIMITER_VIEW + ' ' + DELIMITER_WRAPPER, styles: 'display:none;' });\n        this.overAllClear = this.createElement('span', {\n            className: CLOSEICON_CLASS$1, styles: 'display:none;'\n        });\n        this.componentWrapper = this.createElement('div', { className: ELEMENT_WRAPPER });\n        this.overAllWrapper = this.createElement('div', { className: OVER_ALL_WRAPPER });\n        if (this.mode === 'CheckBox') {\n            addClass([this.overAllWrapper], 'e-checkbox');\n        }\n        if (Browser.isDevice) {\n            this.componentWrapper.classList.add(ELEMENT_MOBILE_WRAPPER);\n        }\n        this.setWidth(this.width);\n        this.overAllWrapper.appendChild(this.componentWrapper);\n        this.popupWrapper = this.createElement('div', { id: this.element.id + '_popup', className: POPUP_WRAPPER });\n        if (this.mode === 'Delimiter' || this.mode === 'CheckBox') {\n            this.delimiterWrapper = this.createElement('span', { className: DELIMITER_WRAPPER, styles: 'display:none' });\n            this.componentWrapper.appendChild(this.delimiterWrapper);\n        }\n        else {\n            this.chipCollectionWrapper = this.createElement('span', {\n                className: CHIP_WRAPPER$1,\n                styles: 'display:none'\n            });\n            if (this.mode === 'Default') {\n                this.chipCollectionWrapper.setAttribute('id', getUniqueID('chip_default'));\n            }\n            else if (this.mode === 'Box') {\n                this.chipCollectionWrapper.setAttribute('id', getUniqueID('chip_box'));\n            }\n            this.componentWrapper.appendChild(this.chipCollectionWrapper);\n        }\n        if (this.mode !== 'Box') {\n            this.componentWrapper.appendChild(this.viewWrapper);\n        }\n        this.componentWrapper.appendChild(this.searchWrapper);\n        if (this.showClearButton && !Browser.isDevice) {\n            this.componentWrapper.appendChild(this.overAllClear);\n        }\n        else {\n            this.componentWrapper.classList.add(CLOSE_ICON_HIDE);\n        }\n        this.dropDownIcon();\n        this.inputElement = this.createElement('input', {\n            className: INPUT_ELEMENT,\n            attrs: {\n                spellcheck: 'false',\n                type: 'text',\n                autocomplete: 'off',\n                tabindex: '0'\n            }\n        });\n        if (this.mode === 'Default' || this.mode === 'Box') {\n            this.inputElement.setAttribute('aria-describedby', this.chipCollectionWrapper.id);\n            this.inputElement.setAttribute('aria-labelledby', this.chipCollectionWrapper.id);\n        }\n        if (this.element.tagName !== this.getNgDirective()) {\n            this.element.style.display = 'none';\n        }\n        if (this.element.tagName === this.getNgDirective()) {\n            this.element.appendChild(this.overAllWrapper);\n            this.searchWrapper.appendChild(this.inputElement);\n        }\n        else {\n            this.element.parentElement.insertBefore(this.overAllWrapper, this.element);\n            this.searchWrapper.appendChild(this.inputElement);\n            this.searchWrapper.appendChild(this.element);\n            this.element.removeAttribute('tabindex');\n        }\n        if (this.floatLabelType !== 'Never') {\n            createFloatLabel(this.overAllWrapper, this.searchWrapper, this.element, this.inputElement, this.value, this.floatLabelType, this.placeholder);\n        }\n        else if (this.floatLabelType === 'Never') {\n            this.refreshPlaceHolder();\n        }\n        this.addValidInputClass();\n        this.element.style.opacity = '';\n        const id = this.element.getAttribute('id') ? this.element.getAttribute('id') : getUniqueID('ej2_dropdownlist');\n        this.element.id = id;\n        this.hiddenElement = this.createElement('select', {\n            attrs: { 'aria-hidden': 'true', 'class': HIDDEN_ELEMENT, 'tabindex': '-1', 'multiple': '' }\n        });\n        this.componentWrapper.appendChild(this.hiddenElement);\n        this.validationAttribute(this.element, this.hiddenElement);\n        if (this.mode !== 'CheckBox') {\n            this.hideOverAllClear();\n        }\n        this.wireEvent();\n        this.enable(this.enabled);\n        this.enableRTL(this.enableRtl);\n        this.checkInitialValue();\n        if (this.element.hasAttribute('data-val')) {\n            this.element.setAttribute('data-val', 'false');\n        }\n        this.renderComplete();\n    }\n    checkInitialValue() {\n        const isData = this.dataSource instanceof Array ? (this.dataSource.length > 0)\n            : !isNullOrUndefined(this.dataSource);\n        if (!(this.value && this.value.length) &&\n            isNullOrUndefined(this.text) &&\n            !isData &&\n            this.element.tagName === 'SELECT' &&\n            this.element.options.length > 0) {\n            const optionsElement = this.element.options;\n            const valueCol = [];\n            let textCol = '';\n            for (let index = 0, optionsLen = optionsElement.length; index < optionsLen; index++) {\n                const opt = optionsElement[index];\n                if (!isNullOrUndefined(opt.getAttribute('selected'))) {\n                    if (opt.getAttribute('value')) {\n                        valueCol.push(opt.getAttribute('value'));\n                    }\n                    else {\n                        textCol += (opt.text + this.delimiterChar);\n                    }\n                }\n            }\n            if (valueCol.length > 0) {\n                this.setProperties({ value: valueCol }, true);\n            }\n            else if (textCol !== '') {\n                this.setProperties({ text: textCol }, true);\n            }\n            if (valueCol.length > 0 || textCol !== '') {\n                this.refreshInputHight();\n                this.refreshPlaceHolder();\n            }\n        }\n        if ((this.value && this.value.length) || !isNullOrUndefined(this.text)) {\n            if (!this.list) {\n                super.render();\n            }\n        }\n        if (!isNullOrUndefined(this.text) && (isNullOrUndefined(this.value) || this.value.length === 0)) {\n            this.initialTextUpdate();\n        }\n        if (this.value && this.value.length) {\n            if (!(this.dataSource instanceof DataManager)) {\n                this.initialValueUpdate();\n                this.initialUpdate();\n            }\n            else {\n                this.setInitialValue = () => {\n                    this.initStatus = false;\n                    this.initialValueUpdate();\n                    this.initialUpdate();\n                    this.setInitialValue = null;\n                    this.initStatus = true;\n                };\n            }\n            this.updateTempValue();\n        }\n        else {\n            this.initialUpdate();\n        }\n        this.initStatus = true;\n        this.checkAutoFocus();\n        if (!isNullOrUndefined(this.text)) {\n            this.element.setAttribute('data-initial-value', this.text);\n        }\n    }\n    checkAutoFocus() {\n        if (this.element.hasAttribute('autofocus')) {\n            this.inputElement.focus();\n        }\n    }\n    setFloatLabelType() {\n        removeFloating(this.overAllWrapper, this.componentWrapper, this.searchWrapper, this.inputElement, this.value, this.floatLabelType, this.placeholder);\n        if (this.floatLabelType !== 'Never') {\n            createFloatLabel(this.overAllWrapper, this.searchWrapper, this.element, this.inputElement, this.value, this.floatLabelType, this.placeholder);\n        }\n    }\n    addValidInputClass() {\n        if ((!isNullOrUndefined(this.value) && this.value.length) || this.floatLabelType === 'Always') {\n            addClass([this.overAllWrapper], 'e-valid-input');\n        }\n        else {\n            removeClass([this.overAllWrapper], 'e-valid-input');\n        }\n    }\n    dropDownIcon() {\n        if (this.showDropDownIcon) {\n            this.dropIcon = this.createElement('span', { className: dropdownIcon });\n            this.componentWrapper.appendChild(this.dropIcon);\n            addClass([this.componentWrapper], ['e-down-icon']);\n        }\n        else {\n            if (!isNullOrUndefined(this.dropIcon)) {\n                this.dropIcon.parentElement.removeChild(this.dropIcon);\n                removeClass([this.componentWrapper], ['e-down-icon']);\n            }\n        }\n    }\n    initialUpdate() {\n        if (this.mode !== 'Box' && !(this.setDynValue && this.mode === 'Default' && this.inputFocus)) {\n            this.updateDelimView();\n        }\n        this.updateCssClass();\n        this.updateHTMLAttribute();\n        this.updateReadonly(this.readonly);\n        this.refreshInputHight();\n        this.checkPlaceholderSize();\n    }\n    /**\n     * Removes the component from the DOM and detaches all its related event handlers. Also it removes the attributes and classes.\n     *\n     * @method destroy\n     * @returns {void}\n     */\n    destroy() {\n        // eslint-disable-next-line\n        if (this.isReact) {\n            this.clearTemplate();\n        }\n        if (this.popupObj) {\n            this.popupObj.hide();\n        }\n        this.notify(destroy, {});\n        this.unwireListEvents();\n        this.unWireEvent();\n        this.list = null;\n        this.popupObj = null;\n        this.mainList = null;\n        this.mainData = null;\n        this.filterParent = null;\n        this.ulElement = null;\n        super.destroy();\n        const temp = ['readonly', 'aria-disabled', 'aria-placeholder', 'placeholder'];\n        let length = temp.length;\n        while (length > 0) {\n            this.inputElement.removeAttribute(temp[length - 1]);\n            length--;\n        }\n        this.element.removeAttribute('data-initial-value');\n        this.element.style.display = 'block';\n        if (this.overAllWrapper.parentElement) {\n            if (this.overAllWrapper.parentElement.tagName === this.getNgDirective()) {\n                remove(this.overAllWrapper);\n            }\n            else {\n                this.overAllWrapper.parentElement.insertBefore(this.element, this.overAllWrapper);\n                remove(this.overAllWrapper);\n            }\n        }\n    }\n};\n__decorate$5([\n    Complex({ text: null, value: null, iconCss: null, groupBy: null }, FieldSettings)\n], MultiSelect.prototype, \"fields\", void 0);\n__decorate$5([\n    Property(false)\n], MultiSelect.prototype, \"enablePersistence\", void 0);\n__decorate$5([\n    Property(null)\n], MultiSelect.prototype, \"groupTemplate\", void 0);\n__decorate$5([\n    Property('No records found')\n], MultiSelect.prototype, \"noRecordsTemplate\", void 0);\n__decorate$5([\n    Property('Request failed')\n], MultiSelect.prototype, \"actionFailureTemplate\", void 0);\n__decorate$5([\n    Property('None')\n], MultiSelect.prototype, \"sortOrder\", void 0);\n__decorate$5([\n    Property(true)\n], MultiSelect.prototype, \"enabled\", void 0);\n__decorate$5([\n    Property(false)\n], MultiSelect.prototype, \"enableHtmlSanitizer\", void 0);\n__decorate$5([\n    Property([])\n], MultiSelect.prototype, \"dataSource\", void 0);\n__decorate$5([\n    Property(null)\n], MultiSelect.prototype, \"query\", void 0);\n__decorate$5([\n    Property('StartsWith')\n], MultiSelect.prototype, \"filterType\", void 0);\n__decorate$5([\n    Property(1000)\n], MultiSelect.prototype, \"zIndex\", void 0);\n__decorate$5([\n    Property(false)\n], MultiSelect.prototype, \"ignoreAccent\", void 0);\n__decorate$5([\n    Property()\n], MultiSelect.prototype, \"locale\", void 0);\n__decorate$5([\n    Property(false)\n], MultiSelect.prototype, \"enableGroupCheckBox\", void 0);\n__decorate$5([\n    Property(null)\n], MultiSelect.prototype, \"cssClass\", void 0);\n__decorate$5([\n    Property('100%')\n], MultiSelect.prototype, \"width\", void 0);\n__decorate$5([\n    Property('300px')\n], MultiSelect.prototype, \"popupHeight\", void 0);\n__decorate$5([\n    Property('100%')\n], MultiSelect.prototype, \"popupWidth\", void 0);\n__decorate$5([\n    Property(null)\n], MultiSelect.prototype, \"placeholder\", void 0);\n__decorate$5([\n    Property(null)\n], MultiSelect.prototype, \"filterBarPlaceholder\", void 0);\n__decorate$5([\n    Property({})\n], MultiSelect.prototype, \"htmlAttributes\", void 0);\n__decorate$5([\n    Property(null)\n], MultiSelect.prototype, \"valueTemplate\", void 0);\n__decorate$5([\n    Property(null)\n], MultiSelect.prototype, \"headerTemplate\", void 0);\n__decorate$5([\n    Property(null)\n], MultiSelect.prototype, \"footerTemplate\", void 0);\n__decorate$5([\n    Property(null)\n], MultiSelect.prototype, \"itemTemplate\", void 0);\n__decorate$5([\n    Property(null)\n], MultiSelect.prototype, \"allowFiltering\", void 0);\n__decorate$5([\n    Property(true)\n], MultiSelect.prototype, \"changeOnBlur\", void 0);\n__decorate$5([\n    Property(false)\n], MultiSelect.prototype, \"allowCustomValue\", void 0);\n__decorate$5([\n    Property(true)\n], MultiSelect.prototype, \"showClearButton\", void 0);\n__decorate$5([\n    Property(1000)\n], MultiSelect.prototype, \"maximumSelectionLength\", void 0);\n__decorate$5([\n    Property(false)\n], MultiSelect.prototype, \"readonly\", void 0);\n__decorate$5([\n    Property(null)\n], MultiSelect.prototype, \"text\", void 0);\n__decorate$5([\n    Property(null)\n], MultiSelect.prototype, \"value\", void 0);\n__decorate$5([\n    Property(true)\n], MultiSelect.prototype, \"hideSelectedItem\", void 0);\n__decorate$5([\n    Property(true)\n], MultiSelect.prototype, \"closePopupOnSelect\", void 0);\n__decorate$5([\n    Property('Default')\n], MultiSelect.prototype, \"mode\", void 0);\n__decorate$5([\n    Property(',')\n], MultiSelect.prototype, \"delimiterChar\", void 0);\n__decorate$5([\n    Property(true)\n], MultiSelect.prototype, \"ignoreCase\", void 0);\n__decorate$5([\n    Property(false)\n], MultiSelect.prototype, \"showDropDownIcon\", void 0);\n__decorate$5([\n    Property('Never')\n], MultiSelect.prototype, \"floatLabelType\", void 0);\n__decorate$5([\n    Property(false)\n], MultiSelect.prototype, \"showSelectAll\", void 0);\n__decorate$5([\n    Property('Select All')\n], MultiSelect.prototype, \"selectAllText\", void 0);\n__decorate$5([\n    Property('Unselect All')\n], MultiSelect.prototype, \"unSelectAllText\", void 0);\n__decorate$5([\n    Property(true)\n], MultiSelect.prototype, \"enableSelectionOrder\", void 0);\n__decorate$5([\n    Property(true)\n], MultiSelect.prototype, \"openOnClick\", void 0);\n__decorate$5([\n    Property(false)\n], MultiSelect.prototype, \"addTagOnBlur\", void 0);\n__decorate$5([\n    Event()\n], MultiSelect.prototype, \"change\", void 0);\n__decorate$5([\n    Event()\n], MultiSelect.prototype, \"removing\", void 0);\n__decorate$5([\n    Event()\n], MultiSelect.prototype, \"removed\", void 0);\n__decorate$5([\n    Event()\n], MultiSelect.prototype, \"beforeSelectAll\", void 0);\n__decorate$5([\n    Event()\n], MultiSelect.prototype, \"selectedAll\", void 0);\n__decorate$5([\n    Event()\n], MultiSelect.prototype, \"beforeOpen\", void 0);\n__decorate$5([\n    Event()\n], MultiSelect.prototype, \"open\", void 0);\n__decorate$5([\n    Event()\n], MultiSelect.prototype, \"close\", void 0);\n__decorate$5([\n    Event()\n], MultiSelect.prototype, \"blur\", void 0);\n__decorate$5([\n    Event()\n], MultiSelect.prototype, \"focus\", void 0);\n__decorate$5([\n    Event()\n], MultiSelect.prototype, \"chipSelection\", void 0);\n__decorate$5([\n    Event()\n], MultiSelect.prototype, \"filtering\", void 0);\n__decorate$5([\n    Event()\n], MultiSelect.prototype, \"tagging\", void 0);\n__decorate$5([\n    Event()\n], MultiSelect.prototype, \"customValueSelection\", void 0);\nMultiSelect = __decorate$5([\n    NotifyPropertyChanges\n], MultiSelect);\n\nconst ICON = 'e-icons';\nconst CHECKBOXFRAME$1 = 'e-frame';\nconst CHECK$1 = 'e-check';\nconst CHECKBOXWRAP$1 = 'e-checkbox-wrapper';\nconst INDETERMINATE = 'e-stop';\nconst checkAllParent = 'e-selectall-parent';\nconst searchBackIcon = 'e-input-group-icon e-back-icon e-icons';\nconst filterBarClearIcon = 'e-input-group-icon e-clear-icon e-icons';\nconst filterInput = 'e-input-filter';\nconst filterParent = 'e-filter-parent';\nconst mobileFilter = 'e-ddl-device-filter';\nconst clearIcon = 'e-clear-icon';\nconst popupFullScreen = 'e-popup-full-page';\nconst device = 'e-ddl-device';\nconst FOCUS$1 = 'e-input-focus';\n/**\n * The Multiselect enable CheckBoxSelection call this inject module.\n */\nclass CheckBoxSelection {\n    constructor(parent) {\n        this.activeLi = [];\n        this.activeEle = [];\n        this.parent = parent;\n        this.removeEventListener();\n        this.addEventListener();\n    }\n    getModuleName() {\n        return 'CheckBoxSelection';\n    }\n    addEventListener() {\n        if (this.parent.isDestroyed) {\n            return;\n        }\n        this.parent.on('updatelist', this.listSelection, this);\n        this.parent.on('listoption', this.listOption, this);\n        this.parent.on('selectAll', this.setSelectAll, this);\n        this.parent.on('checkSelectAll', this.checkSelectAll, this);\n        this.parent.on('searchBox', this.setSearchBox, this);\n        this.parent.on('blur', this.onBlurHandler, this);\n        this.parent.on('targetElement', this.targetElement, this);\n        this.parent.on('deviceSearchBox', this.setDeviceSearchBox, this);\n        this.parent.on('inputFocus', this.getFocus, this);\n        this.parent.on('reOrder', this.setReorder, this);\n        this.parent.on('activeList', this.getActiveList, this);\n        this.parent.on('selectAllText', this.setLocale, this);\n        this.parent.on('filterBarPlaceholder', this.setPlaceholder, this);\n        EventHandler.add(document, 'mousedown', this.onDocumentClick, this);\n        this.parent.on('addItem', this.checboxCreate, this);\n        this.parent.on('popupFullScreen', this.setPopupFullScreen, this);\n    }\n    removeEventListener() {\n        if (this.parent.isDestroyed) {\n            return;\n        }\n        this.parent.off('updatelist', this.listSelection);\n        this.parent.off('listoption', this.listOption);\n        this.parent.off('selectAll', this.setSelectAll);\n        this.parent.off('checkSelectAll', this.checkSelectAll);\n        this.parent.off('searchBox', this.setSearchBox);\n        this.parent.off('blur', this.onBlurHandler);\n        this.parent.off('targetElement', this.targetElement);\n        this.parent.off('deviceSearchBox', this.setDeviceSearchBox);\n        this.parent.off('inputFocus', this.getFocus);\n        this.parent.off('reOrder', this.setReorder);\n        this.parent.off('activeList', this.getActiveList);\n        this.parent.off('selectAllText', this.setLocale);\n        this.parent.off('filterBarPlaceholder', this.setPlaceholder);\n        this.parent.off('addItem', this.checboxCreate);\n        this.parent.off('popupFullScreen', this.setPopupFullScreen);\n    }\n    // eslint-disable-next-line @typescript-eslint/no-unused-vars\n    listOption(args) {\n        if (isNullOrUndefined(this.parent.listCurrentOptions.itemCreated)) {\n            this.parent.listCurrentOptions.itemCreated = (e) => {\n                this.checboxCreate(e);\n            };\n        }\n        else {\n            const itemCreated = this.parent.listCurrentOptions.itemCreated;\n            this.parent.listCurrentOptions.itemCreated = (e) => {\n                this.checboxCreate(e);\n                itemCreated.apply(this, [e]);\n            };\n        }\n    }\n    setPlaceholder(props) {\n        Input.setPlaceholder(props.filterBarPlaceholder, this.filterInput);\n    }\n    checboxCreate(e) {\n        let item;\n        if (!isNullOrUndefined(e.item)) {\n            item = e.item;\n        }\n        else {\n            item = e;\n        }\n        if (this.parent.enableGroupCheckBox || (item.className !== 'e-list-group-item '\n            && item.className !== 'e-list-group-item')) {\n            const checkboxEle = createCheckBox(this.parent.createElement, true);\n            const icon = select('div.' + ICON, item);\n            item.insertBefore(checkboxEle, item.childNodes[isNullOrUndefined(icon) ? 0 : 1]);\n            select('.' + CHECKBOXFRAME$1, checkboxEle);\n            if (this.parent.enableGroupCheckBox) {\n                this.parent.popupWrapper.classList.add('e-multiselect-group');\n            }\n            return item;\n        }\n        else {\n            return item;\n        }\n    }\n    setSelectAll() {\n        if (this.parent.showSelectAll) {\n            if (isNullOrUndefined(this.checkAllParent)) {\n                this.checkAllParent = this.parent.createElement('div', {\n                    className: checkAllParent\n                });\n                this.selectAllSpan = this.parent.createElement('span', {\n                    className: 'e-all-text'\n                });\n                this.selectAllSpan.textContent = '';\n                this.checkAllParent.appendChild(this.selectAllSpan);\n                this.setLocale();\n                this.checboxCreate(this.checkAllParent);\n                if (this.parent.headerTemplate) {\n                    if (!isNullOrUndefined(this.parent.filterParent)) {\n                        append([this.checkAllParent], this.parent.filterParent);\n                    }\n                    else {\n                        append([this.checkAllParent], this.parent.popupWrapper);\n                    }\n                }\n                if (!this.parent.headerTemplate) {\n                    if (!isNullOrUndefined(this.parent.filterParent)) {\n                        this.parent.filterParent.parentNode.insertBefore(this.checkAllParent, this.parent.filterParent.nextSibling);\n                    }\n                    else {\n                        prepend([this.checkAllParent], this.parent.popupWrapper);\n                    }\n                }\n                EventHandler.add(this.checkAllParent, 'mousedown', this.clickHandler, this);\n            }\n            if (this.parent.list.classList.contains('e-nodata') || (this.parent.listData && this.parent.listData.length <= 1 &&\n                !(this.parent.isDynamicDataChange)) || (this.parent.isDynamicDataChange &&\n                this.parent.listData && this.parent.listData.length <= 1)) {\n                this.checkAllParent.style.display = 'none';\n            }\n            else {\n                this.checkAllParent.style.display = 'block';\n            }\n            this.parent.selectAllHeight = this.checkAllParent.getBoundingClientRect().height;\n        }\n        else if (!isNullOrUndefined(this.checkAllParent)) {\n            this.checkAllParent.parentElement.removeChild(this.checkAllParent);\n            this.checkAllParent = null;\n        }\n    }\n    destroy() {\n        this.removeEventListener();\n        EventHandler.remove(document, 'mousedown', this.onDocumentClick);\n    }\n    listSelection(args) {\n        let target;\n        if (!isNullOrUndefined(args.e)) {\n            const frameElm = args.li.querySelector('.e-checkbox-wrapper .e-frame');\n            target = !isNullOrUndefined(args.e.target) ?\n                (args.e.target.classList.contains('e-frame')\n                    && (!this.parent.showSelectAll\n                        || (this.checkAllParent && !this.checkAllParent.contains(args.e.target)))) ?\n                    args.e.target : args.li.querySelector('.e-checkbox-wrapper').childNodes[1]\n                : args.li.querySelector('.e-checkbox-wrapper').childNodes[1];\n        }\n        else {\n            const checkboxWrapper = args.li.querySelector('.e-checkbox-wrapper');\n            target = checkboxWrapper ? checkboxWrapper.childNodes[1] : args.li.lastElementChild.childNodes[1];\n        }\n        if (this.parent.itemTemplate || this.parent.enableGroupCheckBox) {\n            target = args.li.firstElementChild.childNodes[1];\n        }\n        if (!isNullOrUndefined(target)) {\n            this.checkWrapper = closest(target, '.' + CHECKBOXWRAP$1);\n        }\n        if (!isNullOrUndefined(this.checkWrapper)) {\n            const checkElement = select('.' + CHECKBOXFRAME$1, this.checkWrapper);\n            const selectAll$$1 = false;\n            this.validateCheckNode(this.checkWrapper, checkElement.classList.contains(CHECK$1), args.li, args.e, selectAll$$1);\n        }\n    }\n    validateCheckNode(checkWrap, isCheck, li, e, selectAll$$1) {\n        this.changeState(checkWrap, isCheck ? 'uncheck' : 'check', e, true, selectAll$$1);\n    }\n    clickHandler(e) {\n        let target;\n        if (e.currentTarget.classList.contains(this.checkAllParent.className)) {\n            target = e.currentTarget.firstElementChild.lastElementChild;\n        }\n        else {\n            target = e.currentTarget;\n        }\n        this.checkWrapper = closest(target, '.' + CHECKBOXWRAP$1);\n        const selectAll$$1 = true;\n        if (!isNullOrUndefined(this.checkWrapper)) {\n            const checkElement = select('.' + CHECKBOXFRAME$1, this.checkWrapper);\n            this.validateCheckNode(this.checkWrapper, checkElement.classList.contains(CHECK$1), null, e, selectAll$$1);\n        }\n        e.preventDefault();\n    }\n    changeState(wrapper, state, e, isPrevent, selectAll$$1) {\n        let ariaState;\n        const frameSpan = wrapper.getElementsByClassName(CHECKBOXFRAME$1)[0];\n        if (state === 'check' && !frameSpan.classList.contains(CHECK$1)) {\n            frameSpan.classList.remove(INDETERMINATE);\n            frameSpan.classList.add(CHECK$1);\n            ariaState = 'true';\n            if (selectAll$$1) {\n                this.parent.selectAllItems(true, e);\n                this.setLocale(true);\n            }\n        }\n        else if (state === 'uncheck' && (frameSpan.classList.contains(CHECK$1) || frameSpan.classList.contains(INDETERMINATE))) {\n            removeClass([frameSpan], [CHECK$1, INDETERMINATE]);\n            ariaState = 'false';\n            if (selectAll$$1) {\n                this.parent.selectAllItems(false, e);\n                this.setLocale();\n            }\n        }\n        else if (state === 'indeterminate' && !(frameSpan.classList.contains(INDETERMINATE))) {\n            removeClass([frameSpan], [CHECK$1]);\n            frameSpan.classList.add(INDETERMINATE);\n            ariaState = 'false';\n            if (selectAll$$1) {\n                this.parent.selectAllItems(false, e);\n                this.setLocale();\n            }\n        }\n        ariaState = state === 'check' ? 'true' : state === 'uncheck' ? 'false' : ariaState;\n        if (!isNullOrUndefined(ariaState)) {\n            wrapper.setAttribute('aria-checked', ariaState);\n        }\n    }\n    setSearchBox(args) {\n        if (isNullOrUndefined(this.parent.filterParent)) {\n            this.parent.filterParent = this.parent.createElement('span', {\n                className: filterParent\n            });\n            this.filterInput = this.parent.createElement('input', {\n                attrs: { type: 'text' },\n                className: filterInput\n            });\n            this.parent.element.parentNode.insertBefore(this.filterInput, this.parent.element);\n            let backIcon = false;\n            if (Browser.isDevice) {\n                backIcon = true;\n                this.parent.mobFilter = false;\n            }\n            this.filterInputObj = Input.createInput({\n                element: this.filterInput,\n                buttons: backIcon ? [searchBackIcon, filterBarClearIcon] : [filterBarClearIcon],\n                properties: { placeholder: this.parent.filterBarPlaceholder }\n            }, this.parent.createElement);\n            if (!isNullOrUndefined(this.parent.cssClass)) {\n                if (this.parent.cssClass.split(' ').indexOf('e-outline') !== -1) {\n                    addClass([this.filterInputObj.container], 'e-outline');\n                }\n                else if (this.parent.cssClass.split(' ').indexOf('e-filled') !== -1) {\n                    addClass([this.filterInputObj.container], 'e-filled');\n                }\n            }\n            append([this.filterInputObj.container], this.parent.filterParent);\n            prepend([this.parent.filterParent], args.popupElement);\n            attributes(this.filterInput, {\n                'aria-disabled': 'false',\n                'aria-owns': this.parent.element.id + '_options',\n                'role': 'listbox',\n                'aria-activedescendant': null,\n                'autocomplete': 'off',\n                'autocorrect': 'off',\n                'autocapitalize': 'off',\n                'spellcheck': 'false'\n            });\n            this.clearIconElement = this.filterInput.parentElement.querySelector('.' + clearIcon);\n            if (!Browser.isDevice && this.clearIconElement) {\n                EventHandler.add(this.clearIconElement, 'mousedown', this.clearText, this);\n                this.clearIconElement.style.visibility = 'hidden';\n            }\n            EventHandler.add(this.filterInput, 'input', this.parent.onInput, this.parent);\n            EventHandler.add(this.filterInput, 'keyup', this.parent.keyUp, this.parent);\n            EventHandler.add(this.filterInput, 'keydown', this.parent.onKeyDown, this.parent);\n            EventHandler.add(this.filterInput, 'blur', this.onBlurHandler, this);\n            EventHandler.add(this.filterInput, 'paste', this.parent.pasteHandler, this.parent);\n            this.parent.searchBoxHeight = (this.filterInputObj.container.parentElement).getBoundingClientRect().height;\n            return this.filterInputObj;\n        }\n    }\n    // eslint-disable-next-line @typescript-eslint/no-unused-vars\n    clickOnBackIcon(e) {\n        this.parent.hidePopup();\n        removeClass([document.body, this.parent.popupObj.element], popupFullScreen);\n        this.parent.inputElement.focus();\n    }\n    clearText(e) {\n        this.parent.targetInputElement.value = '';\n        if (this.parent.allowFiltering && this.parent.targetInputElement.value === '') {\n            this.parent.search(null);\n        }\n        this.parent.refreshPopup();\n        this.parent.refreshListItems(null);\n        this.clearIconElement.style.visibility = 'hidden';\n        this.filterInput.focus();\n        this.setReorder(e);\n        e.preventDefault();\n    }\n    setDeviceSearchBox() {\n        this.parent.popupObj.element.classList.add(device);\n        this.parent.popupObj.element.classList.add(mobileFilter);\n        this.parent.popupObj.position = { X: 0, Y: 0 };\n        this.parent.popupObj.dataBind();\n        this.setSearchBoxPosition();\n        this.backIconElement = this.filterInputObj.container.querySelector('.e-back-icon');\n        this.clearIconElement = this.filterInputObj.container.querySelector('.' + clearIcon);\n        this.clearIconElement.style.visibility = 'hidden';\n        EventHandler.add(this.backIconElement, 'click', this.clickOnBackIcon, this);\n        EventHandler.add(this.clearIconElement, 'click', this.clearText, this);\n    }\n    setSearchBoxPosition() {\n        const searchBoxHeight = this.filterInput.parentElement.getBoundingClientRect().height;\n        let selectAllHeight = 0;\n        if (this.checkAllParent) {\n            selectAllHeight = this.checkAllParent.getBoundingClientRect().height;\n        }\n        this.parent.popupObj.element.style.maxHeight = '100%';\n        this.parent.popupObj.element.style.width = '100%';\n        this.parent.list.style.maxHeight = (window.innerHeight - searchBoxHeight - selectAllHeight) + 'px';\n        this.parent.list.style.height = (window.innerHeight - searchBoxHeight - selectAllHeight) + 'px';\n        const clearElement = this.filterInput.parentElement.querySelector('.' + clearIcon);\n        detach(this.filterInput);\n        clearElement.parentElement.insertBefore(this.filterInput, clearElement);\n    }\n    setPopupFullScreen() {\n        attributes(this.parent.popupObj.element, { style: 'left:0px;right:0px;top:0px;bottom:0px;' });\n        addClass([document.body, this.parent.popupObj.element], popupFullScreen);\n        this.parent.popupObj.element.style.maxHeight = '100%';\n        this.parent.popupObj.element.style.width = '100%';\n    }\n    targetElement() {\n        if (!isNullOrUndefined(this.clearIconElement)) {\n            this.parent.targetInputElement = this.filterInput;\n            this.clearIconElement.style.visibility = this.parent.targetInputElement.value === '' ? 'hidden' : 'visible';\n        }\n        return this.parent.targetInputElement.value;\n    }\n    onBlurHandler(e) {\n        if (!this.parent.element.classList.contains('e-listbox')) {\n            let target;\n            if (this.parent.keyAction) {\n                return;\n            }\n            if (Browser.isIE) {\n                target = !isNullOrUndefined(e) && e.target;\n            }\n            if (!Browser.isIE) {\n                target = !isNullOrUndefined(e) && e.relatedTarget;\n            }\n            // eslint-disable-next-line max-len\n            if (this.parent.popupObj && document.body.contains(this.parent.popupObj.element) && this.parent.popupObj.element.contains(target)\n                && !Browser.isIE && this.filterInput) {\n                this.filterInput.focus();\n                return;\n            }\n            if (this.parent.scrollFocusStatus && this.filterInput) {\n                e.preventDefault();\n                this.filterInput.focus();\n                this.parent.scrollFocusStatus = false;\n                return;\n            }\n            if (this.parent.popupObj && document.body.contains(this.parent.popupObj.element)\n                && !this.parent.popupObj.element.classList.contains('e-popup-close')) {\n                this.parent.inputFocus = false;\n                this.parent.updateValueState(e, this.parent.value, this.parent.tempValues);\n                this.parent.dispatchEvent(this.parent.hiddenElement, 'change');\n            }\n            if (this.parent.popupObj && document.body.contains(this.parent.popupObj.element) &&\n                !this.parent.popupObj.element.classList.contains('e-popup-close')) {\n                this.parent.inputFocus = false;\n                this.parent.overAllWrapper.classList.remove(FOCUS$1);\n                this.parent.trigger('blur');\n                this.parent.focused = true;\n            }\n            if (this.parent.popupObj && document.body.contains(this.parent.popupObj.element) &&\n                !this.parent.popupObj.element.classList.contains('e-popup-close') && !Browser.isDevice) {\n                this.parent.hidePopup();\n            }\n        }\n    }\n    onDocumentClick(e) {\n        if (this.parent.getLocaleName() !== 'listbox') {\n            const target = e.target;\n            if (!isNullOrUndefined(this.parent.popupObj) && closest(target, '[id=\"' + this.parent.popupObj.element.id + '\"]')) {\n                if (!(this.filterInput && this.filterInput.value !== '')) {\n                    e.preventDefault();\n                }\n            }\n            if (!(!isNullOrUndefined(this.parent.popupObj) && closest(target, '[id=\"' + this.parent.popupObj.element.id + '\"]')) &&\n                !this.parent.overAllWrapper.contains(e.target)) {\n                if (this.parent.overAllWrapper.classList.contains(dropDownBaseClasses.focus) || this.parent.isPopupOpen()) {\n                    this.parent.inputFocus = false;\n                    this.parent.scrollFocusStatus = false;\n                    this.parent.hidePopup();\n                    this.parent.onBlurHandler(e, true);\n                    this.parent.focused = true;\n                }\n            }\n            else {\n                this.parent.scrollFocusStatus = (Browser.isIE || Browser.info.name === 'edge') &&\n                    (document.activeElement === this.filterInput);\n            }\n            if (!this.parent.overAllWrapper.contains(e.target) && this.parent.overAllWrapper.classList.contains('e-input-focus') &&\n                !this.parent.isPopupOpen()) {\n                if (Browser.isIE) {\n                    this.parent.onBlurHandler();\n                }\n                else {\n                    this.parent.onBlurHandler(e);\n                }\n            }\n            if (this.filterInput === target) {\n                this.filterInput.focus();\n            }\n        }\n    }\n    getFocus(e) {\n        this.parent.overAllWrapper.classList.remove(FOCUS$1);\n        if (this.parent.keyAction && e.value !== 'clear' && e.value !== 'focus') {\n            this.parent.keyAction = false;\n            return;\n        }\n        if (e.value === 'focus') {\n            this.filterInput.focus();\n            this.parent.removeFocus();\n            EventHandler.remove(this.parent.list, 'keydown', this.parent.onKeyDown);\n        }\n        if (e.value === 'clear') {\n            this.filterInput.value = '';\n            this.clearIconElement.style.visibility = 'hidden';\n        }\n    }\n    checkSelectAll(e) {\n        if (e.value === 'check' && this.checkAllParent.getAttribute('aria-checked') !== 'true') {\n            this.changeState(this.checkAllParent, e.value, null, null, false);\n            this.setLocale(true);\n        }\n        if (e.value === 'uncheck') {\n            this.changeState(this.checkAllParent, e.value, null, null, false);\n            this.setLocale();\n        }\n        if (e.value === 'indeterminate') {\n            this.changeState(this.checkAllParent, e.value, null, null, false);\n            this.setLocale();\n        }\n    }\n    setLocale(unSelect) {\n        if (this.parent.selectAllText !== 'Select All' || this.parent.unSelectAllText !== 'Unselect All') {\n            const template = unSelect ? this.parent.unSelectAllText : this.parent.selectAllText;\n            this.selectAllSpan.textContent = '';\n            const compiledString = compile(template);\n            const templateName = unSelect ? 'unSelectAllText' : 'selectAllText';\n            for (const item of compiledString({}, this.parent, templateName, null, !this.parent.isStringTemplate)) {\n                this.selectAllSpan.textContent = item.textContent;\n            }\n        }\n        else {\n            const l10nLocale = { selectAllText: 'Select All', unSelectAllText: 'Unselect All' };\n            let l10n = new L10n(this.parent.getLocaleName(), {}, this.parent.locale);\n            if (l10n.getConstant('selectAllText') === '') {\n                l10n = new L10n('dropdowns', l10nLocale, this.parent.locale);\n            }\n            this.selectAllSpan.textContent = unSelect ? l10n.getConstant('unSelectAllText') : l10n.getConstant('selectAllText');\n        }\n    }\n    getActiveList(args) {\n        if (args.li.classList.contains('e-active')) {\n            this.activeLi.push(args.li.cloneNode(true));\n        }\n        else {\n            this.activeLi.splice(args.index, 1);\n        }\n    }\n    // eslint-disable-next-line @typescript-eslint/no-unused-vars\n    setReorder(args) {\n        if (this.parent.enableSelectionOrder && !isNullOrUndefined(this.parent.value)) {\n            const activeLiCount = this.parent.ulElement.querySelectorAll('li.e-active').length;\n            let remLi;\n            const ulEle = this.parent.createElement('ul', {\n                className: 'e-list-parent e-ul e-reorder'\n            });\n            if (activeLiCount > 0) {\n                append(this.parent.ulElement.querySelectorAll('li.e-active'), ulEle);\n                remLi = this.parent.ulElement.querySelectorAll('li.e-active');\n                addClass(remLi, 'e-reorder-hide');\n                prepend([ulEle], this.parent.list);\n            }\n            this.parent.focusAtFirstListItem();\n        }\n    }\n}\n\n/**\n * export all modules from current location\n */\n\nvar __decorate$6 = (undefined && undefined.__decorate) || function (decorators, target, key, desc) {\n    var c = arguments.length, r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d;\n    if (typeof Reflect === \"object\" && typeof Reflect.decorate === \"function\") r = Reflect.decorate(decorators, target, key, desc);\n    else for (var i = decorators.length - 1; i >= 0; i--) if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;\n    return c > 3 && r && Object.defineProperty(target, key, r), r;\n};\nvar ListBox_1;\n// eslint-disable-next-line @typescript-eslint/triple-slash-reference\n/// <reference path='../drop-down-base/drop-down-base-model.d.ts'/>\n/**\n * Defines the Selection settings of List Box.\n */\nclass SelectionSettings extends ChildProperty {\n}\n__decorate$6([\n    Property('Multiple')\n], SelectionSettings.prototype, \"mode\", void 0);\n__decorate$6([\n    Property(false)\n], SelectionSettings.prototype, \"showCheckbox\", void 0);\n__decorate$6([\n    Property(false)\n], SelectionSettings.prototype, \"showSelectAll\", void 0);\n__decorate$6([\n    Property('Left')\n], SelectionSettings.prototype, \"checkboxPosition\", void 0);\n/**\n * Defines the toolbar settings of List Box.\n */\nclass ToolbarSettings extends ChildProperty {\n}\n__decorate$6([\n    Property([])\n], ToolbarSettings.prototype, \"items\", void 0);\n__decorate$6([\n    Property('Right')\n], ToolbarSettings.prototype, \"position\", void 0);\n/**\n * The ListBox is a graphical user interface component used to display a list of items.\n * Users can select one or more items in the list using a checkbox or by keyboard selection.\n * It supports sorting, grouping, reordering and drag and drop of items.\n * ```html\n * <select id=\"listbox\">\n *      <option value='1'>Badminton</option>\n *      <option value='2'>Basketball</option>\n *      <option value='3'>Cricket</option>\n *      <option value='4'>Football</option>\n *      <option value='5'>Tennis</option>\n * </select>\n * ```\n * ```typescript\n * <script>\n *   var listObj = new ListBox();\n *   listObj.appendTo(\"#listbox\");\n * </script>\n * ```\n */\nlet ListBox = ListBox_1 = class ListBox extends DropDownBase {\n    /**\n     * Constructor for creating the ListBox component.\n     *\n     * @param {ListBoxModel} options - Specifies ListBox model\n     * @param {string | HTMLElement} element - Specifies the element.\n     */\n    constructor(options, element) {\n        super(options, element);\n        this.isValidKey = false;\n        this.isDataSourceUpdate = false;\n        this.keyDownStatus = false;\n    }\n    /**\n     * Adds a new item to the popup list. By default, new item appends to the list as the last item,\n     * but you can insert based on the index parameter.\n     *\n     * @param  { Object[] } items - Specifies an array of JSON data or a JSON data.\n     * @param { number } itemIndex - Specifies the index to place the newly added item in the popup list.\n     * @returns {void}.\n     * @private\n     */\n    addItem(items, itemIndex) {\n        super.addItem(items, itemIndex);\n    }\n    /**\n     * Build and render the component.\n     *\n     * @private\n     * @returns {void}\n     */\n    render() {\n        this.inputString = '';\n        this.initLoad = true;\n        this.isCustomFiltering = false;\n        this.initialSelectedOptions = this.value;\n        super.render();\n        this.renderComplete();\n    }\n    initWrapper() {\n        const hiddenSelect = this.createElement('select', { className: 'e-hidden-select', attrs: { 'multiple': '' } });\n        this.list.classList.add('e-listbox-wrapper');\n        if (this.itemTemplate) {\n            this.list.classList.add('e-list-template');\n        }\n        this.list.classList.add('e-wrapper');\n        this.list.classList.add('e-lib');\n        if (this.element.tagName === 'EJS-LISTBOX') {\n            this.element.setAttribute('tabindex', '0');\n            if (this.initLoad) {\n                this.element.appendChild(this.list);\n            }\n        }\n        else {\n            if (this.initLoad) {\n                this.element.parentElement.insertBefore(this.list, this.element);\n            }\n            this.list.insertBefore(this.element, this.list.firstChild);\n            this.element.style.display = 'none';\n        }\n        this.list.insertBefore(hiddenSelect, this.list.firstChild);\n        if (this.list.getElementsByClassName('e-list-item')[0]) {\n            this.list.getElementsByClassName('e-list-item')[0].classList.remove(dropDownBaseClasses.focus);\n        }\n        if (this.itemTemplate) {\n            this.renderReactTemplates();\n        }\n        removeClass([this.list], [dropDownBaseClasses.content, dropDownBaseClasses.root]);\n        this.validationAttribute(this.element, hiddenSelect);\n        this.list.setAttribute('role', 'listbox');\n        attributes(this.list, { 'role': 'listbox', 'aria-multiselectable': this.selectionSettings.mode === 'Multiple' ? 'true' : 'false' });\n        this.updateSelectionSettings();\n    }\n    updateSelectionSettings() {\n        if (this.selectionSettings.showCheckbox && this.selectionSettings.showSelectAll && this.liCollections.length) {\n            const l10nSelect = new L10n(this.getModuleName(), { selectAllText: 'Select All', unSelectAllText: 'Unselect All' }, this.locale);\n            this.showSelectAll = true;\n            this.selectAllText = l10nSelect.getConstant('selectAllText');\n            this.unSelectAllText = l10nSelect.getConstant('unSelectAllText');\n            this.popupWrapper = this.list;\n            this.checkBoxSelectionModule.checkAllParent = null;\n            this.notify('selectAll', {});\n        }\n    }\n    initDraggable() {\n        if (this.ulElement) {\n            this.ulElement.id = this.element.id + '_parent';\n        }\n        if (this.allowDragAndDrop) {\n            new Sortable(this.ulElement, {\n                scope: this.scope,\n                itemClass: 'e-list-item',\n                dragStart: this.triggerDragStart.bind(this),\n                drag: this.triggerDrag.bind(this),\n                beforeDrop: this.beforeDragEnd.bind(this),\n                drop: this.dragEnd.bind(this),\n                placeHolder: () => { return this.createElement('span', { className: 'e-placeholder' }); },\n                helper: (e) => {\n                    const wrapper = this.list.cloneNode();\n                    const ele = e.sender.cloneNode(true);\n                    wrapper.appendChild(ele);\n                    const refEle = this.getItems()[0];\n                    wrapper.style.width = refEle.offsetWidth + 'px';\n                    wrapper.style.height = refEle.offsetHeight + 'px';\n                    if ((this.value && this.value.length) > 1 && this.isSelected(ele)) {\n                        ele.appendChild(this.createElement('span', {\n                            className: 'e-list-badge', innerHTML: this.value.length + ''\n                        }));\n                    }\n                    wrapper.style.zIndex = getZindexPartial(this.element) + '';\n                    return wrapper;\n                }\n            });\n        }\n    }\n    updateActionCompleteData(li, item) {\n        this.jsonData.push(item);\n    }\n    initToolbar() {\n        const pos = this.toolbarSettings.position;\n        const prevScope = this.element.getAttribute('data-value');\n        if (this.toolbarSettings.items.length) {\n            const toolElem = this.createElement('div', { className: 'e-listbox-tool', attrs: { 'role': 'toolbar' } });\n            const wrapper = this.createElement('div', {\n                className: 'e-listboxtool-wrapper e-lib e-' + pos.toLowerCase()\n            });\n            this.list.parentElement.insertBefore(wrapper, this.list);\n            wrapper.appendChild(pos === 'Right' ? this.list : toolElem);\n            wrapper.appendChild(pos === 'Right' ? toolElem : this.list);\n            this.createButtons(toolElem);\n            if (!this.element.id) {\n                this.element.id = getUniqueID('e-' + this.getModuleName());\n            }\n            if (this.scope) {\n                document.querySelector(this.scope).setAttribute('data-value', this.element.id);\n            }\n            else {\n                this.updateToolBarState();\n            }\n        }\n        const scope = this.element.getAttribute('data-value');\n        if (prevScope && scope && (prevScope !== scope)) {\n            this.tBListBox = getComponent(document.getElementById(prevScope), this.getModuleName());\n            this.tBListBox.updateToolBarState();\n        }\n        else if (scope) {\n            this.tBListBox = getComponent(document.getElementById(scope), this.getModuleName());\n            this.tBListBox.updateToolBarState();\n        }\n    }\n    createButtons(toolElem) {\n        let btn;\n        let ele;\n        let title;\n        const l10n = new L10n(this.getModuleName(), {\n            moveUp: 'Move Up', moveDown: 'Move Down', moveTo: 'Move To',\n            moveFrom: 'Move From', moveAllTo: 'Move All To', moveAllFrom: 'Move All From'\n        }, this.locale);\n        this.toolbarSettings.items.forEach((value) => {\n            title = l10n.getConstant(value);\n            ele = this.createElement('button', {\n                attrs: {\n                    'type': 'button',\n                    'data-value': value,\n                    'title': title,\n                    'aria-label': title\n                }\n            });\n            toolElem.appendChild(ele);\n            btn = new Button({ iconCss: 'e-icons e-' + value.toLowerCase() }, ele);\n            btn.createElement = this.createElement;\n        });\n    }\n    validationAttribute(input, hiddenSelect) {\n        super.validationAttribute(input, hiddenSelect);\n        hiddenSelect.required = input.required;\n        input.required = false;\n    }\n    setHeight() {\n        const ele = this.toolbarSettings.items.length ? this.list.parentElement : this.list;\n        ele.style.height = formatUnit(this.height);\n        if (this.allowFiltering && this.height.toString().indexOf('%') < 0) {\n            addClass([this.list], 'e-filter-list');\n        }\n        else {\n            removeClass([this.list], 'e-filter-list');\n        }\n    }\n    setCssClass() {\n        const wrap = this.toolbarSettings.items.length ? this.list.parentElement : this.list;\n        if (this.cssClass) {\n            addClass([wrap], this.cssClass.split(' '));\n        }\n        if (this.enableRtl) {\n            addClass([this.list], 'e-rtl');\n        }\n    }\n    setEnable() {\n        const ele = this.toolbarSettings.items.length ? this.list.parentElement : this.list;\n        if (this.enabled) {\n            removeClass([ele], cssClass.disabled);\n        }\n        else {\n            addClass([ele], cssClass.disabled);\n        }\n    }\n    showSpinner() {\n        if (!this.spinner) {\n            this.spinner = this.createElement('div', { className: 'e-listbox-wrapper' });\n        }\n        this.spinner.style.height = formatUnit(this.height);\n        this.element.parentElement.insertBefore(this.spinner, this.element.nextSibling);\n        createSpinner({ target: this.spinner }, this.createElement);\n        showSpinner(this.spinner);\n    }\n    hideSpinner() {\n        if (this.spinner.querySelector('.e-spinner-pane')) {\n            hideSpinner(this.spinner);\n        }\n        if (this.spinner.parentElement) {\n            detach(this.spinner);\n        }\n    }\n    onInput() {\n        this.isDataSourceUpdate = false;\n        if (this.keyDownStatus) {\n            this.isValidKey = true;\n        }\n        else {\n            this.isValidKey = false;\n        }\n        this.keyDownStatus = false;\n        this.refreshClearIcon();\n    }\n    clearText() {\n        this.filterInput.value = '';\n        this.refreshClearIcon();\n        const event = document.createEvent('KeyboardEvent');\n        this.isValidKey = true;\n        this.KeyUp(event);\n    }\n    refreshClearIcon() {\n        if (this.filterInput.parentElement.querySelector('.' + listBoxClasses.clearIcon)) {\n            const clearElement = this.filterInput.parentElement.querySelector('.' + listBoxClasses.clearIcon);\n            clearElement.style.visibility = this.filterInput.value === '' ? 'hidden' : 'visible';\n        }\n    }\n    onActionComplete(ulElement, list, e) {\n        let searchEle;\n        if (this.allowFiltering && this.list.getElementsByClassName('e-filter-parent')[0]) {\n            searchEle = this.list.getElementsByClassName('e-filter-parent')[0].cloneNode(true);\n        }\n        if (list.length === 0) {\n            const noRecElem = ulElement.childNodes[0];\n            if (noRecElem) {\n                ulElement.removeChild(noRecElem);\n            }\n        }\n        super.onActionComplete(ulElement, list, e);\n        if (this.allowFiltering && !isNullOrUndefined(searchEle)) {\n            this.list.insertBefore(searchEle, this.list.firstElementChild);\n            this.filterParent = this.list.getElementsByClassName('e-filter-parent')[0];\n            this.filterWireEvents(searchEle);\n        }\n        this.initWrapper();\n        this.setSelection();\n        this.initDraggable();\n        this.mainList = this.ulElement;\n        if (this.initLoad) {\n            this.jsonData = [];\n            extend(this.jsonData, list, []);\n            this.initToolbarAndStyles();\n            this.wireEvents();\n            if (this.showCheckbox) {\n                this.setCheckboxPosition();\n            }\n            if (this.allowFiltering) {\n                this.setFiltering();\n            }\n        }\n        else {\n            if (this.isDataSourceUpdate) {\n                this.jsonData = [];\n                extend(this.jsonData, list, []);\n                this.isDataSourceUpdate = false;\n            }\n            if (this.allowFiltering) {\n                const filterElem = this.list.getElementsByClassName('e-input-filter')[0];\n                const txtLength = this.filterInput.value.length;\n                filterElem.selectionStart = txtLength;\n                filterElem.selectionEnd = txtLength;\n                filterElem.focus();\n            }\n        }\n        if (this.toolbarSettings.items.length && this.scope && this.scope.indexOf('#') > -1 && !isNullOrUndefined(e)) {\n            const scope = this.scope.replace('#', '');\n            const scopedLB = getComponent(document.getElementById(scope), this.getModuleName());\n            scopedLB.initToolbar();\n        }\n        this.initLoad = false;\n    }\n    initToolbarAndStyles() {\n        this.initToolbar();\n        this.setCssClass();\n        this.setEnable();\n        this.setHeight();\n    }\n    triggerDragStart(args) {\n        let badge;\n        args = extend(this.getDragArgs(args), { dragSelected: true });\n        if (Browser.isIos) {\n            this.list.style.overflow = 'hidden';\n        }\n        this.trigger('dragStart', args, (dragEventArgs) => {\n            this.allowDragAll = dragEventArgs.dragSelected;\n            if (!this.allowDragAll) {\n                badge = this.ulElement.getElementsByClassName('e-list-badge')[0];\n                if (badge) {\n                    detach(badge);\n                }\n            }\n        });\n    }\n    triggerDrag(args) {\n        this.trigger('drag', this.getDragArgs(args));\n        const listObj = this.getComponent(args.target);\n        if (listObj && listObj.listData.length === 0) {\n            const noRecElem = listObj.ulElement.childNodes[0];\n            if (noRecElem) {\n                listObj.ulElement.removeChild(noRecElem);\n            }\n        }\n    }\n    beforeDragEnd(args) {\n        const dragValue = this.getFormattedValue(args.droppedElement.getAttribute('data-value'));\n        if (this.value.indexOf(dragValue) > -1) {\n            args.items = this.getDataByValues(this.value);\n        }\n        else {\n            args.items = this.getDataByValues([dragValue]);\n        }\n        this.trigger('beforeDrop', args);\n        if (args.isDragAll !== null) {\n            this.allowDragAll = args.isDragAll;\n        }\n    }\n    dragEnd(args) {\n        let listData;\n        let liColl;\n        let jsonData;\n        let droppedData;\n        let selectedOptions;\n        let sortedData;\n        const dropValue = this.getFormattedValue(args.droppedElement.getAttribute('data-value'));\n        const listObj = this.getComponent(args.droppedElement);\n        const getArgs = this.getDragArgs({ target: args.droppedElement }, true);\n        const sourceArgs = { previousData: this.dataSource };\n        const destArgs = { previousData: listObj.dataSource };\n        let dragArgs = extend({}, getArgs, { target: args.target, source: { previousData: this.dataSource }, previousIndex: args.previousIndex, currentIndex: args.currentIndex });\n        if (listObj !== this) {\n            const sourceArgs1 = extend(sourceArgs, { currentData: this.listData });\n            dragArgs = extend(dragArgs, { source: sourceArgs1, destination: destArgs });\n        }\n        if (Browser.isIos) {\n            this.list.style.overflow = '';\n        }\n        if (listObj === this) {\n            const ul = this.ulElement;\n            listData = [].slice.call(this.listData);\n            liColl = [].slice.call(this.liCollections);\n            jsonData = [].slice.call(this.jsonData);\n            sortedData = [].slice.call(this.sortedData);\n            const toSortIdx = args.currentIndex;\n            let toIdx = args.currentIndex = this.getCurIdx(this, args.currentIndex);\n            const rIdx = listData.indexOf(this.getDataByValue(dropValue));\n            const jsonIdx = jsonData.indexOf(this.getDataByValue(dropValue));\n            const sIdx = sortedData.indexOf(this.getDataByValue(dropValue));\n            listData.splice(toIdx, 0, listData.splice(rIdx, 1)[0]);\n            sortedData.splice(toSortIdx, 0, sortedData.splice(sIdx, 1)[0]);\n            jsonData.splice(toIdx, 0, jsonData.splice(jsonIdx, 1)[0]);\n            liColl.splice(toIdx, 0, liColl.splice(rIdx, 1)[0]);\n            if (this.allowDragAll) {\n                selectedOptions = this.value && Array.prototype.indexOf.call(this.value, dropValue) > -1 ? this.value : [dropValue];\n                selectedOptions.forEach((value) => {\n                    if (value !== dropValue) {\n                        const idx = listData.indexOf(this.getDataByValue(value));\n                        const jsonIdx = jsonData.indexOf(this.getDataByValue(value));\n                        const sIdx = sortedData.indexOf(this.getDataByValue(value));\n                        if (idx > toIdx) {\n                            toIdx++;\n                        }\n                        jsonData.splice(toIdx, 0, jsonData.splice(jsonIdx, 1)[0]);\n                        listData.splice(toIdx, 0, listData.splice(idx, 1)[0]);\n                        sortedData.splice(toSortIdx, 0, sortedData.splice(sIdx, 1)[0]);\n                        liColl.splice(toIdx, 0, liColl.splice(idx, 1)[0]);\n                        ul.insertBefore(this.getItems()[this.getIndexByValue(value)], ul.getElementsByClassName('e-placeholder')[0]);\n                    }\n                });\n            }\n            this.listData = listData;\n            this.jsonData = jsonData;\n            this.sortedData = sortedData;\n            this.liCollections = liColl;\n        }\n        else {\n            let li;\n            const fLiColl = [].slice.call(this.liCollections);\n            let currIdx = args.currentIndex = this.getCurIdx(listObj, args.currentIndex);\n            const ul = listObj.ulElement;\n            listData = [].slice.call(listObj.listData);\n            liColl = [].slice.call(listObj.liCollections);\n            jsonData = [].slice.call(listObj.jsonData);\n            sortedData = [].slice.call(listObj.sortedData);\n            selectedOptions = (this.value && Array.prototype.indexOf.call(this.value, dropValue) > -1 && this.allowDragAll)\n                ? this.value : [dropValue];\n            const fListData = [].slice.call(this.listData);\n            const fSortData = [].slice.call(this.sortedData);\n            selectedOptions.forEach((value, index) => {\n                droppedData = this.getDataByValue(value);\n                const srcIdx = this.listData.indexOf(droppedData);\n                const jsonSrcIdx = this.jsonData.indexOf(droppedData);\n                const sortIdx = this.sortedData.indexOf(droppedData);\n                fListData.splice(srcIdx, 1);\n                this.jsonData.splice(jsonSrcIdx, 1);\n                fSortData.splice(sortIdx, 1);\n                this.listData = fListData;\n                this.sortedData = fSortData;\n                const destIdx = value === dropValue ? args.currentIndex : currIdx;\n                listData.splice(destIdx, 0, droppedData);\n                jsonData.splice(destIdx, 0, droppedData);\n                sortedData.splice(destIdx, 0, droppedData);\n                liColl.splice(destIdx, 0, fLiColl.splice(srcIdx, 1)[0]);\n                if (!value) {\n                    const liCollElem = this.getItems();\n                    for (let i = 0; i < liCollElem.length; i++) {\n                        if (liCollElem[i].getAttribute('data-value') === null && liCollElem[i].classList.contains('e-list-item')) {\n                            li = liCollElem[i];\n                            break;\n                        }\n                    }\n                }\n                else {\n                    li = this.getItems()[this.getIndexByValue(value)];\n                }\n                if (!li) {\n                    li = args.helper;\n                }\n                this.removeSelected(this, value === dropValue ? [args.droppedElement] : [li]);\n                ul.insertBefore(li, ul.getElementsByClassName('e-placeholder')[0]);\n                currIdx++;\n            });\n            if (this.fields.groupBy) {\n                let sourceElem = this.renderItems(this.listData, this.fields);\n                this.updateListItems(sourceElem, this.ulElement);\n                this.setSelection();\n            }\n            if (listObj.sortOrder !== 'None' || this.selectionSettings.showCheckbox\n                !== listObj.selectionSettings.showCheckbox || listObj.fields.groupBy || listObj.itemTemplate || this.itemTemplate) {\n                const sortable = getComponent(ul, 'sortable');\n                let sourceElem = listObj.renderItems(listData, listObj.fields);\n                listObj.updateListItems(sourceElem, ul);\n                this.setSelection();\n                if (sortable.placeHolderElement) {\n                    ul.appendChild(sortable.placeHolderElement);\n                }\n                ul.appendChild(args.helper);\n                listObj.setSelection();\n            }\n            this.liCollections = fLiColl;\n            listObj.liCollections = liColl;\n            listObj.jsonData = extend([], [], jsonData, false);\n            listObj.listData = extend([], [], listData, false);\n            listObj.sortedData = extend([], [], sortedData, false);\n            if (this.listData.length === 0) {\n                this.l10nUpdate();\n            }\n        }\n        if (this === listObj) {\n            const sourceArgs1 = extend(sourceArgs, { currentData: listData });\n            dragArgs = extend(dragArgs, { source: sourceArgs1 });\n        }\n        else {\n            const dragArgs1 = extend(destArgs, { currentData: listData });\n            dragArgs = extend(dragArgs, { destination: dragArgs1 });\n        }\n        this.trigger('drop', dragArgs);\n    }\n    updateListItems(sourceElem, destElem) {\n        const i = 0;\n        destElem.innerHTML = \"\";\n        while (i < sourceElem.childNodes.length) {\n            destElem.appendChild(sourceElem.childNodes[i]);\n        }\n    }\n    removeSelected(listObj, elems) {\n        if (listObj.selectionSettings.showCheckbox) {\n            elems.forEach((ele) => { ele.getElementsByClassName('e-frame')[0].classList.remove('e-check'); });\n        }\n        else {\n            removeClass(elems, cssClass.selected);\n        }\n    }\n    getCurIdx(listObj, idx) {\n        if (listObj.fields.groupBy) {\n            idx -= [].slice.call(listObj.ulElement.children).slice(0, idx)\n                .filter((ele) => ele.classList.contains(cssClass.group)).length;\n        }\n        return idx;\n    }\n    getComponent(li) {\n        let listObj;\n        const ele = (this.element.tagName === 'EJS-LISTBOX' ? closest(li, '.e-listbox')\n            : closest(li, '.e-listbox-wrapper') && closest(li, '.e-listbox-wrapper').querySelector('.e-listbox'));\n        if (ele) {\n            listObj = getComponent(ele, this.getModuleName());\n        }\n        return listObj;\n    }\n    listOption(dataSource, fields) {\n        this.listCurrentOptions = super.listOption(dataSource, fields);\n        this.listCurrentOptions = extend({}, this.listCurrentOptions, { itemCreated: this.triggerBeforeItemRender.bind(this) }, true);\n        this.notify('listoption', { module: 'CheckBoxSelection' });\n        return this.listCurrentOptions;\n    }\n    triggerBeforeItemRender(e) {\n        e.item.setAttribute('tabindex', '-1');\n        this.trigger('beforeItemRender', { element: e.item, item: e.curData });\n    }\n    requiredModules() {\n        const modules = [];\n        if (this.selectionSettings.showCheckbox) {\n            modules.push({\n                member: 'CheckBoxSelection',\n                args: [this]\n            });\n        }\n        return modules;\n    }\n    /**\n     * This method is used to enable or disable the items in the ListBox based on the items and enable argument.\n     *\n     * @param {string[]} items - Text items that needs to be enabled/disabled.\n     * @param {boolean} enable - Set `true`/`false` to enable/disable the list items.\n     * @param {boolean} isValue - Set `true` if `items` parameter is a array of unique values.\n     * @returns {void}\n     */\n    enableItems(items, enable = true, isValue) {\n        let li;\n        items.forEach((item) => {\n            let text = item;\n            li = this.findListElement(this.list, 'li', 'data-value', isValue ? text : this.getValueByText(text));\n            if (!li) {\n                return;\n            }\n            if (enable) {\n                removeClass([li], cssClass.disabled);\n                li.removeAttribute('aria-disabled');\n            }\n            else {\n                addClass([li], cssClass.disabled);\n                li.setAttribute('aria-disabled', 'true');\n            }\n        });\n    }\n    /**\n     * Based on the state parameter, specified list item will be selected/deselected.\n     *\n     * @param {string[]} items - Array of text value of the item.\n     * @param {boolean} state - Set `true`/`false` to select/un select the list items.\n     * @param {boolean} isValue - Set `true` if `items` parameter is a array of unique values.\n     * @returns {void}\n     */\n    selectItems(items, state = true, isValue) {\n        this.setSelection(items, state, !isValue);\n        this.updateSelectedOptions();\n    }\n    /**\n     * Based on the state parameter, entire list item will be selected/deselected.\n     *\n     * @param {boolean} state - Set `true`/`false` to select/un select the entire list items.\n     * @returns {void}\n     */\n    selectAll(state = true) {\n        this.selectAllItems(state);\n    }\n    /**\n     * Adds a new item to the list. By default, new item appends to the list as the last item,\n     * but you can insert based on the index parameter.\n     *\n     * @param  { Object[] } items - Specifies an array of JSON data or a JSON data.\n     * @param { number } itemIndex - Specifies the index to place the newly added item in the list.\n     * @returns {void}.\n     */\n    addItems(items, itemIndex) {\n        super.addItem(items, itemIndex);\n    }\n    /**\n     * Removes a item from the list. By default, removed the last item in the list,\n     * but you can remove based on the index parameter.\n     *\n     * @param  { Object[] } items - Specifies an array of JSON data or a JSON data.\n     * @param { number } itemIndex - Specifies the index to remove the item from the list.\n     * @returns {void}.\n     */\n    removeItems(items, itemIndex) {\n        this.removeItem(items, itemIndex);\n    }\n    /**\n     * Removes a item from the list. By default, removed the last item in the list,\n     * but you can remove based on the index parameter.\n     *\n     * @param  { Object[] } items - Specifies an array of JSON data or a JSON data.\n     * @param { number } itemIndex - Specifies the index to remove the item from the list.\n     * @returns {void}.\n     */\n    removeItem(items, itemIndex) {\n        const liCollections = [];\n        const liElement = this.list.querySelectorAll('.' + dropDownBaseClasses.li);\n        if (items) {\n            items = (items instanceof Array ? items : [items]);\n            const fields = this.fields;\n            let dataValue;\n            let objValue;\n            const dupData = [];\n            let itemIdx;\n            extend(dupData, [], this.listData);\n            const removeIdxes = [];\n            const removeLiIdxes = [];\n            for (let j = 0; j < items.length; j++) {\n                if (items[j] instanceof Object) {\n                    dataValue = getValue(fields.value, items[j]);\n                }\n                else {\n                    dataValue = items[j].toString();\n                }\n                for (let i = 0, len = dupData.length; i < len; i++) {\n                    if (dupData[i] instanceof Object) {\n                        objValue = getValue(fields.value, dupData[i]);\n                    }\n                    else {\n                        objValue = dupData[i].toString();\n                    }\n                    if (objValue === dataValue) {\n                        itemIdx = this.getIndexByValue(dataValue);\n                        liCollections.push(liElement[itemIdx]);\n                        removeIdxes.push(i);\n                        removeLiIdxes.push(itemIdx);\n                    }\n                }\n            }\n            for (let k = removeIdxes.length - 1; k >= 0; k--) {\n                this.listData.splice(removeIdxes[k], 1);\n            }\n            for (let k = removeIdxes.length - 1; k >= 0; k--) {\n                this.jsonData.splice(removeIdxes[k], 1);\n            }\n            for (let k = removeLiIdxes.length - 1; k >= 0; k--) {\n                this.updateLiCollection(removeLiIdxes[k]);\n            }\n        }\n        else {\n            itemIndex = itemIndex ? itemIndex : 0;\n            liCollections.push(liElement[itemIndex]);\n            this.listData.splice(itemIndex, 1);\n            this.jsonData.splice(itemIndex, 1);\n            this.updateLiCollection(itemIndex);\n        }\n        for (let i = 0; i < liCollections.length; i++) {\n            this.ulElement.removeChild(liCollections[i]);\n        }\n        if (this.listData.length === 0) {\n            this.l10nUpdate();\n        }\n    }\n    /**\n     * Gets the array of data Object that matches the given array of values.\n     *\n     * @param  { string[] | number[] | boolean[] } value - Specifies the array value of the list item.\n     * @returns {object[]}.\n     */\n    getDataByValues(value) {\n        const data = [];\n        for (let i = 0; i < value.length; i++) {\n            data.push(this.getDataByValue(value[i]));\n        }\n        return data;\n    }\n    /**\n     * Moves the given value(s) / selected value(s) upwards.\n     *\n     * @param  { string[] | number[] | boolean[] } value - Specifies the value(s).\n     * @returns {void}\n     */\n    moveUp(value) {\n        const elem = (value) ? this.getElemByValue(value) : this.getSelectedItems();\n        this.moveUpDown(true, false, elem);\n    }\n    /**\n     * Moves the given value(s) / selected value(s) downwards.\n     *\n     * @param  { string[] | number[] | boolean[] } value - Specifies the value(s).\n     * @returns {void}\n     */\n    moveDown(value) {\n        const elem = (value) ? this.getElemByValue(value) : this.getSelectedItems();\n        this.moveUpDown(false, false, elem);\n    }\n    /**\n     * Moves the given value(s) / selected value(s) to the given / default scoped ListBox.\n     *\n     * @param  { string[] | number[] | boolean[] } value - Specifies the value or array value of the list item.\n     * @param {number} index - Specifies the index.\n     * @param {string} targetId - Specifies the target id.\n     * @returns {void}\n     */\n    moveTo(value, index, targetId) {\n        const elem = (value) ? this.getElemByValue(value) : this.getSelectedItems();\n        const tlistbox = (targetId) ? getComponent(targetId, ListBox_1) : this.getScopedListBox();\n        this.moveData(this, tlistbox, false, elem, index);\n    }\n    /**\n     * Moves all the values from one ListBox to the scoped ListBox.\n     *\n     * @param  { string } targetId - Specifies the scoped ListBox ID.\n     * @param  { string } index - Specifies the index to where the items moved.\n     * @returns {void}\n     */\n    moveAllTo(targetId, index) {\n        if (this.listData.length > 0) {\n            const tlistbox = (targetId) ? getComponent(targetId, ListBox_1) : this.getScopedListBox();\n            this.moveAllData(this, tlistbox, false, index);\n        }\n    }\n    /* eslint-disable */\n    /**\n     * Gets the updated dataSource in ListBox.\n     *\n     * @returns {{ [key: string]: Object }[] | string[] | boolean[] | number[]} - Updated DataSource.\n     */\n    /* eslint-enable */\n    getDataList() {\n        return this.jsonData;\n    }\n    /* eslint-disable */\n    /**\n     * Returns the sorted Data in ListBox.\n     *\n     * @returns {{ [key: string]: Object }[] | string[] | boolean[] | number[]} - Sorted data\n     */\n    /* eslint-enable */\n    getSortedList() {\n        let sortData;\n        let tempData;\n        sortData = tempData = this.sortedData;\n        if (this.fields.groupBy) {\n            sortData = [];\n            for (let i = 0; i < tempData.length; i++) {\n                if (tempData[i].isHeader) {\n                    continue;\n                }\n                sortData.push(tempData[i]);\n            }\n        }\n        return sortData;\n    }\n    getElemByValue(value) {\n        const elem = [];\n        for (let i = 0; i < value.length; i++) {\n            elem.push(this.ulElement.querySelector('[data-value =\"' + value[i] + '\"]'));\n        }\n        return elem;\n    }\n    updateLiCollection(index) {\n        const tempLi = [].slice.call(this.liCollections);\n        tempLi.splice(index, 1);\n        this.liCollections = tempLi;\n    }\n    selectAllItems(state, event) {\n        [].slice.call(this.getItems()).forEach((li) => {\n            if (!li.classList.contains(cssClass.disabled)) {\n                if (this.selectionSettings.showCheckbox) {\n                    const ele = li.getElementsByClassName('e-check')[0];\n                    if ((!ele && state) || (ele && !state)) {\n                        this.notify('updatelist', { li: li, module: 'listbox' });\n                        if (this.maximumSelectionLength >= this.list.querySelectorAll('.e-list-item span.e-check').length) {\n                            this.checkMaxSelection();\n                        }\n                    }\n                }\n                else {\n                    if (state) {\n                        li.classList.add(cssClass.selected);\n                    }\n                    else {\n                        li.classList.remove(cssClass.selected);\n                    }\n                }\n            }\n        });\n        this.updateSelectedOptions();\n        if (this.allowFiltering && this.selectionSettings.showCheckbox) {\n            const liEle = this.list.getElementsByTagName('li');\n            let index = 0;\n            if (state) {\n                for (index = 0; index < liEle.length; index++) {\n                    const dataValue1 = this.getFormattedValue(liEle[index].getAttribute('data-value'));\n                    if (!this.value.some((e) => e === dataValue1)) {\n                        this.value.push(this.getFormattedValue(liEle[index].getAttribute('data-value')));\n                    }\n                }\n            }\n            else {\n                for (index = 0; index < liEle.length; index++) {\n                    const dataValue2 = this.getFormattedValue(liEle[index].getAttribute('data-value'));\n                    this.value = this.value.filter((e) => e !== dataValue2);\n                }\n            }\n            if (document.querySelectorAll('ul').length < 2) {\n                this.updateMainList();\n            }\n        }\n        this.triggerChange(this.getSelectedItems(), event);\n    }\n    updateMainList() {\n        const mainList = this.mainList.querySelectorAll('.e-list-item');\n        const ulList = this.ulElement.querySelectorAll('.e-list-item');\n        const mainCount = mainList.length;\n        const ulEleCount = ulList.length;\n        if (this.selectionSettings.showCheckbox || (document.querySelectorAll('ul').length > 1 || mainCount !== ulEleCount)) {\n            let listindex = 0;\n            let valueindex = 0;\n            let count = 0;\n            for (listindex; listindex < mainCount;) {\n                if (this.value) {\n                    for (valueindex; valueindex < this.value.length; valueindex++) {\n                        if (mainList[listindex].getAttribute('data-value') === this.value[valueindex]) {\n                            count++;\n                        }\n                    }\n                }\n                if (!count && this.selectionSettings.showCheckbox) {\n                    mainList[listindex].getElementsByClassName('e-frame')[0].classList.remove('e-check');\n                }\n                if (document.querySelectorAll('ul').length > 1 && count && mainCount !== ulEleCount) {\n                    this.mainList.removeChild(this.mainList.getElementsByTagName('li')[listindex]);\n                    listindex = 0;\n                }\n                else {\n                    listindex++;\n                }\n                count = 0;\n                valueindex = 0;\n            }\n        }\n    }\n    wireEvents() {\n        const form = closest(this.element, 'form');\n        const wrapper = this.element.tagName === 'EJS-LISTBOX' ? this.element : this.list;\n        EventHandler.add(this.list, 'click', this.clickHandler, this);\n        EventHandler.add(wrapper, 'keydown', this.keyDownHandler, this);\n        EventHandler.add(wrapper, 'focusout', this.focusOutHandler, this);\n        this.wireToolbarEvent();\n        if (this.selectionSettings.showCheckbox) {\n            EventHandler.remove(document, 'mousedown', this.checkBoxSelectionModule.onDocumentClick);\n        }\n        if (this.fields.groupBy || this.element.querySelector('select>optgroup')) {\n            EventHandler.remove(this.list, 'scroll', this.setFloatingHeader);\n        }\n        if (form) {\n            EventHandler.add(form, 'reset', this.formResetHandler, this);\n        }\n    }\n    wireToolbarEvent() {\n        if (this.toolbarSettings.items.length) {\n            EventHandler.add(this.getToolElem(), 'click', this.toolbarClickHandler, this);\n        }\n    }\n    unwireEvents() {\n        const form = closest(this.element, 'form');\n        const wrapper = this.element.tagName === 'EJS-LISTBOX' ? this.element : this.list;\n        EventHandler.remove(this.list, 'click', this.clickHandler);\n        EventHandler.remove(wrapper, 'keydown', this.keyDownHandler);\n        EventHandler.remove(wrapper, 'focusout', this.focusOutHandler);\n        if (this.allowFiltering && this.clearFilterIconElem) {\n            EventHandler.remove(this.clearFilterIconElem, 'click', this.clearText);\n        }\n        if (this.toolbarSettings.items.length) {\n            EventHandler.remove(this.getToolElem(), 'click', this.toolbarClickHandler);\n        }\n        if (form) {\n            EventHandler.remove(form, 'reset', this.formResetHandler);\n        }\n    }\n    clickHandler(e) {\n        this.selectHandler(e);\n    }\n    checkSelectAll() {\n        let searchCount = 0;\n        const liItems = this.list.querySelectorAll('li.' + dropDownBaseClasses.li);\n        for (let i = 0; i < liItems.length; i++) {\n            if (!liItems[i].classList.contains('e-disabled')) {\n                searchCount++;\n            }\n        }\n        const len = this.getSelectedItems().length;\n        if (this.showSelectAll && searchCount) {\n            this.notify('checkSelectAll', { module: 'CheckBoxSelection',\n                value: (searchCount === len) ? 'check' : (len === 0) ? 'uncheck' : 'indeterminate' });\n        }\n    }\n    getQuery(query) {\n        let filterQuery = query ? query.clone() : this.query ? this.query.clone() : new Query();\n        if (this.allowFiltering) {\n            const filterType = this.inputString === '' ? 'contains' : this.filterType;\n            const dataType = this.typeOfData(this.dataSource).typeof;\n            if (!(this.dataSource instanceof DataManager) && dataType === 'string' || dataType === 'number') {\n                filterQuery.where('', filterType, this.inputString, this.ignoreCase, this.ignoreAccent);\n            }\n            else {\n                const fields = (this.fields.text) ? this.fields.text : '';\n                filterQuery.where(fields, filterType, this.inputString, this.ignoreCase, this.ignoreAccent);\n            }\n        }\n        else {\n            filterQuery = query ? query : this.query ? this.query : new Query();\n        }\n        return filterQuery;\n    }\n    setFiltering() {\n        let filterInputObj;\n        if (this.initLoad || isNullOrUndefined(this.filterParent)) {\n            this.filterParent = this.createElement('span', {\n                className: listBoxClasses.filterParent\n            });\n            this.filterInput = this.createElement('input', {\n                attrs: { type: 'text' },\n                className: listBoxClasses.filterInput\n            });\n            this.element.parentNode.insertBefore(this.filterInput, this.element);\n            filterInputObj = Input.createInput({\n                element: this.filterInput,\n                buttons: [listBoxClasses.filterBarClearIcon],\n                properties: { placeholder: this.filterBarPlaceholder }\n            }, this.createElement);\n            append([filterInputObj.container], this.filterParent);\n            prepend([this.filterParent], this.list);\n            attributes(this.filterInput, {\n                'aria-disabled': 'false',\n                'aria-owns': this.element.id + '_options',\n                'role': 'listbox',\n                'aria-activedescendant': null,\n                'autocomplete': 'off',\n                'autocorrect': 'off',\n                'autocapitalize': 'off',\n                'spellcheck': 'false'\n            });\n            if (this.height.toString().indexOf('%') < 0) {\n                addClass([this.list], 'e-filter-list');\n            }\n            this.inputString = this.filterInput.value;\n            this.filterWireEvents();\n            return filterInputObj;\n        }\n    }\n    filterWireEvents(filterElem) {\n        if (filterElem) {\n            this.filterInput = filterElem.querySelector('.e-input-filter');\n        }\n        this.clearFilterIconElem = this.filterInput.parentElement.querySelector('.' + listBoxClasses.clearIcon);\n        if (this.clearFilterIconElem) {\n            EventHandler.add(this.clearFilterIconElem, 'click', this.clearText, this);\n            if (!filterElem) {\n                this.clearFilterIconElem.style.visibility = 'hidden';\n            }\n        }\n        EventHandler.add(this.filterInput, 'input', this.onInput, this);\n        EventHandler.add(this.filterInput, 'keyup', this.KeyUp, this);\n        EventHandler.add(this.filterInput, 'keydown', this.onKeyDown, this);\n    }\n    selectHandler(e, isKey) {\n        let isSelect = true;\n        let currSelIdx;\n        const li = closest(e.target, '.' + 'e-list-item');\n        let selectedLi = [li];\n        if (li && li.parentElement) {\n            currSelIdx = [].slice.call(li.parentElement.children).indexOf(li);\n            if (!this.selectionSettings.showCheckbox) {\n                if ((e.ctrlKey || Browser.isDevice) && this.isSelected(li)) {\n                    li.classList.remove(cssClass.selected);\n                    li.removeAttribute('aria-selected');\n                    isSelect = false;\n                }\n                else if (!(this.selectionSettings.mode === 'Multiple' && (e.ctrlKey || Browser.isDevice))) {\n                    this.getSelectedItems().forEach((ele) => {\n                        ele.removeAttribute('aria-selected');\n                    });\n                    removeClass(this.getSelectedItems(), cssClass.selected);\n                }\n            }\n            else {\n                isSelect = !li.getElementsByClassName('e-frame')[0].classList.contains('e-check');\n            }\n            if (e.shiftKey && !this.selectionSettings.showCheckbox && this.selectionSettings.mode !== 'Single') {\n                selectedLi = [].slice.call(li.parentElement.children)\n                    .slice(Math.min(currSelIdx, this.prevSelIdx), Math.max(currSelIdx, this.prevSelIdx) + 1)\n                    .filter((ele) => { return ele.classList.contains('e-list-item'); });\n            }\n            else {\n                this.prevSelIdx = [].slice.call(li.parentElement.children).indexOf(li);\n            }\n            if (isSelect) {\n                if (!this.selectionSettings.showCheckbox) {\n                    addClass(selectedLi, cssClass.selected);\n                }\n                selectedLi.forEach((ele) => {\n                    ele.setAttribute('aria-selected', 'true');\n                });\n                this.list.setAttribute('aria-activedescendant', li.id);\n            }\n            if (!isKey && (this.maximumSelectionLength > (this.value && this.value.length) || !isSelect) &&\n                (this.maximumSelectionLength >= (this.value && this.value.length) || !isSelect) &&\n                !(this.maximumSelectionLength < (this.value && this.value.length))) {\n                this.notify('updatelist', { li: li, e: e, module: 'listbox' });\n            }\n            if (this.allowFiltering && !isKey) {\n                const liDataValue = this.getFormattedValue(li.getAttribute('data-value'));\n                if (!isSelect) {\n                    this.value = this.value.filter((value1) => value1 !== liDataValue);\n                }\n                else {\n                    const values = [];\n                    extend(values, this.value);\n                    values.push(liDataValue);\n                    this.value = values;\n                }\n                if (document.querySelectorAll('ul').length < 2) {\n                    this.updateMainList();\n                }\n            }\n            this.updateSelectedOptions();\n            this.triggerChange(this.getSelectedItems(), e);\n            this.checkMaxSelection();\n        }\n    }\n    triggerChange(selectedLis, event) {\n        this.trigger('change', { elements: selectedLis, items: this.getDataByElements(selectedLis), value: this.value, event: event });\n    }\n    getDataByElems(elems) {\n        const data = [];\n        for (let i = 0, len = elems.length; i < len; i++) {\n            data.push(this.getDataByValue(this.getFormattedValue(elems[i].getAttribute('data-value'))));\n        }\n        return data;\n    }\n    getDataByElements(elems) {\n        const data = [];\n        let value;\n        let sIdx = 0;\n        if (!isNullOrUndefined(this.listData)) {\n            const type = this.typeOfData(this.listData).typeof;\n            if (type === 'string' || type === 'number' || type === 'boolean') {\n                for (const item of this.listData) {\n                    for (let i = sIdx, len = elems.length; i < len; i++) {\n                        value = this.getFormattedValue(elems[i].getAttribute('data-value'));\n                        if (!isNullOrUndefined(item) && item === value) {\n                            sIdx = i;\n                            data.push(item);\n                            break;\n                        }\n                    }\n                    if (elems.length === data.length) {\n                        break;\n                    }\n                }\n            }\n            else {\n                for (const item of this.listData) {\n                    for (let i = sIdx, len = elems.length; i < len; i++) {\n                        value = this.getFormattedValue(elems[i].getAttribute('data-value'));\n                        if (!isNullOrUndefined(item) && getValue((this.fields.value ? this.fields.value : 'value'), item) === value) {\n                            sIdx = i;\n                            data.push(item);\n                            break;\n                        }\n                    }\n                    if (elems.length === data.length) {\n                        break;\n                    }\n                }\n            }\n            return data;\n        }\n        return null;\n    }\n    checkMaxSelection() {\n        const limit = this.list.querySelectorAll('.e-list-item span.e-check').length;\n        if (this.selectionSettings.showCheckbox) {\n            let index = 0;\n            const liCollElem = this.list.getElementsByClassName('e-list-item');\n            for (index; index < liCollElem.length; index++) {\n                if (!liCollElem[index].querySelector('.e-frame.e-check')) {\n                    if (limit === this.maximumSelectionLength) {\n                        liCollElem[index].classList.add('e-disable');\n                    }\n                    else if (liCollElem[index].classList.contains('e-disable')) {\n                        liCollElem[index].classList.remove('e-disable');\n                    }\n                }\n            }\n        }\n    }\n    toolbarClickHandler(e) {\n        const btn = closest(e.target, 'button');\n        if (btn) {\n            this.toolbarAction = btn.getAttribute('data-value');\n            if (btn.disabled) {\n                return;\n            }\n            switch (this.toolbarAction) {\n                case 'moveUp':\n                    this.moveUpDown(true);\n                    break;\n                case 'moveDown':\n                    this.moveUpDown();\n                    break;\n                case 'moveTo':\n                    this.moveItemTo();\n                    break;\n                case 'moveFrom':\n                    this.moveItemFrom();\n                    break;\n                case 'moveAllTo':\n                    this.moveAllItemTo();\n                    break;\n                case 'moveAllFrom':\n                    this.moveAllItemFrom();\n                    break;\n                default:\n                    this.trigger('actionBegin', { cancel: false, items: this.getDataByElems(this.getSelectedItems()),\n                        eventName: this.toolbarAction });\n                    break;\n            }\n        }\n    }\n    moveUpDown(isUp, isKey, value) {\n        let elems = this.getSelectedItems();\n        if (value) {\n            elems = value;\n        }\n        if (((isUp && this.isSelected(this.ulElement.firstElementChild))\n            || (!isUp && this.isSelected(this.ulElement.lastElementChild))) && !value) {\n            return;\n        }\n        const tempItems = this.getDataByElems(elems);\n        const localDataArgs = { cancel: false, items: tempItems, eventName: this.toolbarAction };\n        this.trigger('actionBegin', localDataArgs);\n        if (localDataArgs.cancel) {\n            return;\n        }\n        (isUp ? elems : elems.reverse()).forEach((ele) => {\n            const jsonToIdx = Array.prototype.indexOf.call(this.ulElement.querySelectorAll('.e-list-item'), ele);\n            const idx = Array.prototype.indexOf.call(this.ulElement.children, ele);\n            moveTo(this.ulElement, this.ulElement, [idx], isUp ? idx - 1 : idx + 2);\n            this.changeData(idx, isUp ? idx - 1 : idx + 1, isUp ? jsonToIdx - 1 : jsonToIdx + 1, ele);\n        });\n        this.trigger('actionComplete', { items: tempItems, eventName: this.toolbarAction });\n        elems[0].focus();\n        if (!isKey && this.toolbarSettings.items.length) {\n            this.getToolElem().querySelector('[data-value=' + (isUp ? 'moveUp' : 'moveDown') + ']').focus();\n        }\n        this.updateToolBarState();\n    }\n    moveItemTo() {\n        this.moveData(this, this.getScopedListBox());\n    }\n    moveItemFrom() {\n        this.moveData(this.getScopedListBox(), this);\n    }\n    /**\n     * Called internally if any of the property value changed.\n     *\n     * @param {ListBox} fListBox - Specifies the from listbox.\n     * @param {ListBox} tListBox - Specifies the to listbox.\n     * @param {boolean} isKey - Specifies the key.\n     * @param {Element[]} value - Specifies the value.\n     * @param {number} index - Specifies the index.\n     * @returns {void}\n     * @private\n     */\n    moveData(fListBox, tListBox, isKey, value, index) {\n        const idx = [];\n        const dataIdx = [];\n        const jsonIdx = [];\n        const sortIdx = [];\n        const listData = [].slice.call(fListBox.listData);\n        const tListData = [].slice.call(tListBox.listData);\n        const sortData = [].slice.call(fListBox.sortedData);\n        let tSortData = [].slice.call(tListBox.sortedData);\n        const fliCollections = [].slice.call(fListBox.liCollections);\n        const dataLiIdx = [];\n        const tliCollections = [].slice.call(tListBox.liCollections);\n        const tempItems = [];\n        const data = [];\n        let elems = fListBox.getSelectedItems();\n        if (value) {\n            elems = value;\n        }\n        const isRefresh = tListBox.sortOrder !== 'None' || (tListBox.selectionSettings.showCheckbox !==\n            fListBox.selectionSettings.showCheckbox) || tListBox.fields.groupBy || tListBox.itemTemplate || fListBox.itemTemplate;\n        fListBox.value = [];\n        if (elems.length) {\n            this.removeSelected(fListBox, elems);\n            elems.forEach((ele) => {\n                idx.push(Array.prototype.indexOf.call(fListBox.ulElement.children, ele)); // update sortable elem\n                // To update lb view data\n                dataLiIdx.push(Array.prototype.indexOf.call(fListBox.ulElement.querySelectorAll('.e-list-item'), ele));\n                // To update lb listdata data\n                dataIdx.push(Array.prototype.indexOf.call(fListBox.listData, fListBox.getDataByElems([ele])[0]));\n                // To update lb sorted data\n                sortIdx.push(Array.prototype.indexOf.call(fListBox.sortedData, fListBox.getDataByElems([ele])[0]));\n                // To update lb original data\n                jsonIdx.push(Array.prototype.indexOf.call(fListBox.jsonData, fListBox.getDataByElems([ele])[0]));\n            });\n            if (this.sortOrder !== 'None') {\n                sortIdx.forEach((i) => {\n                    tempItems.push(fListBox.sortedData[i]);\n                });\n            }\n            else {\n                jsonIdx.forEach((i) => {\n                    tempItems.push(fListBox.jsonData[i]);\n                });\n            }\n            const localDataArgs = { cancel: false, items: tempItems, eventName: this.toolbarAction };\n            fListBox.trigger('actionBegin', localDataArgs);\n            if (localDataArgs.cancel) {\n                return;\n            }\n            const rLiCollection = [];\n            dataLiIdx.sort((n1, n2) => n1 - n2).reverse().forEach((i) => {\n                rLiCollection.push(fliCollections.splice(i, 1)[0]);\n            });\n            fListBox.liCollections = fliCollections;\n            if (index) {\n                const toColl = tliCollections.splice(0, index);\n                tListBox.liCollections = toColl.concat(rLiCollection.reverse()).concat(tliCollections);\n            }\n            else {\n                tListBox.liCollections = tliCollections.concat(rLiCollection.reverse());\n            }\n            if (tListBox.listData.length === 0) {\n                const noRecElem = tListBox.ulElement.childNodes[0];\n                if (noRecElem) {\n                    tListBox.ulElement.removeChild(noRecElem);\n                }\n            }\n            dataIdx.sort((n1, n2) => n2 - n1).forEach((i) => {\n                // eslint-disable-next-line @typescript-eslint/no-unused-expressions\n                listData.splice(i, 1)[0];\n            });\n            sortIdx.sort((n1, n2) => n2 - n1).forEach((i) => {\n                // eslint-disable-next-line @typescript-eslint/no-unused-expressions\n                sortData.splice(i, 1)[0];\n            });\n            jsonIdx.slice().reverse().forEach((i) => {\n                data.push(fListBox.jsonData.splice(i, 1)[0]);\n            });\n            if (isRefresh) {\n                if (fListBox.fields.groupBy) {\n                    let sourceElem = fListBox.renderItems(listData, fListBox.fields);\n                    fListBox.updateListItems(sourceElem, fListBox.ulElement);\n                }\n                else {\n                    elems.forEach((ele) => { detach(ele); });\n                }\n            }\n            else {\n                moveTo(fListBox.ulElement, tListBox.ulElement, idx, index);\n                fListBox.trigger('actionComplete', { items: tempItems, eventName: this.toolbarAction });\n            }\n            if (tListBox.mainList.childElementCount !== tListBox.jsonData.length) {\n                tListBox.mainList = tListBox.ulElement;\n            }\n            fListBox.updateMainList();\n            const tJsonData = [].slice.call(tListBox.jsonData);\n            tSortData = [].slice.call(tListBox.sortedData);\n            this.selectNextList(elems, dataLiIdx, dataIdx, fListBox);\n            if (isKey) {\n                this.list.focus();\n            }\n            fListBox.listData = listData;\n            fListBox.sortedData = sortData;\n            index = (index) ? index : tListData.length;\n            for (let i = tempItems.length - 1; i >= 0; i--) {\n                tListData.splice(index, 0, tempItems[i]);\n                tJsonData.splice(index, 0, tempItems[i]);\n                tSortData.splice(index, 0, tempItems[i]);\n            }\n            tListBox.listData = tListData;\n            tListBox.jsonData = tJsonData;\n            tListBox.sortedData = tSortData;\n            if (isRefresh) {\n                let sourceElem = tListBox.renderItems(tListData, tListBox.fields);\n                tListBox.updateListItems(sourceElem, tListBox.ulElement);\n                tListBox.setSelection();\n                fListBox.trigger('actionComplete', { items: tempItems, eventName: this.toolbarAction });\n            }\n            fListBox.updateSelectedOptions();\n            if (fListBox.listData.length === 0) {\n                fListBox.l10nUpdate();\n            }\n        }\n        if (fListBox.value.length === 1 && fListBox.getSelectedItems().length) {\n            fListBox.value[0] = fListBox.getFormattedValue(fListBox.getSelectedItems()[0].getAttribute('data-value'));\n        }\n    }\n    selectNextList(elems, dataLiIdx, dataIdx, inst) {\n        const childCnt = inst.ulElement.querySelectorAll('.e-list-item').length;\n        let ele;\n        let liIdx;\n        let validIdx = -1;\n        if (elems.length === 1 && childCnt && !inst.selectionSettings.showCheckbox) {\n            liIdx = childCnt <= dataLiIdx[0] ? childCnt - 1 : dataLiIdx[0];\n            ele = inst.ulElement.querySelectorAll('.e-list-item')[liIdx];\n            validIdx = inst.getValidIndex(ele, liIdx, childCnt === dataIdx[0] ? 38 : 40);\n            if (validIdx > -1) {\n                (inst.ulElement.querySelectorAll('.e-list-item')[validIdx].classList.add(cssClass.selected));\n            }\n        }\n    }\n    moveAllItemTo() {\n        this.moveAllData(this, this.getScopedListBox());\n    }\n    moveAllItemFrom() {\n        this.moveAllData(this.getScopedListBox(), this);\n    }\n    moveAllData(fListBox, tListBox, isKey, index) {\n        let listData = [].slice.call(tListBox.listData);\n        const jsonData = [].slice.call(tListBox.jsonData);\n        const isRefresh = tListBox.sortOrder !== 'None' || (tListBox.selectionSettings.showCheckbox !==\n            fListBox.selectionSettings.showCheckbox) || tListBox.fields.groupBy || tListBox.itemTemplate || fListBox.itemTemplate;\n        this.removeSelected(fListBox, fListBox.getSelectedItems());\n        const tempItems = [].slice.call(fListBox.jsonData);\n        const localDataArgs = { cancel: false, items: tempItems, eventName: this.toolbarAction };\n        fListBox.trigger('actionBegin', localDataArgs);\n        if (localDataArgs.cancel) {\n            return;\n        }\n        if (tListBox.listData.length === 0) {\n            const noRecElem = tListBox.ulElement.childNodes[0];\n            if (noRecElem) {\n                tListBox.ulElement.removeChild(noRecElem);\n            }\n        }\n        if (isRefresh) {\n            const noRecElem = fListBox.ulElement.childNodes[0];\n            if (noRecElem) {\n                fListBox.ulElement.removeChild(noRecElem);\n            }\n        }\n        moveTo(fListBox.ulElement, tListBox.ulElement, \n        // eslint-disable-next-line prefer-spread\n        Array.apply(null, { length: fListBox.ulElement.childElementCount }).map(Number.call, Number), index);\n        this.trigger('actionComplete', { items: tempItems, eventName: this.toolbarAction });\n        if (isKey) {\n            this.list.focus();\n        }\n        index = (index) ? index : listData.length;\n        for (let i = 0; i < fListBox.listData.length; i++) {\n            listData.splice(index + i, 0, fListBox.listData[i]);\n        }\n        for (let i = 0; i < fListBox.jsonData.length; i++) {\n            jsonData.splice(index + i, 0, fListBox.jsonData[i]);\n        }\n        const fliCollections = [].slice.call(fListBox.liCollections);\n        const tliCollections = [].slice.call(tListBox.liCollections);\n        fListBox.liCollections = [];\n        if (index) {\n            const toColl = tliCollections.splice(0, index);\n            tListBox.liCollections = toColl.concat(fliCollections).concat(tliCollections);\n        }\n        else {\n            tListBox.liCollections = tliCollections.concat(fliCollections);\n        }\n        fListBox.value = [];\n        listData = listData\n            .filter((data) => data.isHeader !== true);\n        tListBox.listData = listData;\n        tListBox.jsonData = jsonData;\n        fListBox.listData = fListBox.sortedData = fListBox.jsonData = [];\n        if (isRefresh) {\n            let sourceElem = tListBox.renderItems(listData, tListBox.fields);\n            tListBox.updateListItems(sourceElem, tListBox.ulElement);\n            this.trigger('actionComplete', { items: tempItems, eventName: this.toolbarAction });\n        }\n        else {\n            tListBox.sortedData = listData;\n        }\n        fListBox.updateSelectedOptions();\n        if (fListBox.listData.length === 0) {\n            fListBox.l10nUpdate();\n        }\n    }\n    changeData(fromIdx, toIdx, jsonToIdx, ele) {\n        const listData = [].slice.call(this.listData);\n        const jsonData = [].slice.call(this.jsonData);\n        const sortData = [].slice.call(this.sortedData);\n        const jsonIdx = Array.prototype.indexOf.call(this.jsonData, this.getDataByElems([ele])[0]);\n        const sortIdx = Array.prototype.indexOf.call(this.sortedData, this.getDataByElems([ele])[0]);\n        const liColl = [].slice.call(this.liCollections);\n        listData.splice(toIdx, 0, listData.splice(fromIdx, 1)[0]);\n        jsonData.splice(jsonToIdx, 0, jsonData.splice(jsonIdx, 1)[0]);\n        sortData.splice(toIdx, 0, sortData.splice(sortIdx, 1)[0]);\n        liColl.splice(toIdx, 0, liColl.splice(fromIdx, 1)[0]);\n        this.listData = listData;\n        this.jsonData = jsonData;\n        this.liCollections = liColl;\n        this.sortedData = sortData;\n    }\n    getSelectedItems() {\n        let ele = [];\n        if (this.selectionSettings.showCheckbox) {\n            [].slice.call(this.ulElement.getElementsByClassName('e-check')).forEach((cbox) => {\n                ele.push(closest(cbox, '.' + 'e-list-item'));\n            });\n        }\n        else {\n            ele = [].slice.call(this.ulElement.getElementsByClassName(cssClass.selected));\n        }\n        return ele;\n    }\n    getScopedListBox() {\n        let listObj;\n        if (this.scope) {\n            [].slice.call(document.querySelectorAll(this.scope)).forEach((ele) => {\n                if (getComponent(ele, this.getModuleName())) {\n                    listObj = getComponent(ele, this.getModuleName());\n                }\n            });\n        }\n        return listObj;\n    }\n    getGrabbedItems() {\n        const elems = Array.prototype.slice.call(this.element.querySelectorAll('.e-grabbed'));\n        return elems;\n    }\n    getDragArgs(args, isDragEnd) {\n        let elems = this.getGrabbedItems();\n        if (elems.length) {\n            if (isDragEnd) {\n                elems.push(args.target);\n            }\n        }\n        else {\n            elems = [args.target];\n        }\n        return { elements: elems, items: this.getDataByElems(elems) };\n    }\n    onKeyDown(e) {\n        this.keyDownHandler(e);\n        e.stopPropagation();\n    }\n    keyDownHandler(e) {\n        if ([32, 35, 36, 37, 38, 39, 40, 65].indexOf(e.keyCode) > -1 && !this.allowFiltering) {\n            if (e.target && e.target.className.indexOf('e-edit-template') > -1) {\n                return;\n            }\n            e.preventDefault();\n            if (e.keyCode === 32 && this.ulElement.children.length) {\n                this.selectHandler({\n                    target: this.ulElement.getElementsByClassName('e-focused')[0],\n                    ctrlKey: e.ctrlKey, shiftKey: e.shiftKey\n                });\n            }\n            else if (e.keyCode === 65 && e.ctrlKey) {\n                this.selectAll();\n            }\n            else if ((e.keyCode === 38 || e.keyCode === 40) && e.ctrlKey && e.shiftKey) {\n                this.moveUpDown(e.keyCode === 38 ? true : false, true);\n            }\n            else if ((this.toolbarSettings.items.length || this.tBListBox) && (e.keyCode === 39 || e.keyCode === 37) && e.ctrlKey) {\n                const listObj = this.tBListBox || this.getScopedListBox();\n                if (e.keyCode === 39) {\n                    if (e.shiftKey) {\n                        this.moveAllData(this, listObj, true);\n                    }\n                    else {\n                        this.moveData(this, listObj, true);\n                    }\n                }\n                else {\n                    if (e.shiftKey) {\n                        this.moveAllData(listObj, this, true);\n                    }\n                    else {\n                        this.moveData(listObj, this, true);\n                    }\n                }\n            }\n            else if (e.keyCode !== 37 && e.keyCode !== 39) {\n                this.upDownKeyHandler(e);\n            }\n        }\n        else if (this.allowFiltering) {\n            if (e.keyCode === 40 || e.keyCode === 38) {\n                this.upDownKeyHandler(e);\n            }\n        }\n    }\n    upDownKeyHandler(e) {\n        const ul = this.ulElement;\n        const defaultIdx = (e.keyCode === 40 || e.keyCode === 36) ? 0 : ul.childElementCount - 1;\n        let fliIdx = defaultIdx;\n        const fli = ul.getElementsByClassName('e-focused')[0] || ul.getElementsByClassName(cssClass.selected)[0];\n        if (fli) {\n            if (e.keyCode !== 35 && e.keyCode !== 36) {\n                fliIdx = Array.prototype.indexOf.call(ul.children, fli);\n                if (e.keyCode === 40) {\n                    fliIdx++;\n                }\n                else {\n                    fliIdx--;\n                }\n                if (fliIdx < 0 || fliIdx > ul.childElementCount - 1) {\n                    return;\n                }\n            }\n            removeClass([fli], 'e-focused');\n        }\n        const cli = ul.children[fliIdx];\n        if (cli) {\n            fliIdx = this.getValidIndex(cli, fliIdx, e.keyCode);\n            if (fliIdx === -1) {\n                addClass([fli], 'e-focused');\n                return;\n            }\n            ul.children[fliIdx].focus();\n            ul.children[fliIdx].classList.add('e-focused');\n            if (!e.ctrlKey) {\n                this.selectHandler({ target: ul.children[fliIdx], ctrlKey: e.ctrlKey, shiftKey: e.shiftKey }, true);\n            }\n        }\n    }\n    KeyUp(e) {\n        const char = String.fromCharCode(e.keyCode);\n        const isWordCharacter = char.match(/\\w/);\n        if (!isNullOrUndefined(isWordCharacter)) {\n            this.isValidKey = true;\n        }\n        this.isValidKey = (e.keyCode === 8) || (e.keyCode === 46) || this.isValidKey;\n        if (this.isValidKey) {\n            this.isValidKey = false;\n            switch (e.keyCode) {\n                default:\n                    if (this.allowFiltering) {\n                        const eventArgsData = {\n                            preventDefaultAction: false,\n                            text: this.targetElement(),\n                            updateData: (dataSource, query, fields) => {\n                                if (eventArgsData.cancel) {\n                                    return;\n                                }\n                                this.isFiltered = true;\n                                this.remoteFilterAction = true;\n                                this.dataUpdater(dataSource, query, fields);\n                            },\n                            event: e,\n                            cancel: false\n                        };\n                        this.trigger('filtering', eventArgsData, (args) => {\n                            this.isDataFetched = false;\n                            if (args.cancel || (this.filterInput.value !== '' && this.isFiltered)) {\n                                return;\n                            }\n                            if (!args.cancel && !this.isCustomFiltering && !args.preventDefaultAction) {\n                                this.inputString = this.filterInput.value;\n                                this.filteringAction(this.jsonData, new Query(), this.fields);\n                            }\n                            if (!this.isFiltered && !this.isCustomFiltering && !args.preventDefaultAction) {\n                                this.dataUpdater(this.jsonData, new Query(), this.fields);\n                            }\n                        });\n                    }\n            }\n        }\n    }\n    /**\n     * To filter the data from given data source by using query.\n     *\n     * @param  {Object[] | DataManager } dataSource - Set the data source to filter.\n     * @param  {Query} query - Specify the query to filter the data.\n     * @param  {FieldSettingsModel} fields - Specify the fields to map the column in the data table.\n     * @returns {void}.\n     */\n    filter(dataSource, query, fields) {\n        this.isCustomFiltering = true;\n        this.filteringAction(dataSource, query, fields);\n    }\n    filteringAction(dataSource, query, fields) {\n        this.resetList(dataSource, fields, query);\n    }\n    targetElement() {\n        this.targetInputElement = this.list.getElementsByClassName('e-input-filter')[0];\n        return this.targetInputElement.value;\n    }\n    dataUpdater(dataSource, query, fields) {\n        this.isDataFetched = false;\n        const backCommand = true;\n        if (this.targetElement().trim() === '') {\n            const list = this.mainList.cloneNode ? this.mainList.cloneNode(true) : this.mainList;\n            if (backCommand) {\n                this.remoteCustomValue = false;\n                this.onActionComplete(list, this.jsonData);\n                this.notify('reOrder', { module: 'CheckBoxSelection', enable: this.selectionSettings.showCheckbox, e: this });\n            }\n        }\n        else {\n            this.resetList(dataSource, fields, query);\n        }\n    }\n    focusOutHandler() {\n        const ele = this.list.getElementsByClassName('e-focused')[0];\n        if (ele) {\n            ele.classList.remove('e-focused');\n        }\n        if (this.allowFiltering) {\n            this.refreshClearIcon();\n        }\n    }\n    getValidIndex(cli, index, keyCode) {\n        const cul = this.ulElement;\n        if (cli.classList.contains('e-disabled') || cli.classList.contains(cssClass.group)) {\n            if (keyCode === 40 || keyCode === 36) {\n                index++;\n            }\n            else {\n                index--;\n            }\n        }\n        if (index < 0 || index === cul.childElementCount) {\n            return -1;\n        }\n        cli = cul.querySelectorAll('.e-list-item')[index];\n        if (cli.classList.contains('e-disabled') || cli.classList.contains(cssClass.group)) {\n            index = this.getValidIndex(cli, index, keyCode);\n        }\n        return index;\n    }\n    updateSelectedOptions() {\n        const selectedOptions = [];\n        const values = [];\n        extend(values, this.value);\n        this.getSelectedItems().forEach((ele) => {\n            if (!ele.classList.contains('e-grabbed')) {\n                selectedOptions.push(this.getFormattedValue(ele.getAttribute('data-value')));\n            }\n        });\n        if (this.mainList.childElementCount === this.ulElement.childElementCount) {\n            if (this.allowFiltering && this.selectionSettings.showCheckbox) {\n                for (let i = 0; i < selectedOptions.length; i++) {\n                    if (values.indexOf(selectedOptions[i]) > -1) {\n                        continue;\n                    }\n                    else {\n                        values.push(selectedOptions[i]);\n                    }\n                }\n                this.setProperties({ value: values }, true);\n            }\n            else {\n                this.setProperties({ value: selectedOptions }, true);\n            }\n        }\n        this.updateSelectTag();\n        this.updateToolBarState();\n        if (this.tBListBox) {\n            this.tBListBox.updateToolBarState();\n        }\n    }\n    clearSelection(values = this.value) {\n        if (this.selectionSettings.showCheckbox) {\n            let dvalue;\n            this.getSelectedItems().forEach((li) => {\n                dvalue = this.getFormattedValue(li.getAttribute('data-value'));\n                if (values.indexOf(dvalue) < 0) {\n                    li.getElementsByClassName('e-check')[0].classList.remove('e-check');\n                    li.getElementsByClassName('e-checkbox-wrapper')[0].removeAttribute('aria-checked');\n                    li.removeAttribute('aria-selected');\n                }\n            });\n        }\n    }\n    setSelection(values = this.value, isSelect = true, isText = false) {\n        let li;\n        let liselect;\n        if (values) {\n            values.forEach((value) => {\n                let text;\n                if (isText) {\n                    text = this.getValueByText(value);\n                }\n                else {\n                    text = value;\n                }\n                li = this.list.querySelector('[data-value=\"' + text + '\"]');\n                if (li) {\n                    if (this.selectionSettings.showCheckbox) {\n                        liselect = li.getElementsByClassName('e-frame')[0].classList.contains('e-check');\n                    }\n                    else {\n                        liselect = li.classList.contains('e-selected');\n                    }\n                    if (!isSelect && liselect || isSelect && !liselect && li) {\n                        if (this.selectionSettings.showCheckbox) {\n                            this.notify('updatelist', { li: li, module: 'listbox' });\n                        }\n                        else {\n                            if (isSelect) {\n                                li.classList.add(cssClass.selected);\n                                li.setAttribute('aria-selected', 'true');\n                            }\n                            else {\n                                li.classList.remove(cssClass.selected);\n                                li.removeAttribute('aria-selected');\n                            }\n                        }\n                    }\n                }\n            });\n        }\n        this.updateSelectTag();\n    }\n    updateSelectTag() {\n        const ele = this.getSelectTag();\n        let innerHTML = '';\n        ele.innerHTML = '';\n        if (this.value) {\n            for (let i = 0, len = this.value.length; i < len; i++) {\n                innerHTML += '<option selected value=\"' + this.value[i] + '\"></option>';\n            }\n            ele.innerHTML += innerHTML;\n        }\n        this.checkSelectAll();\n    }\n    checkDisabledState(inst) {\n        return inst.ulElement.querySelectorAll('.' + cssClass.li).length === 0;\n    }\n    updateToolBarState() {\n        if (this.toolbarSettings.items.length) {\n            const listObj = this.getScopedListBox();\n            const wrap = this.list.parentElement.getElementsByClassName('e-listbox-tool')[0];\n            this.toolbarSettings.items.forEach((value) => {\n                const btn = wrap.querySelector('[data-value=\"' + value + '\"]');\n                switch (value) {\n                    case 'moveAllTo':\n                        btn.disabled = this.checkDisabledState(this);\n                        break;\n                    case 'moveAllFrom':\n                        btn.disabled = this.checkDisabledState(listObj);\n                        break;\n                    case 'moveFrom':\n                        btn.disabled = listObj.value && listObj.value.length ? false : true;\n                        break;\n                    case 'moveUp':\n                        btn.disabled = this.value && this.value.length\n                            && !this.isSelected(this.ulElement.children[0]) ? false : true;\n                        break;\n                    case 'moveDown':\n                        btn.disabled = this.value && this.value.length\n                            && !this.isSelected(this.ulElement.children[this.ulElement.childElementCount - 1]) ? false : true;\n                        break;\n                    default:\n                        btn.disabled = this.value && this.value.length ? false : true;\n                        break;\n                }\n            });\n        }\n    }\n    setCheckboxPosition() {\n        const listWrap = this.list;\n        if (!this.initLoad && this.selectionSettings.checkboxPosition === 'Left') {\n            listWrap.classList.remove('e-right');\n        }\n        if (this.selectionSettings.checkboxPosition === 'Right') {\n            listWrap.classList.add('e-right');\n        }\n    }\n    showCheckbox(showCheckbox) {\n        let index = 0;\n        const liColl = this.list.lastElementChild.querySelectorAll('li');\n        const liCollLen = this.list.lastElementChild.getElementsByClassName('e-list-item').length;\n        if (showCheckbox) {\n            this.ulElement = this.renderItems(this.listData, this.fields);\n            this.mainList = this.ulElement;\n            this.list.removeChild(this.list.getElementsByTagName('ul')[0]);\n            this.list.appendChild(this.ulElement);\n            if (this.selectionSettings.showSelectAll && !this.list.getElementsByClassName('e-selectall-parent')[0]) {\n                const l10nShow = new L10n(this.getModuleName(), { selectAllText: 'Select All', unSelectAllText: 'Unselect All' }, this.locale);\n                this.showSelectAll = true;\n                this.selectAllText = l10nShow.getConstant('selectAllText');\n                this.unSelectAllText = l10nShow.getConstant('unSelectAllText');\n                this.popupWrapper = this.list;\n                this.checkBoxSelectionModule.checkAllParent = null;\n                this.notify('selectAll', {});\n                this.checkSelectAll();\n            }\n        }\n        else {\n            if (this.list.getElementsByClassName('e-selectall-parent')[0]) {\n                this.list.removeChild(this.list.getElementsByClassName('e-selectall-parent')[0]);\n            }\n            for (index; index < liCollLen; index++) {\n                if (liColl[index].classList.contains('e-list-item')) {\n                    liColl[index].removeChild(liColl[index].getElementsByClassName('e-checkbox-wrapper')[0]);\n                }\n                if (liColl[index].hasAttribute('aria-selected')) {\n                    liColl[index].removeAttribute('aria-selected');\n                }\n            }\n            this.mainList = this.ulElement;\n        }\n        this.value = [];\n    }\n    isSelected(ele) {\n        if (!isNullOrUndefined(ele)) {\n            return ele.classList.contains(cssClass.selected) || ele.querySelector('.e-check') !== null;\n        }\n        else {\n            return false;\n        }\n    }\n    getSelectTag() {\n        return this.list.getElementsByClassName('e-hidden-select')[0];\n    }\n    getToolElem() {\n        return this.list.parentElement.getElementsByClassName('e-listbox-tool')[0];\n    }\n    formResetHandler() {\n        this.value = this.initialSelectedOptions;\n    }\n    /**\n     * Return the module name.\n     *\n     * @private\n     * @returns {string} - Module name\n     */\n    getModuleName() {\n        return 'listbox';\n    }\n    /**\n     * Get the properties to be maintained in the persisted state.\n     *\n     * @returns {string} - Persist data\n     */\n    getPersistData() {\n        return this.addOnPersist(['value']);\n    }\n    getLocaleName() {\n        return 'listbox';\n    }\n    destroy() {\n        this.unwireEvents();\n        if (this.element.tagName === 'EJS-LISTBOX') {\n            this.element.innerHTML = '';\n        }\n        else {\n            this.element.style.display = 'inline-block';\n            if (this.toolbarSettings.items.length) {\n                this.list.parentElement.parentElement.insertBefore(this.list, this.list.parentElement);\n                detach(this.list.nextElementSibling);\n            }\n            this.list.parentElement.insertBefore(this.element, this.list);\n        }\n        super.destroy();\n        if (this.itemTemplate) {\n            this.clearTemplate();\n        }\n    }\n    /**\n     * Called internally if any of the property value changed.\n     *\n     * @param {ListBoxModel} newProp - Specifies the new properties.\n     * @param {ListBoxModel} oldProp - Specifies the old properties.\n     * @returns {void}\n     * @private\n     */\n    onPropertyChanged(newProp, oldProp) {\n        const wrap = this.toolbarSettings.items.length ? this.list.parentElement : this.list;\n        super.onPropertyChanged(newProp, oldProp);\n        this.setUpdateInitial(['fields', 'query', 'dataSource'], newProp);\n        for (const prop of Object.keys(newProp)) {\n            switch (prop) {\n                case 'cssClass':\n                    if (oldProp.cssClass) {\n                        removeClass([wrap], oldProp.cssClass.split(' '));\n                    }\n                    if (newProp.cssClass) {\n                        addClass([wrap], newProp.cssClass.split(' '));\n                    }\n                    break;\n                case 'enableRtl':\n                    if (newProp.enableRtl) {\n                        this.list.classList.add('e-rtl');\n                    }\n                    else {\n                        this.list.classList.remove('e-rtl');\n                    }\n                    break;\n                case 'value':\n                    removeClass(this.list.querySelectorAll('.' + cssClass.selected), cssClass.selected);\n                    this.clearSelection(this.value);\n                    this.setSelection();\n                    break;\n                case 'height':\n                    this.setHeight();\n                    break;\n                case 'enabled':\n                    this.setEnable();\n                    break;\n                case 'allowDragAndDrop':\n                    if (newProp.allowDragAndDrop) {\n                        this.initDraggable();\n                    }\n                    else {\n                        getComponent(this.ulElement, 'sortable').destroy();\n                    }\n                    break;\n                case 'allowFiltering':\n                    if (this.allowFiltering) {\n                        this.setFiltering();\n                    }\n                    else {\n                        this.list.removeChild(this.list.getElementsByClassName('e-filter-parent')[0]);\n                        this.filterParent = null;\n                        removeClass([this.list], 'e-filter-list');\n                    }\n                    break;\n                case 'filterBarPlaceholder':\n                    if (this.allowFiltering) {\n                        if (this.filterInput) {\n                            Input.setPlaceholder(newProp.filterBarPlaceholder, this.filterInput);\n                        }\n                    }\n                    break;\n                case 'scope':\n                    if (this.allowDragAndDrop) {\n                        getComponent(this.ulElement, 'sortable').scope = newProp.scope;\n                    }\n                    if (this.toolbarSettings.items.length) {\n                        if (oldProp.scope) {\n                            getComponent(document.querySelector(oldProp.scope), this.getModuleName())\n                                .tBListBox = null;\n                        }\n                        if (newProp.scope) {\n                            getComponent(document.querySelector(newProp.scope), this.getModuleName())\n                                .tBListBox = this;\n                        }\n                    }\n                    break;\n                case 'toolbarSettings': {\n                    let ele;\n                    const pos = newProp.toolbarSettings.position;\n                    const toolElem = this.getToolElem();\n                    if (pos) {\n                        removeClass([wrap], ['e-right', 'e-left']);\n                        wrap.classList.add('e-' + pos.toLowerCase());\n                        if (pos === 'Left') {\n                            wrap.insertBefore(toolElem, this.list);\n                        }\n                        else {\n                            wrap.appendChild(toolElem);\n                        }\n                    }\n                    if (newProp.toolbarSettings.items) {\n                        if (oldProp.toolbarSettings && oldProp.toolbarSettings.items.length) {\n                            ele = this.list.parentElement;\n                            ele.parentElement.insertBefore(this.list, ele);\n                            detach(ele);\n                        }\n                        this.initToolbarAndStyles();\n                        this.wireToolbarEvent();\n                    }\n                    break;\n                }\n                case 'selectionSettings': {\n                    const showSelectAll = newProp.selectionSettings.showSelectAll;\n                    const showCheckbox = newProp.selectionSettings.showCheckbox;\n                    if (!isNullOrUndefined(showSelectAll)) {\n                        this.showSelectAll = showSelectAll;\n                        if (this.showSelectAll) {\n                            const l10nSel = new L10n(this.getModuleName(), { selectAllText: 'Select All', unSelectAllText: 'Unselect All' }, this.locale);\n                            this.checkBoxSelectionModule.checkAllParent = null;\n                            this.showSelectAll = true;\n                            this.selectAllText = l10nSel.getConstant('selectAllText');\n                            this.unSelectAllText = l10nSel.getConstant('selectAllText');\n                            this.popupWrapper = this.list;\n                        }\n                        this.notify('selectAll', {});\n                        this.checkSelectAll();\n                    }\n                    if (!isNullOrUndefined(showCheckbox)) {\n                        this.showCheckbox(showCheckbox);\n                    }\n                    if (this.selectionSettings.showCheckbox) {\n                        this.setCheckboxPosition();\n                    }\n                    break;\n                }\n                case 'dataSource':\n                    this.isDataSourceUpdate = true;\n                    this.jsonData = [].slice.call(this.dataSource);\n                    break;\n            }\n        }\n    }\n};\n__decorate$6([\n    Property('')\n], ListBox.prototype, \"cssClass\", void 0);\n__decorate$6([\n    Property([])\n], ListBox.prototype, \"value\", void 0);\n__decorate$6([\n    Property('')\n], ListBox.prototype, \"height\", void 0);\n__decorate$6([\n    Property(false)\n], ListBox.prototype, \"allowDragAndDrop\", void 0);\n__decorate$6([\n    Property(1000)\n], ListBox.prototype, \"maximumSelectionLength\", void 0);\n__decorate$6([\n    Property(false)\n], ListBox.prototype, \"allowFiltering\", void 0);\n__decorate$6([\n    Property('')\n], ListBox.prototype, \"scope\", void 0);\n__decorate$6([\n    Property(true)\n], ListBox.prototype, \"ignoreCase\", void 0);\n__decorate$6([\n    Property(null)\n], ListBox.prototype, \"filterBarPlaceholder\", void 0);\n__decorate$6([\n    Event()\n], ListBox.prototype, \"beforeItemRender\", void 0);\n__decorate$6([\n    Event()\n], ListBox.prototype, \"filtering\", void 0);\n__decorate$6([\n    Event()\n], ListBox.prototype, \"select\", void 0);\n__decorate$6([\n    Event()\n], ListBox.prototype, \"change\", void 0);\n__decorate$6([\n    Event()\n], ListBox.prototype, \"beforeDrop\", void 0);\n__decorate$6([\n    Event()\n], ListBox.prototype, \"dragStart\", void 0);\n__decorate$6([\n    Event()\n], ListBox.prototype, \"drag\", void 0);\n__decorate$6([\n    Event()\n], ListBox.prototype, \"drop\", void 0);\n__decorate$6([\n    Event()\n], ListBox.prototype, \"dataBound\", void 0);\n__decorate$6([\n    Property(null)\n], ListBox.prototype, \"groupTemplate\", void 0);\n__decorate$6([\n    Property('Request failed')\n], ListBox.prototype, \"actionFailureTemplate\", void 0);\n__decorate$6([\n    Property(1000)\n], ListBox.prototype, \"zIndex\", void 0);\n__decorate$6([\n    Property(false)\n], ListBox.prototype, \"ignoreAccent\", void 0);\n__decorate$6([\n    Complex({}, ToolbarSettings)\n], ListBox.prototype, \"toolbarSettings\", void 0);\n__decorate$6([\n    Complex({}, SelectionSettings)\n], ListBox.prototype, \"selectionSettings\", void 0);\nListBox = ListBox_1 = __decorate$6([\n    NotifyPropertyChanges\n], ListBox);\nconst listBoxClasses = {\n    backIcon: 'e-input-group-icon e-back-icon e-icons',\n    filterBarClearIcon: 'e-input-group-icon e-clear-icon e-icons',\n    filterInput: 'e-input-filter',\n    filterParent: 'e-filter-parent',\n    clearIcon: 'e-clear-icon'\n};\n\n/**\n * export all modules from current location\n */\n\n/**\n * export all modules from current location\n */\n\nexport { incrementalSearch, Search, resetIncrementalSearchValues, highlightSearch, revertHighlightSearch, FieldSettings, dropDownBaseClasses, DropDownBase, dropDownListClasses, DropDownList, Fields, TreeSettings, DropDownTree, ComboBox, AutoComplete, MultiSelect, CheckBoxSelection, createFloatLabel, updateFloatLabelState, removeFloating, setPlaceHolder, floatLabelFocus, floatLabelBlur, encodePlaceholder, SelectionSettings, ToolbarSettings, ListBox };\n"]},"metadata":{},"sourceType":"module"}